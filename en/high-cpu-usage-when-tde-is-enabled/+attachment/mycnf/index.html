#
[client]
port                            = 3306
socket                          = /u01/app/mysql/admin/mysqld/mysql.sock

[mariadb]
plugin_load_add = file_key_management
file_key_management_filename = /etc/mysql/encryption/keyfile.enc
file_key_management_filekey = FILE:/etc/mysql/encryption/keyfile.key
file_key_management_encryption_algorithm = AES_CTR

innodb_encrypt_tables = FORCE
innodb_encrypt_log = ON
innodb_encrypt_temporary_tables = ON

encrypt_tmp_disk_tables = ON
encrypt_tmp_files = ON
encrypt_binlog = ON
aria_encrypt_tables = ON

innodb_encryption_threads = 4
innodb_encryption_rotation_iops = 1000


[mysqld]
port                            = 3306
datadir                         = /u02/mysqldata/mysqld
tmpdir                          = /u01/app/mysql/admin/mysqld/tempdir
socket                          = /u01/app/mysql/admin/mysqld/mysql.sock

sql-mode                        = NO_ENGINE_SUBSTITUTION

key_buffer_size                 = 128M
max_allowed_packet              = 32M
tmp_table_size                  = 64M
max_heap_table_size             = 64M
myisam_sort_buffer_size         = 256k

open-files-limit                = 16384
net_write_timeout               = 900
net_read_timeout                = 900
lock_wait_timeout               = 14400

server-id                       = 1234
sync_binlog                     = 0
#innodb_support_xa               = 1

optimizer_switch                = materialization=off


max_binlog_size=256M
log-bin=/u03/mysqldata/mysqld/logbin/logbin
log-bin-index=/u03/mysqldata/mysqld/logbin/logbin
binlog_format=mixed

#log-bin                         = /glide/mysql/binlog/mysql-binlog
#relay-log                       = /glide/mysql/binlog/mysql-relay
#relay-log-index                 = /glide/mysql/binlog/mysql-relay.index
#relay-log-info-file             = /glide/mysql/binlog/mysql-relay.info

expire_logs_days                = 2
#log-slave-updates               = 1
#read-only                       = 0
#binlog_cache_size               = 1M
#slave_compressed_protocol       = 1
log-bin-trust-function-creators = 1

default-storage-engine          = innodb
character-set-server            = utf8
innodb_file_format              = Barracuda

query_cache_size                = 0
query_cache_type                = 0

eq_range_index_dive_limit       = 0

innodb_use_native_aio           = 1
innodb_stats_persistent         = 1
innodb_adaptive_flushing        = 1
innodb_checksum_algorithm       = crc32
innodb_log_buffer_size          = 16M
innodb_flush_log_at_trx_commit  = 0
innodb_stats_on_metadata        = 0
innodb_flush_method             = O_DIRECT
innodb_lock_wait_timeout        = 50
innodb_thread_concurrency       = 0
innodb_file_per_table
innodb_print_all_deadlocks      = on

performance_schema  = on

innodb_data_file_path           = ibdata1:10M:autoextend

old_passwords                   = off
secure-auth                     = on
local-infile                    = off

bind-address                    = 0.0.0.0

symbolic-links                  = 0

innodb_monitor_disable          = ALL

long_query_time                 = 1
log_queries_not_using_indexes   = 1

innodb_buffer_pool_size         = 11G
innodb_log_file_size            = 1024M
innodb_io_capacity              = 65536
innodb_buffer_pool_instances    = 12

innodb_open_files               = 8000
table_open_cache                = 8000
table_definition_cache          = 12000
sort_buffer_size                = 1M
max_connections                 = 4000
innodb_sync_spin_loops          = 20
innodb_read_io_threads          = 10
innodb_write_io_threads         = 8
innodb_strict_mode              = 0

innodb_autoinc_lock_mode        = 1
innodb_purge_threads            = 4
innodb_purge_batch_size         = 300
innodb_max_purge_lag            = 5000000

[mysqld_safe]
log-error                       = /u01/app/mysql/admin/mysqld/log/mysqld.err

[mysqldump]
quick
max_allowed_packet              = 32M

[mysql]
no-auto-rehash