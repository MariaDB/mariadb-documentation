<!DOCTYPE html>
<html>
<head data-cookie-domain=""
      data-cookie-path="/">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="apple-touch-icon" sizes="180x180" href="/kb/static/images/favicons/apple-touch-icon.159e713979be.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/kb/static/images/favicons/favicon-32x32.bc0ac1d5d11e.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/kb/static/images/favicons/favicon-16x16.5801f8f0f34e.png">
    <link rel="shortcut icon" href="/kb/static/images/favicons/favicon.d122d305dee4.ico" type="image/x-icon" />

    <title>Connector/Node.js Callback API - MariaDB Knowledge Base</title>

    <link href="/kb/static/css/main.9a0d7dcebefd.css" rel="stylesheet" type="text/css" />

    

    <!-- FB Open Graph tags -->
    <meta property="og:title" content="Connector/Node.js Callback API" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://mariadb.com/kb/en/connector-nodejs-callback-api/" />
    <meta property="og:image" content="http://mariadb.comaskmonty-logo.png" />
    <meta property="og:site_name" content="MariaDB KnowledgeBase" />
    <meta property="fb:admins" content="514852603" />
    <meta property="og:description" content="The non-default Connector/Node.js Callback API." />

    <meta name="description" content="The non-default Connector/Node.js Callback API." />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="//fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet"/>
    
</head>
<body class="mpkb nodes products nodes_view jqui" id="nodes_view">





<div id="menu-mobile" class="visible-sm visible-xs">

    <div>
        <div id="mobile-close-menu" class="text-right">
            <a href="javascript:void(0)" title="Close Menu" id="back-main" class="toggle-menu">X<span></span></a>
        </div>
    </div>
    <div class="mainmenu-mobile">
        <ul class="ls-none ul-menu">
            <li data-sub="submenu5"><a class="open-form-search" href="/kb/search/" title="Search">Search </a></li>
            <li data-sub="submenu0"><a href="/products" title="Products">Products</a><span class="arrow-main"></span></li>
            <li data-sub="submenu1"><a href="/services" title="Services">Services</a><span class="arrow-main"></span></li>
            <li data-sub="submenu2"><a href="/resources" title="Resources">Resources</a><span class="arrow-main"></span></li>
            <li data-sub="submenu3"><a href="/about-us" title="About">About</a><span class="arrow-main"></span></li>
            <li data-sub="submenu4"><a href="/contact" title="Contact">Contact</a></li>
        </ul>
    </div>

    <div class="nav-top-mobile">
        <div class="select-box form">

            <ul class="inline-block-md mb-none top-nav">
                <li>

                </li>
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/connector-nodejs-callback-api/"> Login</a>
                    </li>
                
            </ul>



        </div>
        <p class="text-center copyright">Copyright &copy; 2023 MariaDB. All rights reserved.</p>
    </div>
</div>
<div id="wrapper">
<div id="top-nav">
    <div class="container">
        <ul class="hidden-sm hidden-xs" >
            <li><a href="https://mariadb.com/kb/">Knowledge Base</a></li>
            <li><a href="https://mariadb.com/contact/">Contact</a></li>
            
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/connector-nodejs-callback-api/" rel="nofollow">Login</a>
                    </li>
                
            
            
            <li id="search-form">
                <form action="/kb/en/+search/" method="get" id="search-block-form" accept-charset="UTF-8">
                    <input id="search" title="Enter the terms you wish to search for."
                           placeholder="Search . . ." type="text"
                           name="q" value="" size="15" maxlength="128" class="form-text"
                           data-autocomplete-url="/kb/en/+search/autocomplete/">
                    <input type="hidden" name="quick" value="1" />
                    <input type="hidden" name="source" value="kb" />
                </form>
            </li>
            <li><a id="search-toggler" href="/kb/search/">Search</a></li>
            
        </ul>
    </div>
</div>
<div id="navbar-bottom" class="navbar">
    <div class="container">
        
        
        
        
        <div class="row">
            <div class="col-md-3 col-sm-9 col-xs-9">
                <a class="brand" href="/" title="MariaDB">
                    <img src="/kb/static/images/logo-2018-black.95f5978ae14d.png">
                </a>
            </div>
            <div class="col-md-9 hidden-sm hidden-xs">
                <div class="main-menu">
                    <ul id="main-menu" class="nav navbar-nav inline-block-sm">
    <li class="has-sub full-menu">
        <a href="/products" title="Products">Products</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/services" title="Services">Services</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/pricing" title="Pricing">Pricing</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/resources" title="Resources">Resources</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/about-us" title="About Us">About Us</a>
    </li>
    <li class="">
        <a class="button electric-eel small top-bar-right-download" href="/downloads/">Download</a>
    </li>
</ul>
                </div>
            </div>
            <div class="col-md-3 visible-sm visible-xs col-sm-3 col-xs-3 ps-rv">
                <div class="navbar-header text-right pull-right">
                    <button type="button" class="menu-control toggle-menu" id="open-menu">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="main">
    <div class="container">
        

        <div id="subheader1" class="clearfix">
            <div class="pull-left">
                
                <div id="breadcrumbs" class="breadcrumb">
                    <a href="/kb/en/">Knowledge Base</a>
                    


    
    » <a class="crumb" href="/kb/en/server-client-software/">Server &amp; Client Software</a>
    

    
    » <a class="crumb" href="/kb/en/client-libraries/">Client Libraries</a>
    

    
    » <a class="crumb" href="/kb/en/connectors/">Application Programming Interfaces</a>
    

    
    » <a class="crumb" href="/kb/en/nodejs-connector/">Node.js Connector</a>
    


    » <a class="node_link crumb" href="/kb/en/connector-nodejs-callback-api/">Connector/Node.js Callback API</a>


                </div>
                
            </div>
        </div>
    </div>
    <div class="container" id="container-main">
        <div class="row">
            
            
                
                <aside id="sidebar-first" class="sidebar col-md-2 hidden-xs hidden-sm hidden-print">
                    
                        
                        <ul id="category_menu" class="nav nav-pills nav-stacked">
                            <li><a href="/kb/en/">Home</a></li>
                            
                                
                                    <li><a href="/kb/en/+questions/">Open Questions</a></li>
                                
                                <li><a href="/kb/en/documentation/">MariaDB Server</a></li>
                                <li><a href="/kb/en/maxscale/">MariaDB MaxScale</a></li>
                                <li><a href="/kb/en/mariadb-columnstore/">MariaDB ColumnStore</a></li>
                                <li><a href="/kb/en/connectors/">Connectors</a></li>
                            

                        </ul>
                    

                    
<div>



<div class="well well-small box actions"><div>

        <a class="btn btn-block btn-blue btn-sm" href="/kb/en/connector-nodejs-callback-api/+history" rel="nofollow">History</a>
        
        
        
        <a class="btn btn-block btn-blue btn-sm" href="/kb/en/connector-nodejs-callback-api/+source/">Source</a>
        
        <a class="btn btn-block btn-blue btn-sm flag" href="/kb/en/connector-nodejs-callback-api/+flag"
                data-flag-url="/kb/en/connector-nodejs-callback-api/+flag" rel="nofollow">
                Flag as Spam / Inappropriate</a>
        
        <a class="btn btn-block btn-blue btn-sm" href="/kb/en/connector-nodejs-callback-api/+translate/">
                Translate</a>
        

</div>
</div>





<div class="well well-small box node_info"><div>

    <dl>
        <dt>Created</dt>
        <dd>

<span class="datetime" title="2018-07-25 11:53">4 years, 7 months ago</span></dd>

        <dt>Modified</dt>
        <dd>

<span class="datetime" title="2021-12-01 23:34">1 year, 3 months ago</span></dd>

        <dt>Type</dt>
        <dd>article</dd>

        <dt>Status</dt>
        <dd>active</dd>

        <dt>License</dt>
        <dd>
            
                <a href="/kb/en/connector-nodejs-callback-api/+license/">CC BY-SA / Gnu FDL</a>
            
        </dd>

        
    </dl>

    
    <ul class="rss_feeds">
        <li><a href="/kb/en/connector-nodejs-callback-api/+history/feed/">
            History</a>
        </li>
        <li><a href="/kb/en/connector-nodejs-callback-api/+comments/feed/">
            Comments</a>
        </li>
    </ul>
    

</div>
</div>





    
    
    

<div class="well well-small box attachments"><div><div class="edit_link pull-right"><a href="/kb/en/connector-nodejs-callback-api/+edit/attachments/">Edit</a></div><h5>Attachments</h5></div><div>

        
            <div class="no_data">No attachments exist</div>
        
    
</div>
</div>

    



    
    
        

<div class="well well-small box"><div><h5>Localized Versions</h5></div><div>

        <ul>
            
            <li><a href="/kb/ru/connector-nodejs-callback-api/">Connector/Node.js Callback API</a> [ru]</li>
            
        </ul>
        
</div>
</div>

    






</div>


                    

































                </aside>
            
            
            
                
            
            
                
            
            <section id="content" class="limited_width col-md-8 clearfix">
                
                    <h1>Connector/Node.js Callback API</h1>
                

                



                <div>
                    
    

    
    
    

    <div class="node creole">
        
        
        


    
    <div class="answer formatted">
        <h1 class="anchored_heading" id="documentation">Documentation</h1>
<p>There are two different connection implementation: one, the default, uses Promise and the other uses Callback, allowing for compatibility with the mysql and mysql2 API's.  The documentation provided on this page follows Callback.  If you want information on the Promise API, see the  <a href="/kb/en/connector-nodejs-promise-api/">documentation</a>. </p>
<h2 class="anchored_heading" id="quick-start">Quick Start</h2>
<p>Install the mariadb Connector using npm</p>
<pre class="fixed">$ npm install mariadb
</pre><p>You can then uses the Connector in your application code with the Callback API.  For instance,</p>
<pre class="fixed">  <span class="kr">const</span> <span class="nx">mariadb</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;mariadb/callback&#39;</span><span class="p">);</span>
  <span class="kr">const</span> <span class="nx">conn</span> <span class="o">=</span> <span class="nx">mariadb</span><span class="p">.</span><span class="nx">createConnection</span><span class="p">({</span><span class="nx">host</span><span class="o">:</span> <span class="s1">&#39;mydb.com&#39;</span><span class="p">,</span> <span class="nx">user</span><span class="o">:</span><span class="s1">&#39;myUser&#39;</span><span class="p">,</span> <span class="nx">password</span><span class="o">:</span> <span class="s1">&#39;myPwd&#39;</span><span class="p">});</span>
  <span class="nx">conn</span><span class="p">.</span><span class="nx">query</span><span class="p">(</span><span class="s2">&quot;SELECT 1 as val&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">rows</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">rows</span><span class="p">);</span> <span class="c1">//[ {val: 1}, meta: ... ]</span>
      <span class="nx">conn</span><span class="p">.</span><span class="nx">query</span><span class="p">(</span><span class="s2">&quot;INSERT INTO myTable value (?, ?)&quot;</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;mariadb&quot;</span><span class="p">],</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">res</span><span class="p">);</span> <span class="c1">// { affectedRows: 1, insertId: 1, warningStatus: 0 }</span>
        <span class="nx">conn</span><span class="p">.</span><span class="nx">end</span><span class="p">();</span>
      <span class="p">});</span>
  <span class="p">});</span>
</pre><h2 class="anchored_heading" id="installation">Installation</h2>
<p>In order to use the Connector you first need to install it on your system.  The installation process for Promise and Callback API's is managed with the same package through npm. </p>
<pre class="fixed">$ npm install mariadb
</pre><p>To use the Connector, you need to import the package into your application code.  Given that the Callback API is not the default, the `require()` statement is a little different.</p>
<pre class="fixed"><span class="kr">const</span> <span class="nx">mariadb</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;mariadb/callback&#39;</span><span class="p">);</span>
</pre><p>This initializes the constant `mariadb`, which is set to use the Callback API rather than the default Promise API.</p>
<h2 class="anchored_heading" id="timezone-consideration">Timezone consideration</h2>
<p>It's not recommended, but in some cases, Node.js and database are configured with different timezone. </p>
<p>By default, `timezone` option is set to 'local' value, indicating to use client timezone, so no conversion will be done.</p>
<p>If client and server timezone differ, `timezone` option has to be set to server timezone.
- 'auto' value means client will request server timezone when creating a connection, and use server timezone afterwhile. 
- To avoid this additional command on connection, `timezone` can be set to <a href="https://en.wikipedia.org/wiki/List_of_tz_database_time_zones">IANA time zone</a>. </p>
<p>Connector will then convert date to server timezone, rather than the current Node.js timezone. </p>
<h1 class="anchored_heading" id="callback-api">Callback API</h1>
<p>The Connector with the Callback API is similar to the one using Promise, but with a few differences.</p>
<p><strong>Base:</strong></p>
<ul start="1"><li><a href="#createconnectionoptions-connection">createConnection(options) → Connection</a>: Creates a connection to a MariaDB Server.
</li><li><a href="#createpooloptions-pool">createPool(options) → Pool</a> : Creates a new Pool.
</li><li><a href="#createpoolclusteroptions-poolcluster">createPoolCluster(options) → PoolCluster</a> : Creates a new pool cluster.
</li></ul>
<p><strong>Connection:</strong></p>
<ul start="1"><li><a href="#connectionquerysql-values-callback-emitter">connection.query(sql[, values][, callback]) → Emitter</a>: Executes a query.
</li><li><a href="#connectionbatchsql-values-callback">connection.batch(sql, values[, callback])</a>: fast batch processing.
</li><li><a href="#connectionbegintransactioncallback">connection.beginTransaction([callback])</a>: Begins a transaction
</li><li><a href="#connectioncommitcallback">connection.commit([callback])</a>: Commit the current transaction, if any.
</li><li><a href="#connectionrollbackcallback">connection.rollback([callback])</a>: Rolls back the current transaction, if any.
</li><li><a href="#connectionchangeuseroptions-callback">connection.changeUser(options[, callback])</a>: Changes the current connection user.
</li><li><a href="#connectionpingcallback">connection.ping([callback])</a>: Sends an empty packet to the server to check that connection is active.
</li><li><a href="#connectionendcallback">connection.end([callback])</a>: Gracefully closes the connection.
</li><li><a href="#connectionreset">connection.reset([callback])</a>: reset current connection state.
</li><li><a href="#connectionisvalid-boolean">connection.isValid() → boolean</a>: Checks that the connection is active without checking socket state.
</li><li><a href="#connectiondestroy">connection.destroy()</a>: Forces the connection to close. 
</li><li><a href="#connectionpause">connection.pause()</a>: Pauses the socket output.
</li><li><a href="#connectionresume">connection.resume()</a>: Resumes the socket output.
</li><li><a href="#connectionserverversion">connection.serverVersion()</a>: Retrieves the current server version.
</li><li><a href="#events">events</a>: Subscribes to connection error events.
</li></ul>
<p><strong>Pool:</strong></p>
<ul start="1"><li><a href="#poolgetconnectioncallback">pool.getConnection([callback])</a> : Creates a new connection.
</li><li><a href="#poolquerysql-values-callback">pool.query(sql[, values][, callback])</a>: Executes a query.
</li><li><a href="#poolbatchsql-values-callback">pool.batch(sql, values[, callback])</a>: Executes a batch
</li><li><a href="#poolendcallback">pool.end([callback])</a>: Gracefully closes the connection.
</li><li>pool.activeConnections() → Number: Gets current active connection number.
</li><li>pool.totalConnections() → Number: Gets current total connection number.
</li><li>pool.idleConnections() → Number: Gets current idle connection number.
</li><li>pool.taskQueueSize() → Number: Gets current stacked request.
</li><li><a href="#pool-events-1">pool events</a>: Subscribes to pool events.
</li></ul>
<p><strong>PoolCluster</strong></p>
<ul start="1"><li><a href="#poolclusteraddid-config">poolCluster.add(id, config)</a> : add a pool to cluster.
</li><li><a href="#poolclusterremovepattern">poolCluster.remove(pattern)</a> : remove and end pool according to pattern.
</li><li><a href="#poolclusterendcallback">poolCluster.end([callback])</a> : end cluster.
</li><li><a href="#poolclustergetconnectionpattern-selector-callback">poolCluster.getConnection([pattern, ][selector, ]callback)</a> : return a connection from cluster.
</li><li><a href="#poolcluster-events">poolCluster events</a>: Subscribes to pool cluster events.
</li><li><a href="#poolclusterofpattern-selector-filteredpoolcluster">poolCluster.of(pattern, selector) → FilteredPoolCluster</a> : return a subset of cluster.
</li></ul>
<h1 class="anchored_heading" id="base-api">Base API</h1>
<h2 class="anchored_heading" id="createconnectionoptions-connection">createConnection(options) → Connection</h2>
<div class="cstm-style bluebox"><ul start="1"><li>`options`: *JSON/String* Uses the same options as Promise API. For a complete list, see <a href="/documentation/connection-options.md">option documentation</a>.
</li></ul>
<p> Returns a Connection object</p>
</div><p>Creates a new connection.</p>
<p>The difference between this method and the same with the Promise API is that this method returns a `Connection` object, rather than a Promise that resolves to a `Connection` object.</p>
<pre class="fixed"><span class="kr">const</span> <span class="nx">mariadb</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;mariadb/callback&#39;</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">conn</span> <span class="o">=</span> <span class="nx">mariadb</span><span class="p">.</span><span class="nx">createConnection</span><span class="p">({</span>
      <span class="nx">host</span><span class="o">:</span> <span class="s1">&#39;mydb.com&#39;</span><span class="p">,</span> 
      <span class="nx">user</span><span class="o">:</span><span class="s1">&#39;myUser&#39;</span><span class="p">,</span>
      <span class="nx">password</span><span class="o">:</span> <span class="s1">&#39;myPwd&#39;</span>
    <span class="p">});</span>
<span class="nx">conn</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;not connected due to error: &quot;</span> <span class="o">+</span> <span class="nx">err</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;connected ! connection id is &quot;</span> <span class="o">+</span> <span class="nx">conn</span><span class="p">.</span><span class="nx">threadId</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">});</span>
</pre><h3 class="anchored_heading" id="connection-options">Connection options</h3>
<p>Essential options list:</p>
<div class="cstm-style newspaper-side table-head-align-top"><table><tr><th><strong>user</strong></th><td>User to access database.</td><td>*string*</td><td></td></tr>
<tr><th><strong>user</strong></th><td>User to access database.</td><td>*string*</td><td></td></tr>
<tr><th><strong>password</strong></th><td>User password.</td><td>*string*</td><td></td></tr>
<tr><th><strong>host</strong></th><td>IP address or DNS of the database server. *Not used when using option `socketPath`*.</td><td>*string*</td><td>"localhost"</td></tr>
<tr><th><strong>port</strong></th><td>Database server port number. *Not used when using option `socketPath`*</td><td>*integer*</td><td>3306</td></tr>
<tr><th><strong>ssl</strong></th><td>Enables TLS support. For more information, see the <a href="/documentation/connection-options.md#ssl">ssl option</a> documentation.</td><td>*mixed*</td><td></td></tr>
<tr><th><strong>database</strong></th><td>Default database to use when establishing the connection.</td><td>*string*</td><td></td></tr>
<tr><th><strong>socketPath</strong></th><td>Permits connections to the database through the Unix domain socket or named pipe.</td><td>*string*</td><td></td></tr>
<tr><th><strong>compress</strong></th><td>Compresses the exchange with the database through gzip.  This permits better performance when the database is not in the same location.</td><td>*boolean*</td><td>false</td></tr>
<tr><th><strong>connectTimeout</strong></th><td>Sets the connection timeout in milliseconds.</td><td>*integer*</td><td>10 000</td></tr>
<tr><th><strong>socketTimeout</strong></th><td>Sets the socket timeout in milliseconds after connection succeeds. A value of `0` disables the timeout.</td><td>*integer*</td><td>0</td></tr>
<tr><th><strong>rowsAsArray</strong></th><td>Returns result-sets as arrays, rather than JSON. This is a faster way to get results. For more information, see Query.</td><td>*boolean*</td><td>false</td></tr>
</table>
</div><p>For more information, see the <a href="/documentation/connection-options.md">Connection Options</a> documentation. </p>
<h3 class="anchored_heading" id="connecting-to-local-databases">Connecting to Local Databases</h3>
<p>When working with a local database (that is, cases where MariaDB and your Node.js application run on the same host), you can connect to MariaDB through the Unix socket or Windows named pipe for better performance, rather than using the TCP/IP layer.</p>
<p>In order to set this up, you need to assign the connection a `socketPath` value.  When this is done, the Connector ignores the `host` and `port` options.</p>
<p>The specific socket path you need to set is defined by the 
<a href="https://mariadb.com/kb/en/library/server-system-variables/#socket">socket</a> server system variable.  If you don't know it off hand, you can retrieve it from the server.</p>
<pre class="fixed"><span class="k">SHOW</span> <span class="n">VARIABLES</span> <span class="k">LIKE</span> <span class="s1">&#39;socket&#39;</span><span class="p">;</span>
</pre><p>It defaults to `/tmp/mysql.sock` on Unix-like operating systems and `MySQL` on Windows.  Additionally, on Windows, this feature only works when the server is started with the `--enable-named-pipe` option.</p>
<p>For instance, on Unix a connection might look like this:</p>
<pre class="fixed"><span class="kr">const</span> <span class="nx">mariadb</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;mariadb/callback&#39;</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">conn</span> <span class="o">=</span> <span class="nx">mariadb</span><span class="p">.</span><span class="nx">createConnection</span><span class="p">({</span> <span class="nx">socketPath</span><span class="o">:</span> <span class="s1">&#39;/tmp/mysql.sock&#39;</span><span class="p">,</span> <span class="nx">user</span><span class="o">:</span> <span class="s1">&#39;root&#39;</span> <span class="p">});</span>
<span class="nx">conn</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">//do something with connection</span>
  <span class="nx">conn</span><span class="p">.</span><span class="nx">end</span><span class="p">();</span>
<span class="p">});</span>

</pre><p>It has a similar syntax on Windows: </p>
<pre class="fixed"><span class="kr">const</span> <span class="nx">mariadb</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;mariadb/callback&#39;</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">conn</span> <span class="o">=</span> <span class="nx">mariadb</span><span class="p">.</span><span class="nx">createConnection</span><span class="p">({</span> <span class="nx">socketPath</span><span class="o">:</span> <span class="s1">&#39;\\\\.\\pipe\\MySQL&#39;</span><span class="p">,</span> <span class="nx">user</span><span class="o">:</span> <span class="s1">&#39;root&#39;</span> <span class="p">});</span>
</pre><h3 class="anchored_heading" id="createpooloptions-pool">createPool(options) → Pool</h3>
<div class="cstm-style bluebox"><ul start="1"><li>`options`: *JSON/string* <a href="#pool-options">pool options</a>
</li></ul>
<p> Returns a <a href="#pool-api">Pool</a> object,</p>
</div><p>Creates a new pool.</p>
<p><strong>Example:</strong></p>
<pre class="fixed"><span class="kr">const</span> <span class="nx">mariadb</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;mariadb/callback&#39;</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">pool</span> <span class="o">=</span> <span class="nx">mariadb</span><span class="p">.</span><span class="nx">createPool</span><span class="p">({</span> <span class="nx">host</span><span class="o">:</span> <span class="s1">&#39;mydb.com&#39;</span><span class="p">,</span> <span class="nx">user</span><span class="o">:</span> <span class="s1">&#39;myUser&#39;</span><span class="p">,</span> <span class="nx">connectionLimit</span><span class="o">:</span> <span class="mi">5</span> <span class="p">});</span>
<span class="nx">pool</span><span class="p">.</span><span class="nx">getConnection</span><span class="p">((</span><span class="nx">err</span><span class="p">,</span> <span class="nx">conn</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;not connected due to error: &quot;</span> <span class="o">+</span> <span class="nx">err</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;connected ! connection id is &quot;</span> <span class="o">+</span> <span class="nx">conn</span><span class="p">.</span><span class="nx">threadId</span><span class="p">);</span>
    <span class="nx">conn</span><span class="p">.</span><span class="nx">end</span><span class="p">();</span> <span class="c1">//release to pool</span>
  <span class="p">}</span>
<span class="p">});</span>
</pre><h4 class="anchored_heading" id="pool-options">Pool options</h4>
<p>Pool options includes <a href="#connection-options">connection option documentation</a> that will be used when creating new connections. </p>
<p>Specific options for pools are :</p>
<div class="cstm-style newspaper-side table-head-align-top"><table><tr><th><strong>acquireTimeout</strong></th><td>Timeout to get a new connection from pool in ms.</td><td>*integer*</td><td>10000</td></tr>
<tr><th><strong>connectionLimit</strong></th><td>Maximum number of connection in pool.</td><td>*integer*</td><td>10</td></tr>
<tr><th><strong>idleTimeout</strong></th><td>Indicate idle time after which a pool connection is released. Value must be lower than <a href="https://mariadb.com/kb/en/library/server-system-variables/#wait_timeout)._In_seconds_(0_means_never_release">@@wait_timeout</a></td><td>*integer*</td><td>1800</td></tr>
<tr><th><strong>minimumIdle</strong></th><td>Permit to set a minimum number of connection in pool. <strong>Recommendation is to use fixed pool, so not setting this value</strong>.</td><td>*integer*</td><td>*set to connectionLimit value*</td></tr>
<tr><th><strong>minDelayValidation</strong></th><td>When asking a connection to pool, the pool will validate the connection state. "minDelayValidation" permits disabling this validation if the connection has been borrowed recently avoiding useless verifications in case of frequent reuse of connections. 0 means validation is done each time the connection is asked. (in ms)</td><td>*integer*</td><td>500</td></tr>
<tr><th><strong>noControlAfterUse</strong></th><td>After giving back connection to pool (connection.end) connector will reset or rollback connection to ensure a valid state. This option permit to disable those controls</td><td>*boolean*</td><td>false</td></tr>
</table>
</div><h2 class="anchored_heading" id="pool-events">Pool events</h2>
<div class="cstm-style newspaper-side table-head-align-top"><table><tr><th><strong>acquire</strong></th><td>This event emits a connection is acquired from pool.</td></tr>
<tr><th><strong>connection</strong></th><td>This event is emitted when a new connection is added to the pool. Has a connection object parameter</td></tr>
<tr><th><strong>enqueue</strong></th><td>This event is emitted when a command cannot be satisfied immediately by the pool and is queued.</td></tr>
<tr><th><strong>release</strong></th><td>This event is emitted when a connection is released back into the pool. Has a connection object parameter</td></tr>
</table>
</div><p><strong>Example:</strong></p>
<pre class="fixed"><span class="nx">pool</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;connection&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nx">conn</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`connection </span><span class="si">${</span><span class="nx">conn</span><span class="p">.</span><span class="nx">threadId</span><span class="si">}</span><span class="sb"> has been created in pool`</span><span class="p">);</span>
</pre><h3 class="anchored_heading" id="createpoolclusteroptions-poolcluster">createPoolCluster(options) → PoolCluster</h3>
<div class="cstm-style bluebox"><ul start="1"><li>`options`: *JSON* <a href="#poolCluster-options">poolCluster options</a>
</li></ul>
<p> Returns a <a href="#poolCluster-api">PoolCluster</a> object,</p>
</div><p>Creates a new pool cluster. Cluster handle multiple pools, giving high availability / distributing load (using round robin / random / ordered ).</p>
<p><strong>Example:</strong></p>
<pre class="fixed"><span class="kr">const</span> <span class="nx">mariadb</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;mariadb/callback&#39;</span><span class="p">);</span>

<span class="kr">const</span> <span class="nx">cluster</span> <span class="o">=</span> <span class="nx">mariadb</span><span class="p">.</span><span class="nx">createPoolCluster</span><span class="p">();</span>
<span class="nx">cluster</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s2">&quot;master&quot;</span><span class="p">,</span> <span class="p">{</span> <span class="nx">host</span><span class="o">:</span> <span class="s1">&#39;mydb1.com&#39;</span><span class="p">,</span> <span class="nx">user</span><span class="o">:</span> <span class="s1">&#39;myUser&#39;</span><span class="p">,</span> <span class="nx">connectionLimit</span><span class="o">:</span> <span class="mi">5</span> <span class="p">});</span>
<span class="nx">cluster</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s2">&quot;slave1&quot;</span><span class="p">,</span> <span class="p">{</span> <span class="nx">host</span><span class="o">:</span> <span class="s1">&#39;mydb2.com&#39;</span><span class="p">,</span> <span class="nx">user</span><span class="o">:</span> <span class="s1">&#39;myUser&#39;</span><span class="p">,</span> <span class="nx">connectionLimit</span><span class="o">:</span> <span class="mi">5</span> <span class="p">});</span>
<span class="nx">cluster</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s2">&quot;slave2&quot;</span><span class="p">,</span> <span class="p">{</span> <span class="nx">host</span><span class="o">:</span> <span class="s1">&#39;mydb3.com&#39;</span><span class="p">,</span> <span class="nx">user</span><span class="o">:</span> <span class="s1">&#39;myUser&#39;</span><span class="p">,</span> <span class="nx">connectionLimit</span><span class="o">:</span> <span class="mi">5</span> <span class="p">});</span>

<span class="c1">//getting a connection from slave1 or slave2 using round-robin</span>
<span class="nx">cluster</span><span class="p">.</span><span class="nx">getConnection</span><span class="p">(</span><span class="sr">/^slave*$/</span><span class="p">,</span> <span class="s2">&quot;RR&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">conn</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">conn</span><span class="p">.</span><span class="nx">query</span><span class="p">(</span><span class="s2">&quot;SELECT 1&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">rows</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
     <span class="nx">conn</span><span class="p">.</span><span class="nx">end</span><span class="p">();</span>
     <span class="k">return</span> <span class="nx">row</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;@node&quot;</span><span class="p">];</span>
  <span class="p">});</span>
<span class="p">});</span>
</pre><h4 class="anchored_heading" id="poolcluster-options">PoolCluster options</h4>
<p>Pool cluster options includes <a href="#pool-options">pool option documentation</a> that will be used when creating new pools. </p>
<p>Specific options for pool cluster are :</p>
<div class="cstm-style newspaper-side table-head-align-top"><table><tr><th><strong>canRetry</strong></th><td>When getting a connection from pool fails, can cluster retry with other pools</td><td>*boolean*</td><td>true</td></tr>
<tr><th><strong>removeNodeErrorCount</strong></th><td>Maximum number of consecutive connection fail from a pool before pool is removed from cluster configuration. null means node won't be removed</td><td>*integer*</td><td>5</td></tr>
<tr><th><strong>restoreNodeTimeout</strong></th><td>delay before a pool can be reused after a connection fails. 0 = can be reused immediately (in ms)</td><td>*integer*</td><td>0</td></tr>
<tr><th><strong>defaultSelector</strong></th><td>default pools selector. Can be 'RR' (round-robin), 'RANDOM' or 'ORDER' (use in sequence = always use first pools unless fails)</td><td>*string*</td><td>'RR'</td></tr>
</table>
</div><h1 class="anchored_heading" id="connection-api">Connection API</h1>
<h2 class="anchored_heading" id="connectionquerysql-values-callback-emitter">connection.query(sql[, values][, callback])` -&gt; `Emitter</h2>
<div class="cstm-style bluebox"><ul start="1"><li>`sql`: *string | JSON* An SQL string value or JSON object to supersede default connections options.  If  aJSON object, it must have an `"sql"` property.  For example: `{dateStrings:true, sql:'SELECT NOW()'}`
</li><li>`values`: *array | object* Placeholder values. Usually an array, but in cases of just one placeholder, it can be given as is. 
</li><li>`callback`: *function* Callback function with arguments (error, results, metadata).
</li></ul>
<p>Returns an Emitter object that can emit four different types of event:</p>
<ul start="1"><li>error : Emits an <a href="#error">Error</a> object, when query failed.
</li><li>columns : Emits when columns metadata from result-set are received (parameter is an array of <a href="#metadata-field%29">Metadata fields</a>.
</li><li>data : Emits each time a row is received (parameter is a row). 
</li><li>end : Emits when the query ends (no parameter). 
</li></ul>
</div><p>Sends query to the database with a Callback function to call when done. </p>
<p>In cases where the query returns huge result-sets, this means that all data is stored in  memory.  You may find it more practical to use the `Emitter` object to handle the rows one by one, to avoid overloading memory resources.</p>
<p>For example, issuing a query with an SQL string:</p>
<pre class="fixed"><span class="nx">connection</span><span class="p">.</span><span class="nx">query</span><span class="p">(</span><span class="s2">&quot;SELECT NOW()&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">rows</span><span class="p">,</span> <span class="nx">meta</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="k">throw</span> <span class="nx">err</span><span class="p">;</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">rows</span><span class="p">);</span> <span class="c1">//[ { &#39;now()&#39;: 2018-07-02T17:06:38.000Z } ]</span>
<span class="p">});</span>
</pre><p>Using JSON objects:</p>
<pre class="fixed"><span class="nx">connection</span><span class="p">.</span><span class="nx">query</span><span class="p">({</span><span class="nx">dateStrings</span><span class="o">:</span><span class="kc">true</span><span class="p">,</span> <span class="nx">sql</span><span class="o">:</span><span class="s1">&#39;SELECT now()&#39;</span><span class="p">},</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">rows</span><span class="p">,</span> <span class="nx">meta</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="k">throw</span> <span class="nx">err</span><span class="p">;</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">rows</span><span class="p">);</span> <span class="c1">//[ { &#39;now()&#39;: &#39;2018-07-02 19:06:38&#39; } ]</span>
<span class="p">});</span>
</pre><h3 class="anchored_heading" id="placeholder">Placeholder</h3>
<p>To avoid SQL Injection attacks, queries permit the use of a question mark as a placeholder.  The Connector escapes values according to their type.  You can use any native JavaScript type, Buffer, Readable or any object with a `toSqlString` method in these values.  All other objects are stringified using the `JSON.stringify` method.</p>
<p>The Connector automatically streams objects that implement Readable.  In these cases, check the values on the following server system variables, as they may interfere:</p>
<p>- <a href="https://mariadb.com/kb/en/library/server-system-variables/#net_write_timeout">net_read_timeout</a>: The server must receive the query in full from the Connector before timing out.  The default value for this system variable is 30 seconds.
- <a href="https://mariadb.com/kb/en/library/server-system-variables/#max_allowed_packet">max_allowed_packet</a>: Using this system variable you can control the maximum amount of data the Connector can send to the server.</p>
<pre class="fixed"><span class="c1">// Sends INSERT INTO someTable VALUES (1, _BINARY &#39;.\&#39;.st&#39;, &#39;mariadb&#39;)</span>
<span class="nx">connection</span><span class="p">.</span><span class="nx">query</span><span class="p">(</span>
  <span class="s2">&quot;INSERT INTO someTable VALUES (?, ?, ?)&quot;</span><span class="p">,</span>
  <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="nx">Buffer</span><span class="p">.</span><span class="nx">from</span><span class="p">(</span><span class="s2">&quot;c327a97374&quot;</span><span class="p">,</span> <span class="s2">&quot;hex&quot;</span><span class="p">),</span> <span class="s2">&quot;mariadb&quot;</span><span class="p">],</span>
  <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">result</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
	<span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="k">throw</span> <span class="nx">err</span><span class="p">;</span>
	<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
	<span class="c1">//log : { affectedRows: 1, insertId: 1, warningStatus: 0 }</span>
  <span class="p">}</span>
<span class="p">);</span>
</pre><p>You can also issue the same query using Streaming.</p>
<pre class="fixed"><span class="kr">const</span> <span class="nx">https</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;https&quot;</span><span class="p">);</span>
<span class="nx">https</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&quot;https://node.green/#ES2018-features-Promise-prototype-finally-basic-support&quot;</span><span class="p">,</span>
  <span class="nx">readableStream</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">connection</span><span class="p">.</span><span class="nx">query</span><span class="p">(</span><span class="s2">&quot;INSERT INTO StreamingContent (b) VALUE (?)&quot;</span><span class="p">,</span> <span class="p">[</span><span class="nx">readableStream</span><span class="p">],</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
       <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="k">throw</span> <span class="nx">err</span><span class="p">;</span>
       <span class="c1">//inserted</span>
    <span class="p">});</span>
  <span class="p">}</span>
<span class="p">)</span>
</pre><h3 class="anchored_heading" id="query-results">Query Results</h3>
<p>Queries issued from the Connector return two different kinds of results: a JSON object and an array, depending on the type of query you issue.  Queries that write to the database, such as `INSERT`, `DELETE` and `UPDATE` commands return a JSON object with the following properties:</p>
<ul start="1"><li>`affectedRows`: Indicates the number of rows affected by the query.
</li><li>`insertId`: Shows the last auto-increment value from an `INSERT`.
</li><li>`warningStatus`: Indicates whether the query ended with a warning.
</li></ul>
<pre class="fixed"><span class="nx">connection</span><span class="p">.</span><span class="nx">query</span><span class="p">(</span>
  <span class="s2">&quot;CREATE TABLE animals (&quot;</span> <span class="o">+</span>
	<span class="s2">&quot;id MEDIUMINT NOT NULL AUTO_INCREMENT,&quot;</span> <span class="o">+</span>
	<span class="s2">&quot;name VARCHAR(30) NOT NULL,&quot;</span> <span class="o">+</span>
	<span class="s2">&quot;PRIMARY KEY (id))&quot;</span><span class="p">,</span>
  <span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
	<span class="nx">connection</span><span class="p">.</span><span class="nx">query</span><span class="p">(</span><span class="s2">&quot;INSERT INTO animals(name) value (?)&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;sea lions&quot;</span><span class="p">],</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
	  <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="k">throw</span> <span class="nx">err</span><span class="p">;</span>
	  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">res</span><span class="p">);</span>
	  <span class="c1">//log : { affectedRows: 1, insertId: 1, warningStatus: 0 }</span>
	<span class="p">});</span>
  <span class="p">}</span>
<span class="p">);</span>
</pre><h4 class="anchored_heading" id="result-set-array">Result-set array</h4>
<p>Queries issued from the Connector return two different kinds of results: a JSON object and an array, depending on the type of query you issue.  When the query returns multiple rows, the Connector returns an array, representing the data for each row in the array.  It also returns a `meta` object, containing query metadata.</p>
<p>You can formt the data results using the `nestTables` and `rowsAsArray` options.  By default, it returns a JSON object for each row.</p>
<pre class="fixed"><span class="nx">connection</span><span class="p">.</span><span class="nx">query</span><span class="p">(</span><span class="s1">&#39;select * from animals&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">meta</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">res</span><span class="p">);</span> 
  <span class="c1">// [ </span>
  <span class="c1">//    { id: 1, name: &#39;sea lions&#39; }, </span>
  <span class="c1">//    { id: 2, name: &#39;bird&#39; }, </span>
  <span class="c1">//    meta: [ ... ]</span>
  <span class="c1">// ]  </span>
<span class="p">});</span>
<span class="o">&lt;&lt;</span><span class="nx">code</span><span class="o">&gt;&gt;</span>

<span class="o">===</span> <span class="nx">Streaming</span>

<span class="o">&lt;&lt;</span><span class="nx">code</span>  <span class="nx">lang</span><span class="o">=</span><span class="s2">&quot;javascript&quot;</span><span class="o">&gt;&gt;</span>
<span class="nx">connection</span><span class="p">.</span><span class="nx">query</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM mysql.user&quot;</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;error&quot;</span><span class="p">,</span> <span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span> <span class="c1">//if error</span>
      <span class="p">})</span>
      <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;fields&quot;</span><span class="p">,</span> <span class="nx">meta</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">meta</span><span class="p">);</span> <span class="c1">// [ ... ]</span>
      <span class="p">})</span>
      <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;data&quot;</span><span class="p">,</span> <span class="nx">row</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">row</span><span class="p">);</span>
      <span class="p">})</span>
      <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;end&quot;</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="c1">//ended</span>
      <span class="p">});</span>
</pre><h2 class="anchored_heading" id="connectionbatchsql-values-callback">connection.batch(sql, values [, callback])</h2>
<div class="cstm-style bluebox"><ul start="1"><li>`sql`: *string | JSON* SQL string value or JSON object to supersede default connections options.  JSON objects must have an `"sql"` property.  For instance, `{ dateStrings: true, sql: 'SELECT now()' }`
</li><li>`values`: *array* Array of parameter (array of array or array of object if using named placeholders). 
</li><li>`callback`: *function* Callback function with arguments (error, results, metadata).
</li></ul>
<p> callback either return an <a href="#error">Error</a> with results/metadata null or with error empty and results/metadata </p>
</div><p>Implementation depend of server type and version. 
for MariaDB server version 10.2.7+, implementation use dedicated bulk protocol. </p>
<p>For other, insert queries will be rewritten for optimization.
example:
insert into ab (i) values (?) with first batch values = 1, second = 2 will be rewritten
insert into ab (i) values (1), (2). </p>
<p>If query cannot be re-writen will execute a query for each values.</p>
<p>result difference compared to execute multiple single query insert is that only first generated insert id will be returned. </p>
<p>For instance,</p>
<pre class="fixed">  <span class="nx">connection</span><span class="p">.</span><span class="nx">query</span><span class="p">(</span>
    <span class="s2">&quot;CREATE TEMPORARY TABLE batchExample(id int, id2 int, id3 int, t varchar(128), id4 int)&quot;</span>
  <span class="p">);</span>
  <span class="nx">connection</span>
    <span class="p">.</span><span class="nx">batch</span><span class="p">(</span><span class="s2">&quot;INSERT INTO `batchExample` values (1, ?, 2, ?, 3)&quot;</span><span class="p">,</span> <span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;john&quot;</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;jack&quot;</span><span class="p">]],</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;handle error&#39;</span><span class="p">);</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">affectedRows</span><span class="p">);</span> <span class="c1">// 2</span>
      <span class="p">}</span>
    <span class="p">});</span>

</pre><h2 class="anchored_heading" id="connectionbegintransactioncallback">connection.beginTransaction([callback])</h2>
<div class="cstm-style bluebox"><ul start="1"><li>`callback`: *function* Callback function with argument <a href="#error">Error</a> if any error.
</li></ul>
</div><p>Begins a new transaction.</p>
<h2 class="anchored_heading" id="connectioncommitcallback">connection.commit([callback])</h2>
<div class="cstm-style bluebox"><ul start="1"><li>`callback`: *function* callback function with argument <a href="#error">Error</a> if any error.
</li></ul>
</div><p>Commits the current transaction, if there is one active.  The Connector keeps track of the current transaction state on the server.  When there isn't an active transaction, this method sends no commands to the server.</p>
<h2 class="anchored_heading" id="connectionrollbackcallback">connection.rollback([callback])</h2>
<div class="cstm-style bluebox"><ul start="1"><li>`callback`: *function* Callback function with argument <a href="#error">Error</a> if any error.
</li></ul>
</div><p>Rolls back the current transaction, if there is one active.  The Connector keeps track of the current transaction state on the server.  Where there isn't an active transaction, this method sends no commands to the server.</p>
<pre class="fixed"><span class="nx">conn</span><span class="p">.</span><span class="nx">beginTransaction</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">//handle error</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nx">conn</span><span class="p">.</span><span class="nx">query</span><span class="p">(</span><span class="s2">&quot;INSERT INTO testTransaction values (&#39;test&#39;)&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">//handle error</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">conn</span><span class="p">.</span><span class="nx">query</span><span class="p">(</span><span class="s2">&quot;INSERT INTO testTransaction values (&#39;test2&#39;)&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">conn</span><span class="p">.</span><span class="nx">rollback</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
              <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
                <span class="c1">//handle error</span>
              <span class="p">}</span>
            <span class="p">});</span>
          <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">conn</span><span class="p">.</span><span class="nx">commit</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
              <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
                <span class="c1">//handle error</span>
              <span class="p">}</span>
            <span class="p">});</span>
          <span class="p">}</span>
        <span class="p">});</span>
      <span class="p">}</span>
    <span class="p">})</span>
  <span class="p">}</span>
<span class="p">});</span>
</pre><h2 class="anchored_heading" id="connectionchangeuseroptions-callback">connection.changeUser(options[, callback])</h2>
<div class="cstm-style bluebox"><ul start="1"><li>`options`: *JSON*, subset of <a href="#connection-options">connection option documentation</a> = database / charset / password / user
</li><li>`callback`: *function* callback function with argument <a href="#error">Error</a> if any error.
</li></ul>
</div><p>Resets the connection and re-authenticates with the given credentials.  This is the equivalent of creating a new connection with a new user, reusing the existing open socket.</p>
<pre class="fixed"><span class="nx">conn</span><span class="p">.</span><span class="nx">changeUser</span><span class="p">({</span><span class="nx">user</span><span class="o">:</span> <span class="s1">&#39;changeUser&#39;</span><span class="p">,</span> <span class="nx">password</span><span class="o">:</span> <span class="s1">&#39;mypassword&#39;</span><span class="p">},</span> <span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">//handle error</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="c1">//connection user is now changed.</span>
  <span class="p">}</span>
<span class="p">});</span>
</pre><h2 class="anchored_heading" id="connectionpingcallback">connection.ping([callback])</h2>
<div class="cstm-style bluebox"><ul start="1"><li>`callback`: *function* Callback function with argument <a href="#error">Error</a> if any error.
</li></ul>
</div><p>Sends a one byte packet to the server to check that the connection is still active.</p>
<pre class="fixed"><span class="nx">conn</span><span class="p">.</span><span class="nx">ping</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">//handle error</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="c1">//connection is valid</span>
  <span class="p">}</span>
<span class="p">})</span>
</pre><h2 class="anchored_heading" id="connectionendcallback">connection.end([callback])</h2>
<div class="cstm-style bluebox"><ul start="1"><li>`callback`: *function* Callback function with argument <a href="#error">Error</a> if any error.
</li></ul>
</div><p>Closes the connection gracefully.  That is, the Connector waits for current queries to finish their execution then closes the connection.</p>
<pre class="fixed"><span class="nx">conn</span><span class="p">.</span><span class="nx">end</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">//handle error</span>
<span class="p">})</span>
</pre><h2 class="anchored_heading" id="connectionresetcallback">connection.reset([callback])</h2>
<div class="cstm-style bluebox"><ul start="1"><li>`callback`: *function* Callback function with argument <a href="#error">Error</a> if any error.
</li></ul>
</div><p>reset the connection. Reset will:</p>
<ul start="1"><li>rollback any open transaction
</li><li>reset transaction isolation level
</li><li>reset session variables
</li><li>delete user variables
</li><li>remove temporary tables
</li><li>remove all PREPARE statement
</li></ul>
<h2 class="anchored_heading" id="connectionisvalid-boolean">connection.isValid() → boolean</h2>
<div class="cstm-style bluebox"><p> Returns a boolean</p>
</div><p>Indicates the connection state as the Connector knows it.  If it returns false, there is an issue with the connection, such as the socket disconnected without the Connector knowing about it.</p>
<h2 class="anchored_heading" id="connectiondestroy">connection.destroy()</h2>
<p>Closes the connection without waiting for any currently executing queries.  These queries are interrupted.  MariaDB logs the event as an unexpected socket close.</p>
<h2 class="anchored_heading" id="connectionpause">connection.pause()</h2>
<p>Pauses data reads.</p>
<h2 class="anchored_heading" id="connectionresume">connection.resume()</h2>
<p>Resumes data reads from a pause. </p>
<h2 class="anchored_heading" id="connectionserverversion">connection.serverVersion()</h2>
<div class="cstm-style bluebox"><p> Returns a string </p>
</div><p>Retrieves the version of the currently connected server.  Throws an error when not connected to a server.</p>
<pre class="fixed">  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">connection</span><span class="p">.</span><span class="nx">serverVersion</span><span class="p">());</span> <span class="c1">//10.2.14-MariaDB</span>
</pre><h2 class="anchored_heading" id="error">Error</h2>
<p>When the Connector encounters an error, Promise returns an <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error">Error</a> object.  In addition to the standard properties, this object has the following properties:</p>
<ul start="1"><li>`fatal`: A boolean value indicating whether the connection remains valid.
</li><li>`errno`: The error number. 
</li><li>`sqlState`: The SQL state code.
</li><li>`code`: The error code.
</li></ul>
<p>Example on `console.log(error)`: </p>
<pre class="fixed">{ Error: (conn=116, no: 1146, SQLState: 42S02) Table 'testn.falsetable' doesn't exist
  sql: INSERT INTO falseTable(t1, t2, t3, t4, t5) values (?, ?, ?, ?, ?)  - parameters:[1,0x01ff,'hh','01/01/2001 00:00:00.000',null]
      ...
      at Socket.Readable.push (_stream_readable.js:134:10)
      at TCP.onread (net.js:559:20)
    From event:
      at C:\mariadb-connector-nodejs\lib\connection.js:185:29
      at Connection.query (C:\mariadb-connector-nodejs\lib\connection.js:183:12)
      at Context.&lt;anonymous&gt; (C:\mariadb-connector-nodejs\test\integration\test-error.js:250:8)
    fatal: false,
    errno: 1146,
    sqlState: '42S02',
    code: 'ER_NO_SUCH_TABLE' } }
</pre><p>Errors contain an error stack, query and parameter values (the length of which is limited to 1,024 characters, by default).  To retrieve the initial stack trace (shown as `From event...` in the example above), you must have the Connection option `trace` enabled.</p>
<p>For more information on error numbers and SQL state signification, see the <a href="https://mariadb.com/kb/en/library/mariadb-error-codes/">MariaDB Error Code</a> documentation.</p>
<h2 class="anchored_heading" id="events">events</h2>
<p>Connection object that inherits from the Node.js <a href="https://nodejs.org/api/events.html">EventEmitter</a>.  Emits an error event when the connection closes unexpectedly.</p>
<pre class="fixed">  <span class="kr">const</span> <span class="nx">conn</span> <span class="o">=</span> <span class="nx">mariadb</span><span class="p">.</span><span class="nx">createConnection</span><span class="p">({</span><span class="nx">user</span><span class="o">:</span> <span class="s1">&#39;root&#39;</span><span class="p">,</span> <span class="nx">password</span><span class="o">:</span> <span class="s1">&#39;myPwd&#39;</span><span class="p">,</span> <span class="nx">host</span><span class="o">:</span> <span class="s1">&#39;localhost&#39;</span><span class="p">,</span> <span class="nx">socketTimeout</span><span class="o">:</span> <span class="mi">100</span><span class="p">})</span>
  <span class="nx">conn</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">//will be executed after 100ms due to inactivity, socket has closed. </span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
    <span class="c1">//log : </span>
    <span class="c1">//{ Error: (conn=6283, no: 45026, SQLState: 08S01) socket timeout</span>
    <span class="c1">//    ...</span>
    <span class="c1">//    at Socket.emit (events.js:208:7)</span>
    <span class="c1">//    at Socket._onTimeout (net.js:410:8)</span>
    <span class="c1">//    at ontimeout (timers.js:498:11)</span>
    <span class="c1">//    at tryOnTimeout (timers.js:323:5)</span>
    <span class="c1">//    at Timer.listOnTimeout (timers.js:290:5)</span>
    <span class="c1">//  fatal: true,</span>
    <span class="c1">//  errno: 45026,</span>
    <span class="c1">//  sqlState: &#39;08S01&#39;,</span>
    <span class="c1">//  code: &#39;ER_SOCKET_TIMEOUT&#39; }</span>
  <span class="p">});</span>
</pre><h1 class="anchored_heading" id="pool-api">Pool API</h1>
<p>Each time a connection is asked, if the pool contains a connection that is not used, the pool will validate the connection, 
exchanging an empty MySQL packet with the server to ensure the connection state, then give the connection. 
The pool reuses connection intensively, so this validation is done only if a connection has not been used for a period 
(specified by the "minDelayValidation" option with the default value of 500ms).</p>
<p>If no connection is available, the request for a connection will be put in a queue until connection timeout. 
When a connection is available (new creation or released to the pool), it will be used to satisfy queued requests in FIFO order.</p>
<p>When a connection is given back to the pool, any remaining transactions will be rolled back.</p>
<h2 class="anchored_heading" id="poolgetconnectioncallback">pool.getConnection(callback)</h2>
<div class="cstm-style bluebox"><ul start="1"><li>`callback`: *function* Callback function with arguments (<a href="#connection-api%29">Error](#error), [Connection</a>.
</li></ul>
</div><p>Creates a new <a href="#connection-api">Connection</a> object.
Connection must be given back to pool with the connection.end() method.</p>
<p><strong>Example:</strong></p>
<pre class="fixed"><span class="kr">const</span> <span class="nx">mariadb</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;mariadb/callback&#39;</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">pool</span> <span class="o">=</span> <span class="nx">mariadb</span><span class="p">.</span><span class="nx">createPool</span><span class="p">({</span> <span class="nx">host</span><span class="o">:</span> <span class="s1">&#39;mydb.com&#39;</span><span class="p">,</span> <span class="nx">user</span><span class="o">:</span><span class="s1">&#39;myUser&#39;</span> <span class="p">});</span>
<span class="nx">pool</span><span class="p">.</span><span class="nx">getConnection</span><span class="p">((</span><span class="nx">err</span><span class="p">,</span> <span class="nx">conn</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;not connected due to error: &quot;</span> <span class="o">+</span> <span class="nx">err</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;connected ! connection id is &quot;</span> <span class="o">+</span> <span class="nx">conn</span><span class="p">.</span><span class="nx">threadId</span><span class="p">);</span>
    <span class="nx">conn</span><span class="p">.</span><span class="nx">end</span><span class="p">();</span> <span class="c1">//release to pool</span>
  <span class="p">}</span>
<span class="p">}));</span>
</pre><h2 class="anchored_heading" id="poolquerysql-values-callback">pool.query(sql[, values][, callback])</h2>
<div class="cstm-style bluebox"><ul start="1"><li>`sql`: *string | JSON* SQL string or JSON object to supersede default connection options.  When using JSON object, object must have an "sql" key. For instance, `{ dateStrings: true, sql: 'SELECT now()' }`
</li><li>`values`: *array | object* Placeholder values. Usually an array, but in cases of only one placeholder, it can be given as is. 
</li><li>`callback`: *function* Callback function with arguments (error, results, metadata).
</li></ul>
</div><p>This is a shortcut to get a connection from pool, execute a query and release connection.</p>
<pre class="fixed"><span class="kr">const</span> <span class="nx">mariadb</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;mariadb/callback&#39;</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">pool</span> <span class="o">=</span> <span class="nx">mariadb</span><span class="p">.</span><span class="nx">createPool</span><span class="p">({</span> <span class="nx">host</span><span class="o">:</span> <span class="s1">&#39;mydb.com&#39;</span><span class="p">,</span> <span class="nx">user</span><span class="o">:</span><span class="s1">&#39;myUser&#39;</span> <span class="p">});</span>
<span class="nx">pool</span><span class="p">.</span><span class="nx">query</span><span class="p">(</span><span class="s2">&quot;SELECT NOW()&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">rows</span><span class="p">,</span> <span class="nx">metadata</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">//handle error</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">rows</span><span class="p">);</span> <span class="c1">//[ { &#39;NOW()&#39;: 2018-07-02T17:06:38.000Z }, meta: [ ... ] ]</span>
  <span class="p">}</span>
<span class="p">});</span>
</pre><h2 class="anchored_heading" id="poolbatchsql-values-callback">pool.batch(sql, values[, callback])</h2>
<div class="cstm-style bluebox"><ul start="1"><li>`sql`: *string | JSON* SQL string or JSON object to supersede default connection options.  When using JSON object, object must have an "sql" key. For instance, `{ dateStrings: true, sql: 'SELECT now()' }`
</li><li>`values`: *array* array of Placeholder values. Usually an array of array, but in cases of only one placeholder per value, it can be given as a single array. 
</li><li>`callback`: *function* Callback function with arguments (error, results, metadata).
</li></ul>
</div><p>This is a shortcut to get a connection from pool, execute a batch and release connection.</p>
<pre class="fixed"><span class="kr">const</span> <span class="nx">mariadb</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;mariadb/callback&#39;</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">pool</span> <span class="o">=</span> <span class="nx">mariadb</span><span class="p">.</span><span class="nx">createPool</span><span class="p">({</span> <span class="nx">host</span><span class="o">:</span> <span class="s1">&#39;mydb.com&#39;</span><span class="p">,</span> <span class="nx">user</span><span class="o">:</span><span class="s1">&#39;myUser&#39;</span> <span class="p">});</span>
<span class="nx">pool</span><span class="p">.</span><span class="nx">query</span><span class="p">(</span>
  <span class="s2">&quot;CREATE TABLE parse(autoId int not null primary key auto_increment, c1 int, c2 int, c3 int, c4 varchar(128), c5 int)&quot;</span>
<span class="p">);</span>
<span class="nx">pool</span>
  <span class="p">.</span><span class="nx">batch</span><span class="p">(</span><span class="s2">&quot;INSERT INTO `parse`(c1,c2,c3,c4,c5) values (1, ?, 2, ?, 3)&quot;</span><span class="p">,</span> 
    <span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;john&quot;</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;jack&quot;</span><span class="p">]],</span>
    <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">//handle error</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="c1">//res = { affectedRows: 2, insertId: 1, warningStatus: 0 }</span>
        <span class="nx">assert</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">affectedRows</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
        <span class="nx">pool</span><span class="p">.</span><span class="nx">query</span><span class="p">(</span><span class="s2">&quot;select * from `parse`&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="cm">/*</span>
<span class="cm">            res = [ </span>
<span class="cm">                { autoId: 1, c1: 1, c2: 1, c3: 2, c4: &#39;john&#39;, c5: 3 },</span>
<span class="cm">                { autoId: 2, c1: 1, c2: 2, c3: 2, c4: &#39;jack&#39;, c5: 3 },</span>
<span class="cm">                meta: ...</span>
<span class="cm">              }</span>
<span class="cm">            */</span> 
        <span class="p">});</span>
      <span class="p">}</span>
  <span class="p">});</span>
</pre><h2 class="anchored_heading" id="poolendcallback">pool.end([callback])</h2>
<div class="cstm-style bluebox"><ul start="1"><li>`callback`: *function* Callback function with argument (<a href="#error%29">Error</a>.
</li></ul>
</div><p>Closes the pool and underlying connections gracefully.</p>
<pre class="fixed"><span class="nx">pool</span><span class="p">.</span><span class="nx">end</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">//handle error</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="c1">//connections have been ended properly    </span>
  <span class="p">}</span>
<span class="p">});</span>
</pre><h2 class="anchored_heading" id="pool-events">Pool events</h2>
<div class="cstm-style newspaper-side table-head-align-top"><table><tr><th><strong>acquire</strong></th><td>This event emits a connection is acquired from pool.</td></tr>
<tr><th><strong>connection</strong></th><td>This event is emitted when a new connection is added to the pool. Has a connection object parameter</td></tr>
<tr><th><strong>enqueue</strong></th><td>This event is emitted when a command cannot be satisfied immediately by the pool and is queued.</td></tr>
<tr><th><strong>release</strong></th><td>This event is emitted when a connection is released back into the pool. Has a connection object parameter</td></tr>
</table>
</div><p><strong>Example:</strong></p>
<pre class="fixed"><span class="nx">pool</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;connection&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nx">conn</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`connection </span><span class="si">${</span><span class="nx">conn</span><span class="p">.</span><span class="nx">threadId</span><span class="si">}</span><span class="sb"> has been created in pool`</span><span class="p">);</span>
</pre><h1 class="anchored_heading" id="pool-cluster-api">Pool cluster API</h1>
<p>Cluster handle multiple pools according to patterns and handle failover / distributed load (round robin / random / ordered ).</p>
<h2 class="anchored_heading" id="poolclusteraddid-config">poolCluster.add(id, config)</h2>
<div class="cstm-style bluebox"><ul start="1"><li>`id`: *string* node identifier. example : 'master'
</li><li>`config`: *JSON* <a href="#pool-options">pool options</a> to create pool. 
</li></ul>
</div><p>Add a new Pool to cluster.</p>
<p><strong>Example:</strong></p>
<pre class="fixed"><span class="kr">const</span> <span class="nx">mariadb</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;mariadb/callback&#39;</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">cluster</span> <span class="o">=</span> <span class="nx">mariadb</span><span class="p">.</span><span class="nx">createPoolCluster</span><span class="p">();</span>
<span class="nx">cluster</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s2">&quot;master&quot;</span><span class="p">,</span> <span class="p">{</span> <span class="nx">host</span><span class="o">:</span> <span class="s1">&#39;mydb1.com&#39;</span><span class="p">,</span> <span class="nx">user</span><span class="o">:</span> <span class="s1">&#39;myUser&#39;</span><span class="p">,</span> <span class="nx">connectionLimit</span><span class="o">:</span> <span class="mi">5</span> <span class="p">});</span>
<span class="nx">cluster</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s2">&quot;slave1&quot;</span><span class="p">,</span> <span class="p">{</span> <span class="nx">host</span><span class="o">:</span> <span class="s1">&#39;mydb2.com&#39;</span><span class="p">,</span> <span class="nx">user</span><span class="o">:</span> <span class="s1">&#39;myUser&#39;</span><span class="p">,</span> <span class="nx">connectionLimit</span><span class="o">:</span> <span class="mi">5</span> <span class="p">});</span>
<span class="nx">cluster</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s2">&quot;slave2&quot;</span><span class="p">,</span> <span class="p">{</span> <span class="nx">host</span><span class="o">:</span> <span class="s1">&#39;mydb3.com&#39;</span><span class="p">,</span> <span class="nx">user</span><span class="o">:</span> <span class="s1">&#39;myUser&#39;</span><span class="p">,</span> <span class="nx">connectionLimit</span><span class="o">:</span> <span class="mi">5</span> <span class="p">});</span>
</pre><h2 class="anchored_heading" id="poolclusterremovepattern">poolCluster.remove(pattern)</h2>
<div class="cstm-style bluebox"><ul start="1"><li>`pattern`: *string* regex pattern to select pools. Example, `"slave*"`
</li></ul>
</div><p>remove and end pool(s) configured in cluster.</p>
<h2 class="anchored_heading" id="poolclusterendcallback">poolCluster.end([callback])</h2>
<div class="cstm-style bluebox"><ul start="1"><li>`callback`: *function* Callback function with argument (<a href="#error%29">Error</a>.
</li></ul>
</div><p>Closes the pool cluster and underlying pools.</p>
<pre class="fixed"><span class="nx">poolCluster</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">//handle error</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="c1">//pools have been ended properly    </span>
  <span class="p">}</span>
<span class="p">});</span>
</pre><h2 class="anchored_heading" id="poolclustergetconnectionpattern-selector-callback">poolCluster.getConnection([pattern, ][selector, ]callback)</h2>
<div class="cstm-style bluebox"><ul start="1"><li>`pattern`:  *string* regex pattern to select pools. Example, `"slave*"`. default `'*'`
</li><li>`selector`: *string* pools selector. Can be 'RR' (round-robin), 'RANDOM' or 'ORDER' (use in sequence = always use first pools unless fails). default to the  
</li><li>`callback`: *function* Callback function with arguments (<a href="#connection-api%29">Error](#error), [Connection</a>.
</li></ul>
</div><p>Creates a new <a href="#connection-api">Connection</a> object.
Connection must be given back to pool with the connection.end() method.</p>
<p><strong>Example:</strong></p>
<pre class="fixed"><span class="kr">const</span> <span class="nx">mariadb</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;mariadb/callback&#39;</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">cluster</span> <span class="o">=</span> <span class="nx">mariadb</span><span class="p">.</span><span class="nx">createPoolCluster</span><span class="p">();</span>
<span class="nx">cluster</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s2">&quot;master&quot;</span><span class="p">,</span> <span class="p">{</span> <span class="nx">host</span><span class="o">:</span> <span class="s1">&#39;mydb1.com&#39;</span><span class="p">,</span> <span class="nx">user</span><span class="o">:</span> <span class="s1">&#39;myUser&#39;</span><span class="p">,</span> <span class="nx">connectionLimit</span><span class="o">:</span> <span class="mi">5</span> <span class="p">});</span>
<span class="nx">cluster</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s2">&quot;slave1&quot;</span><span class="p">,</span> <span class="p">{</span> <span class="nx">host</span><span class="o">:</span> <span class="s1">&#39;mydb2.com&#39;</span><span class="p">,</span> <span class="nx">user</span><span class="o">:</span> <span class="s1">&#39;myUser&#39;</span><span class="p">,</span> <span class="nx">connectionLimit</span><span class="o">:</span> <span class="mi">5</span> <span class="p">});</span>
<span class="nx">cluster</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s2">&quot;slave2&quot;</span><span class="p">,</span> <span class="p">{</span> <span class="nx">host</span><span class="o">:</span> <span class="s1">&#39;mydb3.com&#39;</span><span class="p">,</span> <span class="nx">user</span><span class="o">:</span> <span class="s1">&#39;myUser&#39;</span><span class="p">,</span> <span class="nx">connectionLimit</span><span class="o">:</span> <span class="mi">5</span> <span class="p">});</span>
<span class="nx">cluster</span><span class="p">.</span><span class="nx">getConnection</span><span class="p">(</span><span class="s2">&quot;slave*&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">conn</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">//use connection and handle possible error</span>
<span class="p">})</span>
</pre><h2 class="anchored_heading" id="poolcluster-events">poolCluster events</h2>
<p>PoolCluster object inherits from the Node.js <a href="https://nodejs.org/api/events.html">EventEmitter</a>. 
Emits 'remove' event when a node is removed from configuration if the option `removeNodeErrorCount` is defined 
(default to 5) and connector fails to connect more than `removeNodeErrorCount` times. 
(if other nodes are present, each attemps will wait for value of the option `restoreNodeTimeout`)</p>
<pre class="fixed"><span class="kr">const</span> <span class="nx">mariadb</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;mariadb/callback&#39;</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">cluster</span> <span class="o">=</span> <span class="nx">mariadb</span><span class="p">.</span><span class="nx">createPoolCluster</span><span class="p">({</span> <span class="nx">removeNodeErrorCount</span><span class="o">:</span> <span class="mi">20</span><span class="p">,</span> <span class="nx">restoreNodeTimeout</span><span class="o">:</span> <span class="mi">5000</span> <span class="p">});</span>
<span class="nx">cluster</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s2">&quot;master&quot;</span><span class="p">,</span> <span class="p">{</span> <span class="nx">host</span><span class="o">:</span> <span class="s1">&#39;mydb1.com&#39;</span><span class="p">,</span> <span class="nx">user</span><span class="o">:</span> <span class="s1">&#39;myUser&#39;</span><span class="p">,</span> <span class="nx">connectionLimit</span><span class="o">:</span> <span class="mi">5</span> <span class="p">});</span>
<span class="nx">cluster</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s2">&quot;slave1&quot;</span><span class="p">,</span> <span class="p">{</span> <span class="nx">host</span><span class="o">:</span> <span class="s1">&#39;mydb2.com&#39;</span><span class="p">,</span> <span class="nx">user</span><span class="o">:</span> <span class="s1">&#39;myUser&#39;</span><span class="p">,</span> <span class="nx">connectionLimit</span><span class="o">:</span> <span class="mi">5</span> <span class="p">});</span>
<span class="nx">cluster</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s2">&quot;slave2&quot;</span><span class="p">,</span> <span class="p">{</span> <span class="nx">host</span><span class="o">:</span> <span class="s1">&#39;mydb3.com&#39;</span><span class="p">,</span> <span class="nx">user</span><span class="o">:</span> <span class="s1">&#39;myUser&#39;</span><span class="p">,</span> <span class="nx">connectionLimit</span><span class="o">:</span> <span class="mi">5</span> <span class="p">});</span><span class="o">*</span>
<span class="nx">cluster</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;remove&#39;</span><span class="p">,</span> <span class="nx">node</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`node </span><span class="si">${</span><span class="nx">node</span><span class="si">}</span><span class="sb"> was removed`</span><span class="p">);</span>
<span class="p">})</span>
</pre><h2 class="anchored_heading" id="poolclusterofpattern-selector-filteredpoolcluster">poolCluster.of(pattern, selector) → FilteredPoolCluster</h2>
<div class="cstm-style bluebox"><ul start="1"><li>`pattern`:  *string* regex pattern to select pools. Example, `"slave*"`. default `'*'`
</li><li>`selector`: *string* pools selector. Can be 'RR' (round-robin), 'RANDOM' or 'ORDER' (use in sequence = always use first pools unless fails). default to the  
</li></ul>
<p> Returns :</p>
<ul start="1"><li>resolves with a <a href="#filteredpoolcluster">filtered pool cluster</a> object,
</li><li>raises an <a href="#error">Error</a>.
</li></ul>
</div><p>Creates a new <a href="#filteredpoolcluster">filtered pool cluster</a> object that is a subset of cluster.</p>
<p><strong>Example:</strong></p>
<pre class="fixed"><span class="kr">const</span> <span class="nx">mariadb</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;mariadb/callback&#39;</span><span class="p">)</span>

<span class="kr">const</span> <span class="nx">cluster</span> <span class="o">=</span> <span class="nx">mariadb</span><span class="p">.</span><span class="nx">createPoolCluster</span><span class="p">();</span>
<span class="nx">cluster</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s2">&quot;master-north&quot;</span><span class="p">,</span> <span class="p">{</span> <span class="nx">host</span><span class="o">:</span> <span class="s1">&#39;mydb1.com&#39;</span><span class="p">,</span> <span class="nx">user</span><span class="o">:</span> <span class="s1">&#39;myUser&#39;</span><span class="p">,</span> <span class="nx">connectionLimit</span><span class="o">:</span> <span class="mi">5</span> <span class="p">});</span>
<span class="nx">cluster</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s2">&quot;master-south&quot;</span><span class="p">,</span> <span class="p">{</span> <span class="nx">host</span><span class="o">:</span> <span class="s1">&#39;mydb1.com&#39;</span><span class="p">,</span> <span class="nx">user</span><span class="o">:</span> <span class="s1">&#39;myUser&#39;</span><span class="p">,</span> <span class="nx">connectionLimit</span><span class="o">:</span> <span class="mi">5</span> <span class="p">});</span>
<span class="nx">cluster</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s2">&quot;slave1-north&quot;</span><span class="p">,</span> <span class="p">{</span> <span class="nx">host</span><span class="o">:</span> <span class="s1">&#39;mydb2.com&#39;</span><span class="p">,</span> <span class="nx">user</span><span class="o">:</span> <span class="s1">&#39;myUser&#39;</span><span class="p">,</span> <span class="nx">connectionLimit</span><span class="o">:</span> <span class="mi">5</span> <span class="p">});</span>
<span class="nx">cluster</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s2">&quot;slave2-north&quot;</span><span class="p">,</span> <span class="p">{</span> <span class="nx">host</span><span class="o">:</span> <span class="s1">&#39;mydb3.com&#39;</span><span class="p">,</span> <span class="nx">user</span><span class="o">:</span> <span class="s1">&#39;myUser&#39;</span><span class="p">,</span> <span class="nx">connectionLimit</span><span class="o">:</span> <span class="mi">5</span> <span class="p">});</span>
<span class="nx">cluster</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s2">&quot;slave1-south&quot;</span><span class="p">,</span> <span class="p">{</span> <span class="nx">host</span><span class="o">:</span> <span class="s1">&#39;mydb2.com&#39;</span><span class="p">,</span> <span class="nx">user</span><span class="o">:</span> <span class="s1">&#39;myUser&#39;</span><span class="p">,</span> <span class="nx">connectionLimit</span><span class="o">:</span> <span class="mi">5</span> <span class="p">});</span>

<span class="kr">const</span> <span class="nx">masterCluster</span> <span class="o">=</span> <span class="nx">cluster</span><span class="p">.</span><span class="k">of</span><span class="p">(</span><span class="s1">&#39;master*&#39;</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">northSlaves</span> <span class="o">=</span> <span class="nx">cluster</span><span class="p">.</span><span class="k">of</span><span class="p">(</span><span class="sr">/^slave?-north/</span><span class="p">,</span> <span class="s1">&#39;RANDOM&#39;</span><span class="p">);</span>
<span class="nx">northSlaves</span><span class="p">.</span><span class="nx">getConnection</span><span class="p">((</span><span class="nx">err</span><span class="p">,</span> <span class="nx">conn</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">//use that connection</span>
<span class="p">});</span>
</pre><h3 class="anchored_heading" id="filtered-pool-cluster">filtered pool cluster</h3>
<ul start="1"><li>`filteredPoolCluster.getConnection(callback)` : Creates a new connection from pools that corresponds to pattern .
</li><li>`filteredPoolCluster.query(sql[, values][, callback])` : this is a shortcut to get a connection from pools that corresponds to pattern, execute a query and release connection.</li></ul>

    </div>


        
            <div id="subscribe" class="well well-small hide hidden-print"
                 data-subscribe-url="/kb/en/connector-nodejs-callback-api/+subscriptions/add"
                 data-unsubscribe-url="/kb/en/connector-nodejs-callback-api/+subscriptions/remove">
            </div>
        

        
        
    
        <div class="simple_section_nav">
            <ul class="nav nav-pills">
                
                    <li><a href="/kb/en/connector-nodejs-promise-api/">
                        ← Connector/Node.js Promise API
                    </a>
                    </li>
                
                
                    <li><a href="/kb/en/mariadb-connector-nodejs/">
                        ↑ Node.js Connector ↑
                    </a>
                    </li>
                
                
                    <li class="pull-right"><a href="/kb/en/connector-nodejs-pipelining/">
                        Connector/Node.js Pipelining →
                    </a>
                    </li>
                
            </ul>
        </div>
    

        

        
        <h2>Comments</h2>
        
    
    <div id="comments" data-node-id="7821" data-comments-url="/kb/en/connector-nodejs-callback-api/+comments"
         data-reply-url="/kb/en/connector-nodejs-callback-api/comments/post/">
        Comments loading...
    </div>

        

    </div>


                    <div id="content_disclaimer" class="graybox">
                        Content reproduced on this site is the property of its respective owners,
                        and this content is not reviewed in advance by MariaDB. The views, information and opinions
                        expressed by this content do not necessarily represent those of MariaDB or any other party.
                    </div>
                </div>
            </section>

            
                <div id="right_bar" class="col-md-2">
                    
    
        
        <ul class="section_navigation well well-small hidden-xs hidden-sm">
            
                <li class="parent"><a href="/kb/en/mariadb-connector-nodejs/">
                    ↑ Node.js Connector ↑
                </a>
                </li>
            
            
                
                    <li>
                        <a href="/kb/en/about-mariadb-connector-nodejs/">
                            
                            About MariaDB Connector/Node.js
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/getting-started-with-the-nodejs-connector/">
                            
                            Getting Started With the Node.js Connector
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/nodejs-connection-options/">
                            
                            Node.js Connection Options
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/connector-nodejs-promise-api/">
                            
                            Connector/Node.js Promise API
                        </a>
                    </li>
                
            
                
                    <li class="active">
                        <span>Connector/Node.js Callback API</span>
                        
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/connector-nodejs-pipelining/">
                            
                            Connector/Node.js Pipelining
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/list-of-mariadb-connector-nodejs-releases/">
                            
                            List of MariaDB Connector/Node.js Releases
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/mariadb-connector-nodejs-release-notes/">
                            
                            MariaDB Connector/Node.js Release Notes
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/mariadb-connector-nodejs-changelogs/">
                            
                            MariaDB Connector/Node.js Changelogs
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/other-nodejs-connectors/">
                            
                            Other Node.js Connectors
                        </a>
                    </li>
                
            
        </ul>
    
    

                </div>
            
        </div>
    </div>
</div>

<!-- Footer -->
<footer id="footer">
    <div class="footer">
        <div class="container">
            <div class="row row-10">
                <div class="col-md-2 col-xs-4 item">
                    <h5>
                        <a href="/products" title="Products">Products</a>
                    </h5>
                    <ul>
                        <li id="menu-item-7816" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-7816"><a href="https://mariadb.com/products/mariadb-platform/">MariaDB Platform</a></li>
                        <li id="menu-item-7815" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-7815"><a href="https://mariadb.com/products/skysql/">MariaDB SkySQL</a></li>
                        <li id="menu-item-4172" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4172"><a href="https://mariadb.com/pricing/">Pricing</a></li>
                        <li id="menu-item-4163" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4163"><a href="https://mariadb.com/downloads/">Download MariaDB</a></li>
                    </ul>
                </div>
                <div class="col-md-2 col-xs-4 item">
                    <h5>
                        <a href="/services" title="Services">Services</a>
                    </h5>
                    <ul>
                        <li id="menu-item-4169" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4169"><a href="https://mariadb.com/services/remote-dba/">Remote DBA</a></li>
                        <li id="menu-item-41691" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4169"><a href="https://mariadb.com/services/skydba/">SkyDBA</a></li>
                        <li id="menu-item-4167" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4167"><a href="https://mariadb.com/services/enterprise-architect/">Enterprise Architect</a></li>
                        <li id="menu-item-4170" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4170"><a href="https://mariadb.com/services/technical-support-services/">Technical Support</a></li>
                        <li id="menu-item-4168" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4168"><a href="https://mariadb.com/services/migration-practice/">Migration Practice</a></li>
                        <li id="menu-item-4166" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4166"><a href="https://mariadb.com/services/consulting/">Consulting</a></li>
                        <li id="menu-item-4171" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4171"><a href="https://mariadb.com/services/training/">Training</a></li>
                    </ul>
                </div>
                <div class="col-md-2 col-xs-4 item">
                    <h5>
                        <a href="/resources" title="Resources">Resources</a>
                    </h5>
                    <ul>
                        <li id="menu-item-41751" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4175"><a href="https://mariadb.com/docs/">Documentation</a></li>
                        <li id="menu-item-41752" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4175"><a href="https://mariadb.com/developers/">Developers</a></li>
                        <li id="menu-item-4175" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4175"><a href="https://mariadb.com/resources/blog/">Blog</a></li>
                        <li id="menu-item-5462" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-5462"><a href="https://support.mariadb.com">Support</a></li>
                        <li id="menu-item-6004" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-6004"><a href="https://mariadb.com/openworks/">OpenWorks</a></li>
                        <li id="menu-item-60041" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-6004"><a href="https://mariadb.com/resources/customer-stories/">Customer Stories</a></li>
                        <li id="menu-item-7817" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-7817"><a href="https://mariadb.com/resources/events/">Events</a></li>
                        <li id="menu-item-4177" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4177"><a href="https://mariadb.com/roadshow/">MariaDB Roadshow</a></li>
                    </ul>
                </div>
                <div class="visible-xs visible-sm clear"></div>
                <div class="col-md-2 col-xs-5 item">
                    <h5>
                        <a href="/about-us" title="About MariaDB">About</a>
                    </h5>
                    <ul>
                        <li id="menu-item-4173" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4173"><a href="https://mariadb.com/contact/">Contact</a></li>
                        <li id="menu-item-4161" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4161"><a href="https://mariadb.com/about-us/leadership/">Leadership</a></li>
                        <li id="menu-item-4162" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4162"><a href="https://mariadb.com/about-us/partners/">Partners</a></li>
                        <li id="menu-item-4174" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4174"><a href="https://mariadb.com/newsroom/">Newsroom</a></li>
                        <li id="menu-item-4160" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4160"><a href="https://mariadb.com/about-us/investors/">Investors</a></li>
                        <li id="menu-item-4159" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4159"><a href="https://mariadb.com/about-us/careers/">Careers</a></li>
                        <li id="menu-item-41591" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4159"><a href="https://mariadb.com/trust/">Trust Center</a></li>
                        <li id="menu-item-41592" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4159"><a href="https://mariadb.com/vulnerability-reporting/">Vulnerability Reporting</a></li>
                    </ul>
                </div>
                <div class="col-md-4 col-xs-7 item">
                    <div id="block-footercontact" class="block block-block-content block-block-content22b3af28-0754-44ec-a5c6-4466568f37e3">
                        <h5><a href="/contact" title="Contact">Contact</a></h5>
                    </div>
                    <div class="social">
                        <ul class="list-inline">
                            <li>
                                <a target="_blank" href="https://www.facebook.com/MariaDB.dbms/" title="Facebook">
                                    <i class="fa fa-facebook" aria-hidden="true"></i>
                                </a>
                            </li>
                            <li>
                                <a target="_blank" href="https://twitter.com/mariadb" title="Twitter">
                                    <i class="fa fa-twitter" aria-hidden="true"></i>
                                </a>
                            </li>
                            <li>
                                <a target="_blank" href="https://www.linkedin.com/company/mariadb-corporation?trk=company_logo " title="LinkedIn">
                                    <i class="fa fa-linkedin" aria-hidden="true"></i>
                                </a>
                            </li>
                        </ul>
                    </div>
                    <div id="block-footerformcontact" class="block block-block-content block-block-contentd754ee1b-3cc9-40e7-9ef4-f504f1197fb1">
                        
                            <p>Subscribe to our newsletter!</p>
                            <script src="//app-sj15.marketo.com/js/forms2/js/forms2.min.js"></script><form id="mktoForm_1498"></form>
                            <script>
                                <!--//--><![CDATA[// ><!--
                                MktoForms2.loadForm("//app-sj15.marketo.com", "573-PXI-984", 1498);
                                //--><!]]]]><![CDATA[>
                                //--><!]]>
                            </script>
                        
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="footer-copyright">
        <div class="container text-center">
            <ul class="list-inline no-margin">
                <li>
                    <a href="/legal" title="Legal">Legal</a>
                </li>
                <li>
                    <a href="/privacy-policy" title="Privacy Policy">Privacy Policy</a>
                </li>
                <li>
                    <a href="/cookie-policy/" title="Cookies">Cookie Policy</a>
                </li>
            </ul>
            <p>Copyright &copy; 2023 MariaDB. All rights reserved.</p>
        </div>
    </div>
</footer>
</div>

<div id="ajax_loading">
    <img src="/kb/static/images/ajax-loader.a51c5608d01a.gif" />
</div>

    <!-- Google Tag Manager -->
    <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-MK2847"
                      height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
            '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MK2847');</script>
    <!-- End Google Tag Manager -->

</body>

<script type="text/javascript" src="/kb/static/js/main.fed4ec768178.js" charset="utf-8"></script>

</html>