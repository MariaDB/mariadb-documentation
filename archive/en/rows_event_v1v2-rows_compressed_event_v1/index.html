<!DOCTYPE html>
<html>
<head data-cookie-domain=""
      data-cookie-path="/">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="apple-touch-icon" sizes="180x180" href="/kb/static/images/favicons/apple-touch-icon.159e713979be.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/kb/static/images/favicons/favicon-32x32.bc0ac1d5d11e.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/kb/static/images/favicons/favicon-16x16.5801f8f0f34e.png">
    <link rel="shortcut icon" href="/kb/static/images/favicons/favicon.d122d305dee4.ico" type="image/x-icon" />

    <title>ROWS_EVENT_V1/V2, ROWS_COMPRESSED_EVENT_V1 - MariaDB Knowledge Base</title>

    <link href="/kb/static/css/main.f7633538c846.css" rel="stylesheet" type="text/css" />

    

    

    <!-- FB Open Graph tags -->
    <meta property="og:title" content="ROWS_EVENT_V1/V2, ROWS_COMPRESSED_EVENT_V1" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://mariadb.com/kb/en/rows_event_v1v2-rows_compressed_event_v1/" />
    <meta property="og:image" content="http://mariadb.comaskmonty-logo.png" />
    <meta property="og:site_name" content="MariaDB KnowledgeBase" />
    <meta property="fb:admins" content="514852603" />
    <meta property="og:description" content="A ROWS_EVENT_V1 is written for row based replication if data is inserted, deleted or updated
A ROWS_EVENT (version 2) is written for row based replication if data is inserted,..." />

    <meta name="description" content="A ROWS_EVENT_V1 is written for row based replication if data is inserted, deleted or updated
A ROWS_EVENT (version 2) is written for row based replication if data is inserted,..." />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="//fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet"/>
    
</head>
<body class="mpkb nodes products nodes_view jqui" id="nodes_view">





<div id="menu-mobile" class="visible-sm visible-xs">

    <div>
        <div id="mobile-close-menu" class="text-right">
            <a href="javascript:void(0)" title="Close Menu" id="back-main" class="toggle-menu">X<span></span></a>
        </div>
    </div>
    <div class="mainmenu-mobile">
        <ul class="ls-none ul-menu">
            <li data-sub="submenu5"><a class="open-form-search" href="/kb/search/" title="Search">Search </a></li>
            <li data-sub="submenu0"><a href="/products" title="Products">Products</a><span class="arrow-main"></span></li>
            <li data-sub="submenu1"><a href="/services" title="Services">Services</a><span class="arrow-main"></span></li>
            <li data-sub="submenu2"><a href="/resources" title="Resources">Resources</a><span class="arrow-main"></span></li>
            <li data-sub="submenu3"><a href="/about-us" title="About">About</a><span class="arrow-main"></span></li>
            <li data-sub="submenu4"><a href="/contact" title="Contact">Contact</a></li>
        </ul>
    </div>

    <div class="nav-top-mobile">
        <div class="select-box form">

            <ul class="inline-block-md mb-none top-nav">
                <li>

                </li>
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/rows_event_v1v2-rows_compressed_event_v1/"> Login</a>
                    </li>
                
            </ul>



        </div>
        <p class="text-center copyright">Copyright &copy; 2024 MariaDB. All rights reserved.</p>
    </div>
</div>
<div class="violator-wrap d-none" id="top_violator">
    <div class="container">
        <div class="row">
            <div class="col-xs-12 col-sm-12">
                <div class="violator-outer">
                    <div class="violator-inner">
                        <div class="row">
                            <div class="col-xs-12 col-sm-9 col-lg-7 col-lg-offset-2" id="top_violator_content">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="content-link" target="_blank" rel="nofollow noreferrer">
                                    <span>The Ultimate Guide to High Availability with MariaDB</span>
                                </a>
                            </div>
                            <div class="col-xs-12 col-sm-3" id="top_violator_cta">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="btn btn-mariadb" target="_blank" rel="nofollow noreferrer">Download Now</a>
                            </div>
                        </div>
                    </div>
                    <button type="button" class="btn btn-link close-btn">
                        <svg xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 24 24" width="15px" height="15px"><path d="M 4.9902344 3.9902344 A 1.0001 1.0001 0 0 0 4.2929688 5.7070312 L 10.585938 12 L 4.2929688 18.292969 A 1.0001 1.0001 0 1 0 5.7070312 19.707031 L 12 13.414062 L 18.292969 19.707031 A 1.0001 1.0001 0 1 0 19.707031 18.292969 L 13.414062 12 L 19.707031 5.7070312 A 1.0001 1.0001 0 0 0 18.980469 3.9902344 A 1.0001 1.0001 0 0 0 18.292969 4.2929688 L 12 10.585938 L 5.7070312 4.2929688 A 1.0001 1.0001 0 0 0 4.9902344 3.9902344 z"/></svg>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="wrapper">
<div id="top-nav">
    <div class="container">
        <ul class="hidden-sm hidden-xs" >
            <li><a href="https://mariadb.com/kb/">Knowledge Base</a></li>
            <li><a href="https://mariadb.com/contact/">Contact</a></li>
            
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/rows_event_v1v2-rows_compressed_event_v1/" rel="nofollow">Login</a>
                    </li>
                
            
            
            <li id="search-form">
                <form action="/kb/en/+search/" method="get" id="search-block-form" accept-charset="UTF-8">
                    <input id="search" title="Enter the terms you wish to search for."
                           placeholder="Search . . ." type="text"
                           name="q" value="" size="15" maxlength="128" class="form-text"
                           data-autocomplete-url="/kb/en/+search/autocomplete/">
                    <input type="hidden" name="quick" value="1" />
                    <input type="hidden" name="source" value="kb" />
                </form>
            </li>
            <li><a id="search-toggler" href="/kb/search/">Search</a></li>
            
        </ul>
    </div>
</div>
<div id="navbar-bottom" class="navbar">
    <div class="container">
        
        
        
        
        <div class="row">
            <div class="col-md-3 col-sm-9 col-xs-9">
                <a class="brand" href="/" title="MariaDB">
                    <img src="/kb/static/images/logo-2018-black.95f5978ae14d.png">
                </a>
            </div>
            <div class="col-md-9 hidden-sm hidden-xs">
                <div class="main-menu">
                    <ul id="main-menu" class="nav navbar-nav inline-block-sm">
    <li class="has-sub full-menu">
        <a href="/products" title="Products">Products</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/services" title="Services">Services</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/pricing" title="Pricing">Pricing</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/resources" title="Resources">Resources</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/about-us" title="About Us">About Us</a>
    </li>
    <li class="">
        <a class="button electric-eel small top-bar-right-download" href="/downloads/">Download</a>
    </li>
</ul>
                </div>
            </div>
            <div class="col-md-3 visible-sm visible-xs col-sm-3 col-xs-3 ps-rv">
                <div class="navbar-header text-right pull-right">
                    <button type="button" class="menu-control toggle-menu" id="open-menu">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="main">
    <div class="container">
        

        <div id="subheader1" class="clearfix">
            <div class="pull-left">
                
                <div id="breadcrumbs" class="breadcrumb">
                    <a href="/kb/en/">Knowledge Base</a>
                    


    
    » <a class="crumb" href="/kb/en/server-client-software/">Server &amp; Client Software</a>
    

    
    » <a class="crumb" href="/kb/en/client-libraries/">Client Libraries</a>
    

    
    » <a class="crumb" href="/kb/en/clientserver-protocol/">Client/Server Protocol</a>
    

    
    » <a class="crumb" href="/kb/en/replication-protocol/">Replication Protocol</a>
    


    » <a class="node_link crumb" href="/kb/en/rows_event_v1v2-rows_compressed_event_v1/">ROWS_EVENT_V1/V2, ROWS_COMPRESSED_EVENT_V1</a>


                </div>
                
            </div>
        </div>
    </div>
    <div class="container" id="container-main">
        <div class="row">
            
            
                
                <aside id="sidebar-first" class="sidebar col-md-2 hidden-xs hidden-sm hidden-print">
                    
                        
                        <ul id="category_menu" class="nav nav-pills nav-stacked">
                            <li><a href="/kb/en/">Home</a></li>
                            
                                
                                    <li><a href="/kb/en/+questions/">Open Questions</a></li>
                                
                                <li><a href="/kb/en/documentation/">MariaDB Server</a></li>
                                <li><a href="/kb/en/maxscale/">MariaDB MaxScale</a></li>
                                <li><a href="/kb/en/mariadb-columnstore/">MariaDB ColumnStore</a></li>
                                <li><a href="/kb/en/connectors/">Connectors</a></li>
                            

                        </ul>
                    

                    
<div>



<div class="well well-small box actions"><div>

        <a class="btn btn-block btn-blue btn-sm" href="/kb/en/rows_event_v1v2-rows_compressed_event_v1/+history" rel="nofollow">History</a>
        
        
        
        <a class="btn btn-block btn-blue btn-sm" href="/kb/en/rows_event_v1v2-rows_compressed_event_v1/+source/">Source</a>
        
        <a class="btn btn-block btn-blue btn-sm flag" href="/kb/en/rows_event_v1v2-rows_compressed_event_v1/+flag"
                data-flag-url="/kb/en/rows_event_v1v2-rows_compressed_event_v1/+flag" rel="nofollow">
                Flag as Spam / Inappropriate</a>
        
        <a class="btn btn-block btn-blue btn-sm" href="/kb/en/rows_event_v1v2-rows_compressed_event_v1/+translate/">
                Translate</a>
        

</div>
</div>





<div class="well well-small box node_info"><div>

    <dl>
        <dt>Created</dt>
        <dd>

<span class="datetime" title="2018-06-11 15:41">6 years, 4 months ago</span></dd>

        <dt>Modified</dt>
        <dd>

<span class="datetime" title="2022-09-20 09:51">2 years ago</span></dd>

        <dt>Type</dt>
        <dd>article</dd>

        <dt>Status</dt>
        <dd>active</dd>

        <dt>License</dt>
        <dd>
            
                <a href="/kb/en/rows_event_v1v2-rows_compressed_event_v1/+license/">CC BY-SA / Gnu FDL</a>
            
        </dd>

        
    </dl>

    
    <ul class="rss_feeds">
        <li><a href="/kb/en/rows_event_v1v2-rows_compressed_event_v1/+history/feed/">
            History</a>
        </li>
        <li><a href="/kb/en/rows_event_v1v2-rows_compressed_event_v1/+comments/feed/">
            Comments</a>
        </li>
    </ul>
    

</div>
</div>





    
    
    

<div class="well well-small box attachments"><div><div class="edit_link pull-right"><a href="/kb/en/rows_event_v1v2-rows_compressed_event_v1/+edit/attachments/">Edit</a></div><h5>Attachments</h5></div><div>

        
            <div class="no_data">No attachments exist</div>
        
    
</div>
</div>

    



    
    






</div>


                    

































                </aside>
            
            
            
                
            
            
                
            
            <section id="content" class="limited_width col-md-8 clearfix">
                
                    <h1>ROWS_EVENT_V1/V2, ROWS_COMPRESSED_EVENT_V1</h1>
                

                



                <div>
                    
    

    
    
    

    <div class="node creole">
        
        
        


    
    <div class="answer formatted">
        <p>A ROWS_EVENT_V1 is written for row based replication if data is inserted, deleted or updated</p>
<p>A ROWS_EVENT (version 2) is written for row based replication if data is inserted, deleted or updated if database server is MySQL 5.6 or newer. MariaDB Server doesn't send version 2 row events. </p>
<h4 class="anchored_heading" id="event-types">Event types</h4>
<div class="cstm-style borders"><table><tr><td>WRITE_ROWS_EVENT_V1</td><td>Insert new row</td></tr>
<tr><td>UPDATE_ROWS_EVENT_V1</td><td>Update existing row</td></tr>
<tr><td>DELETE_ROWS_EVENT_V1</td><td>Delete existing row</td></tr>
<tr><td>WRITE_ROWS_COMPRESSED_EVENT_V1</td><td>Insert new row</td></tr>
<tr><td>UPDATE_ROWS_COMPRESSED_EVENT_V1</td><td>Update existing row</td></tr>
<tr><td>DELETE_ROWS_COMPRESSED_EVENT_V1</td><td>Delete existing row</td></tr>
<tr><td>WRITE_ROWS_EVENT</td><td>Insert new row (version 2, MySQL only)</td></tr>
<tr><td>UPDATE_ROWS_EVENT</td><td>Update existing row (version 2, MySQL only)</td></tr>
<tr><td>DELETE_ROWS_EVENT</td><td>Delete existing row (version 2, MySQL only)</td></tr>
</table>
</div><h4 class="anchored_heading" id="header">Header</h4>
<ul start="1"><li>WRITE_ROWS_EVENT_V1: Event Type is 23 (0x17) 
</li><li>UPDATE_ROWS_EVENT_V1: Event Type is 24 (0x18)
</li><li>DELETE_ROWS_EVENT_V1: Event Type is 25 (0x19)
</li><li>WRITE_ROWS_EVENT: Event Type is 30 (0xFD) 
</li><li>UPDATE_ROWS_EVENT: Event Type is 31 (0xFE)
</li><li>DELETE_ROWS_EVENT: Event Type is 32 (0x20)
</li><li>WRITE_ROWS_COMPRESSED_EVENT_V1: Event Type is 166 (0xA6) 
</li><li>UPDATE_ROWS_COMPRESSED_EVENT_V1: Event Type is 167 (0xA7)
</li><li>DELETE_ROWS_COMPRESSED_EVENT_V1: Event Type is 168 (0xA8)
</li></ul>
<h4 class="anchored_heading" id="fields">Fields</h4>
<div class="cstm-style" style="padding: 16px;background-color: #f7f7f7;border-radius: 3px;"><ul start="1"><li><a href="/kb/en/protocol-data-types/#fixed-length-integers">uint&lt;6&gt;</a> The table id
</li><li><a href="/kb/en/protocol-data-types/#fixed-length-integers">uint&lt;2&gt;</a> Flags
</li><li>if rows_event is version 2
<ul start="1"><li><a href="/kb/en/protocol-data-types/#fixed-length-integers">uint&lt;2&gt;</a> Extra data length
</li><li><a href="/kb/en/protocol-data-types/#fixed-length-strings">string&lt;len&gt;</a>  Extra data
</li></ul>
</li><li><a href="/kb/en/protocol-data-types/#fixed-length-integers">uint&lt;lenenc&gt;</a> Number of columns
</li><li><a href="/kb/en/protocol-data-types/#fixed-length-bytes">byte&lt;n&gt;</a>Columns used. n = (number_of_columns + 7)/8
</li><li>if (event_type == UPDATE_ROWS_EVENT_v1
<ul start="1"><li><a href="/kb/en/protocol-data-types/#fixed-length-bytes">byte&lt;n&gt;</a> Columns used (Update). n = (number_of_columns + 7)/8
</li></ul>
</li></ul>
<ul><li>if *_COMPRESSED_EVENT_V1
<ul><li>byte&lt;1&gt; header
<ul start="1"><li>algorithm: (header &amp; 0x07) &gt;&gt; 4 (always 0=zlib)
</li><li>header_size: header &amp; 0x07
</li></ul>
</li><li>byte&lt;header_size&gt;uncompressed length, stored in MyISAM format:
</li></ul>
</li></ul>
<ul start="1"><li><a href="/kb/en/protocol-data-types/#fixed-length-bytes">byte&lt;n&gt;</a> Null Bitmap (n = (number_of_columns + 7)/8)
</li><li><a href="/kb/en/protocol-data-types/#fixed-length-strings">string&lt;len&gt;</a> Column data. The length needs to be calculated by checking the column types from referring TABLE_MAP_EVENT.
</li><li>if (event_type == UPDATE_ROWS_EVENT_v1
<ul start="1"><li><a href="/kb/en/protocol-data-types/#fixed-length-bytes">byte&lt;n&gt;</a> Null Bitmap_Update. n = (number_of_columns + 7)/8
</li><li><a href="/kb/en/protocol-data-types/#fixed-length-strings">string&lt;len&gt;</a> Update Column data. The length needs to be calculated by checking the used colums bitmap and column types from referring TABLE_MAP_EVENT.
</li></ul>
</li></ul>
</div><h4 class="anchored_heading" id="table-id">Table id</h4>
<p>Table id refers to a table defined by <a href="/kb/en/table_map_event/">TABLE_MAP_EVENT</a>. The special value 0xFFFFFF should have "end of statement flag" (0x0001) set and indicates that table maps can be freed.</p>
<h4 class="anchored_heading" id="flags">Flags</h4>
<div class="cstm-style borders"><table><tr><td>0x0001</td><td>End of statement</td></tr>
<tr><td>0x0002</td><td>No foreign key checks</td></tr>
<tr><td>0x0004</td><td>No unique key checks</td></tr>
<tr><td>0x0008</td><td>Indicates that rows in this event are complete</td></tr>
<tr><td>0x0010</td><td>No check constraints</td></tr>
</table>
</div><h4 class="anchored_heading" id="extra-data-length-version-2">Extra data length (version 2)</h4>
<p>The length of extra data</p>
<h4 class="anchored_heading" id="extra-data-version-2">Extra data (version 2)</h4>
<p>Extra data, length is extra data length - 2</p>
<h2 class="anchored_heading" id="column-data-formats">Column Data Formats</h2>
<p>The row data is stored in a packed format where each field is encoded in a particular format. The encoding is almost identical to the binary protocol but there are a few differences.</p>
<p>The field metadata is stored in the metadata block of the <a href="/kb/en/table_map_event/">TABLE_MAP_EVENT</a>. The metadata is required to decode the events. The following list shows number of bytes a field uses from the metadata block.</p>
<ul start="1"><li>2 bytes
<ul start="1"><li>MYSQL_TYPE_BIT
</li><li>MYSQL_TYPE_ENUM
</li><li>MYSQL_TYPE_SET
</li><li>MYSQL_TYPE_NEWDECIMAL
</li><li>MYSQL_TYPE_DECIMAL
</li><li>MYSQL_TYPE_VARCHAR
</li><li>MYSQL_TYPE_VAR_STRING
</li><li>MYSQL_TYPE_STRING
</li></ul>
</li></ul>
<ul start="1"><li>1 byte
<ul start="1"><li>MYSQL_TYPE_TINY_BLOB
</li><li>MYSQL_TYPE_MEDIUM_BLOB
</li><li>MYSQL_TYPE_LONG_BLOB
</li><li>MYSQL_TYPE_BLOB
</li><li>MYSQL_TYPE_TIMESTAMP2
</li><li>MYSQL_TYPE_DATETIME2
</li><li>MYSQL_TYPE_TIME2
</li><li>MYSQL_TYPE_FLOAT
</li><li>MYSQL_TYPE_DOUBLE
</li></ul>
</li></ul>
<p>The types that aren't listed here do not store data in the the metadata block.</p>
<h4 class="anchored_heading" id="simple-types">Simple Types</h4>
<div class="cstm-style borders"><table><tr><td>MYSQL_TYPE_NULL</td><td>Bit set in null bitmap, no value in row data</td></tr>
<tr><td>MYSQL_TYPE_TINY</td><td>1 byte integer</td></tr>
<tr><td>MYSQL_TYPE_YEAR</td><td>1  byte integer (year = value + 1900)</td></tr>
<tr><td>MYSQL_TYPE_SHORT</td><td>2 byte integer</td></tr>
<tr><td>MYSQL_TYPE_INT24</td><td>3 byte integer</td></tr>
<tr><td>MYSQL_TYPE_LONG</td><td>4 byte integer</td></tr>
<tr><td>MYSQL_TYPE_LONGLONG</td><td>8 byte integer</td></tr>
<tr><td>MYSQL_TYPE_FLOAT</td><td>4 byte floating point value (stored as a C <code>float</code> type)</td></tr>
<tr><td>MYSQL_TYPE_DOUBLE</td><td>8 byte floating point value (stored as a C <code>double</code> type)</td></tr>
</table>
</div><h4 class="anchored_heading" id="mysql_type_blob-and-other-blob-types"><code>MYSQL_TYPE_BLOB</code> and other blob types</h4>
<p>Stored as a length-encoded string where the string is preceded by a variable-sized integer that stores the length of the blob. The size of the preceding integer in bytes is stored as a one byte integer in the table metadata that is a part of the table map event.</p>
<p>For example if the value 4 is stored in the table metadata the length is stored as a 4 byte integer (e.g. <code>uint32_t</code>) followed by the data.</p>
<p>The exact column_type can be determined by the metadata length:</p>
<div class="cstm-style borders"><table><tr><td>Length</td><td>Type</td></tr>
<tr><td>1</td><td>MYSQL_TYPE_TINY_BLOB</td></tr>
<tr><td>2</td><td>MYSQL_TYPE_BLOB</td></tr>
<tr><td>3</td><td>MYSQL_TYPE_MEDIUM_BLOB</td></tr>
<tr><td>4</td><td>MYSQL_TYPE_LONG_BLOB</td></tr>
</table>
</div><h4 class="anchored_heading" id="mysql_type_string-mysql_type_set-and-mysql_type_enum"><code>MYSQL_TYPE_STRING</code>, <code>MYSQL_TYPE_SET</code> and <code>MYSQL_TYPE_ENUM</code></h4>
<p>Stored as a fixed-length string with the length of the string stored in the second byte of the table metadata. All three of these types are stored as <code>MYSQL_TYPE_STRING</code> in the binlog and the real type of the field is stored in the first byte of the metadata.</p>
<h4 class="anchored_heading" id="mysql_type_varchar-and-other-variable-length-string-types"><code>MYSQL_TYPE_VARCHAR</code> and other variable length string types</h4>
<p>Stored as a length-encoded string where the string is preceded by a variable-sized integer that stores the length of the string. The field length is stored as a two byte integer in the table metadata.</p>
<p>If the field length is larger than 255, the string length is stored as a two byte integer. If the value is equal to or less than 255, the string length is stored as a one byte integer.</p>
<h4 class="anchored_heading" id="mysql_type_datetime"><code>MYSQL_TYPE_DATETIME</code></h4>
<p><strong>Note</strong>: This field type is only used in MariaDB if global variable mysql56_temporal_format was set to OFF.
Stored as a 8 byte value with the values stored as multiples of 100. This means that the stored value is in the format YYYYMMDDHHMMSS and can be easily extracted by repeatedly calculating the remainder of dividing the value by 100 and dividing the value by 100. The following pseudo-code demonstrates extracting the value.</p>
<pre>
value = read_8_byte_value(row_data)
date_val= value / 1000000
time_val= value % 1000000

year = (date_val / 100) / 100
month = (date_val / 100) % 100
day = date_val % 100
hour= (time_val / 100) / 100
minute = (time_val / 100) % 100
second = time_val % 100
</pre>
<h4 class="anchored_heading" id="mysql_type_time"><code>MYSQL_TYPE_TIME</code></h4>
<p><strong>Note</strong>: This field type is only used in MariaDB if global variable mysql56_temporal_format was set to OFF.
Stored as a 3 byte value with the values stored as multiples of 100. This means that the stored value is in the format HHMMSS and can be easily extracted the same way a <code>MYSQL_TYPE_DATETIME</code> is extracted. The following pseudo-code demonstrates extracting the value.</p>
<pre>
time_val = read_3_byte_value(row_data); /* myisam pack format */
hour= (time_val / 100) / 100;
minute = (time_val / 100) % 100;
second = time_val % 100;</pre>
<h4 class="anchored_heading" id="mysql_type_datetime2"><code>MYSQL_TYPE_DATETIME2</code></h4>
<p>Stored as 4-byte value The number of decimals for the fractional part is stored in the table metadata as a one byte value. The number of bytes that follow the 5 byte datetime value can be calculated with the following formula: <code>(decimals + 1) / 2</code></p>
<pre>
val = read_5_byte_value(row_data) - 0x8000000000
d_val= val &gt;&gt; 17;
t_val = val % (1 &lt;&lt; 17);

day= d_val % (1 &lt;&lt; 5);
month= (d_val &gt;&gt; 5) % 13;
year= (d_val &gt;&gt; 5) / 13;
second= t_val % (1 &lt;&lt; 6);
minute= (t_val &gt;&gt; 6) % (1 &lt;&lt; 6);
hour= (t_val)(time_part &gt;&gt; 12);
</pre>
<h4 class="anchored_heading" id="mysql_type_time2"><code>MYSQL_TYPE_TIME2</code></h4>
<p>Stored as 3-byte value The number of decimals for the fractional part is stored in the table metadata as a one byte value. The number of bytes that follow the 3 byte time value can be calculated with the following formula: <code>(decimals + 1) / 2</code></p>
<pre>
t_val = read_3_byte_value(row_data) - 0x800000
if (t_val &lt; 0)
{
  signed= 1;
  t_val= - tval;
}
hour= (t_val &gt;&gt; 12) % (1 &lt;&lt; 10);
minute= (t_val &gt;&gt; 6) % (1 &lt;&lt; 6);
second= t_val % (1 &lt;&lt; 6);
</pre>
<h4 class="anchored_heading" id="mysql_type_timestamp2"><code>MYSQL_TYPE_TIMESTAMP2</code></h4>
<p>Stored as a 4 byte UNIX timestamp (number of seconds since 00:00, Jan 1 1970 UTC) followed by the fractional second parts. The number of decimals for the fractional part is stored in the table metadata as a one byte value. The number of bytes that follow the 4 byte timestamp can be calculated with the following formula: <code>(decimals + 1) / 2</code> </p>
<h5 class="anchored_heading" id="microseconds-for-mysql_type_datetime2-mysql_type_time2-and-mysql_type_timestamp">Microseconds for MYSQL_TYPE_DATETIME2, MYSQL_TYPE_TIME2 and MYSQL_TYPE_TIMESTAMP</h5>
<pre>
  len = (decimals + 1) / 2
  val= read_len_byte_value(row_data)
  llen= 0: microseconds= 0
  len = 1 or 2: microseconds = val * 10000
  len = 3 or 4: microseconds = 2-bytes val in myisam pack format
  len = 5 or 6: microseconds = 3-bytes val in myisam pack format
</pre>
<h4 class="anchored_heading" id="mysql_type_date"><code>MYSQL_TYPE_DATE</code></h4>
<p>Stored as a 3 byte value where bits 1 to 5 store the day, bits 6 to 9 store the month and the remaining bits store the year.</p>
<h4 class="anchored_heading" id="mysql_type_timestamp"><code>MYSQL_TYPE_TIMESTAMP</code></h4>
<p>Stored as a 4 byte UNIX timestamp (number of seconds since 00:00, Jan 1 1970 UTC).</p>
<h4 class="anchored_heading" id="example-from-mysqlbinlog-utility-crc32">Example From mysqlbinlog Utility, CRC32</h4>
<pre>
# at 1680
#180611  9:50:51 server id 1  end_log_pos 1754 CRC32 0x5415a8fb 	Write_rows: table id 23 flags: STMT_END_F

BINLOG '
2ykeWxMBAAAAPgAAAJAGAAAAABcAAAAAAAEABHRlc3QACWJ1bGtfbnVsbAAFDwMFE/YGFAAIAAMB
H1bULg8=
2ykeWxcBAAAASgAAANoGAAAAABcAAAAAAAEABf/gATMDAAAAAAAAAAAACECAAACDAP/gATMDAAAA
AAAAAAAACECAAACDAPuoFVQ=
'/*!*/;
</pre>
<h4 class="anchored_heading" id="example-event-as-its-written-in-the-binlog-file">Example Event As It's Written In The Binlog File</h4>
<pre>
               db 29 1e 5b 17 01 00 00 00 4a 00       .).[.....J.
00 00 da 06 00 00 00 00 17 00 00 00 00 00 01 00  ................
05 ff e0 01 33 03 00 00 00 00 00 00 00 00 00 08  ....3...........
40 80 00 00 83 00 ff e0 01 33 03 00 00 00 00 00  @........3......
00 00 00 00 08 40 80 00 00 83 00 fb a8 15 54     <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="0e20202020204e20202020202020205a">[email&#160;protected]</a>                                   ....
</pre>

    </div>


        
            <div id="subscribe" class="well well-small hide hidden-print"
                 data-subscribe-url="/kb/en/rows_event_v1v2-rows_compressed_event_v1/+subscriptions/add"
                 data-unsubscribe-url="/kb/en/rows_event_v1v2-rows_compressed_event_v1/+subscriptions/remove">
            </div>
        

        
        
    
        <div class="simple_section_nav">
            <ul class="nav nav-pills">
                
                    <li><a href="/kb/en/rotate_event/">
                        ← ROTATE_EVENT
                    </a>
                    </li>
                
                
                    <li><a href="/kb/en/replication-protocol/">
                        ↑ Replication Protocol ↑
                    </a>
                    </li>
                
                
                    <li class="pull-right"><a href="/kb/en/start_encryption_event/">
                        START_ENCRYPTION_EVENT →
                    </a>
                    </li>
                
            </ul>
        </div>
    

        

        
        <h2>Comments</h2>
        
    
    <div id="comments" data-node-id="7745" data-comments-url="/kb/en/rows_event_v1v2-rows_compressed_event_v1/+comments"
         data-reply-url="/kb/en/rows_event_v1v2-rows_compressed_event_v1/comments/post/">
        Comments loading...
    </div>

        

    </div>


                    <div id="content_disclaimer" class="graybox">
                        Content reproduced on this site is the property of its respective owners,
                        and this content is not reviewed in advance by MariaDB. The views, information and opinions
                        expressed by this content do not necessarily represent those of MariaDB or any other party.
                    </div>
                </div>
            </section>

            
                <div id="right_bar" class="col-md-2">
                    
    
        
        <ul class="section_navigation well well-small hidden-xs hidden-sm">
            
                <li class="parent"><a href="/kb/en/replication-protocol/">
                    ↑ Replication Protocol ↑
                </a>
                </li>
            
            
                
                    <li>
                        <a href="/kb/en/1-binlog-events/">
                            
                            1-Binlog Events
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/2-binlog-event-header/">
                            
                            2-Binlog Event Header
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/3-binlog-network-stream/">
                            
                            3-Binlog Network Stream
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/4-semi-sync-replication/">
                            
                            4-Semi-Sync Replication
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/5-slave-registration/">
                            
                            5-Slave Registration
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/annotate_rows_event/">
                            
                            ANNOTATE_ROWS_EVENT
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/begin_load_query_event/">
                            
                            BEGIN_LOAD_QUERY_EVENT
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/binlog_checkpoint_event/">
                            
                            BINLOG_CHECKPOINT_EVENT
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/com_binlog_dump/">
                            
                            COM_BINLOG_DUMP
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/com_register_slave/">
                            
                            COM_REGISTER_SLAVE
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/execute_load_query_event/">
                            
                            EXECUTE_LOAD_QUERY_EVENT
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/fake-gtid_list-event/">
                            
                            Fake GTID_LIST event
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/fake-rotate_event/">
                            
                            Fake ROTATE_EVENT
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/format_description_event/">
                            
                            FORMAT_DESCRIPTION_EVENT
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/gtid_event/">
                            
                            GTID_EVENT
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/gtid_list_event/">
                            
                            GTID_LIST_EVENT
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/heartbeat_log_event/">
                            
                            HEARTBEAT_LOG_EVENT
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/intvar_event/">
                            
                            INTVAR_EVENT
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/query_event/">
                            
                            QUERY_EVENT
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/rand_event/">
                            
                            RAND_EVENT
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/rotate_event/">
                            
                            ROTATE_EVENT
                        </a>
                    </li>
                
            
                
                    <li class="active">
                        <span>ROWS_EVENT_V1/V2, ROWS_COMPRESSED_EVENT_V1</span>
                        
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/start_encryption_event/">
                            
                            START_ENCRYPTION_EVENT
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/stop_event/">
                            
                            STOP_EVENT
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/table_map_event/">
                            
                            TABLE_MAP_EVENT
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/user_var_event/">
                            
                            USER_VAR_EVENT
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/xa_prepare_log_event/">
                            
                            XA_PREPARE_LOG_EVENT
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/xid_event/">
                            
                            XID_EVENT
                        </a>
                    </li>
                
            
        </ul>
    
    

                </div>
            
        </div>
    </div>
</div>

<!-- Footer -->
<footer id="footer">
    <div class="footer">
        <div class="container">
            <div class="row">
                <div class="col-xs-12">
                    <ul class="list-inline text-center footer-nav">
                        <li>
                            <h5>
                                <a href="https://mariadb.com/products" title="Products">Products</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/services" title="Services">Services</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/pricing" title="Pricing">Pricing</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/resources" title="Resources">Resources</a>
                            </h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/about-us" title="About MariaDB">About Us</a></h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/download" title="Download">Download MariaDB</a></h5>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="row row-10">
                
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div id="block-footerformcontact" class="block block-block-content block-block-contentd754ee1b-3cc9-40e7-9ef4-f504f1197fb1">
                        
                            <h5 style="font-weight: 400;">Subscribe to our newsletter!</h5>
                            <script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script src="//app-sj15.marketo.com/js/forms2/js/forms2.min.js"></script><form id="mktoForm_1498"></form>
                            <script>
                                <!--//--><![CDATA[// ><!--
                                MktoForms2.loadForm("//app-sj15.marketo.com", "573-PXI-984", 1498);
                                //--><!]]]]><![CDATA[>
                                //--><!]]>
                            </script>
                        
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div class="footer-copyright">
                        <div class="text-center">
                            <ul class="list-inline no-margin">
                                <li>
                                    <a href="/legal" title="Legal">Legal</a>
                                </li>
                                <li>
                                    <a href="/privacy-policy" title="Privacy Policy">Privacy Policy</a>
                                </li>
                                <li>
                                    <a href="/cookie-policy/" title="Cookies">Cookie Policy</a>
                                </li>
                            </ul>
                            <p>Copyright &copy; 2024 MariaDB. All rights reserved.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
</footer>
</div>

<div id="ajax_loading">
    <img src="/kb/static/images/ajax-loader.a51c5608d01a.gif" />
</div>

    <!-- Google Tag Manager -->
    <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-MK2847"
                      height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
            '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MK2847');</script>
    <!-- End Google Tag Manager -->

</body>

<script type="text/javascript" src="/kb/static/js/main.1587e3a666fc.js" charset="utf-8"></script>

</html>