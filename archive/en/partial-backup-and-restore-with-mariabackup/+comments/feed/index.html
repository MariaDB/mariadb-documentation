<?xml version="1.0" encoding="utf-8"?>
<rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title>MariaDB Knowledge Base Comments for: Partial Backup and Restore with Mariabackup</title><link>https://mariadb.com/kb/en/partial-backup-and-restore-with-mariabackup/+comments/feed/</link><description></description><atom:link href="https://mariadb.com/kb/en/partial-backup-and-restore-with-mariabackup/+comments/feed/" rel="self"></atom:link><language>en-us</language><lastBuildDate>Mon, 29 Jan 2024 19:39:47 +0000</lastBuildDate><item><title>Re: Partial Backup and Restore with Mariabackup</title><link>https://mariadb.com/kb/en/partial-backup-and-restore-with-mariabackup/+comments/6518</link><description>&lt;p&gt;This article should specify behaviors for triggers, stored procedures, and functions or specify the lack thereof.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Conrad Pino</dc:creator><guid>https://mariadb.com/kb/en/partial-backup-and-restore-with-mariabackup/+comments/6518</guid></item><item><title>Re: Partial Backup and Restore with Mariabackup</title><link>https://mariadb.com/kb/en/partial-backup-and-restore-with-mariabackup/+comments/6453</link><description>&lt;p&gt;One thing is not clear. Is the --prepare a step of the backup or a step of the restore?&lt;/p&gt;
&lt;p&gt;Suppose I have a full (unprepared) backup, then server "explodes". Can I run  the mariabackup --prepare on a new server, or does it have to be done just after backup on the old server? In other words, does --prepare need more than the mariabackup files to work?&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Alain Bourgeois</dc:creator><guid>https://mariadb.com/kb/en/partial-backup-and-restore-with-mariabackup/+comments/6453</guid></item><item><title>Re: Partial Backup and Restore with Mariabackup</title><link>https://mariadb.com/kb/en/partial-backup-and-restore-with-mariabackup/+comments/5400</link><description>&lt;p&gt;Can I use Mariabackup for doing a partial backup of some tables in a database, and restoring them in ANOTHER database?&lt;/p&gt;
&lt;p&gt;Actually I am looking for a way to quickly clone full huge tables (only MyISAM or Aria so far) from one database to another one.&lt;/p&gt;
&lt;p&gt;Using mysqldump it is quite fast to dump them, but they take hours to restore.&lt;/p&gt;
&lt;p&gt;Backing up all of them using Mariabackup needs less than 4 minutes (on a quite slow test machine), and likely I could just manually stop the server, put the MyISAM files in the database space and restart the server in a matter of seconds, but I'm not completely sure this is safe.&lt;/p&gt;
&lt;p&gt;Is there a way to cleanly restore them IN ANOTHER DATABASE, for example by using the --move-back option of Mariabackup, without corrupting other existing databases (as the backup also includes files like ibdata1, likely useless in this case)?&lt;/p&gt;
&lt;p&gt;G.R.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Gilles Reeves</dc:creator><guid>https://mariadb.com/kb/en/partial-backup-and-restore-with-mariabackup/+comments/5400</guid></item><item><title>Re: Partial Backup and Restore with Mariabackup</title><link>https://mariadb.com/kb/en/partial-backup-and-restore-with-mariabackup/+comments/4359</link><description>&lt;p&gt;Is the last bullet point at the beginning correct? "To tell it to check a file for the databases to backup, you can provide the --tables-file option. " For the "databases" or for the "tables" to back up?&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Ding O</dc:creator><guid>https://mariadb.com/kb/en/partial-backup-and-restore-with-mariabackup/+comments/4359</guid></item><item><title>Re: Partial Backup and Restore with Mariabackup</title><link>https://mariadb.com/kb/en/partial-backup-and-restore-with-mariabackup/+comments/3784</link><description>&lt;p&gt;Hi,&lt;/p&gt;
&lt;p&gt;When I try to prepare a full backup with --export option, I am seeing these errors. I am not sure why is it trying to access the data files from mysql directory instead of backup directory specified by --target-dir option.&lt;/p&gt;
&lt;pre class="fixed"&gt;/opt/myapp/current/opt/mysql/bin/mariabackup based on MariaDB server 10.3.8-MariaDB Linux (x86_64)
mariabackup: auto-enabling --innodb-file-per-table due to the --export option
mariabackup: cd to /opt/myapp/dbbackup/backups/20190115122445/base/
mariabackup: This target seems to be not prepared yet.
mariabackup: using the following InnoDB configuration for recovery:
mariabackup:   innodb_data_home_dir = .
mariabackup:   innodb_data_file_path = ibdata1:10M:autoextend
mariabackup:   innodb_log_group_home_dir = .
mariabackup: Starting InnoDB instance for recovery.
mariabackup: Using 104857600 bytes for buffer pool (set by --use-memory parameter)
2019-01-15 12:30:49 0 [Note] InnoDB: Mutexes and rw_locks use GCC atomic builtins
2019-01-15 12:30:49 0 [Note] InnoDB: Uses event mutexes
2019-01-15 12:30:49 0 [Note] InnoDB: Compressed tables use zlib 1.2.3
2019-01-15 12:30:49 0 [Note] InnoDB: Number of pools: 1
2019-01-15 12:30:49 0 [Note] InnoDB: Using SSE2 crc32 instructions
2019-01-15 12:30:49 0 [Note] InnoDB: Initializing buffer pool, total size = 100M, instances = 1, chunk size = 100M
2019-01-15 12:30:49 0 [Note] InnoDB: Completed initialization of buffer pool
2019-01-15 12:30:49 0 [Note] InnoDB: If the mysqld execution user is authorized, page cleaner thread priority can be changed. See the man page of setpriority().
2019-01-15 12:30:49 0 [Note] InnoDB: Starting crash recovery from checkpoint LSN=28776373
Last binlog file , position 0
Prepare export : executing &amp;#34;/opt/myapp/app-1.1/opt/mariadb-Linux-x86_64-10.3.8/bin/mariabackup&amp;#34; --mysqld &amp;#34;--defaults-file=/opt/myapp/dbbackup/.my.currentbase/.my.cnf&amp;#34;  --defaults-extra-file=./backup-my.cnf --defaults-group-suffix= --datadir=. --innodb --innodb-fast-shutdown=0 --innodb_purge_rseg_truncate_frequency=1 --innodb-buffer-pool-size=104857600 --console  --skip-log-error --bootstrap  &amp;lt; mariabackup_prepare_for_export.sql
2019-01-15 12:30:50 0 [Note] mysqld (mysqld 10.3.8-MariaDB-log) starting as process 2562 ...
2019-01-15 12:30:50 0 [Note] InnoDB: Using Linux native AIO
2019-01-15 12:30:50 0 [Note] InnoDB: Mutexes and rw_locks use GCC atomic builtins
2019-01-15 12:30:50 0 [Note] InnoDB: Uses event mutexes
2019-01-15 12:30:50 0 [Note] InnoDB: Compressed tables use zlib 1.2.3
2019-01-15 12:30:50 0 [Note] InnoDB: Number of pools: 1
2019-01-15 12:30:50 0 [Note] InnoDB: Using SSE2 crc32 instructions
2019-01-15 12:30:50 0 [Note] InnoDB: Initializing buffer pool, total size = 100M, instances = 1, chunk size = 100M
2019-01-15 12:30:50 0 [Note] InnoDB: Completed initialization of buffer pool
2019-01-15 12:30:50 0 [Note] InnoDB: If the mysqld execution user is authorized, page cleaner thread priority can be changed. See the man page of setpriority().
2019-01-15 12:30:51 0 [ERROR] InnoDB: Unable to lock /opt/myapp/app-1.1/opt/mysql/data/ibdata1 error: 11
2019-01-15 12:30:51 0 [Note] InnoDB: Check that you do not already have another mysqld process using the same InnoDB data or log files.
2019-01-15 12:30:51 0 [Note] InnoDB: Retrying to lock the first data file
2019-01-15 12:30:51 0 [ERROR] InnoDB: Unable to lock /opt/myapp/app-1.1/opt/mysql/data/ibdata1 error: 11
2019-01-15 12:30:51 0 [Note] InnoDB: Check that you do not already have another mysqld process using the same InnoDB data or log files.
2019-01-15 12:30:51 0 [ERROR] InnoDB: Unable to lock /opt/myapp/app-1.1/opt/mysql/data/ibdata1 error: 11
2019-01-15 12:30:51 0 [Note] InnoDB: Check that you do not already have another mysqld process using the same InnoDB data or log files.
2019-01-15 12:30:51 0 [ERROR] InnoDB: Unable to lock /opt/myapp/app-1.1/opt/mysql/data/ibdata1 error: 11
&lt;/pre&gt;&lt;p&gt;This is the command to prepare and export the backup.&lt;/p&gt;
&lt;pre class="fixed"&gt;/opt/myapp/app-1.1/opt/mysql/bin/mariabackup --defaults-file=/opt/myapp/dbbackup/.my.currentbase/.my.cnf --prepare --databases=quarantine --user=root --export --target-dir=/opt/myapp/dbbackup/backups/20190115122445/base
&lt;/pre&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">aung oo</dc:creator><guid>https://mariadb.com/kb/en/partial-backup-and-restore-with-mariabackup/+comments/3784</guid></item></channel></rss>