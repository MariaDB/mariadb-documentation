



<!DOCTYPE html>
<html>
<head data-cookie-domain=""
      data-cookie-path="/">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="apple-touch-icon" sizes="180x180" href="/kb/static/images/favicons/apple-touch-icon.159e713979be.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/kb/static/images/favicons/favicon-32x32.bc0ac1d5d11e.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/kb/static/images/favicons/favicon-16x16.5801f8f0f34e.png">
    <link rel="shortcut icon" href="/kb/static/images/favicons/favicon.d122d305dee4.ico" type="image/x-icon" />

    <title>
Comments - Cannot increase open-files-limit
 - MariaDB Knowledge Base</title>

    <link href="/kb/static/css/main.f7633538c846.css" rel="stylesheet" type="text/css" />

    

    
        <meta name="robots" content="noindex, nofollow" />
    

    <!-- FB Open Graph tags -->
    <meta property="og:title" content="
Comments - Cannot increase open-files-limit
" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://mariadb.com/kb/en/cannot-increase-open-files-limit/+comments" />
    <meta property="og:image" content="http://mariadb.comaskmonty-logo.png" />
    <meta property="og:site_name" content="MariaDB KnowledgeBase" />
    <meta property="fb:admins" content="514852603" />
    <meta property="og:description" content="" />

    <meta name="description" content="" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="//fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet"/>
    
</head>
<body class="mpkb nodes node_comments jqui" id="node_comments">





<div id="menu-mobile" class="visible-sm visible-xs">

    <div>
        <div id="mobile-close-menu" class="text-right">
            <a href="javascript:void(0)" title="Close Menu" id="back-main" class="toggle-menu">X<span></span></a>
        </div>
    </div>
    <div class="mainmenu-mobile">
        <ul class="ls-none ul-menu">
            <li data-sub="submenu5"><a class="open-form-search" href="/kb/search/" title="Search">Search </a></li>
            <li data-sub="submenu0"><a href="/products" title="Products">Products</a><span class="arrow-main"></span></li>
            <li data-sub="submenu1"><a href="/services" title="Services">Services</a><span class="arrow-main"></span></li>
            <li data-sub="submenu2"><a href="/resources" title="Resources">Resources</a><span class="arrow-main"></span></li>
            <li data-sub="submenu3"><a href="/about-us" title="About">About</a><span class="arrow-main"></span></li>
            <li data-sub="submenu4"><a href="/contact" title="Contact">Contact</a></li>
        </ul>
    </div>

    <div class="nav-top-mobile">
        <div class="select-box form">

            <ul class="inline-block-md mb-none top-nav">
                <li>

                </li>
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/cannot-increase-open-files-limit/+comments"> Login</a>
                    </li>
                
            </ul>



        </div>
        <p class="text-center copyright">Copyright &copy; 2025 MariaDB. All rights reserved.</p>
    </div>
</div>
<div class="violator-wrap d-none" id="top_violator">
    <div class="container">
        <div class="row">
            <div class="col-xs-12 col-sm-12">
                <div class="violator-outer">
                    <div class="violator-inner">
                        <div class="row">
                            <div class="col-xs-12 col-sm-9 col-lg-7 col-lg-offset-2" id="top_violator_content">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="content-link" target="_blank" rel="nofollow noreferrer">
                                    <span>The Ultimate Guide to High Availability with MariaDB</span>
                                </a>
                            </div>
                            <div class="col-xs-12 col-sm-3" id="top_violator_cta">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="btn btn-mariadb" target="_blank" rel="nofollow noreferrer">Download Now</a>
                            </div>
                        </div>
                    </div>
                    <button type="button" class="btn btn-link close-btn">
                        <svg xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 24 24" width="15px" height="15px"><path d="M 4.9902344 3.9902344 A 1.0001 1.0001 0 0 0 4.2929688 5.7070312 L 10.585938 12 L 4.2929688 18.292969 A 1.0001 1.0001 0 1 0 5.7070312 19.707031 L 12 13.414062 L 18.292969 19.707031 A 1.0001 1.0001 0 1 0 19.707031 18.292969 L 13.414062 12 L 19.707031 5.7070312 A 1.0001 1.0001 0 0 0 18.980469 3.9902344 A 1.0001 1.0001 0 0 0 18.292969 4.2929688 L 12 10.585938 L 5.7070312 4.2929688 A 1.0001 1.0001 0 0 0 4.9902344 3.9902344 z"/></svg>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="wrapper">
<div id="top-nav">
    <div class="container">
        <ul class="hidden-sm hidden-xs" >
            <li><a href="https://mariadb.com/kb/">Knowledge Base</a></li>
            <li><a href="https://mariadb.com/contact/">Contact</a></li>
            
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/cannot-increase-open-files-limit/+comments" rel="nofollow">Login</a>
                    </li>
                
            
            
            <li id="search-form">
                <form action="/kb/en/+search/" method="get" id="search-block-form" accept-charset="UTF-8">
                    <input id="search" title="Enter the terms you wish to search for."
                           placeholder="Search . . ." type="text"
                           name="q" value="" size="15" maxlength="128" class="form-text"
                           data-autocomplete-url="/kb/en/+search/autocomplete/">
                    <input type="hidden" name="quick" value="1" />
                    <input type="hidden" name="source" value="kb" />
                </form>
            </li>
            <li><a id="search-toggler" href="/kb/search/">Search</a></li>
            
        </ul>
    </div>
</div>
<div id="navbar-bottom" class="navbar">
    <div class="container">
        
        
        
        
        <div class="row">
            <div class="col-md-3 col-sm-9 col-xs-9">
                <a class="brand" href="/" title="MariaDB">
                    <img src="/kb/static/images/logo-2018-black.95f5978ae14d.png">
                </a>
            </div>
            <div class="col-md-9 hidden-sm hidden-xs">
                <div class="main-menu">
                    <ul id="main-menu" class="nav navbar-nav inline-block-sm">
    <li class="has-sub full-menu">
        <a href="/products" title="Products">Products</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/services" title="Services">Services</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/pricing" title="Pricing">Pricing</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/resources" title="Resources">Resources</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/about-us" title="About Us">About Us</a>
    </li>
    <li class="">
        <a class="button electric-eel small top-bar-right-download" href="/downloads/">Download</a>
    </li>
</ul>
                </div>
            </div>
            <div class="col-md-3 visible-sm visible-xs col-sm-3 col-xs-3 ps-rv">
                <div class="navbar-header text-right pull-right">
                    <button type="button" class="menu-control toggle-menu" id="open-menu">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="main">
    <div class="container">
        

        <div id="subheader1" class="clearfix">
            <div class="pull-left">
                
                <div id="breadcrumbs" class="breadcrumb">
                    <a href="/kb/en/">Knowledge Base</a>
                    


    
    » <a class="crumb" href="/kb/en/faq/">Frequently Asked Questions</a>
    

    
    » <a class="crumb" href="/kb/en/public-questions/">Public Questions</a>
    


    » <a class="node_link crumb" href="/kb/en/cannot-increase-open-files-limit/">Cannot increase open-files-limit</a>


                </div>
                
            </div>
        </div>
    </div>
    <div class="container" id="container-main">
        <div class="row">
            
            
            
            
            
            <section id="content" class="limited_width col-md-12 clearfix">
                
                    <h1>
Comments - Cannot increase open-files-limit
</h1>
                

                



                <div>
                    
<div id="comments" data-node-id="4922" data-comments-url="/kb/en/cannot-increase-open-files-limit/+comments"
        data-reply-url="/kb/en/cannot-increase-open-files-limit/comments/post/">
<div class="comment_top_menu hidden-print">&nbsp;
            <div class="pull-right">
                <label>
                    Include Archived
                    <input id="include_archived" type="checkbox" name="include_archived" value="1"
                           />
                </label>
            </div>
        </div>
        <a name="comment_1580"></a>
        <div class="comment approved is_answer" style="margin-left: 0px">
            <div class="info">
                

<span class="datetime" title="2015-06-11 07:53">9 years, 6 months ago</span>
                
<span class="user" id="user-1085">
<a href="/kb/user/id/1085" title="Daniel Black">Daniel Black</a>
</span>
            </div>
            <div class="title">
                <a href="#comment_1580">Re: Cannot increase open-files-limit</a>
                 [Answer]
            </div><div class="comment_text">
                <p>If the OS isn't using systemd make sure that the open-file-limit is in the [mysqld_safe] section of the my.cnf file to raise the hard limit.</p>

            </div>
            <div class="comment_actions hidden-print">
                
                
                &nbsp;

                <div class="pull-right">
                    
                    <a class="flag btn btn-mini" href="/kb/en/cannot-increase-open-files-limit/+comments/1580/flag"
                       data-flag-url="/kb/en/cannot-increase-open-files-limit/+comments/1580/flag"
                            title="Flag as Spam/Inappropriate">
                        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                        </a>
                    
                    
                    
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
        
    

    
        <a name="comment_1536"></a>
        <div class="comment approved" style="margin-left: 0px">
            <div class="info">
                

<span class="datetime" title="2015-05-04 05:27">9 years, 8 months ago</span>
                
<span class="user" id="user-1368">
<a href="/kb/user/id/1368" title="Ian Gilfillan">Ian Gilfillan</a>
</span>
            </div>
            <div class="title">
                <a href="#comment_1536">Re: Cannot increase open-files-limit</a>
                
            </div><div class="comment_text">
                <p>Do the suggestions at <a href="https://mariadb.com/kb/en/mariadb/could-not-increase-number-of-max_open_files-to-more-than-1024-request-1835/">https://mariadb.com/kb/en/mariadb/could-not-increase-number-of-max_open_files-to-more-than-1024-request-1835/</a> and <a href="http://unix.stackexchange.com/questions/152186/mysql-max-open-files-more-than-1024">http://unix.stackexchange.com/questions/152186/mysql-max-open-files-more-than-1024</a> help?</p>

            </div>
            <div class="comment_actions hidden-print">
                
                
                &nbsp;

                <div class="pull-right">
                    
                    <a class="flag btn btn-mini" href="/kb/en/cannot-increase-open-files-limit/+comments/1536/flag"
                       data-flag-url="/kb/en/cannot-increase-open-files-limit/+comments/1536/flag"
                            title="Flag as Spam/Inappropriate">
                        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                        </a>
                    
                    
                    
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
        <a name="comment_1540"></a>
        <div class="comment approved" style="margin-left: 10px">
            <div class="info">
                

<span class="datetime" title="2015-05-07 02:08">9 years, 8 months ago</span>
                
<span class="user" id="user-2687">
<a href="/kb/user/id/2687" title="Raquel James">Raquel James</a>
</span>
            </div>
            <div class="title">
                <a href="#comment_1540">Re: Cannot increase open-files-limit</a>
                
            </div><div class="comment_text">
                <p>I created /lib/systemd/system/mysqld.service with the referenced settings - no change.</p>

            </div>
            <div class="comment_actions hidden-print">
                
                
                &nbsp;

                <div class="pull-right">
                    
                    <a class="flag btn btn-mini" href="/kb/en/cannot-increase-open-files-limit/+comments/1540/flag"
                       data-flag-url="/kb/en/cannot-increase-open-files-limit/+comments/1540/flag"
                            title="Flag as Spam/Inappropriate">
                        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                        </a>
                    
                    
                    
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
        <a name="comment_3692"></a>
        <div class="comment approved" style="margin-left: 20px">
            <div class="info">
                

<span class="datetime" title="2018-12-13 19:00">6 years ago</span>
                
<span class="user" id="user-5026">
<a href="/kb/user/id/5026" title="Wagner Bianchi">Wagner Bianchi</a>
</span>
            </div>
            <div class="title">
                <a href="#comment_3692">Re: Cannot increase open-files-limit</a>
                
            </div><div class="comment_text">
                <p>It's for sure really annoying, but, after attempting some additional steps as per the MariaDB docs, one can get it like below. The message is the one like below:</p>
<p>[Warning] InnoDB: innodb_open_files 65500 should not be greater than the open_files_limit 16364</p>
<p>I started the MariaDB Server 10.3.11 with the below configs:</p>
<p>mariadb@db-d01:$ my_print_defaults mysqld | grep files
--innodb_open_files=65533
--open_files_limit=65533</p>
<p>I suspected something was blocking the limits of open_files_limit while innodb_open_files were going over and giving me that message. Looking for additional documents pointed by Ian Gilfillan, I found the below that the open_files_limit is limited by default at 16k (16364); a number which appears everywhere. </p>
<p>So, to increase that number, as we need to take it to `65533` to give it a full room, we need to change the `LimitNOFILE=16364` to `LimitNOFILE=65533` in the mariadb.service unit and enter the below command:</p>
<p>mariadb-dba@mortality-db-d01:$ sudo systemctl daemon-reload</p>
<p>It’s going to reload units located under the systemD subsystem which is going to make it possible to start the `mariadb.service` with that new definition. The ulimit is not an option anymore to tune open files, so, we check the new limit out of prlimit, as below:</p>
<p>mariadb@db-d01:$ sudo prlimit --pid=$(pidof mysqld) | grep NOFILE
NOFILE     max number of open files               65533     65533</p>
<p><strong> Why prlimit? <a href="https://lzone.de/cheat-sheet/ulimit">https://lzone.de/cheat-sheet/ulimit</a></strong></p>
<p>And then, we can add to the current configuration file the below:
--innodb_open_files=65533
--open_files_limit=65533</p>
<p>No warnings on the error log enymore:
`2018-12-13 10:40:59 0 [Note] InnoDB: Using Linux native AIO
2018-12-13 10:40:59 0 [Note] InnoDB: Mutexes and rw_locks use GCC atomic builtins
2018-12-13 10:40:59 0 [Note] InnoDB: Uses event mutexes
2018-12-13 10:40:59 0 [Note] InnoDB: Compressed tables use zlib 1.2.8
2018-12-13 10:40:59 0 [Note] InnoDB: Number of pools: 1
2018-12-13 10:40:59 0 [Note] InnoDB: Using SSE2 crc32 instructions
2018-12-13 10:40:59 0 [Note] InnoDB: Initializing buffer pool, total size = 7G, instances = 8, chunk size = 128M
2018-12-13 10:40:59 0 [Note] InnoDB: Completed initialization of buffer pool
2018-12-13 10:40:59 0 [Note] InnoDB: If the mysqld execution user is authorized, page cleaner thread priority can be changed. See the man page of setpriority().
2018-12-13 10:41:00 0 [Note] InnoDB: 128 out of 128 rollback segments are active.
2018-12-13 10:41:00 0 [Note] InnoDB: Creating shared tablespace for temporary tables
2018-12-13 10:41:00 0 [Note] InnoDB: Setting file './ibtmp1' size to 12 MB. Physically writing the file full; Please wait ...
2018-12-13 10:41:00 0 [Note] InnoDB: File './ibtmp1' size is now 12 MB.
2018-12-13 10:41:00 0 [Note] InnoDB: 10.3.11 started; log sequence number 105534396886311; transaction id 929353557
2018-12-13 10:41:00 0 [Note] InnoDB: Loading buffer pool(s) from /Database/prod/ib_buffer_pool
2018-12-13 10:41:00 0 [Note] Plugin 'FEEDBACK' is disabled.
2018-12-13 10:41:00 0 [Note] Server socket created on IP: '0.0.0.0'.
2018-12-13 10:41:00 0 [Note] Server socket created on IP: '0.0.0.0'.
2018-12-13 10:41:00 0 [Warning] 'proxies_priv' entry '@% root@db07' ignored in --skip-name-resolve mode.
2018-12-13 10:41:00 0 [Note] Reading of all Master_info entries succeded
2018-12-13 10:41:00 0 [Note] Added new Master_info '' to hash table
2018-12-13 10:41:00 0 [Note] /usr/sbin/mysqld: ready for connections.
Version: '10.3.11-MariaDB-1:10.3.11+mariaxenial-log'  socket: '/var/run/mysqld/mysqld.sock'  port: 3306  mariadb.org binary distribution
2018-12-13 10:41:52 0 [Note] InnoDB: Buffer pool(s) load completed at 181213 10:41:52</p>
<p>So, that way, you can raise the files limite.</p>

            </div>
            <div class="comment_actions hidden-print">
                
                
                &nbsp;

                <div class="pull-right">
                    
                    <a class="flag btn btn-mini" href="/kb/en/cannot-increase-open-files-limit/+comments/3692/flag"
                       data-flag-url="/kb/en/cannot-increase-open-files-limit/+comments/3692/flag"
                            title="Flag as Spam/Inappropriate">
                        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                        </a>
                    
                    
                    
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
        
    

    

    
        <a name="comment_1537"></a>
        <div class="comment approved" style="margin-left: 10px">
            <div class="info">
                

<span class="datetime" title="2015-05-04 18:55">9 years, 8 months ago</span>
                
<span class="user" id="user-2687">
<a href="/kb/user/id/2687" title="Raquel James">Raquel James</a>
</span>
            </div>
            <div class="title">
                <a href="#comment_1537">Re: Cannot increase open-files-limit</a>
                
            </div><div class="comment_text">
                <p>I saw both of these posts when researching this problem but since neither file referenced (/usr/lib/systemd/system/mysqld.service and /usr/lib/systemd/system/mariadb.service) exist on my server, I dismissed them as possible solutions.  In fact, the subdirectory /system does not even exist in my installation.  However, if the creation of one or the other of these files would be read and applied, I will certainly do so.</p>

            </div>
            <div class="comment_actions hidden-print">
                
                
                &nbsp;

                <div class="pull-right">
                    
                    <a class="flag btn btn-mini" href="/kb/en/cannot-increase-open-files-limit/+comments/1537/flag"
                       data-flag-url="/kb/en/cannot-increase-open-files-limit/+comments/1537/flag"
                            title="Flag as Spam/Inappropriate">
                        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                        </a>
                    
                    
                    
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
        
    

    

    

</div>


                    <div id="content_disclaimer" class="graybox">
                        Content reproduced on this site is the property of its respective owners,
                        and this content is not reviewed in advance by MariaDB. The views, information and opinions
                        expressed by this content do not necessarily represent those of MariaDB or any other party.
                    </div>
                </div>
            </section>

            
        </div>
    </div>
</div>

<!-- Footer -->
<footer id="footer">
    <div class="footer">
        <div class="container">
            <div class="row">
                <div class="col-xs-12">
                    <ul class="list-inline text-center footer-nav">
                        <li>
                            <h5>
                                <a href="https://mariadb.com/products" title="Products">Products</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/services" title="Services">Services</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/pricing" title="Pricing">Pricing</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/resources" title="Resources">Resources</a>
                            </h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/about-us" title="About MariaDB">About Us</a></h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/download" title="Download">Download MariaDB</a></h5>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="row row-10">
                
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div id="block-footerformcontact" class="block block-block-content block-block-contentd754ee1b-3cc9-40e7-9ef4-f504f1197fb1">
                        
                            <h5 style="font-weight: 400;">Subscribe to our newsletter!</h5>
                            <script src="//app-sj15.marketo.com/js/forms2/js/forms2.min.js"></script><form id="mktoForm_1498"></form>
                            <script>
                                <!--//--><![CDATA[// ><!--
                                MktoForms2.loadForm("//app-sj15.marketo.com", "573-PXI-984", 1498);
                                //--><!]]]]><![CDATA[>
                                //--><!]]>
                            </script>
                        
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div class="footer-copyright">
                        <div class="text-center">
                            <ul class="list-inline no-margin">
                                <li>
                                    <a href="/legal" title="Legal">Legal</a>
                                </li>
                                <li>
                                    <a href="/privacy-policy" title="Privacy Policy">Privacy Policy</a>
                                </li>
                                <li>
                                    <a href="/cookie-policy/" title="Cookies">Cookie Policy</a>
                                </li>
                            </ul>
                            <p>Copyright &copy; 2025 MariaDB. All rights reserved.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
</footer>
</div>

<div id="ajax_loading">
    <img src="/kb/static/images/ajax-loader.a51c5608d01a.gif" />
</div>

    <!-- Google Tag Manager -->
    <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-MK2847"
                      height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
            '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MK2847');</script>
    <!-- End Google Tag Manager -->

</body>

<script type="text/javascript" src="/kb/static/js/main.1587e3a666fc.js" charset="utf-8"></script>

</html>