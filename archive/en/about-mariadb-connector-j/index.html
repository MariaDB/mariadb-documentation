<!DOCTYPE html>
<html>
<head data-cookie-domain=""
      data-cookie-path="/">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="apple-touch-icon" sizes="180x180" href="/kb/static/images/favicons/apple-touch-icon.159e713979be.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/kb/static/images/favicons/favicon-32x32.bc0ac1d5d11e.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/kb/static/images/favicons/favicon-16x16.5801f8f0f34e.png">
    <link rel="shortcut icon" href="/kb/static/images/favicons/favicon.d122d305dee4.ico" type="image/x-icon" />

    <title>About MariaDB Connector/J - MariaDB Knowledge Base</title>

    <link href="/kb/static/css/main.9a0d7dcebefd.css" rel="stylesheet" type="text/css" />

    

    <!-- FB Open Graph tags -->
    <meta property="og:title" content="About MariaDB Connector/J" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://mariadb.com/kb/en/about-mariadb-connector-j/" />
    <meta property="og:image" content="http://mariadb.comaskmonty-logo.png" />
    <meta property="og:site_name" content="MariaDB KnowledgeBase" />
    <meta property="fb:admins" content="514852603" />
    <meta property="og:description" content="LGPL-licensed MariaDB client library for Java applications." />

    <meta name="description" content="LGPL-licensed MariaDB client library for Java applications." />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="//fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet"/>
    
</head>
<body class="mpkb nodes products nodes_view jqui" id="nodes_view">





<div id="menu-mobile" class="visible-sm visible-xs">

    <div>
        <div id="mobile-close-menu" class="text-right">
            <a href="javascript:void(0)" title="Close Menu" id="back-main" class="toggle-menu">X<span></span></a>
        </div>
    </div>
    <div class="mainmenu-mobile">
        <ul class="ls-none ul-menu">
            <li data-sub="submenu5"><a class="open-form-search" href="/kb/search/" title="Search">Search </a></li>
            <li data-sub="submenu0"><a href="/products" title="Products">Products</a><span class="arrow-main"></span></li>
            <li data-sub="submenu1"><a href="/services" title="Services">Services</a><span class="arrow-main"></span></li>
            <li data-sub="submenu2"><a href="/resources" title="Resources">Resources</a><span class="arrow-main"></span></li>
            <li data-sub="submenu3"><a href="/about-us" title="About">About</a><span class="arrow-main"></span></li>
            <li data-sub="submenu4"><a href="/contact" title="Contact">Contact</a></li>
        </ul>
    </div>

    <div class="nav-top-mobile">
        <div class="select-box form">

            <ul class="inline-block-md mb-none top-nav">
                <li>

                </li>
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/about-mariadb-connector-j/"> Login</a>
                    </li>
                
            </ul>



        </div>
        <p class="text-center copyright">Copyright &copy; 2024 MariaDB. All rights reserved.</p>
    </div>
</div>
<div id="wrapper">
<div id="top-nav">
    <div class="container">
        <ul class="hidden-sm hidden-xs" >
            <li><a href="https://mariadb.com/kb/">Knowledge Base</a></li>
            <li><a href="https://mariadb.com/contact/">Contact</a></li>
            
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/about-mariadb-connector-j/" rel="nofollow">Login</a>
                    </li>
                
            
            
            <li id="search-form">
                <form action="/kb/en/+search/" method="get" id="search-block-form" accept-charset="UTF-8">
                    <input id="search" title="Enter the terms you wish to search for."
                           placeholder="Search . . ." type="text"
                           name="q" value="" size="15" maxlength="128" class="form-text"
                           data-autocomplete-url="/kb/en/+search/autocomplete/">
                    <input type="hidden" name="quick" value="1" />
                    <input type="hidden" name="source" value="kb" />
                </form>
            </li>
            <li><a id="search-toggler" href="/kb/search/">Search</a></li>
            
        </ul>
    </div>
</div>
<div id="navbar-bottom" class="navbar">
    <div class="container">
        
        
        
        
        <div class="row">
            <div class="col-md-3 col-sm-9 col-xs-9">
                <a class="brand" href="/" title="MariaDB">
                    <img src="/kb/static/images/logo-2018-black.95f5978ae14d.png">
                </a>
            </div>
            <div class="col-md-9 hidden-sm hidden-xs">
                <div class="main-menu">
                    <ul id="main-menu" class="nav navbar-nav inline-block-sm">
    <li class="has-sub full-menu">
        <a href="/products" title="Products">Products</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/services" title="Services">Services</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/pricing" title="Pricing">Pricing</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/resources" title="Resources">Resources</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/about-us" title="About Us">About Us</a>
    </li>
    <li class="">
        <a class="button electric-eel small top-bar-right-download" href="/downloads/">Download</a>
    </li>
</ul>
                </div>
            </div>
            <div class="col-md-3 visible-sm visible-xs col-sm-3 col-xs-3 ps-rv">
                <div class="navbar-header text-right pull-right">
                    <button type="button" class="menu-control toggle-menu" id="open-menu">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="main">
    <div class="container">
        

        <div id="subheader1" class="clearfix">
            <div class="pull-left">
                
                <div id="breadcrumbs" class="breadcrumb">
                    <a href="/kb/en/">Knowledge Base</a>
                    


    
    » <a class="crumb" href="/kb/en/server-client-software/">Server &amp; Client Software</a>
    

    
    » <a class="crumb" href="/kb/en/client-libraries/">Client Libraries</a>
    

    
    » <a class="crumb" href="/kb/en/connectors/">Application Programming Interfaces</a>
    

    
    » <a class="crumb" href="/kb/en/mariadb-connector-j/">Java Connector</a>
    


    » <a class="node_link crumb" href="/kb/en/about-mariadb-connector-j/">About MariaDB Connector/J</a>


                </div>
                
            </div>
        </div>
    </div>
    <div class="container" id="container-main">
        <div class="row">
            
            
                
                <aside id="sidebar-first" class="sidebar col-md-2 hidden-xs hidden-sm hidden-print">
                    
                        
                        <ul id="category_menu" class="nav nav-pills nav-stacked">
                            <li><a href="/kb/en/">Home</a></li>
                            
                                
                                    <li><a href="/kb/en/+questions/">Open Questions</a></li>
                                
                                <li><a href="/kb/en/documentation/">MariaDB Server</a></li>
                                <li><a href="/kb/en/maxscale/">MariaDB MaxScale</a></li>
                                <li><a href="/kb/en/mariadb-columnstore/">MariaDB ColumnStore</a></li>
                                <li><a href="/kb/en/connectors/">Connectors</a></li>
                            

                        </ul>
                    

                    
<div>



<div class="well well-small box actions"><div>

        <a class="btn btn-block btn-blue btn-sm" href="/kb/en/about-mariadb-connector-j/+history" rel="nofollow">History</a>
        
        
        
        <a class="btn btn-block btn-blue btn-sm" href="/kb/en/about-mariadb-connector-j/+source/">Source</a>
        
        <a class="btn btn-block btn-blue btn-sm flag" href="/kb/en/about-mariadb-connector-j/+flag"
                data-flag-url="/kb/en/about-mariadb-connector-j/+flag" rel="nofollow">
                Flag as Spam / Inappropriate</a>
        
        <a class="btn btn-block btn-blue btn-sm" href="/kb/en/about-mariadb-connector-j/+translate/">
                Translate</a>
        

</div>
</div>





<div class="well well-small box node_info"><div>

    <dl>
        <dt>Created</dt>
        <dd>

<span class="datetime" title="2013-01-15 15:29">11 years ago</span></dd>

        <dt>Modified</dt>
        <dd>

<span class="datetime" title="2024-01-25 17:12">1 day, 23 hours ago</span></dd>

        <dt>Type</dt>
        <dd>article</dd>

        <dt>Status</dt>
        <dd>active</dd>

        <dt>License</dt>
        <dd>
            
                <a href="/kb/en/about-mariadb-connector-j/+license/">CC BY-SA / Gnu FDL</a>
            
        </dd>

        
    </dl>

    
    <ul class="rss_feeds">
        <li><a href="/kb/en/about-mariadb-connector-j/+history/feed/">
            History</a>
        </li>
        <li><a href="/kb/en/about-mariadb-connector-j/+comments/feed/">
            Comments</a>
        </li>
    </ul>
    

</div>
</div>





    
    
    

<div class="well well-small box attachments"><div><div class="edit_link pull-right"><a href="/kb/en/about-mariadb-connector-j/+edit/attachments/">Edit</a></div><h5>Attachments</h5></div><div>

        
            <div class="no_data">No attachments exist</div>
        
    
</div>
</div>

    



    
    
        

<div class="well well-small box"><div><h5>Localized Versions</h5></div><div>

        <ul>
            
            <li><a href="/kb/es/acerca-de-mariadb-connectorj/">Acerca De MariaDB Connector/J</a> [es]</li>
            
            <li><a href="/kb/ja/mariadb-connectorj/">MariaDB Connector/Jについて</a> [ja]</li>
            
        </ul>
        
</div>
</div>

    






</div>


                    

































                </aside>
            
            
            
                
            
            
                
            
            <section id="content" class="limited_width col-md-8 clearfix">
                
                    <h1>About MariaDB Connector/J</h1>
                

                



                <div>
                    
    

    
    
    

    <div class="node creole">
        
        
        


    
    <div class="answer formatted">
        <div class="cstm-style bluebox text-center centered"><p>The most recent <strong><em><a href="/kb/en/release-criteria/">Stable</a> (GA)</em></strong> release of <a href="/kb/en/about-mariadb-connector-j/">MariaDB Connector/J</a> is:<br>
<span class="cstm-style lead"><strong><a href="/kb/en/mariadb-connector-j-3-3-2-release-notes/">MariaDB Connector/J 3.3.2</a></strong></span></p>
</div>
<div class="cstm-style centered"><p><a class="btn btn-success btn-large" href="https://mariadb.com/downloads/connector">Download<span>&nbsp;</span>MariaDB<span>&nbsp;</span>Connector/J</a></p>
</div><p>MariaDB Connector/J is used to connect applications developed in Java to
MariaDB and MySQL databases using the standard JDBC API. The library is LGPL
licensed.
</p>
<div class="cstm-style centered"><div class="cstm-style underheader graybox"><table><tr><th><span>&nbsp;</span>Date<span>&nbsp;</span></th><th><span>&nbsp;</span>Release<span>&nbsp;</span></th><th><span>&nbsp;</span>Status<span>&nbsp;</span></th><th><span>&nbsp;</span>Min. Java Compat.<span>&nbsp;</span></th><th><span>&nbsp;</span>Release Notes<span>&nbsp;</span></th><th><span>&nbsp;</span>Changelog<span>&nbsp;</span></th></tr>
<tr><td>19 Dec 2023</td><td>3.3.2</td><td>Stable (GA)</td><td>Java 8</td><td><a href="/kb/en/mariadb-connector-j-3-3-2-release-notes/">Release Notes</a></td><td><a href="/kb/en/mariadb-connector-j-3-3-2-changelog/">Changelog</a></td></tr>
<tr><td>29 Nov 2023</td><td>3.3.1</td><td>Stable (GA)</td><td>Java 8</td><td><a href="/kb/en/mariadb-connector-j-3-3-1-release-notes/">Release Notes</a></td><td><a href="/kb/en/mariadb-connector-j-3-3-1-changelog/">Changelog</a></td></tr>
<tr><td></td><td></td><td></td><td></td><td></td><td></td></tr>
<tr><td>25 Aug 2023</td><td>3.2.0</td><td>Stable (GA)</td><td>Java 8</td><td><a href="/kb/en/mariadb-connector-j-3-2-0-release-notes/">Release Notes</a></td><td><a href="/kb/en/mariadb-connector-j-3-2-0-changelog/">Changelog</a></td></tr>
<tr><td></td><td></td><td></td><td></td><td></td><td></td></tr>
<tr><td>08 Nov 2023</td><td>2.7.11</td><td>Stable (GA)</td><td>Java 8</td><td><a href="/kb/en/mariadb-connector-j-2-7-11-release-notes/">Release Notes</a></td><td><a href="/kb/en/mariadb-connector-j-2-7-11-changelog/">Changelog</a></td></tr>
</table>
</div><p><a href="/kb/en/mariadb-connector-j-releases/">see all releases</a></p>
</div><div class="table_of_contents well well-small">
<h3>Contents</h3>
 <ol class="toc">

    <li class=""><a href="#about-mariadb-connectorj" title="About MariaDB Connector/J">About MariaDB Connector/J</a>    <ol class="toc">

        <li class=""><a href="#server-compatibility" title="Server Compatibility">Server Compatibility</a></li>

        <li class=""><a href="#java-compatibility" title="Java Compatibility">Java Compatibility</a>    </ol>
</li>

    <li class=""><a href="#installing-mariadb-connectorj" title="Installing MariaDB Connector/J">Installing MariaDB Connector/J</a>    <ol class="toc">

        <li class=""><a href="#installing-dependencies" title="Installing Dependencies">Installing Dependencies</a>    </ol>
</li>

    <li class=""><a href="#using-the-driver" title="Using the Driver">Using the Driver</a>    <ol class="toc">

        <li class=""><a href="#getting-a-new-connection" title="Getting a New Connection">Getting a New Connection</a>        <ol class="toc">

            <li class=""><a href="#using-drivermanager" title="Using DriverManager">Using DriverManager</a></li>

            <li class=""><a href="#jdbcmysql-scheme-compatibility" title="jdbc:mysql scheme compatibility">jdbc:mysql scheme compatibility</a></li>

            <li class=""><a href="#using-a-pool" title="Using a Pool">Using a Pool</a>            <ol class="toc">

                <li class=""><a href="#internal-pool" title="Internal Pool">Internal Pool</a></li>

                <li class=""><a href="#external-pool" title="External pool">External pool</a>            </ol>
        </ol>
</li>

        <li class=""><a href="#connection-strings" title="Connection Strings">Connection Strings</a></li>

        <li class=""><a href="#failover-and-load-balancing-modes" title="Failover and Load-Balancing Modes">Failover and Load-Balancing Modes</a></li>

        <li class=""><a href="#optional-url-parameters" title="Optional URL Parameters">Optional URL Parameters</a>        <ol class="toc">

            <li class=""><a href="#essential-parameters" title="Essential Parameters">Essential Parameters</a></li>

            <li class=""><a href="#tls-parameters" title="TLS Parameters">TLS Parameters</a></li>

            <li class=""><a href="#pool-parameters" title="Pool Parameters">Pool Parameters</a></li>

            <li class=""><a href="#infrequently-used-parameters" title="Infrequently Used Parameters">Infrequently Used Parameters</a></li>

            <li class=""><a href="#removed-option" title="removed option">removed option</a>        </ol>
    </ol>
</li>

    <li class=""><a href="#jdbc-api-implementation-notes" title="JDBC API Implementation Notes">JDBC API Implementation Notes</a>    <ol class="toc">

        <li class=""><a href="#size-consideration" title="Size consideration">Size consideration</a></li>

        <li class=""><a href="#timezone-consideration" title="Timezone consideration">Timezone consideration</a></li>

        <li class=""><a href="#load-data-infile" title="&quot;LOAD DATA INFILE&quot;">&quot;LOAD DATA INFILE&quot;</a></li>

        <li class=""><a href="#set-a-query-timeout" title="Set a Query Timeout">Set a Query Timeout</a></li>

        <li class=""><a href="#streaming-result-sets" title="Streaming Result Sets">Streaming Result Sets</a></li>

        <li class=""><a href="#prepared-statements" title="Prepared Statements">Prepared Statements</a></li>

        <li class=""><a href="#callablestatement" title="CallableStatement">CallableStatement</a></li>

        <li class=""><a href="#generated-keys-limitation" title="Generated keys limitation">Generated keys limitation</a></li>

        <li class=""><a href="#optional-jdbc-classes" title="Optional JDBC Classes">Optional JDBC Classes</a>    </ol>
</li>

    <li class=""><a href="#usage-examples" title="Usage Examples">Usage Examples</a>    <ol class="toc">

        <li class=""><a href="#creating-a-table-on-a-mariadb-or-mysql-server" title="Creating a Table on a MariaDB or MySQL Server">Creating a Table on a MariaDB or MySQL Server</a>    </ol>
</li>

    <li class=""><a href="#services" title="Services">Services</a>    <ol class="toc">

        <li class=""><a href="#credential-service" title="Credential service">Credential service</a>        <ol class="toc">

            <li class=""><a href="#aws-iam" title="AWS IAM">AWS IAM</a></li>

            <li class=""><a href="#environment" title="Environment">Environment</a></li>

            <li class=""><a href="#property" title="Property">Property</a>        </ol>
</li>

        <li class=""><a href="#authentication-service" title="Authentication service">Authentication service</a></li>

        <li class=""><a href="#ssl-factory-service" title="SSL factory service">SSL factory service</a>        <ol class="toc">

            <li class=""><a href="#easy-to-use-logging" title="Easy to use logging">Easy to use logging</a>        </ol>
    </ol>
</li>

    <li class=""><a href="#continuous-integration-and-automated-tests" title="Continuous Integration and Automated Tests">Continuous Integration and Automated Tests</a></li>

    <li class=""><a href="#reporting-bugs" title="Reporting Bugs">Reporting Bugs</a></li>

    <li class=""><a href="#source-code" title="Source Code">Source Code</a></li>

    <li class=""><a href="#license" title="License">License</a></li>

    <li class=""><a href="#faq" title="F.A.Q.">F.A.Q.</a>    <ol class="toc">

        <li class=""><a href="#error-could-not-read-resultset-unexpected-end-of-stream-read-0-bytes-from-4" title="Error &quot;Could not read resultset: unexpected end of stream, read 0 bytes from 4&quot;">Error &quot;Could not read resultset: unexpected end of stream, read 0 bytes from 4&quot;</a></li>

        <li class=""><a href="#how-to-do-a-lightweight-ping-avoid-mass-select-1" title="How to Do a Lightweight Ping / Avoid Mass &quot;select 1&quot;">How to Do a Lightweight Ping / Avoid Mass &quot;select 1&quot;</a>    </ol>
 </ol>
</li>
</div>
<h2 class="anchored_heading" id="about-mariadb-connectorj">About MariaDB Connector/J</h2>
<p>MariaDB Connector/J is a Type 4 JDBC driver. It was developed specifically as
a lightweight JDBC connector for use with MariaDB and MySQL database servers.
It was originally based on the Drizzle JDBC code with numerous additions and
bug fixes.</p>
<h3 class="anchored_heading" id="server-compatibility">Server Compatibility</h3>
<p>MariaDB Connector/J is compatible with all MariaDB and MySQL server versions 5.5.3 and later.</p>
<div class="cstm-style bluebox"><p>MariaDB Connector/J releases older than 1.2.0 may be compatible with server versions older than <a href="/kb/en/what-is-mariadb-55/">MariaDB 5.5</a> and MySQL 5.5, but those MariaDB Connector/J releases aren't supported anymore.</p>
</div><h3 class="anchored_heading" id="java-compatibility">Java Compatibility</h3>
<p>To determine which MariaDB Connector/J release series would be best to use for each Java version, please see the following table:</p>
<div class="cstm-style darkheader-nospace-borders centered"><table><tr><th>Java Version(s)</th><th>Recommended MariaDB Connector/J Release Series</th><th>JDBC Version</th></tr>
<tr><td>Java 21, Java 17, Java 11, Java 8</td><td>MariaDB Connector/J 3.3</td><td>JDBC 4.2</td></tr>
<tr><td>Java 17, Java 11, Java 8</td><td>MariaDB Connector/J 3.0</td><td>JDBC 4.2</td></tr>
<tr><td>Java 11, Java 8</td><td>MariaDB Connector/J 2.7</td><td>JDBC 4.2</td></tr>
</table>
</div><h2 class="anchored_heading" id="installing-mariadb-connectorj">Installing MariaDB Connector/J</h2>
<p>MariaDB Connector/J can be installed using <a href="https://maven.apache.org/what-is-maven.html">Maven</a>, <a href="https://gradle.org/">Gradle</a>, or by manually putting the <code>.jar</code> file in your <code><a href="https://docs.oracle.com/javase/tutorial/essential/environment/paths.html">CLASSPATH</a></code>. See <a href="/kb/en/installing-mariadb-connectorj/">Installing MariaDB Connector/J</a> for more information.</p>
<p>MariaDB Connector/J <code>.jar</code> files and source code tarballs can be downloaded from the following URL:</p>
<ul start="1"><li><a href="https://downloads.mariadb.org/connector-java/">https://downloads.mariadb.org/connector-java/</a>
</li></ul>
<p>MariaDB Connector/J <code>.jar</code> files can also be downloaded from the following URL:</p>
<ul start="1"><li><a href="https://mariadb.com/downloads/#connectors">https://mariadb.com/downloads/#connectors</a>
</li></ul>
<h3 class="anchored_heading" id="installing-dependencies">Installing Dependencies</h3>
<p>JNA (net.java.dev.jna:jna) and JNA-PLATFORM (net.java.dev.jna:jna-platform) 4.2.1 or greater are also needed when you would like to connect to the server with Unix sockets or windows pipes.</p>
<h2 class="anchored_heading" id="using-the-driver">Using the Driver</h2>
<p>The following subsections show the formatting of JDBC connection strings for
MariaDB and MySQL database servers. Additionally, sample code is provided that
demonstrates how to connect to one of these servers and create a table.</p>
<h3 class="anchored_heading" id="getting-a-new-connection">Getting a New Connection</h3>
<p>There are two standard ways to get a connection:</p>
<h4 class="anchored_heading" id="using-drivermanager">Using DriverManager</h4>
<p>The preferred way to get a connection with MariaDB Connector/J is to use the <code><a href="https://docs.oracle.com/javase/8/docs/api/java/sql/DriverManager.html">DriverManager</a></code> class.
When the <code>DriverManager</code> class is used to locate and load MariaDB Connector/J, the application needs no further configuration. The <code>DriverManager</code> class will automatically load MariaDB Connector/J and allow it to be used in the same way as any other JDBC driver.</p>
<p>For example:</p>
<pre class="fixed">Connection connection = DriverManager.getConnection(&#34;jdbc:mariadb://localhost:3306/DB?user=root&amp;password=myPassword&#34;);
</pre><div class="cstm-style bluebox"><p>The legacy way of loading a JDBC driver also still works for MariaDB Connector/J. e.g.: <code>Class.forName("org.mariadb.jdbc.Driver")</code></p>
</div><h4 class="anchored_heading" id="jdbcmysql-scheme-compatibility">jdbc:mysql scheme compatibility</h4>
<p>MariaDB Connector/J 3.0 only accepts <code>jdbc:mariadb:</code> as the protocol in connection strings by default. When both MariaDB Connector/J and the MySQL drivers are found in the class-path, using <code>jdbc:mariadb:</code> as the protocol helps to ensure that Java chooses MariaDB Connector/J.</p>
<p>Connector/J still allows <code>jdbc:mysql:</code> as the protocol in connection strings when the <code>permitMysqlScheme</code> option is set. For example:</p>
<p><code class="fixed" style="white-space:pre-wrap">jdbc:mysql://HOST/DATABASE?permitMysqlScheme</code></p>
<p>(2.x version did permit connection URLs beginning with both <code>jdbc:mariadb</code> and <code>jdbc:mysql</code>)</p>
<h4 class="anchored_heading" id="using-a-pool">Using a Pool</h4>
<p>Another way to get a connection with MariaDB Connector/J is to use a connection pool.</p>
<p>MariaDB Connector/J provides 2 different Datasource pool implementations: </p>
<ul start="1"><li><code>MariaDbDataSource</code>: The basic implementation. It creates a new connection each time the <code>getConnection()</code> method is called.
</li><li><code>MariaDbPoolDataSource</code>: A connection pool implementation. It maintains a pool of connections, and when a new connection is requested, one is borrowed from the pool.
</li></ul>
<h5 class="anchored_heading" id="internal-pool">Internal Pool</h5>
<p>The driver's internal pool configuration provides a very fast pool implementation and deals with the issues most of the java pool have: </p>
<ul start="1"><li>2 different connection states cleaning after release
</li><li>deals with non-activity (connections in the pool will be released if not used after some time, avoiding the issue created when the server closes the connection after @wait_timeout is reached).
</li></ul>
<p>See the <a href="/kb/en/pool-datasource-implementation/">pool documentation</a> for more information. </p>
<h5 class="anchored_heading" id="external-pool">External pool</h5>
<p>When using an external connection pool, the MariaDB Driver class <code>org.mariadb.jdbc.Driver</code> must be configured.</p>
<p>Example using hikariCP JDBC connection pool :</p>
<pre class="fixed">        final HikariDataSource ds = new HikariDataSource();
        ds.setMaximumPoolSize(20);
        ds.setDriverClassName(&#34;org.mariadb.jdbc.Driver&#34;);
        ds.setJdbcUrl(&#34;jdbc:mariadb://localhost:3306/db&#34;);
        ds.addDataSourceProperty(&#34;user&#34;, &#34;root&#34;);
        ds.addDataSourceProperty(&#34;password&#34;, &#34;myPassword&#34;);
        ds.setAutoCommit(false);
</pre><p>Please note that the driver class provided by MariaDB Connector/J <strong>is not <code>com.mysql.jdbc.Driver</code> but <code>org.mariadb.jdbc.Driver</code></strong>!</p>
<p>The <code>org.mariadb.jdbc.MariaDbDataSource</code> class can be used when the pool datasource configuration only permits the java.sql.Datasource implementation. </p>
<h3 class="anchored_heading" id="connection-strings">Connection Strings</h3>
<p>The format of the JDBC connection string is:</p>
<pre class="fixed">jdbc:mariadb:[replication:|loadbalance:|sequential:]//&lt;hostDescription&gt;[,&lt;hostDescription&gt;...]/[database][?&lt;key1&gt;=&lt;value1&gt;[&amp;&lt;key2&gt;=&lt;value2&gt;]] 
</pre><p> HostDescription:</p>
<pre class="fixed">&lt;host&gt;[:&lt;portnumber&gt;]  or address=(host=&lt;host&gt;)[(port=&lt;portnumber&gt;)][(type=(master|slave))]
</pre><p>Some notes about this:</p>
<ul start="1"><li>The host must be a DNS name or IP address.
</li><li>If the host is an IPv6 address, then it must be inside square brackets.
</li><li>The default port is <code>3306</code>.
</li><li>The default type is <code>master</code>.
</li><li>If the failover and load-balancing mode is set to <code>replication</code>, then the connector assumes that the first host is master, and the others are slaves by default, if their types are not explicitly mentioned.
</li><li><em>aurora</em> failover prefix is available on 2.x version. 
</li></ul>
<p>Examples: </p>
<ul start="1"><li><code>localhost:3306</code>
</li><li><code>[2001:0660:7401:0200:0000:0000:0edf:bdd7]:3306</code>
</li><li><code>somehost.com:3306</code>
</li><li><code>address=(host=localhost)(port=3306)(type=master)</code>
</li></ul>
<h3 class="anchored_heading" id="failover-and-load-balancing-modes">Failover and Load-Balancing Modes</h3>
<p>Failover and Load-Balancing Modes were introduced in <a href="/kb/en/mariadb-connector-j-120-release-notes/">MariaDB Connector/J 1.2.0.</a></p>
<div class="cstm-style darkheader-nospace-borders centered"><table><tr><th>Mode</th><th>Description</th></tr>
<tr><td><code>sequential</code></td><td>This mode supports connection failover in a multi-master environment, such as MariaDB Galera Cluster. This mode does <strong>not</strong> support load-balancing reads on slaves. The connector will try to connect to hosts in the order in which they were declared in the connection URL, so the first available host is used for all queries.<br>For example, let's say that the connection URL is the following: <code>jdbc:mariadb:sequential:host1,host2,host3/testdb</code><br>When the connector tries to connect, it will always try host1 first. If that host is not available, then it will try host2. etc. When a host fails, the connector will try to reconnect to hosts in the same order.<br>This mode has been available since <a href="/kb/en/mariadb-connector-j-130-release-notes/">MariaDB Connector/J 1.3.0</a></td></tr>
<tr><td><code>loadbalance</code></td><td>This mode supports connection load-balancing in a multi-master environment, such as MariaDB Galera Cluster. This mode does <strong>not</strong> support load-balancing reads on slaves. The connector performs load-balancing for all queries by randomly picking a host from the connection URL for each connection, so queries will be load-balanced as a result of the connections getting randomly distributed across all hosts. <br>Before 2.4.2, this option was named `failover` - alias still exist for compatibility - .<br>This mode has been available since <a href="/kb/en/mariadb-connector-j-120-release-notes/">MariaDB Connector/J 1.2.0</a></td></tr>
<tr><td><code>replication</code></td><td>This mode supports connection failover in a master-slave environment, such as a MariaDB Replication cluster. The mode supports environments with one or more masters. This mode does support load-balancing reads on slaves if the connection is set to read-only before executing the read. The connector performs load-balancing by randomly picking a slave from the connection URL to execute read queries for a connection.<br>This mode has been available since <a href="/kb/en/mariadb-connector-j-120-release-notes/">MariaDB Connector/J 1.2.0</a></td></tr>
<tr><td><em>aurora</em></td><td>This mode supports connection failover in an Amazon Aurora cluster. This mode does support load-balancing reads on slave instances if the connection is set to read-only before executing the read. The connector performs load-balancing by randomly picking a slave instance to execute read queries for a connection.<br>This mode has been available since <a href="/kb/en/mariadb-connector-j-120-release-notes/">MariaDB Connector/J 1.2.0</a> and <strong>not supported anymore since 3.0 version</strong></td></tr>
</table>
</div><div class="cstm-style redbox"><p>driver 3.0 is a complete rewrite of the connector. Specific support for aurora has not been implemented in 3.0, since it relies on pipelining. Aurora is not compatible with pipelining.
Issues for Aurora were piling up without the community proposing any PR for them and without access for us to test those modifications. (2.x version has a 5 years support). </p>
</div><p>See <a href="/kb/en/failover-and-high-availability-with-mariadb-connector-j/">failover description</a> for more information.
<br><br></p>
<h3 class="anchored_heading" id="optional-url-parameters">Optional URL Parameters</h3>
<p>General remark: Unknown options are accepted and silently ignored.</p>
<p>The following options are currently supported.</p>
<h4 class="anchored_heading" id="essential-parameters">Essential Parameters</h4>
<div class="cstm-style darkheader-nospace-borders centered"><table><tr><th>Parameter</th><th>Description</th></tr>
<tr><td><code>user</code></td><td>Database user name. <br><em>since 1.0.0</em></td></tr>
<tr><td><code>password</code></td><td>Password of database user.<br><em>since 1.0.0</em></td></tr>
<tr><td><code>connectTimeout</code></td><td>The connect timeout value, in milliseconds, or zero for no timeout.<br><em>Default: 30 000. Since 1.1.8</em></td></tr>
<tr><td><code>useServerPrepStmts</code></td><td>PrepareStatement are prepared on the server side before executing. The applications that repeatedly use the same queries have value to activate this option, but the general case is to use the direct command (text protocol).<em>Default: false (was true before 1.6.0). Since 1.3.0</em></td></tr>
<tr><td><code>allowLocalInfile</code></td><td>Permit loading data from file. see <a href="#load-data-infile">LOAD DATA LOCAL INFILE</a>. Having this option enable can impact batch performance. Disabling it can permit some batch improvement<br><em>Default: true. Since 1.2.1</em></td></tr>
<tr><td><code>useMysqlMetadata</code></td><td><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.sql/java/sql/DatabaseMetaData.html#getDatabaseProductName()">databaseMetaData.getDatabaseProductName()</a> return "MariaDB" or "MySQL" according to server type (since 2.4.0). This option permit to force returning "MySQL" even if server is MariaDB to permit compatibility with frameworks that doesn't support MariaDB.<br><em>Default: false. Since 2.4.1</em></td></tr>
<tr><td><code>restrictedAuth</code></td><td>permits to restrict authentication plugins (comma separated). For example, the following connection string only allows the mysql_native_password and client_ed25519 client authentication plugins:`jdbc:mariadb:<em>HOST/DATABASE?restrictedAuth=mysql_native_password,client_ed25519`. If not set, permit all authentication plugins.<br></em>Default: null. Since 3.0.0 //</td></tr>
<tr><td><code>timezone</code></td><td>permits to force session timezone in case of client having a different timezone compare to server. The option `timezone` can have 3 types of value: * 'disabled' (default) : connector doesn't change time_zone. *  'auto': client will use client default timezone. * '&lt;a timezone&gt;': connector will set connection variable to value. see <a href="https://mariadb.com/kb/en/about-mariadb-connector-j/#timezone-consideration">timezone consideration</a> to know more<br><em>Default: 'disabled'. Since 3.0.0</em></td></tr>
</table>
</div><p><br></p>
<h4 class="anchored_heading" id="tls-parameters">TLS Parameters</h4>
<p>more information on <a href="https://mariadb.com/kb/en/mariadb/using-tlsssl-with-mariadb-java-connector/">Using TLS/SSL with MariaDB java connector</a></p>
<div class="cstm-style darkheader-nospace-borders centered"><table><tr><th>Parameter</th><th>Description</th></tr>
<tr><td><code>sslMode</code></td><td>Enables SSL/TLS in a specific mode.<br><br>The following values are supported: <br>* disable: Do not use SSL/TLS (default)<br>* trust: Only use SSL/TLS for encryption. Do not perform certificate or hostname verification. This mode is not safe for production applications.<br>* verify-ca: Use SSL/TLS for encryption and perform certificates verification, but do not perform hostname verification.<br>* verify-full: Use SSL/TLS for encryption, certificate verification, and hostname verification. <br><br>This option replaces the deprecated options: disableSslHostnameVerification, trustServerCertificate, useSsl<br><em>Default: disable. Since 3.0.0</em></td></tr>
<tr><td><code>useSsl</code></td><td>*deprecated since 3.0.0, use sslMode instead*<br> Force <a href="https://mariadb.com/kb/en/mariadb/secure-connections-overview/secure-connections-overview">SSL/TLS on  connection</a>(useSSL can be used as alias).<br><em>Default: false. Since 1.1.0</em></td></tr>
<tr><td><code>trustServerCertificate</code></td><td>*deprecated since 3.0.0, use sslMode instead*<br>When using SSL/TLS, do not check server's certificate.<br><em>Default: false. Since 1.1.1</em></td></tr>
<tr><td><code>serverSslCert</code></td><td>Permits providing server's certificate in DER form, or server's CA certificate. The server will be added to trustStor. This permits a self-signed certificate to be trusted.<br>Can be used in one of 3 forms : <br>* serverSslCert=/path/to/cert.pem (full path to certificate)<br>* serverSslCert=classpath:relative/cert.pem (relative to current classpath)<br>* or as verbatim DER-encoded certificate string "------BEGIN CERTIFICATE-----" .<br><em>since 1.1.3</em></td></tr>
<tr><td><code>keyStore</code></td><td>File path of the keyStore file that contain client private key store and associate certificates (similar to java System property "javax.net.ssl.keyStore", but ensure that only the private key's entries are used).(legacy alias clientCertificateKeyStoreUrl).<br><em>Since 1.3.4</em></td></tr>
<tr><td><code>keyStorePassword</code></td><td>Password for the client certificate keyStore  (similar to java System property "javax.net.ssl.keyStorePassword").(legacy alias clientCertificateKeyStorePassword)<br><em>Since 1.3.4</em></td></tr>
<tr><td><code>enabledSslCipherSuites</code></td><td>Force TLS/SSL cipher (comma separated list).<br> Example : "TLS_DHE_RSA_WITH_AES_256_GCM_SHA384, TLS_DHE_DSS_WITH_AES_256_GCM_SHA384"<br><em>Default: use JRE ciphers. Since 1.5.0</em></td></tr>
<tr><td><code>disableSslHostnameVerification</code></td><td>*deprecated since 3.0.0, use sslMode instead*<br>When using ssl, the driver checks the hostname against the server's identity as presented in the server's certificate (checking alternative names or the certificate CN) to prevent man-in-the-middle attacks. This option permits deactivating this validation. Hostname verification is disabled when the trustServerCertificate option is set<br><em>Default: false. Since 2.1.0</em></td></tr>
<tr><td><code>keyStoreType</code></td><td>Indicate key store type (JKS/PKCS12). default is null, then using java default type.<br><em>Since 2.4.0</em></td></tr>
<tr><td><code>enabledSslProtocolSuites</code></td><td>Force TLS/SSL protocol to a specific set of TLS versions (comma separated list). <br>Example : "TLSv1,TLSv1.1,TLSv1.2"<br>(Alias "enabledSSLProtocolSuites" works too)<br><em>Default: java default. Since 1.5.0</em></td></tr>
</table>
</div><p><br></p>
<h4 class="anchored_heading" id="pool-parameters">Pool Parameters</h4>
<p>See the <a href="/kb/en/pool-datasource-implementation/">pool documentation</a> for pool configuration.</p>
<div class="cstm-style darkheader-nospace-borders centered"><table><tr><th>Parameter</th><th>Description</th></tr>
<tr><td><code>pool</code></td><td>Use pool. This option is useful only if not using a DataSource object, but only a connection object. <br><em>Default: false. since 2.2.0</em></td></tr>
<tr><td><code>poolName</code></td><td>Pool name that permits identifying threads.<br>default: auto-generated as MariaDb-pool-&lt;pool-index&gt;<em>since 2.2.0</em></td></tr>
<tr><td><code>maxPoolSize</code></td><td>The maximum number of physical connections that the pool should contain. <br><em>Default: 8. since 2.2.0</em></td></tr>
<tr><td><code>minPoolSize</code></td><td>When connections are removed due to not being used for longer than than "maxIdleTime", connections are closed and removed from the pool. "minPoolSize" indicates the number of physical connections the pool should keep available at all times. Should be less or equal to maxPoolSize.<br><em>Default: maxPoolSize value. Since 2.2.0</em></td></tr>
<tr><td><code>poolValidMinDelay</code></td><td>When asking a connection to pool, the pool will validate the connection state. "poolValidMinDelay" permits disabling this validation if the connection has been borrowed recently avoiding useless verifications in case of frequent reuse of connections. 0 means validation is done each time the connection is asked.<br><em>Default: 1000 (in milliseconds). Since 2.2.0</em></td></tr>
<tr><td><code>maxIdleTime</code></td><td>The maximum amount of time in seconds that a connection can stay in the pool when not used. This value must always be below @wait_timeout value - 45s <br><em>Default: 600 in seconds (=10 minutes), minimum value is 60 seconds. Since 2.2.0</em></td></tr>
<tr><td><code>useResetConnection</code></td><td>When a connection is closed() (given back to pool), the pool resets the connection state. Setting this option, the prepare command will be deleted, session variables changed will be reset, and user variables will be destroyed when the server permits it (&gt;= <a href="/kb/en/mariadb-1024-release-notes/">MariaDB 10.2.4</a>, &gt;= MySQL 5.7.3), permitting saving memory on the server if the application make extensive use of variables. Must not be used with the useServerPrepStmts option<br><em>Default: false. Since 2.2.0</em></td></tr>
<tr><td><code>registerJmxPool</code></td><td>Register JMX monitoring pools.<br><em>Default: true. Since 2.2.0</em></td></tr>
</table>
</div><p><br></p>
<h4 class="anchored_heading" id="infrequently-used-parameters">Infrequently Used Parameters</h4>
<div class="cstm-style darkheader-nospace-borders centered"><table><tr><th>Parameter</th><th>Description</th></tr>
<tr><td><code>maxQuerySizeToLog</code></td><td>Only the first characters corresponding to this options size will be displayed in logs<br><em>Default: 1024. Since 1.5.0</em></td></tr>
<tr><td><code>allowMultiQueries</code></td><td>permit multi-queries like <code>insert into ab (i) values (1); insert into ab (i) values (2)</code>. <em>Default: false. Since 1.0.0</em></td></tr>
<tr><td><code>dumpQueriesOnException</code></td><td>If set to 'true', an exception is thrown during query execution containing a query string.<br><em>Default: false. Since 1.1.0</em></td></tr>
<tr><td><code>useCompression</code></td><td>Compresses the exchange with the database through gzip. This permits better performance when the database is not in the same location.<br><em>Default: false. Since 1.0.0</em></td></tr>
<tr><td><code>socketFactory</code></td><td>to use a custom socket factory, set it to the  full name of the class that implements javax.net.SocketFactory.<br><em>since 1.0.0</em></td></tr>
<tr><td><code>tcpKeepAlive</code></td><td>Sets corresponding option on the connection socket. Default to true since 3.0.0 (was false before)<br><em>since 1.0.0</em></td></tr>
<tr><td><code>tcpAbortiveClose</code></td><td>This option can be used in environments where connections are created and closed in rapid succession. Often, it is not possible to create a socket in such an environment after a while, since all local “ephemeral” ports are used up by TCP connections in TCP_WAIT state. Using tcpAbortiveClose works around this problem by resetting TCP connections (abortive or hard close) rather than doing an orderly close. It is accomplished by using socket.setSoLinger(true,0) for abortive close.<br><em>since 1.1.1</em></td></tr>
<tr><td><code>pipe</code></td><td>On Windows, specify named pipe name to connect to mysqld.exe.<br><em>since 1.1.3</em></td></tr>
<tr><td><code>tinyInt1isBit</code></td><td>Datatype mapping flag, handle MySQL Tiny as BIT(boolean).<br><em>Default: true. Since 1.0.0</em></td></tr>
<tr><td><code>yearIsDateType</code></td><td>Year is date type, rather than numerical.<br><em>Default: true. Since 1.0.0</em></td></tr>
<tr><td><code>sessionVariables</code></td><td>&lt;var&gt;=&lt;value&gt; pairs separated by comma, mysql session variables, set upon establishing successful connection.<br><em>since 1.1.0</em></td></tr>
<tr><td><code>localSocket</code></td><td>Permits connecting to the database via Unix domain socket, if the server allows it. <br>The value is the path of Unix domain socket (i.e "socket" database parameter : select @@socket) .<br><em>since 1.1.4</em></td></tr>
<tr><td><code>localSocketAddress</code></td><td>Hostname or IP address to bind the connection socket to a local (UNIX domain) socket.<br><em>since 1.1.7</em></td></tr>
<tr><td><code>socketTimeout</code></td><td>Defined the network socket timeout (SO_TIMEOUT) in milliseconds. Value of 0 disables this timeout. <br>If the goal is to set a timeout for all queries, since <a href="/kb/en/mariadb-1011-release-notes/">MariaDB 10.1.1</a>, the server has permitted a solution to limit the query time by setting a system variable, <a href="/kb/en/server-system-variables/#max_statement_time">max_statement_time</a>. The advantage is that the connection then is still usable.<br>Default: 0 (standard configuration) or 10000ms (using "<em>aurora</em>" failover configuration).<br><em>since 1.1.7</em></td></tr>
<tr><td><code>interactiveClient</code></td><td>Session timeout is defined by the <a href="https://mariadb.com/kb/en/server-system-variables/#wait_timeout">wait_timeout</a> server variable. Setting interactiveClient to true will tell the server to use the <a href="https://mariadb.com/kb/en/mariadb/server-system-variables/#interactive_timeout">interactive_timeout</a> server variable.<br><em>Default: false. Since 1.1.7</em></td></tr>
<tr><td><code>createDatabaseIfNotExist</code></td><td>the specified database in the url will be created if nonexistent.<br><em>Default: false. Since 1.1.7</em></td></tr>
<tr><td><code>cacheCallableStmts</code></td><td>enable/disable callable Statement cache<br><em>Default: true. Since 1.4.0</em></td></tr>
<tr><td><code>connectionAttributes</code></td><td>When performance_schema is active, permit to send server some client information in a key;value pair format (example: connectionAttributes=key1:value1,key2,value2).<br>Those informations can be retrieved on server within tables performance_schema.session_connect_attrs and performance_schema.session_account_connect_attrs.<br>This can permit from server an identification of client/application<br><em>Since 1.4.0</em></td></tr>
<tr><td><code>usePipelineAuth</code></td><td>*Not compatible with <em>aurora</em>*<br>During connection, different queries are executed. When option is active those queries are send using pipeline (all queries are send, then only all results are reads), permitting faster connection creation.<br><em>Default: true. Since 1.6.0</em></td></tr>
<tr><td><code>autocommit</code></td><td>Set default autocommit value on connection initialization <br><em>Default: true. Since 2.2.0</em></td></tr>
<tr><td><code>galeraAllowedState</code></td><td>Usually, Connection.isValid just send an empty packet to server, and server send a small response to ensure connectivity. When this option is set, connector will ensure Galera server state "wsrep_local_state" correspond to allowed values (separated by comma). example "4,5", recommended is "4". see <a href="https://galeracluster.com/library/documentation/node-states.html#node-state-changes">galera state to know more</a>.<br><em>Default: empty. Since 2.2.5</em></td></tr>
<tr><td><code>includeInnodbStatusInDeadlockExceptions</code></td><td>add "SHOW ENGINE INNODB STATUS" result to exception trace when having a deadlock exception.<br><em>Default: false. Since 2.3.0</em></td></tr>
<tr><td><code>includeThreadDumpInDeadlockExceptions</code></td><td>add thread dump to exception trace when having a deadlock exception.<br><em>Default: false. Since 2.3.0</em></td></tr>
<tr><td><code>useReadAheadInput</code></td><td>Use a buffered inputSteam that read socket available data<br><em>Default: true. Since 2.4.0</em></td></tr>
<tr><td><code>servicePrincipalName</code></td><td>When using <a href="/kb/en/gssapi-authentication-with-mariadb-connector-j/">GSSAPI authentication</a>, use this value as the Service Principal Name (SPN) instead of the one defined for the user account on the database server.<br><em>Since 2.4.0</em></td></tr>
<tr><td><code>useMysqlMetadata</code></td><td>force DatabaseMetadata.getDatabaseProductName() to return "MySQL" as database, not real database type.<br><em>Default: false. Since 2.4.1</em></td></tr>
<tr><td><code>defaultFetchSize</code></td><td>The driver will call setFetchSize(n) with this value on all newly-created Statements.<br><em>Default: 0. Since 2.4.2</em></td></tr>
<tr><td><code>blankTableNameMeta</code></td><td>Resultset metadata getTableName always return blank. This option is mainly for ORACLE db compatibility.<br><em>Default: false. Since 2.4.3</em></td></tr>
<tr><td><code>serverRsaPublicKeyFile</code></td><td>Indicate path to RSA server public key file for sha256_password and caching_sha2_password authentication password<br><em>Since 2.5.0</em></td></tr>
<tr><td><code>allowPublicKeyRetrieval</code></td><td>Authorize client to retrieve RSA server public key when serverRsaPublicKeyFile is not set (for sha256_password and caching_sha2_password authentication password)<br><em>Default: false. Since 2.5.0</em></td></tr>
<tr><td><code>tlsSocketType</code></td><td>Indicate the TLS org.mariadb.jdbc.tls.TlsSocketPlugin plugin type to use. Plugin must be present in classpath<br><em>Since 2.5.0</em></td></tr>
<tr><td><code>credentialType</code></td><td>Indicate the credential plugin type to use. Plugin must be present in classpath<br><em>Since 2.5.0</em></td></tr>
<tr><td><code>tcpKeepCount</code></td><td>Permit to set socket option TCP_KEEPCOUNT (only if java 11+)<br><em>Default: True. Since 3.0.0</em></td></tr>
<tr><td><code>tcpKeepIdle</code></td><td>Permit to set socket option TCP_KEEPIDLE (only if java 11+)<br><em>Default: True. Since 3.0.0</em></td></tr>
<tr><td><code>tcpKeepInterval</code></td><td>Permit to set socket option TCP_KEEPINTERVAL (only if java 11+)<br><em>Default: True. Since 3.0.0</em></td></tr>
<tr><td><code>permitMysqlScheme</code></td><td>when added to connection string, permit <code>jdbc:mysql:</code> prefix in connection string<br><em>Since 3.0.0</em></td></tr>
<tr><td><code>transactionReplay</code></td><td>Enables transaction caching. If a failover occurs before a transaction is committed or rolled back, the transaction's cached statements are re-executed on the new primary server. Connector/J requires that applications only use idempotent queries. If the number of statements in the transaction cache exceeds transactionReplaySize, caching will be disabled until the transaction is committed or rolled back.<br><em>Default: false. Since 3.0.0</em></td></tr>
<tr><td><code>transactionReplaySize</code></td><td>Sets the number of statements that should be saved in the transaction cache when transactionReplay is enabled..<br><em>Default: 64. Since 3.0.0</em></td></tr>
<tr><td><code>useBulkStmts</code></td><td>Use dedicated COM_STMT_BULK_EXECUTE protocol for batch insert when possible. (batch without Statement.RETURN_GENERATED_KEYS and streams) to have faster batch. (significant only on &gt;= <a href="/kb/en/mariadb-1027-release-notes/">MariaDB 10.2.7</a>) <br><em>Default: true since 3.0.0 (was false since version &gt;= 2.3.0)</em></td></tr>
<tr><td><code>returnMultiValuesGeneratedIds</code></td><td>for connector 2.x compatibility only, getGeneratedKeys() will then returns all ids of multi-value inserts <br><em>Default: false since 3.3.2</em></td></tr>
</table>
</div><p><br></p>
<h4 class="anchored_heading" id="removed-option">removed option</h4>
<div class="cstm-style darkheader-nospace-borders centered"><table><tr><th>Parameter</th><th>Description</th></tr>
<tr><td><code>allowMasterDownConnection</code></td><td>When the <code>replication</code> Failover and Load Balancing Mode is in use, allow the creation of connections when the master is down. If no masters are available, then the default connection will be a slave, and Connection.isReadOnly() will return true. <br><em>Default: false. Since 2.2.0, removed in 3.0.0</em></td></tr>
<tr><td><code>assureReadOnly</code></td><td>When this parameter enabled when a Failover and Load Balancing Mode is in use, and a read-only connection is made to a host, assure that this connection is in read-only mode by setting the session to read-only.<br>Default to false.<br>Since 1.3.0, removed in 3.0.0</td></tr>
<tr><td><code>autoReconnect</code></td><td>If this parameter is enabled and Failover and Load Balancing Mode is <strong>not</strong> in use, the connector will simply try to reconnect to its host after a failure. This is referred to as <strong>Basic Failover</strong>. <br>If this parameter is enabled and Failover and Load Balancing Mode is in use, the connector will blacklist the failed host and try to connect to a different host of the same type. This is referred to as <strong>Standard Failover</strong>. <br>Default is false.<br>since 1.1.7, removed in 3.0.0</td></tr>
<tr><td><code>cachePrepStmts</code></td><td>if useServerPrepStmts = true, cache the prepared informations in a LRU cache to avoid re-preparation of command. Next use of that command, only prepared identifier and parameters (if any) will be sent to server. This mainly permit for server to avoid reparsing query. <br><em>Default: true. Since 1.3.0, removed in 3.0.0</em></td></tr>
<tr><td><code>prepStmtCacheSize</code></td><td>if useServerPrepStmts = true, defines the prepared statement cache size that option `cachePrepStmts` use. <br><em>Default: 250. Since 1.3.0, removed in 3.0.0</em></td></tr>
<tr><td><code>callableStmtCacheSize</code></td><td>This sets the number of callable statements that the driver will cache per VM if "cacheCallableStmts" is enabled.<br><em>Default: true. Since 1.4.0, removed in 3.0.0</em></td></tr>
<tr><td><code>enablePacketDebug</code></td><td>Driver will save the last 16 MySQL packet exchanges (limited to first 1000 bytes). Hexadecimal value of those packets will be added to stacktrace when an IOException occur.<br>This option has no impact on performance but driver will then take 16kb more memory.<br><em>Default: false. Since 1.6.0, 2.0.1, removed in 3.0.0</em></td></tr>
<tr><td><code>failoverLoopRetries</code></td><td>When the connector is searching silently for a valid host, this parameter defines the maximum number of connection attempts the connector will make before throwing an exception.<br>This parameter differs from the "retriesAllDown" parameter because this silent search is used in situations where the connector can temporarily workaround the problem, such as by using the master connection to execute reads when the slave connection fails.<br>Default: 120.<br>since 1.2.0, removed in 3.0.0</td></tr>
<tr><td><code>jdbcCompliantTruncation</code></td><td>Truncation error ("Data truncated for column '%' at row %", "Out of range value for column '%' at row %") will be thrown as an error, and not as a warning.<br><em>Default: true. Since 1.4.0</em></td></tr>
<tr><td><code>keyPassword</code></td><td>Password for the private key in client certificate keyStore. (only needed if private key password differ from keyStore password).<br><em>Since 1.5.3, removed in 3.0.0</em></td></tr>
<tr><td><code>loadBalanceBlacklistTimeout</code></td><td>When a connection fails, this host will be blacklisted for the amount of time defined by this parameter.<br>When connecting to a host, the driver will try to connect to a host in the list of non-blacklisted hosts and, only if none are found, attempt blacklisted ones.<br>This blacklist is shared inside the classloader.<br>Default: 50 seconds.<br>since 1.2.0, removed in 3.0.0</td></tr>
<tr><td><code>log</code></td><td>Enable log information. <br><em>require Slf4j version &gt; 1.4 dependency.</em><br>Log level correspond to Slf4j logging implementation<br><em>Default: false. Since 1.5.0, removed in 3.0.0</em></td></tr>
<tr><td><code>passwordCharacterEncoding</code></td><td>Indicate password encoding charset. Charset value must be a <a href="http://docs.oracle.com/javase/8/docs/api/java/nio/charset/Charset.html">Java charset</a>. <br>Example : "UTF-8" <br><em>Default: null (= platform's default charset) . Since 1.5.9, removed in 3.0.0</em></td></tr>
<tr><td><code>prepStmtCacheSqlLimit</code></td><td>if useServerPrepStmts = true, defined queries larger than this size will not be cached. <br><em>Default: 2048. Since 1.3.0</em></td></tr>
<tr><td><code>profileSql</code></td><td>log query execution time.<br><em>Default: false. Since 1.5.0, removed in 3.0.0</em></td></tr>
<tr><td><code>slowQueryThresholdNanos</code></td><td>Will log query with execution time superior to this value (if defined )<br><em>Default: 1024. Since 1.5.0, removed in 3.0.0</em></td></tr>
<tr><td><code>retriesAllDown</code></td><td>When the connector is performing a failover and all hosts are down, this parameter defines the maximum number of connection attempts the connector will make before throwing an exception.<br>Default: 120 seconds.<br>since 1.2.0, removed in 3.0.0</td></tr>
<tr><td><code>rewriteBatchedStatements</code></td><td>For insert queries, rewrite batchedStatement to execute in a single executeQuery.<br>example:<br><code>insert into ab (i) values (?)</code> with first batch values = 1, second = 2 will be rewritten<br><code>insert into ab (i) values (1), (2)</code>. <br><br>If query cannot be rewriten in "multi-values", rewrite will use multi-queries : <code>INSERT INTO TABLE(col1) VALUES (?) ON DUPLICATE KEY UPDATE col2=?</code> with values [1,2] and [2,3]" will be rewritten<br><code>INSERT INTO TABLE(col1) VALUES (1) ON DUPLICATE KEY UPDATE col2=2;</code><code>INSERT INTO TABLE(col1) VALUES (3) ON DUPLICATE KEY UPDATE col2=4</code><br><br>when active, the useServerPrepStmts option is set to false<br><em>Default: false. Since 1.1.8, removed in 3.0.0</em></td></tr>
<tr><td><code>serverTimezone</code></td><td>Defines the server time zone.<br>to use only if the jre server has a different time implementation of the server.<br>(best to have the same server time zone when possible).<br><em>since 1.1.7, removed in 3.0.0</em></td></tr>
<tr><td><code>sharedMemory</code></td><td>Permits connecting to the database via shared memory, if the server allows it. <br>The value is the base name of the shared memory.<br><em>since 1.1.4, removed in 3.0.0</em></td></tr>
<tr><td><code>staticGlobal</code></td><td>Indicates the values of the global variables <a href="/kb/en/server-system-variables/#max_allowed_packet">max_allowed_packet</a>, <a href="/kb/en/server-system-variables/#wait_timeout">wait_timeout</a>, <a href="/kb/en/server-system-variables/#autocommit">autocommit</a>, <a href="/kb/en/replication-and-binary-log-server-system-variables/#auto_increment_increment">auto_increment_increment</a>, <a href="/kb/en/server-system-variables/#time_zone">time_zone</a>, <a href="/kb/en/server-system-variables/#system_time_zone">system_time_zone</a> and <a href="/kb/en/server-system-variables/#tx_isolation">tx_isolation</a>) won't be changed, permitting the pool to create new connections faster.<br><em>Default: false. Since 2.2.0, removed in 3.0.0</em></td></tr>
<tr><td><code>tcpNoDelay</code></td><td>Sets corresponding option on the connection socket.<br><em>since 1.0.0, removed in 3.0.0</em></td></tr>
<tr><td><code>tcpRcvBuf</code></td><td>set buffer size for TCP buffer (SO_RCVBUF).<br><em>since 1.0.0, removed in 3.0.0</em></td></tr>
<tr><td><code>tcpSndBuf</code></td><td>set buffer size for TCP buffer (SO_SNDBUF).<br><em>since 1.0.0, removed in 3.0.0</em></td></tr>
<tr><td><code>trackSchema</code></td><td>Permit to disabled "session_track_schema" setting when server has CLIENT_SESSION_TRACK capability<br><em>Default: True. Since 2.5.4, removed in 3.0.0</em></td></tr>
<tr><td><code>trustStore</code></td><td>File path of the trustStore file (similar to java System property "javax.net.ssl.trustStore"). (legacy alias trustCertificateKeyStoreUrl)<br>Use the specified file for trusted root certificates.<br>When set, overrides serverSslCert.<br><em>Since 1.3.4, removed in 3.0.0</em></td></tr>
<tr><td><code>trustStorePassword</code></td><td>Password for the trusted root certificate file (similar to java System property "javax.net.ssl.trustStorePassword").<br>(legacy alias trustCertificateKeyStorePassword).<br><em>Since 1.3.4, removed in 3.0.0</em></td></tr>
<tr><td><code>trustStoreType</code></td><td>Indicate trust store type (JKS/PKCS12). default is null, then using java default type.<br><em>Since 2.4.0, removed in 3.0.0</em></td></tr>
<tr><td><code>useBatchMultiSend</code></td><td>*Not compatible with <em>aurora</em>*<br> Driver will can send queries by batch. <br>If set to <code>false</code>, queries are sent one by one, waiting for the result before sending the next one. <br>If set to <code>true</code>, queries will be sent by batch corresponding to the useBatchMultiSendNumber option value (default 100) or according to the <a href="/kb/en/server-system-variables/#max_allowed_packet">max_allowed_packet</a> server variable if the packet size does not permit sending as many queries. Results will be read later, avoiding a lot of network latency when the client and server aren't on the same host. <br><br> This option is mainly effective when the client is distant from the server. More information <a href="/kb/en/option-batchmultisend-description/">here</a><br><em>Default: true (false if using </em>aurora<em> failover) . Since 1.5.0, removed in 3.0.0</em></td></tr>
<tr><td><code>useBatchMultiSendNumber</code></td><td>When option useBatchMultiSend is active, indicate the maximum query send in a row before reading results.<br><em>Default: 100. Since 1.5.0</em></td></tr>
<tr><td><code>useFractionalSeconds</code></td><td>Correctly handle subsecond precision in timestamps (feature available with <a href="/kb/en/what-is-mariadb-53/">MariaDB 5.3</a> and later).<br>May confuse 3rd party components (Hibernated).<br><em>Default: true. Since 1.0.0</em></td></tr>
<tr><td><code>useOldAliasMetadataBehavior</code></td><td>Metadata ResultSetMetaData.getTableName() returns the physical table name. "useOldAliasMetadataBehavior" permits activating the legacy code that sends the table alias if set. <br><em>Default: false. Since 1.1.9</em></td></tr>
<tr><td><code>validConnectionTimeout</code></td><td>When multiple hosts are configured, the connector verifies that the connections haven't been lost after this much time in seconds has elapsed.<br>When this parameter is set to 0, no verification will be done. <br>Default:120 seconds<br>since 1.2.0, removed in 3.0.0</td></tr>
</table>
</div><p><br><br></p>
<h2 class="anchored_heading" id="jdbc-api-implementation-notes">JDBC API Implementation Notes</h2>
<h3 class="anchored_heading" id="size-consideration">Size consideration</h3>
<p>GSSAPI in windows isn't well supported in java, causing recurrent issues. Since 3.1, waffle-jna is marked as a dependency to provide good GSSAPI support without problems. This has the drawback to make connector and dependencies to a size of around 4Mb. </p>
<p>If size is important, the dependency can be removed, the connector working great, just will have some limitation using GSSAPI on windows :</p>
<p>this can be done like this: </p>
<ul start="1"><li>using maven
</li></ul>
<pre class="fixed">&lt;dependency&gt;
	&lt;groupId&gt;org.mariadb.jdbc&lt;/groupId&gt;
	&lt;artifactId&gt;mariadb-java-client&lt;/artifactId&gt;
	&lt;version&gt;3.1.0&lt;/version&gt;
        &lt;exclusions&gt;
          &lt;exclusion&gt;
            &lt;groupId&gt;com.github.waffle&lt;/groupId&gt;
            &lt;artifactId&gt;waffle-jna&lt;/artifactId&gt;
          &lt;/exclusion&gt;
      &lt;/exclusions&gt; 
&lt;/dependency&gt;
</pre><ul start="1"><li>using graddle:
</li></ul>
<pre class="fixed">dependencies {
    implementation('org.mariadb.jdbc:mariadb-java-client:3.1.0') {
        exclude group: 'com.github.waffle', module: 'waffle-jna'
    }
}
</pre><h3 class="anchored_heading" id="timezone-consideration">Timezone consideration</h3>
<p>The simple solution is always having client and server sharing the same timezone.</p>
<p>If that's not the case, some options permit to correct that behavior. In 2.x version, there was 2 options `useLegacyDatetimeCode` and `serverTimezone` that control timezone difference. Those options are now removed in 3.x version, since they didn't comply well with <a href="/kb/en/time-zones/#time-zone-effects-on-functions">time function</a>.</p>
<p>Since 3.0.0, a new option 'timezone' permit to handle time_zone differences.</p>
<p>The option `timezone` can have 3 types of value:</p>
<ul start="1"><li>'disabled' (default) : connector doesn't change time_zone.
</li><li>'auto' : connector will set time_zone connection variable to java default timezone
</li><li>'&lt;a timezone&gt;': connector will set connection variable to value. Compare to Auto, this avoids having some additional exchange with server at connection creation, This value MUST correspond to java default timezone. 
</li></ul>
<p>The solution is to explicitly set timezone either to 'auto' or to explicit timezone.</p>
<p>example :</p>
<ul start="1"><li>jdbc:mariadb:<em>localhost/?timezone=+5:00</em>
</li><li>jdbc:mariadb:<em>localhost/?timezone=auto</em>
</li><li>jdbc:mariadb:<em>localhost/?timezone=America/New_York</em>
</li></ul>
<p>The recommended value is setting timezone to 'auto'. Connector will then time_zone connection variable to `timezone` value at connection creation. This permits safe use of server  <a href="/kb/en/time-zones/#time-zone-effects-on-functions">time function</a>.
If the client uses the IANA timezone, the server might have to load time zone information. See <a href="/kb/en/mariadb-tzinfo-to-sql/">mariadb-tzinfo-to-sql</a> and <a href="/kb/en/time-zones/">time-zones</a>, those are not filled by default.</p>
<p>This corresponds to thebehavior of the MySQL connector with options "connectionTimeZone" set with option "forceConnectionTimeZoneToSession" set to true. </p>
<h3 class="anchored_heading" id="load-data-infile">"LOAD DATA INFILE"</h3>
<div class="cstm-style bluebox"><p>LOAD DATA INFILE was the fastest way to load data. Since <a href="/kb/en/what-is-mariadb-102/">MariaDB 10.2</a>, now the fastest way is the standard JDBC executeBatch() when option 'useBulkStmts' is enabled</p>
</div><p>The fastest way to load lots of data is using <a href="https://mariadb.com/kb/en/mariadb/load-data-infile/">LOAD DATA INFILE</a>. <br>However, using "LOAD DATA LOCAL INFILE" (ie: loading a file from the client) may be a security problem if someone can execute a query from the client, he can have access to any file on the client (according to the rights of the user running the client process).</p>
<p>A specific option "allowLocalInfile" (default to true) can disable this functionality on the client side.
The global variable <a href="/kb/en/server-system-variables/#local_infile">local_infile</a> can disable LOAD DATA LOCAL INFILE on the server side.</p>
<h3 class="anchored_heading" id="set-a-query-timeout">Set a Query Timeout</h3>
<p>Driver follow the JDBC specifications, permitting Statement.setQueryTimeout() for a particular statement.</p>
<p>If the goal is to set a timeout for all queries, since <a href="/kb/en/mariadb-1011-release-notes/">MariaDB 10.1.1</a>, the server permits a <a href="/kb/en/aborting-statements/">limiting query time</a> by setting the system variable <a href="/kb/en/server-system-variables/#max_statement_time">max_statement_time</a>.</p>
<p>This solution will handle query timeout better (and faster) than java solutions (JPA2, "javax.persistence.query.timeout", Pools integrated solution like tomcat jdbc-pool "queryTimeout"...).</p>
<p>Option "sessionVariables" permit to set this system variable easily : 
Example :</p>
<pre class="fixed">#will set a maximum query timeout of 10 seconds for this connection
jdbc:mariadb://localhost/db?user=user&amp;sessionVariables=max_statement_time=10
</pre><h3 class="anchored_heading" id="streaming-result-sets">Streaming Result Sets</h3>
<p>By default, <code class="fixed" style="white-space:pre-wrap">Statement.executeQuery()</code> will read the full result set from the server.
With large result sets, this will require large amounts of memory. <br></p>
<p>To avoid using too much memory, rather use Statement.setFetchSize(int numberOfRowInMemory) to indicate the number of rows that will be stored in memory<br>
Example :<br>
using <code class="fixed" style="white-space:pre-wrap">Statement.setFetchSize(1000)</code> indicates that 1000 rows will be stored in memory.<br>
So, when the query has executed, 1000 rows will be in memory. After 1000 <code class="fixed" style="white-space:pre-wrap">ResultSet.next()</code>, the next 1000 rows will be stored in memory, and so on.</p>
<p>If another query is run on same connection while the resultset has not been completly read, the connector will fetch all remaining rows before executing the query. This can lead to still needing lots of memory. Recommendation is then to use another connection for simultaneous operations. </p>
<p>Note that the server usually expects clients to read off the result set relatively quickly. The <a href="/kb/en/server-system-variables/#net_write_timeout">net_write_timeout</a> server variable controls this behavior (defaults to 60s).
If you don't expect results to be handled in this amount of time there is a different possibility:</p>
<ul start="1"><li>With &gt;= <a href="/kb/en/mariadb-1012-release-notes/">MariaDB 10.1.2</a>, you can use the query "SET STATEMENT net_write_timeout=10000 FOR XXX" with XXX your "normal" query. This will indicate that specifically for this query, <a href="/kb/en/server-system-variables/#net_write_timeout">net_write_timeout</a> will be set to a longer time (10000 in this example).
</li><li>for older servers, a specific query will have to temporarily set net_write_timeout ("SET STATEMENT net_write_timeout=..."), and set it back afterward.
</li><li>if your application usually uses a lot of long queries with fetch size, the connection can be set using option "sessionVariables=net_write_timeout=xxx"
</li></ul>
<p>Even using setFetchSize, the server will send all results to the client. </p>
<div class="cstm-style redbox"><p>If another query is executed on the same connection when a streaming resultset has not been fully read, the connector will put the whole remaining streaming resultset in memory in order to execute the next query. This can lead to OutOfMemoryError if not handled. </p>
</div><p>Before version 1.4.0, the only accepted value for fetch size was <code class="fixed" style="white-space:pre-wrap">Statement.setFetchSize(Integer.MIN_VALUE)</code> (equivalent to <code class="fixed" style="white-space:pre-wrap">Statement.setFetchSize(1)</code>). This value is still accepted for compatilibity reasons but rather use <code class="fixed" style="white-space:pre-wrap">Statement.setFetchSize(1)</code>, since according to JDBC the value must be &gt;= 0.  </p>
<h3 class="anchored_heading" id="prepared-statements">Prepared Statements</h3>
<p>The driver uses server prepared statements as a standard to communicate with the database (since 1.3.0). If the "allowMultiQueries" options are set to true, the driver will only use text protocol. Prepared statements (parameter substitution) is handled by the driver, on the client side.</p>
<h3 class="anchored_heading" id="callablestatement">CallableStatement</h3>
<p>Callable statement implementation won't need to access stored procedure
metadata (<a href="/kb/en/mysqlproc-table/">mysql.proc</a>) table if both of following are true</p>
<ul start="1"><li>CallableStatement.getMetadata() is not used
</li><li>Parameters are accessed by index, not by name
</li></ul>
<p>When possible, following the two rules above provides both better speed and
eliminates concerns about SELECT privileges on the
<a href="/kb/en/mysqlproc-table/">mysql.proc</a> table.</p>
<h3 class="anchored_heading" id="generated-keys-limitation">Generated keys limitation</h3>
<p>Java permit retrieving last generated keys,using <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.sql/java/sql/Statement.html#getGeneratedKeys()">Statement.getGeneratedKeys()</a>.</p>
<p>Example:</p>
<pre class="fixed">    Statement stmt = sharedConn.createStatement();
    stmt.execute(
            &#34;INSERT INTO executeGenerated(t2) values (100)&#34;, Statement.RETURN_GENERATED_KEYS);
    ResultSet rs = stmt.getGeneratedKeys();
    rs.next();
    System.out.println(rs.getInt(1));
</pre><p>Only the the first generated key will be returned, meaning that for multi-insert the generated key retrieved will correspond to the first generated value of the command.</p>
<p>If retrieving all generated values for multiple insert is needed, please use <a href="https://mariadb.com/kb/en/insertreturning/">INSERT...RETURNING</a> command (since <a href="/kb/en/what-is-mariadb-105/">MariaDB 10.5</a>).</p>
<h3 class="anchored_heading" id="optional-jdbc-classes">Optional JDBC Classes</h3>
<p>The following optional interfaces are implemented by the
org.mariadb.jdbc.MariaDbDataSource class : javax.sql.DataSource,
javax.sql.ConnectionPoolDataSource, javax.sql.XADataSource</p>
<p>careful : org.mariadb.jdbc.MySQLDataSource doesn't exist anymore and should be replaced with org.mariadb.jdbc.MariaDbDataSource since v1.3.0</p>
<h2 class="anchored_heading" id="usage-examples">Usage Examples</h2>
<p>The following code provides a basic example of how to connect to a MariaDB or
MySQL server and create a table.  </p>
<h4 class="anchored_heading" id="creating-a-table-on-a-mariadb-or-mysql-server">Creating a Table on a MariaDB or MySQL Server</h4>
<pre class="fixed">Connection  connection = DriverManager.getConnection(&#34;jdbc:mariadb://localhost:3306/test&#34;, &#34;username&#34;, &#34;password&#34;);
Statement stmt = connection.createStatement();
stmt.executeUpdate(&#34;CREATE TABLE a (id int not null primary key, value varchar(20))&#34;);
stmt.close();
connection.close();
</pre><h2 class="anchored_heading" id="services">Services</h2>
<p>The driver implements 3 kinds of services:</p>
<ul start="1"><li>Credential service: permit giving credential
</li><li>Authentication service: permit adding client authentication plugins.
</li><li>SSL factory service: custom TSL implementation
</li></ul>
<h3 class="anchored_heading" id="credential-service">Credential service</h3>
<p>Credentials are usually set using user/password in the connection string or by using DriverManager.getConnection(String url, String user, String password).</p>
<p>Credential plugins permit to provide credential information from other means. Those plugins have to be activated setting option `credentialType` to designated plugin.</p>
<p>The driver has 3 default plugins :</p>
<h4 class="anchored_heading" id="aws-iam">AWS IAM</h4>
<p>This permits AWS database IAM authentication. The plugin generate a token using IAM credential and region. Token is valid for 15 minutes and cached for 10 minutes. </p>
<p>To use this credential authentication, com.amazonaws:aws-java-sdk-rds dependency must be registred in classpath.
Implementation use SDK DefaultAWSCredentialsProviderChain and DefaultAwsRegionProviderChain to get IAM credential and region.
see <a href="https://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/com/amazonaws/auth/DefaultAWSCredentialsProviderChain.html">DefaultAWSCredentialsProviderChain</a> and <a href="https://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/com/amazonaws/auth/DefaultAWSCredentialsProviderChain.html">DefaultAwsRegionProviderChain</a> to check how those information can be retrieved (environment variable / system properties, files, ...)</p>
<p>Example: <code class="fixed" style="white-space:pre-wrap">jdbc:mariadb://host/db?credentialType=AWS-IAM&amp;useSsl&amp;serverSslCert=/somepath/rds-combined-ca-bundle.pem</code></p>
<p>with AWS_ACCESS_KEY_ID, AWS_SECRET_ACCESS_KEY and AWS_REGION environment variable set. </p>
<h4 class="anchored_heading" id="environment">Environment</h4>
<p>User and Password are retrieved from environment variables. default environment variables are MARIADB_USER and MARIADB_PWD, but can be changed by setting additional option `userKey` and `pwdKey`</p>
<p>Example : using connection string <code class="fixed" style="white-space:pre-wrap">jdbc:mariadb://host/db?credentialType=ENV</code> user and password will be retrieved from environment variable MARIADB_USER and MARIADB_PWD.</p>
<h4 class="anchored_heading" id="property">Property</h4>
<p>User and Password are retrieved from java properties. default property name are mariadb.user and mariadb.pwd, but property names can be changed by setting additional option `userKey` and `pwdKey`</p>
<p>Example : using connection string <code class="fixed" style="white-space:pre-wrap">jdbc:mariadb://host/db?credentialType=PROPERTY&amp;userKey=mariadbUser&amp;pwdKey=mariadbPwd</code> user and password will be retrieved from java properties `mariadbUser` and `mariadbPwd`</p>
<h3 class="anchored_heading" id="authentication-service">Authentication service</h3>
<p><a href="https://mariadb.com/kb/en/library/documentation/columns-storage-engines-and-plugins/plugins/authentication-plugins/">Client authentication plugins</a> are now defined as services. This permits to easily add new client authentication plugins.</p>
<p>List of authentication plugins in java connector : </p>
<ul start="1"><li>mysql_clear_password
</li><li>auth_gssapi_client
</li><li>client_ed25519
</li><li>mysql_native_password
</li><li>mysql_old_password
</li><li>dialog (PAM)
</li><li>sha256_password
</li><li>caching_sha2_password
</li></ul>
<p>New authentication plugins can be created implementing interface org.mariadb.jdbc.authentication.AuthenticationPlugin, and listing new plugin in a META-INF/services/org.mariadb.jdbc.authentication.AuthenticationPlugin file.</p>
<h3 class="anchored_heading" id="ssl-factory-service">SSL factory service</h3>
<p>Custom SSL implementation can be used implementing    
A connection to a server initially creates a socket. When set, SSL socket is layered over this existing socket.  
Implementing org.mariadb.jdbc.tls.TlsSocketPlugin permit to provide custom SSL implementation for example create a new <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/javax/net/ssl/HostnameVerifier.html">HostnameVerifier</a> implementation.</p>
<p>Custom implementation need to implement org.mariadb.jdbc.tls.TlsSocketPlugin and register service META-INF/services/org.mariadb.jdbc.tls.TlsSocketPlugin</p>
<p>Custom implementation are activated using option `tlsSocketType`</p>
<h4 class="anchored_heading" id="easy-to-use-logging">Easy to use logging</h4>
<p>In MariaDB Connector/J 3.0, logging can now be enabled at runtime. Connector/J uses the slf4j API if it is installed. Otherwise, Connector/J uses the JDK logger / console.</p>
<p>logger name is "org.mariadb.jdbc".</p>
<p>Connector/J supports the following Java logging levels:</p>
<div class="cstm-style darkheader-nospace-borders centered"><table><tr><th>Log Levels</th><th>Description</th></tr>
<tr><td>INFO</td><td>Logs connection errors</td></tr>
<tr><td>DEBUG/FINE</td><td>Logs SQL statements</td></tr>
<tr><td>TRACE/FINEST</td><td>Logs network exchanges</td></tr>
</table>
</div><div class="cstm-style redbox"><p>Be careful with "trace" level, purpose is to log all exchanges with server. 
This means huge amount of data.
Bad configuration can lead to problems, like quickly filling the disk.</p>
</div><p>Example of configuring "trace" level on driver for logback: file logback.xml in src/main/resources/</p>
<pre class="fixed">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;

&lt;configuration&gt;

    &lt;appender name=&#34;STDOUT&#34; class=&#34;ch.qos.logback.core.ConsoleAppender&#34;&gt;
        &lt;encoder class=&#34;ch.qos.logback.classic.encoder.PatternLayoutEncoder&#34;&gt;
            &lt;pattern&gt;%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n&lt;/pattern&gt;
        &lt;/encoder&gt;
    &lt;/appender&gt;

    &lt;logger name=&#34;org.mariadb.jdbc&#34; level=&#34;trace&#34; additivity=&#34;false&#34;&gt;
        &lt;appender-ref ref=&#34;STDOUT&#34;/&gt;
    &lt;/logger&gt;

    &lt;root level=&#34;error&#34;&gt;
        &lt;appender-ref ref=&#34;STDOUT&#34;/&gt;
    &lt;/root&gt;

&lt;/configuration&gt;
</pre><p>Exemple of generated logs :</p>
<pre class="fixed">11:47:04.613 [main] TRACE o.m.j.c.socket.impl.PacketWriter - send: conn=17532 (M)
+--------------------------------------------------+
|  0  1  2  3  4  5  6  7   8  9  a  b  c  d  e  f |
+--------------------------------------------------+------------------+
| 09 00 00 00 03 53 45 4C  45 43 54 20 31          | .....SELECT 1    |
+--------------------------------------------------+------------------+

11:47:04.613 [main] TRACE o.m.j.c.socket.impl.PacketReader - read: conn=17532 (M)
+--------------------------------------------------+
|  0  1  2  3  4  5  6  7   8  9  a  b  c  d  e  f |
+--------------------------------------------------+------------------+
| 01 00 00 01 01                                   | .....            |
+--------------------------------------------------+------------------+

11:47:04.613 [main] TRACE o.m.j.c.socket.impl.PacketReader - read: conn=17532 (M)
+--------------------------------------------------+
|  0  1  2  3  4  5  6  7   8  9  a  b  c  d  e  f |
+--------------------------------------------------+------------------+
| 18 00 00 02 03 64 65 66  00 00 00 01 31 00 00 0C | .....def....1... |
| 3F 00 01 00 00 00 03 81  00 00 00 00             | ?...........     |
+--------------------------------------------------+------------------+
</pre><h2 class="anchored_heading" id="continuous-integration-and-automated-tests">Continuous Integration and Automated Tests</h2>
<p>For MariaDB Connector/J's continuous integration and automated test results, please see <a href="https://app.travis-ci.com/github/mariadb-corporation/mariadb-connector-j">MariaDB Connector/J's Travis CI</a>.</p>
<h2 class="anchored_heading" id="reporting-bugs">Reporting Bugs</h2>
<p>If you find a bug, please report it via the <a href="https://jira.mariadb.org/projects/CONJ/issues">CONJ project</a> on <a href="https://jira.mariadb.org">MariaDB's Jira bug tracker</a>.</p>
<h2 class="anchored_heading" id="source-code">Source Code</h2>
<p>The source code is available at the <a href="https://github.com/MariaDB/mariadb-connector-j">mariadb-connector-j repository</a> on GitHub.</p>
<h2 class="anchored_heading" id="license">License</h2>
<p>GNU Lesser General Public License as published by the Free Software Foundation; either version 2.1 of the License, or (at your option) any later version.</p>
<p>For licensing questions, see the <a href="/kb/en/licensing-faq/">Licensing FAQ</a>.</p>
<h2 class="anchored_heading" id="faq">F.A.Q.</h2>
<h5 class="anchored_heading" id="error-could-not-read-resultset-unexpected-end-of-stream-read-0-bytes-from-4">Error <em>"Could not read resultset: unexpected end of stream, read 0 bytes from 4"</em></h5>
<p>There is an issue communicating with the server. </p>
<p>Most of the time this will be caused by reading a query that has a large resultset; the server usually expects clients to read off the result set relatively quickly. The <a href="/kb/en/server-system-variables/#net_write_timeout">net_write_timeout</a> server variable controls this behavior (defaults to 60s). If the client doesn't read the whole resultset in that amount of time, the server will discard the connection.
If you don't expect results to be handled in this amount of time there is another possibility:</p>
<ul start="1"><li>if your server version &gt;= <a href="/kb/en/mariadb-1012-release-notes/">MariaDB 10.1.2</a>, you can use the query "SET STATEMENT net_write_timeout=10000 FOR XXX" with XXX being your "normal" query. This will indicate that specifically for this query, <a href="/kb/en/server-system-variables/#net_write_timeout">net_write_timeout</a> will be set to a longer time (10000 in this example).
</li><li>for older servers, a specific query will have to temporarily set net_write_timeout ("SET STATEMENT net_write_timeout=..."), and set it back afterward.
</li><li>if your application usually uses a lot of long queries with fetch size, the connection can be set using the "sessionVariables=net_write_timeout=xxx" option.
</li></ul>
<h4 class="anchored_heading" id="how-to-do-a-lightweight-ping-avoid-mass-select-1">How to Do a Lightweight Ping / Avoid Mass "select 1"</h4>
<p>Connection.isValid() is a good approach. 
Connection.isValid() is doing a ping (ping in mysql protocol, not network ping). 
Connection pool using JDBC4 Validation are using automatically this Connection.isValid()</p>

    </div>


        
            <div id="subscribe" class="well well-small hide hidden-print"
                 data-subscribe-url="/kb/en/about-mariadb-connector-j/+subscriptions/add"
                 data-unsubscribe-url="/kb/en/about-mariadb-connector-j/+subscriptions/remove">
            </div>
        

        
        
    
        <div class="simple_section_nav">
            <ul class="nav nav-pills">
                
                
                    <li><a href="/kb/en/connector-java/">
                        ↑ Java Connector ↑
                    </a>
                    </li>
                
                
                    <li class="pull-right"><a href="/kb/en/installing-mariadb-connectorj/">
                        Installing MariaDB Connector/J →
                    </a>
                    </li>
                
            </ul>
        </div>
    

        

        
        <h2>Comments</h2>
        
    
    <div id="comments" data-node-id="3164" data-comments-url="/kb/en/about-mariadb-connector-j/+comments"
         data-reply-url="/kb/en/about-mariadb-connector-j/comments/post/">
        Comments loading...
    </div>

        

    </div>


                    <div id="content_disclaimer" class="graybox">
                        Content reproduced on this site is the property of its respective owners,
                        and this content is not reviewed in advance by MariaDB. The views, information and opinions
                        expressed by this content do not necessarily represent those of MariaDB or any other party.
                    </div>
                </div>
            </section>

            
                <div id="right_bar" class="col-md-2">
                    
    
        
        <ul class="section_navigation well well-small hidden-xs hidden-sm">
            
                <li class="parent"><a href="/kb/en/connector-java/">
                    ↑ Java Connector ↑
                </a>
                </li>
            
            
                
                    <li class="active">
                        <span>About MariaDB Connector/J</span>
                        
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/installing-mariadb-connectorj/">
                            
                            Installing MariaDB Connector/J
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/java-connector-using-gradle/">
                            
                            Java Connector Using Gradle
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/java-connector-using-maven/">
                            
                            Java Connector Using Maven
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/failover-and-high-availability-with-mariadb-connector-j/">
                            
                            Failover and High availability with MariaDB Connector/J
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/option-batchmultisend-description/">
                            
                            Option batchMultiSend Description
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/using-tls-ssl-with-mariadb-java-connector/">
                            
                            Using TLS/SSL with MariaDB Connector/J
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/pool-datasource-implementation/">
                            
                            Pool Datasource Implementation
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/gssapi-authentication-with-mariadb-connector-j/">
                            
                            GSSAPI Authentication with MariaDB Connector/J
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/mariadb-connector-j-releases/">
                            
                            List of MariaDB Connector/J Releases
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/mariadb-connector-j-release-notes/">
                            
                            MariaDB Connector/J Release Notes
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/mariadb-connector-j-changelogs/">
                            
                            MariaDB Connector/J Changelogs
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/failover-and-high-availability-with-mariadb-connector-j-for-2x-driver/">
                            
                            Failover and High availability with MariaDB Connector/J for 2.x driver
                        </a>
                    </li>
                
            
        </ul>
    
    

                </div>
            
        </div>
    </div>
</div>

<!-- Footer -->
<footer id="footer">
    <div class="footer">
        <div class="container">
            <div class="row row-10">
                <div class="col-md-2 col-xs-4 item">
                    <h5>
                        <a href="/products" title="Products">Products</a>
                    </h5>
                    <ul>
                        <li id="menu-item-7816" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-7816"><a href="https://mariadb.com/products/mariadb-platform/">MariaDB Platform</a></li>
                        <li id="menu-item-7815" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-7815"><a href="https://mariadb.com/products/skysql/">MariaDB SkySQL</a></li>
                        <li id="menu-item-4172" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4172"><a href="https://mariadb.com/pricing/">Pricing</a></li>
                        <li id="menu-item-4163" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4163"><a href="https://mariadb.com/downloads/">Download MariaDB</a></li>
                    </ul>
                </div>
                <div class="col-md-2 col-xs-4 item">
                    <h5>
                        <a href="/services" title="Services">Services</a>
                    </h5>
                    <ul>
                        <li id="menu-item-4169" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4169"><a href="https://mariadb.com/services/remote-dba/">Remote DBA</a></li>
                        <li id="menu-item-41691" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4169"><a href="https://mariadb.com/services/skydba/">SkyDBA</a></li>
                        <li id="menu-item-4167" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4167"><a href="https://mariadb.com/services/enterprise-architect/">Enterprise Architect</a></li>
                        <li id="menu-item-4170" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4170"><a href="https://mariadb.com/services/technical-support-services/">Technical Support</a></li>
                        <li id="menu-item-4168" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4168"><a href="https://mariadb.com/services/migration-practice/">Migration Practice</a></li>
                        <li id="menu-item-4166" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4166"><a href="https://mariadb.com/services/consulting/">Consulting</a></li>
                        <li id="menu-item-4171" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4171"><a href="https://mariadb.com/services/training/">Training</a></li>
                    </ul>
                </div>
                <div class="col-md-2 col-xs-4 item">
                    <h5>
                        <a href="/resources" title="Resources">Resources</a>
                    </h5>
                    <ul>
                        <li id="menu-item-41751" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4175"><a href="https://mariadb.com/docs/">Documentation</a></li>
                        <li id="menu-item-41752" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4175"><a href="https://mariadb.com/developers/">Developers</a></li>
                        <li id="menu-item-4175" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4175"><a href="https://mariadb.com/resources/blog/">Blog</a></li>
                        <li id="menu-item-5462" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-5462"><a href="https://support.mariadb.com">Support</a></li>
                        <li id="menu-item-6004" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-6004"><a href="https://mariadb.com/openworks/">OpenWorks</a></li>
                        <li id="menu-item-60041" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-6004"><a href="https://mariadb.com/resources/customer-stories/">Customer Stories</a></li>
                        <li id="menu-item-7817" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-7817"><a href="https://mariadb.com/resources/events/">Events</a></li>
                        <li id="menu-item-4177" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4177"><a href="https://mariadb.com/roadshow/">MariaDB Roadshow</a></li>
                    </ul>
                </div>
                <div class="visible-xs visible-sm clear"></div>
                <div class="col-md-2 col-xs-5 item">
                    <h5>
                        <a href="/about-us" title="About MariaDB">About</a>
                    </h5>
                    <ul>
                        <li id="menu-item-4173" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4173"><a href="https://mariadb.com/contact/">Contact</a></li>
                        <li id="menu-item-4161" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4161"><a href="https://mariadb.com/about-us/leadership/">Leadership</a></li>
                        <li id="menu-item-4162" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4162"><a href="https://mariadb.com/about-us/partners/">Partners</a></li>
                        <li id="menu-item-4174" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4174"><a href="https://mariadb.com/newsroom/">Newsroom</a></li>
                        <li id="menu-item-4160" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4160"><a href="https://mariadb.com/about-us/investors/">Investors</a></li>
                        <li id="menu-item-4159" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4159"><a href="https://mariadb.com/about-us/careers/">Careers</a></li>
                        <li id="menu-item-41591" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4159"><a href="https://mariadb.com/trust/">Trust Center</a></li>
                        <li id="menu-item-41592" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4159"><a href="https://mariadb.com/vulnerability-reporting/">Vulnerability Reporting</a></li>
                    </ul>
                </div>
                <div class="col-md-4 col-xs-7 item">
                    <div id="block-footercontact" class="block block-block-content block-block-content22b3af28-0754-44ec-a5c6-4466568f37e3">
                        <h5><a href="/contact" title="Contact">Contact</a></h5>
                    </div>
                    <div class="social">
                        <ul class="list-inline">
                            <li>
                                <a target="_blank" href="https://www.facebook.com/MariaDB.dbms/" title="Facebook">
                                    <i class="fa fa-facebook" aria-hidden="true"></i>
                                </a>
                            </li>
                            <li>
                                <a target="_blank" href="https://twitter.com/mariadb" title="Twitter">
                                    <i class="fa fa-twitter" aria-hidden="true"></i>
                                </a>
                            </li>
                            <li>
                                <a target="_blank" href="https://www.linkedin.com/company/mariadb-corporation?trk=company_logo " title="LinkedIn">
                                    <i class="fa fa-linkedin" aria-hidden="true"></i>
                                </a>
                            </li>
                        </ul>
                    </div>
                    <div id="block-footerformcontact" class="block block-block-content block-block-contentd754ee1b-3cc9-40e7-9ef4-f504f1197fb1">
                        
                            <p>Subscribe to our newsletter!</p>
                            <script src="//app-sj15.marketo.com/js/forms2/js/forms2.min.js"></script><form id="mktoForm_1498"></form>
                            <script>
                                <!--//--><![CDATA[// ><!--
                                MktoForms2.loadForm("//app-sj15.marketo.com", "573-PXI-984", 1498);
                                //--><!]]]]><![CDATA[>
                                //--><!]]>
                            </script>
                        
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="footer-copyright">
        <div class="container text-center">
            <ul class="list-inline no-margin">
                <li>
                    <a href="/legal" title="Legal">Legal</a>
                </li>
                <li>
                    <a href="/privacy-policy" title="Privacy Policy">Privacy Policy</a>
                </li>
                <li>
                    <a href="/cookie-policy/" title="Cookies">Cookie Policy</a>
                </li>
            </ul>
            <p>Copyright &copy; 2024 MariaDB. All rights reserved.</p>
        </div>
    </div>
</footer>
</div>

<div id="ajax_loading">
    <img src="/kb/static/images/ajax-loader.a51c5608d01a.gif" />
</div>

    <!-- Google Tag Manager -->
    <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-MK2847"
                      height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
            '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MK2847');</script>
    <!-- End Google Tag Manager -->

</body>

<script type="text/javascript" src="/kb/static/js/main.fed4ec768178.js" charset="utf-8"></script>

</html>