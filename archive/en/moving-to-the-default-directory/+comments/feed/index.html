<?xml version="1.0" encoding="utf-8"?>
<rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title>MariaDB Knowledge Base Comments for: Moving to the Default Directory</title><link>https://mariadb.com/kb/en/moving-to-the-default-directory/+comments/feed/</link><description></description><atom:link href="https://mariadb.com/kb/en/moving-to-the-default-directory/+comments/feed/" rel="self"></atom:link><language>en-us</language><lastBuildDate>Tue, 21 Nov 2023 02:22:59 +0000</lastBuildDate><item><title>Re: Moving to the Default Directory</title><link>https://mariadb.com/kb/en/moving-to-the-default-directory/+comments/4961</link><description>&lt;p&gt;I am on CentOS 8.2004 all new install. I had moved the data directory and have done this before on many servers in the past. 
It was all working fine until about a week ago, when the package manager must have updated something in systemd/mariadb and it stopped looking at /etc/my.cnf settings and kept going into the default /var/lib/mysql .
That cost me days of misdirection and lost work, and I still do not have it 100% fixed but am very close now. 
This has more caveats or possible causes of not working right than an average sysadmin can really get ahold of.
It really needs more work in many areas of documentation as *wow* .
It is good software and thanks. Its just all becoming vastly complex .
CentOS 8.2004/Firewalld/Selinux/HTTPD-Apache Virtual Hosts/Remi PHP-FPM FCGI/MariaDB/TLS(SSL)&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Ernie M</dc:creator><guid>https://mariadb.com/kb/en/moving-to-the-default-directory/+comments/4961</guid></item><item><title>Re: Moving to the Default Directory</title><link>https://mariadb.com/kb/en/moving-to-the-default-directory/+comments/4766</link><description>&lt;p&gt;Does not work on Centos 8 and &lt;a href="/kb/en/mariadb-10317-release-notes/"&gt;mariadb 10.3.17&lt;/a&gt; when moving /var/lib/mysql to /home/mysql (755 mysql.mysql). It is not a SELinux issue but a mysql variables issue.&lt;/p&gt;
&lt;p&gt;Contents of /etc/mysql/my.cnf
&lt;strong&gt;*&lt;/strong&gt;&lt;strong&gt;*&lt;/strong&gt;&lt;strong&gt;*&lt;/strong&gt;&lt;strong&gt;*&lt;/strong&gt;&lt;strong&gt;*&lt;/strong&gt;&lt;strong&gt;*&lt;/strong&gt;&lt;strong&gt;*&lt;/strong&gt;
[mysqld]
datadir=/home/mysql
socket=/home/mysql/mysql.sock&lt;/p&gt;
&lt;p&gt;[client]
port=3306
socket=/home/mysql/mysql.sock&lt;/p&gt;
&lt;p&gt;!includedir /etc/my.cnf.d
&lt;strong&gt;*&lt;/strong&gt;&lt;strong&gt;*&lt;/strong&gt;&lt;strong&gt;*&lt;/strong&gt;&lt;strong&gt;*&lt;/strong&gt;&lt;strong&gt;*&lt;/strong&gt;&lt;strong&gt;*&lt;/strong&gt;&lt;strong&gt;*&lt;/strong&gt;
The socket is still created in the old folder /var/lib/mysql even with the above settings.&lt;/p&gt;
&lt;p&gt;Note the wrong paths in the output of systemctl status mariadb after restarting mariadb:
mysql-prepare-db-dir[123950]: Database MariaDB is probably initialized in /var/lib/mysql already, nothing is done.
mysql-prepare-db-dir[123950]: If this is not the case, make sure the /var/lib/mysql is empty before running mysql-pre&lt;/p&gt;
&lt;p&gt;What additonal headings are required in the /etc/my.cnf file or in other configuration files please?&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Andy Ciaralli</dc:creator><guid>https://mariadb.com/kb/en/moving-to-the-default-directory/+comments/4766</guid></item><item><title>Re: Moving to the Default Directory</title><link>https://mariadb.com/kb/en/moving-to-the-default-directory/+comments/3810</link><description>&lt;p&gt;Hi,
you could use one of these tutorial for example:
&lt;a href="https://www.tecmint.com/change-default-mysql-mariadb-data-directory-in-linux/"&gt;https://www.tecmint.com/change-default-mysql-mariadb-data-directory-in-linux/&lt;/a&gt;
&lt;a href="https://www.digitalocean.com/community/tutorials/how-to-change-a-mariadb-data-directory-to-a-new-location-on-centos-7"&gt;https://www.digitalocean.com/community/tutorials/how-to-change-a-mariadb-data-directory-to-a-new-location-on-centos-7&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;But please first read this official documentation to be sure you understand the configuration system variables:
&lt;a href="https://mariadb.com/kb/en/library/server-system-variables/#datadir"&gt;https://mariadb.com/kb/en/library/server-system-variables/#datadir&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Regards,
Faustin&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Faustin Lammler</dc:creator><guid>https://mariadb.com/kb/en/moving-to-the-default-directory/+comments/3810</guid></item></channel></rss>