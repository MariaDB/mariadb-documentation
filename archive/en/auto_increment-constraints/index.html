<!DOCTYPE html>
<html>
<head data-cookie-domain=""
      data-cookie-path="/">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="apple-touch-icon" sizes="180x180" href="/kb/static/images/favicons/apple-touch-icon.159e713979be.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/kb/static/images/favicons/favicon-32x32.bc0ac1d5d11e.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/kb/static/images/favicons/favicon-16x16.5801f8f0f34e.png">
    <link rel="shortcut icon" href="/kb/static/images/favicons/favicon.d122d305dee4.ico" type="image/x-icon" />

    <title>AUTO_INCREMENT Constraints - MariaDB Knowledge Base</title>

    <link href="/kb/static/css/main.f7633538c846.css" rel="stylesheet" type="text/css" />

    

    

    <!-- FB Open Graph tags -->
    <meta property="og:title" content="AUTO_INCREMENT Constraints" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://mariadb.com/kb/en/auto_increment-constraints/" />
    <meta property="og:image" content="http://mariadb.comaskmonty-logo.png" />
    <meta property="og:site_name" content="MariaDB KnowledgeBase" />
    <meta property="fb:admins" content="514852603" />
    <meta property="og:description" content="
Overview
MariaDB Enterprise Server supports AUTO_INCREMENT constraints:
A column with an AUTO_INCREMENT constraint can act as a table&#39;s primary key when a natural primary key..." />

    <meta name="description" content="
Overview
MariaDB Enterprise Server supports AUTO_INCREMENT constraints:
A column with an AUTO_INCREMENT constraint can act as a table&#39;s primary key when a natural primary key..." />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="//fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet"/>
    
</head>
<body class="mpkb nodes products nodes_view jqui" id="nodes_view">





<div id="menu-mobile" class="visible-sm visible-xs">

    <div>
        <div id="mobile-close-menu" class="text-right">
            <a href="javascript:void(0)" title="Close Menu" id="back-main" class="toggle-menu">X<span></span></a>
        </div>
    </div>
    <div class="mainmenu-mobile">
        <ul class="ls-none ul-menu">
            <li data-sub="submenu5"><a class="open-form-search" href="/kb/search/" title="Search">Search </a></li>
            <li data-sub="submenu0"><a href="/products" title="Products">Products</a><span class="arrow-main"></span></li>
            <li data-sub="submenu1"><a href="/services" title="Services">Services</a><span class="arrow-main"></span></li>
            <li data-sub="submenu2"><a href="/resources" title="Resources">Resources</a><span class="arrow-main"></span></li>
            <li data-sub="submenu3"><a href="/about-us" title="About">About</a><span class="arrow-main"></span></li>
            <li data-sub="submenu4"><a href="/contact" title="Contact">Contact</a></li>
        </ul>
    </div>

    <div class="nav-top-mobile">
        <div class="select-box form">

            <ul class="inline-block-md mb-none top-nav">
                <li>

                </li>
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/auto_increment-constraints/"> Login</a>
                    </li>
                
            </ul>



        </div>
        <p class="text-center copyright">Copyright &copy; 2025 MariaDB. All rights reserved.</p>
    </div>
</div>
<div class="violator-wrap d-none" id="top_violator">
    <div class="container">
        <div class="row">
            <div class="col-xs-12 col-sm-12">
                <div class="violator-outer">
                    <div class="violator-inner">
                        <div class="row">
                            <div class="col-xs-12 col-sm-9 col-lg-7 col-lg-offset-2" id="top_violator_content">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="content-link" target="_blank" rel="nofollow noreferrer">
                                    <span>The Ultimate Guide to High Availability with MariaDB</span>
                                </a>
                            </div>
                            <div class="col-xs-12 col-sm-3" id="top_violator_cta">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="btn btn-mariadb" target="_blank" rel="nofollow noreferrer">Download Now</a>
                            </div>
                        </div>
                    </div>
                    <button type="button" class="btn btn-link close-btn">
                        <svg xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 24 24" width="15px" height="15px"><path d="M 4.9902344 3.9902344 A 1.0001 1.0001 0 0 0 4.2929688 5.7070312 L 10.585938 12 L 4.2929688 18.292969 A 1.0001 1.0001 0 1 0 5.7070312 19.707031 L 12 13.414062 L 18.292969 19.707031 A 1.0001 1.0001 0 1 0 19.707031 18.292969 L 13.414062 12 L 19.707031 5.7070312 A 1.0001 1.0001 0 0 0 18.980469 3.9902344 A 1.0001 1.0001 0 0 0 18.292969 4.2929688 L 12 10.585938 L 5.7070312 4.2929688 A 1.0001 1.0001 0 0 0 4.9902344 3.9902344 z"/></svg>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="wrapper">
<div id="top-nav">
    <div class="container">
        <ul class="hidden-sm hidden-xs" >
            <li><a href="https://mariadb.com/kb/">Knowledge Base</a></li>
            <li><a href="https://mariadb.com/contact/">Contact</a></li>
            
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/auto_increment-constraints/" rel="nofollow">Login</a>
                    </li>
                
            
            
            <li id="search-form">
                <form action="/kb/en/+search/" method="get" id="search-block-form" accept-charset="UTF-8">
                    <input id="search" title="Enter the terms you wish to search for."
                           placeholder="Search . . ." type="text"
                           name="q" value="" size="15" maxlength="128" class="form-text"
                           data-autocomplete-url="/kb/en/+search/autocomplete/">
                    <input type="hidden" name="quick" value="1" />
                    <input type="hidden" name="source" value="kb" />
                </form>
            </li>
            <li><a id="search-toggler" href="/kb/search/">Search</a></li>
            
        </ul>
    </div>
</div>
<div id="navbar-bottom" class="navbar">
    <div class="container">
        
        
        
        
        <div class="row">
            <div class="col-md-3 col-sm-9 col-xs-9">
                <a class="brand" href="/" title="MariaDB">
                    <img src="/kb/static/images/logo-2018-black.95f5978ae14d.png">
                </a>
            </div>
            <div class="col-md-9 hidden-sm hidden-xs">
                <div class="main-menu">
                    <ul id="main-menu" class="nav navbar-nav inline-block-sm">
    <li class="has-sub full-menu">
        <a href="/products" title="Products">Products</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/solutions" title="Solutions">Solutions</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/resources" title="Resources">Resources</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/about-us" title="Company">Company</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/pricing" title="Pricing">Pricing</a>
    </li>
    
    <li class="">
        <a class="button electric-eel small top-bar-right-download" href="/downloads/">Download</a>
    </li>
</ul>
                </div>
            </div>
            <div class="col-md-3 visible-sm visible-xs col-sm-3 col-xs-3 ps-rv">
                <div class="navbar-header text-right pull-right">
                    <button type="button" class="menu-control toggle-menu" id="open-menu">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="main">
    <div class="container">
        

        <div id="subheader1" class="clearfix">
            <div class="pull-left">
                
                <div id="breadcrumbs" class="breadcrumb">
                    <a href="/kb/en/">Knowledge Base</a>
                    


    
    » <a class="crumb" href="/kb/en/documentation/">MariaDB Server Documentation</a>
    

    
    » <a class="crumb" href="/kb/en/using-mariadb-server/">Using MariaDB Server</a>
    

    
    » <a class="crumb" href="/kb/en/sql-statements-structure/">SQL Statements &amp; Structure</a>
    

    
    » <a class="crumb" href="/kb/en/sql-statements/">SQL Statements</a>
    

    
    » <a class="crumb" href="/kb/en/data-manipulation/">Data Manipulation</a>
    

    
    » <a class="crumb" href="/kb/en/server-constraints/">Server Constraints</a>
    


    » <a class="node_link crumb" href="/kb/en/auto_increment-constraints/">AUTO_INCREMENT Constraints</a>


                </div>
                
            </div>
        </div>
    </div>
    <div class="container" id="container-main">
        <div class="row">
            
            
                
                <aside id="sidebar-first" class="sidebar col-md-2 hidden-xs hidden-sm hidden-print">
                    
                        
                        <ul id="category_menu" class="nav nav-pills nav-stacked">
                            <li><a href="/kb/en/">Home</a></li>
                            
                                
                                    <li><a href="/kb/en/+questions/">Open Questions</a></li>
                                
                                <li><a href="/kb/en/documentation/">MariaDB Server</a></li>
                                <li><a href="/kb/en/maxscale/">MariaDB MaxScale</a></li>
                                <li><a href="/kb/en/mariadb-columnstore/">MariaDB ColumnStore</a></li>
                                <li><a href="/kb/en/connectors/">Connectors</a></li>
                            

                        </ul>
                    

                    
<div>



<div class="well well-small box actions"><div>

        <a class="btn btn-block btn-blue btn-sm" href="/kb/en/auto_increment-constraints/+history" rel="nofollow">History</a>
        
        
        
        <a class="btn btn-block btn-blue btn-sm" href="/kb/en/auto_increment-constraints/+source/">Source</a>
        
        <a class="btn btn-block btn-blue btn-sm flag" href="/kb/en/auto_increment-constraints/+flag"
                data-flag-url="/kb/en/auto_increment-constraints/+flag" rel="nofollow">
                Flag as Spam / Inappropriate</a>
        
        <a class="btn btn-block btn-blue btn-sm" href="/kb/en/auto_increment-constraints/+translate/">
                Translate</a>
        

</div>
</div>





<div class="well well-small box node_info"><div>

    <dl>
        <dt>Created</dt>
        <dd>

<span class="datetime" title="2025-02-07 08:15">2 months, 3 weeks ago</span></dd>

        <dt>Modified</dt>
        <dd>

<span class="datetime" title="2025-04-30 14:50">4 days, 18 hours ago</span></dd>

        <dt>Type</dt>
        <dd>article</dd>

        <dt>Status</dt>
        <dd>active</dd>

        <dt>License</dt>
        <dd>
            
                <a href="/kb/en/auto_increment-constraints/+license/">CC BY-SA / Gnu FDL</a>
            
        </dd>

        
    </dl>

    
    <ul class="rss_feeds">
        <li><a href="/kb/en/auto_increment-constraints/+history/feed/">
            History</a>
        </li>
        <li><a href="/kb/en/auto_increment-constraints/+comments/feed/">
            Comments</a>
        </li>
    </ul>
    

</div>
</div>





    
    
    

<div class="well well-small box attachments"><div><div class="edit_link pull-right"><a href="/kb/en/auto_increment-constraints/+edit/attachments/">Edit</a></div><h5>Attachments</h5></div><div>

        
            <div class="no_data">No attachments exist</div>
        
    
</div>
</div>

    



    
    






</div>


                    

































                </aside>
            
            
            
                
            
            
                
            
            <section id="content" class="limited_width col-md-8 clearfix">
                
                    <h1>AUTO_INCREMENT Constraints</h1>
                

                



                <div>
                    
    

    
    
    

    <div class="node creole">
        
        
        


    
    <div class="answer formatted">
        <div class="table_of_contents well well-small">
<h3>Contents</h3>
 <ol class="toc">

 <li class=""><a href="#overview" title="Overview">Overview</a></li>

 <li class=""><a href="#choosing-a-data-type-for-an-auto_increment-column" title="Choosing a Data Type for an AUTO_INCREMENT Column">Choosing a Data Type for an AUTO_INCREMENT Column</a></li>

 <li class=""><a href="#creating-an-innodb-table-with-an-auto_increment-column" title="Creating an InnoDB Table with an AUTO_INCREMENT Column">Creating an InnoDB Table with an AUTO_INCREMENT Column</a></li>

 <li class=""><a href="#inserting-a-row-with-an-auto_increment-column" title="Inserting a Row with an AUTO_INCREMENT Column">Inserting a Row with an AUTO_INCREMENT Column</a> <ol class="toc">

    <li class=""><a href="#omitting-the-column" title="Omitting the Column">Omitting the Column</a></li>

    <li class=""><a href="#specifying-the-columns-value-as-0" title="Specifying the Column&#39;s Value as 0">Specifying the Column&#39;s Value as 0</a></li>

    <li class=""><a href="#specifying-the-columns-value-as-null" title="Specifying the Column&#39;s Value as NULL">Specifying the Column&#39;s Value as NULL</a> </ol>
</li>

 <li class=""><a href="#getting-the-last-inserted-auto_increment-value" title="Getting the Last Inserted AUTO_INCREMENT Value">Getting the Last Inserted AUTO_INCREMENT Value</a></li>

 <li class=""><a href="#choosing-an-auto_increment-lock-mode-for-innodb" title="Choosing an AUTO_INCREMENT Lock Mode for InnoDB">Choosing an AUTO_INCREMENT Lock Mode for InnoDB</a></li>

 <li class=""><a href="#configuring-the-auto_increment-lock-mode-for-innodb" title="Configuring the AUTO_INCREMENT Lock Mode for InnoDB">Configuring the AUTO_INCREMENT Lock Mode for InnoDB</a></li>

 <li class=""><a href="#setting-a-tables-next-auto_increment-value" title="Setting a Table&#39;s Next AUTO_INCREMENT Value">Setting a Table&#39;s Next AUTO_INCREMENT Value</a></li>

 <li class=""><a href="#configure-the-offset-and-increment-values" title="Configure the Offset and Increment Values">Configure the Offset and Increment Values</a></li>
</div>
<h1 class="anchored_heading" id="overview">Overview</h1>
<p>MariaDB Enterprise Server supports <code>AUTO_INCREMENT</code> constraints:</p>
<ul start="1"><li>A column with an <code>AUTO_INCREMENT</code> constraint can act as a table's primary key when a natural primary key is not available
</li><li>Generated values for auto-increment columns are guaranteed to be unique and monotonically increasing
</li><li>Auto-increment columns provide compatibility with schemas designed for MariaDB Enterprise Server and MySQL
</li></ul>
<p>Alternatively, MariaDB Enterprise Server can use <a href="/kb/en/sequence-overview/">sequences</a> as the primary key instead of columns with <code>AUTO_INCREMENT</code> constraints. Sequences are compliant with the SQL standard, while <code>AUTO_INCREMENT</code> constraints are not, so sequences are the better option for applications that require standard-compliant features.</p>
<h1 class="anchored_heading" id="choosing-a-data-type-for-an-auto_increment-column">Choosing a Data Type for an <code>AUTO_INCREMENT</code> Column</h1>
<p>When designing a schema, <code>AUTO_INCREMENT</code> columns should use integer data types. The following types can be used:</p>
<div class="cstm-style darkheader-nospace-borders left"><table><tr><th>Data Type</th><th>Signed Range</th><th>Unsigned Range</th></tr>
<tr><td><a href="data-types-tinyint">TINYINT</a></td><td>-128 - 127</td><td>0 - 255</td></tr>
<tr><td><a href="data-types-smallint">SMALLINT</a></td><td>-32768 - 32767</td><td>0 - 65535</td></tr>
<tr><td><a href="data-types-mediumint">MEDIUMINT</a></td><td>-8388608 - 8388607</td><td>0 - 16777215</td></tr>
<tr><td><a href="data-types-int">INT</a></td><td>-2147483648 - 2147483647</td><td>0 - 4294967295</td></tr>
<tr><td><a href="data-types-bigint">BIGINT</a></td><td>-9223372036854775808 - 9223372036854775807</td><td>0 - 18446744073709551615</td></tr>
</table>
</div><p>To determine which type to use, consider the following points:</p>
<p>1. Do you want to be able to manually insert negative values? If not, then specify the UNSIGNED attribute for the column.</p>
<p>InnoDB can't generate negative <code>AUTO_INCREMENT</code> values, so it is only beneficial to use a signed integer column if you want the option to manually insert negative values, which would bypass the <code>AUTO_INCREMENT</code> handling.</p>
<p>2. How large will your table grow?</p>
<p>If your <code>AUTO_INCREMENT</code> column is being used as the table's primary key, then the maximum value for the chosen data type should be considered the maximum number of rows that can fit in the table:</p>
<div class="cstm-style darkheader-nospace-borders left"><table><tr><th>Data Type</th><th>Signed Range</th><th>Unsigned Range</th></tr>
<tr><td><a href="data-types-tinyint">TINYINT</a></td><td>127</td><td>255</td></tr>
<tr><td><a href="data-types-smallint">SMALLINT</a></td><td>32767</td><td>65535</td></tr>
<tr><td><a href="data-types-mediumint">MEDIUMINT</a></td><td>8388607</td><td>16777215</td></tr>
<tr><td><a href="data-types-int">INT</a></td><td>2147483647</td><td>4294967295</td></tr>
<tr><td><a href="data-types-bigint">BIGINT</a></td><td>9223372036854775807</td><td>18446744073709551615</td></tr>
</table>
</div><p>If you want to give your table the most room to grow, then it would be best to choose BIGINT UNSIGNED.</p>
<h1 class="anchored_heading" id="creating-an-innodb-table-with-an-auto_increment-column">Creating an InnoDB Table with an AUTO_INCREMENT Column</h1>
<p>Let's <a href="/kb/en/auto_increment-constraints/#creating-an-innodb-table-with-an-auto_increment-column">create an InnoDB table with an <code>AUTO_INCREMENT</code> column</a> after confirming that the <a href="/kb/en/server-system-variables/#default_storage_engine">default storage engine</a> is InnoDB:</p>
<p>1. Connect to the server using MariaDB Client:</p>
<pre class="fixed">$ mariadb --user=root

</pre><p>2. Confirm that the default storage engine is InnoDB by checking the <a href="/kb/en/server-system-variables/#default_storage_engine">default_storage_engine system variable</a> using the <a href="/kb/en/show-variables/">SHOW SESSION VARIABLES</a> statement:</p>
<pre class="fixed">SHOW SESSION VARIABLES
   LIKE 'default_storage_engine';
</pre><pre class="fixed">+------------------------+--------+
| Variable_name          | Value  |
+------------------------+--------+
| default_storage_engine | InnoDB |
+------------------------+--------+
</pre><p>3. If the database does not exist, then create the database for the table using the <a href="%5B%5Bcreate-database">CREATE DATABASE</a> statement:</p>
<pre class="fixed">CREATE DATABASE hq_sales;
</pre><p>4. Create the table using the <a href="/kb/en/create-table/">CREATE TABLE</a> statement:</p>
<pre class="fixed">CREATE TABLE hq_sales.invoices (
   invoice_id BIGINT UNSIGNED AUTO_INCREMENT NOT NULL,
   branch_id INT NOT NULL,
   customer_id INT,
   invoice_date DATETIME(6),
   invoice_total DECIMAL(13, 2),
   payment_method ENUM('NONE', 'CASH', 'WIRE_TRANSFER', 'CREDIT_CARD', 'GIFT_CARD'),
   PRIMARY KEY(invoice_id)
);

</pre><h1 class="anchored_heading" id="inserting-a-row-with-an-auto_increment-column">Inserting a Row with an AUTO_INCREMENT Column</h1>
<p>If a column is specified as <code>AUTO_INCREMENT</code>, then its value will be automatically generated. There are multiple ways to insert rows with these automatically generated values.</p>
<h2 class="anchored_heading" id="omitting-the-column">Omitting the Column</h2>
<p>If the column is not specified, then InnoDB will automatically generate the value.</p>
<p>Let's insert a row into the table created in the <a href="/kb/en/auto_increment-constraints/#creating-an-innodb-table-with-an-auto_increment-column">Creating an InnoDB Table with an AUTO_INCREMENT Column</a> section:</p>
<p>1. Connect to the server using MariaDB Client:</p>
<pre class="fixed">$ mariadb --user=root

</pre><p>2. Insert a row with the <a href="/kb/en/insert/">INSERT</a> statement, but do not specify the <code>AUTO_INCREMENT</code> column:</p>
<pre class="fixed">INSERT INTO hq_sales.invoices
   (branch_id, customer_id, invoice_date, invoice_total, payment_method)
VALUES
   (1, 1, '2020-05-10 12:35:10', 1087.23, 'CREDIT_CARD');

</pre><p>3. Select the same row with the <a href="/kb/en/select/">SELECT</a> statement to confirm that a value was automatically generated:</p>
<pre class="fixed">SELECT invoice_id
FROM hq_sales.invoices
WHERE branch_id = 1
AND customer_id = 1
AND invoice_date = '2020-05-10 12:35:10';

</pre><pre class="fixed">+------------+
| invoice_id |
+------------+
|          1 |
+------------+

</pre><h2 class="anchored_heading" id="specifying-the-columns-value-as-0">Specifying the Column's Value as 0</h2>
<p>If the column's value is specified as 0, then InnoDB will automatically generate the value if the <a href="/kb/en/sql-mode/">sql_mode</a> system variable does not contain <code>NO_AUTO_VALUE_ON_ZERO</code>.</p>
<p>Let's insert a row into the table created in the <a href="/kb/en/auto_increment-constraints/#creating-an-innodb-table-with-an-auto_increment-column">Creating an InnoDB Table with an <code>AUTO_INCREMENT</code> Column</a> section:</p>
<p>1. Connect to the server using MariaDB Client:</p>
<pre class="fixed">$ mariadb --user=root

</pre><p>2. Confirm that the session's value of the sql_mode system variable does not contain 
NO_AUTO_VALUE_ON_ZERO with the <a href="/kb/en/show-variables/">SHOW SESSION VARIABLES</a> statement:</p>
<pre class="fixed">SHOW SESSION VARIABLES
   LIKE 'sql_mode';
</pre><pre class="fixed">+---------------+-------------------------------------------------------------------------------------------+
| Variable_name | Value                                                                                     |
+---------------+-------------------------------------------------------------------------------------------+
| sql_mode      | STRICT_TRANS_TABLES,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION |
+---------------+-------------------------------------------------------------------------------------------+

</pre><p>3. Insert a row with the <a href="/kb/en/insert/">INSERT</a> statement, and specify the <code>AUTO_INCREMENT</code> column's value as 0:</p>
<pre class="fixed">INSERT INTO hq_sales.invoices
   (invoice_id, branch_id, customer_id, invoice_date, invoice_total, payment_method)
VALUES
   (0, 1, 2, '2020-05-10 14:17:32', 1508.57, 'WIRE_TRANSFER');

</pre><p>4. Select the same row with the <a href="/kb/en/select/">SELECT</a> statement to confirm that a value was automatically generated:</p>
<pre class="fixed">SELECT invoice_id
FROM hq_sales.invoices
WHERE branch_id = 1
AND customer_id = 2
AND invoice_date = '2020-05-10 14:17:32';

</pre><pre class="fixed">+------------+
| invoice_id |
+------------+
|          2 |
+------------+

</pre><h2 class="anchored_heading" id="specifying-the-columns-value-as-null">Specifying the Column's Value as NULL</h2>
<p>If the column's value is specified as NULL, then InnoDB will automatically generate the value if the column is defined as NOT NULL.</p>
<p>Let's insert a row into the table created in the <a href="/kb/en/auto_increment-constraints/#creating-an-innodb-table-with-an-auto_increment-column">Creating an InnoDB Table with an <code>AUTO_INCREMENT</code> Column</a> section:</p>
<p>1. Connect to the server using MariaDB Client:</p>
<pre class="fixed">$ mariadb --user=root
</pre><p>2. Insert a row with the <a href="/kb/en/insert/">INSERT</a> statement, and specify the <code>AUTO_INCREMENT</code> column's value as NULL:</p>
<pre class="fixed">INSERT INTO hq_sales.invoices
   (invoice_id, branch_id, customer_id, invoice_date, invoice_total, payment_method)
VALUES
   (NULL, 1, 3, '2020-05-10 14:25:16', 227.15, 'CASH');
</pre><p>3. Select the same row with the <a href="/kb/en/select/">SELECT</a> statement to confirm that a value was automatically generated:</p>
<pre class="fixed">SELECT invoice_id
FROM hq_sales.invoices
WHERE branch_id = 1
AND customer_id = 3
AND invoice_date = '2020-05-10 14:25:16';
</pre><pre class="fixed">+------------+
| invoice_id |
+------------+
|          3 |
+------------+
</pre><h1 class="anchored_heading" id="getting-the-last-inserted-auto_increment-value">Getting the Last Inserted AUTO_INCREMENT Value</h1>
<p>After InnoDB inserts an automatically generated value into an <code>AUTO_INCREMENT</code> column, the application sometimes needs to know what value it inserted. For example, the application may need to use the value to insert a foreign key column in a dependent table. The <a href="/kb/en/last_insert_id/">LAST_INSERT_ID()</a> function can be used to get the lasted inserted value for an <code>AUTO_INCREMENT</code> column without re-reading the row from the table.</p>
<p>Let's insert a row into the table created in the <a href="/kb/en/auto_increment-constraints/#creating-an-innodb-table-with-an-auto_increment-column">Creating an InnoDB Table with an <code>AUTO_INCREMENT</code> Column</a> section and then use the <a href="/kb/en/last_insert_id/">LAST_INSERT_ID()</a> function:</p>
<p>1. Connect to the server using MariaDB Client:</p>
<pre class="fixed">$ mariadb --user=root
</pre><p>2. Insert a row with the <a href="/kb/en/insert/">INSERT</a> statement, but do not specify the <code>AUTO_INCREMENT</code> column:</p>
<pre class="fixed">INSERT INTO hq_sales.invoices
   (branch_id, customer_id, invoice_date, invoice_total, payment_method)
VALUES
   (1, 4, '2020-05-10 12:37:22', 104.19, 'CREDIT_CARD');
</pre><p>3. Execute the <a href="/kb/en/last_insert_id/">LAST_INSERT_ID()</a> function to get the <code>AUTO_INCREMENT</code> value for the new row:</p>
<pre class="fixed">SELECT LAST_INSERT_ID();

+------------------+
| LAST_INSERT_ID() |
+------------------+
|                4 |
+------------------+

</pre><p>4. Select the same row with the <a href="/kb/en/select/">SELECT</a> statement to confirm that the <code>AUTO_INCREMENT</code> column has the same value:</p>
<pre class="fixed">SELECT invoice_id
FROM hq_sales.invoices
WHERE branch_id = 1
AND customer_id = 4
AND invoice_date = '2020-05-10 12:37:22';

</pre><pre class="fixed">
+------------+
| invoice_id |
+------------+
|          4 |
+------------+

</pre><h1 class="anchored_heading" id="choosing-an-auto_increment-lock-mode-for-innodb">Choosing an AUTO_INCREMENT Lock Mode for InnoDB</h1>
<p>When multiple rows are inserted into a table concurrently, InnoDB needs to be able to generate multiple values concurrently in a safe manner. It has several different modes that can be used to do this, and each mode has its own advantages and disadvantages.</p>
<p>InnoDB's <code>AUTO_INCREMENT</code> lock mode is configured with the <a href="/kb/en/innodb-system-variables/#innodb_autoinc_lock_mode">innodb_autoinc_lock_mode</a> system variable. Users can choose between 3 different values:</p>
<div class="cstm-style darkheader-nospace-borders left"><table><tr><th>Value</th><th>Description</th></tr>
<tr><td>0</td><td><br>• This value configures Traditional Lock Mode. <br>• Don't use traditional lock mode. <br>• Traditional lock mode performs very poorly. <br>• In traditional lock mode, InnoDB holds a table-level lock while generating <code>AUTO_INCREMENT</code> values.</td></tr>
<tr><td>1</td><td><br>• This value configures Consecutive Lock Mode. <br>• Consecutive lock mode is the default lock mode. <br>• In consecutive lock mode, InnoDB holds a table-level lock while generating <code>AUTO_INCREMENT</code> values for statements that insert multiple new rows. However, InnoDB uses a lightweight internal lock to improve performance when generating an <code>AUTO_INCREMENT</code> value for statements that insert a single new row.</td></tr>
<tr><td>2</td><td><br>• This value configures Interleaved Lock Mode. <br>• Interleaved lock mode is the recommended lock mode for best performance. <br>• If Galera Cluster is being used, then interleaved lock mode must be configured.</td></tr>
</table>
<p><br>• In interleaved lock mode, InnoDB never holds a table-level lock while generating <code>AUTO_INCREMENT</code> values. <br>• Interleaved lock mode is not safe to use if binlog_format is set to <code>STATEMENT</code>.|</p>
</div><h1 class="anchored_heading" id="configuring-the-auto_increment-lock-mode-for-innodb">Configuring the AUTO_INCREMENT Lock Mode for InnoDB</h1>
<p>The <a href="/kb/en/innodb-system-variables/#innodb_autoinc_lock_mode">innodb_autoinc_lock_mode</a> system variable configures the <code>AUTO_INCREMENT</code> Lock Mode for InnoDB.</p>
<p>1. Choose a configuration file for custom changes to system variables and options.</p>
<p>It is not recommended to make custom changes to Enterprise Server's default configuration files, because your custom changes can be overwritten by other default configuration files that are loaded after.</p>
<p>Ensure that your custom changes are read last by creating a custom configuration file in one of the included directories. Configuration files in included directories are read in alphabetical order. Use the z- prefix in the file name to ensure that your custom configuration file is read last.</p>
<p>Some example configuration file paths for different distributions are shown in the following table:</p>
<div class="cstm-style darkheader-nospace-borders left"><table><tr><th>Distributions</th><th>Example configuration file path</th></tr>
<tr><td>CentOS <br>RHEL <br>Rocky Linux <br>SLES</td><td>/etc/my.cnf.d/z-custom-mariadb.cnf</td></tr>
<tr><td>Debian <br>Ubuntu</td><td>/etc/mysql/mariadb.conf.d/z-custom-mariadb.cnf</td></tr>
</table>
</div><p>2. Set the <a href="/kb/en/innodb-system-variables/#innodb_autoinc_lock_mode">innodb_autoinc_lock_mode</a> system variable in the configuration file.
It needs to be set in a group that will be read by MariaDB Server, such as [mariadb] or [server].</p>
<p>For example:</p>
<pre class="fixed">[mariadb]
...
innodb_autoinc_lock_mode = 2

</pre><p>3. Restart the server:</p>
<pre class="fixed">$ sudo systemctl restart mariadb
</pre><h1 class="anchored_heading" id="setting-a-tables-next-auto_increment-value">Setting a Table's Next AUTO_INCREMENT Value</h1>
<p>A table's next <code>AUTO_INCREMENT</code> value can be set with the <a href="/kb/en/alter-table/">ALTER TABLE</a> statement. The value is set using the <code>AUTO_INCREMENT</code> table option.</p>
<p>Let's alter the <code>AUTO_INCREMENT</code> value for the table created in the <a href="/kb/en/auto_increment-constraints/#creating-an-innodb-table-with-an-auto_increment-column">Creating an InnoDB Table with an <code>AUTO_INCREMENT</code> Column</a> section and then insert a row into the table, so we can confirm that it uses the new value:</p>
<p>1. Connect to the server using MariaDB Client:</p>
<pre class="fixed">$ mariadb --user=root

</pre><p>2. Alter the table's next <code>AUTO_INCREMENT</code> value with the <a href="/kb/en/alter-table/">ALTER TABLE</a> statement:</p>
<pre class="fixed">ALTER TABLE hq_sales.invoices
   AUTO_INCREMENT = 100;
</pre><p>3. Insert a row with the <a href="/kb/en/insert/">INSERT</a> statement, but do not specify the <code>AUTO_INCREMENT</code> column:</p>
<pre class="fixed">INSERT INTO hq_sales.invoices
   (branch_id, customer_id, invoice_date, invoice_total, payment_method)
VALUES
   (1, 5, '2020-05-10 12:43:19', 1105.98, 'CREDIT_CARD');

</pre><p>4. Execute the <a href="/kb/en/last_insert_id/">LAST_INSERT_ID()</a> function to get the <code>AUTO_INCREMENT</code> value for the new row:</p>
<pre class="fixed">SELECT LAST_INSERT_ID();

+------------------+
| LAST_INSERT_ID() |
+------------------+
|              100 |
+------------------+

</pre><p>5. Select the same row with the <a href="/kb/en/select/">SELECT</a> statement to confirm that the <code>AUTO_INCREMENT</code> column has the same value:</p>
<pre class="fixed">
SELECT invoice_id
FROM hq_sales.invoices
WHERE branch_id = 1
AND customer_id = 5
AND invoice_date = '2020-05-10 12:43:19';

+------------+
| invoice_id |
+------------+
|        100 |
+------------+

</pre><h1 class="anchored_heading" id="configure-the-offset-and-increment-values">Configure the Offset and Increment Values</h1>
<p>The offset and increment values can be configured by setting the <a href="/kb/en/auto_increment-constraints/#configure-the-offset-and-increment-values">auto_increment_offset and auto_increment_increment</a> system variables.</p>
<p>When Galera Cluster is used, the offset and increment values are managed automatically by default. They can be managed manually by disabling the <a href="/kb/en/galera-cluster-system-variables/#wsrep_auto_increment_control">wsrep_auto_increment_control</a> system variable.</p>

    </div>


        
            <div id="subscribe" class="well well-small hide hidden-print"
                 data-subscribe-url="/kb/en/auto_increment-constraints/+subscriptions/add"
                 data-unsubscribe-url="/kb/en/auto_increment-constraints/+subscriptions/remove">
            </div>
        

        
        
    
        <div class="simple_section_nav">
            <ul class="nav nav-pills">
                
                
                    <li><a href="/kb/en/server-constraints/">
                        ↑ Server Constraints ↑
                    </a>
                    </li>
                
                
                    <li class="pull-right"><a href="/kb/en/foreign-key-constraints-with-mariadb-enterprise-server/">
                        FOREIGN KEY Constraints with MariaDB Enterprise Server →
                    </a>
                    </li>
                
            </ul>
        </div>
    

        

        
        <h2>Comments</h2>
        
    
    <div id="comments" data-node-id="15651" data-comments-url="/kb/en/auto_increment-constraints/+comments"
         data-reply-url="/kb/en/auto_increment-constraints/comments/post/">
        Comments loading...
    </div>

        

    </div>


                    <div id="content_disclaimer" class="graybox">
                        Content reproduced on this site is the property of its respective owners,
                        and this content is not reviewed in advance by MariaDB. The views, information and opinions
                        expressed by this content do not necessarily represent those of MariaDB or any other party.
                    </div>
                </div>
            </section>

            
                <div id="right_bar" class="col-md-2">
                    
    
        
        <ul class="section_navigation well well-small hidden-xs hidden-sm">
            
                <li class="parent"><a href="/kb/en/server-constraints/">
                    ↑ Server Constraints ↑
                </a>
                </li>
            
            
                
                    <li class="active">
                        <span>AUTO_INCREMENT Constraints</span>
                        
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/foreign-key-constraints-with-mariadb-enterprise-server/">
                            
                            FOREIGN KEY Constraints with MariaDB Enterprise Server
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/not-null-constraints-with-mariadb-enterprise-server/">
                            
                            NOT NULL Constraints with MariaDB Enterprise Server
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/primary-key-constraints-with-mariadb-enterprise-server/">
                            
                            PRIMARY KEY Constraints with MariaDB Enterprise Server
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/unique-constraints-with-mariadb-enterprise-server/">
                            
                            UNIQUE Constraints with MariaDB Enterprise Server
                        </a>
                    </li>
                
            
        </ul>
    
    

                </div>
            
        </div>
    </div>
</div>

<!-- Footer -->
<footer id="footer">
    <div class="footer">
        <div class="container">
            <div class="row">
                <div class="col-xs-12">
                    <ul class="list-inline text-center footer-nav">
                        <li>
                            <h5>
                                <a href="https://mariadb.com/products" title="Products">Products</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/solutions" title="Solutions">Solutions</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/resources" title="Resources">Resources</a>
                            </h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/about-us" title="About MariaDB">Company</a></h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/pricing" title="Pricing">Pricing</a>
                            </h5>
                        </li>
                        
                        
                        <li>
                            <h5><a href="https://mariadb.com/downloads" title="Download">Download MariaDB</a></h5>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="row row-10">
                
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div id="block-footerformcontact" class="block block-block-content block-block-contentd754ee1b-3cc9-40e7-9ef4-f504f1197fb1">
                        
                            <h5 style="font-weight: 400;">Subscribe to our newsletter!</h5>
                            <script src="//app-sj15.marketo.com/js/forms2/js/forms2.min.js"></script><form id="mktoForm_1498"></form>
                            <script>
                                <!--//--><![CDATA[// ><!--
                                MktoForms2.loadForm("//app-sj15.marketo.com", "573-PXI-984", 1498);
                                //--><!]]]]><![CDATA[>
                                //--><!]]>
                            </script>
                        
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div class="footer-copyright">
                        <div class="text-center">
                            <ul class="list-inline no-margin">
                                <li>
                                    <a href="/legal" title="Legal">Legal</a>
                                </li>
                                <li>
                                    <a href="/privacy-policy" title="Privacy Policy">Privacy Policy</a>
                                </li>
                                <li>
                                    <a href="/cookie-policy/" title="Cookies">Cookie Policy</a>
                                </li>
                            </ul>
                            <p>Copyright &copy; 2025 MariaDB. All rights reserved.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
</footer>
</div>

<div id="ajax_loading">
    <img src="/kb/static/images/ajax-loader.a51c5608d01a.gif" />
</div>

    <!-- Google Tag Manager -->
    <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-MK2847"
                      height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
            '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MK2847');</script>
    <!-- End Google Tag Manager -->

</body>

<script type="text/javascript" src="/kb/static/js/main.1587e3a666fc.js" charset="utf-8"></script>

</html>