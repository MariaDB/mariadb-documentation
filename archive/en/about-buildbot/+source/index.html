<!DOCTYPE html>
<html>
<head data-cookie-domain=""
      data-cookie-path="/">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="apple-touch-icon" sizes="180x180" href="/kb/static/images/favicons/apple-touch-icon.159e713979be.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/kb/static/images/favicons/favicon-32x32.bc0ac1d5d11e.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/kb/static/images/favicons/favicon-16x16.5801f8f0f34e.png">
    <link rel="shortcut icon" href="/kb/static/images/favicons/favicon.d122d305dee4.ico" type="image/x-icon" />

    <title>About Buildbot - Source - MariaDB Knowledge Base</title>

    <link href="/kb/static/css/main.b9e1e104f007.css" rel="stylesheet" type="text/css" />

    
        <meta name="robots" content="noindex, nofollow">
    

    <!-- FB Open Graph tags -->
    <meta property="og:title" content="About Buildbot - Source" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://mariadb.com/kb/en/about-buildbot/+source/" />
    <meta property="og:image" content="http://mariadb.comaskmonty-logo.png" />
    <meta property="og:site_name" content="MariaDB KnowledgeBase" />
    <meta property="fb:admins" content="514852603" />
    <meta property="og:description" content="" />

    <meta name="description" content="" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="//fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet"/>
    
</head>
<body class="mpkb nodes autoresize nodes_source jqui" id="nodes_source">





<div id="menu-mobile" class="visible-sm visible-xs">

    <div>
        <div id="mobile-close-menu" class="text-right">
            <a href="javascript:void(0)" title="Close Menu" id="back-main" class="toggle-menu">X<span></span></a>
        </div>
    </div>
    <div class="mainmenu-mobile">
        <ul class="ls-none ul-menu">
            <li data-sub="submenu5"><a class="open-form-search" href="/kb/search/" title="Search">Search </a></li>
            <li data-sub="submenu0"><a href="/products" title="Products">Products</a><span class="arrow-main"></span></li>
            <li data-sub="submenu1"><a href="/services" title="Services">Services</a><span class="arrow-main"></span></li>
            <li data-sub="submenu2"><a href="/resources" title="Resources">Resources</a><span class="arrow-main"></span></li>
            <li data-sub="submenu3"><a href="/about-us" title="About">About</a><span class="arrow-main"></span></li>
            <li data-sub="submenu4"><a href="/contact" title="Contact">Contact</a></li>
        </ul>
    </div>

    <div class="nav-top-mobile">
        <div class="select-box form">

            <ul class="inline-block-md mb-none top-nav">
                <li>

                </li>
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/about-buildbot/+source/"> Login</a>
                    </li>
                
            </ul>



        </div>
        <p class="text-center copyright">Copyright &copy; 2024 MariaDB. All rights reserved.</p>
    </div>
</div>
<div id="wrapper">
<div id="top-nav">
    <div class="container">
        <ul class="hidden-sm hidden-xs" >
            <li><a href="https://mariadb.com/kb/">Knowledge Base</a></li>
            <li><a href="https://mariadb.com/contact/">Contact</a></li>
            
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/about-buildbot/+source/" rel="nofollow">Login</a>
                    </li>
                
            
            
            <li id="search-form">
                <form action="/kb/en/+search/" method="get" id="search-block-form" accept-charset="UTF-8">
                    <input id="search" title="Enter the terms you wish to search for."
                           placeholder="Search . . ." type="text"
                           name="q" value="" size="15" maxlength="128" class="form-text"
                           data-autocomplete-url="/kb/en/+search/autocomplete/">
                    <input type="hidden" name="quick" value="1" />
                    <input type="hidden" name="source" value="kb" />
                </form>
            </li>
            <li><a id="search-toggler" href="/kb/search/">Search</a></li>
            
        </ul>
    </div>
</div>
<div id="navbar-bottom" class="navbar">
    <div class="container">
        
        
        
        
        <div class="row">
            <div class="col-md-3 col-sm-9 col-xs-9">
                <a class="brand" href="/" title="MariaDB">
                    <img src="/kb/static/images/logo-2018-black.95f5978ae14d.png">
                </a>
            </div>
            <div class="col-md-9 hidden-sm hidden-xs">
                <div class="main-menu">
                    <ul id="main-menu" class="nav navbar-nav inline-block-sm">
    <li class="has-sub full-menu">
        <a href="/products" title="Products">Products</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/services" title="Services">Services</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/pricing" title="Pricing">Pricing</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/resources" title="Resources">Resources</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/about-us" title="About Us">About Us</a>
    </li>
    <li class="">
        <a class="button electric-eel small top-bar-right-download" href="/downloads/">Download</a>
    </li>
</ul>
                </div>
            </div>
            <div class="col-md-3 visible-sm visible-xs col-sm-3 col-xs-3 ps-rv">
                <div class="navbar-header text-right pull-right">
                    <button type="button" class="menu-control toggle-menu" id="open-menu">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="main">
    <div class="container">
        

        <div id="subheader1" class="clearfix">
            <div class="pull-left">
                
                <div id="breadcrumbs" class="breadcrumb">
                    <a href="/kb/en/">Knowledge Base</a>
                    


    
    » <a class="crumb" href="/kb/en/training-tutorials/">Training &amp; Tutorials</a>
    

    
    » <a class="crumb" href="/kb/en/advanced-mariadb-articles/">Advanced MariaDB Articles</a>
    

    
    » <a class="crumb" href="/kb/en/development-articles/">Development Articles</a>
    

    
    » <a class="crumb" href="/kb/en/tools/">MariaDB Development Tools</a>
    

    
    » <a class="crumb" href="/kb/en/buildbot/">Buildbot</a>
    


    » <a class="node_link crumb" href="/kb/en/about-buildbot/">About Buildbot</a>


                </div>
                
            </div>
        </div>
    </div>
    <div class="container" id="container-main">
        <div class="row">
            
            
                
                <aside id="sidebar-first" class="sidebar col-md-2 hidden-xs hidden-sm hidden-print">
                    
                        
                        <ul id="category_menu" class="nav nav-pills nav-stacked">
                            <li><a href="/kb/en/">Home</a></li>
                            
                                
                                    <li><a href="/kb/en/+questions/">Open Questions</a></li>
                                
                                <li><a href="/kb/en/documentation/">MariaDB Server</a></li>
                                <li><a href="/kb/en/maxscale/">MariaDB MaxScale</a></li>
                                <li><a href="/kb/en/mariadb-columnstore/">MariaDB ColumnStore</a></li>
                                <li><a href="/kb/en/connectors/">Connectors</a></li>
                            

                        </ul>
                    

                    
                        <div>
    

<div class="well well-small box actions"><div>

        <a class="btn btn-block btn-small" href="/kb/en/about-buildbot/">Return to article</a>
    
</div>
</div>

</div>
                    

                    

































                </aside>
            
            
            
                
            
            
            <section id="content" class="limited_width col-md-10 clearfix">
                
                    <h1>About Buildbot - Source</h1>
                

                



                <div>
                    

    

    
    <div class="revision_info">
        <dl class="table">
            <dt>Revision</dt>
            <dd><a href="/kb/en/about-buildbot/+r/127320/">127320</a></dd>
            <dt>User</dt>
            <dd>
<span class="user" id="user-2">
<a href="/kb/user/id/2" title="Daniel Bartholomew">Daniel Bartholomew</a>
</span></dd>
            <dt>Date</dt>
            <dd>

<span class="datetime" title="2023-06-19 12:44">2023-06-19 12:44</span></dd>
        </dl>
    </div>
    


    

    
        
        <textarea id="answer_source" class="creole_source autogrow">&lt;&lt;toc&gt;&gt;

== Overview
The goal of MariaDB Foundation Buildbot is to ensure that the MariaDB Server is being thoroughly tested on all supported platforms and environments. We are currently running 100 different configurations for the following platforms:
* x64 and x86
* aarch64
* ppc64le
* s390x

and operating systems:
* Debian 9, 10, 11 and Sid
* Ubuntu 16.04, 18.04, 20.04 and 21.04
* Fedora 33 and 34
* CentOS 7 and 8
* RHEL 7 and 8
* SLES 12 and 15
* OpenSUSE 15 and 42
* Windows
* AIX-7.2

Moreover, we run other ecosystem tests for:
* PHP
* DBdeployer
* MySqlJS
* PyMySQL

Packages built by buildbot can be downloaded from [[https://ci.mariadb.org/|here]].

== What is Buildbot?
The MariaDB Foundation uses Buildbot, a continuous integration and testing framework to test and create MariaDB Server packages. It is hosted on https://buildbot.mariadb.org/ and ensures that each push to the MariaDB Server GitHub repository is properly tested.

== Who uses Buildbot?
Buildbot should be used by each MariaDB developer to ensure that the new changes that are made are properly tested on all supported platforms and environments. In order to enforce this, Buildbot is used for [[https://mariadb.com/kb/en/branch-protection-using-buildbot/|branch protection]]. However, even though branch protection is enabled, **only a selected few** builders are part of it. So, it is the developer&#39;s responsibility to monitor all the builders and make sure that everything is fine before making the final push to the main MariaDB branch.

== Buildbot keywords

* Changes/Repository - Any change that occurs in the source code (commit)
* Build Master - The main process that runs on a dedicated machine. It checks for changes in the source code and is in charge of scheduling builds 
* Build - The actual configuration that is tested. It consists of a sequence of steps that define the actual test (e.g. get source code, compile, run tests, etc)
* Buildbot Worker - The process which waits for commands from the Build Master in order to run a build

== How does the Buildbot work?

&lt;&lt;image slug=buildbot_schematic width=800 alt=&#34;Buildbot overview&#34;&gt;&gt;


As it comes to the Buildbot Master, we use a multi-master configuration. This means that we have multiple running master processes. So, we have a dedicated master for the user interface and several other that deal with looking for changes and scheduling builds.

Each time a push is made to the MariaDB Server Repository, it is detected by the buildbot master which schedules all the builds. Each build defines a different test configuration. We mainly use Docker Latent Workers which means that for each build, the master starts a Docker container on a remote machine. The container is configured to run the buildbot-worker process on startup. This process can now receive instructions from the master. In this way, by using latent workers there isn’t a buildbot-worker process continuously running on the worker machine. Instead, for each build a separate container is started.

Below, you can find a detailed step by step overview of what happens after a push is made to the MariaDB Server repository:
* Step 1: Detect a new change in the MariaDB Server repository
** Trigger source tarball creation
* Step 2: Tarball creation
** Clone the repository and create a source tarball corresponding to the latest changes
**Trigger bintar builds
* Step 3: Bintar builds
** Fetch the source tarball previously created
** Compile
** Test (mysql-test-run)
** Save bintar
** Trigger package creation builds
** Trigger ecosystem builds
* Step 4.1: Package creation
** Fetch source
** Create packages
** Save packages
** Trigger installation builds
* Step 4.2: Ecosystem tests
* Step 5: Installation builds
** Fetch packages
** Test if they install successfully
** Trigger upgrade builds
* Step 6: Upgrade builds
** Test if the previously MariaDB Server version can be successfully upgraded to the current one




&lt;&lt;include slug=&#34;buildbot-old&#34;&gt;&gt;

== Overview 

The current state of the MariaDB trees with respect to build or test failures
is always available from the
[[http://buildbot.askmonty.org/buildbot/|Buildbot setup]] page.

* [[http://buildbot.askmonty.org/buildbot/waterfall?branch=5.5|MariaDB-5.5 waterfall status page.]]
* [[http://buildbot.askmonty.org/buildbot/waterfall?branch=10.0|MariaDB-10.0 waterfall status page.]]
* [[http://buildbot.askmonty.org/buildbot/waterfall?branch=10.1|MariaDB-10.1 waterfall status page.]]

The BuildBot setup polls the Launchpad trees every 5 minutes for
changes. Whenever a new push is found in one of our trees, the new
code is compiled and run through the test suite.

If all platforms are green after this, everything is good. If not, it
means there is a problem with the push, and someone needs to look into
it ASAP. If it was your push, then the someone who needs to look at it
is you!

BuildBot is a generic, GPL&#39;ed program providing a continuous
integration test framework. For more information on BuildBot, see the
[[http://buildbot.net/trac|the BuildBot project homepage]].

== Volunteering to Run a Build Slave

Many of our build hosts are run by [[community]] members, and we are always
looking for additional volunteers to help us cover additional platforms or
build options in BuildBot.

If you are able to provide a spare machine for this purpose, your help is
greatly appreciated! This is a good way to get involved without having to spend
a lot of time on it. Get started by writing an email to &#39;developers (at)
lists.mariadb.org&#39; with an offer to run a BuildBot slave.

== Setting up the Slave BuildBot

See [[buildbot-setup]].

=== Pausing mysql-test-run.pl

Sometimes you need to work when your computer is busy running tests
for buildbot. We&#39;ve added a new feature to the mysql-test-run.pl
script which allows you to stop it temporarily so you can use your
computer and then restart the tests when you&#39;re ready.

To do this, define the environment variable &#34;MTR_STOP_FILE&#34;. Whenever
the file specified by this environment variable exists, the
mysql-test-run.pl script will stop as soon as it is able to do so
(i.e. it won&#39;t stop immediately). When the file is removed, the
mysql-test-run.pl script will continue from where it left off.

If you plan on using this feature you should also set the
&#34;MTR_STOP_KEEP_ALIVE&#34; environment variable with a value of 120. This
will make the script print messages to buildbot every 2 minutes which
will prevent a timeout.

== Database with Test Results

Buildbot saves the results of test runs in a database, to be used for
enhanced reporting on web pages without need to change the Buildbot
code, and for data mining when investigating test failures.

The database schema is documented under [[Buildbot Database Schema]].
The schema is likely to evolve as we gradually add more kinds of
information.

For now, the data is not externally available. But the plan is to set
up a slave database to replicate the data, and provide access (eg.
remote database accounts) to members of the community with interesting
ideas about how to present or mine this data, or who are just curious
to play with it. If anyone has an interest in this, or wants to
volunteer a slave host for this purpose, please send a mail to
[[mailto:developers@lists.mariadb.org|developers@lists.mariadb.org]].
The more people show interest in this, the faster it is likely to happen!

== Reports

We are developing new reports fed off the test results in the
database. These reports will be located
[[http://buildbot.askmonty.org/buildbot/reports/|here]]. The first
report is the
[[http://buildbot.askmonty.org/buildbot/reports/cross_reference|Cross Reference]]
report. This report allows all test failures to be searched.

== Buildbot Maintenance

Here is some information on how our Buildbot installation is set up
and maintained:

* The configuration file is included in the
  [[https://github.com/MariaDB/mariadb.org-tools|Tools for MariaDB]] repository.
* The building and testing of binary packages is documented on the
  [[package-testing-with-buildbot-and-kvm]] page.
* We developed a small tool, [[Buildbot runvm|runvm]], which is used to do some
  of the builds inside a virtual machine, mostly to test builds of binary
  packages.
* The [[BuildBot Development]] page describes how we developed some of the
  enhancements to BuildBot that we use and have contributed upstream.

== See Also

* The [[buildbot-todo|Buildbot ToDo]] page</textarea>
    


                    <div id="content_disclaimer" class="graybox">
                        Content reproduced on this site is the property of its respective owners,
                        and this content is not reviewed in advance by MariaDB. The views, information and opinions
                        expressed by this content do not necessarily represent those of MariaDB or any other party.
                    </div>
                </div>
            </section>

            
        </div>
    </div>
</div>

<!-- Footer -->
<footer id="footer">
    <div class="footer">
        <div class="container">
            <div class="row">
                <div class="col-xs-12">
                    <ul class="list-inline text-center footer-nav">
                        <li>
                            <h5>
                                <a href="https://mariadb.com/products" title="Products">Products</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/services" title="Services">Services</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/pricing" title="Pricing">Pricing</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/resources" title="Resources">Resources</a>
                            </h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/about-us" title="About MariaDB">About Us</a></h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/download" title="Download">Download MariaDB</a></h5>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="row row-10">
                
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div id="block-footerformcontact" class="block block-block-content block-block-contentd754ee1b-3cc9-40e7-9ef4-f504f1197fb1">
                        
                            <h5 style="font-weight: 400;">Subscribe to our newsletter!</h5>
                            <script src="//app-sj15.marketo.com/js/forms2/js/forms2.min.js"></script><form id="mktoForm_1498"></form>
                            <script>
                                <!--//--><![CDATA[// ><!--
                                MktoForms2.loadForm("//app-sj15.marketo.com", "573-PXI-984", 1498);
                                //--><!]]]]><![CDATA[>
                                //--><!]]>
                            </script>
                        
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div class="footer-copyright">
                        <div class="text-center">
                            <ul class="list-inline no-margin">
                                <li>
                                    <a href="/legal" title="Legal">Legal</a>
                                </li>
                                <li>
                                    <a href="/privacy-policy" title="Privacy Policy">Privacy Policy</a>
                                </li>
                                <li>
                                    <a href="/cookie-policy/" title="Cookies">Cookie Policy</a>
                                </li>
                            </ul>
                            <p>Copyright &copy; 2024 MariaDB. All rights reserved.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
</footer>
</div>

<div id="ajax_loading">
    <img src="/kb/static/images/ajax-loader.a51c5608d01a.gif" />
</div>

    <!-- Google Tag Manager -->
    <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-MK2847"
                      height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
            '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MK2847');</script>
    <!-- End Google Tag Manager -->

</body>

<script type="text/javascript" src="/kb/static/js/main.fed4ec768178.js" charset="utf-8"></script>

</html>