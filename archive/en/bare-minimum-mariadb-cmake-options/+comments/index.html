



<!DOCTYPE html>
<html>
<head data-cookie-domain=""
      data-cookie-path="/">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="apple-touch-icon" sizes="180x180" href="/kb/static/images/favicons/apple-touch-icon.159e713979be.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/kb/static/images/favicons/favicon-32x32.bc0ac1d5d11e.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/kb/static/images/favicons/favicon-16x16.5801f8f0f34e.png">
    <link rel="shortcut icon" href="/kb/static/images/favicons/favicon.d122d305dee4.ico" type="image/x-icon" />

    <title>
Comments - Bare-minimum MariaDB &#34;cmake&#34; options?
 - MariaDB Knowledge Base</title>

    <link href="/kb/static/css/main.f7633538c846.css" rel="stylesheet" type="text/css" />

    

    
        <meta name="robots" content="noindex, nofollow" />
    

    <!-- FB Open Graph tags -->
    <meta property="og:title" content="
Comments - Bare-minimum MariaDB &amp;#34;cmake&amp;#34; options?
" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://mariadb.com/kb/en/bare-minimum-mariadb-cmake-options/+comments" />
    <meta property="og:image" content="http://mariadb.comaskmonty-logo.png" />
    <meta property="og:site_name" content="MariaDB KnowledgeBase" />
    <meta property="fb:admins" content="514852603" />
    <meta property="og:description" content="" />

    <meta name="description" content="" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="//fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet"/>
    
</head>
<body class="mpkb nodes node_comments jqui" id="node_comments">





<div id="menu-mobile" class="visible-sm visible-xs">

    <div>
        <div id="mobile-close-menu" class="text-right">
            <a href="javascript:void(0)" title="Close Menu" id="back-main" class="toggle-menu">X<span></span></a>
        </div>
    </div>
    <div class="mainmenu-mobile">
        <ul class="ls-none ul-menu">
            <li data-sub="submenu5"><a class="open-form-search" href="/kb/search/" title="Search">Search </a></li>
            <li data-sub="submenu0"><a href="/products" title="Products">Products</a><span class="arrow-main"></span></li>
            <li data-sub="submenu1"><a href="/services" title="Services">Services</a><span class="arrow-main"></span></li>
            <li data-sub="submenu2"><a href="/resources" title="Resources">Resources</a><span class="arrow-main"></span></li>
            <li data-sub="submenu3"><a href="/about-us" title="About">About</a><span class="arrow-main"></span></li>
            <li data-sub="submenu4"><a href="/contact" title="Contact">Contact</a></li>
        </ul>
    </div>

    <div class="nav-top-mobile">
        <div class="select-box form">

            <ul class="inline-block-md mb-none top-nav">
                <li>

                </li>
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/bare-minimum-mariadb-cmake-options/+comments"> Login</a>
                    </li>
                
            </ul>



        </div>
        <p class="text-center copyright">Copyright &copy; 2024 MariaDB. All rights reserved.</p>
    </div>
</div>
<div class="violator-wrap d-none" id="top_violator">
    <div class="container">
        <div class="row">
            <div class="col-xs-12 col-sm-12">
                <div class="violator-outer">
                    <div class="violator-inner">
                        <div class="row">
                            <div class="col-xs-12 col-sm-9 col-lg-7 col-lg-offset-2" id="top_violator_content">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="content-link" target="_blank" rel="nofollow noreferrer">
                                    <span>The Ultimate Guide to High Availability with MariaDB</span>
                                </a>
                            </div>
                            <div class="col-xs-12 col-sm-3" id="top_violator_cta">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="btn btn-mariadb" target="_blank" rel="nofollow noreferrer">Download Now</a>
                            </div>
                        </div>
                    </div>
                    <button type="button" class="btn btn-link close-btn">
                        <svg xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 24 24" width="15px" height="15px"><path d="M 4.9902344 3.9902344 A 1.0001 1.0001 0 0 0 4.2929688 5.7070312 L 10.585938 12 L 4.2929688 18.292969 A 1.0001 1.0001 0 1 0 5.7070312 19.707031 L 12 13.414062 L 18.292969 19.707031 A 1.0001 1.0001 0 1 0 19.707031 18.292969 L 13.414062 12 L 19.707031 5.7070312 A 1.0001 1.0001 0 0 0 18.980469 3.9902344 A 1.0001 1.0001 0 0 0 18.292969 4.2929688 L 12 10.585938 L 5.7070312 4.2929688 A 1.0001 1.0001 0 0 0 4.9902344 3.9902344 z"/></svg>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="wrapper">
<div id="top-nav">
    <div class="container">
        <ul class="hidden-sm hidden-xs" >
            <li><a href="https://mariadb.com/kb/">Knowledge Base</a></li>
            <li><a href="https://mariadb.com/contact/">Contact</a></li>
            
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/bare-minimum-mariadb-cmake-options/+comments" rel="nofollow">Login</a>
                    </li>
                
            
            
            <li id="search-form">
                <form action="/kb/en/+search/" method="get" id="search-block-form" accept-charset="UTF-8">
                    <input id="search" title="Enter the terms you wish to search for."
                           placeholder="Search . . ." type="text"
                           name="q" value="" size="15" maxlength="128" class="form-text"
                           data-autocomplete-url="/kb/en/+search/autocomplete/">
                    <input type="hidden" name="quick" value="1" />
                    <input type="hidden" name="source" value="kb" />
                </form>
            </li>
            <li><a id="search-toggler" href="/kb/search/">Search</a></li>
            
        </ul>
    </div>
</div>
<div id="navbar-bottom" class="navbar">
    <div class="container">
        
        
        
        
        <div class="row">
            <div class="col-md-3 col-sm-9 col-xs-9">
                <a class="brand" href="/" title="MariaDB">
                    <img src="/kb/static/images/logo-2018-black.95f5978ae14d.png">
                </a>
            </div>
            <div class="col-md-9 hidden-sm hidden-xs">
                <div class="main-menu">
                    <ul id="main-menu" class="nav navbar-nav inline-block-sm">
    <li class="has-sub full-menu">
        <a href="/products" title="Products">Products</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/services" title="Services">Services</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/pricing" title="Pricing">Pricing</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/resources" title="Resources">Resources</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/about-us" title="About Us">About Us</a>
    </li>
    <li class="">
        <a class="button electric-eel small top-bar-right-download" href="/downloads/">Download</a>
    </li>
</ul>
                </div>
            </div>
            <div class="col-md-3 visible-sm visible-xs col-sm-3 col-xs-3 ps-rv">
                <div class="navbar-header text-right pull-right">
                    <button type="button" class="menu-control toggle-menu" id="open-menu">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="main">
    <div class="container">
        

        <div id="subheader1" class="clearfix">
            <div class="pull-left">
                
                <div id="breadcrumbs" class="breadcrumb">
                    <a href="/kb/en/">Knowledge Base</a>
                    


    
    » <a class="crumb" href="/kb/en/documentation/">MariaDB Server Documentation</a>
    

    
    » <a class="crumb" href="/kb/en/mariadb-administration/">MariaDB Administration</a>
    

    
    » <a class="crumb" href="/kb/en/getting-installing-and-upgrading-mariadb/">Getting, Installing, and Upgrading MariaDB</a>
    

    
    » <a class="crumb" href="/kb/en/compiling-mariadb-from-source/">Compiling MariaDB From Source</a>
    


    » <a class="node_link crumb" href="/kb/en/bare-minimum-mariadb-cmake-options/">Bare-minimum MariaDB &#34;cmake&#34; options?</a>


                </div>
                
            </div>
        </div>
    </div>
    <div class="container" id="container-main">
        <div class="row">
            
            
            
            
            
            <section id="content" class="limited_width col-md-12 clearfix">
                
                    <h1>
Comments - Bare-minimum MariaDB &#34;cmake&#34; options?
</h1>
                

                



                <div>
                    
<div id="comments" data-node-id="12834" data-comments-url="/kb/en/bare-minimum-mariadb-cmake-options/+comments"
        data-reply-url="/kb/en/bare-minimum-mariadb-cmake-options/comments/post/">
<div class="comment_top_menu hidden-print">&nbsp;
            <div class="pull-right">
                <label>
                    Include Archived
                    <input id="include_archived" type="checkbox" name="include_archived" value="1"
                           />
                </label>
            </div>
        </div>
        <a name="comment_6501"></a>
        <div class="comment approved" style="margin-left: 0px">
            <div class="info">
                

<span class="datetime" title="2023-11-28 03:47">9 months, 1 week ago</span>
                
<span class="user" id="user-13052">
<a href="/kb/user/id/13052" title="Daniel Black">Daniel Black</a>
</span>
            </div>
            <div class="title">
                <a href="#comment_6501">Re: Bare-minimum MariaDB &#34;cmake&#34; options?</a>
                
            </div><div class="comment_text">
                <p>Simplest way to get a working production system is using existing ARM64 Debian packages.</p>
<p>In addition to the 10.11 packages are part of Debian, newer version are available as repositories obtained from:</p>
<p><a href="https://mariadb.org/download/?t=repo-config&amp;d=Debian+12+%22Bookworm%22&amp;v=11.2">https://mariadb.org/download/?t=repo-config&amp;d=Debian+12+%22Bookworm%22&amp;v=11.2</a></p>
<p>11.2 has stable releases now, but if you want a series with bug fixes that is going to continue for as long as Debian 12 recommend sticking to the 10.11 LTS release.</p>
<p>Generally packages are a little more inclusive than a bare minimal, they include plugins that are DYNAMIC but not installed, and for those plugins that require additional dependencies those are separate.</p>
<p>For a minimal build you can take any PLUGIN_X=DYNAMIC and add that to the =NO list without spending too much time considering what they are.</p>
<p>The "make" equivalent for those that have read the cmake introduction are:</p>
<pre class="fixed">cmake --build .
sudo cmake --install .
</pre>
            </div>
            <div class="comment_actions hidden-print">
                
                
                &nbsp;

                <div class="pull-right">
                    
                    <a class="flag btn btn-mini" href="/kb/en/bare-minimum-mariadb-cmake-options/+comments/6501/flag"
                       data-flag-url="/kb/en/bare-minimum-mariadb-cmake-options/+comments/6501/flag"
                            title="Flag as Spam/Inappropriate">
                        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                        </a>
                    
                    
                    
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
        <a name="comment_6502"></a>
        <div class="comment approved" style="margin-left: 10px">
            <div class="info">
                

<span class="datetime" title="2023-11-28 08:03">9 months, 1 week ago</span>
                
<span class="user" id="user-3528">
<a href="/kb/user/id/3528" title="Vladislav Vaintroub">Vladislav Vaintroub</a>
</span>
            </div>
            <div class="title">
                <a href="#comment_6502">Re: Bare-minimum MariaDB &#34;cmake&#34; options?</a>
                
            </div><div class="comment_text">
                <p>bare minimum cmake optiond  for me are
"-DWITHOUT_DYNAMIC_PLUGINS=1 -DWITH_MARIABACKUP=0"
This excludes all server plugins that are built as shared libraries, you do not need to list them individually, as you did.  -DWITH_MARIABACKUP=0 excludes mariabackup, in case you do not need it. You can add -DPLUGIN_PERFSCHEMA=NO, if you do not need performance schema (this is not built as shared library, thus unaffected by -DWITHOUT_DYNAMIC_PLUGINS)</p>

            </div>
            <div class="comment_actions hidden-print">
                
                
                &nbsp;

                <div class="pull-right">
                    
                    <a class="flag btn btn-mini" href="/kb/en/bare-minimum-mariadb-cmake-options/+comments/6502/flag"
                       data-flag-url="/kb/en/bare-minimum-mariadb-cmake-options/+comments/6502/flag"
                            title="Flag as Spam/Inappropriate">
                        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                        </a>
                    
                    
                    
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
        <a name="comment_6504"></a>
        <div class="comment approved" style="margin-left: 20px">
            <div class="info">
                

<span class="datetime" title="2023-11-28 11:31">9 months, 1 week ago</span>
                
<span class="user" id="user-3528">
<a href="/kb/user/id/3528" title="Vladislav Vaintroub">Vladislav Vaintroub</a>
</span>
            </div>
            <div class="title">
                <a href="#comment_6504">Re: Bare-minimum MariaDB &#34;cmake&#34; options?</a>
                
            </div><div class="comment_text">
                <p>Also  -DWITH_UNIT_TESTS=0 is useful, to avoid spending compile time on unit tests, if you're not going to run them</p>

            </div>
            <div class="comment_actions hidden-print">
                
                
                &nbsp;

                <div class="pull-right">
                    
                    <a class="flag btn btn-mini" href="/kb/en/bare-minimum-mariadb-cmake-options/+comments/6504/flag"
                       data-flag-url="/kb/en/bare-minimum-mariadb-cmake-options/+comments/6504/flag"
                            title="Flag as Spam/Inappropriate">
                        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                        </a>
                    
                    
                    
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
        <a name="comment_6506"></a>
        <div class="comment approved" style="margin-left: 30px">
            <div class="info">
                

<span class="datetime" title="2023-11-28 17:41">9 months, 1 week ago</span>
                
<span class="user" id="user-14623">
<a href="/kb/user/id/14623" title="Bob Sammers">Bob Sammers</a>
</span>
            </div>
            <div class="title">
                <a href="#comment_6506">Re: Bare-minimum MariaDB &#34;cmake&#34; options?</a>
                
            </div><div class="comment_text">
                <p>I now installed it using this:</p>
<pre class="fixed">cmake . -DWITHOUT_DYNAMIC_PLUGINS=1 -DWITH_MARIABACKUP=0 -DPLUGIN_PERFSCHEMA=NO -DWITH_UNIT_TESTS=0

cmake --build .
sudo cmake --install . 
</pre><p>But I didn't get any systemd files now (to start as a service). Any clue what might have gone wrong? I can't find any "mysqld.service" file anywhere in fact. How would I be able to actually start the mariadb server now?</p>

            </div>
            <div class="comment_actions hidden-print">
                
                
                &nbsp;

                <div class="pull-right">
                    
                    <a class="flag btn btn-mini" href="/kb/en/bare-minimum-mariadb-cmake-options/+comments/6506/flag"
                       data-flag-url="/kb/en/bare-minimum-mariadb-cmake-options/+comments/6506/flag"
                            title="Flag as Spam/Inappropriate">
                        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                        </a>
                    
                    
                    
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
        
    

    

    
        <a name="comment_6503"></a>
        <div class="comment approved" style="margin-left: 20px">
            <div class="info">
                

<span class="datetime" title="2023-11-28 09:28">9 months, 1 week ago</span>
                
<span class="user" id="user-14623">
<a href="/kb/user/id/14623" title="Bob Sammers">Bob Sammers</a>
</span>
            </div>
            <div class="title">
                <a href="#comment_6503">Re: Bare-minimum MariaDB &#34;cmake&#34; options?</a>
                
            </div><div class="comment_text">
                <p>Thank you all!</p>
<p>Wow, that "-DWITHOUT_DYNAMIC_PLUGINS=1" is just what I need! I couldn't find anything about it, is it undocumented?</p>
<p>So I should be using "cmake --build" instead of "make -j4" (I have 4 vCPU on my server). Will cmake --build be faster? Or what's the difference?</p>
<p>I see so many different guides (even on MariaDB's website) on how to build this from source and it always differs something in the commands. It's a bit confusing, but hopefully I can get it done.</p>
<p>I have seen guides show some "mysql_secure_installation". Is that what I should run once I have built and installed it? Or how should I proceed? (For setting up users with password authentication).</p>
<p>And if I install from source, will there be a systemd service included? So that I can turn on/off MariaDB as I wish? E.g. "systemctl stop mariadb" (or maybe it's mysqld?). Sorry for these questions, but I see so many different approaches to everything.</p>
<p>You both seem like absolute MariaDB experts. I really appreciate your help, it means a lot! You are awesome!</p>

            </div>
            <div class="comment_actions hidden-print">
                
                
                &nbsp;

                <div class="pull-right">
                    
                    <a class="flag btn btn-mini" href="/kb/en/bare-minimum-mariadb-cmake-options/+comments/6503/flag"
                       data-flag-url="/kb/en/bare-minimum-mariadb-cmake-options/+comments/6503/flag"
                            title="Flag as Spam/Inappropriate">
                        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                        </a>
                    
                    
                    
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
        <a name="comment_6507"></a>
        <div class="comment approved" style="margin-left: 30px">
            <div class="info">
                

<span class="datetime" title="2023-11-28 22:22">9 months, 1 week ago</span>
                
<span class="user" id="user-13052">
<a href="/kb/user/id/13052" title="Daniel Black">Daniel Black</a>
</span>
            </div>
            <div class="title">
                <a href="#comment_6507">Re: Bare-minimum MariaDB &#34;cmake&#34; options?</a>
                
            </div><div class="comment_text">
                <div style="margin-left:2em"><p> Wow, that "-DWITHOUT_DYNAMIC_PLUGINS=1" is just what I need! I couldn't find anything about it, is it undocumented?</p>
</div>
<p>DISABLE_SHARED has the same effect and its in the cmake -L options. So I guess it should be the documented one.</p>
<div style="margin-left:2em"><p> So I should be using "cmake --build" instead of "make -j4" (I have 4 vCPU on my server). Will cmake --build be faster? Or what's the difference?</p>
</div>
<p>cmake can use multiple things to build. "cmake --build" will work with all of the, but make -j4 will only work if CMAKE_GENERATOR is set to makefiles.</p>
<div style="margin-left:2em"><p> I see so many different guides ...</p>
</div>
<p>Many things work. Do tell us if something doesn't.</p>
<div style="margin-left:2em"><p> I have seen guides show some "mysql_secure_installation</p>
</div>
<p>Per <a href="/kb/en/mariadb-secure-installation/">docs</a> "Note that many of the reasons for the existence of this script no longer apply".</p>
<div style="margin-left:2em"><p> And if I install from source, will there be a systemd service included?</p>
</div>
<p>Did you have libsystemd-dev installed when you compiled?</p>
<p>If so, the service file is in /usr/local/mysql/support-files/systemd/mariadb.service</p>
<p>It will need to be copied/linked from /lib/systemd/system/ or /etc/systemd/system for systemd to recognise it.  systemctl daemon-reload after its moved there and then systemctl start mariadb.service.</p>

            </div>
            <div class="comment_actions hidden-print">
                
                
                &nbsp;

                <div class="pull-right">
                    
                    <a class="flag btn btn-mini" href="/kb/en/bare-minimum-mariadb-cmake-options/+comments/6507/flag"
                       data-flag-url="/kb/en/bare-minimum-mariadb-cmake-options/+comments/6507/flag"
                            title="Flag as Spam/Inappropriate">
                        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                        </a>
                    
                    
                    
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
        
    

    

    

    

    

</div>


                    <div id="content_disclaimer" class="graybox">
                        Content reproduced on this site is the property of its respective owners,
                        and this content is not reviewed in advance by MariaDB. The views, information and opinions
                        expressed by this content do not necessarily represent those of MariaDB or any other party.
                    </div>
                </div>
            </section>

            
        </div>
    </div>
</div>

<!-- Footer -->
<footer id="footer">
    <div class="footer">
        <div class="container">
            <div class="row">
                <div class="col-xs-12">
                    <ul class="list-inline text-center footer-nav">
                        <li>
                            <h5>
                                <a href="https://mariadb.com/products" title="Products">Products</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/services" title="Services">Services</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/pricing" title="Pricing">Pricing</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/resources" title="Resources">Resources</a>
                            </h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/about-us" title="About MariaDB">About Us</a></h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/download" title="Download">Download MariaDB</a></h5>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="row row-10">
                
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div id="block-footerformcontact" class="block block-block-content block-block-contentd754ee1b-3cc9-40e7-9ef4-f504f1197fb1">
                        
                            <h5 style="font-weight: 400;">Subscribe to our newsletter!</h5>
                            <script src="//app-sj15.marketo.com/js/forms2/js/forms2.min.js"></script><form id="mktoForm_1498"></form>
                            <script>
                                <!--//--><![CDATA[// ><!--
                                MktoForms2.loadForm("//app-sj15.marketo.com", "573-PXI-984", 1498);
                                //--><!]]]]><![CDATA[>
                                //--><!]]>
                            </script>
                        
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div class="footer-copyright">
                        <div class="text-center">
                            <ul class="list-inline no-margin">
                                <li>
                                    <a href="/legal" title="Legal">Legal</a>
                                </li>
                                <li>
                                    <a href="/privacy-policy" title="Privacy Policy">Privacy Policy</a>
                                </li>
                                <li>
                                    <a href="/cookie-policy/" title="Cookies">Cookie Policy</a>
                                </li>
                            </ul>
                            <p>Copyright &copy; 2024 MariaDB. All rights reserved.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
</footer>
</div>

<div id="ajax_loading">
    <img src="/kb/static/images/ajax-loader.a51c5608d01a.gif" />
</div>

    <!-- Google Tag Manager -->
    <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-MK2847"
                      height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
            '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MK2847');</script>
    <!-- End Google Tag Manager -->

</body>

<script type="text/javascript" src="/kb/static/js/main.1587e3a666fc.js" charset="utf-8"></script>

</html>