<?xml version="1.0" encoding="utf-8"?>
<rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title>MariaDB Knowledge Base Comments for: Full Backup and Restore with Mariabackup</title><link>https://mariadb.com/kb/en/full-backup-and-restore-with-mariabackup/+comments/feed/</link><description></description><atom:link href="https://mariadb.com/kb/en/full-backup-and-restore-with-mariabackup/+comments/feed/" rel="self"></atom:link><language>en-us</language><lastBuildDate>Mon, 11 Mar 2024 21:07:37 +0000</lastBuildDate><item><title>Re: Full Backup with Mariabackup and MariaDB 10.6</title><link>https://mariadb.com/kb/en/full-backup-and-restore-with-mariabackup/+comments/6085</link><description>&lt;p&gt;It should be noted that parent directory &lt;strong&gt;mariadb&lt;/strong&gt; if not exists results in &lt;strong&gt;Error: cannot mkdir 2: /var/mariadb/backup/&lt;/strong&gt;.
Therefore &lt;strong&gt;mkdir /var/mariadb&lt;/strong&gt; command should be used before &lt;strong&gt;mariabackup --backup&lt;/strong&gt;.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Kenneth Sartre</dc:creator><guid>https://mariadb.com/kb/en/full-backup-and-restore-with-mariabackup/+comments/6085</guid></item><item><title>Re: Full Backup and Restore with Mariabackup - WIndows 11</title><link>https://mariadb.com/kb/en/full-backup-and-restore-with-mariabackup/+comments/5606</link><description>&lt;p&gt;&lt;a href="/kb/en/what-is-mariadb-103/"&gt;Mariadb 10.3&lt;/a&gt; - Mariabackup fails on restore. Even taking ownership of all files with the SYSTEM account just does not work. But a complete system backup with Macrium Reflect and then stop the MySQL service, extract the data files from the backup and place in the data directory, and restart the MySQL service works a treat.
The set of files in the Macrium reflect backup abart from the various database directories are:
- aria_log.00000001
- 'machine name'.err
- aria_log_control
- ib_buffer_pool
- ib_logfile0
- ib_logfile1
- ibdata1
- ibtmp1
- multi-master.info
- my.ini
- 'machine name'.pid
This is not the same as what is produced by mariabackup.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Graeme Glenn</dc:creator><guid>https://mariadb.com/kb/en/full-backup-and-restore-with-mariabackup/+comments/5606</guid></item><item><title>Re: Full Backup and Restore with Mariabackup between Differenct Version</title><link>https://mariadb.com/kb/en/full-backup-and-restore-with-mariabackup/+comments/5328</link><description>&lt;p&gt;If I made a db backup by 'mariabackup --backup' command, may I use the backup image to restore to another mariadb version using 'mariabackup --copy-back' command?&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Testing User A Test</dc:creator><guid>https://mariadb.com/kb/en/full-backup-and-restore-with-mariabackup/+comments/5328</guid></item><item><title>Re: Full Backup and Restore with Mariabackup</title><link>https://mariadb.com/kb/en/full-backup-and-restore-with-mariabackup/+comments/5264</link><description>&lt;p&gt;it ony touched the backup directory. Note, that you can't always do the prepare on the same machine, apparently when you do not backup into a directory. You can backup to "stream" , i.e stdout, and ship that stream to another box, or elsewhere, to a cloud. Second, maybe you do not want to run an IO and CPU-expensive "prepare", on the box where a server is running.&lt;/p&gt;
&lt;p&gt;Having said that, yes, maybe it is more convenient to run prepare on the same box right after backup, if the points above are not a concern.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Vladislav Vaintroub</dc:creator><guid>https://mariadb.com/kb/en/full-backup-and-restore-with-mariabackup/+comments/5264</guid></item><item><title>Re: Full Backup and Restore with Mariabackup</title><link>https://mariadb.com/kb/en/full-backup-and-restore-with-mariabackup/+comments/5263</link><description>&lt;p&gt;Please read carefully the documentation and take a moment to look the Oli's mariabackup presentation. You will find all the answer you are looking for.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Faustin Lammler</dc:creator><guid>https://mariadb.com/kb/en/full-backup-and-restore-with-mariabackup/+comments/5263</guid></item><item><title>Re: Full Backup and Restore with Mariabackup</title><link>https://mariadb.com/kb/en/full-backup-and-restore-with-mariabackup/+comments/5262</link><description>&lt;p&gt;Does the prepare step touch all the files inside the backup directory, not the files on /var/lib/mysql directory? If we perform 'prepare' right after backup, it helps to save the time to 'prepare' the backup files for restoration. Is it the reason why we should perform 'prepare' immediately right after the backup? If the 'prepare' time is insignificant, is it no difference whether we do the 'prepare' step right after the backup, or just before db restoration?&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Testing User A Test</dc:creator><guid>https://mariadb.com/kb/en/full-backup-and-restore-with-mariabackup/+comments/5262</guid></item><item><title>Re: Full Backup and Restore with Mariabackup</title><link>https://mariadb.com/kb/en/full-backup-and-restore-with-mariabackup/+comments/5260</link><description>&lt;p&gt;Hi!
This is a very good question.
I encourage you to verify the time needed in your setup to do the prepare step and based on your SLA decide when to do it (at backup step or at recovery step).&lt;/p&gt;
&lt;p&gt;Please take a look at this presentation where Oli Sennhauser explain why he suggest to do the prepare step just after the backup step.
&lt;a href="https://www.youtube.com/watch?v=dQRuK7y2zuc"&gt;https://www.youtube.com/watch?v=dQRuK7y2zuc&lt;/a&gt;&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Faustin Lammler</dc:creator><guid>https://mariadb.com/kb/en/full-backup-and-restore-with-mariabackup/+comments/5260</guid></item><item><title>Re: Full Backup and Restore with Mariabackup</title><link>https://mariadb.com/kb/en/full-backup-and-restore-with-mariabackup/+comments/5259</link><description>&lt;p&gt;We should execute the command, 'mariabackup --prepare', after performing 'mariabackup --backup'.  Must the command 'mariabackup --prepare' be executed right after finishing 'mariabackup --backup'?   Or I may wait till the time of db restoration?&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Testing User A Test</dc:creator><guid>https://mariadb.com/kb/en/full-backup-and-restore-with-mariabackup/+comments/5259</guid></item><item><title>Re: Full Backup and Restore with Mariabackup</title><link>https://mariadb.com/kb/en/full-backup-and-restore-with-mariabackup/+comments/5138</link><description>&lt;p&gt;hi there,
I get another error, namelly that some tables are not 'reachable' anymore:
&amp;lt;pre&amp;gt;
MariaDB [etst]&amp;gt; select * from blablatable;
ERROR 1146 (42S02): Table 'test.blablatable' doesn't exist
&amp;lt;/pre&amp;gt;&lt;/p&gt;
&lt;p&gt;These tables exist definitly on server1 (the one that is backed up).
Any idea what might be going op here?&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">rafael te Boekhorst</dc:creator><guid>https://mariadb.com/kb/en/full-backup-and-restore-with-mariabackup/+comments/5138</guid></item><item><title>Re: Full Backup and Restore with Mariabackup</title><link>https://mariadb.com/kb/en/full-backup-and-restore-with-mariabackup/+comments/4880</link><description>&lt;p&gt;mariadb-10.5.6-winx64, I try to restore db by mariabackup, but it doesn't work:
it restores all files/directories,  but the services 'mariadb' cannot be start..
then, I copy/pase backed files/Dirs to madiadb_dir\data and replace all, it works!
Maybe windows file explorer is better backup tool than mariabackup..&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Bin Liu</dc:creator><guid>https://mariadb.com/kb/en/full-backup-and-restore-with-mariabackup/+comments/4880</guid></item><item><title>Re: Full Backup and Restore with Mariabackup</title><link>https://mariadb.com/kb/en/full-backup-and-restore-with-mariabackup/+comments/4715</link><description>&lt;p&gt;Hello William,&lt;/p&gt;
&lt;p&gt;The OS user running MariaBackup needs to have permission to write to the target directory. For example any OS user can run it specifying the target directory as a directory under their home directory.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Juan Vera</dc:creator><guid>https://mariadb.com/kb/en/full-backup-and-restore-with-mariabackup/+comments/4715</guid></item><item><title>Re: Full Backup and Restore with Mariabackup</title><link>https://mariadb.com/kb/en/full-backup-and-restore-with-mariabackup/+comments/3819</link><description>&lt;p&gt;mysql Ver 15.1 Distrib 10.3.12-MariaDB, for debian-linux-gnu (x86_64) using readline 5.2
mariabackup based on MariaDB server 10.3.12-MariaDB debian-linux-gnu (x86_64)&lt;/p&gt;
&lt;p&gt;Kept running into errors similar to the following: 
&lt;a href="https://dba.stackexchange.com/questions/192742/os-error-13-when-running-mariabackup-as-non-mysql-user?rq=1"&gt;https://dba.stackexchange.com/questions/192742/os-error-13-when-running-mariabackup-as-non-mysql-user?rq=1&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;For me a "successful" backup required sudo -u mysql mariabackup .....&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">William Wright</dc:creator><guid>https://mariadb.com/kb/en/full-backup-and-restore-with-mariabackup/+comments/3819</guid></item><item><title>Re: Full Backup and Restore with MariaDB Backup</title><link>https://mariadb.com/kb/en/full-backup-and-restore-with-mariabackup/+comments/3518</link><description>&lt;p&gt;Normally the database files itself are not in the container but instead somewhere else.&lt;/p&gt;
&lt;p&gt;So the procedure would be:
- Stop the mariadb instance
- Run the above commands on the main machine or in another container that has access to the databases directory
- Restart the mariadb instance&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Michael Widenius</dc:creator><guid>https://mariadb.com/kb/en/full-backup-and-restore-with-mariabackup/+comments/3518</guid></item><item><title>Re: Full Backup and Restore with MariaDB Backup</title><link>https://mariadb.com/kb/en/full-backup-and-restore-with-mariabackup/+comments/3420</link><description>&lt;p&gt;I have a question about restoring from a mariabackup backup into a mariadb instance running in a docker container. &lt;/p&gt;
&lt;p&gt;You say that you have to stop the mariadb instance before doing the above restore commands. However, if you stop mariadb (mysqladmin shutdown), the docker container stops. Do you see the problem? If the container is stopped, then there is no place to run the mariabackup restore commands from above. &lt;/p&gt;
&lt;p&gt;(Pardon my new-ness to all of this. I am an experienced DBA - the container / mariadb world is new to me).  Thanks.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Bill Border</dc:creator><guid>https://mariadb.com/kb/en/full-backup-and-restore-with-mariabackup/+comments/3420</guid></item><item><title>Re: Full Backup and Restore with MariaDB Backup</title><link>https://mariadb.com/kb/en/full-backup-and-restore-with-mariabackup/+comments/3358</link><description>&lt;p&gt;Good Day,&lt;/p&gt;
&lt;p&gt;Would like to know if and how I can restore the backup to a new database.
Original Database: DB1
New Database:      DB2&lt;/p&gt;
&lt;p&gt;Also, the error "original data directory /var/lib/mysql is not empty", does this mean I must remove all the files in that directory or I should specify another directory to restore to.&lt;/p&gt;
&lt;p&gt;Regards,&lt;/p&gt;
&lt;p&gt;Ralph&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/"> </dc:creator><guid>https://mariadb.com/kb/en/full-backup-and-restore-with-mariabackup/+comments/3358</guid></item></channel></rss>