<!DOCTYPE html>
<html>
<head data-cookie-domain=""
      data-cookie-path="/">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="apple-touch-icon" sizes="180x180" href="/kb/static/images/favicons/apple-touch-icon.159e713979be.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/kb/static/images/favicons/favicon-32x32.bc0ac1d5d11e.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/kb/static/images/favicons/favicon-16x16.5801f8f0f34e.png">
    <link rel="shortcut icon" href="/kb/static/images/favicons/favicon.d122d305dee4.ico" type="image/x-icon" />

    <title> SQL Resource - MariaDB Knowledge Base</title>

    <link href="/kb/static/css/main.9a0d7dcebefd.css" rel="stylesheet" type="text/css" />

    

    <!-- FB Open Graph tags -->
    <meta property="og:title" content=" SQL Resource" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://mariadb.com/kb/en/mariadb-maxscale-6-sql-resource/" />
    <meta property="og:image" content="http://mariadb.comaskmonty-logo.png" />
    <meta property="og:site_name" content="MariaDB KnowledgeBase" />
    <meta property="fb:admins" content="514852603" />
    <meta property="og:description" content="SQL Resource
The SQL resource represents a database connection.


SQL Resource
SQL Connection Interface
Request Parameters
Get one SQL connection
Response


Get all SQL connec..." />

    <meta name="description" content="SQL Resource
The SQL resource represents a database connection.


SQL Resource
SQL Connection Interface
Request Parameters
Get one SQL connection
Response


Get all SQL connec..." />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="//fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet"/>
    
</head>
<body class="mpkb nodes products nodes_view jqui" id="nodes_view">





<div id="menu-mobile" class="visible-sm visible-xs">

    <div>
        <div id="mobile-close-menu" class="text-right">
            <a href="javascript:void(0)" title="Close Menu" id="back-main" class="toggle-menu">X<span></span></a>
        </div>
    </div>
    <div class="mainmenu-mobile">
        <ul class="ls-none ul-menu">
            <li data-sub="submenu5"><a class="open-form-search" href="/kb/search/" title="Search">Search </a></li>
            <li data-sub="submenu0"><a href="/products" title="Products">Products</a><span class="arrow-main"></span></li>
            <li data-sub="submenu1"><a href="/services" title="Services">Services</a><span class="arrow-main"></span></li>
            <li data-sub="submenu2"><a href="/resources" title="Resources">Resources</a><span class="arrow-main"></span></li>
            <li data-sub="submenu3"><a href="/about-us" title="About">About</a><span class="arrow-main"></span></li>
            <li data-sub="submenu4"><a href="/contact" title="Contact">Contact</a></li>
        </ul>
    </div>

    <div class="nav-top-mobile">
        <div class="select-box form">

            <ul class="inline-block-md mb-none top-nav">
                <li>

                </li>
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/mariadb-maxscale-6-sql-resource/"> Login</a>
                    </li>
                
            </ul>



        </div>
        <p class="text-center copyright">Copyright &copy; 2023 MariaDB. All rights reserved.</p>
    </div>
</div>
<div id="wrapper">
<div id="top-nav">
    <div class="container">
        <ul class="hidden-sm hidden-xs" >
            <li><a href="https://mariadb.com/kb/">Knowledge Base</a></li>
            <li><a href="https://mariadb.com/contact/">Contact</a></li>
            
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/mariadb-maxscale-6-sql-resource/" rel="nofollow">Login</a>
                    </li>
                
            
            
            <li id="search-form">
                <form action="/kb/en/+search/" method="get" id="search-block-form" accept-charset="UTF-8">
                    <input id="search" title="Enter the terms you wish to search for."
                           placeholder="Search . . ." type="text"
                           name="q" value="" size="15" maxlength="128" class="form-text"
                           data-autocomplete-url="/kb/en/+search/autocomplete/">
                    <input type="hidden" name="quick" value="1" />
                    <input type="hidden" name="source" value="kb" />
                </form>
            </li>
            <li><a id="search-toggler" href="/kb/search/">Search</a></li>
            
        </ul>
    </div>
</div>
<div id="navbar-bottom" class="navbar">
    <div class="container">
        
        
        
        
        <div class="row">
            <div class="col-md-3 col-sm-9 col-xs-9">
                <a class="brand" href="/" title="MariaDB">
                    <img src="/kb/static/images/logo-2018-black.95f5978ae14d.png">
                </a>
            </div>
            <div class="col-md-9 hidden-sm hidden-xs">
                <div class="main-menu">
                    <ul id="main-menu" class="nav navbar-nav inline-block-sm">
    <li class="has-sub full-menu">
        <a href="/products" title="Products">Products</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/services" title="Services">Services</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/pricing" title="Pricing">Pricing</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/resources" title="Resources">Resources</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/about-us" title="About Us">About Us</a>
    </li>
    <li class="">
        <a class="button electric-eel small top-bar-right-download" href="/downloads/">Download</a>
    </li>
</ul>
                </div>
            </div>
            <div class="col-md-3 visible-sm visible-xs col-sm-3 col-xs-3 ps-rv">
                <div class="navbar-header text-right pull-right">
                    <button type="button" class="menu-control toggle-menu" id="open-menu">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="main">
    <div class="container">
        

        <div id="subheader1" class="clearfix">
            <div class="pull-left">
                
                <div id="breadcrumbs" class="breadcrumb">
                    <a href="/kb/en/">Knowledge Base</a>
                    


    
    » <a class="crumb" href="/kb/en/maxscale/">MariaDB MaxScale</a>
    

    
    » <a class="crumb" href="/kb/en/mariadb-maxscale-6/">MariaDB MaxScale 6</a>
    

    
    » <a class="crumb" href="/kb/en/maxscale-6-rest-api/">MaxScale 6 REST-API</a>
    


    » <a class="node_link crumb" href="/kb/en/mariadb-maxscale-6-sql-resource/"> SQL Resource</a>


                </div>
                
            </div>
        </div>
    </div>
    <div class="container" id="container-main">
        <div class="row">
            
            
                
                <aside id="sidebar-first" class="sidebar col-md-2 hidden-xs hidden-sm hidden-print">
                    
                        
                        <ul id="category_menu" class="nav nav-pills nav-stacked">
                            <li><a href="/kb/en/">Home</a></li>
                            
                                
                                    <li><a href="/kb/en/+questions/">Open Questions</a></li>
                                
                                <li><a href="/kb/en/documentation/">MariaDB Server</a></li>
                                <li><a href="/kb/en/maxscale/">MariaDB MaxScale</a></li>
                                <li><a href="/kb/en/mariadb-columnstore/">MariaDB ColumnStore</a></li>
                                <li><a href="/kb/en/connectors/">Connectors</a></li>
                            

                        </ul>
                    

                    
<div>



<div class="well well-small box actions"><div>

        <a class="btn btn-block btn-blue btn-sm" href="/kb/en/mariadb-maxscale-6-sql-resource/+history" rel="nofollow">History</a>
        
        
        
        <a class="btn btn-block btn-blue btn-sm" href="/kb/en/mariadb-maxscale-6-sql-resource/+source/">Source</a>
        
        <a class="btn btn-block btn-blue btn-sm flag" href="/kb/en/mariadb-maxscale-6-sql-resource/+flag"
                data-flag-url="/kb/en/mariadb-maxscale-6-sql-resource/+flag" rel="nofollow">
                Flag as Spam / Inappropriate</a>
        
        <a class="btn btn-block btn-blue btn-sm" href="/kb/en/mariadb-maxscale-6-sql-resource/+translate/">
                Translate</a>
        

</div>
</div>





<div class="well well-small box node_info"><div>

    <dl>
        <dt>Created</dt>
        <dd>

<span class="datetime" title="2021-06-30 22:55">1 year, 12 months ago</span></dd>

        <dt>Modified</dt>
        <dd>

<span class="datetime" title="2021-06-30 22:55">1 year, 12 months ago</span></dd>

        <dt>Type</dt>
        <dd>article</dd>

        <dt>Status</dt>
        <dd>active</dd>

        <dt>License</dt>
        <dd>
            
                <a href="/kb/en/mariadb-maxscale-6-sql-resource/+license/">CC BY-SA / Gnu FDL</a>
            
        </dd>

        
        <dt>Source</dt>
        <dd><a href="https://github.com/mariadb-corporation/MaxScale/blob/6.4.7/Documentation/REST-API/Resources-SQL.md">GitHub</a></dd>
        
    </dl>

    
    <ul class="rss_feeds">
        <li><a href="/kb/en/mariadb-maxscale-6-sql-resource/+history/feed/">
            History</a>
        </li>
        <li><a href="/kb/en/mariadb-maxscale-6-sql-resource/+comments/feed/">
            Comments</a>
        </li>
    </ul>
    

</div>
</div>





    
    
    

<div class="well well-small box attachments"><div><div class="edit_link pull-right"><a href="/kb/en/mariadb-maxscale-6-sql-resource/+edit/attachments/">Edit</a></div><h5>Attachments</h5></div><div>

        
            <div class="no_data">No attachments exist</div>
        
    
</div>
</div>

    



    
    






</div>


                    

































                </aside>
            
            
            
                
            
            
                
            
            <section id="content" class="limited_width col-md-8 clearfix">
                
                    <h1> SQL Resource</h1>
                

                



                <div>
                    
    

    
    
    

    <div class="node creole">
        
        
        


    
    <div class="answer formatted">
        <h1 id="sql-resource">SQL Resource</h1>
<p>The SQL resource represents a database connection.</p>
<div>
<ul>
<li><a href="#sql-resource">SQL Resource</a><ul>
<li><a href="#sql-connection-interface">SQL Connection Interface</a></li>
<li><a href="#request-parameters">Request Parameters</a><ul>
<li><a href="#get-one-sql-connection">Get one SQL connection</a><ul>
<li><a href="#response">Response</a></li>
</ul>
</li>
<li><a href="#get-all-sql-connections">Get all SQL connections</a><ul>
<li><a href="#response_1">Response</a></li>
</ul>
</li>
<li><a href="#open-sql-connection-to-server">Open SQL connection to server</a><ul>
<li><a href="#request-parameters_1">Request Parameters</a></li>
<li><a href="#response_2">Response</a></li>
</ul>
</li>
<li><a href="#close-an-opened-sql-connection">Close an opened SQL connection</a><ul>
<li><a href="#response_3">Response</a></li>
</ul>
</li>
<li><a href="#reconnect-an-opened-sql-connection">Reconnect an opened SQL connection</a><ul>
<li><a href="#response_4">Response</a></li>
</ul>
</li>
<li><a href="#execute-sql-query">Execute SQL query</a><ul>
<li><a href="#response_5">Response</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<h2 id="sql-connection-interface">SQL Connection Interface</h2>
<p>The following endpoints provide a simple REST API interface for executing
SQL queries on servers and services in MaxScale.</p>
<p>This document uses the <code>:id</code> value in the URL to represent a connection ID and
the <code>:query_id</code> to represent a query ID. These values do not need to be manually
added as the relevant links are returned in the request body of each endpoint.</p>
<p>The endpoints use JSON Web Tokens to uniquely identify open SQL connections. A
connection token can be acquired with a <code>POST /v1/sql</code> request and can be used
with the <code>POST /v1/sql/:id/query</code>, <code>GET /v1/sql/:id/results/:query_id</code> and
<code>DELETE /v1/sql</code> endpoints. All of these endpoints accept a connection token in
the <code>token</code> parameter of the request:</p>
<div><pre><span></span>POST /v1/sql/query?token=eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiJhZG1pbiIsImV4cCI6MTU4MzI1NDE1MSwiaWF0IjoxNTgzMjI1MzUxLCJpc3MiOiJtYXhzY2FsZSJ9.B1BqhjjKaCWKe3gVXLszpOPfeu8cLiwSb4CMIJAoyqw
</pre></div>


<p>In addition to request parameters, the token can be stored in cookies in which
case they are automatically used by the REST API. For more information about
token storage in cookies, see the documentation for <code>POST /v1/sql</code>.</p>
<h2 id="request-parameters">Request Parameters</h2>
<p>All of the endpoints that operate on a single connection support the following
request parameters. The <code>GET /v1/sql</code> and <code>GET /v1/sql/:id</code> endpoints are an
exception as they ignore the current connection token.</p>
<ul>
<li>
<p><code>token</code></p>
</li>
<li>
<p>The connection token to use for the request. If provided, the value is
    unconditionally used even if a cookie with a valid token exists.</p>
</li>
</ul>
<h3 id="get-one-sql-connection">Get one SQL connection</h3>
<div><pre><span></span>GET /v1/sql/:id
</pre></div>


<h4 id="response">Response</h4>
<p>Response contains the requested resource.</p>
<p><code>Status: 200 OK</code></p>
<div><pre><span></span><span>{</span>
    <span>"data"</span><span>:</span> <span>{</span>
        <span>"id"</span><span>:</span> <span>"5"</span><span>,</span>
        <span>"links"</span><span>:</span> <span>{</span>
            <span>"related"</span><span>:</span> <span>"http://localhost:8989/v1/sql/5/queries/"</span><span>,</span>
            <span>"self"</span><span>:</span> <span>"http://localhost:8989/v1/sql/5/"</span>
        <span>},</span>
        <span>"type"</span><span>:</span> <span>"sql"</span>
    <span>},</span>
    <span>"links"</span><span>:</span> <span>{</span>
        <span>"self"</span><span>:</span> <span>"http://localhost:8989/v1/sql/5/"</span>
    <span>},</span>
    <span>"meta"</span><span>:</span> <span>{</span>
        <span>"token"</span><span>:</span> <span>"eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiI1IiwiZXhwIjoxNjIwMjM1Mzc3LCJpYXQiOjE2MjAyMDY1NzcsImlzcyI6Im14cy1xdWVyeSJ9.2CJ8DsEPbGlvs2DrBUC6FJA64VMSU8kbX1U4FSu2-OY"</span>
    <span>}</span>
<span>}</span>
</pre></div>


<h3 id="get-all-sql-connections">Get all SQL connections</h3>
<div><pre><span></span>GET /v1/sql
</pre></div>


<h4 id="response_1">Response</h4>
<p>Response contains a resource collection with all the open SQL connections.</p>
<p><code>Status: 200 OK</code></p>
<div><pre><span></span><span>{</span>
    <span>"data"</span><span>:</span> <span>[</span>
        <span>{</span>
            <span>"id"</span><span>:</span> <span>"10"</span><span>,</span>
            <span>"links"</span><span>:</span> <span>{</span>
                <span>"related"</span><span>:</span> <span>"http://localhost:8989/v1/sql/10/queries/"</span><span>,</span>
                <span>"self"</span><span>:</span> <span>"http://localhost:8989/v1/sql/10/"</span>
            <span>},</span>
            <span>"type"</span><span>:</span> <span>"sql"</span>
        <span>},</span>
        <span>{</span>
            <span>"id"</span><span>:</span> <span>"11"</span><span>,</span>
            <span>"links"</span><span>:</span> <span>{</span>
                <span>"related"</span><span>:</span> <span>"http://localhost:8989/v1/sql/11/queries/"</span><span>,</span>
                <span>"self"</span><span>:</span> <span>"http://localhost:8989/v1/sql/11/"</span>
            <span>},</span>
            <span>"type"</span><span>:</span> <span>"sql"</span>
        <span>}</span>
    <span>],</span>
    <span>"links"</span><span>:</span> <span>{</span>
        <span>"self"</span><span>:</span> <span>"http://localhost:8989/v1/sql/"</span>
    <span>}</span>
<span>}</span>
</pre></div>


<h3 id="open-sql-connection-to-server">Open SQL connection to server</h3>
<div><pre><span></span>POST /v1/sql
</pre></div>


<p>The request body must be a JSON object consisting of the following fields:</p>
<ul>
<li>
<p><code>target</code></p>
</li>
<li>
<p>The object in MaxScale to connect to. This is a mandatory value and the
    given value must be the name of a valid server, service or listener in
    MaxScale.</p>
</li>
<li>
<p><code>user</code></p>
</li>
<li>
<p>The username to use when creating the connection. This is a mandatory value.</p>
</li>
<li>
<p><code>password</code></p>
</li>
<li>
<p>The password for the user. This is a mandatory value.</p>
</li>
<li>
<p><code>db</code></p>
</li>
<li>
<p>The default database for the connection. By default the connection will have
    no default database.</p>
</li>
<li>
<p><code>timeout</code></p>
</li>
<li>
<p>Connection timeout in seconds. The default connection timeout is 10
    seconds. This controls how long the SQL connection creation can take before
    an error is returned.</p>
</li>
</ul>
<p>Here is an example request body:</p>
<div><pre><span></span>{
    "user": "jdoe",
    "password": "my-s3cret",
    "target": "server1",
    "db": "test",
    "timeout": 15
}
</pre></div>


<p>The response will contain the new connection with the token stored at
<code>meta.token</code>. If the request uses the <code>persist=yes</code> request parameter, the token
is stored in cookies instead of the metadata object and the response body will
not contain the token.</p>
<p>The location of the newly created connection will be stored at <code>links.self</code> in
the response body as well as in the <code>Location</code> header.</p>
<p>The token must be given to all subsequent requests that use the connection. It
must be either given in the <code>token</code> parameter of a request or it must be stored
in the cookies. If both a <code>token</code> parameter and a cookie exist at the same time,
the <code>token</code> parameter will be used instead of the cookie.</p>
<h4 id="request-parameters_1">Request Parameters</h4>
<p>This endpoint supports the following request parameters.</p>
<ul>
<li>
<p><code>persist</code></p>
</li>
<li>
<p>Store the connection token in cookies instead of returning it as the response body.</p>
<p>This parameter expects only one value, <code>yes</code>, as its argument. When
<code>persist=yes</code> is set, the token is stored in two cookies,
<code>conn_id_body_&lt;id&gt;</code> and <code>conn_id_sig_&lt;id&gt;</code> where the <code>&lt;id&gt;</code> part is replaced
by the ID of the connection.</p>
<p>The <code>conn_id_body_&lt;id&gt;</code> cookie contains the JWT header and claims sections
and contains the connection ID in the <code>aud</code> value. This can be used to
retrieve the connection ID from the cookies if the browser session is
closed.</p>
</li>
<li>
<p><code>max-age</code></p>
</li>
<li>
<p>Sets the connection token maximum age in seconds. The default is
    <code>max-age=28800</code>. Only positive values are accepted and if a non-positive or
    a non-integer value is found, the parameter is ignored. Once the token age
    exceeds the configured maximum value, the token can no longer be used and a
    new connection must be created.</p>
</li>
</ul>
<h4 id="response_2">Response</h4>
<p>Connection was opened:</p>
<p><code>Status: 201 Created</code></p>
<div><pre><span></span><span>{</span>
    <span>"data"</span><span>:</span> <span>{</span>
        <span>"id"</span><span>:</span> <span>"5"</span><span>,</span>
        <span>"links"</span><span>:</span> <span>{</span>
                 <span>// The "related" endpoint is the URL to the query endpoint for this connection.</span>
            <span>"related"</span><span>:</span> <span>"http://localhost:8989/v1/sql/5/queries/"</span><span>,</span>
            <span>"self"</span><span>:</span> <span>"http://localhost:8989/v1/sql/5/"</span>
        <span>},</span>
        <span>"type"</span><span>:</span> <span>"sql"</span>
    <span>},</span>
    <span>"links"</span><span>:</span> <span>{</span>
        <span>"self"</span><span>:</span> <span>"http://localhost:8989/v1/sql/5/"</span>
    <span>},</span>
    <span>"meta"</span><span>:</span> <span>{</span>
        <span>"token"</span><span>:</span> <span>"eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiI1IiwiZXhwIjoxNjIwMjM1Mzc3LCJpYXQiOjE2MjAyMDY1NzcsImlzcyI6Im14cy1xdWVyeSJ9.2CJ8DsEPbGlvs2DrBUC6FJA64VMSU8kbX1U4FSu2-OY"</span>
    <span>}</span>
<span>}</span>
</pre></div>


<p>Missing or invalid payload:</p>
<p><code>Status: 403 Forbidden</code></p>
<h3 id="close-an-opened-sql-connection">Close an opened SQL connection</h3>
<div><pre><span></span>DELETE /v1/sql/:id
</pre></div>


<h4 id="response_3">Response</h4>
<p>Connection was closed:</p>
<p><code>Status: 204 No Content</code></p>
<p>Missing or invalid connection token:</p>
<p><code>Status: 403 Forbidden</code></p>
<h3 id="reconnect-an-opened-sql-connection">Reconnect an opened SQL connection</h3>
<div><pre><span></span>POST /v1/sql/:id/reconnect
</pre></div>


<p>Reconnects an existing connection. This can also be used if the connection to
the backend server was lost due to a network error.</p>
<p>The connection will use the same credentials that were passed to the <code>POST
/v1/sql</code> endpoint. The new connection will still have the same ID in the REST
API but will be treated as a new connection by the database. A reconnection
re-initializes the connection and resets the session state. Reconnections cannot
take place while a transaction is open.</p>
<h4 id="response_4">Response</h4>
<p>Reconnection was successful:</p>
<p><code>Status: 204 No Content</code></p>
<p>Reconnection failed or connection is already in use:</p>
<p><code>Status: 503 Service Unavailable</code></p>
<p>Missing or invalid connection token:</p>
<p><code>Status: 403 Forbidden</code></p>
<h3 id="execute-sql-query">Execute SQL query</h3>
<div><pre><span></span>POST /v1/sql/:id/queries
</pre></div>


<p>The request body must be a JSON object with the value of the <code>sql</code> field set to
the SQL to be executed:</p>
<div><pre><span></span>{
    "sql": "SELECT * FROM test.t1",
    "max_rows": 1000
}
</pre></div>


<p>The request body must be a JSON object consisting of the following fields:</p>
<ul>
<li>
<p><code>sql</code></p>
</li>
<li>
<p>The SQL to be executed. If the SQL contain multiple statements, multiple
    results are returned in the response body.</p>
</li>
<li>
<p><code>max_rows</code></p>
</li>
<li>
<p>The maximum number of rows returned in the response. By default this is 1000
    rows. Setting the value to 0 means no limit. Any extra rows in the result
    will be discarded.</p>
</li>
</ul>
<p>By default, the complete result is returned in the response body. If the SQL
query returns more than one result, the <code>results</code> array will contain all the
results.</p>
<p>The <code>results</code> array can have three types of objects: resultsets, errors, and OK
responses.</p>
<ul>
<li>A resultset consists of the <code>data</code> field with the result data stored as a two
  dimensional array. The names of the fields are stored in an array in the
  <code>fields</code> field. These types of results will be returned for any operation that
  returns rows (i.e. <code>SELECT</code> statements)</li>
</ul>
<div><pre><span></span><span>{</span>
    <span>"data"</span><span>:</span> <span>{</span>
        <span>"attributes"</span><span>:</span> <span>{</span>
            <span>"results"</span><span>:</span> <span>[</span>
                <span>{</span>
                    <span>"data"</span><span>:</span> <span>[</span>
                        <span>[</span>
                            <span>1</span>
                        <span>],</span>
                        <span>[</span>
                            <span>2</span>
                        <span>],</span>
                        <span>[</span>
                            <span>3</span>
                        <span>]</span>
                    <span>],</span>
                    <span>"fields"</span><span>:</span> <span>[</span>
                        <span>"id"</span>
                    <span>]</span>
                <span>}</span>
            <span>],</span>
            <span>"sql"</span><span>:</span> <span>"select * from t1"</span>
        <span>},</span>
        <span>"id"</span><span>:</span> <span>"9-1"</span><span>,</span>
        <span>"type"</span><span>:</span> <span>"queries"</span>
    <span>},</span>
    <span>"links"</span><span>:</span> <span>{</span>
        <span>"self"</span><span>:</span> <span>"http://localhost:8989/v1/sql/9/queries/9-1/"</span>
    <span>}</span>
<span>}</span>
</pre></div>


<ul>
<li>An error consists of an object with the <code>errno</code> field set to the MariaDB error
  code, the <code>message</code> field set to the human-readable error message and the
  <code>sqlstate</code> field set to the current SQLSTATE of the connection.</li>
</ul>
<div><pre><span></span><span>{</span>
    <span>"data"</span><span>:</span> <span>{</span>
        <span>"attributes"</span><span>:</span> <span>{</span>
            <span>"results"</span><span>:</span> <span>[</span>
                <span>{</span>
                    <span>"errno"</span><span>:</span> <span>1064</span><span>,</span>
                    <span>"message"</span><span>:</span> <span>"You have an error in your SQL syntax; check the manual that corresponds to your MariaDB server version for the right syntax to use near 'table t1' at line 1"</span><span>,</span>
                    <span>"sqlstate"</span><span>:</span> <span>"42000"</span>
                <span>}</span>
            <span>],</span>
            <span>"sql"</span><span>:</span> <span>"select syntax_error from table t1"</span>
        <span>},</span>
        <span>"id"</span><span>:</span> <span>"4-1"</span><span>,</span>
        <span>"type"</span><span>:</span> <span>"queries"</span>
    <span>},</span>
    <span>"links"</span><span>:</span> <span>{</span>
        <span>"self"</span><span>:</span> <span>"http://localhost:8989/v1/sql/4/queries/4-1/"</span>
    <span>}</span>
<span>}</span>
</pre></div>


<ul>
<li>An OK response is returned for any result that completes successfully but not
  return rows (e.g. an <code>INSERT</code> or <code>UPDATE</code> statement). The <code>affected_rows</code>
  field contains the number of rows affected by the operation, the
  <code>last_insert_id</code> contains the auto-generated ID and the <code>warnings</code> field
  contains the number of warnings raised by the operation.</li>
</ul>
<div><pre><span></span><span>{</span>
    <span>"data"</span><span>:</span> <span>{</span>
        <span>"attributes"</span><span>:</span> <span>{</span>
            <span>"results"</span><span>:</span> <span>[</span>
                <span>{</span>
                    <span>"affected_rows"</span><span>:</span> <span>0</span><span>,</span>
                    <span>"last_insert_id"</span><span>:</span> <span>0</span><span>,</span>
                    <span>"warnings"</span><span>:</span> <span>0</span>
                <span>}</span>
            <span>],</span>
            <span>"sql"</span><span>:</span> <span>"drop table t1"</span>
        <span>},</span>
        <span>"id"</span><span>:</span> <span>"6-1"</span><span>,</span>
        <span>"type"</span><span>:</span> <span>"queries"</span>
    <span>},</span>
    <span>"links"</span><span>:</span> <span>{</span>
        <span>"self"</span><span>:</span> <span>"http://localhost:8989/v1/sql/6/queries/6-1/"</span>
    <span>}</span>
<span>}</span>
</pre></div>


<p>It is also possible for the fields of the error response to be present in the
resultset response if the result ended with an error but still generated some
data. Usually this happens when query execution is interrupted but a partial
result was generated by the server.</p>
<h4 id="response_5">Response</h4>
<p>Query successfully executed:</p>
<p><code>Status: 201 Created</code></p>
<div><pre><span></span><span>{</span>
    <span>"data"</span><span>:</span> <span>{</span>
        <span>"attributes"</span><span>:</span> <span>{</span>
            <span>"results"</span><span>:</span> <span>[</span>
                <span>{</span>
                    <span>"affected_rows"</span><span>:</span> <span>0</span><span>,</span>
                    <span>"last_insert_id"</span><span>:</span> <span>0</span><span>,</span>
                    <span>"warnings"</span><span>:</span> <span>0</span>
                <span>}</span>
            <span>],</span>
            <span>"sql"</span><span>:</span> <span>"drop table t1"</span>
        <span>},</span>
        <span>"id"</span><span>:</span> <span>"6-1"</span><span>,</span>
        <span>"type"</span><span>:</span> <span>"queries"</span>
    <span>},</span>
    <span>"links"</span><span>:</span> <span>{</span>
        <span>"self"</span><span>:</span> <span>"http://localhost:8989/v1/sql/6/queries/6-1/"</span>
    <span>}</span>
<span>}</span>
</pre></div>


<p>Invalid payload or missing connection token:</p>
<p><code>Status: 403 Forbidden</code></p>
<p>Fatal connection error:</p>
<p><code>Status: 503 Service Unavailable</code></p>
<ul>
<li>If the API returns this response, the connection to the database server was
  lost. The only valid action to take at this point is to close it with the
  <code>DELETE /v1/sql/:id</code> endpoint.</li>
</ul>
    </div>


        
            <div id="subscribe" class="well well-small hide hidden-print"
                 data-subscribe-url="/kb/en/mariadb-maxscale-6-sql-resource/+subscriptions/add"
                 data-unsubscribe-url="/kb/en/mariadb-maxscale-6-sql-resource/+subscriptions/remove">
            </div>
        

        
        
    
        <div class="simple_section_nav">
            <ul class="nav nav-pills">
                
                    <li><a href="/kb/en/mariadb-maxscale-6-session-resource/">
                        ←  Session Resource
                    </a>
                    </li>
                
                
                    <li><a href="/kb/en/maxscale-6-rest-api/">
                        ↑ MaxScale 6 REST-API ↑
                    </a>
                    </li>
                
                
            </ul>
        </div>
    

        

        
        <h2>Comments</h2>
        
    
    <div id="comments" data-node-id="10798" data-comments-url="/kb/en/mariadb-maxscale-6-sql-resource/+comments"
         data-reply-url="/kb/en/mariadb-maxscale-6-sql-resource/comments/post/">
        Comments loading...
    </div>

        

    </div>


                    <div id="content_disclaimer" class="graybox">
                        Content reproduced on this site is the property of its respective owners,
                        and this content is not reviewed in advance by MariaDB. The views, information and opinions
                        expressed by this content do not necessarily represent those of MariaDB or any other party.
                    </div>
                </div>
            </section>

            
                <div id="right_bar" class="col-md-2">
                    
    
        
        <ul class="section_navigation well well-small hidden-xs hidden-sm">
            
                <li class="parent"><a href="/kb/en/maxscale-6-rest-api/">
                    ↑ MaxScale 6 REST-API ↑
                </a>
                </li>
            
            
                
                    <li>
                        <a href="/kb/en/mariadb-maxscale-6-admin-user-resource/">
                            
                             Admin User Resource
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/mariadb-maxscale-6-filter-resource/">
                            
                             Filter Resource
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/mariadb-maxscale-6-listener-resource/">
                            
                             Listener Resource
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/mariadb-maxscale-6-maxscale-resource/">
                            
                             MaxScale Resource
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/mariadb-maxscale-6-monitor-resource/">
                            
                             Monitor Resource
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/10788/">
                            
                             REST API
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/mariadb-maxscale-6-server-resource/">
                            
                             Server Resource
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/mariadb-maxscale-6-service-resource/">
                            
                             Service Resource
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/mariadb-maxscale-6-session-resource/">
                            
                             Session Resource
                        </a>
                    </li>
                
            
                
                    <li class="active">
                        <span> SQL Resource</span>
                        
                    </li>
                
            
        </ul>
    
    

                </div>
            
        </div>
    </div>
</div>

<!-- Footer -->
<footer id="footer">
    <div class="footer">
        <div class="container">
            <div class="row row-10">
                <div class="col-md-2 col-xs-4 item">
                    <h5>
                        <a href="/products" title="Products">Products</a>
                    </h5>
                    <ul>
                        <li id="menu-item-7816" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-7816"><a href="https://mariadb.com/products/mariadb-platform/">MariaDB Platform</a></li>
                        <li id="menu-item-7815" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-7815"><a href="https://mariadb.com/products/skysql/">MariaDB SkySQL</a></li>
                        <li id="menu-item-4172" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4172"><a href="https://mariadb.com/pricing/">Pricing</a></li>
                        <li id="menu-item-4163" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4163"><a href="https://mariadb.com/downloads/">Download MariaDB</a></li>
                    </ul>
                </div>
                <div class="col-md-2 col-xs-4 item">
                    <h5>
                        <a href="/services" title="Services">Services</a>
                    </h5>
                    <ul>
                        <li id="menu-item-4169" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4169"><a href="https://mariadb.com/services/remote-dba/">Remote DBA</a></li>
                        <li id="menu-item-41691" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4169"><a href="https://mariadb.com/services/skydba/">SkyDBA</a></li>
                        <li id="menu-item-4167" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4167"><a href="https://mariadb.com/services/enterprise-architect/">Enterprise Architect</a></li>
                        <li id="menu-item-4170" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4170"><a href="https://mariadb.com/services/technical-support-services/">Technical Support</a></li>
                        <li id="menu-item-4168" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4168"><a href="https://mariadb.com/services/migration-practice/">Migration Practice</a></li>
                        <li id="menu-item-4166" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4166"><a href="https://mariadb.com/services/consulting/">Consulting</a></li>
                        <li id="menu-item-4171" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4171"><a href="https://mariadb.com/services/training/">Training</a></li>
                    </ul>
                </div>
                <div class="col-md-2 col-xs-4 item">
                    <h5>
                        <a href="/resources" title="Resources">Resources</a>
                    </h5>
                    <ul>
                        <li id="menu-item-41751" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4175"><a href="https://mariadb.com/docs/">Documentation</a></li>
                        <li id="menu-item-41752" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4175"><a href="https://mariadb.com/developers/">Developers</a></li>
                        <li id="menu-item-4175" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4175"><a href="https://mariadb.com/resources/blog/">Blog</a></li>
                        <li id="menu-item-5462" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-5462"><a href="https://support.mariadb.com">Support</a></li>
                        <li id="menu-item-6004" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-6004"><a href="https://mariadb.com/openworks/">OpenWorks</a></li>
                        <li id="menu-item-60041" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-6004"><a href="https://mariadb.com/resources/customer-stories/">Customer Stories</a></li>
                        <li id="menu-item-7817" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-7817"><a href="https://mariadb.com/resources/events/">Events</a></li>
                        <li id="menu-item-4177" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4177"><a href="https://mariadb.com/roadshow/">MariaDB Roadshow</a></li>
                    </ul>
                </div>
                <div class="visible-xs visible-sm clear"></div>
                <div class="col-md-2 col-xs-5 item">
                    <h5>
                        <a href="/about-us" title="About MariaDB">About</a>
                    </h5>
                    <ul>
                        <li id="menu-item-4173" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4173"><a href="https://mariadb.com/contact/">Contact</a></li>
                        <li id="menu-item-4161" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4161"><a href="https://mariadb.com/about-us/leadership/">Leadership</a></li>
                        <li id="menu-item-4162" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4162"><a href="https://mariadb.com/about-us/partners/">Partners</a></li>
                        <li id="menu-item-4174" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4174"><a href="https://mariadb.com/newsroom/">Newsroom</a></li>
                        <li id="menu-item-4160" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4160"><a href="https://mariadb.com/about-us/investors/">Investors</a></li>
                        <li id="menu-item-4159" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4159"><a href="https://mariadb.com/about-us/careers/">Careers</a></li>
                        <li id="menu-item-41591" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4159"><a href="https://mariadb.com/trust/">Trust Center</a></li>
                        <li id="menu-item-41592" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4159"><a href="https://mariadb.com/vulnerability-reporting/">Vulnerability Reporting</a></li>
                    </ul>
                </div>
                <div class="col-md-4 col-xs-7 item">
                    <div id="block-footercontact" class="block block-block-content block-block-content22b3af28-0754-44ec-a5c6-4466568f37e3">
                        <h5><a href="/contact" title="Contact">Contact</a></h5>
                    </div>
                    <div class="social">
                        <ul class="list-inline">
                            <li>
                                <a target="_blank" href="https://www.facebook.com/MariaDB.dbms/" title="Facebook">
                                    <i class="fa fa-facebook" aria-hidden="true"></i>
                                </a>
                            </li>
                            <li>
                                <a target="_blank" href="https://twitter.com/mariadb" title="Twitter">
                                    <i class="fa fa-twitter" aria-hidden="true"></i>
                                </a>
                            </li>
                            <li>
                                <a target="_blank" href="https://www.linkedin.com/company/mariadb-corporation?trk=company_logo " title="LinkedIn">
                                    <i class="fa fa-linkedin" aria-hidden="true"></i>
                                </a>
                            </li>
                        </ul>
                    </div>
                    <div id="block-footerformcontact" class="block block-block-content block-block-contentd754ee1b-3cc9-40e7-9ef4-f504f1197fb1">
                        
                            <p>Subscribe to our newsletter!</p>
                            <script src="//app-sj15.marketo.com/js/forms2/js/forms2.min.js"></script><form id="mktoForm_1498"></form>
                            <script>
                                <!--//--><![CDATA[// ><!--
                                MktoForms2.loadForm("//app-sj15.marketo.com", "573-PXI-984", 1498);
                                //--><!]]]]><![CDATA[>
                                //--><!]]>
                            </script>
                        
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="footer-copyright">
        <div class="container text-center">
            <ul class="list-inline no-margin">
                <li>
                    <a href="/legal" title="Legal">Legal</a>
                </li>
                <li>
                    <a href="/privacy-policy" title="Privacy Policy">Privacy Policy</a>
                </li>
                <li>
                    <a href="/cookie-policy/" title="Cookies">Cookie Policy</a>
                </li>
            </ul>
            <p>Copyright &copy; 2023 MariaDB. All rights reserved.</p>
        </div>
    </div>
</footer>
</div>

<div id="ajax_loading">
    <img src="/kb/static/images/ajax-loader.a51c5608d01a.gif" />
</div>

    <!-- Google Tag Manager -->
    <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-MK2847"
                      height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
            '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MK2847');</script>
    <!-- End Google Tag Manager -->

</body>

<script type="text/javascript" src="/kb/static/js/main.fed4ec768178.js" charset="utf-8"></script>

</html>