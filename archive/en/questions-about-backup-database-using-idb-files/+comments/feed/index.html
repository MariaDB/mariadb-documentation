<?xml version="1.0" encoding="utf-8"?>
<rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title>MariaDB Knowledge Base Comments for: Questions about backup database using idb files</title><link>https://mariadb.com/kb/en/questions-about-backup-database-using-idb-files/+comments/feed/</link><description></description><atom:link href="https://mariadb.com/kb/en/questions-about-backup-database-using-idb-files/+comments/feed/" rel="self"></atom:link><language>en-us</language><lastBuildDate>Mon, 07 Oct 2024 13:21:51 +0000</lastBuildDate><item><title>Re: Questions about backup database using idb files</title><link>https://mariadb.com/kb/en/questions-about-backup-database-using-idb-files/+comments/3986</link><description>&lt;p&gt;The .ibd files never store table ID. Index pages do store index ID and transaction ID, and every page contains a tablespace ID and a log sequence number (LSN). All these will be rewritten by ALTER TABLE…IMPORT TABLESPACE.&lt;/p&gt;
&lt;p&gt;I would like to improve this:&lt;/p&gt;
&lt;ul start="1"&gt;&lt;li&gt;&lt;a href="https://jira.mariadb.org/browse/MDEV-11658"&gt;MDEV-11658&lt;/a&gt; Simpler, faster IMPORT of InnoDB tables
&lt;/li&gt;&lt;li&gt;&lt;a href="https://jira.mariadb.org/browse/MDEV-15225"&gt;MDEV-15225&lt;/a&gt; Can't import .ibd file with temporal type format differing from mysql56_temporal_format
&lt;/li&gt;&lt;/ul&gt;
&lt;p&gt;The reason why arbitrarily copying files while InnoDB is running is not safe is that the InnoDB buffer pool basically acts as a write-back cache. Also, plain FLUSH TABLES or FLUSH TABLES…WITH READ LOCK has no effect on InnoDB, because InnoDB can perform some writes in the background, on files that have not been touched by SQL for quite a while. These background writes will be synchronized and suppressed by FLUSH TABLES…FOR EXPORT.&lt;/p&gt;
&lt;p&gt;MySQL 5.7 implemented CREATE TABLESPACE for InnoDB, but MariaDB did not follow with that. It is hard to design and implement all aspects of that in a consistent way. For example, you cannot export and import such shared tablespaces in MySQL.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Marko Mäkelä</dc:creator><guid>https://mariadb.com/kb/en/questions-about-backup-database-using-idb-files/+comments/3986</guid></item></channel></rss>