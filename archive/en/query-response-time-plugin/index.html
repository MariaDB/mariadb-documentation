<!DOCTYPE html>
<html>
<head data-cookie-domain=""
      data-cookie-path="/">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="apple-touch-icon" sizes="180x180" href="/kb/static/images/favicons/apple-touch-icon.159e713979be.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/kb/static/images/favicons/favicon-32x32.bc0ac1d5d11e.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/kb/static/images/favicons/favicon-16x16.5801f8f0f34e.png">
    <link rel="shortcut icon" href="/kb/static/images/favicons/favicon.d122d305dee4.ico" type="image/x-icon" />

    <title>Query Response Time Plugin - MariaDB Knowledge Base</title>

    <link href="/kb/static/css/main.f7633538c846.css" rel="stylesheet" type="text/css" />

    

    

    <!-- FB Open Graph tags -->
    <meta property="og:title" content="Query Response Time Plugin" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://mariadb.com/kb/en/query-response-time-plugin/" />
    <meta property="og:image" content="http://mariadb.comaskmonty-logo.png" />
    <meta property="og:site_name" content="MariaDB KnowledgeBase" />
    <meta property="fb:admins" content="514852603" />
    <meta property="og:description" content="Records statistics on the time to execute queries on MariaDB Server." />

    <meta name="description" content="Records statistics on the time to execute queries on MariaDB Server." />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="//fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet"/>
    
</head>
<body class="mpkb nodes products nodes_view jqui" id="nodes_view">





<div id="menu-mobile" class="visible-sm visible-xs">

    <div>
        <div id="mobile-close-menu" class="text-right">
            <a href="javascript:void(0)" title="Close Menu" id="back-main" class="toggle-menu">X<span></span></a>
        </div>
    </div>
    <div class="mainmenu-mobile">
        <ul class="ls-none ul-menu">
            <li data-sub="submenu5"><a class="open-form-search" href="/kb/search/" title="Search">Search </a></li>
            <li data-sub="submenu0"><a href="/products" title="Products">Products</a><span class="arrow-main"></span></li>
            <li data-sub="submenu1"><a href="/services" title="Services">Services</a><span class="arrow-main"></span></li>
            <li data-sub="submenu2"><a href="/resources" title="Resources">Resources</a><span class="arrow-main"></span></li>
            <li data-sub="submenu3"><a href="/about-us" title="About">About</a><span class="arrow-main"></span></li>
            <li data-sub="submenu4"><a href="/contact" title="Contact">Contact</a></li>
        </ul>
    </div>

    <div class="nav-top-mobile">
        <div class="select-box form">

            <ul class="inline-block-md mb-none top-nav">
                <li>

                </li>
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/query-response-time-plugin/"> Login</a>
                    </li>
                
            </ul>



        </div>
        <p class="text-center copyright">Copyright &copy; 2024 MariaDB. All rights reserved.</p>
    </div>
</div>
<div class="violator-wrap d-none" id="top_violator">
    <div class="container">
        <div class="row">
            <div class="col-xs-12 col-sm-12">
                <div class="violator-outer">
                    <div class="violator-inner">
                        <div class="row">
                            <div class="col-xs-12 col-sm-9 col-lg-7 col-lg-offset-2" id="top_violator_content">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="content-link" target="_blank" rel="nofollow noreferrer">
                                    <span>The Ultimate Guide to High Availability with MariaDB</span>
                                </a>
                            </div>
                            <div class="col-xs-12 col-sm-3" id="top_violator_cta">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="btn btn-mariadb" target="_blank" rel="nofollow noreferrer">Download Now</a>
                            </div>
                        </div>
                    </div>
                    <button type="button" class="btn btn-link close-btn">
                        <svg xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 24 24" width="15px" height="15px"><path d="M 4.9902344 3.9902344 A 1.0001 1.0001 0 0 0 4.2929688 5.7070312 L 10.585938 12 L 4.2929688 18.292969 A 1.0001 1.0001 0 1 0 5.7070312 19.707031 L 12 13.414062 L 18.292969 19.707031 A 1.0001 1.0001 0 1 0 19.707031 18.292969 L 13.414062 12 L 19.707031 5.7070312 A 1.0001 1.0001 0 0 0 18.980469 3.9902344 A 1.0001 1.0001 0 0 0 18.292969 4.2929688 L 12 10.585938 L 5.7070312 4.2929688 A 1.0001 1.0001 0 0 0 4.9902344 3.9902344 z"/></svg>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="wrapper">
<div id="top-nav">
    <div class="container">
        <ul class="hidden-sm hidden-xs" >
            <li><a href="https://mariadb.com/kb/">Knowledge Base</a></li>
            <li><a href="https://mariadb.com/contact/">Contact</a></li>
            
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/query-response-time-plugin/" rel="nofollow">Login</a>
                    </li>
                
            
            
            <li id="search-form">
                <form action="/kb/en/+search/" method="get" id="search-block-form" accept-charset="UTF-8">
                    <input id="search" title="Enter the terms you wish to search for."
                           placeholder="Search . . ." type="text"
                           name="q" value="" size="15" maxlength="128" class="form-text"
                           data-autocomplete-url="/kb/en/+search/autocomplete/">
                    <input type="hidden" name="quick" value="1" />
                    <input type="hidden" name="source" value="kb" />
                </form>
            </li>
            <li><a id="search-toggler" href="/kb/search/">Search</a></li>
            
        </ul>
    </div>
</div>
<div id="navbar-bottom" class="navbar">
    <div class="container">
        
        
        
        
        <div class="row">
            <div class="col-md-3 col-sm-9 col-xs-9">
                <a class="brand" href="/" title="MariaDB">
                    <img src="/kb/static/images/logo-2018-black.95f5978ae14d.png">
                </a>
            </div>
            <div class="col-md-9 hidden-sm hidden-xs">
                <div class="main-menu">
                    <ul id="main-menu" class="nav navbar-nav inline-block-sm">
    <li class="has-sub full-menu">
        <a href="/products" title="Products">Products</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/services" title="Services">Services</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/pricing" title="Pricing">Pricing</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/resources" title="Resources">Resources</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/about-us" title="About Us">About Us</a>
    </li>
    <li class="">
        <a class="button electric-eel small top-bar-right-download" href="/downloads/">Download</a>
    </li>
</ul>
                </div>
            </div>
            <div class="col-md-3 visible-sm visible-xs col-sm-3 col-xs-3 ps-rv">
                <div class="navbar-header text-right pull-right">
                    <button type="button" class="menu-control toggle-menu" id="open-menu">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="main">
    <div class="container">
        

        <div id="subheader1" class="clearfix">
            <div class="pull-left">
                
                <div id="breadcrumbs" class="breadcrumb">
                    <a href="/kb/en/">Knowledge Base</a>
                    


    
    » <a class="crumb" href="/kb/en/documentation/">MariaDB Server Documentation</a>
    

    
    » <a class="crumb" href="/kb/en/columns-storage-engines-and-plugins/">Columns, Storage Engines, and Plugins</a>
    

    
    » <a class="crumb" href="/kb/en/plugins/">Plugins</a>
    

    
    » <a class="crumb" href="/kb/en/other-plugins/">Other Plugins</a>
    


    » <a class="node_link crumb" href="/kb/en/query-response-time-plugin/">Query Response Time Plugin</a>


                </div>
                
            </div>
        </div>
    </div>
    <div class="container" id="container-main">
        <div class="row">
            
            
                
                <aside id="sidebar-first" class="sidebar col-md-2 hidden-xs hidden-sm hidden-print">
                    
                        
                        <ul id="category_menu" class="nav nav-pills nav-stacked">
                            <li><a href="/kb/en/">Home</a></li>
                            
                                
                                    <li><a href="/kb/en/+questions/">Open Questions</a></li>
                                
                                <li><a href="/kb/en/documentation/">MariaDB Server</a></li>
                                <li><a href="/kb/en/maxscale/">MariaDB MaxScale</a></li>
                                <li><a href="/kb/en/mariadb-columnstore/">MariaDB ColumnStore</a></li>
                                <li><a href="/kb/en/connectors/">Connectors</a></li>
                            

                        </ul>
                    

                    
<div>



<div class="well well-small box actions"><div>

        <a class="btn btn-block btn-blue btn-sm" href="/kb/en/query-response-time-plugin/+history" rel="nofollow">History</a>
        
        
        
        <a class="btn btn-block btn-blue btn-sm" href="/kb/en/query-response-time-plugin/+source/">Source</a>
        
        <a class="btn btn-block btn-blue btn-sm flag" href="/kb/en/query-response-time-plugin/+flag"
                data-flag-url="/kb/en/query-response-time-plugin/+flag" rel="nofollow">
                Flag as Spam / Inappropriate</a>
        
        <a class="btn btn-block btn-blue btn-sm" href="/kb/en/query-response-time-plugin/+translate/">
                Translate</a>
        

</div>
</div>





<div class="well well-small box node_info"><div>

    <dl>
        <dt>Created</dt>
        <dd>

<span class="datetime" title="2013-07-02 11:24">11 years, 1 month ago</span></dd>

        <dt>Modified</dt>
        <dd>

<span class="datetime" title="2024-07-31 09:04">2 weeks, 4 days ago</span></dd>

        <dt>Type</dt>
        <dd>article</dd>

        <dt>Status</dt>
        <dd>active</dd>

        <dt>License</dt>
        <dd>
            
                <a href="/kb/en/query-response-time-plugin/+license/">CC BY-SA / Gnu FDL</a>
            
        </dd>

        
    </dl>

    
    <ul class="rss_feeds">
        <li><a href="/kb/en/query-response-time-plugin/+history/feed/">
            History</a>
        </li>
        <li><a href="/kb/en/query-response-time-plugin/+comments/feed/">
            Comments</a>
        </li>
    </ul>
    

</div>
</div>





    
    
    

<div class="well well-small box attachments"><div><div class="edit_link pull-right"><a href="/kb/en/query-response-time-plugin/+edit/attachments/">Edit</a></div><h5>Attachments</h5></div><div>

        
            <div class="no_data">No attachments exist</div>
        
    
</div>
</div>

    



    
    
        

<div class="well well-small box"><div><h5>Localized Versions</h5></div><div>

        <ul>
            
            <li><a href="/kb/it/query_response_time-plugin/">QUERY_RESPONSE_TIME plugin</a> [it]</li>
            
        </ul>
        
</div>
</div>

    






</div>


                    

































                </aside>
            
            
            
                
            
            
                
            
            <section id="content" class="limited_width col-md-8 clearfix">
                
                    <h1>Query Response Time Plugin</h1>
                

                



                <div>
                    
    

    
    
    

    <div class="node creole">
        
        
        


    
    <div class="answer formatted">
        <p>The <code>query_response_time</code> plugin creates the <a href="/kb/en/information-schema-query_response_time-table/">QUERY_RESPONSE_TIME</a> table in the <a href="/kb/en/information-schema/">INFORMATION_SCHEMA</a> database. The plugin also adds the <a href="/kb/en/show-query_response_time/">SHOW QUERY_RESPONSE_TIME</a> and <a href="/kb/en/flush/">FLUSH  QUERY_RESPONSE_TIME</a> statements.</p>
<p>The <a href="/kb/en/slow-query-log/">slow query log</a> provides exact information about queries that take a long time to execute. However, sometimes there are a large number of queries that each take a very short amount of time to execute. This feature provides a tool for analyzing that information by counting and displaying the number of queries according to the the length of time they took to execute. </p>
<p>This feature is based on Percona's <a href="http://www.percona.com/doc/percona-server/5.5/diagnostics/response_time_distribution.html">Response Time Distribution</a>.</p>
<div class="table_of_contents well well-small">
<h3>Contents</h3>
 <ol class="toc">

    <li class=""><a href="#installing-the-plugin" title="Installing the Plugin">Installing the Plugin</a></li>

    <li class=""><a href="#uninstalling-the-plugin" title="Uninstalling the Plugin">Uninstalling the Plugin</a></li>

    <li class=""><a href="#response-time-distribution" title="Response Time Distribution">Response Time Distribution</a></li>

    <li class=""><a href="#using-the-plugin" title="Using the Plugin">Using the Plugin</a>    <ol class="toc">

        <li class=""><a href="#using-the-information-schema-table" title="Using the Information Schema Table">Using the Information Schema Table</a></li>

        <li class=""><a href="#using-the-show-statement" title="Using the SHOW Statement">Using the SHOW Statement</a></li>

        <li class=""><a href="#flushing-plugin-data" title="Flushing Plugin Data">Flushing Plugin Data</a>    </ol>
</li>

    <li class=""><a href="#versions" title="Versions">Versions</a></li>

    <li class=""><a href="#system-variables" title="System Variables">System Variables</a>    <ol class="toc">

        <li class=""><a href="#query_response_time_flush" title="query_response_time_flush">query_response_time_flush</a></li>

        <li class=""><a href="#query_response_time_range_base" title="query_response_time_range_base">query_response_time_range_base</a></li>

        <li class=""><a href="#query_response_time_exec_time_debug" title="query_response_time_exec_time_debug">query_response_time_exec_time_debug</a></li>

        <li class=""><a href="#query_response_time_stats" title="query_response_time_stats">query_response_time_stats</a>    </ol>
</li>

    <li class=""><a href="#options" title="Options">Options</a>    <ol class="toc">

        <li class=""><a href="#query_response_time" title="query_response_time">query_response_time</a></li>

        <li class=""><a href="#query_response_time_audit" title="query_response_time_audit">query_response_time_audit</a>    </ol>
 </ol>
</li>
</div>
<h2 class="anchored_heading" id="installing-the-plugin">Installing the Plugin</h2>
<p>This shared library actually consists of two different plugins:</p>
<ul start="1"><li><code>QUERY_RESPONSE_TIME</code> - An INFORMATION_SCHEMA plugin that exposes statistics.
</li><li><code>QUERY_RESPONSE_TIME_AUDIT</code> - audit plugin, collects statistics.
</li></ul>
<p>Both plugins need to be installed to get meaningful statistics.</p>
<p>Although the plugin's shared library is distributed with MariaDB by default, the plugins are not actually installed by MariaDB by default. There are two methods that can be used to install the plugins with MariaDB.</p>
<p>The first method can be used to install the plugin library without restarting the server. You can install the plugins dynamically by executing <a href="/kb/en/install-soname/">INSTALL SONAME</a> or <a href="/kb/en/install-plugin/">INSTALL PLUGIN</a>. For example:</p>
<pre class="fixed"><span class="n">INSTALL</span> <span class="n">SONAME</span> <span class="s1">&#39;query_response_time&#39;</span><span class="p">;</span>
</pre><p>The second method can be used to tell the server to load the plugin library when it starts up. The plugins can be installed this way by providing the <a href="/kb/en/mysqld-options/#-plugin-load">--plugin-load</a> or the <a href="/kb/en/mysqld-options/#-plugin-load-add">--plugin-load-add</a> options. This can be specified as a command-line argument to <a href="/kb/en/mysqld-options/">mysqld</a> or it can be specified in a relevant server <a href="/kb/en/configuring-mariadb-with-option-files/#option-groups">option group</a> in an <a href="/kb/en/configuring-mariadb-with-option-files/">option file</a>. For example:</p>
<pre class="fixed">[mariadb]
...
plugin_load_add = query_response_time
</pre><p>Note that in both cases you have to activate data collection by changing the  <a href="#query_response_time_stats">query_response_time_stats</a> setting to ON, it is OFF by default even when the plugin library is loaded.</p>
<p>You can change the setting at runtime with</p>
<pre class="fixed"><span class="k">SET</span> <span class="k">GLOBAL</span> <span class="n">query_response_time_stats</span><span class="o">=</span><span class="k">ON</span><span class="p">;</span>
</pre><p>or in the options file after the plugin has been loaded:</p>
<pre class="fixed">[mariadb]
...
plugin_load_add = query_response_time
query_response_time_stats=ON;
</pre><h2 class="anchored_heading" id="uninstalling-the-plugin">Uninstalling the Plugin</h2>
<p>You can uninstall the plugin dynamically by executing <a href="/kb/en/uninstall-soname/">UNINSTALL SONAME</a> or <a href="/kb/en/uninstall-plugin/">UNINSTALL PLUGIN</a>. For example:</p>
<pre class="fixed"><span class="n">UNINSTALL</span> <span class="n">SONAME</span> <span class="s1">&#39;query_response_time&#39;</span><span class="p">;</span>
</pre><p>If you installed the plugin by providing the <a href="/kb/en/mysqld-options/#-plugin-load">--plugin-load</a> or the <a href="/kb/en/mysqld-options/#-plugin-load-add">--plugin-load-add</a> options in a relevant server <a href="/kb/en/configuring-mariadb-with-option-files/#option-groups">option group</a> in an <a href="/kb/en/configuring-mariadb-with-option-files/">option file</a>, then those options should be removed to prevent the plugin from being loaded the next time the server is restarted.</p>
<h2 class="anchored_heading" id="response-time-distribution">Response Time Distribution</h2>
<p>The user can define time intervals that divide the range 0 to positive infinity into smaller intervals and then collect the number of commands whose execution times fall into each of those intervals.</p>
<p>Each interval is described as:</p>
<pre class="fixed">(range_base ^ n; range_base ^ (n+1)]
</pre><p>The range_base is some positive number (see Limitations). The interval is defined as the difference between two nearby powers of the range base.</p>
<p>For example, if the range base=10, we have the following intervals:</p>
<pre class="fixed">(0; 10 ^ -6], (10 ^ -6; 10 ^ -5], (10 ^ -5; 10 ^ -4], ..., 
  (10 ^ -1; 10 ^1], (10^1; 10^2]...(10^7; positive infinity]
</pre><p>or</p>
<pre class="fixed">(0; 0.000001], (0.000001; 0.000010], (0.000010; 0.000100], ..., 
  (0.100000; 1.0]; (1.0; 10.0]...(1000000; positive infinity]
</pre><p>For each interval, a count is made of the queries with execution times that fell into that interval.</p>
<p>You can select the range of the intervals by changing the range base. For example, for base range=2 we have the following intervals:</p>
<pre class="fixed">(0; 2 ^ -19], (2 ^ -19; 2 ^ -18], (2 ^ -18; 2 ^ -17], ..., 
  (2 ^ -1; 2 ^1], (2 ^ 1; 2 ^ 2]...(2 ^ 25; positive infinity]
</pre><p>or</p>
<pre class="fixed">(0; 0.000001], (0.000001, 0.000003], ..., 
  (0.25; 0.5], (0.5; 2], (2; 4]...(8388608; positive infinity]
</pre><p>Small numbers look strange (i.e., don’t look like powers of 2), because we lose precision on division when the ranges are calculated at runtime. In the resulting table, you look at the high boundary of the range.</p>
<p>For example, you may see:</p>
<pre class="fixed">SELECT * FROM INFORMATION_SCHEMA.QUERY_RESPONSE_TIME;
+----------------+-------+----------------+
| TIME           | COUNT | TOTAL          |
+----------------+-------+----------------+
|       0.000001 |     0 |       0.000000 |
|       0.000010 |    17 |       0.000094 |
|       0.000100 |  4301         0.236555 |
|       0.001000 |  1499 |       0.824450 |
|       0.010000 | 14851 |      81.680502 |
|       0.100000 |  8066 |     443.635693 |
|       1.000000 |     0 |       0.000000 |
|      10.000000 |     0 |       0.000000 |
|     100.000000 |     1 |      55.937094 |
|    1000.000000 |     0 |       0.000000 |
|   10000.000000 |     0 |       0.000000 |
|  100000.000000 |     0 |       0.000000 |
| 1000000.000000 |     0 |       0.000000 |
| TOO LONG       |     0 | TOO LONG       |
+----------------+-------+----------------+
</pre><p>This means there were:</p>
<pre class="fixed wrap">* 17 queries with 0.000001 &lt; query execution time &lt; = 0.000010 seconds; total execution time of the 17 queries = 0.000094 seconds

* 4301 queries with 0.000010 &lt; query execution time &lt; = 0.000100 seconds; total execution time of the 4301 queries = 0.236555 seconds

* 1499 queries with 0.000100 &lt; query execution time &lt; = 0.001000 seconds; total execution time of the 1499 queries = 0.824450 seconds

* 14851 queries with 0.001000 &lt; query execution time &lt; = 0.010000 seconds; total execution time of the 14851 queries = 81.680502 seconds

* 8066 queries with 0.010000 &lt; query execution time &lt; = 0.100000 seconds; total execution time of the 8066 queries = 443.635693 seconds

* 1 query with 10.000000 &lt; query execution time &lt; = 100.0000 seconds; total execution time of the 1 query = 55.937094 seconds
</pre><h2 class="anchored_heading" id="using-the-plugin">Using the Plugin</h2>
<h3 class="anchored_heading" id="using-the-information-schema-table">Using the Information Schema Table</h3>
<p>You can get the distribution by querying the the <a href="/kb/en/information-schema-query_response_time-table/">QUERY_RESPONSE_TIME</a> table in the <a href="/kb/en/information-schema/">INFORMATION_SCHEMA</a> database. For example:</p>
<pre class="fixed"><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">INFORMATION_SCHEMA</span><span class="p">.</span><span class="n">QUERY_RESPONSE_TIME</span><span class="p">;</span>
</pre><p>You can also write more complex queries. For example:</p>
<pre class="fixed"><span class="k">SELECT</span> <span class="k">c</span><span class="p">.</span><span class="k">count</span><span class="p">,</span> <span class="k">c</span><span class="p">.</span><span class="n">time</span><span class="p">,</span>
<span class="p">(</span><span class="k">SELECT</span> <span class="k">SUM</span><span class="p">(</span><span class="n">a</span><span class="p">.</span><span class="k">count</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">INFORMATION_SCHEMA</span><span class="p">.</span><span class="n">QUERY_RESPONSE_TIME</span> <span class="k">as</span> <span class="n">a</span> 
   <span class="k">WHERE</span> <span class="n">a</span><span class="p">.</span><span class="k">count</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="k">as</span> <span class="n">query_count</span><span class="p">,</span>
<span class="p">(</span><span class="k">SELECT</span> <span class="k">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span>     <span class="k">FROM</span> <span class="n">INFORMATION_SCHEMA</span><span class="p">.</span><span class="n">QUERY_RESPONSE_TIME</span> <span class="k">as</span> <span class="n">b</span> 
  <span class="k">WHERE</span> <span class="n">b</span><span class="p">.</span><span class="k">count</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="k">as</span> <span class="n">not_zero_region_count</span><span class="p">,</span>
<span class="p">(</span><span class="k">SELECT</span> <span class="k">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span>     <span class="k">FROM</span> <span class="n">INFORMATION_SCHEMA</span><span class="p">.</span><span class="n">QUERY_RESPONSE_TIME</span><span class="p">)</span> <span class="k">as</span> <span class="n">region_count</span>
<span class="k">FROM</span> <span class="n">INFORMATION_SCHEMA</span><span class="p">.</span><span class="n">QUERY_RESPONSE_TIME</span> <span class="k">as</span> <span class="k">c</span> 
  <span class="k">WHERE</span> <span class="k">c</span><span class="p">.</span><span class="k">count</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">;</span>
</pre><p>Note: If <a href="#query_response_time_stats">query_response_time_stats</a> is set to <code>ON</code>, then the execution times for these two SELECT queries will also be collected.</p>
<h3 class="anchored_heading" id="using-the-show-statement">Using the SHOW Statement</h3>
<p>As an alternative to the <a href="/kb/en/information-schema-query_response_time-table/">QUERY_RESPONSE_TIME</a> table in the <a href="/kb/en/information-schema/">INFORMATION_SCHEMA</a> database, you can also use the <a href="/kb/en/show-query_response_time/">SHOW QUERY_RESPONSE_TIME</a> statement. For example:</p>
<pre class="fixed"><span class="k">SHOW</span> <span class="n">QUERY_RESPONSE_TIME</span><span class="p">;</span>
</pre><h3 class="anchored_heading" id="flushing-plugin-data">Flushing Plugin Data</h3>
<p>Flushing the plugin data does two things:</p>
<ul start="1"><li>Clears the collected times from the <a href="/kb/en/information-schema-query_response_time-table/">QUERY_RESPONSE_TIME</a> table in the <a href="/kb/en/information-schema/">INFORMATION_SCHEMA</a> database.
</li><li>Reads the value of <a href="#query_response_time_range_base">query_response_time_range_base</a> and uses it to set the range base for the table.
</li></ul>
<p>Plugin data can be flushed with the <a href="/kb/en/flush/">FLUSH  QUERY_RESPONSE_TIME</a> statement. For example:</p>
<pre class="fixed"><span class="n">FLUSH</span> <span class="n">QUERY_RESPONSE_TIME</span><span class="p">;</span>
</pre><p>Setting the <a href="#query_response_time_flush">query_response_time_flush</a> system variable has the same effect. For example:</p>
<pre class="fixed"><span class="k">SET</span> <span class="k">GLOBAL</span> <span class="n">query_response_time_flush</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span>
</pre><h2 class="anchored_heading" id="versions">Versions</h2>
<div class="cstm-style darkheader-nospace-borders"><table><tr><th>Version</th><th>Status</th><th>Introduced</th></tr>
<tr><td>1.0</td><td>Stable</td><td><a href="/kb/en/mariadb-10113-release-notes/">MariaDB 10.1.13</a></td></tr>
<tr><td>1.0</td><td>Gamma</td><td><a href="/kb/en/mariadb-10010-release-notes/">MariaDB 10.0.10</a></td></tr>
<tr><td>1.0</td><td>Alpha</td><td><a href="/kb/en/mariadb-1004-release-notes/">MariaDB 10.0.4</a></td></tr>
</table>
</div><h2 class="anchored_heading" id="system-variables">System Variables</h2>
<h3 class="anchored_heading" id="query_response_time_flush"><code>query_response_time_flush</code></h3>
<ul start="1"><li><strong>Description:</strong> Updating this variable flushes the statistics and re-reads <a href="#query_response_time_range_base">query_response_time_range_base</a>.
</li><li><strong>Commandline:</strong> None
</li><li><strong>Scope:</strong> Global
</li><li><strong>Dynamic:</strong> Yes
</li><li><strong>Data Type:</strong> <code>boolean</code>
</li><li><strong>Default Value:</strong> <code>OFF</code>
</li></ul>
<hr>
<h3 class="anchored_heading" id="query_response_time_range_base"><code>query_response_time_range_base</code></h3>
<ul start="1"><li><strong>Description:</strong> Select base of log for <code>QUERY_RESPONSE_TIME</code> ranges. WARNING: variable change takes affect only after flush.
</li><li><strong>Commandline:</strong> <code class="fixed" style="white-space:pre-wrap">--query-response-time-range-base=#</code>
</li><li><strong>Scope:</strong> Global
</li><li><strong>Dynamic:</strong> Yes
</li><li><strong>Data Type:</strong> <code>numeric</code>
</li><li><strong>Default Value:</strong> <code>10</code>
</li><li><strong>Range:</strong> <code>2</code> to <code>1000</code>
</li></ul>
<hr>
<h3 class="anchored_heading" id="query_response_time_exec_time_debug"><code>query_response_time_exec_time_debug</code></h3>
<ul start="1"><li><strong>Description:</strong> Pretend queries take this many microseconds. When 0 (the default) use the actual execution time. 
<ul start="1"><li>This system variable is only available when the plugin is a <a href="/kb/en/compiling-mariadb-for-debugging/">debug build</a>.
</li></ul>
</li><li><strong>Scope:</strong> Global
</li><li><strong>Dynamic:</strong> Yes
</li><li><strong>Data Type:</strong> <code>numeric</code>
</li><li><strong>Default Value:</strong> <code>0</code>
</li><li><strong>Range:</strong> <code>0</code> to <code>31536000</code>
</li></ul>
<hr>
<h3 class="anchored_heading" id="query_response_time_stats"><code>query_response_time_stats</code></h3>
<ul start="1"><li><strong>Description:</strong> Enable or disable query response time statistics collecting
</li><li><strong>Commandline:</strong> <code class="fixed" style="white-space:pre-wrap">query-response-time-stats[={0|1}]</code>
</li><li><strong>Scope:</strong> Global
</li><li><strong>Dynamic:</strong> Yes
</li><li><strong>Data Type:</strong> <code>boolean</code>
</li><li><strong>Default Value:</strong> <code>OFF</code>
</li></ul>
<hr>
<h2 class="anchored_heading" id="options">Options</h2>
<h3 class="anchored_heading" id="query_response_time"><code>query_response_time</code></h3>
<ul start="1"><li><strong>Description:</strong> Controls how the server should treat the plugin when the server starts up.
<ul start="1"><li>Valid values are:
<ul start="1"><li><code>OFF</code> - Disables the plugin without removing it from the <a href="/kb/en/mysqlplugin-table/">mysql.plugins</a> table.
</li><li><code>ON</code> - Enables the plugin. If the plugin cannot be initialized, then the server will still continue starting up, but the plugin will be disabled.
</li><li><code>FORCE</code> - Enables the plugin. If the plugin cannot be initialized, then the server will fail to start with an error.
</li><li><code>FORCE_PLUS_PERMANENT</code> - Enables the plugin. If the plugin cannot be initialized, then the server will fail to start with an error. In addition, the plugin cannot be uninstalled with <a href="/kb/en/uninstall-soname/">UNINSTALL SONAME</a> or <a href="/kb/en/uninstall-plugin/">UNINSTALL PLUGIN</a> while the server is running.
</li></ul>
</li><li>See <a href="/kb/en/plugin-overview/#configuring-plugin-activation-at-server-startup">Plugin Overview: Configuring Plugin Activation at Server Startup</a> for more information.
</li></ul>
</li><li><strong>Commandline:</strong> <code class="fixed" style="white-space:pre-wrap">--query-response-time=value</code>
</li><li><strong>Data Type:</strong> <code>enumerated</code>
</li><li><strong>Default Value:</strong> <code>ON</code>
</li><li><strong>Valid Values:</strong> <code>OFF</code>, <code>ON</code>, <code>FORCE</code>, <code>FORCE_PLUS_PERMANENT</code>
</li></ul>
<hr>
<h3 class="anchored_heading" id="query_response_time_audit"><code>query_response_time_audit</code></h3>
<ul start="1"><li><strong>Description:</strong> Controls how the server should treat the plugin when the server starts up.
<ul start="1"><li>Valid values are:
<ul start="1"><li><code>OFF</code> - Disables the plugin without removing it from the <a href="/kb/en/mysqlplugin-table/">mysql.plugins</a> table.
</li><li><code>ON</code> - Enables the plugin. If the plugin cannot be initialized, then the server will still continue starting up, but the plugin will be disabled.
</li><li><code>FORCE</code> - Enables the plugin. If the plugin cannot be initialized, then the server will fail to start with an error.
</li><li><code>FORCE_PLUS_PERMANENT</code> - Enables the plugin. If the plugin cannot be initialized, then the server will fail to start with an error. In addition, the plugin cannot be uninstalled with <a href="/kb/en/uninstall-soname/">UNINSTALL SONAME</a> or <a href="/kb/en/uninstall-plugin/">UNINSTALL PLUGIN</a> while the server is running.
</li></ul>
</li><li>See <a href="/kb/en/plugin-overview/#configuring-plugin-activation-at-server-startup">Plugin Overview: Configuring Plugin Activation at Server Startup</a> for more information.
</li></ul>
</li><li><strong>Commandline:</strong> <code class="fixed" style="white-space:pre-wrap">--query-response-time-audit=value</code>
</li><li><strong>Data Type:</strong> <code>enumerated</code>
</li><li><strong>Default Value:</strong> <code>ON</code>
</li><li><strong>Valid Values:</strong> <code>OFF</code>, <code>ON</code>, <code>FORCE</code>, <code>FORCE_PLUS_PERMANENT</code>
</li></ul>
<hr>

    </div>


        
            <div id="subscribe" class="well well-small hide hidden-print"
                 data-subscribe-url="/kb/en/query-response-time-plugin/+subscriptions/add"
                 data-unsubscribe-url="/kb/en/query-response-time-plugin/+subscriptions/remove">
            </div>
        

        
        
    
        <div class="simple_section_nav">
            <ul class="nav nav-pills">
                
                    <li><a href="/kb/en/query-cache-information-plugin/">
                        ← Query Cache Information Plugin
                    </a>
                    </li>
                
                
                    <li><a href="/kb/en/other-plugins/">
                        ↑ Other Plugins ↑
                    </a>
                    </li>
                
                
                    <li class="pull-right"><a href="/kb/en/sql-error-log-plugin/">
                        SQL Error Log Plugin →
                    </a>
                    </li>
                
            </ul>
        </div>
    

        

        
        <h2>Comments</h2>
        
    
    <div id="comments" data-node-id="3610" data-comments-url="/kb/en/query-response-time-plugin/+comments"
         data-reply-url="/kb/en/query-response-time-plugin/comments/post/">
        Comments loading...
    </div>

        

    </div>


                    <div id="content_disclaimer" class="graybox">
                        Content reproduced on this site is the property of its respective owners,
                        and this content is not reviewed in advance by MariaDB. The views, information and opinions
                        expressed by this content do not necessarily represent those of MariaDB or any other party.
                    </div>
                </div>
            </section>

            
                <div id="right_bar" class="col-md-2">
                    
    
        
        <ul class="section_navigation well well-small hidden-xs hidden-sm">
            
                <li class="parent"><a href="/kb/en/other-plugins/">
                    ↑ Other Plugins ↑
                </a>
                </li>
            
            
                
                    <li>
                        <a href="/kb/en/compression-plugins/">
                            <span class="pull-right not_primary"></span>
                            Compression Plugins
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/disks-plugin/">
                            
                            Disks Plugin
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/feedback-plugin/">
                            
                            Feedback Plugin
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/locales-plugin/">
                            <span class="pull-right not_primary"></span>
                            Locales Plugin
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/metadata-lock-info-plugin/">
                            
                            METADATA_LOCK_INFO Plugin
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/mysql_json/">
                            
                            MYSQL_JSON
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/query-cache-information-plugin/">
                            
                            Query Cache Information Plugin
                        </a>
                    </li>
                
            
                
                    <li class="active">
                        <span>Query Response Time Plugin</span>
                        
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/sql-error-log-plugin/">
                            <span class="pull-right not_primary"></span>
                            SQL Error Log Plugin
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/user-statistics/">
                            <span class="pull-right not_primary"></span>
                            User Statistics
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/user-variables-plugin/">
                            
                            User Variables Plugin
                        </a>
                    </li>
                
            
        </ul>
    
    

                </div>
            
        </div>
    </div>
</div>

<!-- Footer -->
<footer id="footer">
    <div class="footer">
        <div class="container">
            <div class="row">
                <div class="col-xs-12">
                    <ul class="list-inline text-center footer-nav">
                        <li>
                            <h5>
                                <a href="https://mariadb.com/products" title="Products">Products</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/services" title="Services">Services</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/pricing" title="Pricing">Pricing</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/resources" title="Resources">Resources</a>
                            </h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/about-us" title="About MariaDB">About Us</a></h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/download" title="Download">Download MariaDB</a></h5>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="row row-10">
                
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div id="block-footerformcontact" class="block block-block-content block-block-contentd754ee1b-3cc9-40e7-9ef4-f504f1197fb1">
                        
                            <h5 style="font-weight: 400;">Subscribe to our newsletter!</h5>
                            <script src="//app-sj15.marketo.com/js/forms2/js/forms2.min.js"></script><form id="mktoForm_1498"></form>
                            <script>
                                <!--//--><![CDATA[// ><!--
                                MktoForms2.loadForm("//app-sj15.marketo.com", "573-PXI-984", 1498);
                                //--><!]]]]><![CDATA[>
                                //--><!]]>
                            </script>
                        
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div class="footer-copyright">
                        <div class="text-center">
                            <ul class="list-inline no-margin">
                                <li>
                                    <a href="/legal" title="Legal">Legal</a>
                                </li>
                                <li>
                                    <a href="/privacy-policy" title="Privacy Policy">Privacy Policy</a>
                                </li>
                                <li>
                                    <a href="/cookie-policy/" title="Cookies">Cookie Policy</a>
                                </li>
                            </ul>
                            <p>Copyright &copy; 2024 MariaDB. All rights reserved.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
</footer>
</div>

<div id="ajax_loading">
    <img src="/kb/static/images/ajax-loader.a51c5608d01a.gif" />
</div>

    <!-- Google Tag Manager -->
    <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-MK2847"
                      height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
            '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MK2847');</script>
    <!-- End Google Tag Manager -->

</body>

<script type="text/javascript" src="/kb/static/js/main.1587e3a666fc.js" charset="utf-8"></script>

</html>