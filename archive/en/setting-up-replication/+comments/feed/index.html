<?xml version="1.0" encoding="utf-8"?>
<rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title>MariaDB Knowledge Base Comments for: Setting Up Replication</title><link>https://mariadb.com/kb/en/setting-up-replication/+comments/feed/</link><description></description><atom:link href="https://mariadb.com/kb/en/setting-up-replication/+comments/feed/" rel="self"></atom:link><language>en-us</language><lastBuildDate>Mon, 26 Aug 2024 03:44:43 +0000</lastBuildDate><item><title>Re: Setting Up Replication</title><link>https://mariadb.com/kb/en/setting-up-replication/+comments/6567</link><description>&lt;p&gt;I'm running primary as 10.11.3-MariaDB-1+rpi1-log Raspbian 12 and secondary as 10.11.4-MariaDB-1deb12u1 Debian 12. Obviously version mismatch is an issue but I have a more basic issue.&lt;/p&gt;
&lt;p&gt;The file /.my.cnf sets server_id=2 in the secondary. It seems that this value is picked correctly because  SHOW GLOBAL VARIABLES reports server_id=2.&lt;/p&gt;
&lt;p&gt;Yet, I get the following message in SHOW SLAVE STATUS\G
Last_IO_Error: Fatal error: The slave I/O thread stops because master and slave have equal MariaDB server ids; these ids must be different for replication to work (or the --replicate-same-server-id option must be used on slave but this does not always make sense; please check the manual before using it).&lt;/p&gt;
&lt;p&gt;The primary is implicitly using server_id=1. In my limited knowledge there should be no conflict but there (apart from knowing which .cnf file is being used). Therefore, should not be any mismatch.&lt;/p&gt;
&lt;p&gt;I am assuming that the primary is working fine (server_id=1) but what/where changes are needed in the secondary server for replication to start? Thanks.&lt;/p&gt;
&lt;p&gt;Regards.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Matha Goram</dc:creator><guid>https://mariadb.com/kb/en/setting-up-replication/+comments/6567</guid></item><item><title>Re: Setting Up Replication</title><link>https://mariadb.com/kb/en/setting-up-replication/+comments/6011</link><description>&lt;p&gt;I have used these instructions to setup 10 or so master slave replications successfully. I now want to do the same where the master is on-premise, and the slave is on an AWS EC2 RDP.  The on-premise network is connected via a site-to-site VPN.  Communications have been tested sucessfuly.  Can I use the same instructions above?  When I look for the my.cnf file on the AWS RDP slave I cannot find it?  Also when I try to use the change master to command it says I have to have "super" rights.  When I try to enable super rights AWS will not allow me.&lt;/p&gt;
&lt;p&gt;Is there a different set of instructions I should use for replicating with AWS?&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Craig Robertson</dc:creator><guid>https://mariadb.com/kb/en/setting-up-replication/+comments/6011</guid></item><item><title>Re: Setting Up Replication</title><link>https://mariadb.com/kb/en/setting-up-replication/+comments/5747</link><description>&lt;p&gt;No. In the configuration file, the parameter name is "server_id".&lt;/p&gt;
&lt;p&gt;The hyphen is used in the command-line arguments.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Iv√°n Stepaniuk</dc:creator><guid>https://mariadb.com/kb/en/setting-up-replication/+comments/5747</guid></item><item><title>Re: Setting Up Replication</title><link>https://mariadb.com/kb/en/setting-up-replication/+comments/5720</link><description>&lt;p&gt;This article is mentioning "server_id", but it seams that the real property name is  "server-id".&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">David Bullado</dc:creator><guid>https://mariadb.com/kb/en/setting-up-replication/+comments/5720</guid></item><item><title>Re: Setting Up Replication</title><link>https://mariadb.com/kb/en/setting-up-replication/+comments/4406</link><description>&lt;p&gt;&lt;em&gt;Now you need prevent any changes to the data while you view the binary log position. You'll use this to tell the slave at exactly which point it should start replicating from.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;On the master, flush and lock all tables by running FLUSH TABLES WITH READ LOCK. Keep this session running - exiting it will release the lock. Get the current position in the binary log by running SHOW MASTER STATUS:&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Don't forget to check and possibly set two variables: &lt;/p&gt;
&lt;pre class="fixed"&gt;show variables like 'wait_timeout';
show variables like 'interactive_timeout';
set variables interactive_timeout=XXX;
set variables work_timeout=XXX;
&lt;/pre&gt;&lt;p&gt;The defaults for these are very large, at 28,800 seconds, but many installations set them smaller.  Mine were 300 seconds, so my locks timed out and I had to do the database dump again.&lt;/p&gt;
&lt;p&gt;I know that my dump takes 42 minutes, so I set them for 3600 seconds, or one hour. Your mileage may vary :)&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Ed Greenberg</dc:creator><guid>https://mariadb.com/kb/en/setting-up-replication/+comments/4406</guid></item><item><title>Re: Setting Up Replication</title><link>https://mariadb.com/kb/en/setting-up-replication/+comments/4391</link><description>&lt;p&gt;You actually can use a "blank" slave and set it up to replicate every event that has happened on the master since the was blank too. Although technically possible, this would require that you 1) can identify the exact transaction on the master that was equivalent to the clean slave's current state, 2) have saved all the binary logs on the master from that blank state up to the present, and 3) have the time to replay the master's transaction history on the slave.&lt;/p&gt;
&lt;p&gt;So your intuition is correct. It's just that practically speaking, letting the slave replay the master's transaction history from installation forward is a lot more difficult and time-consuming than starting from a recent backup.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Juan Vera</dc:creator><guid>https://mariadb.com/kb/en/setting-up-replication/+comments/4391</guid></item><item><title>Re: Setting Up Replication</title><link>https://mariadb.com/kb/en/setting-up-replication/+comments/4255</link><description>&lt;p&gt;I am a total database replication newbie with a dumb question:  If I'm setting up a slave to which a database will be replicated from the master, why do I first have to backup the database from the master and restore it to the slave?  Isn't that the very definition of "replication"?  Why doesn't the replication process handle the copying?&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Steve Turner</dc:creator><guid>https://mariadb.com/kb/en/setting-up-replication/+comments/4255</guid></item><item><title>Re: Setting Up Replication</title><link>https://mariadb.com/kb/en/setting-up-replication/+comments/3656</link><description>&lt;p&gt;Thanks for the response. We are planning to upgrade same as you suggested, 
But i am still wondering how option "slave_type_conversions=All_NON_lossy" worked, when i am using mixed binary logging. Replication broken in case of truncate table which generated a statement type binary log.Please help in understanding the same.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Ankur Goyal</dc:creator><guid>https://mariadb.com/kb/en/setting-up-replication/+comments/3656</guid></item><item><title>Re: Setting Up Replication</title><link>https://mariadb.com/kb/en/setting-up-replication/+comments/3651</link><description>&lt;p&gt;I guess the safest way to go is to upgrade your master server to 10.2. I wonder if replication between 5.5 and 10.2 actually works, you say it does, but you face a problem that could arise from the version difference.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Vasilis Lourdas</dc:creator><guid>https://mariadb.com/kb/en/setting-up-replication/+comments/3651</guid></item><item><title>Re: Setting Up Replication</title><link>https://mariadb.com/kb/en/setting-up-replication/+comments/3650</link><description>&lt;p&gt;I have added a slave of version &lt;a href="/kb/en/mariadb-10214-release-notes/"&gt;mariadb 10.2.14&lt;/a&gt; to a master of version mysql 5.5.20.
i have table with character set latin1 on master and same table with utf4mb4 on slave.&lt;/p&gt;
&lt;p&gt;As per my knowledge replication between different character set is not allowed. But i am able to replicate. I got below conversion error.
Last_Errno: 1677
Last_Error: Column 0 of table 'xx.xx' cannot be converted from type 'varchar(100)' to type 'varchar(100)'&lt;/p&gt;
&lt;p&gt; but when i used slave_type_conversions=All_NON_lossy on slave, everything is working fine. Using mixed binlog format .&lt;/p&gt;
&lt;p&gt;Will you please help how replication is possible with different char set and how my error got resolve when setting 'slave_type_conversions' is only effective in case of row based logging?&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Ankur Goyal</dc:creator><guid>https://mariadb.com/kb/en/setting-up-replication/+comments/3650</guid></item><item><title>Re: Slave won't connect, but will connect from console</title><link>https://mariadb.com/kb/en/setting-up-replication/+comments/2794</link><description>&lt;p&gt;Turns out semanage prevented the client machine from connecting remotely.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Silviu Dan Tanasie</dc:creator><guid>https://mariadb.com/kb/en/setting-up-replication/+comments/2794</guid></item><item><title>Slave won't connect, but will connect from console</title><link>https://mariadb.com/kb/en/setting-up-replication/+comments/2788</link><description>&lt;p&gt;After setting up a Galera cluster and realising is not exactly what I needed I decided to go for a master-slave setup. I set wserp_on=OFF and went through this guide.&lt;/p&gt;
&lt;p&gt;As far as I know I did everything right but for some reason my slave gets Permission denied when connecting to the master.
Thing is, if I connect manually from the slave to the master like:
mysql -u master -p --host ip --port port 
then it connects without a problem.
The user master is set with replication privileges.
I am using &lt;a href="/kb/en/mariadb-10121-release-notes/"&gt;MariaDB 10.1.21&lt;/a&gt; on Centos 7.&lt;/p&gt;
&lt;p&gt;Maybe it's a bug ?&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Silviu Dan Tanasie</dc:creator><guid>https://mariadb.com/kb/en/setting-up-replication/+comments/2788</guid></item><item><title>Re: Setting Up Replication - Skip slave start </title><link>https://mariadb.com/kb/en/setting-up-replication/+comments/2629</link><description>&lt;p&gt;It's an option rather than a variable, so listed at &lt;a href="/kb/en/mysqld-options/#-skip-slave-start"&gt;mysqld Options&lt;/a&gt; as well as &lt;a href="/kb/en/full-list-of-mariadb-options-system-and-status-variables/"&gt;Full List of MariaDB Options, System and Status Variables&lt;/a&gt;. It should be mentioned in the replication text though, so thanks for pointing that out, will incorporate it.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Ian Gilfillan</dc:creator><guid>https://mariadb.com/kb/en/setting-up-replication/+comments/2629</guid></item><item><title>Setting Up Replication - Skip slave start </title><link>https://mariadb.com/kb/en/setting-up-replication/+comments/2627</link><description>&lt;p&gt;Firstly I notice neither here or in the Replication and Binary Log Server System Variables page there is mention of skip_slave_start. It is not in Server System Variables either. Could the documentation be amended and include some information on either the setting up page or elsewhere why to use or not use it in your server.cnf&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Peter McLarty</dc:creator><guid>https://mariadb.com/kb/en/setting-up-replication/+comments/2627</guid></item><item><title>Re: Slave identification changes between computer name and IP address</title><link>https://mariadb.com/kb/en/setting-up-replication/+comments/2327</link><description>&lt;p&gt;But I want it the other way round! I have to use the full computer name for identification, IP-addresses are not allowed (and not practical as they may change). So skip-name-resolve would not help me.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Walter Heeroma</dc:creator><guid>https://mariadb.com/kb/en/setting-up-replication/+comments/2327</guid></item><item><title>Re: Slave identification changes between computer name and IP address</title><link>https://mariadb.com/kb/en/setting-up-replication/+comments/2326</link><description>&lt;p&gt;you may try add skip-name-resolve to your my.cnf, or start mysqld with the --skip-name-resolve option.
this option would make mysql do not resolve host names when checking client connections (only use ip address).&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Qiu cb</dc:creator><guid>https://mariadb.com/kb/en/setting-up-replication/+comments/2326</guid></item><item><title>Slave identification changes between computer name and IP address</title><link>https://mariadb.com/kb/en/setting-up-replication/+comments/2314</link><description>&lt;p&gt;When using replication in MariaDB, slaves identify themselves at the master, and this identification is checked against valid users with replication permissions in the master database.&lt;/p&gt;
&lt;p&gt;In my test situation this identification frequently fails. By checking the column Last_IO_Error in the 'SHOW ALL SLAVES STATUS' output I learned that the slave switched its identification between full computer name (computer name plus domain name) and IP address. Though these switches were not very frequent (maybe once per hour), they seemed to happen completely at random. As the user was created on the master with the full computer name as hostname, this resulted in a failure whenever the slave introduced itself by its IP address.&lt;/p&gt;
&lt;p&gt;This problem might be easily circumvented by creating a user with a wildcard, or an IP mask along the pattern xxx.xxx.%.% for a hostname. But in the context where I am working, this is not an acceptable solution.&lt;/p&gt;
&lt;p&gt;So my question is: what is the cause of this erratic behaviour, and is there a way to force the slave to use computername plus domain as its identification?&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Walter Heeroma</dc:creator><guid>https://mariadb.com/kb/en/setting-up-replication/+comments/2314</guid></item><item><title>Re: Setting Up Replication</title><link>https://mariadb.com/kb/en/setting-up-replication/+comments/1817</link><description>&lt;p&gt;Is it not simpler to setup replication using mysqldump with the --gtid and --master-data options? It seems to me that this would be much easier (and safer) for admins new to or experimenting with replication.&lt;/p&gt;
&lt;p&gt;As a relative newbie to this myself I don't want to change the article myself, but it seems like a lot of this is just boiler-plate that mysqldump does for you while simultaneously generating a file that can be used to setup a slave in a single step.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Haravikk Kh'arr</dc:creator><guid>https://mariadb.com/kb/en/setting-up-replication/+comments/1817</guid></item><item><title>Re: Setting Up Replication</title><link>https://mariadb.com/kb/en/setting-up-replication/+comments/1595</link><description>&lt;p&gt;Not exactly. Imagine each group as a server, plus the servers (masters, slaves) that DIRECTLY communicate with the first server. Within such groups, id's must be unique.&lt;/p&gt;
&lt;p&gt;The followind replication topography is ok:&lt;/p&gt;
&lt;p&gt;id1 -&amp;gt; id:2 -&amp;gt; id:3 -&amp;gt; id:1&lt;/p&gt;
&lt;p&gt;But of course it is a bad practice.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Federico Razzoli</dc:creator><guid>https://mariadb.com/kb/en/setting-up-replication/+comments/1595</guid></item><item><title>Re: Setting Up Replication</title><link>https://mariadb.com/kb/en/setting-up-replication/+comments/1483</link><description>&lt;p&gt;"...and must be unique for each server in the replicating group."  what is replicating group? all servers which take part into replication?&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Oleksandr Byelkin</dc:creator><guid>https://mariadb.com/kb/en/setting-up-replication/+comments/1483</guid></item><item><title>Re: Setting Up Replication</title><link>https://mariadb.com/kb/en/setting-up-replication/+comments/781</link><description>&lt;p&gt;Grant:&lt;/p&gt;
&lt;p&gt;GRANT REPLICATION SLAVE ON *.* TO 'replication_user'@'slave_host' IDENTIFIED BY 'bigs3cret';
FLUSH PRIVILEGES;&lt;/p&gt;
&lt;p&gt;To check replication status:&lt;/p&gt;
&lt;p&gt;SHOW SLAVE STATUS\G&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Alexandr Gorlov</dc:creator><guid>https://mariadb.com/kb/en/setting-up-replication/+comments/781</guid></item><item><title>Re: Setting Up Replication</title><link>https://mariadb.com/kb/en/setting-up-replication/+comments/542</link><description>&lt;p&gt;Thanks for the quick howto.&lt;/p&gt;
&lt;p&gt;MySQL replication is one of the features that we took into account when choosing the database for our application. It works really nice and can distribute the load when you need two kind of users (updaters and readers). We were really impressed by the way it worked.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Vasilis Lourdas</dc:creator><guid>https://mariadb.com/kb/en/setting-up-replication/+comments/542</guid></item></channel></rss>