<!DOCTYPE html>
<html>
<head data-cookie-domain=""
      data-cookie-path="/">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="apple-touch-icon" sizes="180x180" href="/kb/static/images/favicons/apple-touch-icon.159e713979be.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/kb/static/images/favicons/favicon-32x32.bc0ac1d5d11e.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/kb/static/images/favicons/favicon-16x16.5801f8f0f34e.png">
    <link rel="shortcut icon" href="/kb/static/images/favicons/favicon.d122d305dee4.ico" type="image/x-icon" />

    <title>CONNECT - Using the TBL and MYSQL Table Types Together - Source - MariaDB Knowledge Base</title>

    <link href="/kb/static/css/main.b9e1e104f007.css" rel="stylesheet" type="text/css" />

    
        <meta name="robots" content="noindex, nofollow">
    

    <!-- FB Open Graph tags -->
    <meta property="og:title" content="CONNECT - Using the TBL and MYSQL Table Types Together - Source" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://mariadb.com/kb/en/connect-using-the-tbl-and-mysql-table-types-together/+source/" />
    <meta property="og:image" content="http://mariadb.comaskmonty-logo.png" />
    <meta property="og:site_name" content="MariaDB KnowledgeBase" />
    <meta property="fb:admins" content="514852603" />
    <meta property="og:description" content="" />

    <meta name="description" content="" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="//fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet"/>
    
</head>
<body class="mpkb nodes autoresize nodes_source jqui" id="nodes_source">





<div id="menu-mobile" class="visible-sm visible-xs">

    <div>
        <div id="mobile-close-menu" class="text-right">
            <a href="javascript:void(0)" title="Close Menu" id="back-main" class="toggle-menu">X<span></span></a>
        </div>
    </div>
    <div class="mainmenu-mobile">
        <ul class="ls-none ul-menu">
            <li data-sub="submenu5"><a class="open-form-search" href="/kb/search/" title="Search">Search </a></li>
            <li data-sub="submenu0"><a href="/products" title="Products">Products</a><span class="arrow-main"></span></li>
            <li data-sub="submenu1"><a href="/services" title="Services">Services</a><span class="arrow-main"></span></li>
            <li data-sub="submenu2"><a href="/resources" title="Resources">Resources</a><span class="arrow-main"></span></li>
            <li data-sub="submenu3"><a href="/about-us" title="About">About</a><span class="arrow-main"></span></li>
            <li data-sub="submenu4"><a href="/contact" title="Contact">Contact</a></li>
        </ul>
    </div>

    <div class="nav-top-mobile">
        <div class="select-box form">

            <ul class="inline-block-md mb-none top-nav">
                <li>

                </li>
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/connect-using-the-tbl-and-mysql-table-types-together/+source/"> Login</a>
                    </li>
                
            </ul>



        </div>
        <p class="text-center copyright">Copyright &copy; 2024 MariaDB. All rights reserved.</p>
    </div>
</div>
<div id="wrapper">
<div id="top-nav">
    <div class="container">
        <ul class="hidden-sm hidden-xs" >
            <li><a href="https://mariadb.com/kb/">Knowledge Base</a></li>
            <li><a href="https://mariadb.com/contact/">Contact</a></li>
            
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/connect-using-the-tbl-and-mysql-table-types-together/+source/" rel="nofollow">Login</a>
                    </li>
                
            
            
            <li id="search-form">
                <form action="/kb/en/+search/" method="get" id="search-block-form" accept-charset="UTF-8">
                    <input id="search" title="Enter the terms you wish to search for."
                           placeholder="Search . . ." type="text"
                           name="q" value="" size="15" maxlength="128" class="form-text"
                           data-autocomplete-url="/kb/en/+search/autocomplete/">
                    <input type="hidden" name="quick" value="1" />
                    <input type="hidden" name="source" value="kb" />
                </form>
            </li>
            <li><a id="search-toggler" href="/kb/search/">Search</a></li>
            
        </ul>
    </div>
</div>
<div id="navbar-bottom" class="navbar">
    <div class="container">
        
        
        
        
        <div class="row">
            <div class="col-md-3 col-sm-9 col-xs-9">
                <a class="brand" href="/" title="MariaDB">
                    <img src="/kb/static/images/logo-2018-black.95f5978ae14d.png">
                </a>
            </div>
            <div class="col-md-9 hidden-sm hidden-xs">
                <div class="main-menu">
                    <ul id="main-menu" class="nav navbar-nav inline-block-sm">
    <li class="has-sub full-menu">
        <a href="/products" title="Products">Products</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/services" title="Services">Services</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/pricing" title="Pricing">Pricing</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/resources" title="Resources">Resources</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/about-us" title="About Us">About Us</a>
    </li>
    <li class="">
        <a class="button electric-eel small top-bar-right-download" href="/downloads/">Download</a>
    </li>
</ul>
                </div>
            </div>
            <div class="col-md-3 visible-sm visible-xs col-sm-3 col-xs-3 ps-rv">
                <div class="navbar-header text-right pull-right">
                    <button type="button" class="menu-control toggle-menu" id="open-menu">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="main">
    <div class="container">
        

        <div id="subheader1" class="clearfix">
            <div class="pull-left">
                
                <div id="breadcrumbs" class="breadcrumb">
                    <a href="/kb/en/">Knowledge Base</a>
                    


    
    » <a class="crumb" href="/kb/en/documentation/">MariaDB Server Documentation</a>
    

    
    » <a class="crumb" href="/kb/en/columns-storage-engines-and-plugins/">Columns, Storage Engines, and Plugins</a>
    

    
    » <a class="crumb" href="/kb/en/storage-engines/">Storage Engines</a>
    

    
    » <a class="crumb" href="/kb/en/connect/">CONNECT</a>
    

    
    » <a class="crumb" href="/kb/en/connect-table-types/">CONNECT Table Types</a>
    


    » <a class="node_link crumb" href="/kb/en/connect-using-the-tbl-and-mysql-table-types-together/">CONNECT - Using the TBL and MYSQL Table Types Together</a>


                </div>
                
            </div>
        </div>
    </div>
    <div class="container" id="container-main">
        <div class="row">
            
            
                
                <aside id="sidebar-first" class="sidebar col-md-2 hidden-xs hidden-sm hidden-print">
                    
                        
                        <ul id="category_menu" class="nav nav-pills nav-stacked">
                            <li><a href="/kb/en/">Home</a></li>
                            
                                
                                    <li><a href="/kb/en/+questions/">Open Questions</a></li>
                                
                                <li><a href="/kb/en/documentation/">MariaDB Server</a></li>
                                <li><a href="/kb/en/maxscale/">MariaDB MaxScale</a></li>
                                <li><a href="/kb/en/mariadb-columnstore/">MariaDB ColumnStore</a></li>
                                <li><a href="/kb/en/connectors/">Connectors</a></li>
                            

                        </ul>
                    

                    
                        <div>
    

<div class="well well-small box actions"><div>

        <a class="btn btn-block btn-small" href="/kb/en/connect-using-the-tbl-and-mysql-table-types-together/">Return to article</a>
    
</div>
</div>

</div>
                    

                    

































                </aside>
            
            
            
                
            
            
            <section id="content" class="limited_width col-md-10 clearfix">
                
                    <h1>CONNECT - Using the TBL and MYSQL Table Types Together - Source</h1>
                

                



                <div>
                    

    

    
    <div class="revision_info">
        <dl class="table">
            <dt>Revision</dt>
            <dd><a href="/kb/en/connect-using-the-tbl-and-mysql-table-types-together/+r/53970/">53970</a></dd>
            <dt>User</dt>
            <dd>
<span class="user" id="user-2">
<a href="/kb/user/id/2" title="Daniel Bartholomew">Daniel Bartholomew</a>
</span></dd>
            <dt>Date</dt>
            <dd>

<span class="datetime" title="2017-04-12 16:02">2017-04-12 16:02</span></dd>
        </dl>
    </div>
    


    

    
        
        <textarea id="answer_source" class="creole_source autogrow">&lt;&lt;toc&gt;&gt;
Used together, these types lift all the limitations of the [[federated-storage-engine|FEDERATED]] and [[merge|MERGE]] engines.

**MERGE:** Its limitation is obvious, the merged tables must be identical [[myisam-storage-engine|MyISAM]] tables,
and MyISAM is not even the default engine for MariaDB. However, [[connect-table-types-tbl-table-type-table-list|TBL]] accesses a
collection of CONNECT tables, but because these tables can be user specified or
internally created [[connect-table-types-mysql-table-type-accessing-mysqlmariadb-tables|MYSQL]] tables, there is no limitation to the type of the
tables that can be merged.

TBL is also much more flexible. The merged tables must not be &#34;identical&#34;, they
just should have the columns defined in the TBL table. If the type of one
column in a merged table is not the one of the corresponding column of the TBL
table, the column value will be converted. As we have seen, if one column of
the TBL table of the TBL column does not exist in one of the merged table, the
corresponding value will be set to null. If columns in a sub-table have a
different name, they can be accessed by position using the FLAG column option
of CONNECT.

However, one limitation of the TBL type regarding MERGE is that TBL tables are
currently read-only; INSERT is not supported by TBL. Also, keep using MERGE to
access a list of identical MyISAM tables because it will be faster, not passing
by the MySQL API.


**FEDERATED(X):** The main limitation of FEDERATED is to access only MySQL/MariaDB tables. The
MYSQL table type of CONNECT has the same limitation but CONNECT provides the
[[connect-table-types-odbc-table-type-accessing-tables-from-other-dbms|ODBC table type]] and [[connect-jdbc-table-type-accessing-tables-from-other-dbms|JDBC table type]] that can access tables of any RDBS providing an ODBC or JDBC driver
(including MySQL even it is not really useful!)

Another major limitation of FEDERATED is to access only one table. By combining
TBL and MYSQL tables, CONNECT enables to access a collection of local or remote
tables as one table. Of course the sub-tables can be on different servers. With
one SELECT statement, a company manager will be able to interrogate results
coming from all of his subsidiary computers. This is great for distribution,
banking, and many other industries.

== Remotely executing complex queries
Many companies or administrations must deal with distributed information.
CONNECT enables to deal with it efficiently without having to copy it to a
centralized database. Let us suppose we have on some remote network machines
 //m1, m2, … mn// some information contained in two tables //t1// and //t2//.

Suppose we want to execute on all servers a query such as:

&lt;&lt;sql&gt;&gt;
select c1, sum(c2) from t1 a, t2 b where a.id = b.id group by c1;
&lt;&lt;/sql&gt;&gt;

This raises many problems. Returning the column values of the //t1// and //t2//
tables from all servers can be a lot of network traffic. The group by on the
possibly huge resulting tables can be a long process. In addition, the join on
the //t1// and //t2// tables may be relevant only if the joined tuples belong
to the same machine, obliging to add a condition on an additional tabid or
servid special column.

All this can be avoided and optimized by forcing the query to be locally
executed on each server and retrieving only the small results of the group by
queries. Here is how to do it. For each remote machine, create a table that
will retrieve the locally executed query. For instance for m1:

&lt;&lt;sql&gt;&gt;
create table rt1 engine=connect option_list=&#39;host=m1&#39;
srcdef=&#39;select c1, sum(c2) as sc2 from t1 a, t2 b where a.id = b.id group by c1&#39;;
&lt;&lt;/sql&gt;&gt;

Note the alias for the functional column. An alias would be required for the c1
column if its name was different on some machines. The t1 and t2 table names
can also be eventually different on the remote machines. The true names must be
used in the ##SRCDEF## parameter. This will create a set of tables with two columns
named c1 and sc2&lt;&lt;ref&gt;&gt;To generate the columns from the ##SRCDEF## query, CONNECT must execute it. This will make sure it is ok. However, if the remote server is not connected yet, or the remote table not existing yet, you can alternatively specify the columns in the create table statement.&lt;&lt;/ref&gt;&gt;.

Then create the table that will retrieve the result of all these tables:

&lt;&lt;sql&gt;&gt;
create table rtall engine=connect table_type=tbl
table_list=&#39;rt1,rt2,…,rtn&#39; option_list=&#39;thread=yes&#39;;
&lt;&lt;/sql&gt;&gt;

Now you can retrieve the desired result by:

&lt;&lt;sql&gt;&gt;
select c1, sum(sc2) from rtall;
&lt;&lt;/sql&gt;&gt;

Almost all the work will be done on the remote machines, simultaneously thanks
to the thread option, making this query super-fast even on big tables placed on
many remote machines.

&lt;&lt;style class=&#34;redbox&#34;&gt;&gt;
Thread is currently experimental. Use it only for test and report any malfunction on [[jira|JIRA]].
&lt;&lt;/style&gt;&gt;

== Providing a list of servers
An interesting case is when the query to run on remote machines is the same for
all of them. It is then possible to avoid declaring all sub-tables. In this
case, the table list option will be used to specify the list of servers the
##SRCDEF## query must be sent. This will be a list of URL’s and/or Federated
server names.

For instance, supposing that federated servers srv1, srv2, … srv//n// were
created for all remote servers, it will be possible to create a tbl table
allowing getting the result of a query executed on all of them by:

&lt;&lt;sql&gt;&gt;
create table qall [column definition]
engine=connect table_type=TBL srcdef=&#39;a query&#39;
table_list=&#39;srv1,srv2,…,srvn&#39; [option_list=&#39;thread=yes&#39;];
&lt;&lt;/sql&gt;&gt;

For instance:

&lt;&lt;sql&gt;&gt;
create table verall engine=connect table_type=TBL srcdef=&#39;select @@version&#39; table_list=&#39;,server_one&#39;;
select * from verall;
&lt;&lt;/sql&gt;&gt;

This reply:

&lt;&lt;style class=&#34;darkheader-nospace-borders&#34;&gt;&gt;
|= @@version
| 10.0.3-MariaDB-debug
| 10.0.2-MariaDB
&lt;&lt;/style&gt;&gt;

Here the server list specifies a void server corresponding to the local running
MariaDB and a federated server named //server_one//.

----
&lt;&lt;references&gt;&gt;

</textarea>
    


                    <div id="content_disclaimer" class="graybox">
                        Content reproduced on this site is the property of its respective owners,
                        and this content is not reviewed in advance by MariaDB. The views, information and opinions
                        expressed by this content do not necessarily represent those of MariaDB or any other party.
                    </div>
                </div>
            </section>

            
        </div>
    </div>
</div>

<!-- Footer -->
<footer id="footer">
    <div class="footer">
        <div class="container">
            <div class="row">
                <div class="col-xs-12">
                    <ul class="list-inline text-center footer-nav">
                        <li>
                            <h5>
                                <a href="https://mariadb.com/products" title="Products">Products</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/services" title="Services">Services</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/pricing" title="Pricing">Pricing</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/resources" title="Resources">Resources</a>
                            </h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/about-us" title="About MariaDB">About Us</a></h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/download" title="Download">Download MariaDB</a></h5>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="row row-10">
                
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div id="block-footerformcontact" class="block block-block-content block-block-contentd754ee1b-3cc9-40e7-9ef4-f504f1197fb1">
                        
                            <h5 style="font-weight: 400;">Subscribe to our newsletter!</h5>
                            <script src="//app-sj15.marketo.com/js/forms2/js/forms2.min.js"></script><form id="mktoForm_1498"></form>
                            <script>
                                <!--//--><![CDATA[// ><!--
                                MktoForms2.loadForm("//app-sj15.marketo.com", "573-PXI-984", 1498);
                                //--><!]]]]><![CDATA[>
                                //--><!]]>
                            </script>
                        
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div class="footer-copyright">
                        <div class="text-center">
                            <ul class="list-inline no-margin">
                                <li>
                                    <a href="/legal" title="Legal">Legal</a>
                                </li>
                                <li>
                                    <a href="/privacy-policy" title="Privacy Policy">Privacy Policy</a>
                                </li>
                                <li>
                                    <a href="/cookie-policy/" title="Cookies">Cookie Policy</a>
                                </li>
                            </ul>
                            <p>Copyright &copy; 2024 MariaDB. All rights reserved.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
</footer>
</div>

<div id="ajax_loading">
    <img src="/kb/static/images/ajax-loader.a51c5608d01a.gif" />
</div>

    <!-- Google Tag Manager -->
    <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-MK2847"
                      height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
            '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MK2847');</script>
    <!-- End Google Tag Manager -->

</body>

<script type="text/javascript" src="/kb/static/js/main.fed4ec768178.js" charset="utf-8"></script>

</html>