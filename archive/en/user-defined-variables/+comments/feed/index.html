<?xml version="1.0" encoding="utf-8"?>
<rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title>MariaDB Knowledge Base Comments for: User-Defined Variables</title><link>https://mariadb.com/kb/en/user-defined-variables/+comments/feed/</link><description></description><atom:link href="https://mariadb.com/kb/en/user-defined-variables/+comments/feed/" rel="self"></atom:link><language>en-us</language><lastBuildDate>Mon, 25 Nov 2024 03:11:52 +0000</lastBuildDate><item><title>Re: User-defined Variables</title><link>https://mariadb.com/kb/en/user-defined-variables/+comments/6183</link><description>&lt;p&gt;"Evaluation of *columns* is undefined". That is that 
SELECT @v:=5, @v=@v+5
may return [5,10] or [10,5] because the order of columns in SELECT col1, col2 does not follow from left to right? I assume that this is because of sql-philosophy (set theory) since order does not play a role.
Is there a way to consider the order?&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Fabio Valeri</dc:creator><guid>https://mariadb.com/kb/en/user-defined-variables/+comments/6183</guid></item><item><title>Re: User-Defined Variables</title><link>https://mariadb.com/kb/en/user-defined-variables/+comments/4332</link><description>&lt;p&gt;SELECT @var:=&amp;lt;expression&amp;gt; FROM...&lt;/p&gt;
&lt;p&gt;are executed, @var will always correspond to the value in the last row returned, as you might expect.&lt;/p&gt;
&lt;p&gt;i think the sql is exactly the same as mySQL
because in mySQL it generates different values according to the row&lt;/p&gt;
&lt;p&gt;whereas in mariaDB all rows are filled in with the same value in the last row&lt;/p&gt;
&lt;p&gt;so, what is the best solution?
anyone can explain it&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Ali masum</dc:creator><guid>https://mariadb.com/kb/en/user-defined-variables/+comments/4332</guid></item><item><title>Re: User-Defined Variables</title><link>https://mariadb.com/kb/en/user-defined-variables/+comments/4123</link><description>&lt;p&gt;Beware order of evaluation of rows when sorting. It would appear (at least as far as I've tested it) that when statements of the form:&lt;/p&gt;
&lt;p&gt;    SELECT @var:=&amp;lt;expression&amp;gt; FROM...&lt;/p&gt;
&lt;p&gt;are executed, @var will always correspond to the value in the last row returned, as you might expect.&lt;/p&gt;
&lt;p&gt;But if you do something like:&lt;/p&gt;
&lt;p&gt;    SELECT DISTINCT IFNULL(@var:=Name,'unknown') FROM Customers ORDER BY &amp;lt;some non-indexed expression&amp;gt; LIMIT 10&lt;/p&gt;
&lt;p&gt;The statement containing the variable assignment will be executed *before* the order-by. In this case, the value left in @var at the end might not even correspond to any of the rows returned!&lt;/p&gt;
&lt;p&gt;It would be good if the docs could clarify under exactly what conditions the order-of-variable-assignment-evaluation corresponds to the order-of-returned-rows, and especially under what conditions this can differ?&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Dean Trower</dc:creator><guid>https://mariadb.com/kb/en/user-defined-variables/+comments/4123</guid></item><item><title>Re: User-defined Variables</title><link>https://mariadb.com/kb/en/user-defined-variables/+comments/4120</link><description>&lt;p&gt;Check the docs for MySQL for more detail.  The "order" of @var:=@var+1 is never undefined, as the RHS *must* be evaluated first.  The problem is that the order of evaluation of *columns* is undefined, so:&lt;/p&gt;
&lt;p&gt;SET @v := 5;
SELECT @v, @v:=10;&lt;/p&gt;
&lt;p&gt;Might return either [5,10] or [10,10], depending on which column is evaluated first.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Dean Trower</dc:creator><guid>https://mariadb.com/kb/en/user-defined-variables/+comments/4120</guid></item><item><title>Re: User-Defined Variables</title><link>https://mariadb.com/kb/en/user-defined-variables/+comments/3295</link><description>&lt;p&gt;"They must be used to PREPARE a prepared statement:"&lt;/p&gt;
&lt;p&gt;Does this sentence have any other description? Such as "User-Defined Variable can not be used to provide as identifiers".&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">longshuai Ma</dc:creator><guid>https://mariadb.com/kb/en/user-defined-variables/+comments/3295</guid></item><item><title>Re: User-defined Variables</title><link>https://mariadb.com/kb/en/user-defined-variables/+comments/2846</link><description>&lt;p&gt;The text of this article says&lt;/p&gt;
&lt;p&gt;"It is unsafe to read a user-defined variable and set its value in the same statement (unless the command is SET), because the order of these actions is undefined."&lt;/p&gt;
&lt;p&gt;One of the examples does precisely that:&lt;/p&gt;
&lt;pre class="fixed"&gt;SELECT a, b, c, (@var:=@var+1) AS counter FROM my_table;
&lt;/pre&gt;&lt;p&gt;Is the example somehow safe?&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Verizon Team DB</dc:creator><guid>https://mariadb.com/kb/en/user-defined-variables/+comments/2846</guid></item><item><title>Re: is this usage of User-defined Variables guaranteed? </title><link>https://mariadb.com/kb/en/user-defined-variables/+comments/1264</link><description>&lt;p&gt;In your case, I don't see any potential problems.&lt;/p&gt;
&lt;ul start="1"&gt;&lt;li&gt;The subquery in which you initialize the variables should be constant.
&lt;/li&gt;&lt;li&gt;The order of expressions passed to IF() is always the same.
&lt;/li&gt;&lt;/ul&gt;
&lt;p&gt;I think that the statement you quoted refers to things like:&lt;/p&gt;
&lt;p&gt;SELECT @a := field1, @b := @a + 1 FROM table;&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Federico Razzoli</dc:creator><guid>https://mariadb.com/kb/en/user-defined-variables/+comments/1264</guid></item></channel></rss>