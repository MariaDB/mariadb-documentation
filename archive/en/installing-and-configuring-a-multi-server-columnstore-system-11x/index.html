<!DOCTYPE html>
<html>
<head data-cookie-domain=""
      data-cookie-path="/">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="apple-touch-icon" sizes="180x180" href="/kb/static/images/favicons/apple-touch-icon.159e713979be.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/kb/static/images/favicons/favicon-32x32.bc0ac1d5d11e.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/kb/static/images/favicons/favicon-16x16.5801f8f0f34e.png">
    <link rel="shortcut icon" href="/kb/static/images/favicons/favicon.d122d305dee4.ico" type="image/x-icon" />

    <title>Installing and Configuring a Multi Server ColumnStore System - 1.1.X - MariaDB Knowledge Base</title>

    <link href="/kb/static/css/main.f7633538c846.css" rel="stylesheet" type="text/css" />

    

    

    <!-- FB Open Graph tags -->
    <meta property="og:title" content="Installing and Configuring a Multi Server ColumnStore System - 1.1.X" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://mariadb.com/kb/en/installing-and-configuring-a-multi-server-columnstore-system-11x/" />
    <meta property="og:image" content="http://mariadb.comaskmonty-logo.png" />
    <meta property="og:site_name" content="MariaDB KnowledgeBase" />
    <meta property="fb:admins" content="514852603" />
    <meta property="og:description" content="How to install ColumnStore on a multi-server system" />

    <meta name="description" content="How to install ColumnStore on a multi-server system" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="//fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet"/>
    
</head>
<body class="mpkb nodes products nodes_view jqui" id="nodes_view">





<div id="menu-mobile" class="visible-sm visible-xs">

    <div>
        <div id="mobile-close-menu" class="text-right">
            <a href="javascript:void(0)" title="Close Menu" id="back-main" class="toggle-menu">X<span></span></a>
        </div>
    </div>
    <div class="mainmenu-mobile">
        <ul class="ls-none ul-menu">
            <li data-sub="submenu5"><a class="open-form-search" href="/kb/search/" title="Search">Search </a></li>
            <li data-sub="submenu0"><a href="/products" title="Products">Products</a><span class="arrow-main"></span></li>
            <li data-sub="submenu1"><a href="/services" title="Services">Services</a><span class="arrow-main"></span></li>
            <li data-sub="submenu2"><a href="/resources" title="Resources">Resources</a><span class="arrow-main"></span></li>
            <li data-sub="submenu3"><a href="/about-us" title="About">About</a><span class="arrow-main"></span></li>
            <li data-sub="submenu4"><a href="/contact" title="Contact">Contact</a></li>
        </ul>
    </div>

    <div class="nav-top-mobile">
        <div class="select-box form">

            <ul class="inline-block-md mb-none top-nav">
                <li>

                </li>
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/installing-and-configuring-a-multi-server-columnstore-system-11x/"> Login</a>
                    </li>
                
            </ul>



        </div>
        <p class="text-center copyright">Copyright &copy; 2024 MariaDB. All rights reserved.</p>
    </div>
</div>
<div class="violator-wrap d-none" id="top_violator">
    <div class="container">
        <div class="row">
            <div class="col-xs-12 col-sm-12">
                <div class="violator-outer">
                    <div class="violator-inner">
                        <div class="row">
                            <div class="col-xs-12 col-sm-9 col-lg-7 col-lg-offset-2" id="top_violator_content">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="content-link" target="_blank" rel="nofollow noreferrer">
                                    <span>The Ultimate Guide to High Availability with MariaDB</span>
                                </a>
                            </div>
                            <div class="col-xs-12 col-sm-3" id="top_violator_cta">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="btn btn-mariadb" target="_blank" rel="nofollow noreferrer">Download Now</a>
                            </div>
                        </div>
                    </div>
                    <button type="button" class="btn btn-link close-btn">
                        <svg xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 24 24" width="15px" height="15px"><path d="M 4.9902344 3.9902344 A 1.0001 1.0001 0 0 0 4.2929688 5.7070312 L 10.585938 12 L 4.2929688 18.292969 A 1.0001 1.0001 0 1 0 5.7070312 19.707031 L 12 13.414062 L 18.292969 19.707031 A 1.0001 1.0001 0 1 0 19.707031 18.292969 L 13.414062 12 L 19.707031 5.7070312 A 1.0001 1.0001 0 0 0 18.980469 3.9902344 A 1.0001 1.0001 0 0 0 18.292969 4.2929688 L 12 10.585938 L 5.7070312 4.2929688 A 1.0001 1.0001 0 0 0 4.9902344 3.9902344 z"/></svg>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="wrapper">
<div id="top-nav">
    <div class="container">
        <ul class="hidden-sm hidden-xs" >
            <li><a href="https://mariadb.com/kb/">Knowledge Base</a></li>
            <li><a href="https://mariadb.com/contact/">Contact</a></li>
            
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/installing-and-configuring-a-multi-server-columnstore-system-11x/" rel="nofollow">Login</a>
                    </li>
                
            
            
            <li id="search-form">
                <form action="/kb/en/+search/" method="get" id="search-block-form" accept-charset="UTF-8">
                    <input id="search" title="Enter the terms you wish to search for."
                           placeholder="Search . . ." type="text"
                           name="q" value="" size="15" maxlength="128" class="form-text"
                           data-autocomplete-url="/kb/en/+search/autocomplete/">
                    <input type="hidden" name="quick" value="1" />
                    <input type="hidden" name="source" value="kb" />
                </form>
            </li>
            <li><a id="search-toggler" href="/kb/search/">Search</a></li>
            
        </ul>
    </div>
</div>
<div id="navbar-bottom" class="navbar">
    <div class="container">
        
        
        
        
        <div class="row">
            <div class="col-md-3 col-sm-9 col-xs-9">
                <a class="brand" href="/" title="MariaDB">
                    <img src="/kb/static/images/logo-2018-black.95f5978ae14d.png">
                </a>
            </div>
            <div class="col-md-9 hidden-sm hidden-xs">
                <div class="main-menu">
                    <ul id="main-menu" class="nav navbar-nav inline-block-sm">
    <li class="has-sub full-menu">
        <a href="/products" title="Products">Products</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/services" title="Services">Services</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/pricing" title="Pricing">Pricing</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/resources" title="Resources">Resources</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/about-us" title="About Us">About Us</a>
    </li>
    <li class="">
        <a class="button electric-eel small top-bar-right-download" href="/downloads/">Download</a>
    </li>
</ul>
                </div>
            </div>
            <div class="col-md-3 visible-sm visible-xs col-sm-3 col-xs-3 ps-rv">
                <div class="navbar-header text-right pull-right">
                    <button type="button" class="menu-control toggle-menu" id="open-menu">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="main">
    <div class="container">
        

        <div id="subheader1" class="clearfix">
            <div class="pull-left">
                
                <div id="breadcrumbs" class="breadcrumb">
                    <a href="/kb/en/">Knowledge Base</a>
                    


    
    » <a class="crumb" href="/kb/en/documentation/">MariaDB Server Documentation</a>
    

    
    » <a class="crumb" href="/kb/en/columns-storage-engines-and-plugins/">Columns, Storage Engines, and Plugins</a>
    

    
    » <a class="crumb" href="/kb/en/storage-engines/">Storage Engines</a>
    

    
    » <a class="crumb" href="/kb/en/mariadb-columnstore/">MariaDB ColumnStore</a>
    

    
    » <a class="crumb" href="/kb/en/columnstore-getting-started/">ColumnStore Getting Started</a>
    

    
    » <a class="crumb" href="/kb/en/preparing-and-installing-mariadb-columnstore-11x/">Preparing and Installing MariaDB ColumnStore 1.1.x</a>
    


    » <a class="node_link crumb" href="/kb/en/installing-and-configuring-a-multi-server-columnstore-system-11x/">Installing and Configuring a Multi Server ColumnStore System - 1.1.X</a>


                </div>
                
            </div>
        </div>
    </div>
    <div class="container" id="container-main">
        <div class="row">
            
            
                
                <aside id="sidebar-first" class="sidebar col-md-2 hidden-xs hidden-sm hidden-print">
                    
                        
                        <ul id="category_menu" class="nav nav-pills nav-stacked">
                            <li><a href="/kb/en/">Home</a></li>
                            
                                
                                    <li><a href="/kb/en/+questions/">Open Questions</a></li>
                                
                                <li><a href="/kb/en/documentation/">MariaDB Server</a></li>
                                <li><a href="/kb/en/maxscale/">MariaDB MaxScale</a></li>
                                <li><a href="/kb/en/mariadb-columnstore/">MariaDB ColumnStore</a></li>
                                <li><a href="/kb/en/connectors/">Connectors</a></li>
                            

                        </ul>
                    

                    
<div>



<div class="well well-small box actions"><div>

        <a class="btn btn-block btn-blue btn-sm" href="/kb/en/installing-and-configuring-a-multi-server-columnstore-system-11x/+history" rel="nofollow">History</a>
        
        
        
        <a class="btn btn-block btn-blue btn-sm" href="/kb/en/installing-and-configuring-a-multi-server-columnstore-system-11x/+source/">Source</a>
        
        <a class="btn btn-block btn-blue btn-sm flag" href="/kb/en/installing-and-configuring-a-multi-server-columnstore-system-11x/+flag"
                data-flag-url="/kb/en/installing-and-configuring-a-multi-server-columnstore-system-11x/+flag" rel="nofollow">
                Flag as Spam / Inappropriate</a>
        
        <a class="btn btn-block btn-blue btn-sm" href="/kb/en/installing-and-configuring-a-multi-server-columnstore-system-11x/+translate/">
                Translate</a>
        

</div>
</div>





<div class="well well-small box node_info"><div>

    <dl>
        <dt>Created</dt>
        <dd>

<span class="datetime" title="2017-09-15 15:18">7 years ago</span></dd>

        <dt>Modified</dt>
        <dd>

<span class="datetime" title="2018-09-10 16:11">6 years ago</span></dd>

        <dt>Type</dt>
        <dd>article</dd>

        <dt>Status</dt>
        <dd>active</dd>

        <dt>License</dt>
        <dd>
            
                <a href="/kb/en/installing-and-configuring-a-multi-server-columnstore-system-11x/+license/">CC BY-SA / Gnu FDL</a>
            
        </dd>

        
    </dl>

    
    <ul class="rss_feeds">
        <li><a href="/kb/en/installing-and-configuring-a-multi-server-columnstore-system-11x/+history/feed/">
            History</a>
        </li>
        <li><a href="/kb/en/installing-and-configuring-a-multi-server-columnstore-system-11x/+comments/feed/">
            Comments</a>
        </li>
    </ul>
    

</div>
</div>





    
    
    

<div class="well well-small box attachments"><div><div class="edit_link pull-right"><a href="/kb/en/installing-and-configuring-a-multi-server-columnstore-system-11x/+edit/attachments/">Edit</a></div><h5>Attachments</h5></div><div>

        
            <div class="no_data">No attachments exist</div>
        
    
</div>
</div>

    



    
    






</div>


                    

































                </aside>
            
            
            
                
            
            
                
            
            <section id="content" class="limited_width col-md-8 clearfix">
                
                    <h1>Installing and Configuring a Multi Server ColumnStore System - 1.1.X</h1>
                

                



                <div>
                    
    

    
    
    

    <div class="node creole">
        
        
        


    
    <div class="answer formatted">
        <div class="table_of_contents standalone"> <ol class="toc">

    <li class=""><a href="#preparing-to-install" title="Preparing to Install">Preparing to Install</a></li>

    <li class=""><a href="#columnstore-cluster-test-tool" title="ColumnStore Cluster Test Tool">ColumnStore Cluster Test Tool</a></li>

    <li class=""><a href="#mariadb-columnstore-one-step-quick-installer-script-quick_installer_multi_serversh" title="MariaDB ColumnStore One Step Quick Installer Script, quick_installer_multi_server.sh">MariaDB ColumnStore One Step Quick Installer Script, quick_installer_multi_server.sh</a>    <ol class="toc">

        <li class=""><a href="#running-quick_installer_multi_serversh-help-as-root-user" title="Running quick_installer_multi_server.sh help as root user">Running quick_installer_multi_server.sh help as root user</a></li>

        <li class=""><a href="#running-quick_installer_multi_serversh-for-a-1um1pm-non-distributed-system-as-root-user" title="Running quick_installer_multi_server.sh for a 1um/1pm non-distributed system as root user">Running quick_installer_multi_server.sh for a 1um/1pm non-distributed system as root user</a></li>

        <li class=""><a href="#running-quick_installer_multi_serversh-for-a-2-pm-combo-distributed-install-system-as-non-root-user" title="Running quick_installer_multi_server.sh for a 2 pm combo distributed install system as non-root user">Running quick_installer_multi_server.sh for a 2 pm combo distributed install system as non-root user</a>    </ol>
</li>

    <li class=""><a href="#mariadb-columnstore-post-install-script-postconfigure" title="MariaDB ColumnStore Post Install Script, postConfigure">MariaDB ColumnStore Post Install Script, postConfigure</a>    <ol class="toc">

        <li class=""><a href="#common-installation-examples" title="Common Installation Examples">Common Installation Examples</a>    </ol>
</li>

    <li class=""><a href="#post-configuration-tool" title="Post Configuration tool">Post Configuration tool</a>    <ol class="toc">

        <li class=""><a href="#postconfigure-script" title="postConfigure script">postConfigure script</a></li>

        <li class=""><a href="#postconfigure-install-options" title="postConfigure Install options">postConfigure Install options</a>        <ol class="toc">

            <li class=""><a href="#distributed-install" title="Distributed Install">Distributed Install</a></li>

            <li class=""><a href="#non-distributed-install" title="Non-Distributed Install">Non-Distributed Install</a>        </ol>
</li>

        <li class=""><a href="#running-postconfigure" title="Running postConfigure">Running postConfigure</a>        <ol class="toc">

            <li class=""><a href="#running-postconfigure-as-root-user" title="Running postConfigure as root user">Running postConfigure as root user</a></li>

            <li class=""><a href="#running-postconfigure-as-non-root-user" title="Running postConfigure as non-root user">Running postConfigure as non-root user</a>        </ol>
</li>

        <li class=""><a href="#postconfigure-examples" title="postConfigure examples">postConfigure examples</a>        <ol class="toc">

            <li class=""><a href="#distributed-install-example" title="Distributed Install example">Distributed Install example</a></li>

            <li class=""><a href="#non-distributed-install-example" title="Non-Distributed Install example">Non-Distributed Install example</a></li>

            <li class=""><a href="#data-replication-install-example" title="Data Replication Install example">Data Replication Install example</a>        </ol>
    </ol>
</li>

    <li class=""><a href="#mariadb-columnstore-memory-configuration" title="MariaDB Columnstore Memory Configuration">MariaDB Columnstore Memory Configuration</a> </ol>
</li>
</div>
<h2 class="anchored_heading" id="preparing-to-install">Preparing to Install</h2>
<p>After the MariaDB ColumnStore servers have been setup based on the <a href="/kb/en/preparing-for-columnstore-installation/">Preparing for Installations</a> document and the required MariaDB ColumnStore Packages have been Installed, use of the following option to configure and install MariaDB ColumnStore:</p>
<ul start="1"><li>MariaDB ColumnStore One Step Quick Installer Script - Release 1.1.6 and later
</li><li>MariaDB ColumnStore Post Install Script
</li></ul>
<p><strong>NOTE</strong>: The install and setup had you install the packages on the node designed as Performance Module #1, 'pm1'. This is where the install script is run from, 'pm1'</p>
<p>If installing on a system where there is a need to multi servers initially planned in the future, you would be a multi server install instead of a single server install.</p>
<p>Going from one configuration to another will require a re-installation of the MariaDB ColumnStore software.</p>
<p><strong>NOTE</strong>: You can install MariaDB ColumnStore as a root user or non-root user. This is based on how you setup the servers based on "Preparing for Installation Document". If installing as root, you need to be logged in as root user in a root login shell. If you are installing as non-root, you need to be logged in as a non-root user that was setup in the "Preparing for Installation Document".</p>
<p><a href="https://mariadb.com/kb/en/library/preparing-for-columnstore-installation-11x/">https://mariadb.com/kb/en/library/preparing-for-columnstore-installation-11x/</a></p>
<h2 class="anchored_heading" id="columnstore-cluster-test-tool">ColumnStore Cluster Test Tool</h2>
<p>This tool can be running before doing installation on a single-server or multi-node installs. It will verify the setup of all servers that are going to be used in the Columnstore System.</p>
<p><a href="https://mariadb.com/kb/en/mariadb/mariadb-columnstore-cluster-test-tool">https://mariadb.com/kb/en/mariadb/mariadb-columnstore-cluster-test-tool</a></p>
<h2 class="anchored_heading" id="mariadb-columnstore-one-step-quick-installer-script-quick_installer_multi_serversh">MariaDB ColumnStore One Step Quick Installer Script, quick_installer_multi_server.sh</h2>
<p>MariaDB ColumnStore One Step Quick Installer Script, quick_installer_multi_server.sh, is used to perform a simple 1 command run to perform the configuration and startup of MariaDB ColumnStore package on a Mutil Server setup. This will work with both root and non-root installs. Available in Release 1.1.6 and later.</p>
<p>The script has 4 parameters. </p>
<ul start="1"><li>--pm-ip-addresses=xxx.xxx.xxx.xxx,xxx.xxx.xxx.xxx
</li><li>--um-ip-addresses=xxx.xxx.xxx.xxx,xxx.xxx.xxx.xxx, optional
</li><li>--dist-install Use Distributed Install, optional
</li><li>--system-name=nnnn System Name, optional
</li></ul>
<p>It will perform an install with these defaults:</p>
<ul start="1"><li>System-Name = columnstore-1, when not specified
</li><li>Multi-Server Install
<ul start="1"><li>with X Number of PMs when only PM IP Addresses are provided
</li><li>with X Number of UMs when UM IP Addresses are provided and X Number of UMs when PM IP Addresses are provided
</li></ul>
</li><li>Non-Distributed Installer when --dist-install when not specified
</li><li>Storage - Internal
</li><li>DBRoot - 1 DBroot per 1 Performance Module
</li><li>Local Query is disabled on um/pm install
</li><li>MariaDB Replication is enabled
</li><li>ssk-keys setup required
</li></ul>
<h3 class="anchored_heading" id="running-quick_installer_multi_serversh-help-as-root-user">Running quick_installer_multi_server.sh help as root user</h3>
<pre class="fixed"># /usr/local/mariadb/columnstore/bin/quick_installer_multi_server.sh --help
Usage ./quick_installer_multi_server.sh [OPTION]

Quick Installer for a Multi Server MariaDB ColumnStore Install

Defaults to non-distrubuted install, meaning MariaDB Columnstore
needs to be preinstalled on all nodes in the system

Performace Module (pm) IP addresses are required
User Module (um) IP addresses are option
When only pm IP addresses provided, system is combined setup
When both pm/um IP addresses provided, system is seperate setup

--pm-ip-addresses=xxx.xxx.xxx.xxx,xxx.xxx.xxx.xxx
--um-ip-addresses=xxx.xxx.xxx.xxx,xxx.xxx.xxx.xxx, optional
--dist-install Use Distributed Install, optional
--system-name=nnnn System Name, optional
</pre><h3 class="anchored_heading" id="running-quick_installer_multi_serversh-for-a-1um1pm-non-distributed-system-as-root-user">Running quick_installer_multi_server.sh for a 1um/1pm non-distributed system as root user</h3>
<pre class="fixed"># /usr/local/mariadb/columnstore/bin/quick_installer_multi_server.sh --um-ip-addresses=10.128.0.4 --pm-ip-addresses=10.128.0.3

NOTE: Performing a Multi-Server Seperate install with um and pm running on seperate servers

Run post-install script

The next step is:

If installing on a pm1 node:

/usr/local/mariadb/columnstore/bin/postConfigure

If installing on a non-pm1 using the non-distributed option:

/usr/local/mariadb/columnstore/bin/columnstore start


Run postConfigure script


This is the MariaDB ColumnStore System Configuration and Installation tool.
It will Configure the MariaDB ColumnStore System and will perform a Package
Installation of all of the Servers within the System that is being configured.

IMPORTANT: This tool requires to run on the Performance Module #1

With the no-Prompting Option being specified, you will be required to have the following:

 1. Root user ssh keys setup between all nodes in the system or
    use the password command line option.
 2. A Configure File to use to retrieve configure data, default to Columnstore.xml.rpmsave
    or use the '-c' option to point to a configuration file.


===== Quick Install Multi-Server Configuration =====



Setup System Module Type Configuration

There are 2 options when configuring the System Module Type: separate and combined

  'separate' - User and Performance functionality on separate servers.

  'combined' - User and Performance functionality on the same server

Select the type of System Module Install [1=separate, 2=combined] (1) &gt; 

Seperate Server Installation will be performed.

NOTE: Local Query Feature allows the ability to query data from a single Performance
      Module. Check MariaDB ColumnStore Admin Guide for additional information.

Enable Local Query feature? [y,n] (n) &gt; 

NOTE: The MariaDB ColumnStore Schema Sync feature will replicate all of the
      schemas and InnoDB tables across the User Module nodes. This feature can be enabled
      or disabled, for example, if you wish to configure your own replication post installation.

MariaDB ColumnStore Schema Sync feature is Enabled, do you want to leave enabled? [y,n] (y) &gt; 


NOTE: MariaDB ColumnStore Replication Feature is enabled

NOTE: MariaDB ColumnStore Non-Distributed Install Feature is enabled

Enter System Name (columnstore-1) &gt; 


Setup Storage Configuration


----- Setup Performance Module DBRoot Data Storage Mount Configuration -----

There are 2 options when configuring the storage: internal or external

  'internal' -    This is specified when a local disk is used for the DBRoot storage.
                  High Availability Server Failover is not Supported in this mode

  'external' -    This is specified when the DBRoot directories are mounted.
                  High Availability Server Failover is Supported in this mode.

Select the type of Data Storage [1=internal, 2=external] (1) &gt; 

===== Setup Memory Configuration =====

NOTE: Setting 'NumBlocksPct' to 70%
      Setting 'TotalUmMemory' to 50%

Setup the Module Configuration


----- User Module Configuration -----

Enter number of User Modules [1,1024] (1) &gt; 

*** User Module #1 Configuration ***

Enter Nic Interface #1 Host Name (10.128.0.4) &gt; 
Enter Nic Interface #1 IP Address of 10.128.0.4 (10.128.0.4) &gt; 

----- Performance Module Configuration -----

Enter number of Performance Modules [1,1024] (1) &gt; 

*** Parent OAM Module Performance Module #1 Configuration ***

Enter Nic Interface #1 Host Name (10.128.0.3) &gt; 
Enter Nic Interface #1 IP Address of 10.128.0.3 (10.128.0.3) &gt; 
Enter the list (Nx,Ny,Nz) or range (Nx-Nz) of DBRoot IDs assigned to module 'pm1' (1) &gt; 

Next step is to enter the password to access the other Servers.
This is either your password or you can default to using a ssh key
If using a password, the password needs to be the same on all Servers.

Enter password, hit 'enter' to default to using a ssh key, or 'exit' &gt; 

===== Checking MariaDB ColumnStore System Logging Functionality =====

The MariaDB ColumnStore system logging is setup and working on local server

MariaDB ColumnStore System Configuration and Installation is Completed

===== MariaDB ColumnStore System Startup =====

System Configuration is complete.
Performing System Installation.

----- Starting MariaDB ColumnStore on local server -----

MariaDB ColumnStore successfully started

MariaDB ColumnStore Database Platform Starting, please wait ........ DONE

System Catalog Successfully Created

Run MariaDB ColumnStore Replication Setup..  DONE

MariaDB ColumnStore Install Successfully Completed, System is Active

Enter the following command to define MariaDB ColumnStore Alias Commands

. /etc/profile.d/columnstoreAlias.sh

Enter 'mcsmysql' to access the MariaDB ColumnStore SQL console
Enter 'mcsadmin' to access the MariaDB ColumnStore Admin console

NOTE: The MariaDB ColumnStore Alias Commands are in /etc/profile.d/columnstoreAlias.sh
</pre><h3 class="anchored_heading" id="running-quick_installer_multi_serversh-for-a-2-pm-combo-distributed-install-system-as-non-root-user">Running quick_installer_multi_server.sh for a 2 pm combo distributed install system as non-root user</h3>
<pre class="fixed"># /home/guest/mariadb/columnstore/bin/quick_installer_multi_server.sh --pm-ip-addresses=10.128.0.3,10.128.0.4 --dist-install

NOTE: Performing a Multi-Server Combined install with um/pm running on some server

Run post-install script

The next step is:

If installing on a pm1 node:

/home/guest/mariadb/columnstore/bin/postConfigure

If installing on a non-pm1 using the non-distributed option:

/home/guest/mariadb/columnstore/bin/columnstore start


Run postConfigure script


This is the MariaDB ColumnStore System Configuration and Installation tool.
It will Configure the MariaDB ColumnStore System and will perform a Package
Installation of all of the Servers within the System that is being configured.

IMPORTANT: This tool requires to run on the Performance Module #1

With the no-Prompting Option being specified, you will be required to have the following:

 1. Root user ssh keys setup between all nodes in the system or
    use the password command line option.
 2. A Configure File to use to retrieve configure data, default to Columnstore.xml.rpmsave
    or use the '-c' option to point to a configuration file.


===== Quick Install Multi-Server Configuration =====



Setup System Module Type Configuration

There are 2 options when configuring the System Module Type: separate and combined

  'separate' - User and Performance functionality on separate servers.

  'combined' - User and Performance functionality on the same server

Select the type of System Module Install [1=separate, 2=combined] (2) &gt; 

Combined Server Installation will be performed.
The Server will be configured as a Performance Module.
All MariaDB ColumnStore Processes will run on the Performance Modules.

NOTE: The MariaDB ColumnStore Schema Sync feature will replicate all of the
      schemas and InnoDB tables across the User Module nodes. This feature can be enabled
      or disabled, for example, if you wish to configure your own replication post installation.

MariaDB ColumnStore Schema Sync feature is Enabled, do you want to leave enabled? [y,n] (y) &gt; 


NOTE: MariaDB ColumnStore Replication Feature is enabled

Enter System Name (columnstore-1) &gt; 


Setup Storage Configuration


----- Setup Performance Module DBRoot Data Storage Mount Configuration -----

There are 2 options when configuring the storage: internal or external

  'internal' -    This is specified when a local disk is used for the DBRoot storage.
                  High Availability Server Failover is not Supported in this mode

  'external' -    This is specified when the DBRoot directories are mounted.
                  High Availability Server Failover is Supported in this mode.

Select the type of Data Storage [1=internal, 2=external] (1) &gt; 

===== Setup Memory Configuration =====


NOTE: Setting 'NumBlocksPct' to 50%
      Setting 'TotalUmMemory' to 25%

Setup the Module Configuration


----- Performance Module Configuration -----

Enter number of Performance Modules [1,1024] (2) &gt; 

*** Parent OAM Module Performance Module #1 Configuration ***

Enter Nic Interface #1 Host Name (10.128.0.3) &gt; 
Enter Nic Interface #1 IP Address of 10.128.0.3 (10.128.0.3) &gt; 
Enter the list (Nx,Ny,Nz) or range (Nx-Nz) of DBRoot IDs assigned to module 'pm1' (1) &gt; 

*** Performance Module #2 Configuration ***

Enter Nic Interface #1 Host Name (10.128.0.4) &gt; 
Enter Nic Interface #1 IP Address of 10.128.0.4 (10.128.0.4) &gt; 
Enter the list (Nx,Ny,Nz) or range (Nx-Nz) of DBRoot IDs assigned to module 'pm2' (2) &gt; 

===== Running the MariaDB ColumnStore MariaDB Server setup scripts =====


post-mysqld-install Successfully Completed
post-mysql-install Successfully Completed

Next step is to enter the password to access the other Servers.
This is either your password or you can default to using a ssh key
If using a password, the password needs to be the same on all Servers.

Enter password, hit 'enter' to default to using a ssh key, or 'exit' &gt; 

===== System Installation =====

System Configuration is complete.
Performing System Installation.

Performing a MariaDB ColumnStore System install using Binary packages
located in the /home/guest directory.



----- Performing Install on 'pm2 / 10.128.0.4' -----

Install log file is located here: /tmp/pm2_binary_install.log


MariaDB ColumnStore Package being installed, please wait ...  DONE

===== Checking MariaDB ColumnStore System Logging Functionality =====

The MariaDB ColumnStore system logging is setup and working on local server

===== MariaDB ColumnStore System Startup =====

System Configuration is complete.
Performing System Installation.

----- Starting MariaDB ColumnStore on local server -----

MariaDB ColumnStore successfully started

MariaDB ColumnStore Database Platform Starting, please wait .............. DONE

System Catalog Successfully Created

Run MariaDB ColumnStore Replication Setup..  DONE

MariaDB ColumnStore Install Successfully Completed, System is Active

Enter the following command to define MariaDB ColumnStore Alias Commands

. /etc/profile.d/columnstoreAlias.sh

Enter 'mcsmysql' to access the MariaDB ColumnStore SQL console
Enter 'mcsadmin' to access the MariaDB ColumnStore Admin console

NOTE: The MariaDB ColumnStore Alias Commands are in /etc/profile.d/columnstoreAlias.sh

</pre><h2 class="anchored_heading" id="mariadb-columnstore-post-install-script-postconfigure">MariaDB ColumnStore Post Install Script, postConfigure</h2>
<p>The following is a transcript of a typical run of the MariaDB ColumnStore configuration script. Plain-text formatting indicates output from the script and bold text indicates responses to questions. After each question there is a short discussion of what the question is asking and what some typical answers might be. You will not see these discussions the running the actual configuration script.</p>
<h3 class="anchored_heading" id="common-installation-examples">Common Installation Examples</h3>
<p>During postConfigure, there are 2 questions that are asked where the answer given determines the path
that postConfigure takes in configuring the system. Those 2 questions are as follows:</p>
<pre class="fixed">Select the type of server install [1=single, 2=multi] (2) &gt;
</pre><p>and</p>
<pre class="fixed">Select the Type of Module Install being performed:
1. Separate - User and Performance functionalities on separate servers
2. Combined - User and Performance functionalities on the same server
Enter Server Type ID [1-2] (1) &gt;
</pre><p>The following examples illustrates some common configurations and helps to provide answers to the above
questions:</p>
<ul start="1"><li>Single Node - User and Performance running on 1 server - single / combined
</li><li>Mutli-Node #1 -  User and Performance running on some server - multi / combined
</li><li>Mutli-Node #2 -  User and Performance running on separate servers - multi / separate
</li></ul>
<h2 class="anchored_heading" id="post-configuration-tool">Post Configuration tool</h2>
<p>Post Configuration tool, postConfigure, does the system configuration and setup. The servers and storages are configured during this process. It is executed from the designed 'pm1' node.</p>
<h3 class="anchored_heading" id="postconfigure-script">postConfigure script</h3>
<p>To get additional information, user to run the following:</p>
<pre class="fixed"># /usr/local/mariadb/columnstore/bin/postConfigure -h

This is the MariaDB ColumnStore System Configuration and Installation tool.
It will Configure the MariaDB ColumnStore System based on Operator inputs and
will perform a Package Installation of all of the Modules within the
System that is being configured.

IMPORTANT: This tool should only be run on a Performance Module Server,
           preferably Module #1

Instructions:

	Press 'enter' to accept a value in (), if available or
	Enter one of the options within [], if available, or
	Enter a new value


Usage: postConfigure [-h][-c][-u][-p][-s][-port][-i][-n]
   -h  Help
   -c  Config File to use to extract configuration data, default is Columnstore.xml.rpmsave
   -u  Upgrade, Install using the Config File from -c, default to Columnstore.xml.rpmsave
	    If ssh-keys aren't setup, you should provide passwords as command line arguments
   -p  Unix Password, used with no-prompting option
   -s  Single Threaded Remote Install
   -port MariaDB ColumnStore Port Address
   -i Non-root Install directory, Only use for non-root installs
   -n Non-distributed install, meaning it will not install the remote nodes
</pre><h3 class="anchored_heading" id="postconfigure-install-options">postConfigure Install options</h3>
<p>The postConfigure script supports 2 different types of installs:</p>
<ul start="1"><li>Distributed Install
</li><li>Non-Distributed Install
</li></ul>
<h4 class="anchored_heading" id="distributed-install">Distributed Install</h4>
<p>Distributed Install by postConfigure will interact with all the nodes in the system during the configuration and setup process. It will push copied of the MariaDB ColumnStore packages from the 'pm1' node where postConfigure is running. During upgrades, it will also make sure the ColumnStore is stopped and will replace any packages that were previously install with the new package.
Since it pushed the new packages to the other nodes, it is required that the packages be placed in the current home directory of the user doing the install, i.e. /root/ for root user install.</p>
<p>Distributed Install is the default setting, so no additional command line arguments need to be provide. </p>
<h4 class="anchored_heading" id="non-distributed-install">Non-Distributed Install</h4>
<p>Non-Distributed Install by postConfigure will not have any interaction excluding a ping test during the configuration section to validate the IP address provided. With this option, it is up to the user to install the MariaDB ColumnStore packages on the non-pm1 nodes and startup the ColumnStore service before running postConfigure.</p>
<p>Non-Distributed Install does require an additional command line argument to be provided.
The "-n" is the required argument as sown in this example:</p>
<pre class="fixed">/usr/local/mariadb/columnstore/bin/postConfigure -n
</pre><h3 class="anchored_heading" id="running-postconfigure">Running postConfigure</h3>
<p>Running postConfigure is a bit different when launching as root user or a non-root user. As a non-root user, you will be required the setup 2 Environment variables and provide the base directory where MariaDB ColumnStore resides.</p>
<h4 class="anchored_heading" id="running-postconfigure-as-root-user">Running postConfigure as root user</h4>
<pre class="fixed">/usr/local/mariadb/columnstore/bin/postConfigure
</pre><h4 class="anchored_heading" id="running-postconfigure-as-non-root-user">Running postConfigure as non-root user</h4>
<pre class="fixed">export COLUMNSTORE_INSTALL_DIR=/home/guest/mariadb/columnstore
export LD_LIBRARY_PATH=/home/guest/mariadb/columnstore/lib:/home/guest/mariadb/columnstore/mysql/lib/mysql
/home/guest/mariadb/columnstore/bin/postConfigure -i /home/guest/mariadb/columnstore
</pre><h3 class="anchored_heading" id="postconfigure-examples">postConfigure examples</h3>
<h4 class="anchored_heading" id="distributed-install-example">Distributed Install example</h4>
<p>This is an example of a Distributed Install of a 1UM/2PM system with internal storage.
MariaDB ColumnStore 'rpm's packages was installed for this example. No password is provide on the command line, so the root user password is provided when prompted.</p>
<pre class="fixed"># /usr/local/mariadb/columnstore/bin/postConfigure

This is the MariaDB ColumnStore System Configuration and Installation tool.
It will Configure the MariaDB ColumnStore System and will perform a Package
Installation of all of the Servers within the System that is being configured.

IMPORTANT: This tool should only be run on the Parent OAM Module
           which is a Performance Module, preferred Module #1

Prompting instructions:

	Press 'enter' to accept a value in (), if available or
	Enter one of the options within [], if available, or
	Enter a new value


===== Setup System Server Type Configuration =====

There are 2 options when configuring the System Server Type: single and multi

  'single'  - Single-Server install is used when there will only be 1 server configured
              on the system. It can also be used for production systems, if the plan is
              to stay single-server.

  'multi'   - Multi-Server install is used when you want to configure multiple servers now or
              in the future. With Multi-Server install, you can still configure just 1 server
              now and add on addition servers/modules in the future.

Select the type of System Server install [1=single, 2=multi] (2) &gt; 


===== Setup System Module Type Configuration =====

There are 2 options when configuring the System Module Type: separate and combined

  'separate' - User and Performance functionality on separate servers.

  'combined' - User and Performance functionality on the same server

Select the type of System Module Install [1=separate, 2=combined] (2) &gt; 1

Separate Server Installation will be performed.

NOTE: Local Query Feature allows the ability to query data from a single Performance
      Module. Check MariaDB ColumnStore Admin Guide for additional information.

Enable Local Query feature? [y,n] (n) &gt; 

NOTE: The MariaDB ColumnStore Schema Sync feature will replicate all of the
      schemas and InnoDB tables across the User Module nodes. This feature can be enabled
      or disabled, for example, if you wish to configure your own replication post installation.

MariaDB ColumnStore Schema Sync feature, do you want to enable? [y,n] (y) &gt; 

NOTE: MariaDB ColumnStore Replication Feature is enabled

Enter System Name (columnstore-1) &gt; mymcs-1


===== Setup Storage Configuration =====


----- Setup Performance Module DBRoot Data Storage Mount Configuration -----

There are 3 options when configuring the storage: internal or external

  'internal' -    This is specified when a local disk is used for the DBRoot storage.
                  High Availability Server Failover is not Supported in this mode

  'external' -    This is specified when the DBRoot directories are mounted.
                  High Availability Server Failover is Supported in this mode.

Select the type of Data Storage [1=internal, 2=external] (1) &gt; 

===== Setup Memory Configuration =====

NOTE: Setting 'NumBlocksPct' to 70%
      Setting 'TotalUmMemory' to 50%

===== Setup the Module Configuration =====


----- User Module Configuration -----

Enter number of User Modules [1,1024] (1) &gt; 

*** User Module #1 Configuration ***

Enter Nic Interface #1 Host Name (unassigned) &gt; um1-hostname
Enter Nic Interface #1 IP Address of um1-hostname (0.0.0.0) &gt; 172.30.0.59
Enter Nic Interface #2 Host Name (unassigned) &gt; 

----- Performance Module Configuration -----

Enter number of Performance Modules [1,1024] (1) &gt; 2

*** Parent OAM Module Performance Module #1 Configuration ***

Enter Nic Interface #1 Host Name (ip-172-30-0-161.us-west-2.compute.internal) &gt; 
Enter Nic Interface #1 IP Address of ip-172-30-0-161.us-west-2.compute.internal (172.30.0.161) &gt; 
Enter Nic Interface #2 Host Name (unassigned) &gt; 
Enter the list (Nx,Ny,Nz) or range (Nx-Nz) of DBRoot IDs assigned to module 'pm1' (1) &gt; 

*** Performance Module #2 Configuration ***

Enter Nic Interface #1 Host Name (unassigned) &gt; pm2-hostname
Enter Nic Interface #1 IP Address of pm2-hostname (0.0.0.0) &gt; 172.30.0.152
Enter Nic Interface #2 Host Name (unassigned) &gt; 
Enter the list (Nx,Ny,Nz) or range (Nx-Nz) of DBRoot IDs assigned to module 'pm2' () &gt; 2

===== System Installation =====

System Configuration is complete.
Performing System Installation.

Performing a MariaDB ColumnStore System install using RPM packages
located in the /root directory.

Next step is to enter the password to access the other Servers.
This is either your password or you can default to using a ssh key
If using a password, the password needs to be the same on all Servers.

Enter password, hit 'enter' to default to using a ssh key, or 'exit' &gt; 
Confirm password &gt; 

----- Performing Install on 'um1 / um1-hostname' -----

Install log file is located here: /tmp/um1_rpm_install.log


----- Performing Install on 'pm2 / pm2-hostname' -----

Install log file is located here: /tmp/pm2_rpm_install.log


MariaDB ColumnStore Package being installed, please wait ...  DONE

===== Checking MariaDB ColumnStore System Logging Functionality =====

The MariaDB ColumnStore system logging is setup and working on local server

===== MariaDB ColumnStore System Startup =====

System Installation is complete. If any part of the install failed,
the problem should be investigated and resolved before continuing.

package installed and the associated service started.

Would you like to startup the MariaDB ColumnStore System? [y,n] (y) &gt; 

----- Starting MariaDB ColumnStore on local server -----

MariaDB ColumnStore successfully started

MariaDB ColumnStore Database Platform Starting, please wait ......... DONE

System Catalog Successfully Created

MariaDB ColumnStore Install Successfully Completed, System is Active

Enter the following command to define MariaDB ColumnStore Alias Commands

. /usr/local/mariadb/columnstore/bin/columnstoreAlias

Enter 'mcsmysql' to access the MariaDB ColumnStore SQL console
Enter 'mcsadmin' to access the MariaDB ColumnStore Admin console

# 
</pre><p>IMPORTANT: If postConfigure fails at any point, you can use the following guides to help trouble shoot any issues. And once an issue has been fixed, it is required that you re-run postConfigure until you get a successful completion.</p>
<p><a href="https://mariadb.com/kb/en/library/system-troubleshooting-mariadb-columnstore/#multi-node-install-problems-and-how-to-diagnose">https://mariadb.com/kb/en/library/system-troubleshooting-mariadb-columnstore/#multi-node-install-problems-and-how-to-diagnose</a></p>
<h4 class="anchored_heading" id="non-distributed-install-example">Non-Distributed Install example</h4>
<p>This is an example of a Non-Distributed Install of a 2PM system with External storage. MariaDB ColumnStore 'rpm's packages was installed for this example. A password of 'ssh' is provide on the command line, which means that ssh-keys are setup and no password prompt will be required.</p>
<p>This example also was done on a system that had the GlusterFS third party package installed, so it will show the storage option for the MariaDB ColumnStore Data Replication. If GlusterFS wasnt installed, it would not show up as a Storage Option.</p>
<pre class="fixed"># /usr/local/mariadb/columnstore/bin/postConfigure -n -p ssh

This is the MariaDB ColumnStore System Configuration and Installation tool.
It will Configure the MariaDB ColumnStore System and will perform a Package
Installation of all of the Servers within the System that is being configured.

IMPORTANT: This tool should only be run on the Parent OAM Module
           which is a Performance Module, preferred Module #1

Prompting instructions:

	Press 'enter' to accept a value in (), if available or
	Enter one of the options within [], if available, or
	Enter a new value


===== Setup System Server Type Configuration =====

There are 2 options when configuring the System Server Type: single and multi

  'single'  - Single-Server install is used when there will only be 1 server configured
              on the system. It can also be used for production systems, if the plan is
              to stay single-server.

  'multi'   - Multi-Server install is used when you want to configure multiple servers now or
              in the future. With Multi-Server install, you can still configure just 1 server
              now and add on addition servers/modules in the future.

Select the type of System Server install [1=single, 2=multi] (2) &gt; 


===== Setup System Module Type Configuration =====

There are 2 options when configuring the System Module Type: separate and combined

  'separate' - User and Performance functionality on separate servers.

  'combined' - User and Performance functionality on the same server

Select the type of System Module Install [1=separate, 2=combined] (2) &gt; 

Separate Server Installation will be performed.

NOTE: The MariaDB ColumnStore Schema Sync feature will replicate all of the
      schemas and InnoDB tables across the User Module nodes. This feature can be enabled
      or disabled, for example, if you wish to configure your own replication post installation.

MariaDB ColumnStore Schema Sync feature, do you want to enable? [y,n] (y) &gt; 

NOTE: MariaDB ColumnStore Replication Feature is enabled

Enter System Name (columnstore-1) &gt; mymcs-1


===== Setup Storage Configuration =====


----- Setup Performance Module DBRoot Data Storage Mount Configuration -----

There are 3 options when configuring the storage: internal or external

  'internal' -    This is specified when a local disk is used for the DBRoot storage.
                  High Availability Server Failover is not Supported in this mode

  'external' -    This is specified when the DBRoot directories are mounted.
                  High Availability Server Failover is Supported in this mode.

Select the type of Data Storage [1=internal, 2=external] (1) &gt; 2

===== Setup Memory Configuration =====

NOTE: Setting 'NumBlocksPct' to 70%
      Setting 'TotalUmMemory' to 50%

===== Setup the Module Configuration =====

----- Performance Module Configuration -----

Enter number of Performance Modules [1,1024] (1) &gt; 2

*** Parent OAM Module Performance Module #1 Configuration ***

Enter Nic Interface #1 Host Name (ip-172-30-0-161.us-west-2.compute.internal) &gt; 
Enter Nic Interface #1 IP Address of ip-172-30-0-161.us-west-2.compute.internal (172.30.0.161) &gt; 
Enter Nic Interface #2 Host Name (unassigned) &gt; 
Enter the list (Nx,Ny,Nz) or range (Nx-Nz) of DBRoot IDs assigned to module 'pm1' (1) &gt; 

*** Performance Module #2 Configuration ***

Enter Nic Interface #1 Host Name (unassigned) &gt; pm2-hostname
Enter Nic Interface #1 IP Address of pm2-hostname (0.0.0.0) &gt; 172.30.0.152
Enter Nic Interface #2 Host Name (unassigned) &gt; 
Enter the list (Nx,Ny,Nz) or range (Nx-Nz) of DBRoot IDs assigned to module 'pm2' () &gt; 2

===== Running the MariaDB ColumnStore MariaDB ColumnStore setup scripts =====

post-mysqld-install Successfully Completed
post-mysql-install Successfully Completed

===== Checking MariaDB ColumnStore System Logging Functionality =====

The MariaDB ColumnStore system logging is setup and working on local server

MariaDB ColumnStore System Configuration and Installation is Completed

===== MariaDB ColumnStore System Startup =====

System Installation is complete. If any part of the install failed,
the problem should be investigated and resolved before continuing.

Non-Distributed Install: make sure all other modules have MariaDB ColumnStore
package installed and the associated service started.

----- Starting MariaDB ColumnStore on local server -----

MariaDB ColumnStore successfully started

MariaDB ColumnStore Database Platform Starting, please wait ......... DONE

System Catalog Successfully Created

MariaDB ColumnStore Install Successfully Completed, System is Active

Enter the following command to define MariaDB ColumnStore Alias Commands

. /usr/local/mariadb/columnstore/bin/columnstoreAlias

Enter 'mcsmysql' to access the MariaDB ColumnStore SQL console
Enter 'mcsadmin' to access the MariaDB ColumnStore Admin console

# 
</pre><p>IMPORTANT: If postConfigure fails at any point, you can use the following guides to help trouble shoot any issues. And once an issue has been fixed, it is required that you re-run postConfigure until you get a successful completion.</p>
<p><a href="https://mariadb.com/kb/en/library/system-troubleshooting-mariadb-columnstore/#multi-node-install-problems-and-how-to-diagnose">https://mariadb.com/kb/en/library/system-troubleshooting-mariadb-columnstore/#multi-node-install-problems-and-how-to-diagnose</a></p>
<h4 class="anchored_heading" id="data-replication-install-example">Data Replication Install example</h4>
<p>This is an example of a Distributed Install of a 1UM/2PM system with Data Replication storage. Root user password is passed in as a command line argument.</p>
<p>As part of the Preparing for Install, the GlusterFS third party package would have already been installed on all of the PM servers within this system. During the running of postConfigure, the user will be required to enter some Data Replication options based on the type of system you want. Example is number of copies of the Database you would like to have maintained across the PM servers.</p>
<p>This example also enabled the Local Query Feature.</p>
<pre class="fixed">/usr/local/mariadb/columnstore/bin/postConfigure -p 'root-user-password'

This is the MariaDB ColumnStore System Configuration and Installation tool.
It will Configure the MariaDB ColumnStore System and will perform a Package
Installation of all of the Servers within the System that is being configured.

IMPORTANT: This tool should only be run on the Parent OAM Module
           which is a Performance Module, preferred Module #1

Prompting instructions:

	Press 'enter' to accept a value in (), if available or
	Enter one of the options within [], if available, or
	Enter a new value


===== Setup System Server Type Configuration =====

There are 2 options when configuring the System Server Type: single and multi

  'single'  - Single-Server install is used when there will only be 1 server configured
              on the system. It can also be used for production systems, if the plan is
              to stay single-server.

  'multi'   - Multi-Server install is used when you want to configure multiple servers now or
              in the future. With Multi-Server install, you can still configure just 1 server
              now and add on addition servers/modules in the future.

Select the type of System Server install [1=single, 2=multi] (2) &gt; 


===== Setup System Module Type Configuration =====

There are 2 options when configuring the System Module Type: separate and combined

  'separate' - User and Performance functionality on separate servers.

  'combined' - User and Performance functionality on the same server

Select the type of System Module Install [1=separate, 2=combined] (2) &gt; 1

Seperate Server Installation will be performed.

NOTE: Local Query Feature allows the ability to query data from a single Performance
      Module. Check MariaDB ColumnStore Admin Guide for additional information.

Enable Local Query feature? [y,n] (n) &gt; y

NOTE: Local Query Feature is enabled

NOTE: MariaDB ColumnStore Replication Feature is enabled

Enter System Name (columnstore-1) &gt; mymcs-1


===== Setup Storage Configuration =====


----- Setup Performance Module DBRoot Data Storage Mount Configuration -----

There are 3 options when configuring the storage: internal, external, or DataRedundancy

  'internal' -    This is specified when a local disk is used for the DBRoot storage.
                  High Availability Server Failover is not Supported in this mode

  'external' -    This is specified when the DBRoot directories are mounted.
                  High Availability Server Failover is Supported in this mode.

  'DataRedundancy' - This is specified when gluster is installed and you want
                  the DBRoot directories to be controlled by ColumnStore Data Redundancy.
                  High Availability Server Failover is Supported in this mode.
                  NOTE: glusterd service must be running and enabled on all PMs.

Select the type of Data Storage [1=internal, 2=external, 3=DataRedundancy] (1) &gt; 3

===== Setup Memory Configuration =====

NOTE: Setting 'NumBlocksPct' to 70%
      Setting 'TotalUmMemory' to 50%

===== Setup the Module Configuration =====


----- User Module Configuration -----

Enter number of User Modules [1,1024] (1) &gt; 

*** User Module #1 Configuration ***

Enter Nic Interface #1 Host Name (unassigned) &gt; um1-hostname
Enter Nic Interface #1 IP Address of um1-hostname (0.0.0.0) &gt; 172.30.0.59
Enter Nic Interface #2 Host Name (unassigned) &gt; 

----- Performance Module Configuration -----

Enter number of Performance Modules [1,1024] (1) &gt; 2

*** Parent OAM Module Performance Module #1 Configuration ***

Enter Nic Interface #1 Host Name (ip-172-30-0-161.us-west-2.compute.internal) &gt; 
Enter Nic Interface #1 IP Address of ip-172-30-0-161.us-west-2.compute.internal (172.30.0.161) &gt; 
Enter Nic Interface #2 Host Name (unassigned) &gt; 
Enter the list (Nx,Ny,Nz) or range (Nx-Nz) of DBRoot IDs assigned to module 'pm1' (1) &gt; 

*** Performance Module #2 Configuration ***

Enter Nic Interface #1 Host Name (unassigned) &gt; pm2-hostname
Enter Nic Interface #1 IP Address of pm2-hostname (0.0.0.0) &gt; 172.30.0.152
Enter Nic Interface #2 Host Name (unassigned) &gt; 
Enter the list (Nx,Ny,Nz) or range (Nx-Nz) of DBRoot IDs assigned to module 'pm2' () &gt; 2

===== System Installation =====

System Configuration is complete.
Performing System Installation.


Performing a MariaDB ColumnStore System install using RPM packages
located in the /root directory.


===== Running the MariaDB ColumnStore MariaDB ColumnStore setup scripts =====

post-mysqld-install Successfully Completed
post-mysql-install Successfully Completed

----- Performing Install on 'um1 / um1-hostname' -----

Install log file is located here: /tmp/um1_rpm_install.log


----- Performing Install on 'pm2 / pm2-hostname' -----

Install log file is located here: /tmp/pm2_rpm_install.log


MariaDB ColumnStore Package being installed, please wait ...  DONE


===== Configuring MariaDB ColumnStore Data Redundancy Functionality =====


Only 2 PMs configured. Setting number of copies at 2.

----- Setup Data Redundancy Network Configuration -----

  'existing'  -   This is specified when using previously configured network devices. (NIC Interface #1)
                  No additional network configuration is required with this option.

  'dedicated' -   This is specified when it is desired for Data Redundancy traffic to use
                  a separate network than one previously configured for ColumnStore.
                  You will be prompted to provide Hostname and IP information for each PM.


Select the data redundancy network [1=existing, 2=dedicated] (1) &gt; 

----- Performing Data Redundancy Configuration -----

gluster peer probe 172.30.0.161
gluster peer probe 172.30.0.152
Gluster create and start volume dbroot1...DONE
Gluster create and start volume dbroot2...DONE

----- Data Redundancy Configuration Complete -----


===== Checking MariaDB ColumnStore System Logging Functionality =====

The MariaDB ColumnStore system logging is setup and working on local server

===== MariaDB ColumnStore System Startup =====

System Installation is complete. If any part of the install failed,
the problem should be investigated and resolved before continuing.

package installed and the associated service started.

Would you like to startup the MariaDB ColumnStore System? [y,n] (y) &gt; 

----- Starting MariaDB ColumnStore on local server -----

MariaDB ColumnStore successfully started

MariaDB ColumnStore Database Platform Starting, please wait .......... DONE

System Catalog Successfully Created

MariaDB ColumnStore Install Successfully Completed, System is Active

Enter the following command to define MariaDB ColumnStore Alias Commands

. /usr/local/mariadb/columnstore/bin/columnstoreAlias

Enter 'mcsmysql' to access the MariaDB ColumnStore SQL console
Enter 'mcsadmin' to access the MariaDB ColumnStore Admin console

# 
</pre><p>IMPORTANT: If postConfigure fails at any point, you can use the following guides to help trouble shoot any issues. And once an issue has been fixed, it is required that you re-run postConfigure until you get a successful completion.</p>
<p><a href="https://mariadb.com/kb/en/library/system-troubleshooting-mariadb-columnstore/#multi-node-install-problems-and-how-to-diagnose">https://mariadb.com/kb/en/library/system-troubleshooting-mariadb-columnstore/#multi-node-install-problems-and-how-to-diagnose</a></p>
<h2 class="anchored_heading" id="mariadb-columnstore-memory-configuration">MariaDB Columnstore Memory Configuration</h2>
<p>During the installation process, postConfigure will set the 2 main Memory configuration settings based on the size of memory detected on the local node.</p>
<p>The 2 settings are in the MariaDB Columnstore Configuration file,  /usr/local/mariadb/columnstore/etc Columnstore.xml. These 2 settings are:</p>
<pre class="fixed">'NumBlocksPct'   - Performance Module Data cache memory setting

TotalUmMemory  - User Module memory setting, used as temporary memory for joins
</pre><p>On a system that has the Performance Module and User Module functionality combined on the same server, this is the default settings:</p>
<pre class="fixed">NumBlocksPct    - 50% of total memory

TotalUmMemory - 25% of total memory, default maximum the percentage equal to 16G
</pre><p>On a system that has the Performance Module and User Module functionality on different servers, this is the default settings:</p>
<pre class="fixed">NumBlocksPct    - This setting is NOT configured, and the default that the applications will then use is 70%

TotalUmMemory - 50% of total memory 
</pre><p>The user can choose to change these settings after the install is completed, if for instance they want to setup more memory for Joins to utilize. On a single server or combined UM/PM server, it is recommended to not
have the combination of these 2 settings over 75% of total memory</p>

    </div>


        
            <div id="subscribe" class="well well-small hide hidden-print"
                 data-subscribe-url="/kb/en/installing-and-configuring-a-multi-server-columnstore-system-11x/+subscriptions/add"
                 data-unsubscribe-url="/kb/en/installing-and-configuring-a-multi-server-columnstore-system-11x/+subscriptions/remove">
            </div>
        

        
        
    
        <div class="simple_section_nav">
            <ul class="nav nav-pills">
                
                    <li><a href="/kb/en/installing-and-configuring-mariadb-columnstore/">
                        ← Installing and Configuring a Single Server ColumnStore System
                    </a>
                    </li>
                
                
                    <li><a href="/kb/en/preparing-and-installing-mariadb-columnstore-11x/">
                        ↑ Preparing and Installing MariaDB ColumnStore 1.1.x ↑
                    </a>
                    </li>
                
                
            </ul>
        </div>
    

        

        
        <h2>Comments</h2>
        
    
    <div id="comments" data-node-id="7035" data-comments-url="/kb/en/installing-and-configuring-a-multi-server-columnstore-system-11x/+comments"
         data-reply-url="/kb/en/installing-and-configuring-a-multi-server-columnstore-system-11x/comments/post/">
        Comments loading...
    </div>

        

    </div>


                    <div id="content_disclaimer" class="graybox">
                        Content reproduced on this site is the property of its respective owners,
                        and this content is not reviewed in advance by MariaDB. The views, information and opinions
                        expressed by this content do not necessarily represent those of MariaDB or any other party.
                    </div>
                </div>
            </section>

            
                <div id="right_bar" class="col-md-2">
                    
    
        
        <ul class="section_navigation well well-small hidden-xs hidden-sm">
            
                <li class="parent"><a href="/kb/en/preparing-and-installing-mariadb-columnstore-11x/">
                    ↑ Preparing and Installing MariaDB ColumnStore 1.1.x ↑
                </a>
                </li>
            
            
                
                    <li>
                        <a href="/kb/en/preparing-for-columnstore-installation-11x/">
                            
                            Preparing for ColumnStore Installation - 1.1.X
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/mariadb-columnstore-cluster-test-tool/">
                            
                            MariaDB ColumnStore Cluster Test Tool
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/installing-and-configuring-mariadb-columnstore/">
                            <span class="pull-right not_primary"></span>
                            Installing and Configuring a Single Server ColumnStore System
                        </a>
                    </li>
                
            
                
                    <li class="active">
                        <span>Installing and Configuring a Multi Server ColumnStore System - 1.1.X</span>
                        
                    </li>
                
            
        </ul>
    
    

                </div>
            
        </div>
    </div>
</div>

<!-- Footer -->
<footer id="footer">
    <div class="footer">
        <div class="container">
            <div class="row">
                <div class="col-xs-12">
                    <ul class="list-inline text-center footer-nav">
                        <li>
                            <h5>
                                <a href="https://mariadb.com/products" title="Products">Products</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/services" title="Services">Services</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/pricing" title="Pricing">Pricing</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/resources" title="Resources">Resources</a>
                            </h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/about-us" title="About MariaDB">About Us</a></h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/download" title="Download">Download MariaDB</a></h5>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="row row-10">
                
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div id="block-footerformcontact" class="block block-block-content block-block-contentd754ee1b-3cc9-40e7-9ef4-f504f1197fb1">
                        
                            <h5 style="font-weight: 400;">Subscribe to our newsletter!</h5>
                            <script src="//app-sj15.marketo.com/js/forms2/js/forms2.min.js"></script><form id="mktoForm_1498"></form>
                            <script>
                                <!--//--><![CDATA[// ><!--
                                MktoForms2.loadForm("//app-sj15.marketo.com", "573-PXI-984", 1498);
                                //--><!]]]]><![CDATA[>
                                //--><!]]>
                            </script>
                        
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div class="footer-copyright">
                        <div class="text-center">
                            <ul class="list-inline no-margin">
                                <li>
                                    <a href="/legal" title="Legal">Legal</a>
                                </li>
                                <li>
                                    <a href="/privacy-policy" title="Privacy Policy">Privacy Policy</a>
                                </li>
                                <li>
                                    <a href="/cookie-policy/" title="Cookies">Cookie Policy</a>
                                </li>
                            </ul>
                            <p>Copyright &copy; 2024 MariaDB. All rights reserved.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
</footer>
</div>

<div id="ajax_loading">
    <img src="/kb/static/images/ajax-loader.a51c5608d01a.gif" />
</div>

    <!-- Google Tag Manager -->
    <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-MK2847"
                      height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
            '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MK2847');</script>
    <!-- End Google Tag Manager -->

</body>

<script type="text/javascript" src="/kb/static/js/main.1587e3a666fc.js" charset="utf-8"></script>

</html>