<!DOCTYPE html>
<html>
<head data-cookie-domain=""
      data-cookie-path="/">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="apple-touch-icon" sizes="180x180" href="/kb/static/images/favicons/apple-touch-icon.159e713979be.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/kb/static/images/favicons/favicon-32x32.bc0ac1d5d11e.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/kb/static/images/favicons/favicon-16x16.5801f8f0f34e.png">
    <link rel="shortcut icon" href="/kb/static/images/favicons/favicon.d122d305dee4.ico" type="image/x-icon" />

    <title>Release Notes for MariaDB Enterprise Server 11.4.3-1 - MariaDB Knowledge Base</title>

    <link href="/kb/static/css/main.f7633538c846.css" rel="stylesheet" type="text/css" />

    

    

    <!-- FB Open Graph tags -->
    <meta property="og:title" content="Release Notes for MariaDB Enterprise Server 11.4.3-1" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://mariadb.com/kb/en/release-notes-for-mariadb-enterprise-server-11-4-3-1/" />
    <meta property="og:image" content="http://mariadb.comaskmonty-logo.png" />
    <meta property="og:site_name" content="MariaDB KnowledgeBase" />
    <meta property="fb:admins" content="514852603" />
    <meta property="og:description" content="MariaDB Enterprise Server 11.4.4-2 is the first GA release of MariaDB Enterprise Server 11.4.
The changes listed here are relative to MariaDB Enterprise Server 10.6.19-15
Mari..." />

    <meta name="description" content="MariaDB Enterprise Server 11.4.4-2 is the first GA release of MariaDB Enterprise Server 11.4.
The changes listed here are relative to MariaDB Enterprise Server 10.6.19-15
Mari..." />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="//fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet"/>
    
</head>
<body class="mpkb nodes products nodes_view jqui" id="nodes_view">





<div id="menu-mobile" class="visible-sm visible-xs">

    <div>
        <div id="mobile-close-menu" class="text-right">
            <a href="javascript:void(0)" title="Close Menu" id="back-main" class="toggle-menu">X<span></span></a>
        </div>
    </div>
    <div class="mainmenu-mobile">
        <ul class="ls-none ul-menu">
            <li data-sub="submenu5"><a class="open-form-search" href="/kb/search/" title="Search">Search </a></li>
            <li data-sub="submenu0"><a href="/products" title="Products">Products</a><span class="arrow-main"></span></li>
            <li data-sub="submenu1"><a href="/services" title="Services">Services</a><span class="arrow-main"></span></li>
            <li data-sub="submenu2"><a href="/resources" title="Resources">Resources</a><span class="arrow-main"></span></li>
            <li data-sub="submenu3"><a href="/about-us" title="About">About</a><span class="arrow-main"></span></li>
            <li data-sub="submenu4"><a href="/contact" title="Contact">Contact</a></li>
        </ul>
    </div>

    <div class="nav-top-mobile">
        <div class="select-box form">

            <ul class="inline-block-md mb-none top-nav">
                <li>

                </li>
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/release-notes-for-mariadb-enterprise-server-11-4-3-1/"> Login</a>
                    </li>
                
            </ul>



        </div>
        <p class="text-center copyright">Copyright &copy; 2025 MariaDB. All rights reserved.</p>
    </div>
</div>
<div class="violator-wrap d-none" id="top_violator">
    <div class="container">
        <div class="row">
            <div class="col-xs-12 col-sm-12">
                <div class="violator-outer">
                    <div class="violator-inner">
                        <div class="row">
                            <div class="col-xs-12 col-sm-9 col-lg-7 col-lg-offset-2" id="top_violator_content">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="content-link" target="_blank" rel="nofollow noreferrer">
                                    <span>The Ultimate Guide to High Availability with MariaDB</span>
                                </a>
                            </div>
                            <div class="col-xs-12 col-sm-3" id="top_violator_cta">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="btn btn-mariadb" target="_blank" rel="nofollow noreferrer">Download Now</a>
                            </div>
                        </div>
                    </div>
                    <button type="button" class="btn btn-link close-btn">
                        <svg xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 24 24" width="15px" height="15px"><path d="M 4.9902344 3.9902344 A 1.0001 1.0001 0 0 0 4.2929688 5.7070312 L 10.585938 12 L 4.2929688 18.292969 A 1.0001 1.0001 0 1 0 5.7070312 19.707031 L 12 13.414062 L 18.292969 19.707031 A 1.0001 1.0001 0 1 0 19.707031 18.292969 L 13.414062 12 L 19.707031 5.7070312 A 1.0001 1.0001 0 0 0 18.980469 3.9902344 A 1.0001 1.0001 0 0 0 18.292969 4.2929688 L 12 10.585938 L 5.7070312 4.2929688 A 1.0001 1.0001 0 0 0 4.9902344 3.9902344 z"/></svg>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="wrapper">
<div id="top-nav">
    <div class="container">
        <ul class="hidden-sm hidden-xs" >
            <li><a href="https://mariadb.com/kb/">Knowledge Base</a></li>
            <li><a href="https://mariadb.com/contact/">Contact</a></li>
            
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/release-notes-for-mariadb-enterprise-server-11-4-3-1/" rel="nofollow">Login</a>
                    </li>
                
            
            
            <li id="search-form">
                <form action="/kb/en/+search/" method="get" id="search-block-form" accept-charset="UTF-8">
                    <input id="search" title="Enter the terms you wish to search for."
                           placeholder="Search . . ." type="text"
                           name="q" value="" size="15" maxlength="128" class="form-text"
                           data-autocomplete-url="/kb/en/+search/autocomplete/">
                    <input type="hidden" name="quick" value="1" />
                    <input type="hidden" name="source" value="kb" />
                </form>
            </li>
            <li><a id="search-toggler" href="/kb/search/">Search</a></li>
            
        </ul>
    </div>
</div>
<div id="navbar-bottom" class="navbar">
    <div class="container">
        
        
        
        
        <div class="row">
            <div class="col-md-3 col-sm-9 col-xs-9">
                <a class="brand" href="/" title="MariaDB">
                    <img src="/kb/static/images/logo-2018-black.95f5978ae14d.png">
                </a>
            </div>
            <div class="col-md-9 hidden-sm hidden-xs">
                <div class="main-menu">
                    <ul id="main-menu" class="nav navbar-nav inline-block-sm">
    <li class="has-sub full-menu">
        <a href="/products" title="Products">Products</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/services" title="Services">Services</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/pricing" title="Pricing">Pricing</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/resources" title="Resources">Resources</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/about-us" title="About Us">About Us</a>
    </li>
    <li class="">
        <a class="button electric-eel small top-bar-right-download" href="/downloads/">Download</a>
    </li>
</ul>
                </div>
            </div>
            <div class="col-md-3 visible-sm visible-xs col-sm-3 col-xs-3 ps-rv">
                <div class="navbar-header text-right pull-right">
                    <button type="button" class="menu-control toggle-menu" id="open-menu">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="main">
    <div class="container">
        

        <div id="subheader1" class="clearfix">
            <div class="pull-left">
                
                <div id="breadcrumbs" class="breadcrumb">
                    <a href="/kb/en/">Knowledge Base</a>
                    


    
    » <a class="crumb" href="/kb/en/mariadb-server-release-dates/">MariaDB Server Releases</a>
    

    
    » <a class="crumb" href="/kb/en/mariadb-enterprise-server-11-4/">MariaDB Enterprise Server 11.4</a>
    


    » <a class="node_link crumb" href="/kb/en/release-notes-for-mariadb-enterprise-server-11-4-3-1/">Release Notes for MariaDB Enterprise Server 11.4.3-1</a>


                </div>
                
            </div>
        </div>
    </div>
    <div class="container" id="container-main">
        <div class="row">
            
            
                
                <aside id="sidebar-first" class="sidebar col-md-2 hidden-xs hidden-sm hidden-print">
                    
                        
                        <ul id="category_menu" class="nav nav-pills nav-stacked">
                            <li><a href="/kb/en/">Home</a></li>
                            
                                
                                <li><a href="/kb/en/documentation/">MariaDB Server</a></li>
                                <li><a href="/kb/en/maxscale/">MariaDB MaxScale</a></li>
                                <li><a href="/kb/en/mariadb-columnstore/">MariaDB ColumnStore</a></li>
                                <li><a href="/kb/en/connectors/">Connectors</a></li>
                            

                        </ul>
                    

                    
<div>



<div class="well well-small box actions"><div>

        <a class="btn btn-block btn-blue btn-sm" href="/kb/en/release-notes-for-mariadb-enterprise-server-11-4-3-1/+history" rel="nofollow">History</a>
        
        
        
        <a class="btn btn-block btn-blue btn-sm" href="/kb/en/release-notes-for-mariadb-enterprise-server-11-4-3-1/+source/">Source</a>
        
        <a class="btn btn-block btn-blue btn-sm flag" href="/kb/en/release-notes-for-mariadb-enterprise-server-11-4-3-1/+flag"
                data-flag-url="/kb/en/release-notes-for-mariadb-enterprise-server-11-4-3-1/+flag" rel="nofollow">
                Flag as Spam / Inappropriate</a>
        
        <a class="btn btn-block btn-blue btn-sm" href="/kb/en/release-notes-for-mariadb-enterprise-server-11-4-3-1/+translate/">
                Translate</a>
        

</div>
</div>





<div class="well well-small box node_info"><div>

    <dl>
        <dt>Created</dt>
        <dd>

<span class="datetime" title="2025-02-25 12:38">1 week ago</span></dd>

        <dt>Modified</dt>
        <dd>

<span class="datetime" title="2025-03-04 22:25">2 hours, 40 minutes ago</span></dd>

        <dt>Type</dt>
        <dd>article</dd>

        <dt>Status</dt>
        <dd>active</dd>

        <dt>License</dt>
        <dd>
            
                <a href="/kb/en/release-notes-for-mariadb-enterprise-server-11-4-3-1/+license/">CC BY-SA / Gnu FDL</a>
            
        </dd>

        
    </dl>

    
    <ul class="rss_feeds">
        <li><a href="/kb/en/release-notes-for-mariadb-enterprise-server-11-4-3-1/+history/feed/">
            History</a>
        </li>
        <li><a href="/kb/en/release-notes-for-mariadb-enterprise-server-11-4-3-1/+comments/feed/">
            Comments</a>
        </li>
    </ul>
    

</div>
</div>





    
    
    

<div class="well well-small box attachments"><div><div class="edit_link pull-right"><a href="/kb/en/release-notes-for-mariadb-enterprise-server-11-4-3-1/+edit/attachments/">Edit</a></div><h5>Attachments</h5></div><div>

        
            <div class="no_data">No attachments exist</div>
        
    
</div>
</div>

    



    
    






</div>


                    

































                </aside>
            
            
            
                
            
            
                
            
            <section id="content" class="limited_width col-md-8 clearfix">
                
                    <h1>Release Notes for MariaDB Enterprise Server 11.4.3-1</h1>
                

                



                <div>
                    
    

    
    
    

    <div class="node creole">
        
        
        


    
    <div class="answer formatted">
        <p>MariaDB Enterprise Server 11.4.4-2 is the first GA release of <a href="/kb/en/mariadb-enterprise-server/">MariaDB Enterprise Server</a> 11.4.</p>
<p>The changes listed here are relative to MariaDB Enterprise Server 10.6.19-15</p>
<p>MariaDB Enterprise Server 11.4.4-2 was released on 2025-01-16.</p>
<h2 class="anchored_heading" id="changes-in-storage-engines">Changes in Storage Engines</h2>
<ul start="1"><li>With InnoDB storage engine, the process to import an InnoDB tablespace has been simplified. (<a href="https://jira.mariadb.org/browse/MDEV-26137">MDEV-26137</a>)
<ul start="1"><li>Prior to this release, the process was to create a table, discard the tablespace, then execute <code>ALTER TABLE IMPORT TABLESPACE</code>.
</li><li>Starting with this release, <code>ALTER TABLE IMPORT TABLESPACE</code> is the only command needed.
</li><li>For example:<pre class="fixed"><span class="n">FLUSH</span> <span class="n">TABLES</span> <span class="n">t1</span> <span class="k">FOR</span> <span class="n">EXPORT</span><span class="p">;</span>
<span class="c1">--copy_file $MYSQLD_DATADIR/test/t1.cfg $MYSQLD_DATADIR/test/t2.cfg</span>
<span class="c1">--copy_file $MYSQLD_DATADIR/test/t1.frm $MYSQLD_DATADIR/test/t2.frm</span>
<span class="c1">--copy_file $MYSQLD_DATADIR/test/t1.ibd $MYSQLD_DATADIR/test/t2.ibd</span>
<span class="n">UNLOCK</span> <span class="n">TABLES</span><span class="p">;</span>
<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">t2</span> <span class="n">IMPORT</span> <span class="n">TABLESPACE</span><span class="p">;</span>
</pre>
</li></ul>
</li></ul>
<ul start="1"><li>With InnoDB storage engine, space occupied by freed pages within the InnoDB system tablespace can be reclaimed. (<a href="https://jira.mariadb.org/browse/MDEV-14795">MDEV-14795</a>)
<ul start="1"><li>Prior to this release, InnoDB data files would never shrink during normal operation. .ibd files could be shrunk by rebuilding tables with <code>OPTIMIZE TABLE</code> and undo tablespace files using <code>SET GLOBAL innodb_undo_log_truncate=ON</code>
</li><li>Starting with this release, an <code>:autoshrink</code> attribute has been added for the <code>innodb_data_file_path</code> system variable.
</li><li>With <code>:autoshrink</code>, the InnoDB system tablespace can be truncated after the last allocated page within it, down to the specified minimum size.
</li><li>For example, with this configuration the InnoDB system tablespace can be shrunk down to 12MiB:<pre class="fixed"><span class="p">[</span><span class="n">mariadb</span><span class="p">]</span>
<span class="p">...</span>
<span class="n">innodb_data_file_path</span><span class="o">=</span><span class="n">ibdata1</span><span class="p">:</span><span class="mi">12</span><span class="n">M</span><span class="p">;</span><span class="n">ibdata2</span><span class="p">:</span><span class="mi">50</span><span class="n">M</span><span class="p">:</span><span class="n">autoextend</span><span class="p">:</span><span class="n">autoshrink</span>
</pre>
</li></ul>
</li></ul>
<ul start="1"><li>With InnoDB storage engine, system variable changes provide improved control of log files and data files: (<a href="https://jira.mariadb.org/browse/MDEV-30136">MDEV-30136</a>)
<ul start="1"><li>The <a href="/kb/en/innodb-system-variables/#innodb_log_file_buffering"><code>innodb_log_file_buffering</code></a> and <a href="/kb/en/innodb-system-variables/#innodb_log_file_write_through"><code>innodb_log_file_write_through</code></a> system variables have been added for log file control. These system variables are boolean and can be set dynamically while the server is running.
</li><li>The <a href="/kb/en/innodb-system-variables/#innodb_data_file_buffering"><code>innodb_data_file_buffering</code></a> and <a href="/kb/en/innodb-system-variables/#innodb_data_file_write_through"><code>innodb_data_file_write_through</code></a> system variables have been added for data file control. These system variables are boolean and can be set dynamically while the server is running.
</li><li>The <a href="/kb/en/innodb-system-variables/#innodb_flush_method"><code>innodb_flush_method</code> system variable</a> has been deprecated.
</li></ul>
</li></ul>
<ul start="1"><li>With InnoDB storage engine, performance of bulk inserts is improved. (<a href="https://jira.mariadb.org/browse/MDEV-25036">MDEV-25036</a>)
</li></ul>
<ul start="1"><li>With InnoDB storage engine, changes to the InnoDB redo log format reduce write amplification, which can result in better performance. (<a href="https://jira.mariadb.org/browse/MDEV-14425">MDEV-14425</a>)
</li></ul>
<ul start="1"><li>With InnoDB storage engine, the InnoDB change buffer has been removed: (<a href="https://jira.mariadb.org/browse/MDEV-29694">MDEV-29694</a>)
<ul start="1"><li>With modern storage speeds, the InnoDB change buffer tends to add more overhead, rather than providing a performance gain.
</li><li>The removal of the InnoDB change buffer also simplifies the internal recovery process.
</li><li>The <a href="/kb/en/innodb-system-variables/#innodb_change_buffering"><code>innodb_change_buffering</code></a> and <a href="/kb/en/innodb-system-variables/#innodb_change_buffer_max_size"><code>innodb_change_buffer_max_size</code></a> system variables have been removed.
</li><li>The <a href="/kb/en/innodb-status-variables/#Innodb_ibuf_discarded_delete_marks"><code>Innodb_ibuf_discarded_delete_marks</code></a>, <a href="/kb/en/innodb-status-variables/#Innodb_ibuf_discarded_deletes"><code>Innodb_ibuf_discarded_deletes</code></a>, <a href="/kb/en/innodb-status-variables/#Innodb_ibuf_discarded_inserts"><code>Innodb_ibuf_discarded_inserts</code></a>, <a href="/kb/en/innodb-status-variables/#Innodb_ibuf_free_list"><code>Innodb_ibuf_free_list</code></a>, <a href="/kb/en/innodb-status-variables/#Innodb_ibuf_merged_delete_marks"><code>Innodb_ibuf_merged_delete_marks</code></a>, <a href="/kb/en/innodb-status-variables/#Innodb_ibuf_merged_deletes"><code>Innodb_ibuf_merged_deletes</code></a>, <a href="/kb/en/innodb-status-variables/#Innodb_ibuf_merged_inserts"><code>Innodb_ibuf_merged_inserts</code></a>, <a href="/kb/en/innodb-status-variables/#Innodb_ibuf_merges"><code>Innodb_ibuf_merges</code></a>, <a href="/kb/en/innodb-status-variables/#Innodb_ibuf_segment_size"><code>Innodb_ibuf_segment_size</code></a>, and <a href="/kb/en/innodb-status-variables/#Innodb_ibuf_size"><code>Innodb_ibuf_size</code></a> status variables have been removed.
</li></ul>
</li></ul>
<ul start="1"><li>With InnoDB storage engine, the Prefix Index Queries Optimization is always used: (<a href="https://jira.mariadb.org/browse/MDEV-28540">MDEV-28540</a>)
<ul start="1"><li>This feature was originally implemented as an optional optimization in MariaDB Server 10.1.
</li><li>The <a href="/kb/en/innodb-status-variables/#Innodb_secondary_index_triggered_cluster_reads"><code>Innodb_secondary_index_triggered_cluster_reads</code></a> and <a href="/kb/en/innodb-status-variables/#Innodb_secondary_index_triggered_cluster_reads_avoided"><code>Innodb_secondary_index_triggered_cluster_reads_avoided</code></a> status variables have been removed.
</li></ul>
</li></ul>
<ul start="1"><li>With InnoDB storage engine, multiple undo tablespaces are now enabled by default, so that the default configuration enables undo logs to be truncated while the server is running: (<a href="https://jira.mariadb.org/browse/MDEV-29986">MDEV-29986</a>)
<ul start="1"><li>Truncation does not apply to undo logs in the system tablespace.
</li><li><a href="/kb/en/innodb-system-variables/#innodb_undo_tablespaces"><code>innodb_undo_tablespaces</code></a> default changed from <code>0</code> to <code>3</code>.
</li><li>To reclaim space, <a href="/kb/en/innodb-system-variables/#innodb_undo_log_truncate"><code>innodb_undo_log_truncate</code></a>=ON must be set
</li><li><code>innodb_undo_log_truncate=ON</code> can have a performance impact for some workloads. In those cases, undo truncation can be enabled by temporarily setting the following:<pre class="fixed"><span class="k">SET</span> <span class="k">GLOBAL</span> <span class="n">innodb_undo_log_truncate</span><span class="o">=</span><span class="k">ON</span><span class="p">;</span>
</pre>
</li></ul>
</li></ul>
<ul start="1"><li>With InnoDB storage engine, the temporary InnoDB tablespaces can now be shrunk without restart
<ul start="1"><li>Before MariaDB Enterprise Server 11.4 the only way to reclaim disk space used by temporary InnoDB tablespaces was to restart the server, as temporary tablespaces are deleted when you stop the server and are recreated with their configured size
</li><li>The disk space can now be reclaimed, tables in use will not be removed. The command to trigger the new feature is:
<pre class="fixed indent2"><span class="k">SET</span> <span class="k">GLOBAL</span> <span class="n">innodb_truncate_temporary_tablespace_now</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span>
</pre>
</li></ul>
</li></ul>
<div style="margin-left:2em"><div style="margin-left:2em"><p>Example:</p>
</div>
</div>
<pre class="fixed indent2"><span class="k">CREATE</span> <span class="k">TEMPORARY</span> <span class="k">TABLE</span> <span class="n">t1</span><span class="p">(</span><span class="n">f1</span> <span class="nb">INT</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span> <span class="n">f2</span> <span class="nb">INT</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">)</span><span class="n">ENGINE</span><span class="o">=</span><span class="n">InnoDB</span><span class="p">;</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">t1</span> <span class="k">SELECT</span> <span class="n">seq</span><span class="p">,</span> <span class="n">seq</span> <span class="k">FROM</span> <span class="n">seq_1_to_65536</span><span class="p">;</span>
<span class="k">DROP</span> <span class="k">TABLE</span> <span class="n">t1</span><span class="p">;</span>
<span class="k">SELECT</span> <span class="n">NAME</span><span class="p">,</span> <span class="n">FILE_SIZE</span> <span class="k">FROM</span> <span class="n">INFORMATION_SCHEMA</span><span class="p">.</span><span class="n">INNODB_SYS_TABLESPACES</span> <span class="k">WHERE</span> <span class="n">NAME</span><span class="o">=</span><span class="ss">&quot;innodb_temp</span>
<span class="ss">orary&quot;</span><span class="p">;</span>
</pre><pre class="fixed indent2"><span class="o">+</span><span class="c1">------------------+-----------+</span>
<span class="o">|</span> <span class="n">NAME</span>             <span class="o">|</span> <span class="n">FILE_SIZE</span> <span class="o">|</span>
<span class="o">+</span><span class="c1">------------------+-----------+</span>
<span class="o">|</span> <span class="n">innodb_temporary</span> <span class="o">|</span>  <span class="mi">79691776</span> <span class="o">|</span>
<span class="o">+</span><span class="c1">------------------+-----------+</span>
</pre><pre class="fixed indent2"><span class="k">SET</span> <span class="k">GLOBAL</span> <span class="n">INNODB_TRUNCATE_TEMPORARY_TABLESPACE_NOW</span><span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="k">SELECT</span> <span class="n">NAME</span><span class="p">,</span> <span class="n">FILE_SIZE</span> <span class="k">FROM</span> <span class="n">INFORMATION_SCHEMA</span><span class="p">.</span><span class="n">INNODB_SYS_TABLESPACES</span> <span class="k">WHERE</span> <span class="n">NAME</span><span class="o">=</span><span class="ss">&quot;innodb_temp</span>
<span class="ss">orary&quot;</span><span class="p">;</span>
</pre><pre class="fixed indent2"><span class="o">+</span><span class="c1">------------------+-----------+</span>
<span class="o">|</span> <span class="n">NAME</span>             <span class="o">|</span> <span class="n">FILE_SIZE</span> <span class="o">|</span>
<span class="o">+</span><span class="c1">------------------+-----------+</span>
<span class="o">|</span> <span class="n">innodb_temporary</span> <span class="o">|</span>  <span class="mi">12582912</span> <span class="o">|</span>
<span class="o">+</span><span class="c1">------------------+-----------+</span>
</pre><ul start="1"><li>With Spider storage engine, engine-defined attributes (table options) are accepted. Previously, Spider required parameters to be provided via <code>COMMENT</code> for a table: (<a href="https://jira.mariadb.org/browse/MDEV-27106">MDEV-27106</a>) </li></ul>
<div class="cstm-style darkheader borders table-head-align-top centered"><table><tr><th><strong>New Table Option</strong></th><th><strong>Old</strong> <code>COMMENT</code> <strong>Option</strong></th><th><strong>Description</strong></th></tr>
<tr><td><code>REMOTE_DATABASE</code></td><td><code>database</code></td><td>The remote database that contains the remote table</td></tr>
<tr><td><code>REMOTE_SERVER</code></td><td><code>srv</code></td><td>The IP address or hostname of the remote server that contains the remote table</td></tr>
<tr><td><code>REMOTE_TABLE</code></td><td><code>tbl</code></td><td>The remote table</td></tr>
</table>
</div><ul start="1"><li>Spider storage engine system variable defaults have changed.
</li></ul>
<ul start="1"><li>With the Spider storage engine the preferred way to specify Spider parameters is now to use the dedicated Spider table options. Abusing the table COMMENT clause is now deprecated (<a href="https://jira.mariadb.org/browse/MDEV-28861">MDEV-28861</a>)
</li></ul>
<ul start="1"><li>With MyRocks storage engine, log files can be stored in a user-defined directory specified by the <a href="/kb/en/myrocks-system-variables/#rocksdb_log_dir"><code>rocksdb_log_dir</code> system variable</a>. (<a href="https://jira.mariadb.org/browse/MDEV-27791">MDEV-27791</a>)
</li></ul>
<h2 class="anchored_heading" id="compatibility-enhancements">Compatibility Enhancements</h2>
<ul start="1"><li>Stored function parameters can be qualified with <code>IN</code>, <code>OUT</code>, <code>INOUT</code>, and <code>IN OUT</code>: (<a href="https://jira.mariadb.org/browse/MDEV-10654">MDEV-10654</a>)
<ul start="1"><li>When a parameter is qualified with <code>IN</code>, a value is passed to the function.
</li><li>When a parameter is qualified with <code>OUT</code>, the function returns a value to the caller.
</li><li>When a parameter is qualified with <code>INOUT</code> or <code>IN OUT</code>, a value is passed to the function, and the function also returns a value to the caller.
</li><li><code>OUT</code>, <code>INOUT</code>, and <code>INOUT</code> can only be used when called from <code>SET</code> and not when called from <code>SELECT</code>
</li><li><code>OUT</code>, <code>INOUT</code>, and <code>INOUT</code> allow a function to return more than one value, which allows for more complex and nested functions.
</li><li>In previous releases, the qualifiers were supported for stored procedures, but not for stored functions.
</li><li>Starting with this release, the qualifiers are accepted in stored functions using the same syntax previously used for stored procedures.
</li><li>When <a href="/kb/en/sql_mode/"><code>sql_mode=ORACLE</code></a> is set, the behavior is adjusted to match the behavior of Oracle.
</li></ul>
</li></ul>
<ul start="1"><li>Changed default behavior for <a href="/kb/en/timestamp/"><code>TIMESTAMP</code></a> field properties: (<a href="https://jira.mariadb.org/browse/MDEV-28632">MDEV-28632</a>)
<ul start="1"><li>Previous to this release, implementation-specific behavior was present by default for the first <code>TIMESTAMP</code> column in a table. This behavior added<br> <code>DEFAULT current_timestamp() ON UPDATE current_timestamp()</code> to the <code>TIMESTAMP</code> field properties.
</li><li>Starting this release, the implementation-specific behavior for <code>TIMESTAMP</code> field properties is disabled by default. The default value of the <a href="/kb/en/server-system-variables/#explicit_defaults_for_timestamp"><code>explicit_defaults_for_timestamp</code> system variable</a> is changed to OFF
</li><li>As a result of this change, new <code>TIMESTAMP</code> columns without explicit default values will be created with <code>DEFAULT NULL</code>
</li></ul>
</li></ul>
<h2 class="anchored_heading" id="operational-enhancements">Operational Enhancements</h2>
<ul start="1"><li>Online Schema Change (OSC) is new server internal functionality which makes all schema changes (<code>ALTER TABLE</code> commands) non-blocking. (<a href="https://jira.mariadb.org/browse/MDEV-16329">MDEV-16329</a>)
<ul start="1"><li>OSC targets a problem previously solvable using third-party solutions, in a way which reduces operational impact. Some aspects of the OSC implementation are operationally significant:
<ul start="1"><li>OSC performs internal Copy-Apply-Replace: First, the altered table gets copied, then the online changes get applied. A short table lock occurs when applying last changes and renaming the tables. The binary log is not used in this process. This is significant because some third-party approaches to this problem depend on client connections which can be subject to connection timeouts and similar factors.
</li><li>OSC is asynchronous: Changes from applications are first stored in an online change buffer. This is significant because some third-party approaches to this problem are synchronous and as result impact the execution of other transactions.
</li><li>OSC is trigger-less: Only server internal handlers for a DML-side check if ALTER TABLE is in progress are used. INSERT, UPDATE, or DELETE triggers based on stored routines are not used. This is significant because some third-party approaches to this problem depend on triggers.
</li></ul>
</li><li>By default, when an <code>ALTER</code> operation cannot be executed <code>INSTANT</code>, OSC will be used. If OSC cannot be used, another algorithm will be used.
</li><li>If the <code>LOCK=NONE</code> option is explicitly specified in the <code>ALTER</code> statement, or if the equivalent statement <code>ALTER ONLINE TABLE</code> is used, the operation will be performed if it can be done as OSC and fails otherwise.
</li><li>As an override to this new behavior, if the <code>old_mode</code> system variable is set with <code>LOCK_ALTER_TABLE_COPY</code>, the old behavior is preferred when <code>LOCK=NON</code>E is not explicitly set. (<a href="https://jira.mariadb.org/browse/MDEV-31812">MDEV-31812</a>)
</li></ul>
</li></ul>
<ul start="1"><li>Stored routine calls reflect all changes to metadata for objects the stored routine depends on. (<a href="https://jira.mariadb.org/browse/MDEV-5816">MDEV-5816</a>)
</li></ul>
<div style="margin-left:2em"><div style="margin-left:2em"><p>○ Prior to this release, a reconnect was needed before a stored routine was able to update its metadata from altered objects. For example, absent a reconnect:</p>
</div>
</div>
<pre class="fixed indent2"><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">t1</span> <span class="p">(</span><span class="n">id</span> <span class="nb">INT</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">t1</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">100</span><span class="p">);</span>
<span class="k">CREATE</span> <span class="k">PROCEDURE</span> <span class="n">p1</span><span class="p">()</span> <span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">t1</span><span class="p">;</span>
<span class="k">CALL</span> <span class="n">p1</span><span class="p">;</span>
</pre><pre class="fixed indent2"><span class="o">+</span><span class="c1">------+</span>
<span class="o">|</span> <span class="n">id</span>   <span class="o">|</span>
<span class="o">+</span><span class="c1">------+</span>
<span class="o">|</span>  <span class="mi">100</span> <span class="o">|</span>
<span class="o">+</span><span class="c1">------+</span>
</pre><pre class="fixed indent2"><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">t1</span> <span class="k">ADD</span> <span class="k">COLUMN</span> <span class="n">b</span> <span class="nb">INT</span> <span class="k">DEFAULT</span> <span class="mi">0</span><span class="p">;</span>
<span class="k">CALL</span> <span class="n">p1</span><span class="p">;</span>
</pre><pre class="fixed indent2"><span class="o">+</span><span class="c1">------+</span>
<span class="o">|</span> <span class="n">id</span>   <span class="o">|</span>
<span class="o">+</span><span class="c1">------+</span>
<span class="o">|</span>  <span class="mi">100</span> <span class="o">|</span>
<span class="o">+</span><span class="c1">------+ </span>
</pre><div style="margin-left:2em"><div style="margin-left:2em"><div style="margin-left:2em"><div style="margin-left:2em"><p>• Starting with this release, metadata changes are reflected without a reconnect:</p>
</div>
</div>
</div>
</div>
<pre class="fixed indent3"><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">t1</span> <span class="p">(</span><span class="n">id</span> <span class="nb">INT</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">t1</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">100</span><span class="p">);</span>
<span class="k">CREATE</span> <span class="k">PROCEDURE</span> <span class="n">p1</span><span class="p">()</span> <span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">t1</span><span class="p">;</span>
<span class="k">CALL</span> <span class="n">p1</span><span class="p">;</span>
</pre><pre class="fixed indent3"><span class="o">+</span><span class="c1">------+</span>
<span class="o">|</span> <span class="n">id</span>   <span class="o">|</span>
<span class="o">+</span><span class="c1">------+</span>
<span class="o">|</span>  <span class="mi">100</span> <span class="o">|</span>
<span class="o">+</span><span class="c1">------+</span>
</pre><pre class="fixed indent3"><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">t1</span> <span class="k">ADD</span> <span class="k">COLUMN</span> <span class="n">b</span> <span class="nb">INT</span> <span class="k">DEFAULT</span> <span class="mi">0</span><span class="p">;</span>
<span class="k">CALL</span> <span class="n">p1</span><span class="p">;</span>
</pre><pre class="fixed indent3"><span class="o">+</span><span class="c1">------+------+</span>
<span class="o">|</span> <span class="n">id</span>   <span class="o">|</span> <span class="n">b</span>    <span class="o">|</span>
<span class="o">+</span><span class="c1">------+------+</span>
<span class="o">|</span>  <span class="mi">100</span> <span class="o">|</span>    <span class="mi">0</span> <span class="o">|</span>
<span class="o">+</span><span class="c1">------+------+</span>
</pre><ul start="1"><li>Temporary tables are now included in <code>information_schema.TABLES</code>, in <code>SHOW TABLES</code> output, and in <code>SHOW TABLE STATUS</code> output. (<a href="https://jira.mariadb.org/browse/MDEV-12459">MDEV-12459</a>)
<ul start="1"><li>For example:<pre class="fixed"><span class="k">CREATE</span> <span class="k">DATABASE</span> <span class="n">test</span><span class="p">;</span>
<span class="n">USE</span> <span class="n">test</span><span class="p">;</span>
<span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">t1</span> <span class="p">(</span><span class="n">id</span> <span class="nb">int</span><span class="p">);</span>
<span class="k">CREATE</span> <span class="k">TEMPORARY</span> <span class="k">TABLE</span> <span class="n">t2_temp</span> <span class="p">(</span><span class="n">id</span> <span class="nb">int</span><span class="p">);</span>
<span class="k">SHOW</span> <span class="k">FULL</span> <span class="k">TABLE</span><span class="p">;</span>
</pre>
</li></ul>
</li></ul>
<pre class="fixed indent2"><span class="o">+</span><span class="c1">----------------+-----------------+</span>
<span class="o">|</span> <span class="n">Tables_in_test</span> <span class="o">|</span> <span class="n">Table_type</span>      <span class="o">|</span>
<span class="o">+</span><span class="c1">----------------+-----------------+</span>
<span class="o">|</span> <span class="n">t2_temp</span>        <span class="o">|</span> <span class="k">TEMPORARY</span> <span class="k">TABLE</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">t1</span>             <span class="o">|</span> <span class="n">BASE</span> <span class="k">TABLE</span>      <span class="o">|</span>
<span class="o">+</span><span class="c1">----------------+-----------------+</span>
</pre><pre class="fixed indent2"><span class="k">SELECT</span> <span class="n">table_schema</span><span class="p">,</span> <span class="k">table_name</span><span class="p">,</span> <span class="n">table_type</span> <span class="k">FROM</span> <span class="n">information_schema</span><span class="p">.</span><span class="n">TABLES</span> <span class="k">WHERE</span> <span class="n">table_schema</span><span class="o">=</span><span class="s1">&#39;test&#39;</span><span class="p">;</span>
</pre><pre class="fixed indent2"><span class="o">+</span><span class="c1">--------------+------------+------------+</span>
<span class="o">|</span> <span class="n">table_schema</span> <span class="o">|</span> <span class="k">table_name</span> <span class="o">|</span> <span class="n">table_type</span> <span class="o">|</span>
<span class="o">+</span><span class="c1">--------------+------------+------------+</span>
<span class="o">|</span> <span class="n">test</span>         <span class="o">|</span> <span class="n">t2_temp</span>    <span class="o">|</span> <span class="k">TEMPORARY</span>  <span class="o">|</span>
<span class="o">|</span> <span class="n">test</span>         <span class="o">|</span> <span class="n">t1</span>         <span class="o">|</span> <span class="n">BASE</span> <span class="k">TABLE</span> <span class="o">|</span>
<span class="o">+</span><span class="c1">--------------+------------+------------+</span>
</pre><ul start="1"><li>For <a href="/kb/en/insert/"><code>INSERT</code></a> operations that insert multiple rows, error reporting has been improved: (<a href="https://jira.mariadb.org/browse/MDEV-10075">MDEV-10075</a>)
<ul start="1"><li>In <a href="/kb/en/get-diagnostics/"><code>GET DIAGNOSTICS</code></a>, the ROW_NUMBER property allows retrieval of the row number that caused the error or warning:
</li></ul>
</li></ul>
<pre class="fixed indent3"><span class="k">GET</span> <span class="k">DIAGNOSTICS</span> <span class="n">CONDITION</span> <span class="mi">1</span> <span class="o">@</span><span class="n">failed_row</span><span class="o">=</span><span class="n">ROW_NUMBER</span><span class="p">;</span>
</pre><ul start="1"><li>Information Schema system table optimizations: (<a href="https://jira.mariadb.org/browse/MDEV-20609">MDEV-20609</a>)
<ul start="1"><li>When <a href="/kb/en/information-schema-parameters-table/"><code>PARAMETERS</code></a> is queried and the <code>WHERE</code> clause filters on <code>SPECIFIC_SCHEMA</code> and <code>SPECIFIC_NAME</code>, an index is used to avoid a full table scan.
</li><li>When <a href="/kb/en/information-schema-routines-table/"><code>ROUTINES</code></a> is queried and the <code>WHERE</code> clause filters on <code>ROUTINE_SCHEMA</code> and <code>ROUTINE_NAME</code>, an index is used to avoid a full table scan.
</li></ul>
</li></ul>
<ul start="1"><li><a href="/kb/en/show-explain/"><code>SHOW EXPLAIN FOR CONNECTION_ID</code></a> can show the query plan for a query running in another connection: (<a href="https://jira.mariadb.org/browse/MDEV-25956">MDEV-25956</a>)<pre class="fixed"><span class="k">SHOW</span> <span class="k">EXPLAIN</span> <span class="k">FOR</span> <span class="mi">1</span><span class="p">;</span> 
</pre>
<ul start="1"><li>The statement returns the query itself as a warning, which can be obtained via <a href="/kb/en/show-warnings/"><code>SHOW WARNINGS</code></a>.
</li></ul>
</li></ul>
<ul start="1"><li><code>SHOW ANALYZE [FORMAT=JSON] FOR CONNECTION_ID</code> can analyze a query running in another connection: (<a href="https://jira.mariadb.org/browse/MDEV-27021">MDEV-27021</a>) <pre class="fixed"><span class="k">SHOW</span> <span class="k">ANALYZE</span> <span class="k">FOR</span> <span class="mi">1</span><span class="p">;</span>
</pre>
</li></ul>
<ul start="1"><li><code>ANALYZE FORMAT=JSON</code> now shows the time spent in the query optimizer. (<a href="https://jira.mariadb.org/browse/MDEV-28926">MDEV-28926</a>)
</li></ul>
<ul start="1"><li>With <a href="/kb/en/mariadb-dump/"><code>mariadb-dump</code></a>, the new <a href="maria-dump/#options"><code>--order-by-size command-line option</code></a> allows tables to be dumped in order of size (smallest tables first): (<a href="https://jira.mariadb.org/browse/MDEV-28074">MDEV-28074</a>) <pre class="fixed"><span class="err">$</span> <span class="n">mariadb</span><span class="o">-</span><span class="n">dump</span> <span class="err">\</span>
   <span class="c1">--user=USER \</span>
   <span class="c1">--password=&#39;PASSWORD&#39; \</span>
   <span class="c1">--all-databases \</span>
   <span class="c1">--single-transaction \</span>
   <span class="c1">--order-by-size</span>
</pre>
<ul start="1"><li>This new option is useful when the <a href="/kb/en/mariadb-dump/"><code>--single-transaction</code> command-line option</a> is specified and the backup contains tables that are truncated frequently. Since tables that are truncated frequently tend to be smaller, those tables will be backed up earlier, which reduces the chance that the backup will fail with the <a href="/kb/en/e1412/"><code>ER_TABLE_DEF_CHANGED</code> error code</a>.
</li></ul>
</li></ul>
<ul start="1"><li>The <a href="/kb/en/server-system-variables/#transaction_isolation"><code>transaction_isolation</code> system variable</a> can now be used to set the transaction isolation: (<a href="https://jira.mariadb.org/browse/MDEV-21921">MDEV-21921</a>)
<ul start="1"><li>The <code>tx_isolation</code> system variable is still available as an alias, but it has been deprecated and will be removed in a later release.
</li></ul>
</li></ul>
<ul start="1"><li>The <a href="/kb/en/server-system-variables/#transaction_read_only"><code>transaction_read_only</code> system variable</a> can now be used to set a transaction to read-only. (<a href="https://jira.mariadb.org/browse/MDEV-21921">MDEV-21921</a>)
</li></ul>
<ul start="1"><li>Process list now includes the number of rows sent by the statement. The new value SENT_ROWS in the information schema table PROCESSLIST includes the number of rows sent by the current statement, shown in the processlist.
<ul start="1"><li>SELECTS with functions show the total number of rows sent by the main statement and all functions
</li><li>Stored procedures show the total number of rows sent per stored procedure statement
</li><li><code>INSERT RETURNING</code> and <code>DELETE RETURNING</code> show the total number of rows sent for the returning data set
</li><li>Example:<pre class="fixed"><span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">processlist</span><span class="err">\</span><span class="k">G</span>
</pre>
</li></ul>
</li></ul>
<pre class="fixed indent2"><span class="o">***************************</span> <span class="mi">1</span><span class="p">.</span> <span class="k">row</span> <span class="o">***************************</span>
<span class="p">...</span>
<span class="o">***************************</span> <span class="mi">2</span><span class="p">.</span> <span class="k">row</span> <span class="o">***************************</span>
             <span class="n">ID</span><span class="p">:</span> <span class="mi">6</span>
           <span class="k">USER</span><span class="p">:</span> <span class="n">root</span>
           <span class="k">HOST</span><span class="p">:</span> <span class="n">localhost</span>
             <span class="n">DB</span><span class="p">:</span> <span class="n">test</span>
        <span class="n">COMMAND</span><span class="p">:</span> <span class="n">Query</span>
           <span class="n">TIME</span><span class="p">:</span> <span class="mi">1</span>
          <span class="k">STATE</span><span class="p">:</span> <span class="n">Sending</span> <span class="k">data</span>
           <span class="n">INFO</span><span class="p">:</span> <span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">t1</span>
        <span class="n">TIME_MS</span><span class="p">:</span> <span class="mi">1340</span><span class="p">.</span><span class="mi">406</span>
          <span class="n">STAGE</span><span class="p">:</span> <span class="mi">0</span>
      <span class="n">MAX_STAGE</span><span class="p">:</span> <span class="mi">0</span>
       <span class="n">PROGRESS</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">000</span>
    <span class="n">MEMORY_USED</span><span class="p">:</span> <span class="mi">89856</span>
<span class="n">MAX_MEMORY_USED</span><span class="p">:</span> <span class="mi">392544</span>
  <span class="n">EXAMINED_ROWS</span><span class="p">:</span> <span class="mi">0</span>
      <span class="n">SENT_ROWS</span><span class="p">:</span> <span class="mi">3895737</span>
       <span class="n">QUERY_ID</span><span class="p">:</span> <span class="mi">436</span>
    <span class="n">INFO_BINARY</span><span class="p">:</span> <span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">t1</span>
            <span class="n">TID</span><span class="p">:</span> <span class="mi">100</span>
</pre><ul start="1"><li>The SQL Error Log Plugin, used to log errors sent to clients for later analysis, has been enhanced. When option <code>sql_error_log_with_db_and_thread_info=ON</code> is set, the log file is now also showing thread id and the current default schema for the error.
</li></ul>
<ul start="1"><li>When mariadb-dump is used with the option <code>-T / --tab=</code> to produce tab-separated text-format data files per table, the new option <code>--parallel</code> (synonym <code>--use-threads</code>) can be used to use several threads in parallel to dump the table data to their .txt files.
<ul start="1"><li>Parallelism also works if the option <code>--single-transaction</code> is used.
</li></ul>
</li></ul>
<ul start="1"><li>The option <code>--parallel</code> has been added to mariadb-import as a synonym to <code>--use-threads</code>, which has been available before.
</li></ul>
<h2 class="anchored_heading" id="optimizer">Optimizer</h2>
<ul start="1"><li>MariaDB Query Optimizer performs cost-based optimizations with an understanding of storage engine-specific costs: (<a href="https://jira.mariadb.org/browse/MDEV-26974">MDEV-26974</a>)
<ul start="1"><li>The query optimizer now defaults to assume SSD storage is used. Costs for disk access can be overridden.
</li><li><a href="/kb/en/the-optimizer-cost-model-from-mariadb-11-0/#description-of-the-different-cost-variables">Optimizer costs</a> can be tuned by setting the following system variables via configuration file, command-line parameter, or the <a href="/kb/en/set/"><code>SET</code> SQL statement</a>:
</li></ul>
</li></ul>
<div class="cstm-style darkheader borders table-head-align-top "><table><tr><th>System Variable</th><th>Type</th><th>Description</th></tr>
<tr><td>optimizer_disk_read_cost</td><td>Engine</td><td>Sets the time in microseconds required to read a 4K block from storage. The default value is tuned for an SSD reading at 400 MB/second.</td></tr>
<tr><td>optimizer_index_block_copy_cost</td><td>Engine</td><td>Sets the cost to lock a block in the global cache and copy it to the local cache. The cost applies to every block accessed, regardless of whether the block is already cached.</td></tr>
<tr><td>optimizer_key_compare_cost</td><td>Engine</td><td>Sets the cost to compare two key values.</td></tr>
<tr><td>optimizer_key_copy_cost</td><td>Engine</td><td>Sets the cost to copy a key value from the index to the local buffer while searching for a key value.</td></tr>
<tr><td>optimizer_key_lookup_cost</td><td>Engine</td><td>Sets the cost to find a key entry in the index.</td></tr>
<tr><td>optimizer_row_copy_cost</td><td>Engine</td><td>Sets the cost to find the next key entry in the index.</td></tr>
<tr><td>optimizer_rowid_compare_cost</td><td>Engine</td><td>Sets the cost to compare two rowid values.</td></tr>
<tr><td>optimizer_rowid_copy_cost</td><td>Engine</td><td>Sets the cost to copy a rowid from the index.</td></tr>
<tr><td>optimizer_row_lookup_cost</td><td>Engine</td><td>Sets the cost to find a row based on the rowid. The rowid is stored in the index with the key.</td></tr>
<tr><td>optimizer_row_next_find_cost</td><td>Engine</td><td>Sets the cost to find the next row.</td></tr>
<tr><td>optimizer_scan_setup_cost</td><td>Session</td><td>Sets the cost to start a table or index scan. The default low value configures the optimizer to use index lookups for tables with very few rows.</td></tr>
<tr><td>optimizer_where_cost</td><td>Session</td><td>Sets the cost to execute the WHERE clause for every row found. As this value is increases, the optimizer is more likely to choose plans which read fewer rows.</td></tr>
</table>
</div><ul start="1"><li>Optimizer costs can be tuned per storage engine by prefixing the system variable with the storage engine name.
<ul start="1"><li>Current optimizer costs for each storage engine can be queried via <a href="/kb/en/the-optimizer-cost-model-from-mariadb-11-0/#new-cost-model"><code>information_schema.OPTIMIZER_COSTS</code></a>
</li></ul>
</li></ul>
<ul start="1"><li>For JOIN with many eq_ref tables, query performance is improved: (<a href="https://jira.mariadb.org/browse/MDEV-28852">MDEV-28852</a>)
<ul start="1"><li>New system variable <a href="/kb/en/server-system-variables/#optimizer_extra_pruning_depth"><code>optimizer_extra_pruning_depth</code></a>
</li><li>Default changed for system variable <a href="/kb/en/server-system-variables/#optimizer_prune_level"><code>optimizer_prune_level</code></a> from 1 to 2 to enable prune join prefixes
</li><li>New status variable <code>Optimizer_join_prefixes_check_calls</code>
</li></ul>
</li></ul>
<ul start="1"><li>An index can now be used when comparing the return value of the <a href="/kb/en/date/">DATE() function</a> to a constant value. (<a href="https://jira.mariadb.org/browse/MDEV-8320">MDEV-8320</a>)
</li></ul>
<ul start="1"><li>Single-table <a href="/kb/en/update/"><code>UPDATE</code></a> and <a href="/kb/en/delete/"><code>DELETE</code></a> can now benefit from semi-join optimization. (<a href="https://jira.mariadb.org/browse/MDEV-7487">MDEV-7487</a>)
</li></ul>
<ul start="1"><li>JSON histograms with detailed histogram collection: (<a href="https://jira.mariadb.org/browse/MDEV-26519">MDEV-26519</a>)
<ul start="1"><li>Enabled when <a href="https://mariadb.com/docs/server/ref/mdb/system-variables/histogram_type"><code>histogram_type=JSON_HB</code></a> is set, which is now the default.
</li><li>JSON histograms result in more precise data statistics for string data types or when columns have highly-uneven data distribution.
</li><li>With more precise data statistics the optimizer can create better query plans, resulting in faster queries.
</li></ul>
</li></ul>
<h2 class="anchored_heading" id="partitioning">Partitioning</h2>
<ul start="1"><li>A table can be converted into a partition with<br> <code>ALTER TABLE .. CONVERT TABLE .. TO PARTITION</code>: (<a href="https://jira.mariadb.org/browse/MDEV-22165">MDEV-22165</a>) <pre class="fixed"><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">partitioned_tab</span>
   <span class="k">CONVERT</span> <span class="k">TABLE</span> <span class="n">tab1</span>
   <span class="k">TO</span> <span class="n">PARTITION</span> <span class="n">part_name</span> <span class="k">VALUES</span> <span class="k">LESS</span> <span class="k">THAN</span> <span class="p">(</span><span class="mi">1000000</span><span class="p">);</span>
</pre>
<ul start="1"><li>The <code>ALTER TABLE .. CONVERT TABLE .. TO PARTITION</code> operation was previously backported to MariaDB Enterprise Server 10.6.11-6.
</li></ul>
</li></ul>
<ul start="1"><li>A partition can be converted into a table with<br> <code>ALTER TABLE .. CONVERT PARTITION .. TO TABLE:</code> (<a href="https://jira.mariadb.org/browse/MDEV-22166">MDEV-22166</a>) <pre class="fixed"><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">partitioned_tab</span>
   <span class="k">CONVERT</span> <span class="n">PARTITION</span> <span class="n">part_name</span>
   <span class="k">TO</span> <span class="k">TABLE</span> <span class="n">tab1</span><span class="p">;</span>
</pre>
<ul start="1"><li>The <code>ALTER TABLE .. CONVERT PARTITION .. TO TABLE</code> operation was previously backported to MariaDB Enterprise Server 10.6.11-6.
</li></ul>
</li></ul>
<ul start="1"><li><a href="/kb/en/create-table/">CREATE TABLE</a> syntax has been extended, so the PARTITION keyword is optional in each partition definition: (<a href="https://jira.mariadb.org/browse/MDEV-26471">MDEV-26471</a>) <pre class="fixed"><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">partitioned_tab</span> <span class="p">(</span>
   <span class="n">col1</span> <span class="nb">int</span>
<span class="p">)</span>
<span class="n">PARTITION</span> <span class="k">BY</span> <span class="n">RANGE</span><span class="p">(</span><span class="n">col1</span><span class="p">)</span> <span class="p">(</span>
   <span class="n">part1</span> <span class="k">VALUES</span> <span class="k">LESS</span> <span class="k">THAN</span> <span class="p">(</span><span class="mi">1000000</span><span class="p">),</span>
   <span class="n">part2</span> <span class="k">VALUES</span> <span class="k">LESS</span> <span class="k">THAN</span> <span class="p">(</span><span class="mi">2000000</span><span class="p">),</span>
   <span class="n">part3</span> <span class="k">VALUES</span> <span class="k">LESS</span> <span class="k">THAN</span> <span class="p">(</span><span class="mi">3000000</span><span class="p">),</span>
   <span class="n">part4</span> <span class="k">VALUES</span> <span class="k">LESS</span> <span class="k">THAN</span> <span class="p">(</span><span class="mi">4000000</span><span class="p">),</span>
   <span class="n">part5</span> <span class="k">VALUES</span> <span class="k">LESS</span> <span class="k">THAN</span> <span class="p">(</span><span class="mi">5000000</span><span class="p">),</span>
   <span class="n">part_end</span> <span class="k">VALUES</span> <span class="k">LESS</span> <span class="k">THAN</span> <span class="k">MAXVALUE</span>
<span class="p">);</span>
</pre>
</li></ul>
<ul><li>Engine-defined attributes can be defined per-partition: (<a href="https://jira.mariadb.org/browse/MDEV-5271">MDEV-5271</a>)<pre class="fixed"><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">remote_spider_tab</span> <span class="p">(</span>
   <span class="n">id</span> <span class="nb">INT</span><span class="p">,</span>
   <span class="n">str</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span>
   <span class="k">PRIMARY</span> <span class="k">KEY</span><span class="p">(</span><span class="n">id</span><span class="p">)</span>
<span class="p">)</span> <span class="n">ENGINE</span><span class="o">=</span><span class="n">Spider</span>
<span class="n">PARTITION</span> <span class="k">BY</span> <span class="n">RANGE</span><span class="p">(</span><span class="n">id</span><span class="p">)</span> <span class="p">(</span>
   <span class="n">PARTITION</span> <span class="n">east_part</span> <span class="k">VALUES</span> <span class="k">LESS</span> <span class="k">THAN</span> <span class="p">(</span><span class="mi">100</span><span class="p">)</span> <span class="n">REMOTE_SERVER</span><span class="o">=</span><span class="ss">&quot;mdb-east.example.org&quot;</span> <span class="n">REMOTE_TABLE</span><span class="o">=</span><span class="ss">&quot;tab1&quot;</span><span class="p">,</span>
   <span class="n">PARTITION</span> <span class="n">west_part</span> <span class="k">VALUES</span> <span class="k">LESS</span> <span class="k">THAN</span> <span class="k">MAXVALUE</span> <span class="n">REMOTE_SERVER</span><span class="o">=</span><span class="ss">&quot;mdb-west.example.org&quot;</span><span class="p">,</span> <span class="n">REMOTE_TABLE</span><span class="o">=</span><span class="ss">&quot;tab1&quot;</span>
<span class="p">);</span>
</pre>
</li></ul>
<ul><li>Exchanging partition or converting a table is now possible without a validation of the partitioning expression
<ul start="1"><li>This new feature should be used with care, as it can lead to inconsistencies if the partitioning rules are not met.
</li><li>The new addition to ALTER TABLE is:
</li></ul>
</li></ul>
<pre class="fixed indent2"><span class="n">EXCHANGE</span> <span class="n">PARTITION</span> <span class="n">partition_name</span> <span class="k">WITH</span> <span class="k">TABLE</span> <span class="n">tbl_name</span> <span class="p">[</span><span class="err">{</span><span class="k">WITH</span> <span class="o">|</span> <span class="k">WITHOUT</span><span class="err">}</span> <span class="n">VALIDATION</span><span class="p">]</span>

<span class="k">CONVERT</span> <span class="k">TABLE</span> <span class="n">normal_table</span> <span class="k">TO</span> <span class="n">partition_definition</span> <span class="p">[</span><span class="err">{</span><span class="k">WITH</span> <span class="o">|</span> <span class="k">WITHOUT</span><span class="err">}</span> <span class="n">VALIDATION</span><span class="p">]</span>
</pre><h2 class="anchored_heading" id="system-versioning">System Versioning</h2>
<ul start="1"><li>History partition creation can be automated using the <code>AUTO</code> keyword when partitioned by <code>INTERVAL</code> or <code>LIMIT</code>: (<a href="https://jira.mariadb.org/browse/MDEV-17554">MDEV-17554</a>) <pre class="fixed"><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">t1</span> <span class="p">(</span><span class="n">x</span> <span class="nb">int</span><span class="p">)</span> <span class="k">WITH</span> <span class="k">SYSTEM</span> <span class="n">VERSIONING</span>
   <span class="n">PARTITION</span> <span class="k">BY</span> <span class="n">system_time</span> <span class="nb">INTERVAL</span> <span class="mi">1</span> <span class="n">months</span> <span class="n">AUTO</span><span class="p">;</span>
</pre>
<ul start="1"><li>In the above example, a new history partition to store historical row versions is created on a monthly basis.
</li></ul>
</li></ul>
<ul start="1"><li><a href="/kb/en/mariadb-dump/"><code>mariadb-dump</code></a> can backup historical data from system-versioned tables if the <a href="/kb/en/mariadb-dump/#options"><code>--dump-history</code> command-line option</a> is specified. (<a href="https://jira.mariadb.org/browse/MDEV-16029">MDEV-16029</a>)
</li></ul>
<ul start="1"><li><a href="/kb/en/mariadb-dump/"><code>mariadb-dump</code></a> can perform a dump of historical data as of a point in time if the <a href="/kb/en/mariadb-dump/#options"><code>--as-of</code> command-line option</a> is specified. (<a href="https://jira.mariadb.org/browse/MDEV-16355">MDEV-16355</a>)
</li></ul>
<ul start="1"><li>More Information about Application-time Period Tables is now available in the information schema
<ul start="1"><li>New views <code>PERIOD</code> and <code>KEY_PERIOD_USAGE</code> are added to information_schema.
<ul start="1"><li>View <code>PERIODS</code> includes the columns
<ul start="1"><li><code>TABLE_CATALOG</code>
</li><li><code>TABLE_SCHEMA</code>
</li><li><code>TABLE_NAME</code>
</li><li><code>PERIOD_NAME</code>
</li><li><code>START_COLUMN_NAME</code>
</li><li><code>END_COLUMN_NAME</code><br>to list Application-time period tables, the name defined for a period and the columns used for start and end timestamps.
</li></ul>
</li><li>View <code>KEY_PERIOD_USAGE</code> includes the columns
<ul start="1"><li><code>CONSTRAINT_CATALOG</code>
</li><li><code>CONSTRAINT_SCHEMA</code>
</li><li><code>CONSTRAINT_NAME</code>
</li><li><code>TABLE_CATALOG</code>
</li><li><code>TABLE_SCHEMA</code>
</li><li><code>TABLE_NAME</code>
</li><li><code>PERIOD_NAME</code>
</li></ul>
</li></ul>
</li></ul>
</li></ul>
<ul start="1"><li>Two new columns are added to the <code>COLUMNS</code> view of <code>information_schema</code>
<ul start="1"><li><code>IS_SYSTEM_TIME_PERIOD_START</code>
</li><li><code>IS_SYSTEM_TIME_PERIOD_END</code>
</li></ul>
</li></ul>
<h2 class="anchored_heading" id="sql-level-enhancements">SQL Level Enhancements</h2>
<ul start="1"><li>General Support of Packages for Stored Routines has been added
<ul start="1"><li>Before MariaDB Enterprise Server 11.4, the CREATE PACKAGE feature, as well as CREATE PACKAGE BODY, were only supported with sql_mode = ORACLE. They can now be used with any SQL mode.
</li><li>Example:
</li></ul>
</li></ul>
<pre class="fixed indent2"><span class="k">DELIMITER</span> <span class="err">$$</span>

<span class="k">CREATE</span> <span class="k">OR</span> <span class="k">REPLACE</span> <span class="n">PACKAGE</span> <span class="n">myPkg</span>
  <span class="k">PROCEDURE</span> <span class="n">p1</span><span class="p">();</span>
  <span class="k">FUNCTION</span> <span class="n">f1</span><span class="p">()</span> <span class="k">RETURNS</span> <span class="nb">INT</span><span class="p">;</span>
<span class="k">END</span><span class="p">;</span>

<span class="err">$$</span>

<span class="k">CREATE</span> <span class="k">OR</span> <span class="k">REPLACE</span> <span class="n">PACKAGE</span> <span class="n">BODY</span> <span class="n">myPkg</span>

  <span class="c1">-- variable declarations</span>
  <span class="k">DECLARE</span> <span class="n">v1</span> <span class="nb">INT</span> <span class="k">DEFAULT</span> <span class="mi">1</span><span class="p">;</span>
  <span class="k">DECLARE</span> <span class="n">v2</span> <span class="nb">INT</span> <span class="k">DEFAULT</span> <span class="mi">10</span><span class="p">;</span>

  <span class="c1">-- routine declarations</span>
  <span class="k">PROCEDURE</span> <span class="n">p1</span><span class="p">()</span>
  <span class="k">BEGIN</span>
    <span class="k">SELECT</span> <span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">;</span>
  <span class="k">END</span><span class="p">;</span>

  <span class="k">FUNCTION</span> <span class="n">f1</span><span class="p">()</span> <span class="k">RETURNS</span> <span class="nb">INT</span>
  <span class="k">BEGIN</span>
    <span class="k">RETURN</span> <span class="n">v1</span><span class="p">;</span>
  <span class="k">END</span><span class="p">;</span>

  <span class="c1">-- package initialization</span>
  <span class="k">SET</span> <span class="n">v1</span><span class="o">=</span><span class="n">v1</span> <span class="o">+</span> <span class="mi">2</span><span class="p">;</span>
<span class="k">END</span><span class="p">;</span>
<span class="err">$$</span>

<span class="k">DELIMITER</span> <span class="p">;</span>

<span class="k">SELECT</span> <span class="n">myPkg</span><span class="p">.</span><span class="n">f1</span><span class="p">();</span>
</pre><pre class="fixed indent2"><span class="o">+</span><span class="c1">------------+</span>
<span class="o">|</span> <span class="n">myPkg</span><span class="p">.</span><span class="n">f1</span><span class="p">()</span> <span class="o">|</span>
<span class="o">+</span><span class="c1">------------+</span>
<span class="o">|</span>          <span class="mi">3</span> <span class="o">|</span>
<span class="o">+</span><span class="c1">------------+</span>
</pre><pre class="fixed indent2"><span class="k">CALL</span> <span class="n">myPkg</span><span class="p">.</span><span class="n">p1</span><span class="p">();</span>
</pre><pre class="fixed indent2"><span class="o">+</span><span class="c1">------+------+</span>
<span class="o">|</span> <span class="n">v1</span>   <span class="o">|</span> <span class="n">v2</span>   <span class="o">|</span>
<span class="o">+</span><span class="c1">------+------+</span>
<span class="o">|</span>    <span class="mi">3</span> <span class="o">|</span>   <span class="mi">10</span> <span class="o">|</span>
<span class="o">+</span><span class="c1">------+------+</span>
</pre><h4 class="anchored_heading" id="indexes"><strong>Indexes</strong></h4>
<ul start="1"><li>Descending indexes are supported: (<a href="https://jira.mariadb.org/browse/MDEV-13756">MDEV-13756</a>)
<ul start="1"><li>When used with a composite index, can be used to get a significant performance boost for queries that perform <code>ORDER BY</code> operations on columns in different orders than the defined order.
</li><li>In previous releases, MariaDB Enterprise Server already supported the <code>DESC</code> option for <code>ORDER BY</code>, but the optimizer would use the ascending index. For a composite index, the optimizer would have to use an index and perform a file sort.
</li><li>For example, using the following example table: <pre class="fixed indent2"><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">sections</span> <span class="p">(</span>
   <span class="n">top_level</span> <span class="nb">int</span><span class="p">,</span>
   <span class="n">sub_level</span> <span class="nb">int</span><span class="p">,</span>
   <span class="k">index</span> <span class="n">top_asc_sub_asc</span> <span class="p">(</span><span class="n">top_level</span> <span class="k">ASC</span><span class="p">,</span> <span class="n">sub_level</span> <span class="k">ASC</span><span class="p">),</span>
   <span class="k">index</span> <span class="n">top_asc_sub_desc</span> <span class="p">(</span><span class="n">top_level</span> <span class="k">ASC</span><span class="p">,</span> <span class="n">sub_level</span> <span class="k">DESC</span><span class="p">),</span>
   <span class="k">index</span> <span class="n">top_desc_sub_asc</span> <span class="p">(</span><span class="n">top_level</span> <span class="k">DESC</span><span class="p">,</span> <span class="n">sub_level</span> <span class="k">ASC</span><span class="p">),</span>
   <span class="k">index</span> <span class="n">top_desc_sub_desc</span> <span class="p">(</span><span class="n">top_level</span> <span class="k">DESC</span><span class="p">,</span> <span class="n">sub_level</span> <span class="k">DESC</span><span class="p">)</span>
<span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">sections</span> <span class="k">VALUES</span>
   <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>
   <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span>
</pre>
</li></ul>
</li></ul>
<ul start="1"><li>Performing an <code>ORDER BY .. ASC</code> on multiple columns still shows <code>"Using index"</code> in the <code>EXPLAIN</code> output: <pre class="fixed indent2"><span class="k">EXPLAIN</span> <span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">sections</span>
   <span class="k">ORDER</span> <span class="k">BY</span> <span class="n">top_level</span> <span class="k">ASC</span><span class="p">,</span> <span class="n">sub_level</span> <span class="k">ASC</span><span class="p">;</span>
</pre>
</li></ul>
<pre class="fixed indent2"><span class="o">+</span><span class="c1">------+-------------+----------+-------+---------------+-----------------+---------+------+------+-------------+</span>
<span class="o">|</span> <span class="n">id</span>   <span class="o">|</span> <span class="n">select_type</span> <span class="o">|</span> <span class="k">table</span>    <span class="o">|</span> <span class="k">type</span>  <span class="o">|</span> <span class="n">possible_keys</span> <span class="o">|</span> <span class="k">key</span>             <span class="o">|</span> <span class="n">key_len</span> <span class="o">|</span> <span class="k">ref</span>  <span class="o">|</span> <span class="k">rows</span> <span class="o">|</span> <span class="n">Extra</span>       <span class="o">|</span>
<span class="o">+</span><span class="c1">------+-------------+----------+-------+---------------+-----------------+---------+------+------+-------------+</span>
<span class="o">|</span>    <span class="mi">1</span> <span class="o">|</span> <span class="k">SIMPLE</span>      <span class="o">|</span> <span class="n">sections</span> <span class="o">|</span> <span class="k">index</span> <span class="o">|</span> <span class="k">NULL</span>          <span class="o">|</span> <span class="n">top_asc_sub_asc</span> <span class="o">|</span> <span class="mi">10</span>      <span class="o">|</span> <span class="k">NULL</span> <span class="o">|</span> <span class="mi">7</span>    <span class="o">|</span> <span class="k">Using</span> <span class="k">index</span> <span class="o">|</span>
<span class="o">+</span><span class="c1">------+-------------+----------+-------+---------------+-----------------+---------+------+------+-------------+</span>
</pre><div style="margin-left:2em"><div style="margin-left:2em"><p>○ With this change, performing a mix of <code>ORDER BY .. ASC, .. DESC</code> on multiple columns also shows <code>"Using index"</code> in the <code>EXPLAIN</code> output:</p>
</div>
</div>
<pre class="fixed indent2"><span class="k">EXPLAIN</span> <span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">sections</span>
   <span class="k">ORDER</span> <span class="k">BY</span> <span class="n">top_level</span> <span class="k">ASC</span><span class="p">,</span> <span class="n">sub_level</span> <span class="k">DESC</span><span class="p">;</span>
</pre><pre class="fixed indent2"><span class="o">+</span><span class="c1">------+-------------+----------+-------+---------------+------------------+---------+------+------+-------------+</span>
<span class="o">|</span> <span class="n">id</span>   <span class="o">|</span> <span class="n">select_type</span> <span class="o">|</span> <span class="k">table</span>    <span class="o">|</span> <span class="k">type</span>  <span class="o">|</span> <span class="n">possible_keys</span> <span class="o">|</span> <span class="k">key</span>              <span class="o">|</span> <span class="n">key_len</span> <span class="o">|</span> <span class="k">ref</span>  <span class="o">|</span> <span class="k">rows</span> <span class="o">|</span> <span class="n">Extra</span>       <span class="o">|</span>
<span class="o">+</span><span class="c1">------+-------------+----------+-------+---------------+------------------+---------+------+------+-------------+</span>
<span class="o">|</span>    <span class="mi">1</span> <span class="o">|</span> <span class="k">SIMPLE</span>      <span class="o">|</span> <span class="n">sections</span> <span class="o">|</span> <span class="k">index</span> <span class="o">|</span> <span class="k">NULL</span>          <span class="o">|</span> <span class="n">top_asc_sub_desc</span> <span class="o">|</span> <span class="mi">10</span>      <span class="o">|</span> <span class="k">NULL</span> <span class="o">|</span> <span class="mi">7</span>    <span class="o">|</span> <span class="k">Using</span> <span class="k">index</span> <span class="o">|</span>
<span class="o">+</span><span class="c1">------+-------------+----------+-------+---------------+------------------+---------+------+------+-------------+</span>
</pre><h4 class="anchored_heading" id="json"><strong>JSON</strong></h4>
<ul start="1"><li><code>JSON_KEY_VALUE()</code> extracts key/value pairs from a JSON object. (<a href="https://jira.mariadb.org/browse/MDEV-30145">MDEV-30145</a>)
</li></ul>
<p><strong> Syntax: JSON_KEY_VALUE(<code>&lt;json_doc&gt;, &lt;json_path&gt;</code>)</strong></p>
<p><strong> The <code>&lt;json_path&gt;</code> specifies the JSON objects whose key/value pairs should be returned. For example: <pre class="fixed indent2"><span class="k">SELECT</span> <span class="n">JSON_KEY_VALUE</span><span class="p">(</span><span class="s1">&#39;[[1, {&quot;key1&quot;:&quot;val1&quot;, &quot;key2&quot;:&quot;val2&quot;}, 3], 2, 3]&#39;</span><span class="p">,</span> <span class="s1">&#39;$[0][1]&#39;</span><span class="p">);</span>
</pre></strong></p>
<pre class="fixed indent2"><span class="o">+</span><span class="c1">-----------------------------------------------------------------------------+</span>
<span class="o">|</span> <span class="n">JSON_KEY_VALUE</span><span class="p">(</span><span class="s1">&#39;[[1, {&quot;key1&quot;:&quot;val1&quot;, &quot;key2&quot;:&quot;val2&quot;}, 3], 2, 3]&#39;</span><span class="p">,</span> <span class="s1">&#39;$[0][1]&#39;</span><span class="p">)</span> <span class="o">|</span>
<span class="o">+</span><span class="c1">-----------------------------------------------------------------------------+</span>
<span class="o">|</span> <span class="p">[</span><span class="err">{</span><span class="ss">&quot;key&quot;</span><span class="p">:</span> <span class="ss">&quot;key1&quot;</span><span class="p">,</span> <span class="ss">&quot;value&quot;</span><span class="p">:</span> <span class="ss">&quot;val1&quot;</span><span class="err">}</span><span class="p">,</span> <span class="err">{</span><span class="ss">&quot;key&quot;</span><span class="p">:</span> <span class="ss">&quot;key2&quot;</span><span class="p">,</span> <span class="ss">&quot;value&quot;</span><span class="p">:</span> <span class="ss">&quot;val2&quot;</span><span class="err">}</span><span class="p">]</span>        <span class="o">|</span>
<span class="o">+</span><span class="c1">-----------------------------------------------------------------------------+</span>
</pre><div style="margin-left:2em"><div style="margin-left:2em"><div style="margin-left:2em"><p>• JSON_KEY_VALUE() can be used as an argument to JSON_TABLE(), adding the key to a result set. For example:</p>
</div>
</div>
</div>
<pre class="fixed indent4"><span class="k">SELECT</span> <span class="n">jt</span><span class="p">.</span><span class="o">*</span> <span class="k">FROM</span> <span class="n">JSON_TABLE</span><span class="p">(</span>
  <span class="n">JSON_KEY_VALUE</span><span class="p">(</span><span class="s1">&#39;[[1, {&quot;key1&quot;:&quot;val1&quot;, &quot;key2&quot;:&quot;val2&quot;}, 3], 2, 3]&#39;</span><span class="p">,</span> <span class="s1">&#39;$[0][1]&#39;</span><span class="p">),</span><span class="s1">&#39;$[*]&#39;</span>
      <span class="n">COLUMNS</span> <span class="p">(</span>
         <span class="n">k</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="n">PATH</span> <span class="s1">&#39;$.key&#39;</span><span class="p">,</span>
         <span class="n">v</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="n">PATH</span> <span class="s1">&#39;$.value&#39;</span><span class="p">,</span>
        <span class="n">id</span> <span class="k">FOR</span> <span class="k">ORDINALITY</span> <span class="p">))</span> <span class="k">AS</span> <span class="n">jt</span><span class="p">;</span>
</pre><pre class="fixed indent4"><span class="o">+</span><span class="c1">------+------+------+</span>
<span class="o">|</span> <span class="n">k</span>    <span class="o">|</span> <span class="n">v</span>    <span class="o">|</span> <span class="n">id</span>   <span class="o">|</span>
<span class="o">+</span><span class="c1">------+------+------+</span>
<span class="o">|</span> <span class="n">key1</span> <span class="o">|</span> <span class="n">val1</span> <span class="o">|</span>    <span class="mi">1</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">key2</span> <span class="o">|</span> <span class="n">val2</span> <span class="o">|</span>    <span class="mi">2</span> <span class="o">|</span>
<span class="o">+</span><span class="c1">------+------+------+</span>

<span class="o">*</span> <span class="o">##</span><span class="n">JSON_ARRAY_INTERSECT</span><span class="p">()</span><span class="o">##</span> <span class="n">finds</span> <span class="n">the</span> <span class="n">intersection</span> <span class="k">between</span> <span class="n">two</span> <span class="n">JSON</span> <span class="n">arrays</span><span class="p">.</span> <span class="p">(</span><span class="n">MDEV</span><span class="o">-</span><span class="mi">26182</span><span class="p">)</span>
<span class="o">**</span> <span class="n">Syntax</span><span class="p">:</span> <span class="o">##</span><span class="n">JSON_ARRAY_INTERSECT</span><span class="p">(</span><span class="o">&lt;</span><span class="n">array1</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">array2</span><span class="o">&gt;</span><span class="p">)</span><span class="o">##</span>
<span class="o">**</span> <span class="k">For</span> <span class="n">example</span><span class="p">:</span><span class="o">&lt;&lt;</span><span class="k">sql</span> <span class="n">inline</span><span class="o">=</span><span class="k">false</span><span class="o">&gt;&gt;</span><span class="k">SET</span> <span class="o">@</span><span class="n">array1</span><span class="o">=</span> <span class="s1">&#39;[1,2,3]&#39;</span><span class="p">;</span>
<span class="k">SET</span> <span class="o">@</span><span class="n">array2</span><span class="o">=</span> <span class="s1">&#39;[1,2,4]&#39;</span><span class="p">;</span>
<span class="k">SELECT</span> <span class="n">json_array_intersect</span><span class="p">(</span><span class="o">@</span><span class="n">array1</span><span class="p">,</span> <span class="o">@</span><span class="n">array2</span><span class="p">)</span> <span class="k">as</span> <span class="k">result</span><span class="p">;</span>
</pre><pre class="fixed indent2"><span class="o">+</span><span class="c1">--------+</span>
<span class="o">|</span> <span class="k">result</span> <span class="o">|</span>
<span class="o">+</span><span class="c1">--------+</span>
<span class="o">|</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">|</span>
<span class="o">+</span><span class="c1">--------+</span>
</pre><pre class="fixed indent2"><span class="k">SET</span> <span class="o">@</span><span class="n">json1</span><span class="o">=</span> <span class="s1">&#39;[[1,2,3],[4,5,6],[1,1,1]]&#39;</span><span class="p">;</span>
<span class="k">SET</span> <span class="o">@</span><span class="n">json2</span><span class="o">=</span> <span class="s1">&#39;[[1,2,3],[4,5,6],[1,3,2]]&#39;</span><span class="p">;</span>
<span class="k">SELECT</span> <span class="n">json_array_intersect</span><span class="p">(</span><span class="o">@</span><span class="n">json1</span><span class="p">,</span> <span class="o">@</span><span class="n">json2</span><span class="p">)</span> <span class="k">as</span> <span class="k">result</span><span class="p">;</span>
</pre><pre class="fixed indent2"><span class="o">+</span><span class="c1">------------------------+</span>
<span class="o">|</span> <span class="k">result</span>                 <span class="o">|</span>
<span class="o">+</span><span class="c1">------------------------+</span>
<span class="o">|</span> <span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]]</span> <span class="o">|</span>
<span class="o">+</span><span class="c1">------------------------+</span>
</pre><ul start="1"><li><code>JSON_OBJECT_TO_ARRAY()</code> converts all JSON objects found in a JSON document to JSON arrays. (<a href="https://jira.mariadb.org/browse/MDEV-26182">MDEV-26182</a>)
<ul start="1"><li>Syntax: <code>JSON_OBJECT_TO_ARRAY(&lt;json_doc&gt;)</code>
</li><li>For example: <pre class="fixed"><span class="k">SET</span> <span class="o">@</span><span class="n">json1</span><span class="o">=</span> <span class="s1">&#39;{ &quot;a&quot; : [1,2,3] , &quot;b&quot;: {&quot;key1&quot;: &quot;val1&quot;, &quot;key2&quot;: {&quot;key3&quot;: &quot;val3&quot;}} }&#39;</span><span class="p">;</span>
<span class="k">SELECT</span> <span class="n">JSON_OBJECT_TO_ARRAY</span><span class="p">(</span><span class="o">@</span><span class="n">json1</span><span class="p">)</span> <span class="k">as</span> <span class="k">result</span><span class="p">;</span>
</pre>
</li></ul>
</li></ul>
<pre class="fixed indent2"><span class="o">+</span><span class="c1">-----------------------------------------------------------------------+</span>
<span class="o">|</span> <span class="k">result</span>                                                                <span class="o">|</span>
<span class="o">+</span><span class="c1">-----------------------------------------------------------------------+</span>
<span class="o">|</span> <span class="p">[[</span><span class="ss">&quot;a&quot;</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]],</span> <span class="p">[</span><span class="ss">&quot;b&quot;</span><span class="p">,</span> <span class="err">{</span><span class="ss">&quot;key1&quot;</span><span class="p">:</span> <span class="ss">&quot;val1&quot;</span><span class="p">,</span> <span class="ss">&quot;key2&quot;</span><span class="p">:</span> <span class="err">{</span><span class="ss">&quot;key3&quot;</span><span class="p">:</span> <span class="ss">&quot;val3&quot;</span><span class="err">}}</span><span class="p">]]</span> <span class="o">|</span>
<span class="o">+</span><span class="c1">-----------------------------------------------------------------------+</span>
</pre><div style="margin-left:2em"><div style="margin-left:2em"><p>○ Resulting arrays can be compared using JSON_ARRAY_INTERSECT(). For example:</p>
</div>
</div>
<pre class="fixed indent2"><span class="k">SET</span> <span class="o">@</span><span class="n">json1</span><span class="o">=</span><span class="s1">&#39;{&quot;a&quot;:[1,2,3],&quot;b&quot;:{&quot;key1&quot;:&quot;val1&quot;,&quot;key2&quot;:{&quot;key3&quot;:&quot;val3&quot;}}}&#39;</span><span class="p">;</span>
<span class="k">SET</span> <span class="o">@</span><span class="n">json2</span><span class="o">=</span><span class="s1">&#39;{&quot;a&quot;:[1,2,3]}&#39;</span><span class="p">;</span>
<span class="k">SELECT</span> <span class="n">JSON_OBJECT_TO_ARRAY</span><span class="p">(</span><span class="o">@</span><span class="n">json1</span><span class="p">)</span> <span class="k">into</span> <span class="o">@</span><span class="n">array1</span><span class="p">;</span>
<span class="k">SELECT</span> <span class="n">JSON_OBJECT_TO_ARRAY</span><span class="p">(</span><span class="o">@</span><span class="n">json2</span><span class="p">)</span> <span class="k">into</span> <span class="o">@</span><span class="n">array2</span><span class="p">;</span>
<span class="k">SELECT</span> <span class="n">JSON_ARRAY_INTERSECT</span><span class="p">(</span><span class="o">@</span><span class="n">array1</span><span class="p">,</span><span class="o">@</span><span class="n">array2</span><span class="p">)</span> <span class="k">as</span> <span class="k">result</span><span class="p">;</span>
</pre><pre class="fixed indent2"><span class="o">+</span><span class="c1">--------------------+</span>
<span class="o">|</span> <span class="k">result</span>             <span class="o">|</span>
<span class="o">+</span><span class="c1">--------------------+</span>
<span class="o">|</span> <span class="p">[[</span><span class="ss">&quot;a&quot;</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]]]</span> <span class="o">|</span>
<span class="o">+</span><span class="c1">--------------------+</span>
</pre><ul start="1"><li>JSON_OBJECT_FILTER_KEYS() returns key/value pairs from a JSON string for keys in an array. (<a href="https://jira.mariadb.org/browse/MDEV-26182">MDEV-26182</a>)<br>
</li></ul>
<div style="margin-left:2em"><div style="margin-left:2em"><p>○ Syntax: JSON_OBJECT_FILTER_KEYS(&lt;json_doc&gt;,&lt;array_keys&gt;)<br>
○ For example:</p>
</div>
</div>
<pre class="fixed indent2"><span class="k">SET</span> <span class="o">@</span><span class="n">json1</span><span class="o">=</span> <span class="s1">&#39;{ &quot;a&quot;: 1, &quot;b&quot;: 2, &quot;c&quot;: 3}&#39;</span><span class="p">;</span>
<span class="k">SELECT</span> <span class="n">JSON_OBJECT_FILTER_KEYS</span> <span class="p">(</span><span class="o">@</span><span class="n">json1</span><span class="p">,</span> <span class="s1">&#39; [&quot;b&quot;, &quot;c&quot;] &#39;</span><span class="p">)</span> <span class="k">as</span> <span class="k">result</span><span class="p">;</span>
</pre><pre class="fixed indent2"><span class="o">+</span><span class="c1">------------------+</span>
<span class="o">|</span> <span class="k">result</span>           <span class="o">|</span>
<span class="o">+</span><span class="c1">------------------+</span>
<span class="o">|</span> <span class="err">{</span><span class="ss">&quot;b&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="ss">&quot;c&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="err">}</span> <span class="o">|</span>
<span class="o">+</span><span class="c1">------------------+</span>
</pre><div style="margin-left:2em"><div style="margin-left:2em"><p>○ Using <code>JSON_ARRAY_INTERSECT()</code> and <code>JSON_KEY()</code> as arguments for <code>JSON_OBJECT_FILTER_KEYS()</code>, a comparison of two JSON strings is possible where only the same keys are compared, not the key/value pairs. For example:</p>
</div>
</div>
<pre class="fixed indent2"><span class="k">SET</span> <span class="o">@</span><span class="n">json1</span><span class="o">=</span> <span class="s1">&#39;{ &quot;a&quot;: 1, &quot;b&quot;: 2, &quot;c&quot;: 3}&#39;</span><span class="p">;</span>
<span class="k">SET</span> <span class="o">@</span><span class="n">json2</span><span class="o">=</span> <span class="s1">&#39;{&quot;b&quot; : 10, &quot;c&quot;: 20, &quot;d&quot;: 30}&#39;</span><span class="p">;</span>
<span class="k">SELECT</span> <span class="n">JSON_OBJECT_FILTER_KEYS</span> <span class="p">(</span><span class="o">@</span><span class="n">json1</span><span class="p">,</span> <span class="n">json_array_intersect</span><span class="p">(</span><span class="n">json_keys</span><span class="p">(</span><span class="o">@</span><span class="n">json1</span><span class="p">),</span> <span class="n">json_keys</span><span class="p">(</span><span class="o">@</span><span class="n">json2</span><span class="p">)))</span> <span class="k">as</span> <span class="k">result</span><span class="p">;</span>
</pre><pre class="fixed indent2"><span class="o">+</span><span class="c1">------------------+</span>
<span class="o">|</span> <span class="k">result</span>           <span class="o">|</span>
<span class="o">+</span><span class="c1">------------------+</span>
<span class="o">|</span> <span class="err">{</span><span class="ss">&quot;b&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="ss">&quot;c&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="err">}</span> <span class="o">|</span>
<span class="o">+</span><span class="c1">------------------+</span>
</pre><ul start="1"><li><a href="/kb/en/json_equals/"><code>JSON_EQUALS()</code></a> can be used to compare two documents and determine if they are equal. (<a href="https://jira.mariadb.org/browse/MDEV-16375">MDEV-16375</a>)
<ul start="1"><li>The <code>JSON_EQUALS()</code> function was previously backported to MariaDB Enterprise Server 10.4.25-16, 10.5.16-11, and 10.6.8-4.
</li></ul>
</li></ul>
<ul start="1"><li>#<a href="/kb/en/json_normalize/">#JSON_NORMALIZE()##</a> can be used to normalize two JSON documents to make them more comparable. (<a href="https://jira.mariadb.org/browse/MDEV-23143">MDEV-23143</a>)
<ul start="1"><li>For example, this function can be used when defining a unique key on JSON data.
</li><li>The <code>JSON_NORMALIZE()</code> function was previously backported to MariaDB Enterprise Server 10.4.25-16, 10.5.16-11, and 10.6.8-4.
</li></ul>
</li></ul>
<ul start="1"><li><a href="/kb/en/json_overlaps/"><code>JSON_OVERLAPS()</code></a> can be used to compare two JSON documents to determine if they have any key-value pairs or array elements in common. (<a href="https://jira.mariadb.org/browse/MDEV-27677">MDEV-27677</a>) <pre class="fixed"><span class="k">SELECT</span> <span class="n">JSON_OVERLAPS</span><span class="p">(</span><span class="s1">&#39;{&quot;A&quot;: 1, &quot;B&quot;: {&quot;C&quot;:2}}&#39;</span><span class="p">,</span> <span class="s1">&#39;{&quot;A&quot;: 2, &quot;B&quot;: {&quot;C&quot;:2}}&#39;</span><span class="p">)</span> <span class="k">AS</span> <span class="n">is_overlap</span><span class="p">;</span>
</pre>
</li></ul>
<pre class="fixed indent2"><span class="o">+</span><span class="c1">---------------------+</span>
<span class="o">|</span> <span class="n">is_overlap</span>          <span class="o">|</span>
<span class="o">+</span><span class="c1">---------------------+</span>
<span class="o">|</span> <span class="mi">1</span>                   <span class="o">|</span>
<span class="o">+</span><span class="c1">---------------------+</span>
</pre><ul start="1"><li><a href="/kb/en/json_schema_valid/">JSON_SCHEMA_VALID()</a> can be used to validate a JSON document against a JSON schema, as documented by the <a href="https://json-schema.org/draft/2020-12/release-notes.html">JSON Schema Draft 2020</a>. (<a href="https://jira.mariadb.org/browse/MDEV-27128">MDEV-27128</a>)
<ul start="1"><li>This function can also be used in a <code>CHECK</code> constraint to verify that JSON documents are only stored in the database if they include required items and that the values are within a given range and length.
</li></ul>
</li></ul>
<ul start="1"><li>Negative indexes can be used to access values in JSON arrays relative to the end of the array when a JSON Path expression is used as a parameter to a JSON function. (<a href="https://jira.mariadb.org/browse/MDEV-22224">MDEV-22224</a>) <pre class="fixed"><span class="k">SELECT</span> <span class="n">JSON_REMOVE</span><span class="p">(</span><span class="o">@</span><span class="n">json</span><span class="p">,</span> <span class="s1">&#39;$.A[-10]&#39;</span><span class="p">)</span>
</pre>
</li></ul>
<ul start="1"><li>The <code>last</code> index can be used to access the last value in a JSON array when a JSON Path expression is used as a parameter to a JSON function. (<a href="https://jira.mariadb.org/browse/MDEV-22224">MDEV-22224</a>)<pre class="fixed"><span class="k">SELECT</span> <span class="n">JSON_REMOVE</span><span class="p">(</span><span class="o">@</span><span class="n">json</span><span class="p">,</span> <span class="s1">&#39;$.A[last]&#39;</span><span class="p">);</span>
</pre>
</li></ul>
<ul start="1"><li>A range of indexes can be used to access the values in that range in a JSON array when a JSON Path expression is used as a parameter to a JSON function. (<a href="https://jira.mariadb.org/browse/MDEV-27911">MDEV-27911</a>)<pre class="fixed"><span class="k">SELECT</span> <span class="n">JSON_REMOVE</span><span class="p">(</span><span class="o">@</span><span class="n">json</span><span class="p">,</span> <span class="s1">&#39;$.A[1 to 3]&#39;</span><span class="p">);</span>
</pre>
</li></ul>
<h4 class="anchored_heading" id="data-types"><strong>Data Types</strong></h4>
<p>The <code>TIMESTAMP</code> range of values was extended from '``2038-01-19 03:14:07 UTC``', to '``2106-02-07 06:28:15 UTC``'.
The storage format is not changed, and new tables can be read by old MariaDB servers as long as timestamp values are within the old timestamp range.</p>
<p>INET4 values can now be compared with INET6 values and can be inserted into INET6 columns; the server does automatically convert INET4 value into INET6 as needed.</p>
<p>UUID data type is added to store UUIDs more efficiently. (<a href="https://jira.mariadb.org/browse/MDEV-4958">MDEV-4958</a>)
The UUID data type was previously backported to MariaDB Enterprise Server 10.6.9-5.</p>
<p>INET4 data type is added to store IPv4 addresses as BINARY(4), where each byte stores one octet. (<a href="https://jira.mariadb.org/browse/MDEV-23287">MDEV-23287</a>)
The data type provides the following functionality:
Validation of incorrect values
Comparisons
Sorting
Functions like <code>CAST()</code></p>
<h4 class="anchored_heading" id="functions"><strong>Functions</strong></h4>
<ul start="1"><li>New time zone options for function DATE_FORMAT()
<ul start="1"><li>The new options %Z and %z can be used for the format string of the function <pre class="fixed"><span class="n">DATE_FORMAT</span><span class="p">(</span><span class="nb">date</span><span class="p">,</span> <span class="n">format</span><span class="p">)</span>
</pre>
for adding time zone information to the date string.
</li><li>%Z Time zone abbreviation
</li><li>%z Numeric time zone +hhmm or -hhmm presenting the hour and minute offset from UTC
</li><li>Example:<pre class="fixed"><span class="k">SELECT</span> <span class="n">DATE_FORMAT</span><span class="p">(</span><span class="n">NOW</span><span class="p">(),</span> <span class="s1">&#39;%W %d %M %Y %H:%i:%s %Z %z&#39;</span><span class="p">);</span>
</pre>
</li></ul>
</li></ul>
<pre class="fixed indent2"><span class="o">+</span><span class="c1">--------------------------------------------------+</span>
<span class="o">|</span> <span class="n">DATE_FORMAT</span><span class="p">(</span><span class="n">NOW</span><span class="p">(),</span> <span class="s1">&#39;%W %d %M %Y %H:%i:%s %Z %z&#39;</span><span class="p">)</span> <span class="o">|</span>
<span class="o">+</span><span class="c1">--------------------------------------------------+</span>
<span class="o">|</span> <span class="n">Tuesday</span> <span class="mi">21</span> <span class="n">November</span> <span class="mi">2023</span> <span class="mi">13</span><span class="p">:</span><span class="mi">28</span><span class="p">:</span><span class="mi">34</span> <span class="n">EST</span> <span class="o">-</span><span class="mi">0500</span>      <span class="o">|</span>
<span class="o">+</span><span class="c1">--------------------------------------------------+</span>
</pre><ul start="1"><li>SQL function KDF() for key derivation
<ul start="1"><li>A possible use case is to generate encryption keys from a user provided password or a passphrase. It can be used to generate encryption keys for encryption functions such as AES_ENCRYPT.<pre class="fixed"><span class="n">KDF</span><span class="p">(</span><span class="n">key_str</span><span class="p">,</span> <span class="n">salt</span> <span class="p">[,</span> <span class="err">{</span><span class="n">info</span> <span class="o">|</span> <span class="n">iterations</span><span class="err">}</span> <span class="p">[,</span> <span class="n">kdf_name</span> <span class="p">[,</span> <span class="n">width</span> <span class="p">]]])</span>
</pre>
<ul start="1"><li><code>kdf_name</code> is "hkdf" or "pbkdf2_hmac"
</li><li><code>width</code> (in bits) can be any number divisible by 8
</li><li><code>info</code> is a non-secret parameter of the hkdf method, it allows to generate different encryption keys for different purposes from the same secret password
</li><li><code>iterations</code> is a positive numeric parameter of the pbkdf2_hmac method. Larger values make the password more difficult to brute-force.
</li></ul>
</li><li>Example: <pre class="fixed"><span class="k">select</span> <span class="n">hex</span><span class="p">(</span><span class="n">kdf</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="s1">&#39;info&#39;</span><span class="p">,</span> <span class="s1">&#39;hkdf&#39;</span><span class="p">));</span>
</pre>
</li></ul>
</li></ul>
<pre class="fixed indent2"><span class="o">+</span><span class="c1">----------------------------------------+</span>
<span class="o">|</span> <span class="n">hex</span><span class="p">(</span><span class="n">kdf</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="s1">&#39;info&#39;</span><span class="p">,</span> <span class="s1">&#39;hkdf&#39;</span><span class="p">))</span> <span class="o">|</span>
<span class="o">+</span><span class="c1">----------------------------------------+</span>
<span class="o">|</span> <span class="mi">710583081</span><span class="n">D40A55F0B573A76E02D8975</span>       <span class="o">|</span>
<span class="o">+</span><span class="c1">----------------------------------------+</span>
</pre><pre class="fixed indent2"><span class="k">insert</span> <span class="k">into</span> <span class="n">tbl</span> <span class="k">values</span> <span class="p">(</span><span class="n">aes_encrypt</span><span class="p">(</span><span class="o">@</span><span class="n">secret_data</span><span class="p">,</span> <span class="n">kdf</span><span class="p">(</span><span class="ss">&quot;Passw0rd&quot;</span><span class="p">,</span> <span class="ss">&quot;NaCl&quot;</span><span class="p">,</span> <span class="ss">&quot;info&quot;</span><span class="p">,</span> <span class="s1">&#39;hkdf&#39;</span><span class="p">),</span> <span class="ss">&quot;iv&quot;</span><span class="p">));</span>
</pre><ul start="1"><li>Function <code>CONV()</code> now supports conversions up to base 62
<ul start="1"><li>The function <code>CONV()</code>, which converts a number between numeric base systems, now supports conversions up to base 62.
</li><li>This allows conversions to encodings to capital letters A-Z, lower case letters a-z, and numbers 0-9.
</li><li>The old limit was 36, not including lower case letters.
</li><li>Example:<pre class="fixed"><span class="k">SELECT</span> <span class="n">CONV</span><span class="p">(</span><span class="mi">61</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">36</span><span class="p">);</span>
</pre>
</li></ul>
</li></ul>
<pre class="fixed indent2"><span class="o">+</span><span class="c1">----------------+</span>
<span class="o">|</span> <span class="n">CONV</span><span class="p">(</span><span class="mi">61</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">36</span><span class="p">)</span> <span class="o">|</span>
<span class="o">+</span><span class="c1">----------------+</span>
<span class="o">|</span> <span class="mi">1</span><span class="n">P</span>             <span class="o">|</span>
<span class="o">+</span><span class="c1">----------------+</span>
</pre><pre class="fixed indent2"><span class="k">SELECT</span> <span class="n">CONV</span><span class="p">(</span><span class="mi">61</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">62</span><span class="p">);</span>
</pre><pre class="fixed indent2"><span class="o">+</span><span class="c1">----------------+</span>
<span class="o">|</span> <span class="n">CONV</span><span class="p">(</span><span class="mi">61</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">62</span><span class="p">)</span> <span class="o">|</span>
<span class="o">+</span><span class="c1">----------------+</span>
<span class="o">|</span> <span class="n">z</span>              <span class="o">|</span>
<span class="o">+</span><span class="c1">----------------+</span>
</pre><ul start="1"><li><a href="/kb/en/aes_encrypt/">AES_ENCRYPT()</a> and <a href="/kb/en/aes_decrypt/">AES_DECRYPT()</a> allow specifying the initialization vector (iv) and block encryption mode (mode). (<a href="https://jira.mariadb.org/browse/MDEV-9069">MDEV-9069</a>)
<ul start="1"><li><code>AES_ENCRYPT</code> syntax prior to this release: A<code>ES_ENCRYPT(&lt;str&gt;, &lt;key_str&gt;)</code>
</li><li><code>AES_ENCRYPT</code> syntax starting with this release: <code>AES_ENCRYPT(&lt;str&gt;, &lt;key&gt;, [, iv [, mode]])</code>
</li><li><code>AES_DECRYPT</code> syntax prior to this release: <code>AES_DECRYPT(&lt;str&gt;, &lt;key_str&gt;)</code>
</li><li><code>AES_DECRYPT</code> syntax starting with to this release: <code>AES_DECRYPT(&lt;str&gt;, &lt;key&gt;, [, iv [, mode]])</code>
</li><li>The <code>block_encryption_mode</code> system variable specifies which mode will be used if the mode is not specified as a function argument.
</li><li>For example, using the default mode from the <code>block_encryption_mode</code>:
</li></ul>
</li></ul>
<pre class="fixed indent2"><span class="k">SELECT</span> <span class="o">@@</span><span class="n">block_encryption_mode</span><span class="p">;</span>

<span class="p">..</span> <span class="n">code</span><span class="o">-</span><span class="n">block</span><span class="p">::</span> <span class="n">cmp</span>

   <span class="o">+</span><span class="c1">-------------------------+</span>
   <span class="o">|</span> <span class="o">@@</span><span class="n">block_encryption_mode</span> <span class="o">|</span>
   <span class="o">+</span><span class="c1">-------------------------+</span>
   <span class="o">|</span> <span class="n">aes</span><span class="o">-</span><span class="mi">128</span><span class="o">-</span><span class="n">ecb</span>             <span class="o">|</span>
   <span class="o">+</span><span class="c1">-------------------------+</span>

<span class="p">..</span> <span class="n">code</span><span class="o">-</span><span class="n">block</span><span class="p">::</span> <span class="k">sql</span>

   <span class="k">SELECT</span> <span class="n">HEX</span><span class="p">(</span><span class="n">AES_ENCRYPT</span><span class="p">(</span><span class="s1">&#39;MariaDB&#39;</span><span class="p">,</span><span class="s1">&#39;mykey&#39;</span><span class="p">,</span><span class="s1">&#39;vector&#39;</span><span class="p">))</span> <span class="k">as</span> <span class="k">result</span><span class="p">;</span>

<span class="p">..</span> <span class="n">code</span><span class="o">-</span><span class="n">block</span><span class="p">::</span> <span class="n">cmp</span>

   <span class="o">+</span><span class="c1">----------------------------------+</span>
   <span class="o">|</span> <span class="k">result</span>                           <span class="o">|</span>
   <span class="o">+</span><span class="c1">----------------------------------+</span>
   <span class="o">|</span> <span class="n">CD0352A4B2FB18A592C04FF8CDA6C2F2</span> <span class="o">|</span>
   <span class="o">+</span><span class="c1">----------------------------------+</span>

<span class="p">..</span> <span class="n">code</span><span class="o">-</span><span class="n">block</span><span class="p">::</span> <span class="k">sql</span>

   <span class="k">SELECT</span> <span class="n">AES_DECRYPT</span><span class="p">(</span><span class="n">x</span><span class="s1">&#39;CD0352A4B2FB18A592C04FF8CDA6C2F2&#39;</span><span class="p">,</span><span class="s1">&#39;mykey&#39;</span><span class="p">,</span><span class="s1">&#39;vector&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="k">result</span><span class="p">;</span>

<span class="p">..</span> <span class="n">code</span><span class="o">-</span><span class="n">block</span><span class="p">::</span> <span class="n">cmp</span>

   <span class="o">+</span><span class="c1">---------+</span>
   <span class="o">|</span> <span class="k">result</span>  <span class="o">|</span>
   <span class="o">+</span><span class="c1">---------+</span>
   <span class="o">|</span> <span class="n">MariaDB</span> <span class="o">|</span>
   <span class="o">+</span><span class="c1">---------+</span>
</pre><div style="margin-left:2em"><div style="margin-left:2em"><div style="margin-left:2em"><p>• For example, specifying the mode as an argument: <code class="unknown_macro">&lt;&lt;<span class="macro_name">sql</span><span class="macro_arg_string"> inline=false</span>&gt;&gt;</code> SELECT HEX(AES_ENCRYPT('MariaDB','mykey','thisismy256vector','aes-256-cbc')) as result;</p>
</div>
</div>
</div>
<p>&lt;&lt;/sql&gt;&gt;</p>
<pre class="fixed indent2"><span class="o">+</span><span class="c1">----------------------------------+</span>
<span class="o">|</span> <span class="k">result</span>                           <span class="o">|</span>
<span class="o">+</span><span class="c1">----------------------------------+</span>
<span class="o">|</span> <span class="n">CD6C47183B89A813557BFD639A893CE3</span> <span class="o">|</span>
<span class="o">+</span><span class="c1">----------------------------------+</span>
</pre><pre class="fixed indent2"><span class="k">SELECT</span> <span class="n">AES_DECRYPT</span><span class="p">(</span><span class="n">x</span><span class="s1">&#39;CD6C47183B89A813557BFD639A893CE3&#39;</span><span class="p">,</span><span class="s1">&#39;mykey&#39;</span><span class="p">,</span><span class="s1">&#39;thisismy256vector&#39;</span><span class="p">,</span><span class="s1">&#39;aes-256-cbc&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="k">result</span><span class="p">;</span>
</pre><pre class="fixed indent2"><span class="o">+</span><span class="c1">---------+</span>
<span class="o">|</span> <span class="k">result</span>  <span class="o">|</span>
<span class="o">+</span><span class="c1">---------+</span>
<span class="o">|</span> <span class="n">MariaDB</span> <span class="o">|</span>
<span class="o">+</span><span class="c1">---------+</span>
</pre><ul start="1"><li><a href="/kb/en/random_bytes/"><code>RANDOM_BYTES()</code></a> returns a binary string of a length between 1 and 1024 bytes. (<a href="https://jira.mariadb.org/browse/MDEV-25704">MDEV-25704</a>)
<ul start="1"><li>This nondeterministic value is generated by the cryptographically secure pseudo random generator (CSPRNG) of the SSL library, so it generates an arbitrary length string of cryptographic random bytes that are suitable for cryptographic use.
</li></ul>
</li></ul>
<ul start="1"><li><a href="/kb/en/natural_sort_key/"><code>NATURAL_SORT_KEY()</code></a> can be used to perform a natural sort of strings. (<a href="https://jira.mariadb.org/browse/MDEV-4742">MDEV-4742</a>)
<ul start="1"><li>Characters are sorted in alphabetical order, whereas numbers are sorted, such that "10" is greater than "9".
</li><li>For example, "v10" would appear after the string "v9".
</li></ul>
</li></ul>
<ul start="1"><li><a href="/kb/en/sformat/"><code>SFORMAT()</code></a> formats strings based on the specified options and values to generate a custom formatted string. (<a href="https://jira.mariadb.org/browse/MDEV-25015">MDEV-25015</a>)<pre class="fixed"><span class="k">SELECT</span> <span class="n">SFORMAT</span><span class="p">(</span><span class="ss">&quot;MariaDB version {}&quot;</span><span class="p">,</span> <span class="k">VERSION</span><span class="p">());</span>
</pre>
<ul start="1"><li>This function uses the fmtlib library for string formatting similar to Python, Rust, C++20.
</li></ul>
</li></ul>
<ul start="1"><li><code>CRC32()</code> computes a cyclic redundancy check (CRC) as a 32-bit unsigned value using the ISO 3309 polynomial. (<a href="https://jira.mariadb.org/browse/MDEV-27208">MDEV-27208</a>)
<ul start="1"><li>The CRC can now be computed in pieces, using an optional second parameter: <code>CRC32('String')</code> is equal to <code>CRC32(CRC32('Str','ing'))</code>.
</li><li><code>CRC32C()</code> can be used to compute checksums using the alternate Castagnoli polynomial.
</li></ul>
</li></ul>
<h4 class="anchored_heading" id="character-sets-and-collations"><strong>Character Sets and Collations</strong></h4>
<ul start="1"><li>The <code>character_set_collations</code> system variable allows the default collation for a character set to be changed globally or for a session. (<a href="https://jira.mariadb.org/browse/MDEV-30164">MDEV-30164</a>)
<ul start="1"><li>Starting with this release, the default collation is used whenever a character set is defined for a database object but the collation is not defined.
</li><li>Starting with this release, when the character set is not defined, the default collation is as specified by the <code>collation_server</code> system variable.<pre class="fixed indent2"><span class="k">SET</span> <span class="o">@@</span><span class="n">character_set_collations</span><span class="o">=</span><span class="s1">&#39;utf8mb4=uca1400_ai_ci&#39;</span><span class="p">;</span>
<span class="k">CREATE</span> <span class="k">DATABASE</span> <span class="n">test_with_charset</span> <span class="nb">CHARACTER</span> <span class="k">SET</span> <span class="n">utf8mb4</span><span class="p">;</span>
<span class="k">CREATE</span> <span class="k">DATABASE</span> <span class="n">test</span><span class="p">;</span>
<span class="k">SELECT</span> <span class="k">SCHEMA_NAME</span><span class="p">,</span><span class="n">DEFAULT_COLLATION_NAME</span> <span class="k">FROM</span> <span class="n">SCHEMATA</span> <span class="k">WHERE</span> <span class="k">SCHEMA_NAME</span> <span class="k">LIKE</span> <span class="ss">&quot;test%&quot;</span><span class="p">;</span>
</pre>
</li></ul>
</li></ul>
<pre class="fixed indent2"><span class="o">+</span><span class="c1">-------------------+------------------------+</span>
<span class="o">|</span> <span class="k">SCHEMA_NAME</span>       <span class="o">|</span> <span class="n">DEFAULT_COLLATION_NAME</span> <span class="o">|</span>
<span class="o">+</span><span class="c1">-------------------+------------------------+</span>
<span class="o">|</span> <span class="n">test_with_charset</span> <span class="o">|</span> <span class="n">utf8mb4_uca1400_ai_ci</span>  <span class="o">|</span>
<span class="o">|</span> <span class="n">test</span>              <span class="o">|</span> <span class="n">utf8mb4_general_ci</span>     <span class="o">|</span>
<span class="o">+</span><span class="c1">-------------------+------------------------+</span>
</pre><ul start="1"><li>Collations based on the Unicode Collation Algorithm (UCA) 14.0.0 have been added for the character sets <a href="/kb/en/character-sets/"><code>utf8mb3, utf8mb4, ucs2, utf16, and utf32</code></a>: (<a href="https://jira.mariadb.org/browse/MDEV-27009">MDEV-27009</a>)
<ul start="1"><li>One neutral and 22 language specific collations have been added.
</li><li>Accent sensitive, accent insensitive, case sensitive, case insensitive, no-pad variants have been added.
</li><li>Collation names for new UCA 14.0.0 collations can be specified without the character set prefix, because the character set prefix can be automatically detected from the context. For example, <code>uca1400_german_as_ci</code> can be specified instead of <code>utf8mb4_uca1400_german_as_ci</code>. Collation names with character set prefixes are accepted for the new UCA 14.0.0 collations, but they are optional.
</li><li>When the <a href="/kb/en/information-schema-collations-table/"><code>information_schema.COLLATIONS</code> table</a> is queried for metadata about the new UCA 14.0.0 collations, the <code>COLLATION_NAME</code> column contains the collation name without a character set prefix, and the <code>CHARACTER_SET_NAME</code> column contains NULL, which indicates that these collations can apply to multiple character sets.
</li><li>When the <a href="/kb/en/information-schema-collation_character_set_applicability-table/"><code>information_schema.COLLATION_CHARACTER_SET_APPLICABILITY</code> table</a> is queried for character set applicability of the new UCA 14.0.0 collations, the <code>COLLATION_NAME column also contains the collation name without a character set prefix. A new </code>FULL_COLLATION_NAME<code> column has been added, which contains the full collation name (with a character set prefix) for all collations, including new UCA 14.0.0 collations.</code>
</li><li>Improved contraction performance in UCA collations.
</li><li>Improved UCA collation performance for the <code>utf8mb3</code> and <code>utf8mb4</code> character sets.
</li></ul>
</li></ul>
<ul start="1"><li>On Microsoft Windows, MariaDB command-line tools now include full Unicode support. (<a href="https://jira.mariadb.org/browse/MDEV-26713">MDEV-26713</a>)
<ul start="1"><li>Unicode support is available on Microsoft Windows 10 1909 or later, Microsoft Windows 11, and Microsoft Windows Server 2020.
</li><li>The <code>my.ini</code> configuration file is now UTF-8 encoded.
</li><li>The <code>mariadb.exe</code> command-line client uses <a href="/kb/en/character-set/"><code>utf8mb4</code></a> as the default character set.
</li></ul>
</li></ul>
<h2 class="anchored_heading" id="security-features">Security Features</h2>
<ul start="1"><li>Client to server connection now requires SSL encryption by default
<ul start="1"><li>Using SSL (a more correct term would be TLS, but in reality SSL is more commonly used) has been simplified with MariaDB Enterprise Server 11.4.
</li><li>Before version 11.4, proper SSL configuration required multiple manual steps for the server and all the clients connecting to it.
</li><li>Now the client can verify the server self-signed certificate without any configuration whatsoever. The server completely automatically generates the SSL certificate and the client automatically verifies it as needed.
</li><li>A default configuration now refuses unencrypted connections.
</li></ul>
</li></ul>
<ul start="1"><li>New Privilege <code>SHOW CREATE ROUTINE</code> to enable any user with this privilege to view the definition of a stored routine.
<ul start="1"><li>Before MariaDB Enterprise Server 11.4 a user only could see the definition of a routine, a stored feature, or function, when:
<ul start="1"><li><code>SELECT</code> privilege exists for the mysql.procs table
</li><li>The user is the definer of the Stored Procedure
</li></ul>
</li><li><code>SHOW CREATE ROUTINE</code> privilege can be granted globally, per schema, or on individual routines.
</li><li>Example without privilege <code>SHOW CREATE ROUTINE</code>:<pre class="fixed"><span class="k">show</span> <span class="n">grants</span><span class="p">;</span>
</pre>
</li></ul>
</li></ul>
<pre class="fixed indent2"><span class="o">+</span><span class="c1">--------------------------------------------------+</span>
<span class="o">|</span> <span class="n">Grants</span> <span class="k">for</span> <span class="n">user1</span><span class="o">@%</span>                               <span class="o">|</span>
<span class="o">+</span><span class="c1">--------------------------------------------------+</span>
<span class="o">|</span> <span class="k">GRANT</span> <span class="k">USAGE</span> <span class="k">ON</span> <span class="o">*</span><span class="p">.</span><span class="o">*</span> <span class="k">TO</span> <span class="o">`</span><span class="n">user1</span><span class="o">`@`%`</span>                <span class="o">|</span>
<span class="o">|</span> <span class="k">GRANT</span> <span class="k">SELECT</span><span class="p">,</span> <span class="k">EXECUTE</span> <span class="k">ON</span> <span class="o">`</span><span class="n">test</span><span class="o">`</span><span class="p">.</span><span class="o">*</span> <span class="k">TO</span> <span class="o">`</span><span class="n">user1</span><span class="o">`@`%`</span> <span class="o">|</span>
<span class="o">+</span><span class="c1">--------------------------------------------------+</span>
</pre><pre class="fixed indent2"><span class="k">show</span> <span class="k">create</span> <span class="k">procedure</span> <span class="n">myProc</span> <span class="err">\</span><span class="k">G</span>
</pre><pre class="fixed indent2"><span class="o">***************************</span> <span class="mi">1</span><span class="p">.</span> <span class="k">row</span> <span class="o">***************************</span>
           <span class="k">Procedure</span><span class="p">:</span> <span class="n">myProc</span>
            <span class="n">sql_mode</span><span class="p">:</span> <span class="n">STRICT_TRANS_TABLES</span><span class="p">,</span><span class="n">ERROR_FOR_DIVISION_BY_ZERO</span><span class="p">,</span><span class="n">NO_AUTO_CREATE_USER</span><span class="p">,</span><span class="n">NO_ENGINE_SUBSTITUTION</span>
    <span class="k">Create</span> <span class="k">Procedure</span><span class="p">:</span> <span class="k">NULL</span>
<span class="n">character_set_client</span><span class="p">:</span> <span class="n">utf8mb3</span>
<span class="n">collation_connection</span><span class="p">:</span> <span class="n">utf8mb3_general_ci</span>
  <span class="k">Database</span> <span class="k">Collation</span><span class="p">:</span> <span class="n">utf8mb4_general_ci</span>
</pre><div style="margin-left:2em"><div style="margin-left:2em"><p>○ Example with the new privilege SHOW CREATE ROUTINE:</p>
</div>
</div>
<pre class="fixed indent2"><span class="k">show</span> <span class="n">grants</span><span class="p">;</span>
</pre><pre class="fixed indent2"><span class="o">+</span><span class="c1">-----------------------------------------------------------------------+</span>
<span class="o">|</span> <span class="n">Grants</span> <span class="k">for</span> <span class="n">user1</span><span class="o">@%</span>                                                    <span class="o">|</span>
<span class="o">+</span><span class="c1">-----------------------------------------------------------------------+</span>
<span class="o">|</span> <span class="k">GRANT</span> <span class="k">USAGE</span> <span class="k">ON</span> <span class="o">*</span><span class="p">.</span><span class="o">*</span> <span class="k">TO</span> <span class="o">`</span><span class="n">user1</span><span class="o">`@`%`</span>                                     <span class="o">|</span>
<span class="o">|</span> <span class="k">GRANT</span> <span class="k">SELECT</span><span class="p">,</span> <span class="k">EXECUTE</span><span class="p">,</span> <span class="k">SHOW</span> <span class="k">CREATE</span> <span class="k">ROUTINE</span> <span class="k">ON</span> <span class="o">`</span><span class="n">test</span><span class="o">`</span><span class="p">.</span><span class="o">*</span> <span class="k">TO</span> <span class="o">`</span><span class="n">user1</span><span class="o">`@`%`</span> <span class="o">|</span>
<span class="o">+</span><span class="c1">-----------------------------------------------------------------------+</span>
</pre><pre class="fixed indent2"><span class="k">show</span> <span class="k">create</span> <span class="k">procedure</span> <span class="n">myProc</span> <span class="err">\</span><span class="k">G</span>
</pre><pre class="fixed indent2"><span class="o">***************************</span> <span class="mi">1</span><span class="p">.</span> <span class="k">row</span> <span class="o">***************************</span>
           <span class="k">Procedure</span><span class="p">:</span> <span class="n">myProc</span>
            <span class="n">sql_mode</span><span class="p">:</span> <span class="n">STRICT_TRANS_TABLES</span><span class="p">,</span><span class="n">ERROR_FOR_DIVISION_BY_ZERO</span><span class="p">,</span><span class="n">NO_AUTO_CREATE_USER</span><span class="p">,</span><span class="n">NO_ENGINE_SUBSTITUTION</span>
    <span class="k">Create</span> <span class="k">Procedure</span><span class="p">:</span> <span class="k">CREATE</span> <span class="k">DEFINER</span><span class="o">=`</span><span class="n">root</span><span class="o">`@`</span><span class="n">localhost</span><span class="o">`</span> <span class="k">PROCEDURE</span> <span class="o">`</span><span class="n">myProc</span><span class="o">`</span><span class="p">()</span>
<span class="k">BEGIN</span>
    <span class="k">SELECT</span> <span class="ss">&quot;My Definiton of a Stored Procedure&quot;</span><span class="p">;</span>
<span class="k">END</span>
<span class="n">character_set_client</span><span class="p">:</span> <span class="n">utf8mb3</span>
<span class="n">collation_connection</span><span class="p">:</span> <span class="n">utf8mb3_general_ci</span>
  <span class="k">Database</span> <span class="k">Collation</span><span class="p">:</span> <span class="n">utf8mb4_general_ci</span>
</pre><ul start="1"><li>New view in the SYS schema to retrieve user privileges per specific table
<ul start="1"><li>View privileges_by_table_by_level in the SYS schema lists the privilege and privilege level per user, schema, and table.
</li><li>Example:
</li></ul>
</li></ul>
<pre class="fixed indent2"><span class="k">CREATE</span> <span class="k">DATABASE</span> <span class="n">test</span><span class="p">;</span>
<span class="n">use</span> <span class="n">test</span><span class="p">;</span>
<span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">t1</span> <span class="p">(</span><span class="n">id</span> <span class="nb">int</span><span class="p">);</span>
<span class="k">CREATE</span> <span class="k">USER</span> <span class="n">user1</span><span class="p">;</span>
<span class="k">GRANT</span> <span class="k">SELECT</span><span class="p">,</span> <span class="k">UPDATE</span> <span class="k">ON</span> <span class="o">*</span><span class="p">.</span><span class="o">*</span> <span class="k">TO</span> <span class="n">user1</span><span class="p">;</span>
<span class="k">CREATE</span> <span class="k">USER</span> <span class="n">user2</span><span class="p">;</span>
<span class="k">GRANT</span> <span class="k">SELECT</span> <span class="k">ON</span> <span class="n">test</span><span class="p">.</span><span class="o">*</span> <span class="k">TO</span> <span class="n">user2</span><span class="p">;</span>
<span class="k">CREATE</span> <span class="k">USER</span> <span class="n">user3</span><span class="p">;</span>
<span class="k">GRANT</span> <span class="k">SELECT</span> <span class="k">ON</span> <span class="n">test</span><span class="p">.</span><span class="n">t1</span> <span class="k">TO</span> <span class="n">user3</span><span class="p">;</span>

<span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">sys</span><span class="p">.</span><span class="n">privileges_by_table_by_level</span> <span class="k">WHERE</span> <span class="n">GRANTEE</span> <span class="k">NOT</span> <span class="k">LIKE</span> <span class="ss">&quot;&#39;root&#39;@&#39;%&#39;&quot;</span><span class="p">;</span>
</pre><pre class="fixed indent2"><span class="o">+</span><span class="c1">--------------+------------+-------------+-----------+--------+</span>
<span class="o">|</span> <span class="n">TABLE_SCHEMA</span> <span class="o">|</span> <span class="k">TABLE_NAME</span> <span class="o">|</span> <span class="n">GRANTEE</span>     <span class="o">|</span> <span class="n">PRIVILEGE</span> <span class="o">|</span> <span class="k">LEVEL</span>  <span class="o">|</span>
<span class="o">+</span><span class="c1">--------------+------------+-------------+-----------+--------+</span>
<span class="o">|</span> <span class="n">test</span>         <span class="o">|</span> <span class="n">t1</span>         <span class="o">|</span> <span class="s1">&#39;user1&#39;</span><span class="o">@</span><span class="s1">&#39;%&#39;</span> <span class="o">|</span> <span class="k">SELECT</span>    <span class="o">|</span> <span class="k">GLOBAL</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">test</span>         <span class="o">|</span> <span class="n">t1</span>         <span class="o">|</span> <span class="s1">&#39;user1&#39;</span><span class="o">@</span><span class="s1">&#39;%&#39;</span> <span class="o">|</span> <span class="k">UPDATE</span>    <span class="o">|</span> <span class="k">GLOBAL</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">test</span>         <span class="o">|</span> <span class="n">t1</span>         <span class="o">|</span> <span class="s1">&#39;user2&#39;</span><span class="o">@</span><span class="s1">&#39;%&#39;</span> <span class="o">|</span> <span class="k">SELECT</span>    <span class="o">|</span> <span class="k">SCHEMA</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">test</span>         <span class="o">|</span> <span class="n">t1</span>         <span class="o">|</span> <span class="s1">&#39;user3&#39;</span><span class="o">@</span><span class="s1">&#39;%&#39;</span> <span class="o">|</span> <span class="k">SELECT</span>    <span class="o">|</span> <span class="k">TABLE</span>  <span class="o">|</span>
<span class="o">+</span><span class="c1">--------------+------------+-------------+-----------+--------+</span>
</pre><ul start="1"><li>New Information Schema Table For Password Related Data (MENT-2145)
<ul start="1"><li>A new information Schema view, USERS, has been added, which DBAs can use to get insights about password related information for a user. This information can be used:
<ul start="1"><li>by an application to inform a user about a password about to expire or an account which is at risk of being blocked due <strong> to the number of wrong passwords entered</strong>
</li><li>by DBAs to query users which have been blocked because of too many invalid passwords entered
</li></ul>
</li><li>The new view includes the fields:
<ul start="1"><li>USER – A string including user name and host
PASSWORD_ERRORS – A counter with the current number of wrong passwords entered
<ul start="1"><li>Reset to 0 when a correct password has been entered
</li><li>An account is blocked, if max_password_errors is reached
</li><li>NULL for accounts with privilege CONNECTION ADMIN
</li></ul>
</li><li>PASSWORD_EXPIRATION_TIME – The date and time when the password expires or NULL, if the password never expires
</li></ul>
</li></ul>
</li></ul>
<ul start="1"><li>New Authentication Plugin — PARSEC (Password Authentication using Response Signed with Elliptic Curves) (MENT-2142)
<ul start="1"><li>PARSEC improves security over old authentication plugins by introducing salted passwords, time consuming key derivation function, and a client-side scramble to ensure that man-in-the-middle attackers cannot control the client response.
</li><li>Example on how to create a user using the new authentication plugin:<pre class="fixed"><span class="k">CREATE</span> <span class="k">USER</span> <span class="s1">&#39;MariaDBUser&#39;</span><span class="o">@</span><span class="s1">&#39;%&#39;</span> <span class="n">IDENTIFIED</span> <span class="n">VIA</span> <span class="n">PARSEC</span> <span class="k">USING</span> <span class="n">PASSWORD</span><span class="p">(</span><span class="s1">&#39;MyPassword123!&#39;</span><span class="p">);</span>
</pre>
</li><li>This will result in:<pre class="fixed"><span class="k">SHOW</span> <span class="n">GRANTS</span> <span class="k">FOR</span> <span class="n">MariaDBUser</span><span class="o">@</span><span class="s1">&#39;%&#39;</span><span class="p">;</span>
<span class="n">Grants</span> <span class="k">for</span> <span class="n">MariaDBUser</span><span class="o">@%</span>
<span class="k">GRANT</span> <span class="k">USAGE</span> <span class="k">ON</span> <span class="o">*</span><span class="p">.</span><span class="o">*</span> <span class="k">TO</span> <span class="o">`</span><span class="n">MariaDBUser</span><span class="o">`@`%`</span> <span class="n">IDENTIFIED</span> <span class="n">VIA</span> <span class="n">parsec</span> <span class="k">USING</span> <span class="s1">&#39;P0:lhXyNv1cIxpB8EnTxR7ON7S7:1l3rWRW1/jw45yrvYXB8eh02wzk7lcJcz4CMcWw2b+8&#39;</span>
</pre>
</li></ul>
</li></ul>
<ul start="1"><li>The <a href="/kb/en/password-reuse-check-plugin/"><code>password_reuse_check</code> plugin</a> implements a way to prevent a user from setting a password that had been set for that user previously. (<a href="https://jira.mariadb.org/browse/MDEV-5245">MDEV-5245</a>)
<ul start="1"><li>The <a href="/kb/en/password_reuse_check_interval/"><code>password_reuse_check_interval</code> system variable</a> specifies the number of days before a password can be reused.
</li><li>The plugin only affects a SQL statement that sets a user password using a literal password string. It cannot check the password of a SQL statement that makes use of a hashed password value.
</li><li>The plugin makes use of password history records stored in the <a href="/kb/en/mysqlpassword_reuse_check_history-table/"><code>mysql.password_reuse_check_history</code> system table</a>. Each row in the table stores a cryptographic hash and a date. The hashed data includes information about the affected user and the password that is being set. Because it is a one-way cryptographic hash, the stored data cannot be used to extract the prior password values nor which user the historical record is associated with.
</li><li>The <code>password_reuse_check</code> plugin was previously backported to MariaDB Enterprise Server 10.4.25-16, 10.5.16-11, and 10.6.8-4.
</li></ul>
</li></ul>
<ul start="1"><li><a href="/kb/en/grant/">GRANT .. TO PUBLIC</a> can be used to grant privileges to all currently authenticated users and newly authenticated users on the system. (<a href="https://jira.mariadb.org/browse/MDEV-5215">MDEV-5215</a>)
</li></ul>
<ul start="1"><li><a href="/kb/en/show-grants/">SHOW GRANTS FOR PUBLIC</a> retrieves all privileges granted to public. (<a href="https://jira.mariadb.org/browse/MDEV-5215">MDEV-5215</a>)
</li></ul>
<ul start="1"><li>Fine-grained privileges have been removed from the <a href="/kb/en/grant/#super">SUPER privilege</a>: (<a href="https://jira.mariadb.org/browse/MDEV-29668">MDEV-29668</a>, <a href="https://jira.mariadb.org/browse/MDEV-29596">MDEV-29596</a>)<span class="cstm-style darkheader borders table-head-align-top "></span>|=<strong>Fine-grained privilege removed from <a href="/kb/en/grant/#super">SUPER</a> as of ES 11.4.4-2</strong>|
</li></ul>
<table><tr><td><a href="/kb/en/grant/#read-only-admin"><code>READ ONLY ADMIN</code></a></td></tr>
<tr><td><a href="/kb/en/grant/#binlog-admin"><code>BINLOG ADMIN</code></a></td></tr>
<tr><td><a href="/kb/en/grant/#binlog-monitor"><code>BINLOG MONITOR</code></a></td></tr>
<tr><td><a href="/kb/en/grant/#federated-admin"><code>FEDERATED ADMIN</code></a></td></tr>
<tr><td><a href="/kb/en/grant/#replication-master-admin"><code>REPLICATION MASTER ADMIN</code></a></td></tr>
<tr><td><a href="/kb/en/grant/#eplication-slave-admin"><code>REPLICATION SLAVE ADMIN</code></a></td></tr>
<tr><td><a href="/kb/en/grant/#set-user"><code>SET USER</code></a></td></tr>
<tr><td><a href="/kb/en/grant/#slave-monitor"><code>SLAVE MONITOR</code></a></td><td>&lt;&lt;/style&gt;&gt;</td></tr>
</table>
<p><strong> Upon upgrade, each user that has the SUPER privilege will be granted the privileges removed from <code>SUPER</code>, so that the user's capabilities will not change.
</strong> The <code>SUPER</code> privilege is still used for some special cases, including:
<strong>* Calling <a href="/kb/en/des_encrypt/"><code>DES_ENCRYPT()</code></a> and <a href="/kb/en/des_decrypt/"><code>DES_DECRYPT()</code></a> without an explicit key
</strong>* Dynamically changing certain system variables with <a href="/kb/en/set/"><code>SET GLOBAL</code></a>
<strong>* Changing certain debug settings
</strong> Due to this change, the consistency of read-only replicas are now protected when users with the <code>SUPER</code> privilege attempt to write to a read-only replica if they do not also have the <a href="/kb/en/grant/#read-only-admin"><code>READ ONLY ADMIN</code> privilege</a>.
<strong>* Read-only replicas are replica servers that have <a href="/kb/en/server-system-variables/#read_only"><code>read_only=1</code></a> set to ensure that they stay consistent with the primary.
</strong>* If a user with the <code>SUPER</code> privilege requires write access to a read-only replica server, the user must be explicitly granted the <code>READ ONLY ADMIN</code> privilege.</p>
<h2 class="anchored_heading" id="mariadb-replication">MariaDB Replication</h2>
<ul start="1"><li>New option to limit the space used by binary bogs per server instance
<ul start="1"><li>The new system variable <code>max_binlog_total_size</code> (alias <code>binlog_space_limit</code>) enables binary log purging when the total size of all binary logs exceeds the specified threshold.
</li><li>The default for <code>max_binlog_total_size</code> is 0, meaning that there is no limit.
</li><li>The system variable can be changed without restarting the server.
</li></ul>
</li></ul>
<ul start="1"><li>New system variable <code>--slave-connections-needed-for-purge</code> set to 1 by default.
<ul start="1"><li>Assures that binary log purging will not happen until at least that many replicas are connected and do not need purged binary logs anymore.
</li></ul>
</li></ul>
<ul start="1"><li>New status variable <code>binlog_disk_use</code> provides the disk space currently used by the binary logs.
</li></ul>
<ul start="1"><li>New options <code>SQL_BEFORE_GTIDS</code> and <code>SQL_AFTER_GTIDS</code> for <code>START REPLICA UNTIL</code>
<ul start="1"><li>The new options <code>SQL_BEFORE_GTIDS</code> and <code>SQL_AFTER_GTIDS</code> for <code>START REPLICA UNTIL</code> allow the user to control of whether the replica stops before or after a provided GTID state.
<ul start="1"><li>Its syntax is: <pre class="fixed"><span class="k">START</span> <span class="n">SLAVE</span> <span class="k">UNTIL</span> <span class="p">(</span><span class="n">SQL_BEFORE_GTIDS</span><span class="o">|</span><span class="n">SQL_AFTER_GTIDS</span><span class="p">)</span><span class="o">=</span><span class="ss">&quot;&lt;gtid_list&gt;&quot;</span>
</pre>
</li><li>When providing <code>SQL_BEFORE_GTIDS="&lt;gtid_list&gt;"</code>, for each domain specified in the gtid_list, the replica will execute transactions up to the GTID found, and immediately stop processing events in that domain without executing the transaction of the specified GTID. Once all domains have stopped, the replica will stop. Events originating from domains that are not specified in the list are not replicated.
</li><li><code>START SLAVE UNTIL SQL_AFTER_GTIDS="&lt;gtid_list&gt;"</code> is an alias to the default behavior of <code>START SLAVE UNTIL master_gtid_pos="&lt;gtid_list&gt;"</code>, the known behavior before MariaDB Enterprise Server 11.4.
</li><li>The replica will execute transactions originating from domain ids provided in the list, and will stop once all transactions provided in the <code>UNTIL</code> list have all been executed.
</li></ul>
</li></ul>
</li></ul>
<ul start="1"><li>An index is now created on the GTIDs of the binary log, which allows a connecting replica to find the position it should start from without the need to scan the whole binary log.
<ul start="1"><li>The new system variable <code>binlog_gtid_index</code> (default <code>ON</code>) can be used to disable the creation of indexes.
</li><li>The new system variable <code>binlog_gtid_index_page_size</code> (default <code>4096</code>) defines the page size to use for the binary log GTID index.
</li><li>The new system variable <code>binlog_gtid_index_span_min</code> (default <code>65536</code>) controls the sparseness of the binary log GTID index.
</li><li>The new status variables <code>binlog_gtid_index_hit</code> and <code>binlog_gtid_index_miss</code> can be used for monitoring purposes. A miss is an indication that the index file is missing.
</li></ul>
</li></ul>
<ul start="1"><li>GTID binlog events now include the thread ID (MENT-2180)
<ul start="1"><li>The thread ID and the corresponding statement can now be retrieved from binary logs
</li><li>The output of mariadb-binlog also includes the thread ID
</li></ul>
</li></ul>
<ul start="1"><li>Binary log filter options <code>binlog-do-db</code>, <code>binlog-ignore-db</code>, and <code>binlog-row-event-max-size</code> are now visible as system variables. (<a href="https://jira.mariadb.org/browse/MDEV-30188">MDEV-30188</a>)
<ul start="1"><li>For example:
</li></ul>
</li></ul>
<pre class="fixed indent2"><span class="k">SHOW</span> <span class="k">GLOBAL</span> <span class="n">VARIABLES</span> <span class="k">WHERE</span>
  <span class="n">Variable_name</span> <span class="k">LIKE</span> <span class="s1">&#39;binlog_do_db&#39;</span> <span class="k">OR</span>
  <span class="n">Variable_name</span> <span class="k">LIKE</span> <span class="s1">&#39;binlog_ignore_db&#39;</span> <span class="k">OR</span>
  <span class="n">Variable_name</span> <span class="k">LIKE</span> <span class="s1">&#39;binlog_row_event_max_size&#39;</span><span class="p">;</span>
</pre><pre class="fixed indent2"><span class="o">+</span><span class="c1">---------------------------+-------+</span>
<span class="o">|</span> <span class="n">Variable_name</span>             <span class="o">|</span> <span class="n">Value</span> <span class="o">|</span>
<span class="o">+</span><span class="c1">---------------------------+-------+</span>
<span class="o">|</span> <span class="n">binlog_do_db</span>              <span class="o">|</span>       <span class="o">|</span>
<span class="o">|</span> <span class="n">binlog_ignore_db</span>          <span class="o">|</span>       <span class="o">|</span>
<span class="o">|</span> <span class="n">binlog_row_event_max_size</span> <span class="o">|</span> <span class="mi">8192</span>  <span class="o">|</span>
<span class="o">+</span><span class="c1">---------------------------+-------+</span>
</pre><ul start="1"><li>For all storage engines, <a href="/kb/en/alter-table/"><code>ALTER </code></a> is divided into two phases to prevent long-running DDL statements from causing replication lag on replicas: (<a href="https://jira.mariadb.org/browse/MDEV-11675">MDEV-11675</a>)
<ul start="1"><li>Enabled by setting <a href="/kb/en/replication-and-binary-log-system-variables/#binlog_alter_two_phase"><code>binlog_alter_two_phase=1</code></a>, which is not the default.
</li><li>Two-phase <code>ALTER TABLE</code> is optimistic, so the operation begins on the replica server before it finishes on the primary server.
</li><li>Two events are written to the binary log on the primary server: a <code>START ALTER</code> event when the operation starts, and either a <code>COMMIT ALTER</code> event or a <code>ROLLBACK ALTER</code> event when the operation finishes depending on whether it succeeds or fails.
</li></ul>
</li></ul>
<ul start="1"><li>By default, replication uses Global Transaction IDs (GTID), which makes replicas crash-safe. (<a href="https://jira.mariadb.org/browse/MDEV-19801">MDEV-19801</a>)
<ul start="1"><li>This change impacts backward compatibility.
</li><li>In previous releases, when <a href="change-master"><code>CHANGE MASTER</code></a> TO was executed without explicitly specifying <code>MASTER_USE_GTID</code>, it would default to <code>MASTER_USE_GTID=no</code>.
</li><li>Starting with this release, when <a href="/kb/en/change-master-to/"><code>CHANGE MASTER TO</code></a> is executed without explicitly specifying MASTER_USE_GTID, it defaults to <code>MASTER_USE_GTID=slave_pos</code>. With <code>MASTER_USE_GTID=slave_pos</code>, the replica server uses the <a href="/kb/en/global-transaction-id/#gtid_slave_pos"><code>gtid_slave_pos</code> system variable</a> as the GTID position.
</li><li>This change can cause new behavior to occur when performing the following operations:
<ul start="1"><li>Setting up a new replica with <a href="/kb/en/change-master-to/"><code>CHANGE MASTER TO</code></a> without specifying <code>MASTER_USE_GTID</code>
</li><li>Freshly starting a stopped replica with <a href="/kb/en/start-replica/"><code>START REPLICA</code></a> if the replica configuration does not explicitly have <code>MASTER_USE_GTID</code> set.
</li><li>Resetting a replica with <a href="/kb/en/reset-replica/"><code>RESET REPLICA</code></a>
</li></ul>
</li><li>When <code>MASTER_LOG_FILE</code> and <code>MASTER_LOG_POS</code> are explicitly set, <code>MASTER_USE_GTID=no</code> is implicitly set.
</li></ul>
</li></ul>
<ul start="1"><li>For mariadb-binlog, the start and stop positions can be specified as GTIDs: (<a href="https://jira.mariadb.org/browse/MDEV-4989">MDEV-4989</a>) <pre class="fixed"><span class="err">$</span> <span class="n">mariadb</span><span class="o">-</span><span class="n">binlog</span> <span class="c1">--start-position=&#39;0-1-1001,1-2-1000&#39; \</span>
   <span class="c1">--stop-position=&#39;0-1-2000,1-2-1050&#39; \</span>
   <span class="n">mariadb</span><span class="o">-</span><span class="n">bin</span><span class="p">.</span><span class="mi">000001</span>
</pre>
<ul start="1"><li>The --start-position command-line option can set the starting GTID position as a comma-separated list of GTIDs. For each specified GTID domain, the GTID position is exclusive, so an event is only printed if its sequence number is greater than the sequence number specified for that domain.
</li><li>The --stop-position command-line option can set the ending GTID position as a comma-separated list of GTIDs. For each specified GTID domain, the GTID position is inclusive, so an event is only printed if its sequence number is greater than or equal to the sequence number specified for that domain.
</li><li>Both command-line options require each GTID in the comma-separated list to have a different domain ID.
</li></ul>
</li></ul>
<ul start="1"><li>For <a href="/kb/en/mariadb-binlog/"><code>mariadb-binlog</code></a>, events can be filtered based on the domain IDs and server IDs in the event's GTID: (<a href="https://jira.mariadb.org/browse/MDEV-4989">MDEV-4989</a>, <a href="https://jira.mariadb.org/browse/MDEV-20119">MDEV-20119</a>) <pre class="fixed"><span class="err">$</span> <span class="n">mariadb</span><span class="o">-</span><span class="n">binlog</span> <span class="c1">--do-domain-ids=&#39;0,1&#39; \</span>
   <span class="c1">--do-server-ids=&#39;1,2&#39; \</span>
   <span class="n">mariadb</span><span class="o">-</span><span class="n">bin</span><span class="p">.</span><span class="mi">000001</span>
</pre>
<ul start="1"><li>The --do-domain-ids command-line option can set domain IDs that should be read as a comma-separated list of domain IDs. If an event's GTID does not have one of the specified domain IDs, the event is not printed.
</li><li>The --ignore-domain-ids command-line option can set domain IDs that should be ignored as a comma-separated list of domain IDs. If an event's GTID has one of the specified domain IDs, the event is not printed.<br>$ mariadb-binlog --start-position='0-1-1001,1-2-1000' \ <br>--stop-position='0-1-2000,1-2-1050' mariadb-bin.000001
</li><li>The --start-position command-line option can set the starting GTID position as a comma-separated list of GTIDs. For each specified GTID domain, the GTID position is exclusive, so an event is only printed if its sequence number is greater than the sequence number specified for that domain.
</li><li>The --stop-position command-line option can set the ending GTID position as a comma-separated list of GTIDs. For each specified GTID domain, the GTID position is inclusive, so an event is only printed if its sequence number is greater than or equal to the sequence number specified for that domain.
</li><li>Both command-line options require each GTID in the comma-separated list to have a different domain ID.
</li></ul>
</li></ul>
<h2 class="anchored_heading" id="galera-cluster">Galera Cluster</h2>
<ul start="1"><li>The following changes pertain to Galera Cluster with MariaDB Enterprise Server 11.4:
</li></ul>
<ul start="1"><li>Automatic SST User Account Management with Galera (MENT-2144)
<ul start="1"><li>The State Snapshot Transfer (SST) method, needed to provide a full data copy to a new node, requires a dedicated account to access the remote server (donor) during the SST process.
</li><li>MariaDB Enterprise Cluster (Galera) now creates the user internally for the time of an SST, which makes the need to have an account created manually obsolete. This removes the requirement to have a user and password provided via a configuration file. Having the user created by Galera also ensures that the needed privileges are set.
</li></ul>
</li></ul>
<ul start="1"><li>New connection states in <a href="/kb/en/show-processlist/"><code>SHOW [FULL] PROCESSLIST</code></a> and <a href="/kb/en/information-schema-processlist-table/"><code>information_schema.PROCESSLIST</code></a> better reflect the state of the connection: (<a href="https://jira.mariadb.org/browse/MDEV-26352">MDEV-26352</a>)
</li></ul>
<table><tr><th>Connection State</th><th>Description</th></tr>
<tr><td><code>waiting to execute in isolation</code></td><td>The connection is executing a DDL statement with <a href="/kb/en/galera-cluster-system-variables/#wsrep_osu_method"><code>wsrep_osu_method=TOI</code></a>, but the operation requires other concurrent operations to finish first, so the DDL statement can be executed in isolation.</td></tr>
<tr><td><code>waiting for TOI DDL</code></td><td>Another connection is executing a DDL statement with <a href="/kb/en/galera-cluster-system-variables/#wsrep_osu_method"><code>wsrep_osu_method=TOI</code></a>, so this connection must wait for the DDL statement to finish.</td></tr>
<tr><td><code>waiting for flow control</code></td><td>The connection is committing a transaction, but transactions are currently paused due to flow control, so the connection is waiting for the cluster to catch up and unpause transactions.</td></tr>
<tr><td><code>waiting for certification</code></td><td>The connection is committing a transaction, but it is waiting for the other cluster nodes to certify the transaction.</td></tr>
</table>
<ul start="1"><li>Node state changes can be saved to a machine-readable JSON file configured by the <a href="/kb/en/galera-cluster-system-variables/#wsrep_status_file">wsrep_status_file system variable</a>: (<a href="https://jira.mariadb.org/browse/MDEV-26971">MDEV-26971</a>)
<pre class="fixed"><span class="p">[</span><span class="n">mariadb</span><span class="p">]</span>
<span class="n">wsrep_status_file</span><span class="o">=</span><span class="n">galera_status</span><span class="p">.</span><span class="n">json</span>
</pre>
<ul start="1"><li>The JSON file can be read by monitoring tools.
</li><li>When <code>wsrep_status_file</code> is set to a path, the node state changes are written to the specified file.
</li><li>When <code>wsrep_status_file</code> is set to <code>none</code>, this functionality is disabled.
</li></ul>
</li></ul>
<ul start="1"><li>Progress reporting for MariaDB Enterprise Backup-based SST by configuring the progress option in the [<code>sst</code>] option group: (<a href="https://jira.mariadb.org/browse/MDEV-26971">MDEV-26971</a>) <pre class="fixed"><span class="p">[</span><span class="n">mariadb</span><span class="p">]</span>
<span class="n">wsrep_sst_method</span><span class="o">=</span><span class="n">mariabackup</span>
<span class="n">wsrep_debug</span><span class="o">=</span><span class="mi">1</span>
<span class="p">[</span><span class="n">sst</span><span class="p">]</span>
<span class="n">progress</span><span class="o">=</span><span class="mi">1</span>
<span class="n">rlimit</span><span class="o">=</span><span class="mi">100</span><span class="n">m</span> 
</pre>
<ul start="1"><li>Progress reporting is only supported for MariaDB Enterprise Backup-based SST, so <a href="/kb/en/galera-cluster-system-variables/#wsrep_sst_method">wsrep_sst_method=mariabackup</a> must be set.
</li><li>Progress reporting is only enabled when <a href="https://mariadb.com/kb/en/galera-cluster-system-variables/#wsrep_debug">wsrep_debug=1</a> is set.
</li><li>When <code>progress=1</code> is set, progress reporting goes to standard error (<code>stderr</code>).
</li><li>When <code>progress</code> is set to a path, progress reporting is written to the specified file.
</li><li>When <code>progress</code> is set to none, progress reporting is disabled.
</li><li><code>rlimit</code> can be used to set a rate limit in bytes. The value can use a suffix to represent a unit: k for <strong> kilobytes, <code>m</code> for megabytes, <code>g</code> for gigabytes, and <code>t</code> for terabytes.</strong>
</li><li>The <code>pv</code> utility must be installed for SST progress reporting.
</li><li>When progress reporting is enabled, the following SST progress message is written to the MariaDB log during an SST:
</li><li>When <code>wsrep_status_file</code> is set to <code>none</code>, this functionality is disabled.
</li></ul>
</li></ul>
<ul start="1"><li>Progress reporting for MariaDB Enterprise Backup-based SST by configuring the progress option in the [sst] option group: (<a href="https://jira.mariadb.org/browse/MDEV-26971">MDEV-26971</a>) <pre class="fixed"><span class="p">[</span><span class="n">mariadb</span><span class="p">]</span>
<span class="n">wsrep_sst_method</span><span class="o">=</span><span class="n">mariabackup</span>
<span class="n">wsrep_debug</span><span class="o">=</span><span class="mi">1</span>
<span class="p">[</span><span class="n">sst</span><span class="p">]</span>
<span class="n">progress</span><span class="o">=</span><span class="mi">1</span>
<span class="n">rlimit</span><span class="o">=</span><span class="mi">100</span><span class="n">m</span>
</pre>
<ul start="1"><li>Progress reporting is only supported for MariaDB Enterprise Backup-based SST, so <a href="/kb/en/galera-cluster-system-variables/#wsrep_sst_method">wsrep_sst_method=mariabackup</a> must be set.
</li><li>Progress reporting is only enabled when <a href="/kb/en/galera-cluster-system-variables/#wsrep_debug">wsrep_debug=1</a> is set.
</li><li>When <code>progress=1</code> is set, progress reporting goes to standard error (<code>stderr</code>).
</li><li>When <code>progress</code> is set to a path, progress reporting is written to the specified file.
</li><li>When <code>progress</code> is set to none, progress reporting is disabled.
</li><li>rlimit can be used to set a rate limit in bytes. The value can use a suffix to represent a unit: <code>k</code> for kilobytes, <code>m</code> for megabytes, <code>g</code> for gigabytes, and <code>t</code> for terabytes.
</li><li>The <code>pv</code> utility must be installed for SST progress reporting.
</li><li>When progress reporting is enabled, the following SST progress message is written to the MariaDB log during an SST:
</li></ul>
</li></ul>
<h2 class="anchored_heading" id="platforms">Platforms</h2>
<p>In alignment to the <a href="https://mariadb.com/docs/server/products/mariadb-enterprise-server/lifecycle">enterprise lifecycle</a>, MariaDB Enterprise Server 11.4.4-2 is provided for:</p>
<p>Debian 11 (x86_64, ARM64)</p>
<p>Debian 12 (x86_64, ARM64)</p>
<p>Red Hat Enterprise Linux 8 (x86_64, ARM64)</p>
<p>Red Hat Enterprise Linux 9 (x86_64, ARM64, PPC64LE)</p>
<p>AlmaLinux 8 (x86_64, ARM64)</p>
<p>AlmaLinux 9 (x86_64, ARM64)</p>
<p>Rocky Linux 8 (x86_64, ARM64)</p>
<p>Rocky Linux 9 (x86_64, ARM64)</p>
<p>SUSE Linux Enterprise Server 15 (x86_64, ARM64)</p>
<p>Ubuntu 20.04 (x86_64, ARM64)</p>
<p>Ubuntu 22.04 (x86_64, ARM64)</p>
<p>Ubuntu 24.04 (x86_64, ARM64)</p>
<p>Microsoft Windows (x86_64) (Without MariaDB Enterprise Cluster (Galera) support)</p>
<p>Red Hat UBI 8 (x86_64, ARM64)</p>
<p>Red Hat UBI 8 is part of the Enterprise Server Docker Image. It does not support MariaDB Enterprise Cluster (Galera) or MariaDB ColumnStore.</p>
<p>Some components of MariaDB Enterprise Server might not support all platforms. For additional information, see <a href="https://mariadb.com/engineering-policies">MariaDB Corporation Engineering Policies".</a></p>
<h2 class="anchored_heading" id="installation-instructions">Installation Instructions</h2>
<p><a href="https://mariadb.com/docs/server/deploy/topologies/single-node/enterprise-server-11-4">Deploy MariaDB Enterprise with Repositories</a></p>
<p><a href="https://mariadb.com/docs/server/deploy/deployment-methods/package-tarball">Deploy MariaDB Enterprise with Package Tarballs</a></p>
<p><a href="https://mariadb.com/docs/server/deploy/deployment-methods/docker/enterprise-server">Deploy MariaDB Enterprise with Docker</a></p>
<h2 class="anchored_heading" id="upgrade-instructions">Upgrade Instructions</h2>
<p><a href="https://mariadb.com/docs/server/service-management/upgrades/enterprise-server/release-series-es11-4">Upgrade to MariaDB Enterprise Server 11.4</a></p>

    </div>


        
            <div id="subscribe" class="well well-small hide hidden-print"
                 data-subscribe-url="/kb/en/release-notes-for-mariadb-enterprise-server-11-4-3-1/+subscriptions/add"
                 data-unsubscribe-url="/kb/en/release-notes-for-mariadb-enterprise-server-11-4-3-1/+subscriptions/remove">
            </div>
        

        
        
    
        <div class="simple_section_nav">
            <ul class="nav nav-pills">
                
                    <li><a href="/kb/en/release-notes-for-mariadb-enterprise-server-11-4-4-2/">
                        ← Release Notes for MariaDB Enterprise Server 11.4.4-2
                    </a>
                    </li>
                
                
                    <li><a href="/kb/en/mariadb-enterprise-server-11-4/">
                        ↑ MariaDB Enterprise Server 11.4 ↑
                    </a>
                    </li>
                
                
                    <li class="pull-right"><a href="/kb/en/release-notes-for-mariadb-enterprise-server-11-4-0-1/">
                        Release Notes for MariaDB Enterprise Server 11.4.0-1 →
                    </a>
                    </li>
                
            </ul>
        </div>
    

        

        
        <h2>Comments</h2>
        
    
    <div id="comments" data-node-id="15866" data-comments-url="/kb/en/release-notes-for-mariadb-enterprise-server-11-4-3-1/+comments"
         data-reply-url="/kb/en/release-notes-for-mariadb-enterprise-server-11-4-3-1/comments/post/">
        Comments loading...
    </div>

        

    </div>


                    <div id="content_disclaimer" class="graybox">
                        Content reproduced on this site is the property of its respective owners,
                        and this content is not reviewed in advance by MariaDB. The views, information and opinions
                        expressed by this content do not necessarily represent those of MariaDB or any other party.
                    </div>
                </div>
            </section>

            
                <div id="right_bar" class="col-md-2">
                    
    
        
        <ul class="section_navigation well well-small hidden-xs hidden-sm">
            
                <li class="parent"><a href="/kb/en/mariadb-enterprise-server-11-4/">
                    ↑ MariaDB Enterprise Server 11.4 ↑
                </a>
                </li>
            
            
                
                    <li>
                        <a href="/kb/en/release-notes-for-mariadb-enterprise-server-11-4-4-2/">
                            
                            Release Notes for MariaDB Enterprise Server 11.4.4-2
                        </a>
                    </li>
                
            
                
                    <li class="active">
                        <span>Release Notes for MariaDB Enterprise Server 11.4.3-1</span>
                        
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/release-notes-for-mariadb-enterprise-server-11-4-0-1/">
                            
                            Release Notes for MariaDB Enterprise Server 11.4.0-1
                        </a>
                    </li>
                
            
        </ul>
    
    

                </div>
            
        </div>
    </div>
</div>

<!-- Footer -->
<footer id="footer">
    <div class="footer">
        <div class="container">
            <div class="row">
                <div class="col-xs-12">
                    <ul class="list-inline text-center footer-nav">
                        <li>
                            <h5>
                                <a href="https://mariadb.com/products" title="Products">Products</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/services" title="Services">Services</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/pricing" title="Pricing">Pricing</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/resources" title="Resources">Resources</a>
                            </h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/about-us" title="About MariaDB">About Us</a></h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/download" title="Download">Download MariaDB</a></h5>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="row row-10">
                
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div id="block-footerformcontact" class="block block-block-content block-block-contentd754ee1b-3cc9-40e7-9ef4-f504f1197fb1">
                        
                            <h5 style="font-weight: 400;">Subscribe to our newsletter!</h5>
                            <script src="//app-sj15.marketo.com/js/forms2/js/forms2.min.js"></script><form id="mktoForm_1498"></form>
                            <script>
                                <!--//--><![CDATA[// ><!--
                                MktoForms2.loadForm("//app-sj15.marketo.com", "573-PXI-984", 1498);
                                //--><!]]]]><![CDATA[>
                                //--><!]]>
                            </script>
                        
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div class="footer-copyright">
                        <div class="text-center">
                            <ul class="list-inline no-margin">
                                <li>
                                    <a href="/legal" title="Legal">Legal</a>
                                </li>
                                <li>
                                    <a href="/privacy-policy" title="Privacy Policy">Privacy Policy</a>
                                </li>
                                <li>
                                    <a href="/cookie-policy/" title="Cookies">Cookie Policy</a>
                                </li>
                            </ul>
                            <p>Copyright &copy; 2025 MariaDB. All rights reserved.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
</footer>
</div>

<div id="ajax_loading">
    <img src="/kb/static/images/ajax-loader.a51c5608d01a.gif" />
</div>

    <!-- Google Tag Manager -->
    <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-MK2847"
                      height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
            '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MK2847');</script>
    <!-- End Google Tag Manager -->

</body>

<script type="text/javascript" src="/kb/static/js/main.1587e3a666fc.js" charset="utf-8"></script>

</html>