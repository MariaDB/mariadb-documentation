<!DOCTYPE html>
<html>
<head data-cookie-domain=""
      data-cookie-path="/">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="apple-touch-icon" sizes="180x180" href="/kb/static/images/favicons/apple-touch-icon.159e713979be.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/kb/static/images/favicons/favicon-32x32.bc0ac1d5d11e.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/kb/static/images/favicons/favicon-16x16.5801f8f0f34e.png">
    <link rel="shortcut icon" href="/kb/static/images/favicons/favicon.d122d305dee4.ico" type="image/x-icon" />

    <title>Binary Log Formats - Source - MariaDB Knowledge Base</title>

    <link href="/kb/static/css/main.f7633538c846.css" rel="stylesheet" type="text/css" />

    
        <meta name="robots" content="noindex, nofollow">
    

    

    <!-- FB Open Graph tags -->
    <meta property="og:title" content="Binary Log Formats - Source" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://mariadb.com/kb/en/binary-log-formats/+source/" />
    <meta property="og:image" content="http://mariadb.comaskmonty-logo.png" />
    <meta property="og:site_name" content="MariaDB KnowledgeBase" />
    <meta property="fb:admins" content="514852603" />
    <meta property="og:description" content="" />

    <meta name="description" content="" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="//fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet"/>
    
</head>
<body class="mpkb nodes autoresize nodes_source jqui" id="nodes_source">





<div id="menu-mobile" class="visible-sm visible-xs">

    <div>
        <div id="mobile-close-menu" class="text-right">
            <a href="javascript:void(0)" title="Close Menu" id="back-main" class="toggle-menu">X<span></span></a>
        </div>
    </div>
    <div class="mainmenu-mobile">
        <ul class="ls-none ul-menu">
            <li data-sub="submenu5"><a class="open-form-search" href="/kb/search/" title="Search">Search </a></li>
            <li data-sub="submenu0"><a href="/products" title="Products">Products</a><span class="arrow-main"></span></li>
            <li data-sub="submenu1"><a href="/services" title="Services">Services</a><span class="arrow-main"></span></li>
            <li data-sub="submenu2"><a href="/resources" title="Resources">Resources</a><span class="arrow-main"></span></li>
            <li data-sub="submenu3"><a href="/about-us" title="About">About</a><span class="arrow-main"></span></li>
            <li data-sub="submenu4"><a href="/contact" title="Contact">Contact</a></li>
        </ul>
    </div>

    <div class="nav-top-mobile">
        <div class="select-box form">

            <ul class="inline-block-md mb-none top-nav">
                <li>

                </li>
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/binary-log-formats/+source/"> Login</a>
                    </li>
                
            </ul>



        </div>
        <p class="text-center copyright">Copyright &copy; 2025 MariaDB. All rights reserved.</p>
    </div>
</div>
<div class="violator-wrap d-none" id="top_violator">
    <div class="container">
        <div class="row">
            <div class="col-xs-12 col-sm-12">
                <div class="violator-outer">
                    <div class="violator-inner">
                        <div class="row">
                            <div class="col-xs-12 col-sm-9 col-lg-7 col-lg-offset-2" id="top_violator_content">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="content-link" target="_blank" rel="nofollow noreferrer">
                                    <span>The Ultimate Guide to High Availability with MariaDB</span>
                                </a>
                            </div>
                            <div class="col-xs-12 col-sm-3" id="top_violator_cta">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="btn btn-mariadb" target="_blank" rel="nofollow noreferrer">Download Now</a>
                            </div>
                        </div>
                    </div>
                    <button type="button" class="btn btn-link close-btn">
                        <svg xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 24 24" width="15px" height="15px"><path d="M 4.9902344 3.9902344 A 1.0001 1.0001 0 0 0 4.2929688 5.7070312 L 10.585938 12 L 4.2929688 18.292969 A 1.0001 1.0001 0 1 0 5.7070312 19.707031 L 12 13.414062 L 18.292969 19.707031 A 1.0001 1.0001 0 1 0 19.707031 18.292969 L 13.414062 12 L 19.707031 5.7070312 A 1.0001 1.0001 0 0 0 18.980469 3.9902344 A 1.0001 1.0001 0 0 0 18.292969 4.2929688 L 12 10.585938 L 5.7070312 4.2929688 A 1.0001 1.0001 0 0 0 4.9902344 3.9902344 z"/></svg>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="wrapper">
<div id="top-nav">
    <div class="container">
        <ul class="hidden-sm hidden-xs" >
            <li><a href="https://mariadb.com/kb/">Knowledge Base</a></li>
            <li><a href="https://mariadb.com/contact/">Contact</a></li>
            
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/binary-log-formats/+source/" rel="nofollow">Login</a>
                    </li>
                
            
            
            <li id="search-form">
                <form action="/kb/en/+search/" method="get" id="search-block-form" accept-charset="UTF-8">
                    <input id="search" title="Enter the terms you wish to search for."
                           placeholder="Search . . ." type="text"
                           name="q" value="" size="15" maxlength="128" class="form-text"
                           data-autocomplete-url="/kb/en/+search/autocomplete/">
                    <input type="hidden" name="quick" value="1" />
                    <input type="hidden" name="source" value="kb" />
                </form>
            </li>
            <li><a id="search-toggler" href="/kb/search/">Search</a></li>
            
        </ul>
    </div>
</div>
<div id="navbar-bottom" class="navbar">
    <div class="container">
        
        
        
        
        <div class="row">
            <div class="col-md-3 col-sm-9 col-xs-9">
                <a class="brand" href="/" title="MariaDB">
                    <img src="/kb/static/images/logo-2018-black.95f5978ae14d.png">
                </a>
            </div>
            <div class="col-md-9 hidden-sm hidden-xs">
                <div class="main-menu">
                    <ul id="main-menu" class="nav navbar-nav inline-block-sm">
    <li class="has-sub full-menu">
        <a href="/products" title="Products">Products</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/solutions" title="Solutions">Solutions</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/resources" title="Resources">Resources</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/about-us" title="Company">Company</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/pricing" title="Pricing">Pricing</a>
    </li>
    
    <li class="">
        <a class="button electric-eel small top-bar-right-download" href="/downloads/">Download</a>
    </li>
</ul>
                </div>
            </div>
            <div class="col-md-3 visible-sm visible-xs col-sm-3 col-xs-3 ps-rv">
                <div class="navbar-header text-right pull-right">
                    <button type="button" class="menu-control toggle-menu" id="open-menu">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="main">
    <div class="container">
        

        <div id="subheader1" class="clearfix">
            <div class="pull-left">
                
                <div id="breadcrumbs" class="breadcrumb">
                    <a href="/kb/en/">Knowledge Base</a>
                    


    
    » <a class="crumb" href="/kb/en/documentation/">MariaDB Server Documentation</a>
    

    
    » <a class="crumb" href="/kb/en/mariadb-administration/">MariaDB Administration</a>
    

    
    » <a class="crumb" href="/kb/en/server-monitoring-logs/">Server Monitoring &amp; Logs</a>
    

    
    » <a class="crumb" href="/kb/en/binary-log/">Binary Log</a>
    


    » <a class="node_link crumb" href="/kb/en/binary-log-formats/">Binary Log Formats</a>


                </div>
                
            </div>
        </div>
    </div>
    <div class="container" id="container-main">
        <div class="row">
            
            
                
                <aside id="sidebar-first" class="sidebar col-md-2 hidden-xs hidden-sm hidden-print">
                    
                        
                        <ul id="category_menu" class="nav nav-pills nav-stacked">
                            <li><a href="/kb/en/">Home</a></li>
                            
                                
                                    <li><a href="/kb/en/+questions/">Open Questions</a></li>
                                
                                <li><a href="/kb/en/documentation/">MariaDB Server</a></li>
                                <li><a href="/kb/en/maxscale/">MariaDB MaxScale</a></li>
                                <li><a href="/kb/en/mariadb-columnstore/">MariaDB ColumnStore</a></li>
                                <li><a href="/kb/en/connectors/">Connectors</a></li>
                            

                        </ul>
                    

                    
                        <div>
    

<div class="well well-small box actions"><div>

        <a class="btn btn-block btn-small" href="/kb/en/binary-log-formats/">Return to article</a>
    
</div>
</div>

</div>
                    

                    

































                </aside>
            
            
            
                
            
            
            <section id="content" class="limited_width col-md-10 clearfix">
                
                    <h1>Binary Log Formats - Source</h1>
                

                



                <div>
                    

    

    
    <div class="revision_info">
        <dl class="table">
            <dt>Revision</dt>
            <dd><a href="/kb/en/binary-log-formats/+r/147444/">147444</a></dd>
            <dt>User</dt>
            <dd>
<span class="user" id="user-1368">
<a href="/kb/user/id/1368" title="Ian Gilfillan">Ian Gilfillan</a>
</span></dd>
            <dt>Date</dt>
            <dd>

<span class="datetime" title="2025-02-17 09:18">2025-02-17 09:18</span></dd>
        </dl>
    </div>
    


    

    
        
        <textarea id="answer_source" class="creole_source autogrow">&lt;&lt;toc&gt;&gt;

== Supported Binary Log Formats

There are three supported formats for [[binary-log|binary log]] events:

* Statement-Based Logging
* Row-Based Logging
* Mixed Logging

Regardless of the format, [[binary-log|binary log]] events are always stored in a binary format, rather than in plain text. MariaDB includes the [[mariadb-binlog]] utility that can be used to output [[binary-log|binary log]] events in a human-readable format.

You may want to set the binary log format in the following cases:

* If you execute single statements that update many rows, then statement-based logging will be more efficient than row-based logging for the replica to download.
* If you execute many statements that don&#39;t affect any rows, then row-based logging will be more efficient than statement-based logging for the replica to download.
* If you execute statements that take a long time to complete, but they ultimately only insert, update, or delete a few rows in the table, then row-based logging will be more efficient than statement-based logging for the replica to apply.

The default is [[binary-log-formats/#mixed-logging|mixed logging]] which is replication-safe and requires less storage space than [[binary-log-formats/#row-based-logging|row logging]].

The storage engine API also allows storage engines to set or limit the logging format, which helps reduce errors with replicating between primaries and replicas with different storage engines.

=== Statement-Based Logging

In MariaDB 10.2.3 and before, statement-based logging was the default. [[binary-log-formats/#mixed-logging|Mixed logging]] is now the default.

When statement-based logging is enabled, statements are logged to the [[binary-log|binary log]] exactly as they were executed. Temporary tables created on the primary will also be created on the replica.
This mode is only recommended where one needs to keep the binary log as small as possible, the primary and replica have identical data (including using the same storage engines for all tables), and all functions being used are deterministic (repeatable with the same arguments). 
Statements and tables using timestamps or auto_increment are safe to use with statement-based logging.

This mode can be enabled by setting the [[replication-and-binary-log-server-system-variables#binlog_format|binlog_format]] system variable to ##STATEMENT##.

In certain cases when it would be impossible to execute the statement on the replica, the server will switch to
row-based logging for the statement. Some cases of this are:
* When replication has been changed from row-based to statement-based and a statement uses data from a temporary table created during row-based mode.  In this case, the temporary tables are not stored on the replica, so row logging is the only alternative.
* [[alter-table|ALTER TABLE]] of a table using a storage engine that stores data remotely, such as the [[s3-storage-engine|S3 storage engine]], to another storage engine.
* One is using [[sequences|SEQUENCEs]] in the statement or the [[create-table|CREATE TABLE]] definition.

In certain cases, a statement may not be deterministic, and therefore not safe for [[replication]]. If MariaDB determines that an unsafe statement has been executed, then it will issue a warning. For example:

&lt;&lt;code&gt;&gt;
[Warning] Unsafe statement written to the binary log using statement format since 
  BINLOG_FORMAT = STATEMENT. The statement is unsafe because it uses a LIMIT clause. This 
  is unsafe because the set of rows included cannot be predicted.
&lt;&lt;/code&gt;&gt;

See [[unsafe-statements-for-statement-based-replication|Unsafe Statements for Statement-based Replication]] for more information.

If you need to execute non-deterministic statements, then it is safer to use mixed logging or row-based.

==== Things to be aware of with statement-based logging
Note that some tables, like temporary tables created in row mode, does not support statement based logging (as the data is not in the binary log).  Any statement that uses a table that does not support statement logging will use row based logging. This is to ensure that the data on master and the slave are consistent.

=== Mixed Logging

Mixed logging is the default binary log format.

When mixed logging is enabled, the server uses a combination of statement-based logging and row-based logging. Statement-based logging is used where possible, but when the server determines a statement may not be safe for statement-based logging, it will use row-based logging instead. See [[unsafe-statements-for-statement-based-replication/#unsafe-statements|Unsafe Statements for Statement-based Replication: Unsafe Statements]] for a list of unsafe statements.

During one transaction, some statements may be logged with row logging while others are logged with statement-based logging.

This mode can be enabled by setting the [[replication-and-binary-log-server-system-variables#binlog_format|binlog_format]] system variable to ##MIXED##.

=== Row-Based Logging

When row-based logging is enabled, DML statements are **not** logged to the [[binary-log|binary log]]. Instead, each insert, update, or delete performed by the statement for each row is logged to the [[binary-log|binary log]] separately. DDL statements are still logged to the [[binary-log|binary log]].

Row-based logging uses more storage than the other log formats but is the safest to use. In practice [[binary-log-formats/#mixed-logging|mixed logging]] should be as safe.

If one wants to be able to see the original query that was logged, one can enable [[annotate_rows_event|annotated rows events]], that is shown with [[mariadb-binlog]], with [[replication-and-binary-log-server-system-variables/#binlog_annotate_row_events|--binlog-annotate-row-events]]. This option is on by default.

This mode can be enabled by setting the [[replication-and-binary-log-server-system-variables#binlog_format|binlog_format]] system variable to ##ROW##.

==== Things to be aware of with row-based logging
When using row base logging, some statement works different on the master.
* DELETE FROM table_name
** In row base mode the table will always use deletion row-by-row which can take a long time if the table is big.  It can also use a lot of space in the binary log.
** In STATEMENT or MIXED mode, [[truncate]] will be used, if possible (no triggers, no foreign keys etc).  This is much faster and uses less space in the binary log.

== Compression of the Binary Log

[[compressing-events-to-reduce-size-of-the-binary-log|Compression of the binary log]] can be used with any of the binary log formats, but the best results come from using mixed or row-based logging. You can enable compression by using the [[replication-and-binary-log-server-system-variables/#log_bin_compress|--log_bin_compress]]  startup option.

== Configuring the Binary Log Format

The format for [[binary-log|binary log]] events can be configured by setting the [[replication-and-binary-log-server-system-variables#binlog_format|binlog_format]] system variable. If you have the [[grant/#global-privileges|SUPER]] privilege, then you can change it dynamically with [[set/#global-session|SET GLOBAL]]. For example:

&lt;&lt;code&gt;&gt;
SET GLOBAL binlog_format=&#39;ROW&#39;;
&lt;&lt;/code&gt;&gt;

You can also change it dynamically for just a specific session with [[set/#global-session|SET SESSION]]. For example:

&lt;&lt;code&gt;&gt;
SET SESSION binlog_format=&#39;ROW&#39;;
&lt;&lt;/code&gt;&gt;

It can also be set in a server [[configuring-mariadb-with-option-files/#option-groups|option group]] in an [[configuring-mariadb-with-option-files|option file]] prior to starting up the server. For example:

&lt;&lt;code&gt;&gt;
[mariadb]
...
binlog_format=ROW
&lt;&lt;/code&gt;&gt;

&lt;&lt;style class=&#34;greenbox&#34;&gt;&gt;
Be careful when changing the binary log format when using [[replication]]. When you change the binary log format on a server, it only changes the format for that server. Changing the binary log format on a primary has no effect on the replica&#39;s binary log format. This can cause replication to give inconsistent results or to fail. 
&lt;&lt;/style&gt;&gt;

&lt;&lt;style class=&#34;greenbox&#34;&gt;&gt;
Be careful changing the binary log format dynamically when the server is a replica and [[parallel-replication|parallel replication]] is enabled. If you change the global value dynamically, then that does not also affect the session values of any currently running threads. This can cause problems with [[parallel-replication|parallel replication]], because the [[replication-threads/#worker-threads|worker threads]] will remain running even after [[stop-slave|STOP SLAVE]] is executed. This can be worked around by resetting the [[replication-and-binary-log-server-system-variables#slave_parallel_threads|slave_parallel_threads]] system variable. For example:

&lt;&lt;code&gt;&gt;
STOP SLAVE;
SET GLOBAL slave_parallel_threads=0;
SET GLOBAL binlog_format=&#39;ROW&#39;;
SET GLOBAL slave_parallel_threads=4;
START SLAVE
&lt;&lt;/code&gt;&gt;
&lt;&lt;/style&gt;&gt;

== Effect of the Binary Log Format on Replicas

In MariaDB 10.0.22 and later, a replica will apply any events it gets from the primary, regardless of the binary log format. The [[replication-and-binary-log-server-system-variables#binlog_format|binlog_format]] system variable only applies to normal (not replicated) updates.

&lt;&lt;style class=&#34;graybox&#34;&gt;&gt;
If you are running MySQL or an older MariaDB than 10.0.22, you should be aware of that if you are running the replica in ##binlog_format=STATEMENT## mode, the replica will stop if the primary is used with ##binlog_format## set to anything else than ##STATEMENT##.
&lt;&lt;/style&gt;&gt;

The binary log format is upwards-compatible. This means replication should always work if the replica is the same or a newer version of MariaDB than the primary.

== The mysql Database

Statements that affect the ##mysql## database can be logged in a different way to that expected.

If the mysql database is edited directly, logging is performed as expected according to the [[replication-and-binary-log-server-system-variables#binlog_format|binlog_format]]. Statements that directly edit the mysql database include [[INSERT]], [[UPDATE]], [[DELETE]], [[REPLACE]], [[DO]], [[load-data-infile|LOAD DATA INFILE]], [[SELECT]], and [[truncate-table|TRUNCATE TABLE]].

If the ##mysql## database is edited indirectly, statement logging is used regardless of [[replication-and-binary-log-server-system-variables#binlog_format|binlog_format]] setting. Statements editing the ##mysql## database indirectly include [[GRANT]], [[REVOKE]], [[set-password|SET PASSWORD]], [[rename-user|RENAME USER]], [[ALTER]], [[DROP]] and [[CREATE]] (except for the situation described below). 

CREATE TABLE ... SELECT can use a combination of logging formats. The [[create-table|CREATE TABLE]] portion of the statement is logged using statement-based logging, while the [[SELECT]] portion is logged according to the value of ##binlog_format##.

== See Also
* [[setting-up-replication|Setting up replication]]
* [[compressing-events-to-reduce-size-of-the-binary-log|Compressing the binary log]]</textarea>
    


                    <div id="content_disclaimer" class="graybox">
                        Content reproduced on this site is the property of its respective owners,
                        and this content is not reviewed in advance by MariaDB. The views, information and opinions
                        expressed by this content do not necessarily represent those of MariaDB or any other party.
                    </div>
                </div>
            </section>

            
        </div>
    </div>
</div>

<!-- Footer -->
<footer id="footer">
    <div class="footer">
        <div class="container">
            <div class="row">
                <div class="col-xs-12">
                    <ul class="list-inline text-center footer-nav">
                        <li>
                            <h5>
                                <a href="https://mariadb.com/products" title="Products">Products</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/solutions" title="Solutions">Solutions</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/resources" title="Resources">Resources</a>
                            </h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/about-us" title="About MariaDB">Company</a></h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/pricing" title="Pricing">Pricing</a>
                            </h5>
                        </li>
                        
                        
                        <li>
                            <h5><a href="https://mariadb.com/downloads" title="Download">Download MariaDB</a></h5>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="row row-10">
                
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div id="block-footerformcontact" class="block block-block-content block-block-contentd754ee1b-3cc9-40e7-9ef4-f504f1197fb1">
                        
                            <h5 style="font-weight: 400;">Subscribe to our newsletter!</h5>
                            <script src="//app-sj15.marketo.com/js/forms2/js/forms2.min.js"></script><form id="mktoForm_1498"></form>
                            <script>
                                <!--//--><![CDATA[// ><!--
                                MktoForms2.loadForm("//app-sj15.marketo.com", "573-PXI-984", 1498);
                                //--><!]]]]><![CDATA[>
                                //--><!]]>
                            </script>
                        
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div class="footer-copyright">
                        <div class="text-center">
                            <ul class="list-inline no-margin">
                                <li>
                                    <a href="/legal" title="Legal">Legal</a>
                                </li>
                                <li>
                                    <a href="/privacy-policy" title="Privacy Policy">Privacy Policy</a>
                                </li>
                                <li>
                                    <a href="/cookie-policy/" title="Cookies">Cookie Policy</a>
                                </li>
                            </ul>
                            <p>Copyright &copy; 2025 MariaDB. All rights reserved.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
</footer>
</div>

<div id="ajax_loading">
    <img src="/kb/static/images/ajax-loader.a51c5608d01a.gif" />
</div>

    <!-- Google Tag Manager -->
    <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-MK2847"
                      height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
            '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MK2847');</script>
    <!-- End Google Tag Manager -->

</body>

<script type="text/javascript" src="/kb/static/js/main.1587e3a666fc.js" charset="utf-8"></script>

</html>