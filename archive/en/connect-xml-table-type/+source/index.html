<!DOCTYPE html>
<html>
<head data-cookie-domain=""
      data-cookie-path="/">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="apple-touch-icon" sizes="180x180" href="/kb/static/images/favicons/apple-touch-icon.159e713979be.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/kb/static/images/favicons/favicon-32x32.bc0ac1d5d11e.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/kb/static/images/favicons/favicon-16x16.5801f8f0f34e.png">
    <link rel="shortcut icon" href="/kb/static/images/favicons/favicon.d122d305dee4.ico" type="image/x-icon" />

    <title>CONNECT XML Table Type - Source - MariaDB Knowledge Base</title>

    <link href="/kb/static/css/main.9a0d7dcebefd.css" rel="stylesheet" type="text/css" />

    
        <meta name="robots" content="noindex, nofollow">
    

    <!-- FB Open Graph tags -->
    <meta property="og:title" content="CONNECT XML Table Type - Source" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://mariadb.com/kb/en/connect-xml-table-type/+source/" />
    <meta property="og:image" content="http://mariadb.comaskmonty-logo.png" />
    <meta property="og:site_name" content="MariaDB KnowledgeBase" />
    <meta property="fb:admins" content="514852603" />
    <meta property="og:description" content="" />

    <meta name="description" content="" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="//fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet"/>
    
</head>
<body class="mpkb nodes autoresize nodes_source jqui" id="nodes_source">





<div id="menu-mobile" class="visible-sm visible-xs">

    <div>
        <div id="mobile-close-menu" class="text-right">
            <a href="javascript:void(0)" title="Close Menu" id="back-main" class="toggle-menu">X<span></span></a>
        </div>
    </div>
    <div class="mainmenu-mobile">
        <ul class="ls-none ul-menu">
            <li data-sub="submenu5"><a class="open-form-search" href="/kb/search/" title="Search">Search </a></li>
            <li data-sub="submenu0"><a href="/products" title="Products">Products</a><span class="arrow-main"></span></li>
            <li data-sub="submenu1"><a href="/services" title="Services">Services</a><span class="arrow-main"></span></li>
            <li data-sub="submenu2"><a href="/resources" title="Resources">Resources</a><span class="arrow-main"></span></li>
            <li data-sub="submenu3"><a href="/about-us" title="About">About</a><span class="arrow-main"></span></li>
            <li data-sub="submenu4"><a href="/contact" title="Contact">Contact</a></li>
        </ul>
    </div>

    <div class="nav-top-mobile">
        <div class="select-box form">

            <ul class="inline-block-md mb-none top-nav">
                <li>

                </li>
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/connect-xml-table-type/+source/"> Login</a>
                    </li>
                
            </ul>



        </div>
        <p class="text-center copyright">Copyright &copy; 2023 MariaDB. All rights reserved.</p>
    </div>
</div>
<div id="wrapper">
<div id="top-nav">
    <div class="container">
        <ul class="hidden-sm hidden-xs" >
            <li><a href="https://mariadb.com/kb/">Knowledge Base</a></li>
            <li><a href="https://mariadb.com/contact/">Contact</a></li>
            
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/connect-xml-table-type/+source/" rel="nofollow">Login</a>
                    </li>
                
            
            
            <li id="search-form">
                <form action="/kb/en/+search/" method="get" id="search-block-form" accept-charset="UTF-8">
                    <input id="search" title="Enter the terms you wish to search for."
                           placeholder="Search . . ." type="text"
                           name="q" value="" size="15" maxlength="128" class="form-text"
                           data-autocomplete-url="/kb/en/+search/autocomplete/">
                    <input type="hidden" name="quick" value="1" />
                    <input type="hidden" name="source" value="kb" />
                </form>
            </li>
            <li><a id="search-toggler" href="/kb/search/">Search</a></li>
            
        </ul>
    </div>
</div>
<div id="navbar-bottom" class="navbar">
    <div class="container">
        
        
        
        
        <div class="row">
            <div class="col-md-3 col-sm-9 col-xs-9">
                <a class="brand" href="/" title="MariaDB">
                    <img src="/kb/static/images/logo-2018-black.95f5978ae14d.png">
                </a>
            </div>
            <div class="col-md-9 hidden-sm hidden-xs">
                <div class="main-menu">
                    <ul id="main-menu" class="nav navbar-nav inline-block-sm">
    <li class="has-sub full-menu">
        <a href="/products" title="Products">Products</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/services" title="Services">Services</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/pricing" title="Pricing">Pricing</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/resources" title="Resources">Resources</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/about-us" title="About Us">About Us</a>
    </li>
    <li class="">
        <a class="button electric-eel small top-bar-right-download" href="/downloads/">Download</a>
    </li>
</ul>
                </div>
            </div>
            <div class="col-md-3 visible-sm visible-xs col-sm-3 col-xs-3 ps-rv">
                <div class="navbar-header text-right pull-right">
                    <button type="button" class="menu-control toggle-menu" id="open-menu">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="main">
    <div class="container">
        

        <div id="subheader1" class="clearfix">
            <div class="pull-left">
                
                <div id="breadcrumbs" class="breadcrumb">
                    <a href="/kb/en/">Knowledge Base</a>
                    


    
    » <a class="crumb" href="/kb/en/documentation/">MariaDB Server Documentation</a>
    

    
    » <a class="crumb" href="/kb/en/columns-storage-engines-and-plugins/">Columns, Storage Engines, and Plugins</a>
    

    
    » <a class="crumb" href="/kb/en/storage-engines/">Storage Engines</a>
    

    
    » <a class="crumb" href="/kb/en/connect/">CONNECT</a>
    

    
    » <a class="crumb" href="/kb/en/connect-table-types/">CONNECT Table Types</a>
    


    » <a class="node_link crumb" href="/kb/en/connect-xml-table-type/">CONNECT XML Table Type</a>


                </div>
                
            </div>
        </div>
    </div>
    <div class="container" id="container-main">
        <div class="row">
            
            
                
                <aside id="sidebar-first" class="sidebar col-md-2 hidden-xs hidden-sm hidden-print">
                    
                        
                        <ul id="category_menu" class="nav nav-pills nav-stacked">
                            <li><a href="/kb/en/">Home</a></li>
                            
                                
                                    <li><a href="/kb/en/+questions/">Open Questions</a></li>
                                
                                <li><a href="/kb/en/documentation/">MariaDB Server</a></li>
                                <li><a href="/kb/en/maxscale/">MariaDB MaxScale</a></li>
                                <li><a href="/kb/en/mariadb-columnstore/">MariaDB ColumnStore</a></li>
                                <li><a href="/kb/en/connectors/">Connectors</a></li>
                            

                        </ul>
                    

                    
                        <div>
    

<div class="well well-small box actions"><div>

        <a class="btn btn-block btn-small" href="/kb/en/connect-xml-table-type/">Return to article</a>
    
</div>
</div>

</div>
                    

                    

































                </aside>
            
            
            
                
            
            
            <section id="content" class="limited_width col-md-10 clearfix">
                
                    <h1>CONNECT XML Table Type - Source</h1>
                

                



                <div>
                    

    

    
    <div class="revision_info">
        <dl class="table">
            <dt>Revision</dt>
            <dd><a href="/kb/en/connect-xml-table-type/+r/115663/">115663</a></dd>
            <dt>User</dt>
            <dd>
<span class="user" id="user-1368">
<a href="/kb/user/id/1368" title="Ian Gilfillan">Ian Gilfillan</a>
</span></dd>
            <dt>Date</dt>
            <dd>

<span class="datetime" title="2022-04-27 18:41">2022-04-27 18:41</span></dd>
        </dl>
    </div>
    


    

    
        
        <textarea id="answer_source" class="creole_source autogrow">&lt;&lt;toc&gt;&gt;
== Overview
CONNECT supports tables represented by XML files. For these tables, the
standard input/output functions of the operating system are not used but the
parsing and processing of the file is delegated to a specialized library.
Currently two such systems are supported: libxml2, a part of the GNOME
framework, but which does not require GNOME and, on Windows, MS-DOM (DOMDOC), the Microsoft standard support of XML documents.

DOMDOC is the default for the Windows version of CONNECT and libxml2 is always
used on other systems. On Windows the choice can be specified using the XMLSUP
[[create-table|CREATE TABLE]] list option, for instance specifying
##option_list=&#39;xmlsup=libxml2&#39;##.

== Creating XML tables
First of all, it must be understood that XML is a very general language used to
encode data having any structure. In particular, the tag hierarchy in an XML
file describes a tree structure of the data. For instance, consider the file:

&lt;&lt;code lang=xml inline=false&gt;&gt;
&lt;?xml version=&#34;1.0&#34; encoding=&#34;ISO-8859-1&#34;?&gt;
&lt;BIBLIO SUBJECT=&#34;XML&#34;&gt;
   &lt;BOOK ISBN=&#34;9782212090819&#34; LANG=&#34;fr&#34; SUBJECT=&#34;applications&#34;&gt;
      &lt;AUTHOR&gt;
         &lt;FIRSTNAME&gt;Jean-Christophe&lt;/FIRSTNAME&gt;
         &lt;LASTNAME&gt;Bernadac&lt;/LASTNAME&gt;
      &lt;/AUTHOR&gt;
      &lt;AUTHOR&gt;
         &lt;FIRSTNAME&gt;François&lt;/FIRSTNAME&gt;
         &lt;LASTNAME&gt;Knab&lt;/LASTNAME&gt;
      &lt;/AUTHOR&gt;
      &lt;TITLE&gt;Construire une application XML&lt;/TITLE&gt;
      &lt;PUBLISHER&gt;
         &lt;NAME&gt;Eyrolles&lt;/NAME&gt;
         &lt;PLACE&gt;Paris&lt;/PLACE&gt;
      &lt;/PUBLISHER&gt;
      &lt;DATEPUB&gt;1999&lt;/DATEPUB&gt;
   &lt;/BOOK&gt;
   &lt;BOOK ISBN=&#34;9782840825685&#34; LANG=&#34;fr&#34; SUBJECT=&#34;applications&#34;&gt;
      &lt;AUTHOR&gt;
         &lt;FIRSTNAME&gt;William J.&lt;/FIRSTNAME&gt;
         &lt;LASTNAME&gt;Pardi&lt;/LASTNAME&gt;
      &lt;/AUTHOR&gt;
      &lt;TRANSLATOR PREFIX=&#34;adapté de l&#39;anglais par&#34;&gt;
         &lt;FIRSTNAME&gt;James&lt;/FIRSTNAME&gt;
         &lt;LASTNAME&gt;Guerin&lt;/LASTNAME&gt;
      &lt;/TRANSLATOR&gt;
      &lt;TITLE&gt;XML en Action&lt;/TITLE&gt;
      &lt;PUBLISHER&gt;
         &lt;NAME&gt;Microsoft Press&lt;/NAME&gt;
         &lt;PLACE&gt;Paris&lt;/PLACE&gt;
      &lt;/PUBLISHER&gt;
      &lt;DATEPUB&gt;1999&lt;/DATEPUB&gt;
   &lt;/BOOK&gt;
&lt;/BIBLIO&gt;
&lt;&lt;/code&gt;&gt;

It represents data having the structure:

&lt;&lt;code&gt;&gt;
                               &lt;BIBLIO&gt;
                        __________|_________
                       |                    |
            &lt;BOOK:ISBN,LANG,SUBJECT&gt;        |
         ______________|_______________     |
        |        |         |           |    |
     &lt;AUTHOR&gt; &lt;TITLE&gt; &lt;PUBLISHER&gt; &lt;DATEPUB&gt; |
    ____|____            ___|____           |
   |    |    |          |        |          |
&lt;FIRST&gt; | &lt;LAST&gt;     &lt;NAME&gt;   &lt;PLACE&gt;       |
        |                                   |
     &lt;AUTHOR&gt;                   &lt;BOOK:ISBN,LANG,SUBJECT&gt;
    ____|____         ______________________|__________________
   |         |       |            |         |        |         |
&lt;FIRST&gt;   &lt;LAST&gt;  &lt;AUTHOR&gt; &lt;TRANSLATOR&gt; &lt;TITLE&gt; &lt;PUBLISHER&gt; &lt;DATEPUB&gt;
                _____|_        ___|___            ___|____
               |       |      |       |          |        |
            &lt;FIRST&gt; &lt;LAST&gt; &lt;FIRST&gt; &lt;LAST&gt;     &lt;NAME&gt;   &lt;PLACE&gt;
&lt;&lt;/code&gt;&gt;

This structure seems at first view far from being tabular. However, modern
database management systems, including MariaDB, implement something close to the
relational model and work on tables that are structurally not hierarchical but
tabular with rows and columns.

Nevertheless, CONNECT can do it. Of course, it cannot guess what you want to
extract from the XML structure, but gives you the possibility to specify it
when you create the table&lt;&lt;ref&gt;&gt;CONNECT does not claim to be able to deal with
any XML document. Besides, those that can usefully be processed for data
analysis are likely to have a structure that can easily be transformed into a
table.&lt;&lt;/ref&gt;&gt;.

Let us take a first example. Suppose you want to make a table from the above
document, displaying the node contents.

For this, you can define a table //xsamptag// as:

&lt;&lt;code lang=mysql inline=false&gt;&gt;
create table xsamptag (
  AUTHOR char(50),
  TITLE char(32),
  TRANSLATOR char(40),
  PUBLISHER char(40),
  DATEPUB int(4))
engine=CONNECT table_type=XML file_name=&#39;Xsample.xml&#39;;
&lt;&lt;/code&gt;&gt;

It will be displayed as:

&lt;&lt;style class=&#34;darkheader-nospace-borders&#34;&gt;&gt;
|= AUTHOR                  |= TITLE                         |= TRANSLATOR  |= PUBLISHER            |= DATEPUB
| Jean-Christophe Bernadac | Construire une application XML | &lt;null&gt;         | Eyrolles Paris        | 1999
| William J. Pardi         | XML en Action                  | James Guerin | Microsoft Press Paris | 1999
&lt;&lt;/style&gt;&gt;

Let us try to understand what happened. By default the column names correspond
to tag names. Because this file is rather simple, CONNECT was able to default
the top tag of the table as the root node ##&lt;BIBLIO&gt;## of the file, and the row
tags as the ##&lt;BOOK&gt;## children of the table tag. In a more complex file, this
should have been specified, as we will see later. Note that we didn&#39;t have to worry
about the sub-tags such as ##&lt;FIRSTNAME&gt;## or ##&lt;LASTNAME&gt;## because CONNECT
automatically retrieves the entire text contained in a tag and its
sub-tags&lt;&lt;ref&gt;&gt;With libxml2, sub tags text can be separated by 0 or several
blanks depending on the structure and indentation of the data file.&lt;&lt;/ref&gt;&gt;.

&lt;&lt;style class=&#34;bluebox&#34;&gt;&gt;
Only the first author of the first book appears. This is because only the first
occurrence of a column tag has been retrieved so the result has a proper
tabular structure. We will see later what we can do about that.
&lt;&lt;/style&gt;&gt;

How can we retrieve the values specified by attributes? By using a //Coltype//
table option to specify the default column type. The value ‘@’ means that
column names match attribute names. Therefore, we can retrieve them by creating
a table such as:

&lt;&lt;code lang=mysql inline=false&gt;&gt;
create table xsampattr (
  ISBN char(15),
  LANG char(2),
  SUBJECT char(32))
engine=CONNECT table_type=XML file_name=&#39;Xsample.xml&#39;
option_list=&#39;Coltype=@&#39;;
&lt;&lt;/code&gt;&gt;

This table returns the following:

&lt;&lt;style class=&#34;darkheader-nospace-borders&#34;&gt;&gt;
|= ISBN         |= LANG |= SUBJECT
| 9782212090819 |  fr   |  applications
| 9782840825685 |  fr   |  applications
&lt;&lt;/style&gt;&gt;

Now to define a table that will give us all the previous information, we must
specify the column type for each column. Because in the next statement the
column type defaults to Node, the //field_format// column parameter was used to
indicate which columns are attributes:

From Connect 1.7.0002
&lt;&lt;sql&gt;&gt;
create table xsamp (
ISBN char(15) xpath=&#39;@&#39;,
LANG char(2) xpath=&#39;@&#39;,
SUBJECT char(32) xpath=&#39;@&#39;,
AUTHOR char(50),
TITLE char(32),
TRANSLATOR char(40),
PUBLISHER char(40),
DATEPUB int(4))
engine=CONNECT table_type=XML file_name=&#39;Xsample.xml&#39;
tabname=&#39;BIBLIO&#39; option_list=&#39;rownode=BOOK&#39;;
&lt;&lt;/sql&gt;&gt;

Before Connect 1.7.0002
&lt;&lt;code lang=mysql inline=false&gt;&gt;
create table xsamp (
  ISBN char(15) field_format=&#39;@&#39;,
  LANG char(2) field_format=&#39;@&#39;,
  SUBJECT char(32) field_format=&#39;@&#39;,
  AUTHOR char(50),
  TITLE char(32),
  TRANSLATOR char(40),
  PUBLISHER char(40),
  DATEPUB int(4))
engine=CONNECT table_type=XML file_name=&#39;Xsample.xml&#39;
tabname=&#39;BIBLIO&#39; option_list=&#39;rownode=BOOK&#39;;
&lt;&lt;/code&gt;&gt;

Once done, we can enter the query:

&lt;&lt;code lang=mysql inline=false&gt;&gt;
select subject, lang, title, author from xsamp;
&lt;&lt;/code&gt;&gt;

This will return the following result:

&lt;&lt;style class=&#34;darkheader-nospace-borders&#34;&gt;&gt;
|= SUBJECT     |= LANG |= TITLE                         |= AUTHOR
| applications | fr    | Construire une application XML | Jean-Christophe Bernadac
| applications | fr    | XML en Action                  | William J. Pardi
&lt;&lt;/style&gt;&gt;

Note that we have been lucky. Because unlike SQL, XML is case sensitive and the
column names have matched the node names only because the column names were given
in upper case. Note also that the order of the columns in the table could have
been different from the order in which the nodes appear in the XML file.

== Using Xpaths with XML tables

Xpath is used by XML to locate and retrieve nodes. The table&#39;s main node Xpath is specified by the ##tabname## option. If just the node name is given, CONNECT constructs an Xpath such as ##‘//BIBLIO’## in the example above that should retrieve the ##BIBLIO## node wherever it is within the XML file. 

The row nodes are by default the children of the table node. However, for instance to eliminate some children nodes that are not real row nodes, the row node name can be specified using the ##rownode## sub-option of the ##option_list## option.

The field_format options we used above can be specified to locate more
precisely where and what information to retrieve using an Xpath-like
syntax. For instance:

From Connect 1.7.0002
&lt;&lt;sql&gt;&gt;
create table xsampall (
isbn char(15) xpath=&#39;@ISBN&#39;,
language char(2) xpath=&#39;@LANG&#39;,
subject char(32) xpath=&#39;@SUBJECT&#39;,
authorfn char(20) xpath=&#39;AUTHOR/FIRSTNAME&#39;,
authorln char(20) xpath=&#39;AUTHOR/LASTNAME&#39;,
title char(32) xpath=&#39;TITLE&#39;,
translated char(32) xpath=&#39;TRANSLATOR/@PREFIX&#39;,
tranfn char(20) xpath=&#39;TRANSLATOR/FIRSTNAME&#39;,
tranln char(20) xpath=&#39;TRANSLATOR/LASTNAME&#39;,
publisher char(20) xpath=&#39;PUBLISHER/NAME&#39;,
location char(20) xpath=&#39;PUBLISHER/PLACE&#39;,
year int(4) xpath=&#39;DATEPUB&#39;)
engine=CONNECT table_type=XML file_name=&#39;Xsample.xml&#39;
tabname=&#39;BIBLIO&#39; option_list=&#39;rownode=BOOK&#39;;
&lt;&lt;/sql&gt;&gt;

Before Connect 1.7.0002
&lt;&lt;code lang=mysql inline=false&gt;&gt;
create table xsampall (
  isbn char(15) field_format=&#39;@ISBN&#39;,
  language char(2) field_format=&#39;@LANG&#39;,
  subject char(32) field_format=&#39;@SUBJECT&#39;,
  authorfn char(20) field_format=&#39;AUTHOR/FIRSTNAME&#39;,
  authorln char(20) field_format=&#39;AUTHOR/LASTNAME&#39;,
  title char(32) field_format=&#39;TITLE&#39;,
  translated char(32) field_format=&#39;TRANSLATOR/@PREFIX&#39;,
  tranfn char(20) field_format=&#39;TRANSLATOR/FIRSTNAME&#39;,
  tranln char(20) field_format=&#39;TRANSLATOR/LASTNAME&#39;,
  publisher char(20) field_format=&#39;PUBLISHER/NAME&#39;,
  location char(20) field_format=&#39;PUBLISHER/PLACE&#39;,
  year int(4) field_format=&#39;DATEPUB&#39;)
engine=CONNECT table_type=XML file_name=&#39;Xsample.xml&#39;
tabname=&#39;BIBLIO&#39; option_list=&#39;rownode=BOOK&#39;;
&lt;&lt;/code&gt;&gt;

This very flexible column parameter serves several purposes:

* To specify the tag name, or the attribute name if different from the column
  name.
* To specify the type (tag or attribute) by a prefix of &#39;@&#39; for attributes.
* To specify the path for sub-tags using the &#39;/&#39; character.

This path is always relative to the current context (the column top node) and
cannot be specified as an absolute path from the document root, therefore a
leading &#39;/&#39; cannot be used. The path cannot be variable in node names or depth,
therefore using &#39;{{{//}}}&#39; is not allowed.

The query:

&lt;&lt;code lang=mysql inline=false&gt;&gt;
select isbn, title, translated, tranfn, tranln, location from
    xsampall where translated is not null;
&lt;&lt;/code&gt;&gt;

replies:

&lt;&lt;style class=&#34;darkheader-nospace-borders&#34;&gt;&gt;
|= ISBN         |= TITLE        |= TRANSLATED             |= TRANFN |= TRANLN |= LOCATION
| 9782840825685 | XML en Action | adapté de l&#39;anglais par | James   | Guerin  | Paris
&lt;&lt;/style&gt;&gt;

=== Libxml2 default name space issue
An issue with libxml2 is that some files can declare a default name space in their root node. Because Xpath only searches in that name space, the nodes will not be found if they are not prefixed. If this happens, specify the tabname option as an Xpath ignoring the current name space:
&lt;&lt;code&gt;&gt;
TABNAME=&#34;//*[local-name()=&#39;BIBLIO&#39;]&#34;
&lt;&lt;/code&gt;&gt;
This must also be done for the default of specified Xpath of the not attribute columns. For instance:
&lt;&lt;code&gt;&gt;
title char(32) field_format=&#34;*[local-name()=&#39;TITLE&#39;]&#34;,
&lt;&lt;/code&gt;&gt;
Note: This raises an error (and is useless anyway) with DOMDOC.

=== Direct access on XML tables
Direct access is available on XML tables. This means that XML tables can be
sorted and used in joins, even in the one-side of the join.

However, building a permanent index is not yet implemented. It is unclear whether this can be useful. Indeed, the DOM implementation that is used to access these tables firstly parses the whole file and constructs a node tree in memory. This may often be the longest part of the process, so the use of an index would not be of great value. Note also that this limits the XML files to a reasonable size. Anyway, when speed is important, this table type is not the best to use. Therefore, in these cases, it is probably better to convert the file to another type by inserting the XML table into another table of a more appropriate type for performance.

=== Accessing tags with namespaces
With the Windows DOMDOC support, this can be done using the prefix in the tabname column option and/or xpath column option. For instance, given the file gns.xml:

&lt;&lt;code&gt;&gt;
&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;
&lt;gpx xmlns:gns=&#34;http:dummy&#34;&gt;
&lt;gns:trkseg&gt;
&lt;trkpt lon=&#34;-121.9822235107421875&#34; lat=&#34;37.3884925842285156&#34;&gt;
&lt;gns:ele&gt;6.610851287841797&lt;/gns:ele&gt;
&lt;time&gt;2014-04-01T14:54:05.000Z&lt;/time&gt;
&lt;/trkpt&gt;
&lt;trkpt lon=&#34;-121.9821929931640625&#34; lat=&#34;37.3885803222656250&#34;&gt;
&lt;ele&gt;6.787827968597412&lt;/ele&gt;
&lt;time&gt;2014-04-01T14:54:08.000Z&lt;/time&gt;
&lt;/trkpt&gt;
&lt;trkpt lon=&#34;-121.9821624755859375&#34; lat=&#34;37.3886299133300781&#34;&gt;
&lt;ele&gt;6.771987438201904&lt;/ele&gt;
&lt;time&gt;2014-04-01T14:54:10.000Z&lt;/time&gt;
&lt;/trkpt&gt;
&lt;/gns:trkseg&gt;
&lt;/gpx&gt;
&lt;&lt;/code&gt;&gt;

and the defined CONNECT table:

&lt;&lt;sql&gt;&gt;
CREATE TABLE xgns (
`lon` double(21,16) NOT NULL `xpath`=&#39;@&#39;,
`lat` double(20,16) NOT NULL `xpath`=&#39;@&#39;,
`ele` double(21,16) NOT NULL `xpath`=&#39;gns:ele&#39;,
`time` datetime date_format=&#34;YYYY-MM-DD &#39;T&#39; hh:mm:ss &#39;.000Z&#39;&#34;
) 
  ENGINE=CONNECT DEFAULT CHARSET=latin1 `table_type`=XML 
  `file_name`=&#39;gns.xml&#39; tabname=&#39;gns:trkseg&#39; option_list=&#39;xmlsup=domdoc&#39;;
&lt;&lt;/sql&gt;&gt;

&lt;&lt;sql&gt;&gt;
select * from xgns;
&lt;&lt;/sql&gt;&gt;
Displays:

&lt;&lt;style class=&#34;darkheader-nospace-borders&#34;&gt;&gt;
|= lon |= lat |= ele |= time |
| -121,982223510742 | 37,3884925842285 | 6,6108512878418 | 01/04/2014 14:54:05 |
| -121,982192993164 | 37,3885803222656 | 0 | 01/04/2014 14:54:08 |
| -121,982162475586 | 37,3886299133301 | 0 | 01/04/2014 14:54:10 | 
&lt;&lt;/style&gt;&gt;

Only the prefixed ‘ele’ tag is recognized.

However, this does not work with the libxml2 support. The solution is then to use a function ignoring the name space:

&lt;&lt;sql&gt;&gt;
CREATE TABLE xgns2 (
`lon` double(21,16) NOT NULL `xpath`=&#39;@&#39;,
`lat` double(20,16) NOT NULL `xpath`=&#39;@&#39;,
`ele` double(21,16) NOT NULL `xpath`=&#34;*[local-name()=&#39;ele&#39;]&#34;,
`time` datetime date_format=&#34;YYYY-MM-DD &#39;T&#39; hh:mm:ss &#39;.000Z&#39;&#34;
) 
  ENGINE=CONNECT DEFAULT CHARSET=latin1 `table_type`=XML 
  `file_name`=&#39;gns.xml&#39; tabname=&#34;*[local-name()=&#39;trkseg&#39;]&#34; option_list=&#39;xmlsup=libxml2&#39;;
&lt;&lt;/sql&gt;&gt;

Then :
&lt;&lt;sql&gt;&gt;
select * from xgns2;
&lt;&lt;/sql&gt;&gt;
Displays:

&lt;&lt;style class=&#34;darkheader-nospace-borders&#34;&gt;&gt;
|= lon |= lat |= ele |= time |
| -121,982223510742 | 37,3884925842285 | 6,6108512878418 | 01/04/2014 14:54:05 |
| -121,982192993164 | 37,3885803222656 | 6.7878279685974 | 01/04/2014 14:54:08 |
| -121,982162475586 | 37,3886299133301 | 6.7719874382019 | 01/04/2014 14:54:10 | 
&lt;&lt;/style&gt;&gt;

This time, all ‘ele` tags are recognized. This solution does not work with DOMDOC.

== Having Columns defined by Discovery
It is possible to let the MariaDB discovery process do the job of column specification. When columns are not defined in the [[create-table|CREATE TABLE]] statement, CONNECT endeavours to analyze the XML file and to provide the column specifications. This is possible only for true XML tables, but not for HTML tables.

For instance, the //xsamp// table could have been created specifying:

&lt;&lt;sql&gt;&gt;
create table xsamp
engine=CONNECT table_type=XML file_name=&#39;Xsample.xml&#39;
tabname=&#39;BIBLIO&#39; option_list=&#39;rownode=BOOK&#39;;
&lt;&lt;/sql&gt;&gt;

Let’s check how it was actually specified using the SHOW CREATE TABLE statement:

&lt;&lt;sql&gt;&gt;
CREATE TABLE `xsamp` (
  `ISBN` char(13) NOT NULL `FIELD_FORMAT`=&#39;@&#39;,
  `LANG` char(2) NOT NULL `FIELD_FORMAT`=&#39;@&#39;,
  `SUBJECT` char(12) NOT NULL `FIELD_FORMAT`=&#39;@&#39;,
  `AUTHOR` char(24) NOT NULL,
  `TRANSLATOR` char(12) DEFAULT NULL,
  `TITLE` char(30) NOT NULL,
  `PUBLISHER` char(21) NOT NULL,
  `DATEPUB` char(4) NOT NULL
) ENGINE=CONNECT DEFAULT CHARSET=latin1 `TABLE_TYPE`=&#39;XML&#39; 
  `FILE_NAME`=&#39;E:/Data/Xml/Xsample.xml&#39; `TABNAME`=&#39;BIBLIO&#39; `OPTION_LIST`=&#39;rownode=BOOK&#39;;
&lt;&lt;/sql&gt;&gt;

It is equivalent except for the column sizes that have been calculated from the file as the maximum length of the corresponding column when it was a normal value. Also, all columns are specified as type [[char|CHAR]] because XML does not provide information about the node content data type. Nullable is set to true if the column is missing in some rows.

If a more complex definition is desired, you can ask CONNECT to analyse the XPATH up to a given level using the level option in the option list. The level value is the number of nodes that are taken in the XPATH. For instance:

&lt;&lt;sql&gt;&gt;
create table xsampall
engine=CONNECT table_type=XML file_name=&#39;Xsample.xml&#39;
tabname=&#39;BIBLIO&#39; option_list=&#39;rownode=BOOK,Level=1&#39;;
&lt;&lt;/sql&gt;&gt;

This will define the table as:

From Connect 1.7.0002
&lt;&lt;code lang=sql wrap=true&gt;&gt;
CREATE TABLE `xsampall` (
  `ISBN` char(13) NOT NULL `XPATH`=&#39;@&#39;,
  `LANG` char(2) NOT NULL `XPATH`=&#39;@&#39;,
  `SUBJECT` char(12) NOT NULL `XPATH`=&#39;@&#39;,
  `AUTHOR_FIRSTNAME` char(15) NOT NULL `XPATH`=&#39;AUTHOR/FIRSTNAME&#39;,
  `AUTHOR_LASTNAME` char(8) NOT NULL `XPATH`=&#39;AUTHOR/LASTNAME&#39;,
  `TRANSLATOR_PREFIX` char(24) DEFAULT NULL `XPATH`=&#39;TRANSLATOR/@PREFIX&#39;,
  `TRANSLATOR_FIRSTNAME` char(7) DEFAULT NULL `XPATH`=&#39;TRANSLATOR/FIRSTNAME&#39;,
  `TRANSLATOR_LASTNAME` char(6) DEFAULT NULL `XPATH`=&#39;TRANSLATOR/LASTNAME&#39;,
  `TITLE` char(30) NOT NULL,
  `PUBLISHER_NAME` char(15) NOT NULL `XPATH`=&#39;PUBLISHER/NAME&#39;,
  `PUBLISHER_PLACE` char(5) NOT NULL `XPATH`=&#39;PUBLISHER/PLACE&#39;,
  `DATEPUB` char(4) NOT NULL
) ENGINE=CONNECT DEFAULT CHARSET=latin1 `TABLE_TYPE`=&#39;XML&#39; `FILE_NAME`=&#39;Xsample.xml&#39; `TABNAME`=&#39;BIBLIO&#39; `OPTION_LIST`=&#39;rownode=BOOK,Depth=1&#39;;
&lt;&lt;/sql&gt;&gt;


Before Connect 1.7.0002
&lt;&lt;sql&gt;&gt;
CREATE TABLE `xsampall` (
  `ISBN` char(13) NOT NULL `FIELD_FORMAT`=&#39;@&#39;,
  `LANG` char(2) NOT NULL `FIELD_FORMAT`=&#39;@&#39;,
  `SUBJECT` char(12) NOT NULL `FIELD_FORMAT`=&#39;@&#39;,
  `AUTHOR_FIRSTNAME` char(15) NOT NULL `FIELD_FORMAT`=&#39;AUTHOR/FIRSTNAME&#39;,
  `AUTHOR_LASTNAME` char(8) NOT NULL `FIELD_FORMAT`=&#39;AUTHOR/LASTNAME&#39;,
  `TRANSLATOR_PREFIX` char(24) DEFAULT NULL `FIELD_FORMAT`=&#39;TRANSLATOR/@PREFIX&#39;,
  `TRANSLATOR_FIRSTNAME` char(7) DEFAULT NULL `FIELD_FORMAT`=&#39;TRANSLATOR/FIRSTNAME&#39;,
  `TRANSLATOR_LASTNAME` char(6) DEFAULT NULL `FIELD_FORMAT`=&#39;TRANSLATOR/LASTNAME&#39;,
  `TITLE` char(30) NOT NULL,
  `PUBLISHER_NAME` char(15) NOT NULL `FIELD_FORMAT`=&#39;PUBLISHER/NAME&#39;,
  `PUBLISHER_PLACE` char(5) NOT NULL `FIELD_FORMAT`=&#39;PUBLISHER/PLACE&#39;,
  `DATEPUB` char(4) NOT NULL
) ENGINE=CONNECT DEFAULT CHARSET=latin1 `TABLE_TYPE`=&#39;XML&#39; `FILE_NAME`=&#39;Xsample.xml&#39; 
  `TABNAME`=&#39;BIBLIO&#39; `OPTION_LIST`=&#39;rownode=BOOK,Level=1&#39;;
&lt;&lt;/sql&gt;&gt;

This method can be used as a quick way to make a “template” table definition that can later be edited to make the desired definition. In particular, column names are constructed from all the nodes of their path in order to have distinct column names. This can be manually edited to have the desired names, provided their XPATH is not modified.

To have a preview of how columns will be defined, you can use a catalog table like this:

&lt;&lt;sql&gt;&gt;
create table xsacol
engine=CONNECT table_type=XML file_name=&#39;Xsample.xml&#39;
tabname=&#39;BIBLIO&#39; option_list=&#39;rownode=BOOK,Level=1&#39; catfunc=col;
&lt;&lt;/sql&gt;&gt;

And when asking:

&lt;&lt;sql&gt;&gt;
select column_name Name, type_name Type, column_size Size, nullable, xpath from xsacol;
&lt;&lt;/sql&gt;&gt;

You get the description of what the table columns will be:

&lt;&lt;style class=&#34;darkheader-nospace-borders&#34;&gt;&gt;
|= Name |= Type |= Size |= nullable |= xpath |
| ISBN | CHAR | 13 | 0 | @ | 
| LANG | CHAR | 2 | 0 | @ |
| SUBJECT | CHAR | 12 | 0 | @ |
| AUTHOR_FIRSTNAME | CHAR | 15 | 0 | AUTHOR/FIRSTNAME | 
| AUTHOR_LASTNAME | CHAR | 8 | 0 | AUTHOR/LASTNAME | 
| TRANSLATOR_PREFIX | CHAR | 24 | 1 | TRANSLATOR/@PREFIX | 
| TRANSLATOR_FIRSTNAME | CHAR | 7 | 1 | TRANSLATOR/FIRSTNAME |
| TRANSLATOR_LASTNAME | CHAR | 6 | 1 | TRANSLATOR/LASTNAME | 
| TITLE | CHAR | 30 | 0 |  | 
| PUBLISHER_NAME | CHAR | 15 | 0 | PUBLISHER/NAME |
| PUBLISHER_PLACE | CHAR | 5 | 0 | PUBLISHER/PLACE |
| DATEPUB | CHAR | 4 | 0 | |
&lt;&lt;/style&gt;&gt;

== Write operations on XML tables
You can freely use the Update, Delete and Insert commands with XML tables.
However, you must understand that the format of the updated or inserted data
follows the specifications of the table you created, not the ones of the
original source file. For instance, let us suppose we insert a new book using
the //xsamp// table (not the //xsampall// table) with the command:

&lt;&lt;code lang=mysql inline=false&gt;&gt;
insert into xsamp
  (isbn, lang, subject, author, title, publisher,datepub)
  values (&#39;9782212090529&#39;,&#39;fr&#39;,&#39;général&#39;,&#39;Alain Michard&#39;,
         &#39;XML, Langage et Applications&#39;,&#39;Eyrolles Paris&#39;,1998);
&lt;&lt;/code&gt;&gt;

Then if we ask:

&lt;&lt;code lang=mysql inline=false&gt;&gt;
select subject, author, title, translator, publisher from xsamp;
&lt;&lt;/code&gt;&gt;

Everything seems correct when we get the result:

&lt;&lt;style class=&#34;darkheader-nospace-borders&#34;&gt;&gt;
|= SUBJECT |= AUTHOR |= TITLE |= TRANSLATOR |= PUBLISHER
| applications | Jean-Christophe Bernadac | Construire une application XML | | Eyrolles Paris
| applications | William J. Pardi         | XML en Action | James Guerin | Microsoft Press Paris
| général      | Alain Michard            | XML, Langage et Applications | | Eyrolles Paris
&lt;&lt;/style&gt;&gt;

However if we enter the apparently equivalent query on the //xsampall// table,
based on the same file:

&lt;&lt;code lang=mysql inline=false&gt;&gt;
select subject,
concat(authorfn, &#39; &#39;, authorln) author , title,
concat(tranfn, &#39; &#39;, tranln) translator,
concat(publisher, &#39; &#39;, location) publisher from xsampall;
&lt;&lt;/code&gt;&gt;

this returns an apparently wrong answer:

&lt;&lt;style class=&#34;darkheader-nospace-borders&#34;&gt;&gt;
|= SUBJECT |= AUTHOR |= TITLE |= TRANSLATOR |= PUBLISHER
| applications | Jean-Christophe Bernadac | Construire une application XML | | Eyrolles Paris
| applications | William J. Pardi | XML en Action     | James Guerin | Microsoft Press Paris
| général      |                  | XML, Langage et Applications |   | |
&lt;&lt;/style&gt;&gt;

What happened here? Simply, because we used the //xsamp// table to do the
Insert, what has been inserted within the XML file had the structure described
for //xsamp//:

&lt;&lt;code lang=xml inline=false&gt;&gt;
   &lt;BOOK ISBN=&#34;9782212090529&#34; LANG=&#34;fr&#34; SUBJECT=&#34;général&#34;&gt;
      &lt;AUTHOR&gt;Alain Michard&lt;/AUTHOR&gt;
      &lt;TITLE&gt;XML, Langage et Applications&lt;/TITLE&gt;
      &lt;TRANSLATOR&gt;&lt;/TRANSLATOR&gt;
      &lt;PUBLISHER&gt;Eyrolles Paris&lt;/PUBLISHER&gt;
      &lt;DATEPUB&gt;1998&lt;/DATEPUB&gt;
   &lt;/BOOK&gt;
&lt;&lt;/code&gt;&gt;

CONNECT cannot &#34;invent&#34; sub-tags that are not part of the //xsamp// table.
Because these sub-tags do not exist, the //xsampall// table cannot retrieve the
information that should be attached to them. If we want to be able to query the
XML file by all the defined tables, the correct way to insert a new book to the
file is to use the //xsampall// table, the only one that addresses all the
components of the original document:

&lt;&lt;code lang=mysql inline=false&gt;&gt;
delete from xsamp where isbn = &#39;9782212090529&#39;;

insert into xsampall (isbn, language, subject, authorfn, authorln,
      title, publisher, location, year)
   values(&#39;9782212090529&#39;,&#39;fr&#39;,&#39;général&#39;,&#39;Alain&#39;,&#39;Michard&#39;,
      &#39;XML, Langage et Applications&#39;,&#39;Eyrolles&#39;,&#39;Paris&#39;,1998);
&lt;&lt;/code&gt;&gt;

Now the added book, in the XML file, will have the required structure:

&lt;&lt;code lang=xml inline=false&gt;&gt;
   &lt;BOOK ISBN=&#34;9782212090529&#34; LANG=&#34;fr&#34; SUBJECT=&#34;général&#34;&gt;
      &lt;AUTHOR&gt;
         &lt;FIRSTNAME&gt;Alain&lt;/FIRSTNAME&gt;
         &lt;LASTNAME&gt;Michard&lt;/LASTNAME&gt;
      &lt;/AUTHOR&gt;
      &lt;TITLE&gt;XML, Langage et Applications&lt;/TITLE&gt;
      &lt;PUBLISHER&gt;
         &lt;NAME&gt;Eyrolles&lt;/NAME&gt;
         &lt;PLACE&gt;Paris&lt;/PLACE&gt;
      &lt;/PUBLISHER&gt;
      &lt;DATEPUB&gt;1998&lt;/DATEPUB&gt;
   &lt;/BOOK&gt;
&lt;&lt;/code&gt;&gt;

**Note:** We used a column list in the Insert statements when creating the table to avoid generating a ##&lt;TRANSLATOR&gt;##
node with sub-nodes, all containing null values (this works on Windows only).

== Multiple nodes in the XML document
Let us come back to the above example XML file. We have seen that the author
node can be &#34;multiple&#34; meaning that there can be more than one author of a
book. What can we do to get the complete information fitting the relational
model? CONNECT provides you with two possibilities, but is restricted to only one
such multiple node per table.

The first and most challenging one is to return as many rows than there are
authors, the other columns being repeated as if we had make a join between the
author column and the rest of the table. To achieve this, simply specify the
“multiple” node name and the “expand” option when creating the table. For
instance, we can create the //xsamp2// table like this:

&lt;&lt;code lang=mysql inline=false&gt;&gt;
create table xsamp2 (
  ISBN char(15) field_format=&#39;@&#39;,
  LANG char(2) field_format=&#39;@&#39;,
  SUBJECT char(32) field_format=&#39;@&#39;,
  AUTHOR char(40),
  TITLE char(32),
  TRANSLATOR char(32),
  PUBLISHER char(32),
  DATEPUB int(4))
engine=CONNECT table_type=XML file_name=&#39;Xsample.xml&#39;
tabname=&#39;BIBLIO&#39;
option_list=&#39;rownode=BOOK,Expand=1,Mulnode=AUTHOR,Limit=2&#39;;
&lt;&lt;/code&gt;&gt;

In this statement, the Limit option specifies the maximum number of values that will be expanded. If not specified, it defaults to ##10##. Any values above the limit will be ignored and a warning message issued&lt;&lt;ref&gt;&gt;This may cause some rows to be lost because an eventual where clause on the “multiple” column is applied only on the limited number of retrieved rows.&lt;&lt;/ref&gt;&gt;. Now you can enter a query such as:

&lt;&lt;code lang=mysql inline=false&gt;&gt;
select isbn, subject, author, title from xsamp2;
&lt;&lt;/code&gt;&gt;

This will retrieve and display the following result:

&lt;&lt;style class=&#34;darkheader-nospace-borders&#34;&gt;&gt;
|= ISBN |= SUBJECT |= AUTHOR |= TITLE
| 9782212090819 | applications | Jean-Christophe Bernadac | Construire une application XML
| 9782212090819 | applications | François Knab            | Construire une application XML
| 9782840825685 | applications | William J. Pardi         | XML en Action
| 9782212090529 | général      | Alain Michard            | XML, Langage et Applications
&lt;&lt;/style&gt;&gt;

In this case, this is as if the table had four rows. However if we enter the query:

&lt;&lt;code lang=mysql inline=false&gt;&gt;
select isbn, subject, title, publisher from xsamp2;
&lt;&lt;/code&gt;&gt;

this time the result will be:

&lt;&lt;style class=&#34;darkheader-nospace-borders&#34;&gt;&gt;
|= ISBN         |= SUBJECT     |= TITLE                         |= PUBLISHER
| 9782212090819 | applications | Construire une application XML | Eyrolles Paris
| 9782840825685 | applications | XML en Action                  | Microsoft Press Paris
| 9782212090529 | général      | XML, Langage et Applications   | Eyrolles Paris
&lt;&lt;/style&gt;&gt;

Because the author column does not appear in the query, the corresponding row
was not expanded.  This is somewhat strange because this would have been
different if we had been working on a table of a different type. However, it is
closer to the relational model for which there should not be two identical rows
(tuples) in a table. Nevertheless, you should be aware of this somewhat erratic
behavior. For instance:

&lt;&lt;code lang=mysql inline=false&gt;&gt;
select count(*) from xsamp2;                /* Replies 3 */
select count(author) from xsamp2;           /* Replies 4 */
select count(isbn) from xsamp2;             /* Replies 3 */
select isbn, subject, title, publisher from xsamp2 where author &lt;&gt; &#39;&#39;;
&lt;&lt;/code&gt;&gt;

This last query replies:

&lt;&lt;style class=&#34;darkheader-nospace-borders&#34;&gt;&gt;
|= ISBN         |= SUBJECT     |= TITLE                         |= PUBLISHER
| 9782212090819 | applications | Construire une application XML | Eyrolles Paris
| 9782212090819 | applications | Construire une application XML | Eyrolles Paris
| 9782840825685 | applications | XML en Action                  | Microsoft Press Paris
| 9782212090529 | général      | XML, Langage et Applications   | Eyrolles Paris
&lt;&lt;/style&gt;&gt;

Even though the author column does not appear in the result, the corresponding row was
expanded because the multiple column was used in the where clause.

== Intermediate multiple node
The &#34;multiple&#34; node can be an intermediate node. If we want to do the same
expanding with the //xsampall// table, there will be nothing more to do. The
 //xsampall2// table can be created with:

From Connect 1.7.0002
&lt;&lt;sql&gt;&gt;
create table xsampall2 (
isbn char(15) xpath=&#39;@ISBN&#39;,
language char(2) xpath=&#39;@LANG&#39;,
subject char(32) xpath=&#39;@SUBJECT&#39;,
authorfn char(20) xpath=&#39;AUTHOR/FIRSTNAME&#39;,
authorln char(20) xpath=&#39;AUTHOR/LASTNAME&#39;,
title char(32) xpath=&#39;TITLE&#39;,
translated char(32) xpath=&#39;TRANSLATOR/@PREFIX&#39;,
tranfn char(20) xpath=&#39;TRANSLATOR/FIRSTNAME&#39;,
tranln char(20) xpath=&#39;TRANSLATOR/LASTNAME&#39;,
publisher char(20) xpath=&#39;PUBLISHER/NAME&#39;,
location char(20) xpath=&#39;PUBLISHER/PLACE&#39;,
year int(4) xpath=&#39;DATEPUB&#39;)
engine=CONNECT table_type=XML file_name=&#39;Xsample.xml&#39;
tabname=&#39;BIBLIO&#39; option_list=&#39;rownode=BOOK,Expand=1,Mulnode=AUTHOR,Limit=2&#39;;
&lt;&lt;/sql&gt;&gt;

Before Connect 1.7.0002
&lt;&lt;code lang=mysql inline=false&gt;&gt;
create table xsampall2 (
  isbn char(15) field_format=&#39;@ISBN&#39;,
  language char(2) field_format=&#39;@LANG&#39;,
  subject char(32) field_format=&#39;@SUBJECT&#39;,
  authorfn char(20) field_format=&#39;AUTHOR/FIRSTNAME&#39;,
  authorln char(20) field_format=&#39;AUTHOR/LASTNAME&#39;,
  title char(32) field_format=&#39;TITLE&#39;,
  translated char(32) field_format=&#39;TRANSLATOR/@PREFIX&#39;,
  tranfn char(20) field_format=&#39;TRANSLATOR/FIRSTNAME&#39;,
  tranln char(20) field_format=&#39;TRANSLATOR/LASTNAME&#39;,
  publisher char(20) field_format=&#39;PUBLISHER/NAME&#39;,
  location char(20) field_format=&#39;PUBLISHER/PLACE&#39;,
  year int(4) field_format=&#39;DATEPUB&#39;)
engine=CONNECT table_type=XML file_name=&#39;Xsample.xml&#39;
tabname=&#39;BIBLIO&#39;
option_list=&#39;rownode=BOOK,Expand=1,Mulnode=AUTHOR,Limit=2&#39;;
&lt;&lt;/code&gt;&gt;

The only difference is that the &#34;multiple&#34; node is an intermediate node in the
path. The resulting table can be seen with a query such as:

&lt;&lt;code lang=mysql inline=false&gt;&gt;
select subject, language lang, title, authorfn first, authorln
    last, year from xsampall2;
&lt;&lt;/code&gt;&gt;

This query displays:

&lt;&lt;style class=&#34;darkheader-nospace-borders&#34;&gt;&gt;
|= SUBJECT     |= LANG |= TITLE                         |= FIRST          |= LAST    |= YEAR
| applications | fr    | Construire une application XML | Jean-Christophe | Bernadac | 1999
| applications | fr    | Construire une application XML | François        | Knab     | 1999
| applications | fr    | XML en Action                  | William J.      | Pardi    | 1999
| général      | fr    | XML, Langage et Applications   | Alain           | Michard  | 1998
&lt;&lt;/style&gt;&gt;

These composite tables, half array half tree, reserve some surprises for us when
updating, deleting from or inserting into them. Insert just cannot generate
this structure; if two rows are inserted with just a different author, two book
nodes will be generated in the XML file. Delete always deletes one book node
and all its children nodes even if specified against only one author. Update is
more complicated:

&lt;&lt;code lang=mysql inline=false&gt;&gt;
update xsampall2 set authorfn = &#39;Simon&#39; where authorln = &#39;Knab&#39;;
update xsampall2 set year = 2002 where authorln = &#39;Bernadac&#39;;
update xsampall2 set authorln = &#39;Mercier&#39; where year = 2002;
&lt;&lt;/code&gt;&gt;

After these three updates, the first two responding &#34;Affected rows: 1&#34; and the
last one responding &#34;Affected rows: 2&#34;, the last query answers:

&lt;&lt;style class=&#34;darkheader-nospace-borders&#34;&gt;&gt;
|= subject     |= lang |= title                         |= first          |= last    |= year
| applications | fr    | Construire une application XML | Jean-Christophe | Mercier  | 2002
| applications | fr    | Construire une application XML | François        | Knab     | 2002
| applications | fr    | XML en Action                  | William J.      | Pardi    | 1999
| général      | fr    | XML, Langage et Applications   | Alain           | Michard  | 1998
&lt;&lt;/style&gt;&gt;

What must be understood here is that the Update modifies node values in the XML file, not cell values in the relational table. The first update worked normally. The second update changed the year value of the book and this shows for the two expanded rows because there is only one DATEPUB node for that book. Because the third update applies to a row having a certain date value, both author names were updated.

== Making a List of Multiple Values
Another way to see multiple values is to ask CONNECT to make a comma separated
list of the multiple node values. This time, it can only be done if the
&#34;multiple&#34; node is not intermediate. For example, we can modify the //xsamp2//
table definition by:

&lt;&lt;code lang=mysql inline=false&gt;&gt;
alter table xsamp2 option_list=&#39;rownode=BOOK,Mulnode=AUTHOR,Limit=3&#39;;
&lt;&lt;/code&gt;&gt;

This time &#39;Expand&#39; is not specified, and Limit gives the maximum number of
items in the list. Now if we enter the query:

&lt;&lt;code lang=mysql inline=false&gt;&gt;
select isbn, subject, author &#34;AUTHOR(S)&#34;, title from xsamp2;
&lt;&lt;/code&gt;&gt;

We will get the following result:

&lt;&lt;style class=&#34;darkheader-nospace-borders&#34;&gt;&gt;
|= ISBN         |= SUBJECT     |= AUTHOR(S)                              |= TITLE
| 9782212090819 | applications | Jean-Christophe Bernadac, François Knab | Construire une application XML
| 9782840825685 | applications | William J. Pardi                        | XML en Action
| 9782212090529 | général      | Alain Michard                           | XML, Langage et Applications
&lt;&lt;/style&gt;&gt;

Note that updating the &#34;multiple&#34; column is not possible because CONNECT does
not know which of the nodes to update.

This could not have been done with the //xsampall2// table because the author
node is intermediate in the path, and making two lists, one of first names and
another one of last names would not make sense anyway.

=== What if a table contains several multiple nodes
This can be handled by creating several tables on the same file, each
containing only one multiple node and constructing the desired result using
joins.

== Support of HTML Tables
Most tables included in HTML documents cannot be processed by CONNECT because the HTML
language is often not compatible with the syntax of XML. In particular, XML
requires all open tags to be matched by a closing tag while it is sometimes
optional in HTML. This is often the case concerning column tags.

However, you can meet tables that respect the XML syntax but have some of the
features of HTML tables. For instance:

&lt;&lt;code lang=xml inline=false&gt;&gt;
&lt;?xml version=&#34;1.0&#34;?&gt;
&lt;Beers&gt;
  &lt;table&gt;
    &lt;th&gt;&lt;td&gt;Name&lt;/td&gt;&lt;td&gt;Origin&lt;/td&gt;&lt;td&gt;Description&lt;/td&gt;&lt;/th&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;brandName&gt;Huntsman&lt;/brandName&gt;&lt;/td&gt;
      &lt;td&gt;&lt;origin&gt;Bath, UK&lt;/origin&gt;&lt;/td&gt;
      &lt;td&gt;&lt;details&gt;Wonderful hop, light alcohol&lt;/details&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;brandName&gt;Tuborg&lt;/brandName&gt;&lt;/td&gt;
      &lt;td&gt;&lt;origin&gt;Danmark&lt;/origin&gt;&lt;/td&gt;
      &lt;td&gt;&lt;details&gt;In small bottles&lt;/details&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/table&gt;
&lt;/Beers&gt;
&lt;&lt;/code&gt;&gt;

Here the different column tags are included in ##&lt;td&gt;&lt;/td&gt;## tags as for HTML
tables. You cannot just add this tag in the Xpath of the columns, because the
search is done on the first occurrence of each tag, and this would cause this
search to fail for all columns except the first one. This case is handled by
specifying the //Colnode// table option that gives the name of these column
tags, for example:

From Connect 1.7.0002
&lt;&lt;sql&gt;&gt;
create table beers (
`Name` char(16) xpath=&#39;brandName&#39;,
`Origin` char(16) xpath=&#39;origin&#39;,
`Description` char(32) xpath=&#39;details&#39;)
engine=CONNECT table_type=XML file_name=&#39;beers.xml&#39;
tabname=&#39;table&#39; option_list=&#39;rownode=tr,colnode=td&#39;;
&lt;&lt;/sql&gt;&gt;

Before Connect 1.7.0002
&lt;&lt;code lang=mysql inline=false&gt;&gt;
create table beers (
  `Name` char(16) field_format=&#39;brandName&#39;,
  `Origin` char(16) field_format=&#39;origin&#39;,
  `Description` char(32) field_format=&#39;details&#39;)
engine=CONNECT table_type=XML file_name=&#39;beers.xml&#39;
tabname=&#39;table&#39; option_list=&#39;rownode=tr,colnode=td&#39;;
&lt;&lt;/code&gt;&gt;

The table will be displayed as:

&lt;&lt;style class=&#34;darkheader-nospace-borders&#34;&gt;&gt;
|= Name    |= Origin  |= Description
| Huntsman | Bath, UK | Wonderful hop, light alcohol
| Tuborg   | Danmark  | In small bottles
&lt;&lt;/style&gt;&gt;

However, you can deal with tables even closer to the HTML model. For example
the //coffee.htm// file:

&lt;&lt;code lang=html inline=false&gt;&gt;
&lt;TABLE summary=&#34;This table charts the number of cups of coffe
                consumed by each senator, the type of coffee (decaf
                or regular), and whether taken with sugar.&#34;&gt;
  &lt;CAPTION&gt;Cups of coffee consumed by each senator&lt;/CAPTION&gt;
  &lt;TR&gt;
    &lt;TH&gt;Name&lt;/TH&gt;
    &lt;TH&gt;Cups&lt;/TH&gt;
    &lt;TH&gt;Type of Coffee&lt;/TH&gt;
    &lt;TH&gt;Sugar?&lt;/TH&gt;
  &lt;/TR&gt;
  &lt;TR&gt;
    &lt;TD&gt;T. Sexton&lt;/TD&gt;
    &lt;TD&gt;10&lt;/TD&gt;
    &lt;TD&gt;Espresso&lt;/TD&gt;
    &lt;TD&gt;No&lt;/TD&gt;
  &lt;/TR&gt;
  &lt;TR&gt;
    &lt;TD&gt;J. Dinnen&lt;/TD&gt;
    &lt;TD&gt;5&lt;/TD&gt;
    &lt;TD&gt;Decaf&lt;/TD&gt;
    &lt;TD&gt;Yes&lt;/TD&gt;
  &lt;/TR&gt;
&lt;/TABLE&gt;
&lt;&lt;/code&gt;&gt;

Here column values are directly represented by the TD tag text. You cannot
declare them as tags nor as attributes. In addition, they are not located using
their name but by their position within the row. Here is how to declare such a
table to CONNECT:

&lt;&lt;code lang=mysql inline=false&gt;&gt;
create table coffee (
  `Name` char(16),
  `Cups` int(8),
  `Type` char(16),
  `Sugar` char(4))
engine=connect table_type=XML file_name=&#39;coffee.htm&#39;
tabname=&#39;TABLE&#39; header=1 option_list=&#39;Coltype=HTML&#39;;
&lt;&lt;/code&gt;&gt;

You specify the fact that columns are located by position by setting the
 //Coltype// option to &#39;HTML&#39;. Each column position (0 based) will be the value
of the //flag// column parameter that is set by default in sequence. Now we are
able to display the table:

&lt;&lt;style class=&#34;darkheader-nospace-borders&#34;&gt;&gt;
|= Name     |= Cups |= Type    |= Sugar
| T. Sexton | 10    | Espresso | No
| J. Dinnen | 5     | Decaf    | Yes
&lt;&lt;/style&gt;&gt;

**Note 1:** We specified &#39;##header=n##&#39; in the create statement to indicate
that the first n rows of the table are not data rows and should be skipped.

**Note 2:** In this last example, we did not specify the node names using the
Rownode and Colnode options because when //Coltype// is set to &#39;HTML&#39; they
default to &#39;##Rownode=TR##&#39; and &#39;##Colnode=TD##&#39;.

**Note 3:** The //Coltype// option is a word only the first character of which
is significant. Recognized values are:

| T(ag) or N(ode)          | Column names match a tag name (the default).
| A(ttribute) or @         | Column names match an attribute name.
| H(tml) or C(ol) or P(os) | Column are retrieved by their position.

=== New file setting
Some create options are used only when creating a table on a new file, i. e.
when inserting into a file that does not exist yet. When specified, the
&#39;Header&#39; option will create a header row with the name of the table columns.
This is chiefly useful for HTML tables to be displayed on a web browser.

Some new list-options are used in this context:

| **Encoding**  | The encoding of the new document, defaulting to UTF-8.
| **Attribute** | A list of &#39;attname=attvalue&#39; separated by &#39;;&#39; to add to the table node.
| **HeadAttr**  | An attribute list to be added to the header row node.

Let us see for instance, the following create statement:

&lt;&lt;code lang=mysql inline=false&gt;&gt;
create table handlers (
  handler char(64),
  version char(20),
  author char(64),
  description char(255),
  maturity char(12))
engine=CONNECT table_type=XML file_name=&#39;handlers.htm&#39;
tabname=&#39;TABLE&#39; header=yes
option_list=&#39;coltype=HTML,encoding=ISO-8859-1,
attribute=border=1;cellpadding=5,headattr=bgcolor=yellow&#39;;
&lt;&lt;/code&gt;&gt;

Supposing the table file does not exist yet, the first insert into that table,
for instance by the following statement:

&lt;&lt;code lang=mysql inline=false&gt;&gt;
insert into handlers select plugin_name, plugin_version,
  plugin_author, plugin_description, plugin_maturity from
  information_schema.plugins where plugin_type = &#39;DAEMON&#39;;
&lt;&lt;/code&gt;&gt;

will generate the following file:

&lt;&lt;code lang=xml inline=false&gt;&gt;
&lt;?xml version=&#34;1.0&#34; encoding=&#34;ISO-8859-1&#34;?&gt;
&lt;!-- Created by CONNECT Version 3.05.0005 August 17, 2012 --&gt;
&lt;TABLE border=&#34;1&#34; cellpadding=&#34;5&#34;&gt;
  &lt;TR bgcolor=&#34;yellow&#34;&gt;
    &lt;TH&gt;handler&lt;/TH&gt;
    &lt;TH&gt;version&lt;/TH&gt;
    &lt;TH&gt;author&lt;/TH&gt;
    &lt;TH&gt;description&lt;/TH&gt;
    &lt;TH&gt;maturity&lt;/TH&gt;
  &lt;/TR&gt;
  &lt;TR&gt;
    &lt;TD&gt;Maria&lt;/TD&gt;
    &lt;TD&gt;1.5&lt;/TD&gt;
    &lt;TD&gt;Monty Program Ab&lt;/TD&gt;
    &lt;TD&gt;Compatibility aliases for the Aria engine&lt;/TD&gt;
    &lt;TD&gt;Gamma&lt;/TD&gt;
  &lt;/TR&gt;
&lt;/TABLE&gt;
&lt;&lt;/code&gt;&gt;

This file can be used to display the table on a web browser (encoding should be
##ISO-8859-x##)

&lt;&lt;style class=&#34;darkheader-nospace-borders&#34;&gt;&gt;
|= handler |= version |= author          |= description                              |= maturity
| Maria    | 1.5      | Monty Program Ab | Compatibility aliases for the Aria engine | Gamma
&lt;&lt;/style&gt;&gt;

**Note:** The XML document encoding is generally specified in the XML header
node and can be different from the DATA_CHARSET, which is always UTF-8 for XML
tables. Therefore the table DATA_CHARSET character set should be unspecified,
or specified as UTF8. The Encoding specification is useful only for new XML
files and ignored for existing files having their encoding already specified in
the header node.

== Notes
&lt;&lt;references&gt;&gt;</textarea>
    


                    <div id="content_disclaimer" class="graybox">
                        Content reproduced on this site is the property of its respective owners,
                        and this content is not reviewed in advance by MariaDB. The views, information and opinions
                        expressed by this content do not necessarily represent those of MariaDB or any other party.
                    </div>
                </div>
            </section>

            
        </div>
    </div>
</div>

<!-- Footer -->
<footer id="footer">
    <div class="footer">
        <div class="container">
            <div class="row row-10">
                <div class="col-md-2 col-xs-4 item">
                    <h5>
                        <a href="/products" title="Products">Products</a>
                    </h5>
                    <ul>
                        <li id="menu-item-7816" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-7816"><a href="https://mariadb.com/products/mariadb-platform/">MariaDB Platform</a></li>
                        <li id="menu-item-7815" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-7815"><a href="https://mariadb.com/products/skysql/">MariaDB SkySQL</a></li>
                        <li id="menu-item-4172" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4172"><a href="https://mariadb.com/pricing/">Pricing</a></li>
                        <li id="menu-item-4163" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4163"><a href="https://mariadb.com/downloads/">Download MariaDB</a></li>
                    </ul>
                </div>
                <div class="col-md-2 col-xs-4 item">
                    <h5>
                        <a href="/services" title="Services">Services</a>
                    </h5>
                    <ul>
                        <li id="menu-item-4169" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4169"><a href="https://mariadb.com/services/remote-dba/">Remote DBA</a></li>
                        <li id="menu-item-41691" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4169"><a href="https://mariadb.com/services/skydba/">SkyDBA</a></li>
                        <li id="menu-item-4167" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4167"><a href="https://mariadb.com/services/enterprise-architect/">Enterprise Architect</a></li>
                        <li id="menu-item-4170" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4170"><a href="https://mariadb.com/services/technical-support-services/">Technical Support</a></li>
                        <li id="menu-item-4168" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4168"><a href="https://mariadb.com/services/migration-practice/">Migration Practice</a></li>
                        <li id="menu-item-4166" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4166"><a href="https://mariadb.com/services/consulting/">Consulting</a></li>
                        <li id="menu-item-4171" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4171"><a href="https://mariadb.com/services/training/">Training</a></li>
                    </ul>
                </div>
                <div class="col-md-2 col-xs-4 item">
                    <h5>
                        <a href="/resources" title="Resources">Resources</a>
                    </h5>
                    <ul>
                        <li id="menu-item-41751" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4175"><a href="https://mariadb.com/docs/">Documentation</a></li>
                        <li id="menu-item-41752" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4175"><a href="https://mariadb.com/developers/">Developers</a></li>
                        <li id="menu-item-4175" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4175"><a href="https://mariadb.com/resources/blog/">Blog</a></li>
                        <li id="menu-item-5462" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-5462"><a href="https://support.mariadb.com">Support</a></li>
                        <li id="menu-item-6004" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-6004"><a href="https://mariadb.com/openworks/">OpenWorks</a></li>
                        <li id="menu-item-60041" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-6004"><a href="https://mariadb.com/resources/customer-stories/">Customer Stories</a></li>
                        <li id="menu-item-7817" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-7817"><a href="https://mariadb.com/resources/events/">Events</a></li>
                        <li id="menu-item-4177" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4177"><a href="https://mariadb.com/roadshow/">MariaDB Roadshow</a></li>
                    </ul>
                </div>
                <div class="visible-xs visible-sm clear"></div>
                <div class="col-md-2 col-xs-5 item">
                    <h5>
                        <a href="/about-us" title="About MariaDB">About</a>
                    </h5>
                    <ul>
                        <li id="menu-item-4173" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4173"><a href="https://mariadb.com/contact/">Contact</a></li>
                        <li id="menu-item-4161" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4161"><a href="https://mariadb.com/about-us/leadership/">Leadership</a></li>
                        <li id="menu-item-4162" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4162"><a href="https://mariadb.com/about-us/partners/">Partners</a></li>
                        <li id="menu-item-4174" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4174"><a href="https://mariadb.com/newsroom/">Newsroom</a></li>
                        <li id="menu-item-4160" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4160"><a href="https://mariadb.com/about-us/investors/">Investors</a></li>
                        <li id="menu-item-4159" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4159"><a href="https://mariadb.com/about-us/careers/">Careers</a></li>
                        <li id="menu-item-41591" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4159"><a href="https://mariadb.com/trust/">Trust Center</a></li>
                        <li id="menu-item-41592" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4159"><a href="https://mariadb.com/vulnerability-reporting/">Vulnerability Reporting</a></li>
                    </ul>
                </div>
                <div class="col-md-4 col-xs-7 item">
                    <div id="block-footercontact" class="block block-block-content block-block-content22b3af28-0754-44ec-a5c6-4466568f37e3">
                        <h5><a href="/contact" title="Contact">Contact</a></h5>
                    </div>
                    <div class="social">
                        <ul class="list-inline">
                            <li>
                                <a target="_blank" href="https://www.facebook.com/MariaDB.dbms/" title="Facebook">
                                    <i class="fa fa-facebook" aria-hidden="true"></i>
                                </a>
                            </li>
                            <li>
                                <a target="_blank" href="https://twitter.com/mariadb" title="Twitter">
                                    <i class="fa fa-twitter" aria-hidden="true"></i>
                                </a>
                            </li>
                            <li>
                                <a target="_blank" href="https://www.linkedin.com/company/mariadb-corporation?trk=company_logo " title="LinkedIn">
                                    <i class="fa fa-linkedin" aria-hidden="true"></i>
                                </a>
                            </li>
                        </ul>
                    </div>
                    <div id="block-footerformcontact" class="block block-block-content block-block-contentd754ee1b-3cc9-40e7-9ef4-f504f1197fb1">
                        
                            <p>Subscribe to our newsletter!</p>
                            <script src="//app-sj15.marketo.com/js/forms2/js/forms2.min.js"></script><form id="mktoForm_1498"></form>
                            <script>
                                <!--//--><![CDATA[// ><!--
                                MktoForms2.loadForm("//app-sj15.marketo.com", "573-PXI-984", 1498);
                                //--><!]]]]><![CDATA[>
                                //--><!]]>
                            </script>
                        
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="footer-copyright">
        <div class="container text-center">
            <ul class="list-inline no-margin">
                <li>
                    <a href="/legal" title="Legal">Legal</a>
                </li>
                <li>
                    <a href="/privacy-policy" title="Privacy Policy">Privacy Policy</a>
                </li>
                <li>
                    <a href="/cookie-policy/" title="Cookies">Cookie Policy</a>
                </li>
            </ul>
            <p>Copyright &copy; 2023 MariaDB. All rights reserved.</p>
        </div>
    </div>
</footer>
</div>

<div id="ajax_loading">
    <img src="/kb/static/images/ajax-loader.a51c5608d01a.gif" />
</div>

    <!-- Google Tag Manager -->
    <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-MK2847"
                      height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
            '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MK2847');</script>
    <!-- End Google Tag Manager -->

</body>

<script type="text/javascript" src="/kb/static/js/main.fed4ec768178.js" charset="utf-8"></script>

</html>