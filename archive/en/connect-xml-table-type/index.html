<!DOCTYPE html>
<html>
<head data-cookie-domain=""
      data-cookie-path="/">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="apple-touch-icon" sizes="180x180" href="/kb/static/images/favicons/apple-touch-icon.159e713979be.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/kb/static/images/favicons/favicon-32x32.bc0ac1d5d11e.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/kb/static/images/favicons/favicon-16x16.5801f8f0f34e.png">
    <link rel="shortcut icon" href="/kb/static/images/favicons/favicon.d122d305dee4.ico" type="image/x-icon" />

    <title>CONNECT XML Table Type - MariaDB Knowledge Base</title>

    <link href="/kb/static/css/main.f7633538c846.css" rel="stylesheet" type="text/css" />

    

    

    <!-- FB Open Graph tags -->
    <meta property="og:title" content="CONNECT XML Table Type" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://mariadb.com/kb/en/connect-xml-table-type/" />
    <meta property="og:image" content="http://mariadb.comaskmonty-logo.png" />
    <meta property="og:site_name" content="MariaDB KnowledgeBase" />
    <meta property="fb:admins" content="514852603" />
    <meta property="og:description" content="CONNECT XML files" />

    <meta name="description" content="CONNECT XML files" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="//fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet"/>
    
</head>
<body class="mpkb nodes products nodes_view jqui" id="nodes_view">





<div id="menu-mobile" class="visible-sm visible-xs">

    <div>
        <div id="mobile-close-menu" class="text-right">
            <a href="javascript:void(0)" title="Close Menu" id="back-main" class="toggle-menu">X<span></span></a>
        </div>
    </div>
    <div class="mainmenu-mobile">
        <ul class="ls-none ul-menu">
            <li data-sub="submenu5"><a class="open-form-search" href="/kb/search/" title="Search">Search </a></li>
            <li data-sub="submenu0"><a href="/products" title="Products">Products</a><span class="arrow-main"></span></li>
            <li data-sub="submenu1"><a href="/services" title="Services">Services</a><span class="arrow-main"></span></li>
            <li data-sub="submenu2"><a href="/resources" title="Resources">Resources</a><span class="arrow-main"></span></li>
            <li data-sub="submenu3"><a href="/about-us" title="About">About</a><span class="arrow-main"></span></li>
            <li data-sub="submenu4"><a href="/contact" title="Contact">Contact</a></li>
        </ul>
    </div>

    <div class="nav-top-mobile">
        <div class="select-box form">

            <ul class="inline-block-md mb-none top-nav">
                <li>

                </li>
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/connect-xml-table-type/"> Login</a>
                    </li>
                
            </ul>



        </div>
        <p class="text-center copyright">Copyright &copy; 2024 MariaDB. All rights reserved.</p>
    </div>
</div>
<div class="violator-wrap d-none" id="top_violator">
    <div class="container">
        <div class="row">
            <div class="col-xs-12 col-sm-12">
                <div class="violator-outer">
                    <div class="violator-inner">
                        <div class="row">
                            <div class="col-xs-12 col-sm-9 col-lg-7 col-lg-offset-2" id="top_violator_content">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="content-link" target="_blank" rel="nofollow noreferrer">
                                    <span>The Ultimate Guide to High Availability with MariaDB</span>
                                </a>
                            </div>
                            <div class="col-xs-12 col-sm-3" id="top_violator_cta">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="btn btn-mariadb" target="_blank" rel="nofollow noreferrer">Download Now</a>
                            </div>
                        </div>
                    </div>
                    <button type="button" class="btn btn-link close-btn">
                        <svg xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 24 24" width="15px" height="15px"><path d="M 4.9902344 3.9902344 A 1.0001 1.0001 0 0 0 4.2929688 5.7070312 L 10.585938 12 L 4.2929688 18.292969 A 1.0001 1.0001 0 1 0 5.7070312 19.707031 L 12 13.414062 L 18.292969 19.707031 A 1.0001 1.0001 0 1 0 19.707031 18.292969 L 13.414062 12 L 19.707031 5.7070312 A 1.0001 1.0001 0 0 0 18.980469 3.9902344 A 1.0001 1.0001 0 0 0 18.292969 4.2929688 L 12 10.585938 L 5.7070312 4.2929688 A 1.0001 1.0001 0 0 0 4.9902344 3.9902344 z"/></svg>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="wrapper">
<div id="top-nav">
    <div class="container">
        <ul class="hidden-sm hidden-xs" >
            <li><a href="https://mariadb.com/kb/">Knowledge Base</a></li>
            <li><a href="https://mariadb.com/contact/">Contact</a></li>
            
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/connect-xml-table-type/" rel="nofollow">Login</a>
                    </li>
                
            
            
            <li id="search-form">
                <form action="/kb/en/+search/" method="get" id="search-block-form" accept-charset="UTF-8">
                    <input id="search" title="Enter the terms you wish to search for."
                           placeholder="Search . . ." type="text"
                           name="q" value="" size="15" maxlength="128" class="form-text"
                           data-autocomplete-url="/kb/en/+search/autocomplete/">
                    <input type="hidden" name="quick" value="1" />
                    <input type="hidden" name="source" value="kb" />
                </form>
            </li>
            <li><a id="search-toggler" href="/kb/search/">Search</a></li>
            
        </ul>
    </div>
</div>
<div id="navbar-bottom" class="navbar">
    <div class="container">
        
        
        
        
        <div class="row">
            <div class="col-md-3 col-sm-9 col-xs-9">
                <a class="brand" href="/" title="MariaDB">
                    <img src="/kb/static/images/logo-2018-black.95f5978ae14d.png">
                </a>
            </div>
            <div class="col-md-9 hidden-sm hidden-xs">
                <div class="main-menu">
                    <ul id="main-menu" class="nav navbar-nav inline-block-sm">
    <li class="has-sub full-menu">
        <a href="/products" title="Products">Products</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/services" title="Services">Services</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/pricing" title="Pricing">Pricing</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/resources" title="Resources">Resources</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/about-us" title="About Us">About Us</a>
    </li>
    <li class="">
        <a class="button electric-eel small top-bar-right-download" href="/downloads/">Download</a>
    </li>
</ul>
                </div>
            </div>
            <div class="col-md-3 visible-sm visible-xs col-sm-3 col-xs-3 ps-rv">
                <div class="navbar-header text-right pull-right">
                    <button type="button" class="menu-control toggle-menu" id="open-menu">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="main">
    <div class="container">
        

        <div id="subheader1" class="clearfix">
            <div class="pull-left">
                
                <div id="breadcrumbs" class="breadcrumb">
                    <a href="/kb/en/">Knowledge Base</a>
                    


    
    » <a class="crumb" href="/kb/en/documentation/">MariaDB Server Documentation</a>
    

    
    » <a class="crumb" href="/kb/en/columns-storage-engines-and-plugins/">Columns, Storage Engines, and Plugins</a>
    

    
    » <a class="crumb" href="/kb/en/storage-engines/">Storage Engines</a>
    

    
    » <a class="crumb" href="/kb/en/connect/">CONNECT</a>
    

    
    » <a class="crumb" href="/kb/en/connect-table-types/">CONNECT Table Types</a>
    


    » <a class="node_link crumb" href="/kb/en/connect-xml-table-type/">CONNECT XML Table Type</a>


                </div>
                
            </div>
        </div>
    </div>
    <div class="container" id="container-main">
        <div class="row">
            
            
                
                <aside id="sidebar-first" class="sidebar col-md-2 hidden-xs hidden-sm hidden-print">
                    
                        
                        <ul id="category_menu" class="nav nav-pills nav-stacked">
                            <li><a href="/kb/en/">Home</a></li>
                            
                                
                                    <li><a href="/kb/en/+questions/">Open Questions</a></li>
                                
                                <li><a href="/kb/en/documentation/">MariaDB Server</a></li>
                                <li><a href="/kb/en/maxscale/">MariaDB MaxScale</a></li>
                                <li><a href="/kb/en/mariadb-columnstore/">MariaDB ColumnStore</a></li>
                                <li><a href="/kb/en/connectors/">Connectors</a></li>
                            

                        </ul>
                    

                    
<div>



<div class="well well-small box actions"><div>

        <a class="btn btn-block btn-blue btn-sm" href="/kb/en/connect-xml-table-type/+history" rel="nofollow">History</a>
        
        
        
        <a class="btn btn-block btn-blue btn-sm" href="/kb/en/connect-xml-table-type/+source/">Source</a>
        
        <a class="btn btn-block btn-blue btn-sm flag" href="/kb/en/connect-xml-table-type/+flag"
                data-flag-url="/kb/en/connect-xml-table-type/+flag" rel="nofollow">
                Flag as Spam / Inappropriate</a>
        
        <a class="btn btn-block btn-blue btn-sm" href="/kb/en/connect-xml-table-type/+translate/">
                Translate</a>
        

</div>
</div>





<div class="well well-small box node_info"><div>

    <dl>
        <dt>Created</dt>
        <dd>

<span class="datetime" title="2015-01-26 12:33">9 years, 10 months ago</span></dd>

        <dt>Modified</dt>
        <dd>

<span class="datetime" title="2022-04-27 18:41">2 years, 7 months ago</span></dd>

        <dt>Type</dt>
        <dd>article</dd>

        <dt>Status</dt>
        <dd>active</dd>

        <dt>License</dt>
        <dd>
            
                <a href="/kb/en/connect-xml-table-type/+license/">CC BY-SA / Gnu FDL</a>
            
        </dd>

        
    </dl>

    
    <ul class="rss_feeds">
        <li><a href="/kb/en/connect-xml-table-type/+history/feed/">
            History</a>
        </li>
        <li><a href="/kb/en/connect-xml-table-type/+comments/feed/">
            Comments</a>
        </li>
    </ul>
    

</div>
</div>





    
    
    

<div class="well well-small box attachments"><div><div class="edit_link pull-right"><a href="/kb/en/connect-xml-table-type/+edit/attachments/">Edit</a></div><h5>Attachments</h5></div><div>

        
            <div class="no_data">No attachments exist</div>
        
    
</div>
</div>

    



    
    






</div>


                    

































                </aside>
            
            
            
                
            
            
                
            
            <section id="content" class="limited_width col-md-8 clearfix">
                
                    <h1>CONNECT XML Table Type</h1>
                

                



                <div>
                    
    

    
    
    

    <div class="node creole">
        
        
        


    
    <div class="answer formatted">
        <div class="table_of_contents well well-small">
<h3>Contents</h3>
 <ol class="toc">

    <li class=""><a href="#overview" title="Overview">Overview</a></li>

    <li class=""><a href="#creating-xml-tables" title="Creating XML tables">Creating XML tables</a></li>

    <li class=""><a href="#using-xpaths-with-xml-tables" title="Using Xpaths with XML tables">Using Xpaths with XML tables</a>    <ol class="toc">

        <li class=""><a href="#libxml2-default-name-space-issue" title="Libxml2 default name space issue">Libxml2 default name space issue</a></li>

        <li class=""><a href="#direct-access-on-xml-tables" title="Direct access on XML tables">Direct access on XML tables</a></li>

        <li class=""><a href="#accessing-tags-with-namespaces" title="Accessing tags with namespaces">Accessing tags with namespaces</a>    </ol>
</li>

    <li class=""><a href="#having-columns-defined-by-discovery" title="Having Columns defined by Discovery">Having Columns defined by Discovery</a></li>

    <li class=""><a href="#multiple-nodes-in-the-xml-document" title="Multiple nodes in the XML document">Multiple nodes in the XML document</a></li>

    <li class=""><a href="#intermediate-multiple-node" title="Intermediate multiple node">Intermediate multiple node</a></li>

    <li class=""><a href="#making-a-list-of-multiple-values" title="Making a List of Multiple Values">Making a List of Multiple Values</a>    <ol class="toc">

        <li class=""><a href="#what-if-a-table-contains-several-multiple-nodes" title="What if a table contains several multiple nodes">What if a table contains several multiple nodes</a>    </ol>
</li>

    <li class=""><a href="#support-of-html-tables" title="Support of HTML Tables">Support of HTML Tables</a>    <ol class="toc">

        <li class=""><a href="#new-file-setting" title="New file setting">New file setting</a>    </ol>
</li>

    <li class=""><a href="#notes" title="Notes">Notes</a> </ol>
</li>
</div>
<h2 class="anchored_heading" id="overview">Overview</h2>
<p>CONNECT supports tables represented by XML files. For these tables, the
standard input/output functions of the operating system are not used but the
parsing and processing of the file is delegated to a specialized library.
Currently two such systems are supported: libxml2, a part of the GNOME
framework, but which does not require GNOME and, on Windows, MS-DOM (DOMDOC), the Microsoft standard support of XML documents.</p>
<p>DOMDOC is the default for the Windows version of CONNECT and libxml2 is always
used on other systems. On Windows the choice can be specified using the XMLSUP
<a href="/kb/en/create-table/">CREATE TABLE</a> list option, for instance specifying
<code>option_list='xmlsup=libxml2'</code>.</p>
<h2 class="anchored_heading" id="creating-xml-tables">Creating XML tables</h2>
<p>First of all, it must be understood that XML is a very general language used to
encode data having any structure. In particular, the tag hierarchy in an XML
file describes a tree structure of the data. For instance, consider the file:</p>
<pre class="fixed"><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;ISO-8859-1&quot;?&gt;</span>
<span class="nt">&lt;BIBLIO</span> <span class="na">SUBJECT=</span><span class="s">&quot;XML&quot;</span><span class="nt">&gt;</span>
   <span class="nt">&lt;BOOK</span> <span class="na">ISBN=</span><span class="s">&quot;9782212090819&quot;</span> <span class="na">LANG=</span><span class="s">&quot;fr&quot;</span> <span class="na">SUBJECT=</span><span class="s">&quot;applications&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;AUTHOR&gt;</span>
         <span class="nt">&lt;FIRSTNAME&gt;</span>Jean-Christophe<span class="nt">&lt;/FIRSTNAME&gt;</span>
         <span class="nt">&lt;LASTNAME&gt;</span>Bernadac<span class="nt">&lt;/LASTNAME&gt;</span>
      <span class="nt">&lt;/AUTHOR&gt;</span>
      <span class="nt">&lt;AUTHOR&gt;</span>
         <span class="nt">&lt;FIRSTNAME&gt;</span>François<span class="nt">&lt;/FIRSTNAME&gt;</span>
         <span class="nt">&lt;LASTNAME&gt;</span>Knab<span class="nt">&lt;/LASTNAME&gt;</span>
      <span class="nt">&lt;/AUTHOR&gt;</span>
      <span class="nt">&lt;TITLE&gt;</span>Construire une application XML<span class="nt">&lt;/TITLE&gt;</span>
      <span class="nt">&lt;PUBLISHER&gt;</span>
         <span class="nt">&lt;NAME&gt;</span>Eyrolles<span class="nt">&lt;/NAME&gt;</span>
         <span class="nt">&lt;PLACE&gt;</span>Paris<span class="nt">&lt;/PLACE&gt;</span>
      <span class="nt">&lt;/PUBLISHER&gt;</span>
      <span class="nt">&lt;DATEPUB&gt;</span>1999<span class="nt">&lt;/DATEPUB&gt;</span>
   <span class="nt">&lt;/BOOK&gt;</span>
   <span class="nt">&lt;BOOK</span> <span class="na">ISBN=</span><span class="s">&quot;9782840825685&quot;</span> <span class="na">LANG=</span><span class="s">&quot;fr&quot;</span> <span class="na">SUBJECT=</span><span class="s">&quot;applications&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;AUTHOR&gt;</span>
         <span class="nt">&lt;FIRSTNAME&gt;</span>William J.<span class="nt">&lt;/FIRSTNAME&gt;</span>
         <span class="nt">&lt;LASTNAME&gt;</span>Pardi<span class="nt">&lt;/LASTNAME&gt;</span>
      <span class="nt">&lt;/AUTHOR&gt;</span>
      <span class="nt">&lt;TRANSLATOR</span> <span class="na">PREFIX=</span><span class="s">&quot;adapté de l&#39;anglais par&quot;</span><span class="nt">&gt;</span>
         <span class="nt">&lt;FIRSTNAME&gt;</span>James<span class="nt">&lt;/FIRSTNAME&gt;</span>
         <span class="nt">&lt;LASTNAME&gt;</span>Guerin<span class="nt">&lt;/LASTNAME&gt;</span>
      <span class="nt">&lt;/TRANSLATOR&gt;</span>
      <span class="nt">&lt;TITLE&gt;</span>XML en Action<span class="nt">&lt;/TITLE&gt;</span>
      <span class="nt">&lt;PUBLISHER&gt;</span>
         <span class="nt">&lt;NAME&gt;</span>Microsoft Press<span class="nt">&lt;/NAME&gt;</span>
         <span class="nt">&lt;PLACE&gt;</span>Paris<span class="nt">&lt;/PLACE&gt;</span>
      <span class="nt">&lt;/PUBLISHER&gt;</span>
      <span class="nt">&lt;DATEPUB&gt;</span>1999<span class="nt">&lt;/DATEPUB&gt;</span>
   <span class="nt">&lt;/BOOK&gt;</span>
<span class="nt">&lt;/BIBLIO&gt;</span>
</pre><p>It represents data having the structure:</p>
<pre class="fixed">                               &lt;BIBLIO&gt;
                        __________|_________
                       |                    |
            &lt;BOOK:ISBN,LANG,SUBJECT&gt;        |
         ______________|_______________     |
        |        |         |           |    |
     &lt;AUTHOR&gt; &lt;TITLE&gt; &lt;PUBLISHER&gt; &lt;DATEPUB&gt; |
    ____|____            ___|____           |
   |    |    |          |        |          |
&lt;FIRST&gt; | &lt;LAST&gt;     &lt;NAME&gt;   &lt;PLACE&gt;       |
        |                                   |
     &lt;AUTHOR&gt;                   &lt;BOOK:ISBN,LANG,SUBJECT&gt;
    ____|____         ______________________|__________________
   |         |       |            |         |        |         |
&lt;FIRST&gt;   &lt;LAST&gt;  &lt;AUTHOR&gt; &lt;TRANSLATOR&gt; &lt;TITLE&gt; &lt;PUBLISHER&gt; &lt;DATEPUB&gt;
                _____|_        ___|___            ___|____
               |       |      |       |          |        |
            &lt;FIRST&gt; &lt;LAST&gt; &lt;FIRST&gt; &lt;LAST&gt;     &lt;NAME&gt;   &lt;PLACE&gt;
</pre><p>This structure seems at first view far from being tabular. However, modern
database management systems, including MariaDB, implement something close to the
relational model and work on tables that are structurally not hierarchical but
tabular with rows and columns.</p>
<p>Nevertheless, CONNECT can do it. Of course, it cannot guess what you want to
extract from the XML structure, but gives you the possibility to specify it
when you create the table<sup class="reference" id="_ref-0">[<a href="#_note-0">1</a>]</sup>.</p>
<p>Let us take a first example. Suppose you want to make a table from the above
document, displaying the node contents.</p>
<p>For this, you can define a table <em>xsamptag</em> as:</p>
<pre class="fixed"><span class="k">create</span> <span class="k">table</span> <span class="nf">xsamptag</span> <span class="p">(</span>
  <span class="n">AUTHOR</span> <span class="kt">char</span><span class="p">(</span><span class="mi">50</span><span class="p">),</span>
  <span class="n">TITLE</span> <span class="kt">char</span><span class="p">(</span><span class="mi">32</span><span class="p">),</span>
  <span class="n">TRANSLATOR</span> <span class="kt">char</span><span class="p">(</span><span class="mi">40</span><span class="p">),</span>
  <span class="n">PUBLISHER</span> <span class="kt">char</span><span class="p">(</span><span class="mi">40</span><span class="p">),</span>
  <span class="n">DATEPUB</span> <span class="kt">int</span><span class="p">(</span><span class="mi">4</span><span class="p">))</span>
<span class="kp">engine</span><span class="o">=</span><span class="n">CONNECT</span> <span class="n">table_type</span><span class="o">=</span><span class="n">XML</span> <span class="n">file_name</span><span class="o">=</span><span class="s1">&#39;Xsample.xml&#39;</span><span class="p">;</span>
</pre><p>It will be displayed as:</p>
<div class="cstm-style darkheader-nospace-borders"><table><tr><th>AUTHOR</th><th>TITLE</th><th>TRANSLATOR</th><th>PUBLISHER</th><th>DATEPUB</th></tr>
<tr><td>Jean-Christophe Bernadac</td><td>Construire une application XML</td><td>&lt;null&gt;</td><td>Eyrolles Paris</td><td>1999</td></tr>
<tr><td>William J. Pardi</td><td>XML en Action</td><td>James Guerin</td><td>Microsoft Press Paris</td><td>1999</td></tr>
</table>
</div><p>Let us try to understand what happened. By default the column names correspond
to tag names. Because this file is rather simple, CONNECT was able to default
the top tag of the table as the root node <code>&lt;BIBLIO&gt;</code> of the file, and the row
tags as the <code>&lt;BOOK&gt;</code> children of the table tag. In a more complex file, this
should have been specified, as we will see later. Note that we didn't have to worry
about the sub-tags such as <code>&lt;FIRSTNAME&gt;</code> or <code>&lt;LASTNAME&gt;</code> because CONNECT
automatically retrieves the entire text contained in a tag and its
sub-tags<sup class="reference" id="_ref-1">[<a href="#_note-1">2</a>]</sup>.</p>
<div class="cstm-style bluebox"><p>Only the first author of the first book appears. This is because only the first
occurrence of a column tag has been retrieved so the result has a proper
tabular structure. We will see later what we can do about that.</p>
</div><p>How can we retrieve the values specified by attributes? By using a <em>Coltype</em>
table option to specify the default column type. The value ‘@’ means that
column names match attribute names. Therefore, we can retrieve them by creating
a table such as:</p>
<pre class="fixed"><span class="k">create</span> <span class="k">table</span> <span class="nf">xsampattr</span> <span class="p">(</span>
  <span class="n">ISBN</span> <span class="kt">char</span><span class="p">(</span><span class="mi">15</span><span class="p">),</span>
  <span class="n">LANG</span> <span class="kt">char</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span>
  <span class="n">SUBJECT</span> <span class="kt">char</span><span class="p">(</span><span class="mi">32</span><span class="p">))</span>
<span class="kp">engine</span><span class="o">=</span><span class="n">CONNECT</span> <span class="n">table_type</span><span class="o">=</span><span class="n">XML</span> <span class="n">file_name</span><span class="o">=</span><span class="s1">&#39;Xsample.xml&#39;</span>
<span class="n">option_list</span><span class="o">=</span><span class="s1">&#39;Coltype=@&#39;</span><span class="p">;</span>
</pre><p>This table returns the following:</p>
<div class="cstm-style darkheader-nospace-borders"><table><tr><th>ISBN</th><th>LANG</th><th>SUBJECT</th></tr>
<tr><td>9782212090819</td><td>fr</td><td>applications</td></tr>
<tr><td>9782840825685</td><td>fr</td><td>applications</td></tr>
</table>
</div><p>Now to define a table that will give us all the previous information, we must
specify the column type for each column. Because in the next statement the
column type defaults to Node, the <em>field_format</em> column parameter was used to
indicate which columns are attributes:</p>
<p>From Connect 1.7.0002</p>
<pre class="fixed"><span class="k">create</span> <span class="k">table</span> <span class="n">xsamp</span> <span class="p">(</span>
<span class="n">ISBN</span> <span class="nb">char</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span> <span class="n">xpath</span><span class="o">=</span><span class="s1">&#39;@&#39;</span><span class="p">,</span>
<span class="n">LANG</span> <span class="nb">char</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="n">xpath</span><span class="o">=</span><span class="s1">&#39;@&#39;</span><span class="p">,</span>
<span class="n">SUBJECT</span> <span class="nb">char</span><span class="p">(</span><span class="mi">32</span><span class="p">)</span> <span class="n">xpath</span><span class="o">=</span><span class="s1">&#39;@&#39;</span><span class="p">,</span>
<span class="n">AUTHOR</span> <span class="nb">char</span><span class="p">(</span><span class="mi">50</span><span class="p">),</span>
<span class="n">TITLE</span> <span class="nb">char</span><span class="p">(</span><span class="mi">32</span><span class="p">),</span>
<span class="n">TRANSLATOR</span> <span class="nb">char</span><span class="p">(</span><span class="mi">40</span><span class="p">),</span>
<span class="n">PUBLISHER</span> <span class="nb">char</span><span class="p">(</span><span class="mi">40</span><span class="p">),</span>
<span class="n">DATEPUB</span> <span class="nb">int</span><span class="p">(</span><span class="mi">4</span><span class="p">))</span>
<span class="n">engine</span><span class="o">=</span><span class="k">CONNECT</span> <span class="n">table_type</span><span class="o">=</span><span class="n">XML</span> <span class="n">file_name</span><span class="o">=</span><span class="s1">&#39;Xsample.xml&#39;</span>
<span class="n">tabname</span><span class="o">=</span><span class="s1">&#39;BIBLIO&#39;</span> <span class="n">option_list</span><span class="o">=</span><span class="s1">&#39;rownode=BOOK&#39;</span><span class="p">;</span>
</pre><p>Before Connect 1.7.0002</p>
<pre class="fixed"><span class="k">create</span> <span class="k">table</span> <span class="nf">xsamp</span> <span class="p">(</span>
  <span class="n">ISBN</span> <span class="kt">char</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span> <span class="n">field_format</span><span class="o">=</span><span class="s1">&#39;@&#39;</span><span class="p">,</span>
  <span class="n">LANG</span> <span class="kt">char</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="n">field_format</span><span class="o">=</span><span class="s1">&#39;@&#39;</span><span class="p">,</span>
  <span class="n">SUBJECT</span> <span class="kt">char</span><span class="p">(</span><span class="mi">32</span><span class="p">)</span> <span class="n">field_format</span><span class="o">=</span><span class="s1">&#39;@&#39;</span><span class="p">,</span>
  <span class="n">AUTHOR</span> <span class="kt">char</span><span class="p">(</span><span class="mi">50</span><span class="p">),</span>
  <span class="n">TITLE</span> <span class="kt">char</span><span class="p">(</span><span class="mi">32</span><span class="p">),</span>
  <span class="n">TRANSLATOR</span> <span class="kt">char</span><span class="p">(</span><span class="mi">40</span><span class="p">),</span>
  <span class="n">PUBLISHER</span> <span class="kt">char</span><span class="p">(</span><span class="mi">40</span><span class="p">),</span>
  <span class="n">DATEPUB</span> <span class="kt">int</span><span class="p">(</span><span class="mi">4</span><span class="p">))</span>
<span class="kp">engine</span><span class="o">=</span><span class="n">CONNECT</span> <span class="n">table_type</span><span class="o">=</span><span class="n">XML</span> <span class="n">file_name</span><span class="o">=</span><span class="s1">&#39;Xsample.xml&#39;</span>
<span class="n">tabname</span><span class="o">=</span><span class="s1">&#39;BIBLIO&#39;</span> <span class="n">option_list</span><span class="o">=</span><span class="s1">&#39;rownode=BOOK&#39;</span><span class="p">;</span>
</pre><p>Once done, we can enter the query:</p>
<pre class="fixed"><span class="k">select</span> <span class="n">subject</span><span class="p">,</span> <span class="n">lang</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">author</span> <span class="k">from</span> <span class="n">xsamp</span><span class="p">;</span>
</pre><p>This will return the following result:</p>
<div class="cstm-style darkheader-nospace-borders"><table><tr><th>SUBJECT</th><th>LANG</th><th>TITLE</th><th>AUTHOR</th></tr>
<tr><td>applications</td><td>fr</td><td>Construire une application XML</td><td>Jean-Christophe Bernadac</td></tr>
<tr><td>applications</td><td>fr</td><td>XML en Action</td><td>William J. Pardi</td></tr>
</table>
</div><p>Note that we have been lucky. Because unlike SQL, XML is case sensitive and the
column names have matched the node names only because the column names were given
in upper case. Note also that the order of the columns in the table could have
been different from the order in which the nodes appear in the XML file.</p>
<h2 class="anchored_heading" id="using-xpaths-with-xml-tables">Using Xpaths with XML tables</h2>
<p>Xpath is used by XML to locate and retrieve nodes. The table's main node Xpath is specified by the <code>tabname</code> option. If just the node name is given, CONNECT constructs an Xpath such as <code>‘<em>BIBLIO’</em></code> in the example above that should retrieve the <code>BIBLIO</code> node wherever it is within the XML file. </p>
<p>The row nodes are by default the children of the table node. However, for instance to eliminate some children nodes that are not real row nodes, the row node name can be specified using the <code>rownode</code> sub-option of the <code>option_list</code> option.</p>
<p>The field_format options we used above can be specified to locate more
precisely where and what information to retrieve using an Xpath-like
syntax. For instance:</p>
<p>From Connect 1.7.0002</p>
<pre class="fixed"><span class="k">create</span> <span class="k">table</span> <span class="n">xsampall</span> <span class="p">(</span>
<span class="n">isbn</span> <span class="nb">char</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span> <span class="n">xpath</span><span class="o">=</span><span class="s1">&#39;@ISBN&#39;</span><span class="p">,</span>
<span class="k">language</span> <span class="nb">char</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="n">xpath</span><span class="o">=</span><span class="s1">&#39;@LANG&#39;</span><span class="p">,</span>
<span class="n">subject</span> <span class="nb">char</span><span class="p">(</span><span class="mi">32</span><span class="p">)</span> <span class="n">xpath</span><span class="o">=</span><span class="s1">&#39;@SUBJECT&#39;</span><span class="p">,</span>
<span class="n">authorfn</span> <span class="nb">char</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="n">xpath</span><span class="o">=</span><span class="s1">&#39;AUTHOR/FIRSTNAME&#39;</span><span class="p">,</span>
<span class="n">authorln</span> <span class="nb">char</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="n">xpath</span><span class="o">=</span><span class="s1">&#39;AUTHOR/LASTNAME&#39;</span><span class="p">,</span>
<span class="n">title</span> <span class="nb">char</span><span class="p">(</span><span class="mi">32</span><span class="p">)</span> <span class="n">xpath</span><span class="o">=</span><span class="s1">&#39;TITLE&#39;</span><span class="p">,</span>
<span class="n">translated</span> <span class="nb">char</span><span class="p">(</span><span class="mi">32</span><span class="p">)</span> <span class="n">xpath</span><span class="o">=</span><span class="s1">&#39;TRANSLATOR/@PREFIX&#39;</span><span class="p">,</span>
<span class="n">tranfn</span> <span class="nb">char</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="n">xpath</span><span class="o">=</span><span class="s1">&#39;TRANSLATOR/FIRSTNAME&#39;</span><span class="p">,</span>
<span class="n">tranln</span> <span class="nb">char</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="n">xpath</span><span class="o">=</span><span class="s1">&#39;TRANSLATOR/LASTNAME&#39;</span><span class="p">,</span>
<span class="n">publisher</span> <span class="nb">char</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="n">xpath</span><span class="o">=</span><span class="s1">&#39;PUBLISHER/NAME&#39;</span><span class="p">,</span>
<span class="k">location</span> <span class="nb">char</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="n">xpath</span><span class="o">=</span><span class="s1">&#39;PUBLISHER/PLACE&#39;</span><span class="p">,</span>
<span class="k">year</span> <span class="nb">int</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span> <span class="n">xpath</span><span class="o">=</span><span class="s1">&#39;DATEPUB&#39;</span><span class="p">)</span>
<span class="n">engine</span><span class="o">=</span><span class="k">CONNECT</span> <span class="n">table_type</span><span class="o">=</span><span class="n">XML</span> <span class="n">file_name</span><span class="o">=</span><span class="s1">&#39;Xsample.xml&#39;</span>
<span class="n">tabname</span><span class="o">=</span><span class="s1">&#39;BIBLIO&#39;</span> <span class="n">option_list</span><span class="o">=</span><span class="s1">&#39;rownode=BOOK&#39;</span><span class="p">;</span>
</pre><p>Before Connect 1.7.0002</p>
<pre class="fixed"><span class="k">create</span> <span class="k">table</span> <span class="nf">xsampall</span> <span class="p">(</span>
  <span class="n">isbn</span> <span class="kt">char</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span> <span class="n">field_format</span><span class="o">=</span><span class="s1">&#39;@ISBN&#39;</span><span class="p">,</span>
  <span class="n">language</span> <span class="kt">char</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="n">field_format</span><span class="o">=</span><span class="s1">&#39;@LANG&#39;</span><span class="p">,</span>
  <span class="n">subject</span> <span class="kt">char</span><span class="p">(</span><span class="mi">32</span><span class="p">)</span> <span class="n">field_format</span><span class="o">=</span><span class="s1">&#39;@SUBJECT&#39;</span><span class="p">,</span>
  <span class="n">authorfn</span> <span class="kt">char</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="n">field_format</span><span class="o">=</span><span class="s1">&#39;AUTHOR/FIRSTNAME&#39;</span><span class="p">,</span>
  <span class="n">authorln</span> <span class="kt">char</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="n">field_format</span><span class="o">=</span><span class="s1">&#39;AUTHOR/LASTNAME&#39;</span><span class="p">,</span>
  <span class="n">title</span> <span class="kt">char</span><span class="p">(</span><span class="mi">32</span><span class="p">)</span> <span class="n">field_format</span><span class="o">=</span><span class="s1">&#39;TITLE&#39;</span><span class="p">,</span>
  <span class="n">translated</span> <span class="kt">char</span><span class="p">(</span><span class="mi">32</span><span class="p">)</span> <span class="n">field_format</span><span class="o">=</span><span class="s1">&#39;TRANSLATOR/@PREFIX&#39;</span><span class="p">,</span>
  <span class="n">tranfn</span> <span class="kt">char</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="n">field_format</span><span class="o">=</span><span class="s1">&#39;TRANSLATOR/FIRSTNAME&#39;</span><span class="p">,</span>
  <span class="n">tranln</span> <span class="kt">char</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="n">field_format</span><span class="o">=</span><span class="s1">&#39;TRANSLATOR/LASTNAME&#39;</span><span class="p">,</span>
  <span class="n">publisher</span> <span class="kt">char</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="n">field_format</span><span class="o">=</span><span class="s1">&#39;PUBLISHER/NAME&#39;</span><span class="p">,</span>
  <span class="n">location</span> <span class="kt">char</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="n">field_format</span><span class="o">=</span><span class="s1">&#39;PUBLISHER/PLACE&#39;</span><span class="p">,</span>
  <span class="kt">year</span> <span class="kt">int</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span> <span class="n">field_format</span><span class="o">=</span><span class="s1">&#39;DATEPUB&#39;</span><span class="p">)</span>
<span class="kp">engine</span><span class="o">=</span><span class="n">CONNECT</span> <span class="n">table_type</span><span class="o">=</span><span class="n">XML</span> <span class="n">file_name</span><span class="o">=</span><span class="s1">&#39;Xsample.xml&#39;</span>
<span class="n">tabname</span><span class="o">=</span><span class="s1">&#39;BIBLIO&#39;</span> <span class="n">option_list</span><span class="o">=</span><span class="s1">&#39;rownode=BOOK&#39;</span><span class="p">;</span>
</pre><p>This very flexible column parameter serves several purposes:</p>
<ul start="1"><li>To specify the tag name, or the attribute name if different from the column
  name.
</li><li>To specify the type (tag or attribute) by a prefix of '@' for attributes.
</li><li>To specify the path for sub-tags using the '/' character.
</li></ul>
<p>This path is always relative to the current context (the column top node) and
cannot be specified as an absolute path from the document root, therefore a
leading '/' cannot be used. The path cannot be variable in node names or depth,
therefore using '<code>//</code>' is not allowed.</p>
<p>The query:</p>
<pre class="fixed"><span class="k">select</span> <span class="n">isbn</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">translated</span><span class="p">,</span> <span class="n">tranfn</span><span class="p">,</span> <span class="n">tranln</span><span class="p">,</span> <span class="n">location</span> <span class="k">from</span>
    <span class="n">xsampall</span> <span class="k">where</span> <span class="n">translated</span> <span class="k">is</span> <span class="k">not</span> <span class="no">null</span><span class="p">;</span>
</pre><p>replies:</p>
<div class="cstm-style darkheader-nospace-borders"><table><tr><th>ISBN</th><th>TITLE</th><th>TRANSLATED</th><th>TRANFN</th><th>TRANLN</th><th>LOCATION</th></tr>
<tr><td>9782840825685</td><td>XML en Action</td><td>adapté de l'anglais par</td><td>James</td><td>Guerin</td><td>Paris</td></tr>
</table>
</div><h3 class="anchored_heading" id="libxml2-default-name-space-issue">Libxml2 default name space issue</h3>
<p>An issue with libxml2 is that some files can declare a default name space in their root node. Because Xpath only searches in that name space, the nodes will not be found if they are not prefixed. If this happens, specify the tabname option as an Xpath ignoring the current name space:</p>
<pre class="fixed">TABNAME=&#34;//*[local-name()='BIBLIO']&#34;
</pre><p>This must also be done for the default of specified Xpath of the not attribute columns. For instance:</p>
<pre class="fixed">title char(32) field_format=&#34;*[local-name()='TITLE']&#34;,
</pre><p>Note: This raises an error (and is useless anyway) with DOMDOC.</p>
<h3 class="anchored_heading" id="direct-access-on-xml-tables">Direct access on XML tables</h3>
<p>Direct access is available on XML tables. This means that XML tables can be
sorted and used in joins, even in the one-side of the join.</p>
<p>However, building a permanent index is not yet implemented. It is unclear whether this can be useful. Indeed, the DOM implementation that is used to access these tables firstly parses the whole file and constructs a node tree in memory. This may often be the longest part of the process, so the use of an index would not be of great value. Note also that this limits the XML files to a reasonable size. Anyway, when speed is important, this table type is not the best to use. Therefore, in these cases, it is probably better to convert the file to another type by inserting the XML table into another table of a more appropriate type for performance.</p>
<h3 class="anchored_heading" id="accessing-tags-with-namespaces">Accessing tags with namespaces</h3>
<p>With the Windows DOMDOC support, this can be done using the prefix in the tabname column option and/or xpath column option. For instance, given the file gns.xml:</p>
<pre class="fixed">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;
&lt;gpx xmlns:gns=&#34;http:dummy&#34;&gt;
&lt;gns:trkseg&gt;
&lt;trkpt lon=&#34;-121.9822235107421875&#34; lat=&#34;37.3884925842285156&#34;&gt;
&lt;gns:ele&gt;6.610851287841797&lt;/gns:ele&gt;
&lt;time&gt;2014-04-01T14:54:05.000Z&lt;/time&gt;
&lt;/trkpt&gt;
&lt;trkpt lon=&#34;-121.9821929931640625&#34; lat=&#34;37.3885803222656250&#34;&gt;
&lt;ele&gt;6.787827968597412&lt;/ele&gt;
&lt;time&gt;2014-04-01T14:54:08.000Z&lt;/time&gt;
&lt;/trkpt&gt;
&lt;trkpt lon=&#34;-121.9821624755859375&#34; lat=&#34;37.3886299133300781&#34;&gt;
&lt;ele&gt;6.771987438201904&lt;/ele&gt;
&lt;time&gt;2014-04-01T14:54:10.000Z&lt;/time&gt;
&lt;/trkpt&gt;
&lt;/gns:trkseg&gt;
&lt;/gpx&gt;
</pre><p>and the defined CONNECT table:</p>
<pre class="fixed"><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">xgns</span> <span class="p">(</span>
<span class="o">`</span><span class="n">lon</span><span class="o">`</span> <span class="n">double</span><span class="p">(</span><span class="mi">21</span><span class="p">,</span><span class="mi">16</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span> <span class="o">`</span><span class="n">xpath</span><span class="o">`=</span><span class="s1">&#39;@&#39;</span><span class="p">,</span>
<span class="o">`</span><span class="n">lat</span><span class="o">`</span> <span class="n">double</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span><span class="mi">16</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span> <span class="o">`</span><span class="n">xpath</span><span class="o">`=</span><span class="s1">&#39;@&#39;</span><span class="p">,</span>
<span class="o">`</span><span class="n">ele</span><span class="o">`</span> <span class="n">double</span><span class="p">(</span><span class="mi">21</span><span class="p">,</span><span class="mi">16</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span> <span class="o">`</span><span class="n">xpath</span><span class="o">`=</span><span class="s1">&#39;gns:ele&#39;</span><span class="p">,</span>
<span class="o">`</span><span class="n">time</span><span class="o">`</span> <span class="n">datetime</span> <span class="n">date_format</span><span class="o">=</span><span class="ss">&quot;YYYY-MM-DD &#39;T&#39; hh:mm:ss &#39;.000Z&#39;&quot;</span>
<span class="p">)</span> 
  <span class="n">ENGINE</span><span class="o">=</span><span class="k">CONNECT</span> <span class="k">DEFAULT</span> <span class="n">CHARSET</span><span class="o">=</span><span class="n">latin1</span> <span class="o">`</span><span class="n">table_type</span><span class="o">`=</span><span class="n">XML</span> 
  <span class="o">`</span><span class="n">file_name</span><span class="o">`=</span><span class="s1">&#39;gns.xml&#39;</span> <span class="n">tabname</span><span class="o">=</span><span class="s1">&#39;gns:trkseg&#39;</span> <span class="n">option_list</span><span class="o">=</span><span class="s1">&#39;xmlsup=domdoc&#39;</span><span class="p">;</span>
</pre><pre class="fixed"><span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">xgns</span><span class="p">;</span>
</pre><p>Displays:</p>
<div class="cstm-style darkheader-nospace-borders"><table><tr><th>lon</th><th>lat</th><th>ele</th><th>time</th></tr>
<tr><td>-121,982223510742</td><td>37,3884925842285</td><td>6,6108512878418</td><td>01/04/2014 14:54:05</td></tr>
<tr><td>-121,982192993164</td><td>37,3885803222656</td><td>0</td><td>01/04/2014 14:54:08</td></tr>
<tr><td>-121,982162475586</td><td>37,3886299133301</td><td>0</td><td>01/04/2014 14:54:10</td></tr>
</table>
</div><p>Only the prefixed ‘ele’ tag is recognized.</p>
<p>However, this does not work with the libxml2 support. The solution is then to use a function ignoring the name space:</p>
<pre class="fixed"><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">xgns2</span> <span class="p">(</span>
<span class="o">`</span><span class="n">lon</span><span class="o">`</span> <span class="n">double</span><span class="p">(</span><span class="mi">21</span><span class="p">,</span><span class="mi">16</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span> <span class="o">`</span><span class="n">xpath</span><span class="o">`=</span><span class="s1">&#39;@&#39;</span><span class="p">,</span>
<span class="o">`</span><span class="n">lat</span><span class="o">`</span> <span class="n">double</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span><span class="mi">16</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span> <span class="o">`</span><span class="n">xpath</span><span class="o">`=</span><span class="s1">&#39;@&#39;</span><span class="p">,</span>
<span class="o">`</span><span class="n">ele</span><span class="o">`</span> <span class="n">double</span><span class="p">(</span><span class="mi">21</span><span class="p">,</span><span class="mi">16</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span> <span class="o">`</span><span class="n">xpath</span><span class="o">`=</span><span class="ss">&quot;*[local-name()=&#39;ele&#39;]&quot;</span><span class="p">,</span>
<span class="o">`</span><span class="n">time</span><span class="o">`</span> <span class="n">datetime</span> <span class="n">date_format</span><span class="o">=</span><span class="ss">&quot;YYYY-MM-DD &#39;T&#39; hh:mm:ss &#39;.000Z&#39;&quot;</span>
<span class="p">)</span> 
  <span class="n">ENGINE</span><span class="o">=</span><span class="k">CONNECT</span> <span class="k">DEFAULT</span> <span class="n">CHARSET</span><span class="o">=</span><span class="n">latin1</span> <span class="o">`</span><span class="n">table_type</span><span class="o">`=</span><span class="n">XML</span> 
  <span class="o">`</span><span class="n">file_name</span><span class="o">`=</span><span class="s1">&#39;gns.xml&#39;</span> <span class="n">tabname</span><span class="o">=</span><span class="ss">&quot;*[local-name()=&#39;trkseg&#39;]&quot;</span> <span class="n">option_list</span><span class="o">=</span><span class="s1">&#39;xmlsup=libxml2&#39;</span><span class="p">;</span>
</pre><p>Then :</p>
<pre class="fixed"><span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">xgns2</span><span class="p">;</span>
</pre><p>Displays:</p>
<div class="cstm-style darkheader-nospace-borders"><table><tr><th>lon</th><th>lat</th><th>ele</th><th>time</th></tr>
<tr><td>-121,982223510742</td><td>37,3884925842285</td><td>6,6108512878418</td><td>01/04/2014 14:54:05</td></tr>
<tr><td>-121,982192993164</td><td>37,3885803222656</td><td>6.7878279685974</td><td>01/04/2014 14:54:08</td></tr>
<tr><td>-121,982162475586</td><td>37,3886299133301</td><td>6.7719874382019</td><td>01/04/2014 14:54:10</td></tr>
</table>
</div><p>This time, all ‘ele` tags are recognized. This solution does not work with DOMDOC.</p>
<h2 class="anchored_heading" id="having-columns-defined-by-discovery">Having Columns defined by Discovery</h2>
<p>It is possible to let the MariaDB discovery process do the job of column specification. When columns are not defined in the <a href="/kb/en/create-table/">CREATE TABLE</a> statement, CONNECT endeavours to analyze the XML file and to provide the column specifications. This is possible only for true XML tables, but not for HTML tables.</p>
<p>For instance, the <em>xsamp</em> table could have been created specifying:</p>
<pre class="fixed"><span class="k">create</span> <span class="k">table</span> <span class="n">xsamp</span>
<span class="n">engine</span><span class="o">=</span><span class="k">CONNECT</span> <span class="n">table_type</span><span class="o">=</span><span class="n">XML</span> <span class="n">file_name</span><span class="o">=</span><span class="s1">&#39;Xsample.xml&#39;</span>
<span class="n">tabname</span><span class="o">=</span><span class="s1">&#39;BIBLIO&#39;</span> <span class="n">option_list</span><span class="o">=</span><span class="s1">&#39;rownode=BOOK&#39;</span><span class="p">;</span>
</pre><p>Let’s check how it was actually specified using the SHOW CREATE TABLE statement:</p>
<pre class="fixed"><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="o">`</span><span class="n">xsamp</span><span class="o">`</span> <span class="p">(</span>
  <span class="o">`</span><span class="n">ISBN</span><span class="o">`</span> <span class="nb">char</span><span class="p">(</span><span class="mi">13</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span> <span class="o">`</span><span class="n">FIELD_FORMAT</span><span class="o">`=</span><span class="s1">&#39;@&#39;</span><span class="p">,</span>
  <span class="o">`</span><span class="n">LANG</span><span class="o">`</span> <span class="nb">char</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span> <span class="o">`</span><span class="n">FIELD_FORMAT</span><span class="o">`=</span><span class="s1">&#39;@&#39;</span><span class="p">,</span>
  <span class="o">`</span><span class="n">SUBJECT</span><span class="o">`</span> <span class="nb">char</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span> <span class="o">`</span><span class="n">FIELD_FORMAT</span><span class="o">`=</span><span class="s1">&#39;@&#39;</span><span class="p">,</span>
  <span class="o">`</span><span class="n">AUTHOR</span><span class="o">`</span> <span class="nb">char</span><span class="p">(</span><span class="mi">24</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
  <span class="o">`</span><span class="n">TRANSLATOR</span><span class="o">`</span> <span class="nb">char</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span> <span class="k">DEFAULT</span> <span class="k">NULL</span><span class="p">,</span>
  <span class="o">`</span><span class="n">TITLE</span><span class="o">`</span> <span class="nb">char</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
  <span class="o">`</span><span class="n">PUBLISHER</span><span class="o">`</span> <span class="nb">char</span><span class="p">(</span><span class="mi">21</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
  <span class="o">`</span><span class="n">DATEPUB</span><span class="o">`</span> <span class="nb">char</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span>
<span class="p">)</span> <span class="n">ENGINE</span><span class="o">=</span><span class="k">CONNECT</span> <span class="k">DEFAULT</span> <span class="n">CHARSET</span><span class="o">=</span><span class="n">latin1</span> <span class="o">`</span><span class="n">TABLE_TYPE</span><span class="o">`=</span><span class="s1">&#39;XML&#39;</span> 
  <span class="o">`</span><span class="n">FILE_NAME</span><span class="o">`=</span><span class="s1">&#39;E:/Data/Xml/Xsample.xml&#39;</span> <span class="o">`</span><span class="n">TABNAME</span><span class="o">`=</span><span class="s1">&#39;BIBLIO&#39;</span> <span class="o">`</span><span class="n">OPTION_LIST</span><span class="o">`=</span><span class="s1">&#39;rownode=BOOK&#39;</span><span class="p">;</span>
</pre><p>It is equivalent except for the column sizes that have been calculated from the file as the maximum length of the corresponding column when it was a normal value. Also, all columns are specified as type <a href="/kb/en/char/">CHAR</a> because XML does not provide information about the node content data type. Nullable is set to true if the column is missing in some rows.</p>
<p>If a more complex definition is desired, you can ask CONNECT to analyse the XPATH up to a given level using the level option in the option list. The level value is the number of nodes that are taken in the XPATH. For instance:</p>
<pre class="fixed"><span class="k">create</span> <span class="k">table</span> <span class="n">xsampall</span>
<span class="n">engine</span><span class="o">=</span><span class="k">CONNECT</span> <span class="n">table_type</span><span class="o">=</span><span class="n">XML</span> <span class="n">file_name</span><span class="o">=</span><span class="s1">&#39;Xsample.xml&#39;</span>
<span class="n">tabname</span><span class="o">=</span><span class="s1">&#39;BIBLIO&#39;</span> <span class="n">option_list</span><span class="o">=</span><span class="s1">&#39;rownode=BOOK,Level=1&#39;</span><span class="p">;</span>
</pre><p>This will define the table as:</p>
<p>From Connect 1.7.0002</p>
<pre class="fixed wrap"><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="o">`</span><span class="n">xsampall</span><span class="o">`</span> <span class="p">(</span>
  <span class="o">`</span><span class="n">ISBN</span><span class="o">`</span> <span class="nb">char</span><span class="p">(</span><span class="mi">13</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span> <span class="o">`</span><span class="n">XPATH</span><span class="o">`=</span><span class="s1">&#39;@&#39;</span><span class="p">,</span>
  <span class="o">`</span><span class="n">LANG</span><span class="o">`</span> <span class="nb">char</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span> <span class="o">`</span><span class="n">XPATH</span><span class="o">`=</span><span class="s1">&#39;@&#39;</span><span class="p">,</span>
  <span class="o">`</span><span class="n">SUBJECT</span><span class="o">`</span> <span class="nb">char</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span> <span class="o">`</span><span class="n">XPATH</span><span class="o">`=</span><span class="s1">&#39;@&#39;</span><span class="p">,</span>
  <span class="o">`</span><span class="n">AUTHOR_FIRSTNAME</span><span class="o">`</span> <span class="nb">char</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span> <span class="o">`</span><span class="n">XPATH</span><span class="o">`=</span><span class="s1">&#39;AUTHOR/FIRSTNAME&#39;</span><span class="p">,</span>
  <span class="o">`</span><span class="n">AUTHOR_LASTNAME</span><span class="o">`</span> <span class="nb">char</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span> <span class="o">`</span><span class="n">XPATH</span><span class="o">`=</span><span class="s1">&#39;AUTHOR/LASTNAME&#39;</span><span class="p">,</span>
  <span class="o">`</span><span class="n">TRANSLATOR_PREFIX</span><span class="o">`</span> <span class="nb">char</span><span class="p">(</span><span class="mi">24</span><span class="p">)</span> <span class="k">DEFAULT</span> <span class="k">NULL</span> <span class="o">`</span><span class="n">XPATH</span><span class="o">`=</span><span class="s1">&#39;TRANSLATOR/@PREFIX&#39;</span><span class="p">,</span>
  <span class="o">`</span><span class="n">TRANSLATOR_FIRSTNAME</span><span class="o">`</span> <span class="nb">char</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span> <span class="k">DEFAULT</span> <span class="k">NULL</span> <span class="o">`</span><span class="n">XPATH</span><span class="o">`=</span><span class="s1">&#39;TRANSLATOR/FIRSTNAME&#39;</span><span class="p">,</span>
  <span class="o">`</span><span class="n">TRANSLATOR_LASTNAME</span><span class="o">`</span> <span class="nb">char</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span> <span class="k">DEFAULT</span> <span class="k">NULL</span> <span class="o">`</span><span class="n">XPATH</span><span class="o">`=</span><span class="s1">&#39;TRANSLATOR/LASTNAME&#39;</span><span class="p">,</span>
  <span class="o">`</span><span class="n">TITLE</span><span class="o">`</span> <span class="nb">char</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
  <span class="o">`</span><span class="n">PUBLISHER_NAME</span><span class="o">`</span> <span class="nb">char</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span> <span class="o">`</span><span class="n">XPATH</span><span class="o">`=</span><span class="s1">&#39;PUBLISHER/NAME&#39;</span><span class="p">,</span>
  <span class="o">`</span><span class="n">PUBLISHER_PLACE</span><span class="o">`</span> <span class="nb">char</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span> <span class="o">`</span><span class="n">XPATH</span><span class="o">`=</span><span class="s1">&#39;PUBLISHER/PLACE&#39;</span><span class="p">,</span>
  <span class="o">`</span><span class="n">DATEPUB</span><span class="o">`</span> <span class="nb">char</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span>
<span class="p">)</span> <span class="n">ENGINE</span><span class="o">=</span><span class="k">CONNECT</span> <span class="k">DEFAULT</span> <span class="n">CHARSET</span><span class="o">=</span><span class="n">latin1</span> <span class="o">`</span><span class="n">TABLE_TYPE</span><span class="o">`=</span><span class="s1">&#39;XML&#39;</span> <span class="o">`</span><span class="n">FILE_NAME</span><span class="o">`=</span><span class="s1">&#39;Xsample.xml&#39;</span> <span class="o">`</span><span class="n">TABNAME</span><span class="o">`=</span><span class="s1">&#39;BIBLIO&#39;</span> <span class="o">`</span><span class="n">OPTION_LIST</span><span class="o">`=</span><span class="s1">&#39;rownode=BOOK,Depth=1&#39;</span><span class="p">;</span>
<span class="o">&lt;&lt;/</span><span class="k">sql</span><span class="o">&gt;&gt;</span>


<span class="k">Before</span> <span class="k">Connect</span> <span class="mi">1</span><span class="p">.</span><span class="mi">7</span><span class="p">.</span><span class="mi">0002</span>
<span class="o">&lt;&lt;</span><span class="k">sql</span><span class="o">&gt;&gt;</span>
<span class="k">CREATE</span> <span class="k">TABLE</span> <span class="o">`</span><span class="n">xsampall</span><span class="o">`</span> <span class="p">(</span>
  <span class="o">`</span><span class="n">ISBN</span><span class="o">`</span> <span class="nb">char</span><span class="p">(</span><span class="mi">13</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span> <span class="o">`</span><span class="n">FIELD_FORMAT</span><span class="o">`=</span><span class="s1">&#39;@&#39;</span><span class="p">,</span>
  <span class="o">`</span><span class="n">LANG</span><span class="o">`</span> <span class="nb">char</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span> <span class="o">`</span><span class="n">FIELD_FORMAT</span><span class="o">`=</span><span class="s1">&#39;@&#39;</span><span class="p">,</span>
  <span class="o">`</span><span class="n">SUBJECT</span><span class="o">`</span> <span class="nb">char</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span> <span class="o">`</span><span class="n">FIELD_FORMAT</span><span class="o">`=</span><span class="s1">&#39;@&#39;</span><span class="p">,</span>
  <span class="o">`</span><span class="n">AUTHOR_FIRSTNAME</span><span class="o">`</span> <span class="nb">char</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span> <span class="o">`</span><span class="n">FIELD_FORMAT</span><span class="o">`=</span><span class="s1">&#39;AUTHOR/FIRSTNAME&#39;</span><span class="p">,</span>
  <span class="o">`</span><span class="n">AUTHOR_LASTNAME</span><span class="o">`</span> <span class="nb">char</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span> <span class="o">`</span><span class="n">FIELD_FORMAT</span><span class="o">`=</span><span class="s1">&#39;AUTHOR/LASTNAME&#39;</span><span class="p">,</span>
  <span class="o">`</span><span class="n">TRANSLATOR_PREFIX</span><span class="o">`</span> <span class="nb">char</span><span class="p">(</span><span class="mi">24</span><span class="p">)</span> <span class="k">DEFAULT</span> <span class="k">NULL</span> <span class="o">`</span><span class="n">FIELD_FORMAT</span><span class="o">`=</span><span class="s1">&#39;TRANSLATOR/@PREFIX&#39;</span><span class="p">,</span>
  <span class="o">`</span><span class="n">TRANSLATOR_FIRSTNAME</span><span class="o">`</span> <span class="nb">char</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span> <span class="k">DEFAULT</span> <span class="k">NULL</span> <span class="o">`</span><span class="n">FIELD_FORMAT</span><span class="o">`=</span><span class="s1">&#39;TRANSLATOR/FIRSTNAME&#39;</span><span class="p">,</span>
  <span class="o">`</span><span class="n">TRANSLATOR_LASTNAME</span><span class="o">`</span> <span class="nb">char</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span> <span class="k">DEFAULT</span> <span class="k">NULL</span> <span class="o">`</span><span class="n">FIELD_FORMAT</span><span class="o">`=</span><span class="s1">&#39;TRANSLATOR/LASTNAME&#39;</span><span class="p">,</span>
  <span class="o">`</span><span class="n">TITLE</span><span class="o">`</span> <span class="nb">char</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
  <span class="o">`</span><span class="n">PUBLISHER_NAME</span><span class="o">`</span> <span class="nb">char</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span> <span class="o">`</span><span class="n">FIELD_FORMAT</span><span class="o">`=</span><span class="s1">&#39;PUBLISHER/NAME&#39;</span><span class="p">,</span>
  <span class="o">`</span><span class="n">PUBLISHER_PLACE</span><span class="o">`</span> <span class="nb">char</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span> <span class="o">`</span><span class="n">FIELD_FORMAT</span><span class="o">`=</span><span class="s1">&#39;PUBLISHER/PLACE&#39;</span><span class="p">,</span>
  <span class="o">`</span><span class="n">DATEPUB</span><span class="o">`</span> <span class="nb">char</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span>
<span class="p">)</span> <span class="n">ENGINE</span><span class="o">=</span><span class="k">CONNECT</span> <span class="k">DEFAULT</span> <span class="n">CHARSET</span><span class="o">=</span><span class="n">latin1</span> <span class="o">`</span><span class="n">TABLE_TYPE</span><span class="o">`=</span><span class="s1">&#39;XML&#39;</span> <span class="o">`</span><span class="n">FILE_NAME</span><span class="o">`=</span><span class="s1">&#39;Xsample.xml&#39;</span> 
  <span class="o">`</span><span class="n">TABNAME</span><span class="o">`=</span><span class="s1">&#39;BIBLIO&#39;</span> <span class="o">`</span><span class="n">OPTION_LIST</span><span class="o">`=</span><span class="s1">&#39;rownode=BOOK,Level=1&#39;</span><span class="p">;</span>
<span class="o">&lt;&lt;/</span><span class="k">sql</span><span class="o">&gt;&gt;</span>

<span class="n">This</span> <span class="k">method</span> <span class="n">can</span> <span class="n">be</span> <span class="n">used</span> <span class="k">as</span> <span class="n">a</span> <span class="n">quick</span> <span class="n">way</span> <span class="k">to</span> <span class="n">make</span> <span class="n">a</span> <span class="err">“</span><span class="k">template</span><span class="err">”</span> <span class="k">table</span> <span class="n">definition</span> <span class="n">that</span> <span class="n">can</span> <span class="n">later</span> <span class="n">be</span> <span class="n">edited</span> <span class="k">to</span> <span class="n">make</span> <span class="n">the</span> <span class="n">desired</span> <span class="n">definition</span><span class="p">.</span> <span class="k">In</span> <span class="n">particular</span><span class="p">,</span> <span class="k">column</span> <span class="k">names</span> <span class="k">are</span> <span class="n">constructed</span> <span class="k">from</span> <span class="k">all</span> <span class="n">the</span> <span class="n">nodes</span> <span class="k">of</span> <span class="n">their</span> <span class="n">path</span> <span class="k">in</span> <span class="k">order</span> <span class="k">to</span> <span class="n">have</span> <span class="k">distinct</span> <span class="k">column</span> <span class="k">names</span><span class="p">.</span> <span class="n">This</span> <span class="n">can</span> <span class="n">be</span> <span class="n">manually</span> <span class="n">edited</span> <span class="k">to</span> <span class="n">have</span> <span class="n">the</span> <span class="n">desired</span> <span class="k">names</span><span class="p">,</span> <span class="n">provided</span> <span class="n">their</span> <span class="n">XPATH</span> <span class="k">is</span> <span class="k">not</span> <span class="n">modified</span><span class="p">.</span>

<span class="k">To</span> <span class="n">have</span> <span class="n">a</span> <span class="n">preview</span> <span class="k">of</span> <span class="n">how</span> <span class="n">columns</span> <span class="n">will</span> <span class="n">be</span> <span class="k">defined</span><span class="p">,</span> <span class="n">you</span> <span class="n">can</span> <span class="n">use</span> <span class="n">a</span> <span class="k">catalog</span> <span class="k">table</span> <span class="k">like</span> <span class="n">this</span><span class="p">:</span>

<span class="o">&lt;&lt;</span><span class="k">sql</span><span class="o">&gt;&gt;</span>
<span class="k">create</span> <span class="k">table</span> <span class="n">xsacol</span>
<span class="n">engine</span><span class="o">=</span><span class="k">CONNECT</span> <span class="n">table_type</span><span class="o">=</span><span class="n">XML</span> <span class="n">file_name</span><span class="o">=</span><span class="s1">&#39;Xsample.xml&#39;</span>
<span class="n">tabname</span><span class="o">=</span><span class="s1">&#39;BIBLIO&#39;</span> <span class="n">option_list</span><span class="o">=</span><span class="s1">&#39;rownode=BOOK,Level=1&#39;</span> <span class="n">catfunc</span><span class="o">=</span><span class="n">col</span><span class="p">;</span>
<span class="o">&lt;&lt;/</span><span class="k">sql</span><span class="o">&gt;&gt;</span>

<span class="k">And</span> <span class="k">when</span> <span class="n">asking</span><span class="p">:</span>

<span class="o">&lt;&lt;</span><span class="k">sql</span><span class="o">&gt;&gt;</span>
<span class="k">select</span> <span class="k">column_name</span> <span class="n">Name</span><span class="p">,</span> <span class="n">type_name</span> <span class="k">Type</span><span class="p">,</span> <span class="n">column_size</span> <span class="k">Size</span><span class="p">,</span> <span class="k">nullable</span><span class="p">,</span> <span class="n">xpath</span> <span class="k">from</span> <span class="n">xsacol</span><span class="p">;</span>
<span class="o">&lt;&lt;/</span><span class="k">sql</span><span class="o">&gt;&gt;</span>

<span class="n">You</span> <span class="k">get</span> <span class="n">the</span> <span class="n">description</span> <span class="k">of</span> <span class="n">what</span> <span class="n">the</span> <span class="k">table</span> <span class="n">columns</span> <span class="n">will</span> <span class="n">be</span><span class="p">:</span>

<span class="o">&lt;&lt;</span><span class="n">style</span> <span class="k">class</span><span class="o">=</span><span class="ss">&quot;darkheader-nospace-borders&quot;</span><span class="o">&gt;&gt;</span>
<span class="o">|=</span> <span class="n">Name</span> <span class="o">|=</span> <span class="k">Type</span> <span class="o">|=</span> <span class="k">Size</span> <span class="o">|=</span> <span class="k">nullable</span> <span class="o">|=</span> <span class="n">xpath</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">ISBN</span> <span class="o">|</span> <span class="nb">CHAR</span> <span class="o">|</span> <span class="mi">13</span> <span class="o">|</span> <span class="mi">0</span> <span class="o">|</span> <span class="o">@</span> <span class="o">|</span> 
<span class="o">|</span> <span class="n">LANG</span> <span class="o">|</span> <span class="nb">CHAR</span> <span class="o">|</span> <span class="mi">2</span> <span class="o">|</span> <span class="mi">0</span> <span class="o">|</span> <span class="o">@</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">SUBJECT</span> <span class="o">|</span> <span class="nb">CHAR</span> <span class="o">|</span> <span class="mi">12</span> <span class="o">|</span> <span class="mi">0</span> <span class="o">|</span> <span class="o">@</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">AUTHOR_FIRSTNAME</span> <span class="o">|</span> <span class="nb">CHAR</span> <span class="o">|</span> <span class="mi">15</span> <span class="o">|</span> <span class="mi">0</span> <span class="o">|</span> <span class="n">AUTHOR</span><span class="o">/</span><span class="n">FIRSTNAME</span> <span class="o">|</span> 
<span class="o">|</span> <span class="n">AUTHOR_LASTNAME</span> <span class="o">|</span> <span class="nb">CHAR</span> <span class="o">|</span> <span class="mi">8</span> <span class="o">|</span> <span class="mi">0</span> <span class="o">|</span> <span class="n">AUTHOR</span><span class="o">/</span><span class="n">LASTNAME</span> <span class="o">|</span> 
<span class="o">|</span> <span class="n">TRANSLATOR_PREFIX</span> <span class="o">|</span> <span class="nb">CHAR</span> <span class="o">|</span> <span class="mi">24</span> <span class="o">|</span> <span class="mi">1</span> <span class="o">|</span> <span class="n">TRANSLATOR</span><span class="o">/@</span><span class="k">PREFIX</span> <span class="o">|</span> 
<span class="o">|</span> <span class="n">TRANSLATOR_FIRSTNAME</span> <span class="o">|</span> <span class="nb">CHAR</span> <span class="o">|</span> <span class="mi">7</span> <span class="o">|</span> <span class="mi">1</span> <span class="o">|</span> <span class="n">TRANSLATOR</span><span class="o">/</span><span class="n">FIRSTNAME</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">TRANSLATOR_LASTNAME</span> <span class="o">|</span> <span class="nb">CHAR</span> <span class="o">|</span> <span class="mi">6</span> <span class="o">|</span> <span class="mi">1</span> <span class="o">|</span> <span class="n">TRANSLATOR</span><span class="o">/</span><span class="n">LASTNAME</span> <span class="o">|</span> 
<span class="o">|</span> <span class="n">TITLE</span> <span class="o">|</span> <span class="nb">CHAR</span> <span class="o">|</span> <span class="mi">30</span> <span class="o">|</span> <span class="mi">0</span> <span class="o">|</span>  <span class="o">|</span> 
<span class="o">|</span> <span class="n">PUBLISHER_NAME</span> <span class="o">|</span> <span class="nb">CHAR</span> <span class="o">|</span> <span class="mi">15</span> <span class="o">|</span> <span class="mi">0</span> <span class="o">|</span> <span class="n">PUBLISHER</span><span class="o">/</span><span class="n">NAME</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">PUBLISHER_PLACE</span> <span class="o">|</span> <span class="nb">CHAR</span> <span class="o">|</span> <span class="mi">5</span> <span class="o">|</span> <span class="mi">0</span> <span class="o">|</span> <span class="n">PUBLISHER</span><span class="o">/</span><span class="n">PLACE</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">DATEPUB</span> <span class="o">|</span> <span class="nb">CHAR</span> <span class="o">|</span> <span class="mi">4</span> <span class="o">|</span> <span class="mi">0</span> <span class="o">|</span> <span class="o">|</span>
<span class="o">&lt;&lt;/</span><span class="n">style</span><span class="o">&gt;&gt;</span>

<span class="o">==</span> <span class="k">Write</span> <span class="n">operations</span> <span class="k">on</span> <span class="n">XML</span> <span class="n">tables</span>
<span class="n">You</span> <span class="n">can</span> <span class="n">freely</span> <span class="n">use</span> <span class="n">the</span> <span class="k">Update</span><span class="p">,</span> <span class="k">Delete</span> <span class="k">and</span> <span class="k">Insert</span> <span class="n">commands</span> <span class="k">with</span> <span class="n">XML</span> <span class="n">tables</span><span class="p">.</span>
<span class="n">However</span><span class="p">,</span> <span class="n">you</span> <span class="n">must</span> <span class="n">understand</span> <span class="n">that</span> <span class="n">the</span> <span class="n">format</span> <span class="k">of</span> <span class="n">the</span> <span class="n">updated</span> <span class="k">or</span> <span class="n">inserted</span> <span class="k">data</span>
<span class="n">follows</span> <span class="n">the</span> <span class="n">specifications</span> <span class="k">of</span> <span class="n">the</span> <span class="k">table</span> <span class="n">you</span> <span class="n">created</span><span class="p">,</span> <span class="k">not</span> <span class="n">the</span> <span class="n">ones</span> <span class="k">of</span> <span class="n">the</span>
<span class="n">original</span> <span class="k">source</span> <span class="n">file</span><span class="p">.</span> <span class="k">For</span> <span class="n">instance</span><span class="p">,</span> <span class="n">let</span> <span class="n">us</span> <span class="n">suppose</span> <span class="n">we</span> <span class="k">insert</span> <span class="n">a</span> <span class="k">new</span> <span class="n">book</span> <span class="k">using</span>
<span class="n">the</span> <span class="o">//</span><span class="n">xsamp</span><span class="o">//</span> <span class="k">table</span> <span class="p">(</span><span class="k">not</span> <span class="n">the</span> <span class="o">//</span><span class="n">xsampall</span><span class="o">//</span> <span class="k">table</span><span class="p">)</span> <span class="k">with</span> <span class="n">the</span> <span class="n">command</span><span class="p">:</span>

<span class="o">&lt;&lt;</span><span class="n">code</span> <span class="n">lang</span><span class="o">=</span><span class="n">mysql</span> <span class="n">inline</span><span class="o">=</span><span class="k">false</span><span class="o">&gt;&gt;</span>
<span class="k">insert</span> <span class="k">into</span> <span class="n">xsamp</span>
  <span class="p">(</span><span class="n">isbn</span><span class="p">,</span> <span class="n">lang</span><span class="p">,</span> <span class="n">subject</span><span class="p">,</span> <span class="n">author</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">publisher</span><span class="p">,</span><span class="n">datepub</span><span class="p">)</span>
  <span class="k">values</span> <span class="p">(</span><span class="s1">&#39;9782212090529&#39;</span><span class="p">,</span><span class="s1">&#39;fr&#39;</span><span class="p">,</span><span class="s1">&#39;général&#39;</span><span class="p">,</span><span class="s1">&#39;Alain Michard&#39;</span><span class="p">,</span>
         <span class="s1">&#39;XML, Langage et Applications&#39;</span><span class="p">,</span><span class="s1">&#39;Eyrolles Paris&#39;</span><span class="p">,</span><span class="mi">1998</span><span class="p">);</span>
</pre><p>Then if we ask:</p>
<pre class="fixed"><span class="k">select</span> <span class="n">subject</span><span class="p">,</span> <span class="n">author</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">translator</span><span class="p">,</span> <span class="n">publisher</span> <span class="k">from</span> <span class="n">xsamp</span><span class="p">;</span>
</pre><p>Everything seems correct when we get the result:</p>
<div class="cstm-style darkheader-nospace-borders"><table><tr><th>SUBJECT</th><th>AUTHOR</th><th>TITLE</th><th>TRANSLATOR</th><th>PUBLISHER</th></tr>
<tr><td>applications</td><td>Jean-Christophe Bernadac</td><td>Construire une application XML</td><td></td><td>Eyrolles Paris</td></tr>
<tr><td>applications</td><td>William J. Pardi</td><td>XML en Action</td><td>James Guerin</td><td>Microsoft Press Paris</td></tr>
<tr><td>général</td><td>Alain Michard</td><td>XML, Langage et Applications</td><td></td><td>Eyrolles Paris</td></tr>
</table>
</div><p>However if we enter the apparently equivalent query on the <em>xsampall</em> table,
based on the same file:</p>
<pre class="fixed"><span class="k">select</span> <span class="n">subject</span><span class="p">,</span>
<span class="nf">concat</span><span class="p">(</span><span class="n">authorfn</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="n">authorln</span><span class="p">)</span> <span class="n">author</span> <span class="p">,</span> <span class="n">title</span><span class="p">,</span>
<span class="nf">concat</span><span class="p">(</span><span class="n">tranfn</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="n">tranln</span><span class="p">)</span> <span class="n">translator</span><span class="p">,</span>
<span class="nf">concat</span><span class="p">(</span><span class="n">publisher</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="n">location</span><span class="p">)</span> <span class="n">publisher</span> <span class="k">from</span> <span class="n">xsampall</span><span class="p">;</span>
</pre><p>this returns an apparently wrong answer:</p>
<div class="cstm-style darkheader-nospace-borders"><table><tr><th>SUBJECT</th><th>AUTHOR</th><th>TITLE</th><th>TRANSLATOR</th><th>PUBLISHER</th></tr>
<tr><td>applications</td><td>Jean-Christophe Bernadac</td><td>Construire une application XML</td><td></td><td>Eyrolles Paris</td></tr>
<tr><td>applications</td><td>William J. Pardi</td><td>XML en Action</td><td>James Guerin</td><td>Microsoft Press Paris</td></tr>
<tr><td>général</td><td></td><td>XML, Langage et Applications</td><td></td><td></td></tr>
</table>
</div><p>What happened here? Simply, because we used the <em>xsamp</em> table to do the
Insert, what has been inserted within the XML file had the structure described
for <em>xsamp</em>:</p>
<pre class="fixed">   <span class="nt">&lt;BOOK</span> <span class="na">ISBN=</span><span class="s">&quot;9782212090529&quot;</span> <span class="na">LANG=</span><span class="s">&quot;fr&quot;</span> <span class="na">SUBJECT=</span><span class="s">&quot;général&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;AUTHOR&gt;</span>Alain Michard<span class="nt">&lt;/AUTHOR&gt;</span>
      <span class="nt">&lt;TITLE&gt;</span>XML, Langage et Applications<span class="nt">&lt;/TITLE&gt;</span>
      <span class="nt">&lt;TRANSLATOR&gt;&lt;/TRANSLATOR&gt;</span>
      <span class="nt">&lt;PUBLISHER&gt;</span>Eyrolles Paris<span class="nt">&lt;/PUBLISHER&gt;</span>
      <span class="nt">&lt;DATEPUB&gt;</span>1998<span class="nt">&lt;/DATEPUB&gt;</span>
   <span class="nt">&lt;/BOOK&gt;</span>
</pre><p>CONNECT cannot "invent" sub-tags that are not part of the <em>xsamp</em> table.
Because these sub-tags do not exist, the <em>xsampall</em> table cannot retrieve the
information that should be attached to them. If we want to be able to query the
XML file by all the defined tables, the correct way to insert a new book to the
file is to use the <em>xsampall</em> table, the only one that addresses all the
components of the original document:</p>
<pre class="fixed"><span class="k">delete</span> <span class="k">from</span> <span class="n">xsamp</span> <span class="k">where</span> <span class="n">isbn</span> <span class="o">=</span> <span class="s1">&#39;9782212090529&#39;</span><span class="p">;</span>

<span class="k">insert</span> <span class="k">into</span> <span class="nf">xsampall</span> <span class="p">(</span><span class="n">isbn</span><span class="p">,</span> <span class="n">language</span><span class="p">,</span> <span class="n">subject</span><span class="p">,</span> <span class="n">authorfn</span><span class="p">,</span> <span class="n">authorln</span><span class="p">,</span>
      <span class="n">title</span><span class="p">,</span> <span class="n">publisher</span><span class="p">,</span> <span class="n">location</span><span class="p">,</span> <span class="kt">year</span><span class="p">)</span>
   <span class="k">values</span><span class="p">(</span><span class="s1">&#39;9782212090529&#39;</span><span class="p">,</span><span class="s1">&#39;fr&#39;</span><span class="p">,</span><span class="s1">&#39;général&#39;</span><span class="p">,</span><span class="s1">&#39;Alain&#39;</span><span class="p">,</span><span class="s1">&#39;Michard&#39;</span><span class="p">,</span>
      <span class="s1">&#39;XML, Langage et Applications&#39;</span><span class="p">,</span><span class="s1">&#39;Eyrolles&#39;</span><span class="p">,</span><span class="s1">&#39;Paris&#39;</span><span class="p">,</span><span class="mi">1998</span><span class="p">);</span>
</pre><p>Now the added book, in the XML file, will have the required structure:</p>
<pre class="fixed">   <span class="nt">&lt;BOOK</span> <span class="na">ISBN=</span><span class="s">&quot;9782212090529&quot;</span> <span class="na">LANG=</span><span class="s">&quot;fr&quot;</span> <span class="na">SUBJECT=</span><span class="s">&quot;général&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;AUTHOR&gt;</span>
         <span class="nt">&lt;FIRSTNAME&gt;</span>Alain<span class="nt">&lt;/FIRSTNAME&gt;</span>
         <span class="nt">&lt;LASTNAME&gt;</span>Michard<span class="nt">&lt;/LASTNAME&gt;</span>
      <span class="nt">&lt;/AUTHOR&gt;</span>
      <span class="nt">&lt;TITLE&gt;</span>XML, Langage et Applications<span class="nt">&lt;/TITLE&gt;</span>
      <span class="nt">&lt;PUBLISHER&gt;</span>
         <span class="nt">&lt;NAME&gt;</span>Eyrolles<span class="nt">&lt;/NAME&gt;</span>
         <span class="nt">&lt;PLACE&gt;</span>Paris<span class="nt">&lt;/PLACE&gt;</span>
      <span class="nt">&lt;/PUBLISHER&gt;</span>
      <span class="nt">&lt;DATEPUB&gt;</span>1998<span class="nt">&lt;/DATEPUB&gt;</span>
   <span class="nt">&lt;/BOOK&gt;</span>
</pre><p><strong>Note:</strong> We used a column list in the Insert statements when creating the table to avoid generating a <code>&lt;TRANSLATOR&gt;</code>
node with sub-nodes, all containing null values (this works on Windows only).</p>
<h2 class="anchored_heading" id="multiple-nodes-in-the-xml-document">Multiple nodes in the XML document</h2>
<p>Let us come back to the above example XML file. We have seen that the author
node can be "multiple" meaning that there can be more than one author of a
book. What can we do to get the complete information fitting the relational
model? CONNECT provides you with two possibilities, but is restricted to only one
such multiple node per table.</p>
<p>The first and most challenging one is to return as many rows than there are
authors, the other columns being repeated as if we had make a join between the
author column and the rest of the table. To achieve this, simply specify the
“multiple” node name and the “expand” option when creating the table. For
instance, we can create the <em>xsamp2</em> table like this:</p>
<pre class="fixed"><span class="k">create</span> <span class="k">table</span> <span class="nf">xsamp2</span> <span class="p">(</span>
  <span class="n">ISBN</span> <span class="kt">char</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span> <span class="n">field_format</span><span class="o">=</span><span class="s1">&#39;@&#39;</span><span class="p">,</span>
  <span class="n">LANG</span> <span class="kt">char</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="n">field_format</span><span class="o">=</span><span class="s1">&#39;@&#39;</span><span class="p">,</span>
  <span class="n">SUBJECT</span> <span class="kt">char</span><span class="p">(</span><span class="mi">32</span><span class="p">)</span> <span class="n">field_format</span><span class="o">=</span><span class="s1">&#39;@&#39;</span><span class="p">,</span>
  <span class="n">AUTHOR</span> <span class="kt">char</span><span class="p">(</span><span class="mi">40</span><span class="p">),</span>
  <span class="n">TITLE</span> <span class="kt">char</span><span class="p">(</span><span class="mi">32</span><span class="p">),</span>
  <span class="n">TRANSLATOR</span> <span class="kt">char</span><span class="p">(</span><span class="mi">32</span><span class="p">),</span>
  <span class="n">PUBLISHER</span> <span class="kt">char</span><span class="p">(</span><span class="mi">32</span><span class="p">),</span>
  <span class="n">DATEPUB</span> <span class="kt">int</span><span class="p">(</span><span class="mi">4</span><span class="p">))</span>
<span class="kp">engine</span><span class="o">=</span><span class="n">CONNECT</span> <span class="n">table_type</span><span class="o">=</span><span class="n">XML</span> <span class="n">file_name</span><span class="o">=</span><span class="s1">&#39;Xsample.xml&#39;</span>
<span class="n">tabname</span><span class="o">=</span><span class="s1">&#39;BIBLIO&#39;</span>
<span class="n">option_list</span><span class="o">=</span><span class="s1">&#39;rownode=BOOK,Expand=1,Mulnode=AUTHOR,Limit=2&#39;</span><span class="p">;</span>
</pre><p>In this statement, the Limit option specifies the maximum number of values that will be expanded. If not specified, it defaults to <code>10</code>. Any values above the limit will be ignored and a warning message issued<sup class="reference" id="_ref-2">[<a href="#_note-2">3</a>]</sup>. Now you can enter a query such as:</p>
<pre class="fixed"><span class="k">select</span> <span class="n">isbn</span><span class="p">,</span> <span class="n">subject</span><span class="p">,</span> <span class="n">author</span><span class="p">,</span> <span class="n">title</span> <span class="k">from</span> <span class="n">xsamp2</span><span class="p">;</span>
</pre><p>This will retrieve and display the following result:</p>
<div class="cstm-style darkheader-nospace-borders"><table><tr><th>ISBN</th><th>SUBJECT</th><th>AUTHOR</th><th>TITLE</th></tr>
<tr><td>9782212090819</td><td>applications</td><td>Jean-Christophe Bernadac</td><td>Construire une application XML</td></tr>
<tr><td>9782212090819</td><td>applications</td><td>François Knab</td><td>Construire une application XML</td></tr>
<tr><td>9782840825685</td><td>applications</td><td>William J. Pardi</td><td>XML en Action</td></tr>
<tr><td>9782212090529</td><td>général</td><td>Alain Michard</td><td>XML, Langage et Applications</td></tr>
</table>
</div><p>In this case, this is as if the table had four rows. However if we enter the query:</p>
<pre class="fixed"><span class="k">select</span> <span class="n">isbn</span><span class="p">,</span> <span class="n">subject</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">publisher</span> <span class="k">from</span> <span class="n">xsamp2</span><span class="p">;</span>
</pre><p>this time the result will be:</p>
<div class="cstm-style darkheader-nospace-borders"><table><tr><th>ISBN</th><th>SUBJECT</th><th>TITLE</th><th>PUBLISHER</th></tr>
<tr><td>9782212090819</td><td>applications</td><td>Construire une application XML</td><td>Eyrolles Paris</td></tr>
<tr><td>9782840825685</td><td>applications</td><td>XML en Action</td><td>Microsoft Press Paris</td></tr>
<tr><td>9782212090529</td><td>général</td><td>XML, Langage et Applications</td><td>Eyrolles Paris</td></tr>
</table>
</div><p>Because the author column does not appear in the query, the corresponding row
was not expanded.  This is somewhat strange because this would have been
different if we had been working on a table of a different type. However, it is
closer to the relational model for which there should not be two identical rows
(tuples) in a table. Nevertheless, you should be aware of this somewhat erratic
behavior. For instance:</p>
<pre class="fixed"><span class="k">select</span> <span class="nf">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">from</span> <span class="n">xsamp2</span><span class="p">;</span>                <span class="cm">/* Replies 3 */</span>
<span class="k">select</span> <span class="nf">count</span><span class="p">(</span><span class="n">author</span><span class="p">)</span> <span class="k">from</span> <span class="n">xsamp2</span><span class="p">;</span>           <span class="cm">/* Replies 4 */</span>
<span class="k">select</span> <span class="nf">count</span><span class="p">(</span><span class="n">isbn</span><span class="p">)</span> <span class="k">from</span> <span class="n">xsamp2</span><span class="p">;</span>             <span class="cm">/* Replies 3 */</span>
<span class="k">select</span> <span class="n">isbn</span><span class="p">,</span> <span class="n">subject</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">publisher</span> <span class="k">from</span> <span class="n">xsamp2</span> <span class="k">where</span> <span class="n">author</span> <span class="o">&lt;&gt;</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
</pre><p>This last query replies:</p>
<div class="cstm-style darkheader-nospace-borders"><table><tr><th>ISBN</th><th>SUBJECT</th><th>TITLE</th><th>PUBLISHER</th></tr>
<tr><td>9782212090819</td><td>applications</td><td>Construire une application XML</td><td>Eyrolles Paris</td></tr>
<tr><td>9782212090819</td><td>applications</td><td>Construire une application XML</td><td>Eyrolles Paris</td></tr>
<tr><td>9782840825685</td><td>applications</td><td>XML en Action</td><td>Microsoft Press Paris</td></tr>
<tr><td>9782212090529</td><td>général</td><td>XML, Langage et Applications</td><td>Eyrolles Paris</td></tr>
</table>
</div><p>Even though the author column does not appear in the result, the corresponding row was
expanded because the multiple column was used in the where clause.</p>
<h2 class="anchored_heading" id="intermediate-multiple-node">Intermediate multiple node</h2>
<p>The "multiple" node can be an intermediate node. If we want to do the same
expanding with the <em>xsampall</em> table, there will be nothing more to do. The
 <em>xsampall2</em> table can be created with:</p>
<p>From Connect 1.7.0002</p>
<pre class="fixed"><span class="k">create</span> <span class="k">table</span> <span class="n">xsampall2</span> <span class="p">(</span>
<span class="n">isbn</span> <span class="nb">char</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span> <span class="n">xpath</span><span class="o">=</span><span class="s1">&#39;@ISBN&#39;</span><span class="p">,</span>
<span class="k">language</span> <span class="nb">char</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="n">xpath</span><span class="o">=</span><span class="s1">&#39;@LANG&#39;</span><span class="p">,</span>
<span class="n">subject</span> <span class="nb">char</span><span class="p">(</span><span class="mi">32</span><span class="p">)</span> <span class="n">xpath</span><span class="o">=</span><span class="s1">&#39;@SUBJECT&#39;</span><span class="p">,</span>
<span class="n">authorfn</span> <span class="nb">char</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="n">xpath</span><span class="o">=</span><span class="s1">&#39;AUTHOR/FIRSTNAME&#39;</span><span class="p">,</span>
<span class="n">authorln</span> <span class="nb">char</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="n">xpath</span><span class="o">=</span><span class="s1">&#39;AUTHOR/LASTNAME&#39;</span><span class="p">,</span>
<span class="n">title</span> <span class="nb">char</span><span class="p">(</span><span class="mi">32</span><span class="p">)</span> <span class="n">xpath</span><span class="o">=</span><span class="s1">&#39;TITLE&#39;</span><span class="p">,</span>
<span class="n">translated</span> <span class="nb">char</span><span class="p">(</span><span class="mi">32</span><span class="p">)</span> <span class="n">xpath</span><span class="o">=</span><span class="s1">&#39;TRANSLATOR/@PREFIX&#39;</span><span class="p">,</span>
<span class="n">tranfn</span> <span class="nb">char</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="n">xpath</span><span class="o">=</span><span class="s1">&#39;TRANSLATOR/FIRSTNAME&#39;</span><span class="p">,</span>
<span class="n">tranln</span> <span class="nb">char</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="n">xpath</span><span class="o">=</span><span class="s1">&#39;TRANSLATOR/LASTNAME&#39;</span><span class="p">,</span>
<span class="n">publisher</span> <span class="nb">char</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="n">xpath</span><span class="o">=</span><span class="s1">&#39;PUBLISHER/NAME&#39;</span><span class="p">,</span>
<span class="k">location</span> <span class="nb">char</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="n">xpath</span><span class="o">=</span><span class="s1">&#39;PUBLISHER/PLACE&#39;</span><span class="p">,</span>
<span class="k">year</span> <span class="nb">int</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span> <span class="n">xpath</span><span class="o">=</span><span class="s1">&#39;DATEPUB&#39;</span><span class="p">)</span>
<span class="n">engine</span><span class="o">=</span><span class="k">CONNECT</span> <span class="n">table_type</span><span class="o">=</span><span class="n">XML</span> <span class="n">file_name</span><span class="o">=</span><span class="s1">&#39;Xsample.xml&#39;</span>
<span class="n">tabname</span><span class="o">=</span><span class="s1">&#39;BIBLIO&#39;</span> <span class="n">option_list</span><span class="o">=</span><span class="s1">&#39;rownode=BOOK,Expand=1,Mulnode=AUTHOR,Limit=2&#39;</span><span class="p">;</span>
</pre><p>Before Connect 1.7.0002</p>
<pre class="fixed"><span class="k">create</span> <span class="k">table</span> <span class="nf">xsampall2</span> <span class="p">(</span>
  <span class="n">isbn</span> <span class="kt">char</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span> <span class="n">field_format</span><span class="o">=</span><span class="s1">&#39;@ISBN&#39;</span><span class="p">,</span>
  <span class="n">language</span> <span class="kt">char</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="n">field_format</span><span class="o">=</span><span class="s1">&#39;@LANG&#39;</span><span class="p">,</span>
  <span class="n">subject</span> <span class="kt">char</span><span class="p">(</span><span class="mi">32</span><span class="p">)</span> <span class="n">field_format</span><span class="o">=</span><span class="s1">&#39;@SUBJECT&#39;</span><span class="p">,</span>
  <span class="n">authorfn</span> <span class="kt">char</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="n">field_format</span><span class="o">=</span><span class="s1">&#39;AUTHOR/FIRSTNAME&#39;</span><span class="p">,</span>
  <span class="n">authorln</span> <span class="kt">char</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="n">field_format</span><span class="o">=</span><span class="s1">&#39;AUTHOR/LASTNAME&#39;</span><span class="p">,</span>
  <span class="n">title</span> <span class="kt">char</span><span class="p">(</span><span class="mi">32</span><span class="p">)</span> <span class="n">field_format</span><span class="o">=</span><span class="s1">&#39;TITLE&#39;</span><span class="p">,</span>
  <span class="n">translated</span> <span class="kt">char</span><span class="p">(</span><span class="mi">32</span><span class="p">)</span> <span class="n">field_format</span><span class="o">=</span><span class="s1">&#39;TRANSLATOR/@PREFIX&#39;</span><span class="p">,</span>
  <span class="n">tranfn</span> <span class="kt">char</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="n">field_format</span><span class="o">=</span><span class="s1">&#39;TRANSLATOR/FIRSTNAME&#39;</span><span class="p">,</span>
  <span class="n">tranln</span> <span class="kt">char</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="n">field_format</span><span class="o">=</span><span class="s1">&#39;TRANSLATOR/LASTNAME&#39;</span><span class="p">,</span>
  <span class="n">publisher</span> <span class="kt">char</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="n">field_format</span><span class="o">=</span><span class="s1">&#39;PUBLISHER/NAME&#39;</span><span class="p">,</span>
  <span class="n">location</span> <span class="kt">char</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="n">field_format</span><span class="o">=</span><span class="s1">&#39;PUBLISHER/PLACE&#39;</span><span class="p">,</span>
  <span class="kt">year</span> <span class="kt">int</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span> <span class="n">field_format</span><span class="o">=</span><span class="s1">&#39;DATEPUB&#39;</span><span class="p">)</span>
<span class="kp">engine</span><span class="o">=</span><span class="n">CONNECT</span> <span class="n">table_type</span><span class="o">=</span><span class="n">XML</span> <span class="n">file_name</span><span class="o">=</span><span class="s1">&#39;Xsample.xml&#39;</span>
<span class="n">tabname</span><span class="o">=</span><span class="s1">&#39;BIBLIO&#39;</span>
<span class="n">option_list</span><span class="o">=</span><span class="s1">&#39;rownode=BOOK,Expand=1,Mulnode=AUTHOR,Limit=2&#39;</span><span class="p">;</span>
</pre><p>The only difference is that the "multiple" node is an intermediate node in the
path. The resulting table can be seen with a query such as:</p>
<pre class="fixed"><span class="k">select</span> <span class="n">subject</span><span class="p">,</span> <span class="n">language</span> <span class="n">lang</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">authorfn</span> <span class="n">first</span><span class="p">,</span> <span class="n">authorln</span>
    <span class="n">last</span><span class="p">,</span> <span class="kt">year</span> <span class="k">from</span> <span class="n">xsampall2</span><span class="p">;</span>
</pre><p>This query displays:</p>
<div class="cstm-style darkheader-nospace-borders"><table><tr><th>SUBJECT</th><th>LANG</th><th>TITLE</th><th>FIRST</th><th>LAST</th><th>YEAR</th></tr>
<tr><td>applications</td><td>fr</td><td>Construire une application XML</td><td>Jean-Christophe</td><td>Bernadac</td><td>1999</td></tr>
<tr><td>applications</td><td>fr</td><td>Construire une application XML</td><td>François</td><td>Knab</td><td>1999</td></tr>
<tr><td>applications</td><td>fr</td><td>XML en Action</td><td>William J.</td><td>Pardi</td><td>1999</td></tr>
<tr><td>général</td><td>fr</td><td>XML, Langage et Applications</td><td>Alain</td><td>Michard</td><td>1998</td></tr>
</table>
</div><p>These composite tables, half array half tree, reserve some surprises for us when
updating, deleting from or inserting into them. Insert just cannot generate
this structure; if two rows are inserted with just a different author, two book
nodes will be generated in the XML file. Delete always deletes one book node
and all its children nodes even if specified against only one author. Update is
more complicated:</p>
<pre class="fixed"><span class="k">update</span> <span class="n">xsampall2</span> <span class="kt">set</span> <span class="n">authorfn</span> <span class="o">=</span> <span class="s1">&#39;Simon&#39;</span> <span class="k">where</span> <span class="n">authorln</span> <span class="o">=</span> <span class="s1">&#39;Knab&#39;</span><span class="p">;</span>
<span class="k">update</span> <span class="n">xsampall2</span> <span class="kt">set</span> <span class="kt">year</span> <span class="o">=</span> <span class="mi">2002</span> <span class="k">where</span> <span class="n">authorln</span> <span class="o">=</span> <span class="s1">&#39;Bernadac&#39;</span><span class="p">;</span>
<span class="k">update</span> <span class="n">xsampall2</span> <span class="kt">set</span> <span class="n">authorln</span> <span class="o">=</span> <span class="s1">&#39;Mercier&#39;</span> <span class="k">where</span> <span class="kt">year</span> <span class="o">=</span> <span class="mi">2002</span><span class="p">;</span>
</pre><p>After these three updates, the first two responding "Affected rows: 1" and the
last one responding "Affected rows: 2", the last query answers:</p>
<div class="cstm-style darkheader-nospace-borders"><table><tr><th>subject</th><th>lang</th><th>title</th><th>first</th><th>last</th><th>year</th></tr>
<tr><td>applications</td><td>fr</td><td>Construire une application XML</td><td>Jean-Christophe</td><td>Mercier</td><td>2002</td></tr>
<tr><td>applications</td><td>fr</td><td>Construire une application XML</td><td>François</td><td>Knab</td><td>2002</td></tr>
<tr><td>applications</td><td>fr</td><td>XML en Action</td><td>William J.</td><td>Pardi</td><td>1999</td></tr>
<tr><td>général</td><td>fr</td><td>XML, Langage et Applications</td><td>Alain</td><td>Michard</td><td>1998</td></tr>
</table>
</div><p>What must be understood here is that the Update modifies node values in the XML file, not cell values in the relational table. The first update worked normally. The second update changed the year value of the book and this shows for the two expanded rows because there is only one DATEPUB node for that book. Because the third update applies to a row having a certain date value, both author names were updated.</p>
<h2 class="anchored_heading" id="making-a-list-of-multiple-values">Making a List of Multiple Values</h2>
<p>Another way to see multiple values is to ask CONNECT to make a comma separated
list of the multiple node values. This time, it can only be done if the
"multiple" node is not intermediate. For example, we can modify the <em>xsamp2</em>
table definition by:</p>
<pre class="fixed"><span class="k">alter</span> <span class="k">table</span> <span class="n">xsamp2</span> <span class="n">option_list</span><span class="o">=</span><span class="s1">&#39;rownode=BOOK,Mulnode=AUTHOR,Limit=3&#39;</span><span class="p">;</span>
</pre><p>This time 'Expand' is not specified, and Limit gives the maximum number of
items in the list. Now if we enter the query:</p>
<pre class="fixed"><span class="k">select</span> <span class="n">isbn</span><span class="p">,</span> <span class="n">subject</span><span class="p">,</span> <span class="n">author</span> <span class="s2">&quot;AUTHOR(S)&quot;</span><span class="p">,</span> <span class="n">title</span> <span class="k">from</span> <span class="n">xsamp2</span><span class="p">;</span>
</pre><p>We will get the following result:</p>
<div class="cstm-style darkheader-nospace-borders"><table><tr><th>ISBN</th><th>SUBJECT</th><th>AUTHOR(S)</th><th>TITLE</th></tr>
<tr><td>9782212090819</td><td>applications</td><td>Jean-Christophe Bernadac, François Knab</td><td>Construire une application XML</td></tr>
<tr><td>9782840825685</td><td>applications</td><td>William J. Pardi</td><td>XML en Action</td></tr>
<tr><td>9782212090529</td><td>général</td><td>Alain Michard</td><td>XML, Langage et Applications</td></tr>
</table>
</div><p>Note that updating the "multiple" column is not possible because CONNECT does
not know which of the nodes to update.</p>
<p>This could not have been done with the <em>xsampall2</em> table because the author
node is intermediate in the path, and making two lists, one of first names and
another one of last names would not make sense anyway.</p>
<h3 class="anchored_heading" id="what-if-a-table-contains-several-multiple-nodes">What if a table contains several multiple nodes</h3>
<p>This can be handled by creating several tables on the same file, each
containing only one multiple node and constructing the desired result using
joins.</p>
<h2 class="anchored_heading" id="support-of-html-tables">Support of HTML Tables</h2>
<p>Most tables included in HTML documents cannot be processed by CONNECT because the HTML
language is often not compatible with the syntax of XML. In particular, XML
requires all open tags to be matched by a closing tag while it is sometimes
optional in HTML. This is often the case concerning column tags.</p>
<p>However, you can meet tables that respect the XML syntax but have some of the
features of HTML tables. For instance:</p>
<pre class="fixed"><span class="cp">&lt;?xml version=&quot;1.0&quot;?&gt;</span>
<span class="nt">&lt;Beers&gt;</span>
  <span class="nt">&lt;table&gt;</span>
    <span class="nt">&lt;th&gt;&lt;td&gt;</span>Name<span class="nt">&lt;/td&gt;&lt;td&gt;</span>Origin<span class="nt">&lt;/td&gt;&lt;td&gt;</span>Description<span class="nt">&lt;/td&gt;&lt;/th&gt;</span>
    <span class="nt">&lt;tr&gt;</span>
      <span class="nt">&lt;td&gt;&lt;brandName&gt;</span>Huntsman<span class="nt">&lt;/brandName&gt;&lt;/td&gt;</span>
      <span class="nt">&lt;td&gt;&lt;origin&gt;</span>Bath, UK<span class="nt">&lt;/origin&gt;&lt;/td&gt;</span>
      <span class="nt">&lt;td&gt;&lt;details&gt;</span>Wonderful hop, light alcohol<span class="nt">&lt;/details&gt;&lt;/td&gt;</span>
    <span class="nt">&lt;/tr&gt;</span>
    <span class="nt">&lt;tr&gt;</span>
      <span class="nt">&lt;td&gt;&lt;brandName&gt;</span>Tuborg<span class="nt">&lt;/brandName&gt;&lt;/td&gt;</span>
      <span class="nt">&lt;td&gt;&lt;origin&gt;</span>Danmark<span class="nt">&lt;/origin&gt;&lt;/td&gt;</span>
      <span class="nt">&lt;td&gt;&lt;details&gt;</span>In small bottles<span class="nt">&lt;/details&gt;&lt;/td&gt;</span>
    <span class="nt">&lt;/tr&gt;</span>
  <span class="nt">&lt;/table&gt;</span>
<span class="nt">&lt;/Beers&gt;</span>
</pre><p>Here the different column tags are included in <code>&lt;td&gt;&lt;/td&gt;</code> tags as for HTML
tables. You cannot just add this tag in the Xpath of the columns, because the
search is done on the first occurrence of each tag, and this would cause this
search to fail for all columns except the first one. This case is handled by
specifying the <em>Colnode</em> table option that gives the name of these column
tags, for example:</p>
<p>From Connect 1.7.0002</p>
<pre class="fixed"><span class="k">create</span> <span class="k">table</span> <span class="n">beers</span> <span class="p">(</span>
<span class="o">`</span><span class="n">Name</span><span class="o">`</span> <span class="nb">char</span><span class="p">(</span><span class="mi">16</span><span class="p">)</span> <span class="n">xpath</span><span class="o">=</span><span class="s1">&#39;brandName&#39;</span><span class="p">,</span>
<span class="o">`</span><span class="n">Origin</span><span class="o">`</span> <span class="nb">char</span><span class="p">(</span><span class="mi">16</span><span class="p">)</span> <span class="n">xpath</span><span class="o">=</span><span class="s1">&#39;origin&#39;</span><span class="p">,</span>
<span class="o">`</span><span class="n">Description</span><span class="o">`</span> <span class="nb">char</span><span class="p">(</span><span class="mi">32</span><span class="p">)</span> <span class="n">xpath</span><span class="o">=</span><span class="s1">&#39;details&#39;</span><span class="p">)</span>
<span class="n">engine</span><span class="o">=</span><span class="k">CONNECT</span> <span class="n">table_type</span><span class="o">=</span><span class="n">XML</span> <span class="n">file_name</span><span class="o">=</span><span class="s1">&#39;beers.xml&#39;</span>
<span class="n">tabname</span><span class="o">=</span><span class="s1">&#39;table&#39;</span> <span class="n">option_list</span><span class="o">=</span><span class="s1">&#39;rownode=tr,colnode=td&#39;</span><span class="p">;</span>
</pre><p>Before Connect 1.7.0002</p>
<pre class="fixed"><span class="k">create</span> <span class="k">table</span> <span class="nf">beers</span> <span class="p">(</span>
  <span class="ss">`Name`</span> <span class="kt">char</span><span class="p">(</span><span class="mi">16</span><span class="p">)</span> <span class="n">field_format</span><span class="o">=</span><span class="s1">&#39;brandName&#39;</span><span class="p">,</span>
  <span class="ss">`Origin`</span> <span class="kt">char</span><span class="p">(</span><span class="mi">16</span><span class="p">)</span> <span class="n">field_format</span><span class="o">=</span><span class="s1">&#39;origin&#39;</span><span class="p">,</span>
  <span class="ss">`Description`</span> <span class="kt">char</span><span class="p">(</span><span class="mi">32</span><span class="p">)</span> <span class="n">field_format</span><span class="o">=</span><span class="s1">&#39;details&#39;</span><span class="p">)</span>
<span class="kp">engine</span><span class="o">=</span><span class="n">CONNECT</span> <span class="n">table_type</span><span class="o">=</span><span class="n">XML</span> <span class="n">file_name</span><span class="o">=</span><span class="s1">&#39;beers.xml&#39;</span>
<span class="n">tabname</span><span class="o">=</span><span class="s1">&#39;table&#39;</span> <span class="n">option_list</span><span class="o">=</span><span class="s1">&#39;rownode=tr,colnode=td&#39;</span><span class="p">;</span>
</pre><p>The table will be displayed as:</p>
<div class="cstm-style darkheader-nospace-borders"><table><tr><th>Name</th><th>Origin</th><th>Description</th></tr>
<tr><td>Huntsman</td><td>Bath, UK</td><td>Wonderful hop, light alcohol</td></tr>
<tr><td>Tuborg</td><td>Danmark</td><td>In small bottles</td></tr>
</table>
</div><p>However, you can deal with tables even closer to the HTML model. For example
the <em>coffee.htm</em> file:</p>
<pre class="fixed"><span class="p">&lt;</span><span class="nt">TABLE</span> <span class="na">summary</span><span class="o">=</span><span class="s">&quot;This table charts the number of cups of coffe</span>
<span class="s">                consumed by each senator, the type of coffee (decaf</span>
<span class="s">                or regular), and whether taken with sugar.&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">CAPTION</span><span class="p">&gt;</span>Cups of coffee consumed by each senator<span class="p">&lt;/</span><span class="nt">CAPTION</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">TR</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">TH</span><span class="p">&gt;</span>Name<span class="p">&lt;/</span><span class="nt">TH</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">TH</span><span class="p">&gt;</span>Cups<span class="p">&lt;/</span><span class="nt">TH</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">TH</span><span class="p">&gt;</span>Type of Coffee<span class="p">&lt;/</span><span class="nt">TH</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">TH</span><span class="p">&gt;</span>Sugar?<span class="p">&lt;/</span><span class="nt">TH</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">TR</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">TR</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">TD</span><span class="p">&gt;</span>T. Sexton<span class="p">&lt;/</span><span class="nt">TD</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">TD</span><span class="p">&gt;</span>10<span class="p">&lt;/</span><span class="nt">TD</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">TD</span><span class="p">&gt;</span>Espresso<span class="p">&lt;/</span><span class="nt">TD</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">TD</span><span class="p">&gt;</span>No<span class="p">&lt;/</span><span class="nt">TD</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">TR</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">TR</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">TD</span><span class="p">&gt;</span>J. Dinnen<span class="p">&lt;/</span><span class="nt">TD</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">TD</span><span class="p">&gt;</span>5<span class="p">&lt;/</span><span class="nt">TD</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">TD</span><span class="p">&gt;</span>Decaf<span class="p">&lt;/</span><span class="nt">TD</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">TD</span><span class="p">&gt;</span>Yes<span class="p">&lt;/</span><span class="nt">TD</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">TR</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">TABLE</span><span class="p">&gt;</span>
</pre><p>Here column values are directly represented by the TD tag text. You cannot
declare them as tags nor as attributes. In addition, they are not located using
their name but by their position within the row. Here is how to declare such a
table to CONNECT:</p>
<pre class="fixed"><span class="k">create</span> <span class="k">table</span> <span class="nf">coffee</span> <span class="p">(</span>
  <span class="ss">`Name`</span> <span class="kt">char</span><span class="p">(</span><span class="mi">16</span><span class="p">),</span>
  <span class="ss">`Cups`</span> <span class="kt">int</span><span class="p">(</span><span class="mi">8</span><span class="p">),</span>
  <span class="ss">`Type`</span> <span class="kt">char</span><span class="p">(</span><span class="mi">16</span><span class="p">),</span>
  <span class="ss">`Sugar`</span> <span class="kt">char</span><span class="p">(</span><span class="mi">4</span><span class="p">))</span>
<span class="kp">engine</span><span class="o">=</span><span class="n">connect</span> <span class="n">table_type</span><span class="o">=</span><span class="n">XML</span> <span class="n">file_name</span><span class="o">=</span><span class="s1">&#39;coffee.htm&#39;</span>
<span class="n">tabname</span><span class="o">=</span><span class="s1">&#39;TABLE&#39;</span> <span class="n">header</span><span class="o">=</span><span class="mi">1</span> <span class="n">option_list</span><span class="o">=</span><span class="s1">&#39;Coltype=HTML&#39;</span><span class="p">;</span>
</pre><p>You specify the fact that columns are located by position by setting the
 <em>Coltype</em> option to 'HTML'. Each column position (0 based) will be the value
of the <em>flag</em> column parameter that is set by default in sequence. Now we are
able to display the table:</p>
<div class="cstm-style darkheader-nospace-borders"><table><tr><th>Name</th><th>Cups</th><th>Type</th><th>Sugar</th></tr>
<tr><td>T. Sexton</td><td>10</td><td>Espresso</td><td>No</td></tr>
<tr><td>J. Dinnen</td><td>5</td><td>Decaf</td><td>Yes</td></tr>
</table>
</div><p><strong>Note 1:</strong> We specified '<code>header=n</code>' in the create statement to indicate
that the first n rows of the table are not data rows and should be skipped.</p>
<p><strong>Note 2:</strong> In this last example, we did not specify the node names using the
Rownode and Colnode options because when <em>Coltype</em> is set to 'HTML' they
default to '<code>Rownode=TR</code>' and '<code>Colnode=TD</code>'.</p>
<p><strong>Note 3:</strong> The <em>Coltype</em> option is a word only the first character of which
is significant. Recognized values are:</p>
<table><tr><td>T(ag) or N(ode)</td><td>Column names match a tag name (the default).</td></tr>
<tr><td>A(ttribute) or @</td><td>Column names match an attribute name.</td></tr>
<tr><td>H(tml) or C(ol) or P(os)</td><td>Column are retrieved by their position.</td></tr>
</table>
<h3 class="anchored_heading" id="new-file-setting">New file setting</h3>
<p>Some create options are used only when creating a table on a new file, i. e.
when inserting into a file that does not exist yet. When specified, the
'Header' option will create a header row with the name of the table columns.
This is chiefly useful for HTML tables to be displayed on a web browser.</p>
<p>Some new list-options are used in this context:</p>
<table><tr><td><strong>Encoding</strong></td><td>The encoding of the new document, defaulting to UTF-8.</td></tr>
<tr><td><strong>Attribute</strong></td><td>A list of 'attname=attvalue' separated by ';' to add to the table node.</td></tr>
<tr><td><strong>HeadAttr</strong></td><td>An attribute list to be added to the header row node.</td></tr>
</table>
<p>Let us see for instance, the following create statement:</p>
<pre class="fixed"><span class="k">create</span> <span class="k">table</span> <span class="nf">handlers</span> <span class="p">(</span>
  <span class="n">handler</span> <span class="kt">char</span><span class="p">(</span><span class="mi">64</span><span class="p">),</span>
  <span class="n">version</span> <span class="kt">char</span><span class="p">(</span><span class="mi">20</span><span class="p">),</span>
  <span class="n">author</span> <span class="kt">char</span><span class="p">(</span><span class="mi">64</span><span class="p">),</span>
  <span class="n">description</span> <span class="kt">char</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span>
  <span class="n">maturity</span> <span class="kt">char</span><span class="p">(</span><span class="mi">12</span><span class="p">))</span>
<span class="kp">engine</span><span class="o">=</span><span class="n">CONNECT</span> <span class="n">table_type</span><span class="o">=</span><span class="n">XML</span> <span class="n">file_name</span><span class="o">=</span><span class="s1">&#39;handlers.htm&#39;</span>
<span class="n">tabname</span><span class="o">=</span><span class="s1">&#39;TABLE&#39;</span> <span class="n">header</span><span class="o">=</span><span class="n">yes</span>
<span class="n">option_list</span><span class="o">=</span><span class="s1">&#39;coltype=HTML,encoding=ISO-8859-1,</span>
<span class="s1">attribute=border=1;cellpadding=5,headattr=bgcolor=yellow&#39;</span><span class="p">;</span>
</pre><p>Supposing the table file does not exist yet, the first insert into that table,
for instance by the following statement:</p>
<pre class="fixed"><span class="k">insert</span> <span class="k">into</span> <span class="n">handlers</span> <span class="k">select</span> <span class="n">plugin_name</span><span class="p">,</span> <span class="n">plugin_version</span><span class="p">,</span>
  <span class="n">plugin_author</span><span class="p">,</span> <span class="n">plugin_description</span><span class="p">,</span> <span class="n">plugin_maturity</span> <span class="k">from</span>
  <span class="n">information_schema</span><span class="p">.</span><span class="n">plugins</span> <span class="k">where</span> <span class="n">plugin_type</span> <span class="o">=</span> <span class="s1">&#39;DAEMON&#39;</span><span class="p">;</span>
</pre><p>will generate the following file:</p>
<pre class="fixed"><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;ISO-8859-1&quot;?&gt;</span>
<span class="c">&lt;!-- Created by CONNECT Version 3.05.0005 August 17, 2012 --&gt;</span>
<span class="nt">&lt;TABLE</span> <span class="na">border=</span><span class="s">&quot;1&quot;</span> <span class="na">cellpadding=</span><span class="s">&quot;5&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;TR</span> <span class="na">bgcolor=</span><span class="s">&quot;yellow&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;TH&gt;</span>handler<span class="nt">&lt;/TH&gt;</span>
    <span class="nt">&lt;TH&gt;</span>version<span class="nt">&lt;/TH&gt;</span>
    <span class="nt">&lt;TH&gt;</span>author<span class="nt">&lt;/TH&gt;</span>
    <span class="nt">&lt;TH&gt;</span>description<span class="nt">&lt;/TH&gt;</span>
    <span class="nt">&lt;TH&gt;</span>maturity<span class="nt">&lt;/TH&gt;</span>
  <span class="nt">&lt;/TR&gt;</span>
  <span class="nt">&lt;TR&gt;</span>
    <span class="nt">&lt;TD&gt;</span>Maria<span class="nt">&lt;/TD&gt;</span>
    <span class="nt">&lt;TD&gt;</span>1.5<span class="nt">&lt;/TD&gt;</span>
    <span class="nt">&lt;TD&gt;</span>Monty Program Ab<span class="nt">&lt;/TD&gt;</span>
    <span class="nt">&lt;TD&gt;</span>Compatibility aliases for the Aria engine<span class="nt">&lt;/TD&gt;</span>
    <span class="nt">&lt;TD&gt;</span>Gamma<span class="nt">&lt;/TD&gt;</span>
  <span class="nt">&lt;/TR&gt;</span>
<span class="nt">&lt;/TABLE&gt;</span>
</pre><p>This file can be used to display the table on a web browser (encoding should be
<code>ISO-8859-x</code>)</p>
<div class="cstm-style darkheader-nospace-borders"><table><tr><th>handler</th><th>version</th><th>author</th><th>description</th><th>maturity</th></tr>
<tr><td>Maria</td><td>1.5</td><td>Monty Program Ab</td><td>Compatibility aliases for the Aria engine</td><td>Gamma</td></tr>
</table>
</div><p><strong>Note:</strong> The XML document encoding is generally specified in the XML header
node and can be different from the DATA_CHARSET, which is always UTF-8 for XML
tables. Therefore the table DATA_CHARSET character set should be unspecified,
or specified as UTF8. The Encoding specification is useful only for new XML
files and ignored for existing files having their encoding already specified in
the header node.</p>
<h2 class="anchored_heading" id="notes">Notes</h2>
<ol><li id="_note-0">
    <a href="#_ref-0">&uarr;</a> CONNECT does not claim to be able to deal with
any XML document. Besides, those that can usefully be processed for data
analysis are likely to have a structure that can easily be transformed into a
table.</li>

<li id="_note-1">
    <a href="#_ref-1">&uarr;</a> With libxml2, sub tags text can be separated by 0 or several
blanks depending on the structure and indentation of the data file.</li>

<li id="_note-2">
    <a href="#_ref-2">&uarr;</a> This may cause some rows to be lost because an eventual where clause on the “multiple” column is applied only on the limited number of retrieved rows.</li>
</ol>

    </div>


        
            <div id="subscribe" class="well well-small hide hidden-print"
                 data-subscribe-url="/kb/en/connect-xml-table-type/+subscriptions/add"
                 data-unsubscribe-url="/kb/en/connect-xml-table-type/+subscriptions/remove">
            </div>
        

        
        
    
        <div class="simple_section_nav">
            <ul class="nav nav-pills">
                
                    <li><a href="/kb/en/connect-json-table-type/">
                        ← CONNECT JSON Table Type
                    </a>
                    </li>
                
                
                    <li><a href="/kb/en/connect-table-types/">
                        ↑ CONNECT Table Types ↑
                    </a>
                    </li>
                
                
                    <li class="pull-right"><a href="/kb/en/connect-ini-table-type/">
                        CONNECT INI Table Type →
                    </a>
                    </li>
                
            </ul>
        </div>
    

        

        
        <h2>Comments</h2>
        
    
    <div id="comments" data-node-id="4835" data-comments-url="/kb/en/connect-xml-table-type/+comments"
         data-reply-url="/kb/en/connect-xml-table-type/comments/post/">
        Comments loading...
    </div>

        

    </div>


                    <div id="content_disclaimer" class="graybox">
                        Content reproduced on this site is the property of its respective owners,
                        and this content is not reviewed in advance by MariaDB. The views, information and opinions
                        expressed by this content do not necessarily represent those of MariaDB or any other party.
                    </div>
                </div>
            </section>

            
                <div id="right_bar" class="col-md-2">
                    
    
        
        <ul class="section_navigation well well-small hidden-xs hidden-sm">
            
                <li class="parent"><a href="/kb/en/connect-table-types/">
                    ↑ CONNECT Table Types ↑
                </a>
                </li>
            
            
                
                    <li>
                        <a href="/kb/en/connect-table-types-overview/">
                            
                            CONNECT Table Types Overview
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/inward-and-outward-tables/">
                            
                            Inward and Outward Tables
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/connect-table-types-data-files/">
                            
                            CONNECT Table Types - Data Files
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/connect-zipped-file-tables/">
                            
                            CONNECT Zipped File Tables
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/connect-dos-and-fix-table-types/">
                            
                            CONNECT DOS and FIX Table Types
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/connect-dbf-table-type/">
                            
                            CONNECT DBF Table Type
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/connect-bin-table-type/">
                            
                            CONNECT BIN Table Type
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/connect-vec-table-type/">
                            
                            CONNECT VEC Table Type
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/connect-csv-and-fmt-table-types/">
                            
                            CONNECT CSV and FMT Table Types
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/connect-nosql-table-types/">
                            
                            CONNECT - NoSQL Table Types
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/connect-files-retrieved-using-rest-queries/">
                            
                            CONNECT - Files Retrieved Using Rest Queries
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/connect-json-table-type/">
                            
                            CONNECT JSON Table Type
                        </a>
                    </li>
                
            
                
                    <li class="active">
                        <span>CONNECT XML Table Type</span>
                        
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/connect-ini-table-type/">
                            
                            CONNECT INI Table Type
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/connect-external-table-types/">
                            
                            CONNECT - External Table Types
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/connect-odbc-table-type-accessing-tables-from-another-dbms/">
                            
                            CONNECT ODBC Table Type: Accessing Tables From Another DBMS
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/connect-jdbc-table-type-accessing-tables-from-another-dbms/">
                            
                            CONNECT JDBC Table Type: Accessing Tables from Another DBMS
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/connect-mongo-table-type/">
                            
                            CONNECT MONGO Table Type: Accessing Collections from MongoDB
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/connect-mysql-table-type-accessing-mysqlmariadb-tables/">
                            
                            CONNECT MYSQL Table Type: Accessing MySQL/MariaDB Tables
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/connect-proxy-table-type/">
                            
                            CONNECT PROXY Table Type
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/connect-xcol-table-type/">
                            
                            CONNECT XCOL Table Type
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/connect-occur-table-type/">
                            
                            CONNECT OCCUR Table Type
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/connect-pivot-table-type/">
                            
                            CONNECT PIVOT Table Type
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/connect-tbl-table-type-table-list/">
                            
                            CONNECT TBL Table Type: Table List
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/connect-using-the-tbl-and-mysql-table-types-together/">
                            
                            CONNECT - Using the TBL and MYSQL Table Types Together
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/connect-table-types-special-virtual-tables/">
                            
                            CONNECT Table Types - Special &#34;Virtual&#34; Tables
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/connect-table-types-vir/">
                            
                            CONNECT Table Types - VIR
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/connect-table-types-oem/">
                            
                            CONNECT Table Types - OEM: Implemented in an External LIB
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/connect-table-types-catalog-tables/">
                            
                            CONNECT Table Types - Catalog Tables
                        </a>
                    </li>
                
            
        </ul>
    
    

                </div>
            
        </div>
    </div>
</div>

<!-- Footer -->
<footer id="footer">
    <div class="footer">
        <div class="container">
            <div class="row">
                <div class="col-xs-12">
                    <ul class="list-inline text-center footer-nav">
                        <li>
                            <h5>
                                <a href="https://mariadb.com/products" title="Products">Products</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/services" title="Services">Services</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/pricing" title="Pricing">Pricing</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/resources" title="Resources">Resources</a>
                            </h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/about-us" title="About MariaDB">About Us</a></h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/download" title="Download">Download MariaDB</a></h5>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="row row-10">
                
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div id="block-footerformcontact" class="block block-block-content block-block-contentd754ee1b-3cc9-40e7-9ef4-f504f1197fb1">
                        
                            <h5 style="font-weight: 400;">Subscribe to our newsletter!</h5>
                            <script src="//app-sj15.marketo.com/js/forms2/js/forms2.min.js"></script><form id="mktoForm_1498"></form>
                            <script>
                                <!--//--><![CDATA[// ><!--
                                MktoForms2.loadForm("//app-sj15.marketo.com", "573-PXI-984", 1498);
                                //--><!]]]]><![CDATA[>
                                //--><!]]>
                            </script>
                        
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div class="footer-copyright">
                        <div class="text-center">
                            <ul class="list-inline no-margin">
                                <li>
                                    <a href="/legal" title="Legal">Legal</a>
                                </li>
                                <li>
                                    <a href="/privacy-policy" title="Privacy Policy">Privacy Policy</a>
                                </li>
                                <li>
                                    <a href="/cookie-policy/" title="Cookies">Cookie Policy</a>
                                </li>
                            </ul>
                            <p>Copyright &copy; 2024 MariaDB. All rights reserved.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
</footer>
</div>

<div id="ajax_loading">
    <img src="/kb/static/images/ajax-loader.a51c5608d01a.gif" />
</div>

    <!-- Google Tag Manager -->
    <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-MK2847"
                      height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
            '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MK2847');</script>
    <!-- End Google Tag Manager -->

</body>

<script type="text/javascript" src="/kb/static/js/main.1587e3a666fc.js" charset="utf-8"></script>

</html>