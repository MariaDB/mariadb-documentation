<!DOCTYPE html>
<html>
<head data-cookie-domain=""
      data-cookie-path="/">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="apple-touch-icon" sizes="180x180" href="/kb/static/images/favicons/apple-touch-icon.159e713979be.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/kb/static/images/favicons/favicon-32x32.bc0ac1d5d11e.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/kb/static/images/favicons/favicon-16x16.5801f8f0f34e.png">
    <link rel="shortcut icon" href="/kb/static/images/favicons/favicon.d122d305dee4.ico" type="image/x-icon" />

    <title>would some one tell me what is wrong with this function - Source - MariaDB Knowledge Base</title>

    <link href="/kb/static/css/main.f7633538c846.css" rel="stylesheet" type="text/css" />

    
        <meta name="robots" content="noindex, nofollow">
    

    

    <!-- FB Open Graph tags -->
    <meta property="og:title" content="would some one tell me what is wrong with this function - Source" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://mariadb.com/kb/en/would-some-one-tell-me-what-is-wrong-with-this-function/+source/" />
    <meta property="og:image" content="http://mariadb.comaskmonty-logo.png" />
    <meta property="og:site_name" content="MariaDB KnowledgeBase" />
    <meta property="fb:admins" content="514852603" />
    <meta property="og:description" content="" />

    <meta name="description" content="" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="//fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet"/>
    
</head>
<body class="mpkb nodes autoresize nodes_source jqui" id="nodes_source">





<div id="menu-mobile" class="visible-sm visible-xs">

    <div>
        <div id="mobile-close-menu" class="text-right">
            <a href="javascript:void(0)" title="Close Menu" id="back-main" class="toggle-menu">X<span></span></a>
        </div>
    </div>
    <div class="mainmenu-mobile">
        <ul class="ls-none ul-menu">
            <li data-sub="submenu5"><a class="open-form-search" href="/kb/search/" title="Search">Search </a></li>
            <li data-sub="submenu0"><a href="/products" title="Products">Products</a><span class="arrow-main"></span></li>
            <li data-sub="submenu1"><a href="/services" title="Services">Services</a><span class="arrow-main"></span></li>
            <li data-sub="submenu2"><a href="/resources" title="Resources">Resources</a><span class="arrow-main"></span></li>
            <li data-sub="submenu3"><a href="/about-us" title="About">About</a><span class="arrow-main"></span></li>
            <li data-sub="submenu4"><a href="/contact" title="Contact">Contact</a></li>
        </ul>
    </div>

    <div class="nav-top-mobile">
        <div class="select-box form">

            <ul class="inline-block-md mb-none top-nav">
                <li>

                </li>
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/would-some-one-tell-me-what-is-wrong-with-this-function/+source/"> Login</a>
                    </li>
                
            </ul>



        </div>
        <p class="text-center copyright">Copyright &copy; 2025 MariaDB. All rights reserved.</p>
    </div>
</div>
<div class="violator-wrap d-none" id="top_violator">
    <div class="container">
        <div class="row">
            <div class="col-xs-12 col-sm-12">
                <div class="violator-outer">
                    <div class="violator-inner">
                        <div class="row">
                            <div class="col-xs-12 col-sm-9 col-lg-7 col-lg-offset-2" id="top_violator_content">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="content-link" target="_blank" rel="nofollow noreferrer">
                                    <span>The Ultimate Guide to High Availability with MariaDB</span>
                                </a>
                            </div>
                            <div class="col-xs-12 col-sm-3" id="top_violator_cta">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="btn btn-mariadb" target="_blank" rel="nofollow noreferrer">Download Now</a>
                            </div>
                        </div>
                    </div>
                    <button type="button" class="btn btn-link close-btn">
                        <svg xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 24 24" width="15px" height="15px"><path d="M 4.9902344 3.9902344 A 1.0001 1.0001 0 0 0 4.2929688 5.7070312 L 10.585938 12 L 4.2929688 18.292969 A 1.0001 1.0001 0 1 0 5.7070312 19.707031 L 12 13.414062 L 18.292969 19.707031 A 1.0001 1.0001 0 1 0 19.707031 18.292969 L 13.414062 12 L 19.707031 5.7070312 A 1.0001 1.0001 0 0 0 18.980469 3.9902344 A 1.0001 1.0001 0 0 0 18.292969 4.2929688 L 12 10.585938 L 5.7070312 4.2929688 A 1.0001 1.0001 0 0 0 4.9902344 3.9902344 z"/></svg>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="wrapper">
<div id="top-nav">
    <div class="container">
        <ul class="hidden-sm hidden-xs" >
            <li><a href="https://mariadb.com/kb/">Knowledge Base</a></li>
            <li><a href="https://mariadb.com/contact/">Contact</a></li>
            
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/would-some-one-tell-me-what-is-wrong-with-this-function/+source/" rel="nofollow">Login</a>
                    </li>
                
            
            
            <li id="search-form">
                <form action="/kb/en/+search/" method="get" id="search-block-form" accept-charset="UTF-8">
                    <input id="search" title="Enter the terms you wish to search for."
                           placeholder="Search . . ." type="text"
                           name="q" value="" size="15" maxlength="128" class="form-text"
                           data-autocomplete-url="/kb/en/+search/autocomplete/">
                    <input type="hidden" name="quick" value="1" />
                    <input type="hidden" name="source" value="kb" />
                </form>
            </li>
            <li><a id="search-toggler" href="/kb/search/">Search</a></li>
            
        </ul>
    </div>
</div>
<div id="navbar-bottom" class="navbar">
    <div class="container">
        
        
        
        
        <div class="row">
            <div class="col-md-3 col-sm-9 col-xs-9">
                <a class="brand" href="/" title="MariaDB">
                    <img src="/kb/static/images/logo-2018-black.95f5978ae14d.png">
                </a>
            </div>
            <div class="col-md-9 hidden-sm hidden-xs">
                <div class="main-menu">
                    <ul id="main-menu" class="nav navbar-nav inline-block-sm">
    <li class="has-sub full-menu">
        <a href="/products" title="Products">Products</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/solutions" title="Solutions">Solutions</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/resources" title="Resources">Resources</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/about-us" title="Company">Company</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/pricing" title="Pricing">Pricing</a>
    </li>
    
    <li class="">
        <a class="button electric-eel small top-bar-right-download" href="/downloads/">Download</a>
    </li>
</ul>
                </div>
            </div>
            <div class="col-md-3 visible-sm visible-xs col-sm-3 col-xs-3 ps-rv">
                <div class="navbar-header text-right pull-right">
                    <button type="button" class="menu-control toggle-menu" id="open-menu">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="main">
    <div class="container">
        

        <div id="subheader1" class="clearfix">
            <div class="pull-left">
                
                <div id="breadcrumbs" class="breadcrumb">
                    <a href="/kb/en/">Knowledge Base</a>
                    


    
    » <a class="crumb" href="/kb/en/documentation/">MariaDB Server Documentation</a>
    

    
    » <a class="crumb" href="/kb/en/using-mariadb-server/">Using MariaDB Server</a>
    

    
    » <a class="crumb" href="/kb/en/sql-statements-structure/">SQL Statements &amp; Structure</a>
    

    
    » <a class="crumb" href="/kb/en/sql-statements/">SQL Statements</a>
    

    
    » <a class="crumb" href="/kb/en/built-in-functions/">Built-in Functions</a>
    


    » <a class="node_link crumb" href="/kb/en/would-some-one-tell-me-what-is-wrong-with-this-function/">would some one tell me what is wrong with this function</a>


                </div>
                
            </div>
        </div>
    </div>
    <div class="container" id="container-main">
        <div class="row">
            
            
                
                <aside id="sidebar-first" class="sidebar col-md-2 hidden-xs hidden-sm hidden-print">
                    
                        
                        <ul id="category_menu" class="nav nav-pills nav-stacked">
                            <li><a href="/kb/en/">Home</a></li>
                            
                                
                                    <li><a href="/kb/en/+questions/">Open Questions</a></li>
                                
                                <li><a href="/kb/en/documentation/">MariaDB Server</a></li>
                                <li><a href="/kb/en/maxscale/">MariaDB MaxScale</a></li>
                                <li><a href="/kb/en/mariadb-columnstore/">MariaDB ColumnStore</a></li>
                                <li><a href="/kb/en/connectors/">Connectors</a></li>
                            

                        </ul>
                    

                    
                        <div>
    

<div class="well well-small box actions"><div>

        <a class="btn btn-block btn-small" href="/kb/en/would-some-one-tell-me-what-is-wrong-with-this-function/">Return to question</a>
    
</div>
</div>

</div>
                    

                    

































                </aside>
            
            
            
                
            
            
            <section id="content" class="limited_width col-md-10 clearfix">
                
                    <h1>would some one tell me what is wrong with this function - Source</h1>
                

                



                <div>
                    

    

    
    <div class="revision_info">
        <dl class="table">
            <dt>Revision</dt>
            <dd><a href="/kb/en/would-some-one-tell-me-what-is-wrong-with-this-function/+r/51461/">51461</a></dd>
            <dt>User</dt>
            <dd>
<span class="user" id="user-4959">
<a href="/kb/user/id/4959" title="">Mohammed Al Kurwi</a>
</span></dd>
            <dt>Date</dt>
            <dd>

<span class="datetime" title="2017-02-02 07:12">2017-02-02 07:12</span></dd>
        </dl>
    </div>
    


    
        <textarea id="question_source" class="creole_source autogrow">Iget this error when I apply: 
Operation failed: There was an error while applying the SQL script to the database.
ERROR 1064: You have an error in your SQL syntax; check the manual that corresponds to your MariaDB server version for the right syntax to use near &#39;FUNCTION `fn_number2words`(_Number double(18,2))
       RETURNS varchar(8000) 
 &#39; at line 1

----------------------------------------------------------------------------

This is the Function


FUNCTION `fn_number2words`(_Number double(18,2))

       RETURNS varchar(8000) 

    BEGIN

        DECLARE _inputNumber VARCHAR(38);

        DECLARE _outputString VARCHAR(8000);

        DECLARE _length INT;

        DECLARE _counter INT;

        DECLARE _loops INT DEFAULT 0;

        DECLARE _position INT;

        DECLARE _chunk CHAR(3); -- for chunks of 3 numbers

        DECLARE _tensones CHAR(2);

        DECLARE _hundreds CHAR(1);

        DECLARE _tens CHAR(1);

        DECLARE _ones CHAR(1);

        DECLARE _cents varchar(50);

        DECLARE _numtmp1 varchar(50);

        DECLARE _numtmp2 varchar(50);

        DECLARE _numtmp3 varchar(50);

IF _Number = 0 THEN

        SET _outputString = &#39;Zero&#39;;

    ELSE

        SET _cents = REPLACE(CAST((_Number % 1)*100 as char), &#39;.00&#39;, &#39;&#39;);

    -- initialize the variables

    SELECT  REPLACE(CAST((_Number - (_Number % 1)) as char), &#39;.00&#39;, &#39;&#39;),

            &#39;&#39;,
            1

     INTO _inputNumber, _outputString, _counter;

        IF MOD(LENGTH(_inputNumber), 3) = 1 THEN

            SET _inputNumber = CONCAT(&#39;00&#39;, _inputNumber);

        ELSEIF  MOD(LENGTH(_inputNumber), 3) = 2 THEN

            SET _inputNumber = CONCAT(&#39;0&#39;, _inputNumber);

        END IF;

     SELECT LENGTH(_inputNumber),
                    (LENGTH(_inputNumber)/3),
                    LENGTH(_inputNumber)/3

     INTO _length, _position, _loops;

        WHILE _counter &lt;= _loops DO

        SET _chunk = SUBSTR(_inputNumber, ((_position-1)*3)+1, 3);

        IF _chunk &lt;&gt; &#39;000&#39; THEN

            SELECT 

            SUBSTR(_chunk, 2, 2), SUBSTR(_chunk, 1, 1), SUBSTR(_chunk, 2, 1), SUBSTR(_chunk, 3, 1)

            INTO

             _tensones,

             _hundreds,

             _tens,

             _ones;

             /*SELECT _inputNumber, _chunk, _tensones, _hundreds, _tens, _ones, _counter, _position, _loops, CAST(_tensones as 
UNSIGNED INT);*/

             IF CAST(_tensones as UNSIGNED) &lt;= 20 OR _ones=&#39;0&#39; THEN

                SELECT word INTO _numtmp1 FROM tbl_numbers WHERE number = _tensones;

                SELECT CASE _counter 

                       WHEN 1 THEN &#39;&#39; -- No name

                       WHEN 2 THEN &#39; thousand &#39; WHEN 3 THEN &#39; million &#39;

                       WHEN 4 THEN &#39; billion &#39;  WHEN 5 THEN &#39; trillion &#39;

                       WHEN 6 THEN &#39; quadrillion &#39; WHEN 7 THEN &#39; quintillion &#39;

                       WHEN 8 THEN &#39; sextillion &#39;  WHEN 9 THEN &#39; septillion &#39;

                       WHEN 10 THEN &#39; octillion &#39;  WHEN 11 THEN &#39; nonillion &#39;

                       WHEN 12 THEN &#39; decillion &#39;  WHEN 13 THEN &#39; undecillion &#39;

                       ELSE &#39;&#39; END 

                       INTO _numtmp2;

                SET _outputString = CONCAT(_numtmp1, _numtmp2, _outputString);

             ELSE

                SELECT word INTO _numtmp1 FROM tbl_numbers WHERE number = CONCAT(_tens,&#39;0&#39;);

                SELECT word INTO _numtmp2 FROM tbl_numbers WHERE number = CONCAT(&#39;0&#39;,_ones);

                SELECT CASE _counter WHEN 1 THEN &#39;&#39; -- No name

                       WHEN 2 THEN &#39; thousand &#39; WHEN 3 THEN &#39; million &#39;

                       WHEN 4 THEN &#39; billion &#39;  WHEN 5 THEN &#39; trillion &#39;

                       WHEN 6 THEN &#39; quadrillion &#39; WHEN 7 THEN &#39; quintillion &#39;

                       WHEN 8 THEN &#39; sextillion &#39;  WHEN 9 THEN &#39; septillion &#39;

                       WHEN 10 THEN &#39; octillion &#39;  WHEN 11 THEN &#39; nonillion &#39;

                       WHEN 12 THEN &#39; decillion &#39;   WHEN 13 THEN &#39; undecillion &#39;

                       ELSE &#39;&#39; END

                       INTO _numtmp3;


                SET _outputString = CONCAT(&#39; &#39;,_numtmp1, &#39;-&#39;,_numtmp2, _numtmp3, _outputString);

             END IF;

             -- now get the hundreds

            IF _hundreds &lt;&gt; &#39;0&#39; THEN

                SELECT word INTO _numtmp1 FROM tbl_numbers WHERE number = CONCAT(&#39;0&#39;,_hundreds);

                SET _outputString = CONCAT(_numtmp1, &#39; hundred &#39;, _outputString);

            END IF;

        END IF;

        /* seed variables */

        SELECT (_counter+1), (_position-1) 

            INTO _counter, _position;

        END WHILE;

 END IF;

 IF RTRIM(LTRIM(_outputString)) = &#39;&#39; THEN

    SET _outputString = &#39;&#39;;

 ELSE

    SET _outputString = CONCAT(_outputString, &#39; PESOS AND &#39;);

 END IF;

 SET _outputString = UPPER(CONCAT(_outputString,_cents,&#39;/100 CENT(S)&#39;)); -- return the result

 RETURN _outputString;

END


-------------------------------------------------------------------------------------

Also, is there a better function that u guys know about that convert numbers to words ?
Thanks..</textarea>
    

    
        
            <h2>Answer</h2>
        
        <textarea id="answer_source" class="creole_source autogrow">Make sure you understand what [[replication-and-binary-log-server-system-variables/#log_bin_trust_function_creators|log_bin_trust_function_creators]] does and that you&#39;re happy setting it. Alternatively, read up on what [[create-function|DETERMINISTIC, NO SQL and READS SQL DATA]] do and use one of them in your definition.</textarea>
    


                    <div id="content_disclaimer" class="graybox">
                        Content reproduced on this site is the property of its respective owners,
                        and this content is not reviewed in advance by MariaDB. The views, information and opinions
                        expressed by this content do not necessarily represent those of MariaDB or any other party.
                    </div>
                </div>
            </section>

            
        </div>
    </div>
</div>

<!-- Footer -->
<footer id="footer">
    <div class="footer">
        <div class="container">
            <div class="row">
                <div class="col-xs-12">
                    <ul class="list-inline text-center footer-nav">
                        <li>
                            <h5>
                                <a href="https://mariadb.com/products" title="Products">Products</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/solutions" title="Solutions">Solutions</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/resources" title="Resources">Resources</a>
                            </h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/about-us" title="About MariaDB">Company</a></h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/pricing" title="Pricing">Pricing</a>
                            </h5>
                        </li>
                        
                        
                        <li>
                            <h5><a href="https://mariadb.com/downloads" title="Download">Download MariaDB</a></h5>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="row row-10">
                
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div id="block-footerformcontact" class="block block-block-content block-block-contentd754ee1b-3cc9-40e7-9ef4-f504f1197fb1">
                        
                            <h5 style="font-weight: 400;">Subscribe to our newsletter!</h5>
                            <script src="//app-sj15.marketo.com/js/forms2/js/forms2.min.js"></script><form id="mktoForm_1498"></form>
                            <script>
                                <!--//--><![CDATA[// ><!--
                                MktoForms2.loadForm("//app-sj15.marketo.com", "573-PXI-984", 1498);
                                //--><!]]]]><![CDATA[>
                                //--><!]]>
                            </script>
                        
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div class="footer-copyright">
                        <div class="text-center">
                            <ul class="list-inline no-margin">
                                <li>
                                    <a href="/legal" title="Legal">Legal</a>
                                </li>
                                <li>
                                    <a href="/privacy-policy" title="Privacy Policy">Privacy Policy</a>
                                </li>
                                <li>
                                    <a href="/cookie-policy/" title="Cookies">Cookie Policy</a>
                                </li>
                            </ul>
                            <p>Copyright &copy; 2025 MariaDB. All rights reserved.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
</footer>
</div>

<div id="ajax_loading">
    <img src="/kb/static/images/ajax-loader.a51c5608d01a.gif" />
</div>

    <!-- Google Tag Manager -->
    <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-MK2847"
                      height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
            '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MK2847');</script>
    <!-- End Google Tag Manager -->

</body>

<script type="text/javascript" src="/kb/static/js/main.1587e3a666fc.js" charset="utf-8"></script>

</html>