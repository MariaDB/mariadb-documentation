<!DOCTYPE html>
<html>
<head data-cookie-domain=""
      data-cookie-path="/">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="apple-touch-icon" sizes="180x180" href="/kb/static/images/favicons/apple-touch-icon.159e713979be.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/kb/static/images/favicons/favicon-32x32.bc0ac1d5d11e.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/kb/static/images/favicons/favicon-16x16.5801f8f0f34e.png">
    <link rel="shortcut icon" href="/kb/static/images/favicons/favicon.d122d305dee4.ico" type="image/x-icon" />

    <title> Common Monitor Parameters - MariaDB Knowledge Base</title>

    <link href="/kb/static/css/main.9a0d7dcebefd.css" rel="stylesheet" type="text/css" />

    

    <!-- FB Open Graph tags -->
    <meta property="og:title" content=" Common Monitor Parameters" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://mariadb.com/kb/en/mariadb-maxscale-23-common-monitor-parameters/" />
    <meta property="og:image" content="http://mariadb.comaskmonty-logo.png" />
    <meta property="og:site_name" content="MariaDB KnowledgeBase" />
    <meta property="fb:admins" content="514852603" />
    <meta property="og:description" content="Common Monitor Parameters
This document lists optional parameters that all current monitors support.


Common Monitor Parameters
Parameters
user
password
monitor_interval
back..." />

    <meta name="description" content="Common Monitor Parameters
This document lists optional parameters that all current monitors support.


Common Monitor Parameters
Parameters
user
password
monitor_interval
back..." />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="//fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet"/>
    
</head>
<body class="mpkb nodes products nodes_view jqui" id="nodes_view">





<div id="menu-mobile" class="visible-sm visible-xs">

    <div>
        <div id="mobile-close-menu" class="text-right">
            <a href="javascript:void(0)" title="Close Menu" id="back-main" class="toggle-menu">X<span></span></a>
        </div>
    </div>
    <div class="mainmenu-mobile">
        <ul class="ls-none ul-menu">
            <li data-sub="submenu5"><a class="open-form-search" href="/kb/search/" title="Search">Search </a></li>
            <li data-sub="submenu0"><a href="/products" title="Products">Products</a><span class="arrow-main"></span></li>
            <li data-sub="submenu1"><a href="/services" title="Services">Services</a><span class="arrow-main"></span></li>
            <li data-sub="submenu2"><a href="/resources" title="Resources">Resources</a><span class="arrow-main"></span></li>
            <li data-sub="submenu3"><a href="/about-us" title="About">About</a><span class="arrow-main"></span></li>
            <li data-sub="submenu4"><a href="/contact" title="Contact">Contact</a></li>
        </ul>
    </div>

    <div class="nav-top-mobile">
        <div class="select-box form">

            <ul class="inline-block-md mb-none top-nav">
                <li>

                </li>
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/mariadb-maxscale-23-common-monitor-parameters/"> Login</a>
                    </li>
                
            </ul>



        </div>
        <p class="text-center copyright">Copyright &copy; 2023 MariaDB. All rights reserved.</p>
    </div>
</div>
<div id="wrapper">
<div id="top-nav">
    <div class="container">
        <ul class="hidden-sm hidden-xs" >
            <li><a href="https://mariadb.com/kb/">Knowledge Base</a></li>
            <li><a href="https://mariadb.com/contact/">Contact</a></li>
            
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/mariadb-maxscale-23-common-monitor-parameters/" rel="nofollow">Login</a>
                    </li>
                
            
            
            <li id="search-form">
                <form action="/kb/en/+search/" method="get" id="search-block-form" accept-charset="UTF-8">
                    <input id="search" title="Enter the terms you wish to search for."
                           placeholder="Search . . ." type="text"
                           name="q" value="" size="15" maxlength="128" class="form-text"
                           data-autocomplete-url="/kb/en/+search/autocomplete/">
                    <input type="hidden" name="quick" value="1" />
                    <input type="hidden" name="source" value="kb" />
                </form>
            </li>
            <li><a id="search-toggler" href="/kb/search/">Search</a></li>
            
        </ul>
    </div>
</div>
<div id="navbar-bottom" class="navbar">
    <div class="container">
        
        
        
        
        <div class="row">
            <div class="col-md-3 col-sm-9 col-xs-9">
                <a class="brand" href="/" title="MariaDB">
                    <img src="/kb/static/images/logo-2018-black.95f5978ae14d.png">
                </a>
            </div>
            <div class="col-md-9 hidden-sm hidden-xs">
                <div class="main-menu">
                    <ul id="main-menu" class="nav navbar-nav inline-block-sm">
    <li class="has-sub full-menu">
        <a href="/products" title="Products">Products</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/services" title="Services">Services</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/pricing" title="Pricing">Pricing</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/resources" title="Resources">Resources</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/about-us" title="About Us">About Us</a>
    </li>
    <li class="">
        <a class="button electric-eel small top-bar-right-download" href="/downloads/">Download</a>
    </li>
</ul>
                </div>
            </div>
            <div class="col-md-3 visible-sm visible-xs col-sm-3 col-xs-3 ps-rv">
                <div class="navbar-header text-right pull-right">
                    <button type="button" class="menu-control toggle-menu" id="open-menu">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="main">
    <div class="container">
        

        <div id="subheader1" class="clearfix">
            <div class="pull-left">
                
                <div id="breadcrumbs" class="breadcrumb">
                    <a href="/kb/en/">Knowledge Base</a>
                    


    
    » <a class="crumb" href="/kb/en/maxscale/">MariaDB MaxScale</a>
    

    
    » <a class="crumb" href="/kb/en/mariadb-maxscale-mariadb-maxscale-23/">MariaDB MaxScale 2.3</a>
    

    
    » <a class="crumb" href="/kb/en/maxscale-23-monitors/">MaxScale 2.3 Monitors</a>
    


    » <a class="node_link crumb" href="/kb/en/mariadb-maxscale-23-common-monitor-parameters/"> Common Monitor Parameters</a>


                </div>
                
            </div>
        </div>
    </div>
    <div class="container" id="container-main">
        <div class="row">
            
            
                
                <aside id="sidebar-first" class="sidebar col-md-2 hidden-xs hidden-sm hidden-print">
                    
                        
                        <ul id="category_menu" class="nav nav-pills nav-stacked">
                            <li><a href="/kb/en/">Home</a></li>
                            
                                
                                    <li><a href="/kb/en/+questions/">Open Questions</a></li>
                                
                                <li><a href="/kb/en/documentation/">MariaDB Server</a></li>
                                <li><a href="/kb/en/maxscale/">MariaDB MaxScale</a></li>
                                <li><a href="/kb/en/mariadb-columnstore/">MariaDB ColumnStore</a></li>
                                <li><a href="/kb/en/connectors/">Connectors</a></li>
                            

                        </ul>
                    

                    
<div>



<div class="well well-small box actions"><div>

        <a class="btn btn-block btn-blue btn-sm" href="/kb/en/mariadb-maxscale-23-common-monitor-parameters/+history" rel="nofollow">History</a>
        
        
        
        <a class="btn btn-block btn-blue btn-sm" href="/kb/en/mariadb-maxscale-23-common-monitor-parameters/+source/">Source</a>
        
        <a class="btn btn-block btn-blue btn-sm flag" href="/kb/en/mariadb-maxscale-23-common-monitor-parameters/+flag"
                data-flag-url="/kb/en/mariadb-maxscale-23-common-monitor-parameters/+flag" rel="nofollow">
                Flag as Spam / Inappropriate</a>
        
        <a class="btn btn-block btn-blue btn-sm" href="/kb/en/mariadb-maxscale-23-common-monitor-parameters/+translate/">
                Translate</a>
        

</div>
</div>





<div class="well well-small box node_info"><div>

    <dl>
        <dt>Created</dt>
        <dd>

<span class="datetime" title="2018-10-09 17:02">4 years, 8 months ago</span></dd>

        <dt>Modified</dt>
        <dd>

<span class="datetime" title="2018-10-09 17:02">4 years, 8 months ago</span></dd>

        <dt>Type</dt>
        <dd>article</dd>

        <dt>Status</dt>
        <dd>active</dd>

        <dt>License</dt>
        <dd>
            
                <a href="/kb/en/mariadb-maxscale-23-common-monitor-parameters/+license/">CC BY-SA / Gnu FDL</a>
            
        </dd>

        
        <dt>Source</dt>
        <dd><a href="https://github.com/mariadb-corporation/MaxScale/blob/2.3.20/Documentation/Monitors/Monitor-Common.md">GitHub</a></dd>
        
    </dl>

    
    <ul class="rss_feeds">
        <li><a href="/kb/en/mariadb-maxscale-23-common-monitor-parameters/+history/feed/">
            History</a>
        </li>
        <li><a href="/kb/en/mariadb-maxscale-23-common-monitor-parameters/+comments/feed/">
            Comments</a>
        </li>
    </ul>
    

</div>
</div>





    
    
    

<div class="well well-small box attachments"><div><div class="edit_link pull-right"><a href="/kb/en/mariadb-maxscale-23-common-monitor-parameters/+edit/attachments/">Edit</a></div><h5>Attachments</h5></div><div>

        
            <div class="no_data">No attachments exist</div>
        
    
</div>
</div>

    



    
    






</div>


                    

































                </aside>
            
            
            
                
            
            
                
            
            <section id="content" class="limited_width col-md-8 clearfix">
                
                    <h1> Common Monitor Parameters</h1>
                

                



                <div>
                    
    

    
    
    

    <div class="node creole">
        
        
        


    
    <div class="answer formatted">
        <h1 id="common-monitor-parameters">Common Monitor Parameters</h1>
<p>This document lists optional parameters that all current monitors support.</p>
<div>
<ul>
<li><a href="#common-monitor-parameters">Common Monitor Parameters</a><ul>
<li><a href="#parameters">Parameters</a><ul>
<li><a href="#user">user</a></li>
<li><a href="#password">password</a></li>
<li><a href="#monitor_interval">monitor_interval</a></li>
<li><a href="#backend_connect_timeout">backend_connect_timeout</a></li>
<li><a href="#backend_write_timeout">backend_write_timeout</a></li>
<li><a href="#backend_read_timeout">backend_read_timeout</a></li>
<li><a href="#backend_connect_attempts">backend_connect_attempts</a></li>
<li><a href="#disk_space_threshold">disk_space_threshold</a></li>
<li><a href="#disk_space_check_interval">disk_space_check_interval</a></li>
<li><a href="#script">script</a></li>
<li><a href="#script_timeout">script_timeout</a></li>
<li><a href="#events">events</a></li>
</ul>
</li>
<li><a href="#script-events">Script events</a><ul>
<li><a href="#journal_max_age">journal_max_age</a></li>
</ul>
</li>
<li><a href="#monitor-crash-safety">Monitor Crash Safety</a></li>
<li><a href="#script-example">Script example</a></li>
</ul>
</li>
</ul>
</div>
<h2 id="parameters">Parameters</h2>
<h3 id="user"><code>user</code></h3>
<p>Username used by the monitor to connect to the backend servers. If a server defines
the <code>monitoruser</code> parameter, that value will be used instead.</p>
<h3 id="password"><code>password</code></h3>
<p>Password for the user defined with the <code>user</code> parameter. If a server defines
the <code>monitorpw</code> parameter, that value will be used instead.</p>
<p><strong>Note:</strong> In older versions of MaxScale this parameter was called <code>passwd</code>. The
  use of <code>passwd</code> was deprecated in MaxScale 2.3.0.</p>
<h3 id="monitor_interval"><code>monitor_interval</code></h3>
<p>Defines, in milliseconds, how often the monitor updates the status of the
servers. The default value is 2000 (2 seconds). Choose a lower value if servers
should be queried more often. The smallest possible value is 100. If querying
the servers takes longer than <code>monitor_interval</code>, the effective update rate is
reduced.</p>
<p>The default value of <code>monitor_interval</code> was updated from 10000 milliseconds to
2000 milliseconds in MaxScale 2.2.0.</p>
<div><pre><span></span>monitor_interval=2500
</pre></div>


<h3 id="backend_connect_timeout"><code>backend_connect_timeout</code></h3>
<p>This parameter controls the timeout for connecting to a monitored server. It is
in seconds and the minimum value is 1 second. The default value for this
parameter is 3 seconds.</p>
<div><pre><span></span>backend_connect_timeout=6
</pre></div>


<h3 id="backend_write_timeout"><code>backend_write_timeout</code></h3>
<p>This parameter controls the timeout for writing to a monitored server. It is in
seconds and the minimum value is 1 second. The default value for this parameter
is 3 seconds.</p>
<div><pre><span></span>backend_write_timeout=4
</pre></div>


<h3 id="backend_read_timeout"><code>backend_read_timeout</code></h3>
<p>This parameter controls the timeout for reading from a monitored server. It is
in seconds and the minimum value is 1 second. The default value for this
parameter is 3 seconds.</p>
<div><pre><span></span>backend_read_timeout=2
</pre></div>


<h3 id="backend_connect_attempts"><code>backend_connect_attempts</code></h3>
<p>This parameter defines the maximum times a backend connection is attempted every
monitoring loop. The default is 1. Every attempt may take up to
<code>backend_connect_timeout</code> seconds to perform. If none of the attempts are
successful, the backend is considered to be unreachable and down.</p>
<div><pre><span></span>backend_connect_attempts=3
</pre></div>


<h3 id="disk_space_threshold"><code>disk_space_threshold</code></h3>
<p>This parameter duplicates the <code>disk_space_threshold</code>
<a href="/kb/en/maxscale-23-getting-started-mariadb-maxscale-configuration-usage-scenarios/#disk_space_threshold">server parameter</a>.
If the parameter has <em>not</em> been specified for a server, then the one specified
for the monitor is applied.</p>
<p>That is, if the disk configuration is the same on all servers monitored by
the monitor, it is sufficient (and more convenient) to specify the disk
space threshold in the monitor section, but if the disk configuration is
different on all or some servers, then the disk space threshold can be
specified individually for each server.</p>
<p>For example, suppose <code>server1</code>, <code>server2</code> and <code>server3</code> are identical
in all respects. In that case we can specify <code>disk_space_threshold</code>
in the monitor.</p>
<div><pre><span></span>[server1]
type=server
...

[server2]
type=server
...

[server3]
type=server
...

[monitor]
type=monitor
servers=server1,server2,server3
disk_space_threshold=/data:80
...
</pre></div>


<p>However, if the servers are heterogenious with the disk used for the
data directory mounted on different paths, then the disk space threshold
must be specified separately for each server.</p>
<div><pre><span></span>[server1]
type=server
disk_space_threshold=/data:80
...

[server2]
type=server
disk_space_threshold=/Data:80
...

[server3]
type=server
disk_space_threshold=/DBData:80
...

[monitor]
type=monitor
servers=server1,server2,server3
...
</pre></div>


<p>If <em>most</em> of the servers have the data directory disk mounted on
the same path, then the disk space threshold can be specified on
the monitor and separately on the server with a different setup.</p>
<div><pre><span></span>[server1]
type=server
disk_space_threshold=/DbData:80
...

[server2]
type=server
...

[server3]
type=server
...

[monitor]
type=monitor
servers=server1,server2,server3
disk_space_threshold=/data:80
...
</pre></div>


<p>Above, <code>server1</code> has the disk used for the data directory mounted
at <code>/DbData</code> while both <code>server2</code> and <code>server3</code> have it mounted on
<code>/data</code> and thus the setting in the monitor covers them both.</p>
<h3 id="disk_space_check_interval"><code>disk_space_check_interval</code></h3>
<p>With this positive integer parameter it can be specified in milliseconds
the minimum amount of time between disk space checks. The default value
is <code>20000</code>, which means that the disk space situation will be checked
once every 20 seconds.</p>
<p>Note that as the checking is made as part of the regular monitor interval
cycle, the disk space check interval is affected by the value of
<code>monitor_interval</code>. In particular, even if the value of
<code>disk_space_check_interval</code> is smaller than that of <code>monitor_interval</code>,
the checking will still take place at <code>monitor_interval</code> intervals.</p>
<div><pre><span></span>disk_space_check_interval=10000
</pre></div>


<h3 id="script"><code>script</code></h3>
<p>This command will be executed on a server state change. The parameter should
be an absolute path to a command or the command should be in the executable
path. The user running MaxScale should have execution rights to the file itself
and the directory it resides in. The script may have placeholders which
MaxScale will substitute with useful information when launching the script.</p>
<p>The placeholders and their substition results are:</p>
<ul>
<li><code>$INITIATOR</code> -&gt; IP and port of the server which initiated the event</li>
<li><code>$EVENT</code> -&gt; event description, e.g. "server_up"</li>
<li><code>$LIST</code> -&gt; list of IPs and ports of all servers</li>
<li><code>$NODELIST</code> -&gt; list of IPs and ports of all running servers</li>
<li><code>$SLAVELIST</code> -&gt; list of IPs and ports of all slave servers</li>
<li><code>$MASTERLIST</code> -&gt; list of IPs and ports of all master servers</li>
<li><code>$SYNCEDLIST</code> -&gt; list of IPs and ports of all synced Galera nodes</li>
<li><code>$PARENT</code> -&gt; IP and port of the parent of the server which initiated the event.
For master-slave setups, this will be the master if the initiating server is a
slave.</li>
<li><code>$CHILDREN</code> -&gt; list of IPs and ports of the child nodes of the server who
initiated the event. For master-slave setups, this will be a list of slave
servers if the initiating server is a master.</li>
</ul>
<p>The expanded variable value can be an empty string if no servers match the
variable's requirements. For example, if no masters are available <code>$MASTERLIST</code>
will expand into an empty string. The list-type substitutions will only contain
servers monitored by the current monitor.</p>
<div><pre><span></span>script=/home/user/myscript.sh initiator=$INITIATOR event=$EVENT live_nodes=$NODELIST
</pre></div>


<p>The above script could be executed as:</p>
<div><pre><span></span>/home/user/myscript.sh initiator=[192.168.0.10]:3306 event=master_down live_nodes=[192.168.0.201]:3306,[192.168.0.121]:3306
</pre></div>


<p>See section <a href="#script-example">Script example</a> below for an example script.</p>
<p>Any output by the executed script will be logged into the MaxScale log. Each
outputted line will be logged as a separate log message.</p>
<p>The log level on which the messages are logged depends on the format of the
messages. If the first word in the output line is one of <code>alert:</code>, <code>error:</code>,
<code>warning:</code>, <code>notice:</code>, <code>info:</code> or <code>debug:</code>, the message will be logged on the
corresponding level. If the message is not prefixed with one of the keywords,
the message will be logged on the notice level. Whitespace before, after or
between the keyword and the colon is ignored and the matching is
case-insensitive.</p>
<p>Currently, the script must not execute any of the following MaxCtrl and/or
MaxAdmin calls as they cause a deadlock:</p>
<ul>
<li><code>alter monitor</code> to the monitor executing the script</li>
<li><code>stop monitor</code> to the monitor executing the script</li>
<li><code>call command</code> to a MariaDB-Monitor that is executing the script</li>
</ul>
<h3 id="script_timeout"><code>script_timeout</code></h3>
<p>The timeout for the executed script in seconds. The default value is 90
seconds.</p>
<p>If the script execution exceeds the configured timeout, it is stopped by sending
a SIGTERM signal to it. If the process does not stop, a SIGKILL signal will be
sent to it once the execution time is greater than twice the configured timeout.</p>
<h3 id="events"><code>events</code></h3>
<p>A list of event names which cause the script to be executed. If this option is not defined, all events cause the script to be executed. The list must contain a comma separated list of event names.</p>
<div><pre><span></span>events=master_down,slave_down
</pre></div>


<h2 id="script-events">Script events</h2>
<p>Here is a table of all possible event types and their descriptions that the monitors can be called with.</p>
<table>
<thead>
<tr>
<th>Event Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>master_down</td>
<td>A Master server has gone down</td>
</tr>
<tr>
<td>master_up</td>
<td>A Master server has come up</td>
</tr>
<tr>
<td>slave_down</td>
<td>A Slave server has gone down</td>
</tr>
<tr>
<td>slave_up</td>
<td>A Slave server has come up</td>
</tr>
<tr>
<td>server_down</td>
<td>A server with no assigned role has gone down</td>
</tr>
<tr>
<td>server_up</td>
<td>A server with no assigned role has come up</td>
</tr>
<tr>
<td>ndb_down</td>
<td>A MySQL Cluster node has gone down</td>
</tr>
<tr>
<td>ndb_up</td>
<td>A MySQL Cluster node has come up</td>
</tr>
<tr>
<td>lost_master</td>
<td>A server lost Master status</td>
</tr>
<tr>
<td>lost_slave</td>
<td>A server lost Slave status</td>
</tr>
<tr>
<td>lost_ndb</td>
<td>A MySQL Cluster node lost node membership</td>
</tr>
<tr>
<td>new_master</td>
<td>A new Master was detected</td>
</tr>
<tr>
<td>new_slave</td>
<td>A new Slave was detected</td>
</tr>
<tr>
<td>new_ndb</td>
<td>A new MySQL Cluster node was found</td>
</tr>
</tbody>
</table>
<h3 id="journal_max_age"><code>journal_max_age</code></h3>
<p>The maximum journal file age in seconds. The default value is 28800 seconds.</p>
<p>When the monitor starts, it reads any stored journal files. If the journal file
is older than the value of <em>journal_max_age</em>, it will be removed and the monitor
starts with no prior knowledge of the servers.</p>
<h2 id="monitor-crash-safety">Monitor Crash Safety</h2>
<p>Starting with MaxScale 2.2.0, the monitor modules keep an on-disk journal of the
latest server states. This change makes the monitors crash-safe when options
that introduce states are used. It also allows the monitors to retain stateful
information when MaxScale is restarted.</p>
<p>For MySQL monitor, options that introduce states into the monitoring process are
the <code>detect_stale_master</code> and <code>detect_stale_slave</code> options, both of which are
enabled by default. Galeramon has the <code>disable_master_failback</code> parameter which
introduces a state.</p>
<p>The default location for the server state journal is in
<code>/var/lib/maxscale/&lt;monitor name&gt;/monitor.dat</code> where <code>&lt;monitor name&gt;</code> is the
name of the monitor section in the configuration file. If MaxScale crashes or is
shut down in an uncontrolled fashion, the journal will be read when MaxScale is
started. To skip the recovery process, manually delete the journal file before
starting MaxScale.</p>
<h2 id="script-example">Script example</h2>
<p>Below is an example monitor configuration which launches a script with all
supported substitutions. The example script reads the results and prints it to
file and sends it as email.</p>
<div><pre><span></span>[MyMonitor]
type=monitor
module=mariadbmon
servers=C1N1,C1N2,C1N3
user=maxscale
password=password
monitor_interval=10000
script=/path/to/maxscale_monitor_alert_script.sh --initiator=$INITIATOR --parent=$PARENT --children=$CHILDREN --event=$EVENT --node_list=$NODELIST --list=$LIST --master_list=$MASTERLIST --slave_list=$SLAVELIST --synced_list=$SYNCEDLIST
</pre></div>


<p>File "maxscale_monitor_alert_script.sh":</p>
<table><tbody><tr><td><div><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57</pre></div></td><td><div><pre><span></span><span>#!/usr/bin/env bash</span>

<span>initiator</span><span>=</span><span>""</span>
<span>parent</span><span>=</span><span>""</span>
<span>children</span><span>=</span><span>""</span>
<span>event</span><span>=</span><span>""</span>
<span>node_list</span><span>=</span><span>""</span>
<span>list</span><span>=</span><span>""</span>
<span>master_list</span><span>=</span><span>""</span>
<span>slave_list</span><span>=</span><span>""</span>
<span>synced_list</span><span>=</span><span>""</span>

process_arguments<span>()</span>
<span>{</span>
   <span>while</span> <span>[</span> <span>"</span><span>$1</span><span>"</span> !<span>=</span> <span>""</span> <span>]</span><span>;</span> <span>do</span>
      <span>if</span> <span>[[</span> <span>"</span><span>$1</span><span>"</span> <span>=</span>~ ^--initiator<span>=</span>.* <span>]]</span><span>;</span> <span>then</span>
         <span>initiator</span><span>=</span><span>${</span><span>1</span><span>#</span><span>'--initiator='</span><span>}</span>
      <span>elif</span> <span>[[</span> <span>"</span><span>$1</span><span>"</span> <span>=</span>~ ^--parent.* <span>]]</span><span>;</span> <span>then</span>
         <span>parent</span><span>=</span><span>${</span><span>1</span><span>#</span><span>'--parent='</span><span>}</span>
      <span>elif</span> <span>[[</span> <span>"</span><span>$1</span><span>"</span> <span>=</span>~ ^--children.* <span>]]</span><span>;</span> <span>then</span>
         <span>children</span><span>=</span><span>${</span><span>1</span><span>#</span><span>'--children='</span><span>}</span>
      <span>elif</span> <span>[[</span> <span>"</span><span>$1</span><span>"</span> <span>=</span>~ ^--event.* <span>]]</span><span>;</span> <span>then</span>
         <span>event</span><span>=</span><span>${</span><span>1</span><span>#</span><span>'--event='</span><span>}</span>
      <span>elif</span> <span>[[</span> <span>"</span><span>$1</span><span>"</span> <span>=</span>~ ^--node_list.* <span>]]</span><span>;</span> <span>then</span>
         <span>node_list</span><span>=</span><span>${</span><span>1</span><span>#</span><span>'--node_list='</span><span>}</span>
      <span>elif</span> <span>[[</span> <span>"</span><span>$1</span><span>"</span> <span>=</span>~ ^--list.* <span>]]</span><span>;</span> <span>then</span>
         <span>list</span><span>=</span><span>${</span><span>1</span><span>#</span><span>'--list='</span><span>}</span>
      <span>elif</span> <span>[[</span> <span>"</span><span>$1</span><span>"</span> <span>=</span>~ ^--master_list.* <span>]]</span><span>;</span> <span>then</span>
         <span>master_list</span><span>=</span><span>${</span><span>1</span><span>#</span><span>'--master_list='</span><span>}</span>
      <span>elif</span> <span>[[</span> <span>"</span><span>$1</span><span>"</span> <span>=</span>~ ^--slave_list.* <span>]]</span><span>;</span> <span>then</span>
         <span>slave_list</span><span>=</span><span>${</span><span>1</span><span>#</span><span>'--slave_list='</span><span>}</span>
      <span>elif</span> <span>[[</span> <span>"</span><span>$1</span><span>"</span> <span>=</span>~ ^--synced_list.* <span>]]</span><span>;</span> <span>then</span>
         <span>synced_list</span><span>=</span><span>${</span><span>1</span><span>#</span><span>'--synced_list='</span><span>}</span>
      <span>fi</span>
      <span>shift</span>
   <span>done</span>
<span>}</span>

process_arguments <span>$@</span>
<span>read</span> -r -d <span>''</span> MESSAGE <span>&lt;&lt; EOM</span>
<span>A server has changed state. The following information was provided:</span>

<span>Initiator: $initiator</span>
<span>Parent: $parent</span>
<span>Children: $children</span>
<span>Event: $event</span>
<span>Node list: $node_list</span>
<span>List: $list</span>
<span>Master list: $master_list</span>
<span>Slave list: $slave_list</span>
<span>Synced list: $synced_list</span>
<span>EOM</span>

<span># print message to file</span>
<span>echo</span> <span>"</span><span>$MESSAGE</span><span>"</span> &gt; /path/to/script_output.txt
<span># email the message</span>
<span>echo</span> <span>"</span><span>$MESSAGE</span><span>"</span> <span>|</span> mail -s <span>"MaxScale received </span><span>$event</span><span> event for initiator </span><span>$initiator</span><span>."</span> mariadb_admin@domain.com
</pre></div>
</td></tr></tbody></table>
    </div>


        
            <div id="subscribe" class="well well-small hide hidden-print"
                 data-subscribe-url="/kb/en/mariadb-maxscale-23-common-monitor-parameters/+subscriptions/add"
                 data-unsubscribe-url="/kb/en/mariadb-maxscale-23-common-monitor-parameters/+subscriptions/remove">
            </div>
        

        
        
    
        <div class="simple_section_nav">
            <ul class="nav nav-pills">
                
                    <li><a href="/kb/en/mariadb-maxscale-23-columnstore-monitor/">
                        ←  ColumnStore Monitor
                    </a>
                    </li>
                
                
                    <li><a href="/kb/en/maxscale-23-monitors/">
                        ↑ MaxScale 2.3 Monitors ↑
                    </a>
                    </li>
                
                
                    <li class="pull-right"><a href="/kb/en/mariadb-maxscale-23-galera-monitor/">
                         Galera Monitor →
                    </a>
                    </li>
                
            </ul>
        </div>
    

        

        
        <h2>Comments</h2>
        
    
    <div id="comments" data-node-id="8054" data-comments-url="/kb/en/mariadb-maxscale-23-common-monitor-parameters/+comments"
         data-reply-url="/kb/en/mariadb-maxscale-23-common-monitor-parameters/comments/post/">
        Comments loading...
    </div>

        

    </div>


                    <div id="content_disclaimer" class="graybox">
                        Content reproduced on this site is the property of its respective owners,
                        and this content is not reviewed in advance by MariaDB. The views, information and opinions
                        expressed by this content do not necessarily represent those of MariaDB or any other party.
                    </div>
                </div>
            </section>

            
                <div id="right_bar" class="col-md-2">
                    
    
        
        <ul class="section_navigation well well-small hidden-xs hidden-sm">
            
                <li class="parent"><a href="/kb/en/maxscale-23-monitors/">
                    ↑ MaxScale 2.3 Monitors ↑
                </a>
                </li>
            
            
                
                    <li>
                        <a href="/kb/en/mariadb-maxscale-23-aurora-monitor/">
                            
                             Aurora Monitor
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/mariadb-maxscale-23-columnstore-monitor/">
                            
                             ColumnStore Monitor
                        </a>
                    </li>
                
            
                
                    <li class="active">
                        <span> Common Monitor Parameters</span>
                        
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/mariadb-maxscale-23-galera-monitor/">
                            
                             Galera Monitor
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/mariadb-maxscale-23-mariadb-monitor/">
                            
                             MariaDB Monitor
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/mariadb-maxscale-23-multi-master-monitor/">
                            
                             Multi-Master Monitor
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/mariadb-maxscale-23-ndb-cluster-monitor/">
                            
                             NDB Cluster Monitor
                        </a>
                    </li>
                
            
        </ul>
    
    

                </div>
            
        </div>
    </div>
</div>

<!-- Footer -->
<footer id="footer">
    <div class="footer">
        <div class="container">
            <div class="row row-10">
                <div class="col-md-2 col-xs-4 item">
                    <h5>
                        <a href="/products" title="Products">Products</a>
                    </h5>
                    <ul>
                        <li id="menu-item-7816" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-7816"><a href="https://mariadb.com/products/mariadb-platform/">MariaDB Platform</a></li>
                        <li id="menu-item-7815" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-7815"><a href="https://mariadb.com/products/skysql/">MariaDB SkySQL</a></li>
                        <li id="menu-item-4172" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4172"><a href="https://mariadb.com/pricing/">Pricing</a></li>
                        <li id="menu-item-4163" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4163"><a href="https://mariadb.com/downloads/">Download MariaDB</a></li>
                    </ul>
                </div>
                <div class="col-md-2 col-xs-4 item">
                    <h5>
                        <a href="/services" title="Services">Services</a>
                    </h5>
                    <ul>
                        <li id="menu-item-4169" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4169"><a href="https://mariadb.com/services/remote-dba/">Remote DBA</a></li>
                        <li id="menu-item-41691" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4169"><a href="https://mariadb.com/services/skydba/">SkyDBA</a></li>
                        <li id="menu-item-4167" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4167"><a href="https://mariadb.com/services/enterprise-architect/">Enterprise Architect</a></li>
                        <li id="menu-item-4170" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4170"><a href="https://mariadb.com/services/technical-support-services/">Technical Support</a></li>
                        <li id="menu-item-4168" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4168"><a href="https://mariadb.com/services/migration-practice/">Migration Practice</a></li>
                        <li id="menu-item-4166" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4166"><a href="https://mariadb.com/services/consulting/">Consulting</a></li>
                        <li id="menu-item-4171" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4171"><a href="https://mariadb.com/services/training/">Training</a></li>
                    </ul>
                </div>
                <div class="col-md-2 col-xs-4 item">
                    <h5>
                        <a href="/resources" title="Resources">Resources</a>
                    </h5>
                    <ul>
                        <li id="menu-item-41751" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4175"><a href="https://mariadb.com/docs/">Documentation</a></li>
                        <li id="menu-item-41752" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4175"><a href="https://mariadb.com/developers/">Developers</a></li>
                        <li id="menu-item-4175" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4175"><a href="https://mariadb.com/resources/blog/">Blog</a></li>
                        <li id="menu-item-5462" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-5462"><a href="https://support.mariadb.com">Support</a></li>
                        <li id="menu-item-6004" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-6004"><a href="https://mariadb.com/openworks/">OpenWorks</a></li>
                        <li id="menu-item-60041" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-6004"><a href="https://mariadb.com/resources/customer-stories/">Customer Stories</a></li>
                        <li id="menu-item-7817" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-7817"><a href="https://mariadb.com/resources/events/">Events</a></li>
                        <li id="menu-item-4177" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4177"><a href="https://mariadb.com/roadshow/">MariaDB Roadshow</a></li>
                    </ul>
                </div>
                <div class="visible-xs visible-sm clear"></div>
                <div class="col-md-2 col-xs-5 item">
                    <h5>
                        <a href="/about-us" title="About MariaDB">About</a>
                    </h5>
                    <ul>
                        <li id="menu-item-4173" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4173"><a href="https://mariadb.com/contact/">Contact</a></li>
                        <li id="menu-item-4161" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4161"><a href="https://mariadb.com/about-us/leadership/">Leadership</a></li>
                        <li id="menu-item-4162" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4162"><a href="https://mariadb.com/about-us/partners/">Partners</a></li>
                        <li id="menu-item-4174" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4174"><a href="https://mariadb.com/newsroom/">Newsroom</a></li>
                        <li id="menu-item-4160" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4160"><a href="https://mariadb.com/about-us/investors/">Investors</a></li>
                        <li id="menu-item-4159" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4159"><a href="https://mariadb.com/about-us/careers/">Careers</a></li>
                        <li id="menu-item-41591" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4159"><a href="https://mariadb.com/trust/">Trust Center</a></li>
                        <li id="menu-item-41592" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4159"><a href="https://mariadb.com/vulnerability-reporting/">Vulnerability Reporting</a></li>
                    </ul>
                </div>
                <div class="col-md-4 col-xs-7 item">
                    <div id="block-footercontact" class="block block-block-content block-block-content22b3af28-0754-44ec-a5c6-4466568f37e3">
                        <h5><a href="/contact" title="Contact">Contact</a></h5>
                    </div>
                    <div class="social">
                        <ul class="list-inline">
                            <li>
                                <a target="_blank" href="https://www.facebook.com/MariaDB.dbms/" title="Facebook">
                                    <i class="fa fa-facebook" aria-hidden="true"></i>
                                </a>
                            </li>
                            <li>
                                <a target="_blank" href="https://twitter.com/mariadb" title="Twitter">
                                    <i class="fa fa-twitter" aria-hidden="true"></i>
                                </a>
                            </li>
                            <li>
                                <a target="_blank" href="https://www.linkedin.com/company/mariadb-corporation?trk=company_logo " title="LinkedIn">
                                    <i class="fa fa-linkedin" aria-hidden="true"></i>
                                </a>
                            </li>
                        </ul>
                    </div>
                    <div id="block-footerformcontact" class="block block-block-content block-block-contentd754ee1b-3cc9-40e7-9ef4-f504f1197fb1">
                        
                            <p>Subscribe to our newsletter!</p>
                            <script src="//app-sj15.marketo.com/js/forms2/js/forms2.min.js"></script><form id="mktoForm_1498"></form>
                            <script>
                                <!--//--><![CDATA[// ><!--
                                MktoForms2.loadForm("//app-sj15.marketo.com", "573-PXI-984", 1498);
                                //--><!]]]]><![CDATA[>
                                //--><!]]>
                            </script>
                        
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="footer-copyright">
        <div class="container text-center">
            <ul class="list-inline no-margin">
                <li>
                    <a href="/legal" title="Legal">Legal</a>
                </li>
                <li>
                    <a href="/privacy-policy" title="Privacy Policy">Privacy Policy</a>
                </li>
                <li>
                    <a href="/cookie-policy/" title="Cookies">Cookie Policy</a>
                </li>
            </ul>
            <p>Copyright &copy; 2023 MariaDB. All rights reserved.</p>
        </div>
    </div>
</footer>
</div>

<div id="ajax_loading">
    <img src="/kb/static/images/ajax-loader.a51c5608d01a.gif" />
</div>

    <!-- Google Tag Manager -->
    <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-MK2847"
                      height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
            '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MK2847');</script>
    <!-- End Google Tag Manager -->

</body>

<script type="text/javascript" src="/kb/static/js/main.fed4ec768178.js" charset="utf-8"></script>

</html>