<?xml version="1.0" encoding="utf-8"?>
<rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title>MariaDB Knowledge Base Comments for: Migrating from MySql: MariaDB server closing client connections unexpectedly</title><link>https://mariadb.com/kb/en/migrating-from-mysql-mariadb-server-closing-client-connections-unexpectedly/+comments/feed/</link><description></description><atom:link href="https://mariadb.com/kb/en/migrating-from-mysql-mariadb-server-closing-client-connections-unexpectedly/+comments/feed/" rel="self"></atom:link><language>en-us</language><lastBuildDate>Fri, 13 Jun 2025 01:42:26 +0000</lastBuildDate><item><title>Re: Migrating from MySql: MariaDB server closing client connections unexpectedly</title><link>https://mariadb.com/kb/en/migrating-from-mysql-mariadb-server-closing-client-connections-unexpectedly/+comments/842</link><description>&lt;p&gt;Hibernate supports connection url. Connection url  can have &lt;/p&gt;
&lt;p&gt;"sessionVariables=wait_timeout=1000000" in the URL query string&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Vladislav Vaintroub</dc:creator><guid>https://mariadb.com/kb/en/migrating-from-mysql-mariadb-server-closing-client-connections-unexpectedly/+comments/842</guid></item><item><title>Re: Migrating from MySql: MariaDB server closing client connections unexpectedly</title><link>https://mariadb.com/kb/en/migrating-from-mysql-mariadb-server-closing-client-connections-unexpectedly/+comments/841</link><description>&lt;p&gt;We are using Hibernate so haven't come across any configuration to set wait_timeout for the connection. I'll check again.
And for the moment it is ok to restart the DB as this is just the development environment.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Vivek Kubaji</dc:creator><guid>https://mariadb.com/kb/en/migrating-from-mysql-mariadb-server-closing-client-connections-unexpectedly/+comments/841</guid></item><item><title>Re: Migrating from MySql: MariaDB server closing client connections unexpectedly</title><link>https://mariadb.com/kb/en/migrating-from-mysql-mariadb-server-closing-client-connections-unexpectedly/+comments/838</link><description>&lt;p&gt;you should not set global wait timeout, it will affect the timeout in the connection started after you current one.&lt;/p&gt;
&lt;p&gt;Instead, you should set wait_timeout for your JDBC connection, with "set wait_timeout=57600"&lt;/p&gt;
&lt;p&gt;You can test if this was correctly set with "select @@wait_timeout" (please, do this from the same connection). This is essential. If you change my.cnf, you need to restart the server&lt;/p&gt;
&lt;p&gt;you need to set log_warnings=2, and look in your error log file. The path of the error log file is the  value of the "log_error" variable.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Vladislav Vaintroub</dc:creator><guid>https://mariadb.com/kb/en/migrating-from-mysql-mariadb-server-closing-client-connections-unexpectedly/+comments/838</guid></item><item><title>Re: Migrating from MySql: MariaDB server closing client connections unexpectedly</title><link>https://mariadb.com/kb/en/migrating-from-mysql-mariadb-server-closing-client-connections-unexpectedly/+comments/833</link><description>&lt;p&gt;I tried to set the parameter 'wait_timeout' exclusively but the value was not reflecting in the output of 'show variables'. I tried to set it dynamically using the commands - 'set wait_timeout=57600;', 'set @@GLOBAL.wait_timeout=57600;' and also in the '/etc/my.cnf' file but none them worked. Still the default value of '28800' was being used.&lt;/p&gt;
&lt;p&gt;Finally when I set the 'interactive_timeout' to 57600 the same value was reflected in 'wait_timeout'.&lt;/p&gt;
&lt;p&gt;In addition to that I added the parameter 'autoReconnect=true' in the connection URL of DBCP.&lt;/p&gt;
&lt;p&gt;After running the applications for about a day again the exceptions appeared again.&lt;/p&gt;
&lt;p&gt;I tried searching the Mariadb logs in '/var/log/mysqld.log' for information related to aborted connections, but couldn't find anything there. Is there any other file where this information is printed?&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Vivek Kubaji</dc:creator><guid>https://mariadb.com/kb/en/migrating-from-mysql-mariadb-server-closing-client-connections-unexpectedly/+comments/833</guid></item><item><title>Re: Migrating from MySql: MariaDB server closing client connections unexpectedly</title><link>https://mariadb.com/kb/en/migrating-from-mysql-mariadb-server-closing-client-connections-unexpectedly/+comments/828</link><description>&lt;p&gt;You can compare output of "show variables" with both MariaDB and MySQL to find the difference in variables.&lt;/p&gt;
&lt;p&gt;I'm not aware of any differences in my.cnf search logic, but you can start mysqld under strace to really find it out.&lt;/p&gt;
&lt;p&gt;You do not have to  change my.cnf, because you can set session variables in the connection URL (using documented sessionVariables parameter)&lt;/p&gt;
&lt;p&gt;If you're looking for the source of the difference, are you really-really sure it is caused by the server and not by the driver (since some parameters like clientInteractive are not supported MAriaDB JDBC)?&lt;/p&gt;
&lt;p&gt;Finally, if you really want to know about aborted connections, set log_warnings=2.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Vladislav Vaintroub</dc:creator><guid>https://mariadb.com/kb/en/migrating-from-mysql-mariadb-server-closing-client-connections-unexpectedly/+comments/828</guid></item><item><title>Re: Migrating from MySql: MariaDB server closing client connections unexpectedly</title><link>https://mariadb.com/kb/en/migrating-from-mysql-mariadb-server-closing-client-connections-unexpectedly/+comments/827</link><description>&lt;p&gt;Thanks for the suggestion. I hadn't thought of setting the parameter 'wait_timeout' separately. Will give that a try also and post the result after a couple of days.&lt;/p&gt;
&lt;p&gt;But even then my doubt remains. The same setup with the same 'my.cnf' file runs perfectly fine if I remove MariaDB and reinstall MySql server. We have been using MySql for several years now and all the parameters are fine tuned. So I am a bit apprehensive of playing around with the configurations and I expect the same configurations to work well.&lt;/p&gt;
&lt;p&gt;Is there any difference of behavior or any additional functionality in MariaDB related to this? Is there any additional configuration file that MariaDB reads?&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Vivek Kubaji</dc:creator><guid>https://mariadb.com/kb/en/migrating-from-mysql-mariadb-server-closing-client-connections-unexpectedly/+comments/827</guid></item><item><title>Re: Migrating from MySql: MariaDB server closing client connections unexpectedly</title><link>https://mariadb.com/kb/en/migrating-from-mysql-mariadb-server-closing-client-connections-unexpectedly/+comments/826</link><description>&lt;p&gt;You might be running into wait_timeout (&lt;a href="http://dev.mysql.com/doc/refman/5.6/en/server-system-variables.html#sysvar_wait_timeout"&gt;http://dev.mysql.com/doc/refman/5.6/en/server-system-variables.html#sysvar_wait_timeout&lt;/a&gt;). &lt;/p&gt;
&lt;p&gt;Increasing that, rather than interactive_timeout might help. MariaDB does not close client connections  just for the fun of it, there is always a reason (of those reasons, there are not many - client closes connection, or timeout, or kill)&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Vladislav Vaintroub</dc:creator><guid>https://mariadb.com/kb/en/migrating-from-mysql-mariadb-server-closing-client-connections-unexpectedly/+comments/826</guid></item></channel></rss>