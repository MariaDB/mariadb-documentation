<!DOCTYPE html>
<html>
<head data-cookie-domain=""
      data-cookie-path="/">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="apple-touch-icon" sizes="180x180" href="/kb/static/images/favicons/apple-touch-icon.159e713979be.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/kb/static/images/favicons/favicon-32x32.bc0ac1d5d11e.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/kb/static/images/favicons/favicon-16x16.5801f8f0f34e.png">
    <link rel="shortcut icon" href="/kb/static/images/favicons/favicon.d122d305dee4.ico" type="image/x-icon" />

    <title>Catalogs Overview - MariaDB Knowledge Base</title>

    <link href="/kb/static/css/main.f7633538c846.css" rel="stylesheet" type="text/css" />

    

    

    <!-- FB Open Graph tags -->
    <meta property="og:title" content="Catalogs Overview" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://mariadb.com/kb/en/catalogs-overview/" />
    <meta property="og:image" content="http://mariadb.comaskmonty-logo.png" />
    <meta property="og:site_name" content="MariaDB KnowledgeBase" />
    <meta property="fb:admins" content="514852603" />
    <meta property="og:description" content="Catalogs offer multi-tenancy." />

    <meta name="description" content="Catalogs offer multi-tenancy." />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="//fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet"/>
    
</head>
<body class="mpkb nodes products nodes_view jqui" id="nodes_view">





<div id="menu-mobile" class="visible-sm visible-xs">

    <div>
        <div id="mobile-close-menu" class="text-right">
            <a href="javascript:void(0)" title="Close Menu" id="back-main" class="toggle-menu">X<span></span></a>
        </div>
    </div>
    <div class="mainmenu-mobile">
        <ul class="ls-none ul-menu">
            <li data-sub="submenu5"><a class="open-form-search" href="/kb/search/" title="Search">Search </a></li>
            <li data-sub="submenu0"><a href="/products" title="Products">Products</a><span class="arrow-main"></span></li>
            <li data-sub="submenu1"><a href="/services" title="Services">Services</a><span class="arrow-main"></span></li>
            <li data-sub="submenu2"><a href="/resources" title="Resources">Resources</a><span class="arrow-main"></span></li>
            <li data-sub="submenu3"><a href="/about-us" title="About">About</a><span class="arrow-main"></span></li>
            <li data-sub="submenu4"><a href="/contact" title="Contact">Contact</a></li>
        </ul>
    </div>

    <div class="nav-top-mobile">
        <div class="select-box form">

            <ul class="inline-block-md mb-none top-nav">
                <li>

                </li>
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/catalogs-overview/"> Login</a>
                    </li>
                
            </ul>



        </div>
        <p class="text-center copyright">Copyright &copy; 2025 MariaDB. All rights reserved.</p>
    </div>
</div>
<div class="violator-wrap d-none" id="top_violator">
    <div class="container">
        <div class="row">
            <div class="col-xs-12 col-sm-12">
                <div class="violator-outer">
                    <div class="violator-inner">
                        <div class="row">
                            <div class="col-xs-12 col-sm-9 col-lg-7 col-lg-offset-2" id="top_violator_content">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="content-link" target="_blank" rel="nofollow noreferrer">
                                    <span>The Ultimate Guide to High Availability with MariaDB</span>
                                </a>
                            </div>
                            <div class="col-xs-12 col-sm-3" id="top_violator_cta">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="btn btn-mariadb" target="_blank" rel="nofollow noreferrer">Download Now</a>
                            </div>
                        </div>
                    </div>
                    <button type="button" class="btn btn-link close-btn">
                        <svg xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 24 24" width="15px" height="15px"><path d="M 4.9902344 3.9902344 A 1.0001 1.0001 0 0 0 4.2929688 5.7070312 L 10.585938 12 L 4.2929688 18.292969 A 1.0001 1.0001 0 1 0 5.7070312 19.707031 L 12 13.414062 L 18.292969 19.707031 A 1.0001 1.0001 0 1 0 19.707031 18.292969 L 13.414062 12 L 19.707031 5.7070312 A 1.0001 1.0001 0 0 0 18.980469 3.9902344 A 1.0001 1.0001 0 0 0 18.292969 4.2929688 L 12 10.585938 L 5.7070312 4.2929688 A 1.0001 1.0001 0 0 0 4.9902344 3.9902344 z"/></svg>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="wrapper">
<div id="top-nav">
    <div class="container">
        <ul class="hidden-sm hidden-xs" >
            <li><a href="https://mariadb.com/kb/">Knowledge Base</a></li>
            <li><a href="https://mariadb.com/contact/">Contact</a></li>
            
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/catalogs-overview/" rel="nofollow">Login</a>
                    </li>
                
            
            
            <li id="search-form">
                <form action="/kb/en/+search/" method="get" id="search-block-form" accept-charset="UTF-8">
                    <input id="search" title="Enter the terms you wish to search for."
                           placeholder="Search . . ." type="text"
                           name="q" value="" size="15" maxlength="128" class="form-text"
                           data-autocomplete-url="/kb/en/+search/autocomplete/">
                    <input type="hidden" name="quick" value="1" />
                    <input type="hidden" name="source" value="kb" />
                </form>
            </li>
            <li><a id="search-toggler" href="/kb/search/">Search</a></li>
            
        </ul>
    </div>
</div>
<div id="navbar-bottom" class="navbar">
    <div class="container">
        
        
        
        
        <div class="row">
            <div class="col-md-3 col-sm-9 col-xs-9">
                <a class="brand" href="/" title="MariaDB">
                    <img src="/kb/static/images/logo-2018-black.95f5978ae14d.png">
                </a>
            </div>
            <div class="col-md-9 hidden-sm hidden-xs">
                <div class="main-menu">
                    <ul id="main-menu" class="nav navbar-nav inline-block-sm">
    <li class="has-sub full-menu">
        <a href="/products" title="Products">Products</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/services" title="Services">Services</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/pricing" title="Pricing">Pricing</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/resources" title="Resources">Resources</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/about-us" title="About Us">About Us</a>
    </li>
    <li class="">
        <a class="button electric-eel small top-bar-right-download" href="/downloads/">Download</a>
    </li>
</ul>
                </div>
            </div>
            <div class="col-md-3 visible-sm visible-xs col-sm-3 col-xs-3 ps-rv">
                <div class="navbar-header text-right pull-right">
                    <button type="button" class="menu-control toggle-menu" id="open-menu">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="main">
    <div class="container">
        

        <div id="subheader1" class="clearfix">
            <div class="pull-left">
                
                <div id="breadcrumbs" class="breadcrumb">
                    <a href="/kb/en/">Knowledge Base</a>
                    


    
    » <a class="crumb" href="/kb/en/documentation/">MariaDB Server Documentation</a>
    

    
    » <a class="crumb" href="/kb/en/mariadb-administration/">MariaDB Administration</a>
    

    
    » <a class="crumb" href="/kb/en/user-server-security/">User &amp; Server Security</a>
    

    
    » <a class="crumb" href="/kb/en/user-account-management/">User Account Management</a>
    

    
    » <a class="crumb" href="/kb/en/catalogs/">Catalogs</a>
    


    » <a class="node_link crumb" href="/kb/en/catalogs-overview/">Catalogs Overview</a>


                </div>
                
            </div>
        </div>
    </div>
    <div class="container" id="container-main">
        <div class="row">
            
            
                
                <aside id="sidebar-first" class="sidebar col-md-2 hidden-xs hidden-sm hidden-print">
                    
                        
                        <ul id="category_menu" class="nav nav-pills nav-stacked">
                            <li><a href="/kb/en/">Home</a></li>
                            
                                
                                    <li><a href="/kb/en/+questions/">Open Questions</a></li>
                                
                                <li><a href="/kb/en/documentation/">MariaDB Server</a></li>
                                <li><a href="/kb/en/maxscale/">MariaDB MaxScale</a></li>
                                <li><a href="/kb/en/mariadb-columnstore/">MariaDB ColumnStore</a></li>
                                <li><a href="/kb/en/connectors/">Connectors</a></li>
                            

                        </ul>
                    

                    
<div>



<div class="well well-small box actions"><div>

        <a class="btn btn-block btn-blue btn-sm" href="/kb/en/catalogs-overview/+history" rel="nofollow">History</a>
        
        
        
        <a class="btn btn-block btn-blue btn-sm" href="/kb/en/catalogs-overview/+source/">Source</a>
        
        <a class="btn btn-block btn-blue btn-sm flag" href="/kb/en/catalogs-overview/+flag"
                data-flag-url="/kb/en/catalogs-overview/+flag" rel="nofollow">
                Flag as Spam / Inappropriate</a>
        
        <a class="btn btn-block btn-blue btn-sm" href="/kb/en/catalogs-overview/+translate/">
                Translate</a>
        

</div>
</div>





<div class="well well-small box node_info"><div>

    <dl>
        <dt>Created</dt>
        <dd>

<span class="datetime" title="2023-05-21 21:54">1 year, 10 months ago</span></dd>

        <dt>Modified</dt>
        <dd>

<span class="datetime" title="2024-12-10 09:06">3 months, 2 weeks ago</span></dd>

        <dt>Type</dt>
        <dd>article</dd>

        <dt>Status</dt>
        <dd>active</dd>

        <dt>License</dt>
        <dd>
            
                <a href="/kb/en/catalogs-overview/+license/">CC BY-SA / Gnu FDL</a>
            
        </dd>

        
    </dl>

    
    <ul class="rss_feeds">
        <li><a href="/kb/en/catalogs-overview/+history/feed/">
            History</a>
        </li>
        <li><a href="/kb/en/catalogs-overview/+comments/feed/">
            Comments</a>
        </li>
    </ul>
    

</div>
</div>





    
    
    

<div class="well well-small box attachments"><div><div class="edit_link pull-right"><a href="/kb/en/catalogs-overview/+edit/attachments/">Edit</a></div><h5>Attachments</h5></div><div>

        
            <ul>
                
                    <li><a href="/kb/en/catalogs-overview/+image/moving-to-catalogs">moving-to-catalogs</a><br />Moving SAS provider to user catalogs
                    </li>
                
            </ul>
        
    
</div>
</div>

    



    
    



    
    

<div class="well well-small box"><div><h5>Product Versions</h5></div><div>

        <ul id="product_chooser">
            
                <li class="mariadb_from_11_9">
                    <label><input type="checkbox" data-product-class="mariadb_from_11_9"
                            >MariaDB starting with 11.9</label>
                </li>
            
                <li class="mariadb_from_11_9">
                    <label><input type="checkbox" data-product-class="mariadb_from_11_9"
                            >MariaDB starting with 11.9</label>
                </li>
            
        </ul>
    
</div>
</div>






</div>


                    

































                </aside>
            
            
            
                
            
            
                
            
            <section id="content" class="limited_width col-md-8 clearfix">
                
                    <h1>Catalogs Overview</h1>
                

                



                <div>
                    
    

    
    
    

    <div class="node creole">
        
        
        


    
    <div class="answer formatted">
        <div class="mariadb_from_12_0 mariadb from_12_0 product"><h5 class="product_title">MariaDB starting with <a href="/kb/en/what-is-mariadb-120/">12.0</a></h5><p>Catalog support is planned for 12.0.</p>
</div>
<div class="table_of_contents well well-small">
<h3>Contents</h3>
 <ol class="toc">

    <li class="mariadb_from_12_0"><a href="#background" title="Background">Background</a></li>

    <li class="mariadb_from_12_0"><a href="#user-experience-with-catalogs" title="User Experience With Catalogs">User Experience With Catalogs</a></li>

    <li class="mariadb_from_12_0"><a href="#new-catalog-root-user" title="New &#39;catalog root user&#39;">New &#39;catalog root user&#39;</a></li>

    <li class="mariadb_from_12_0"><a href="#new-storage-layout" title="New Storage Layout">New Storage Layout</a></li>

    <li class="mariadb_from_12_0"><a href="#catalog-sql-commandsfunctions" title="Catalog SQL Commands/Functions">Catalog SQL Commands/Functions</a></li>

    <li class="mariadb_from_12_0"><a href="#changes-needed-in-mariadb-codebase" title="Changes Needed in MariaDB Codebase">Changes Needed in MariaDB Codebase</a></li>

    <li class="mariadb_from_12_0"><a href="#some-implementation-ideas" title="Some Implementation Ideas">Some Implementation Ideas</a></li>

    <li class="mariadb_from_12_0"><a href="#limitations-in-addition-to-limitations-listed-in-user-experience-with-catalogs" title="Limitations (in addition to limitations listed in “User experience with catalogs”)">Limitations (in addition to limitations listed in “User experience with catalogs”)</a></li>

    <li class="mariadb_from_12_0"><a href="#stage-2-not-in-first-release" title="Stage 2 (not in first release)">Stage 2 (not in first release)</a></li>

    <li class="mariadb_from_12_0"><a href="#stage-3" title="Stage 3">Stage 3</a></li>

    <li class="mariadb_from_12_0"><a href="#migration-of-existing-mariadb-original-mode-to-the-new-catalog-layout" title="Migration of Existing MariaDB Original Mode to the New Catalog Layout">Migration of Existing MariaDB Original Mode to the New Catalog Layout</a></li>

    <li class="mariadb_from_12_0"><a href="#migration-of-one-catalog-user-to-another-mariadb-server" title="Migration of One Catalog User to Another MariaDB Server">Migration of One Catalog User to Another MariaDB Server</a></li>

    <li class="mariadb_from_12_0"><a href="#other-things" title="Other Things">Other Things</a></li>

    <li class="mariadb_from_12_0"><a href="#see-also" title="See Also">See Also</a> </ol>
</li>
</div>
<div class="cstm-style greenbox"><p><a href="/kb/en/catalogs/">Catalogs</a> are an upcoming feature that will be included in a future release of MariaDB. The MariaDB catalogs will be a multi-tenancy feature where a single instance MariaDB server handles multiple independent tenants (customers), who have their own users, schemas etc.
See <a href="https://jira.mariadb.org/browse/MDEV-31542">MDEV-31542</a> "Add multi-tenancy catalogs to MariaDB" for details.</p>
</div><h2 class="anchored_heading" id="background">Background</h2>
<p>For hosting providers, a common solution, to drive down cost, is to have one MariaDB server support several different customers by creating one named schema for each of them.</p>
<p>This has however a lot of limitations:</p>
<ul start="1"><li>The user cannot have exactly the same schema(s) on the cloud as they have on premise.
</li><li>The user cannot use multiple schemas.
</li><li>The user cannot take a backup of all their data (not even with <a href="/kb/en/mariadb-dump/">mariadb-dump</a>). This is because the ‘mysql’ schema, which includes users, stored procedures etc. cannot be copied as its data is shared among all server users.
</li><li>The user cannot access the <a href="/kb/en/general-query-log/">general</a> or <a href="/kb/en/error-log/">error log</a>.
</li></ul>
<p>The other option is to have a MariaDB container for each tenant. The problem with this is that, because of the memory needed per container, one can only have a very limited number of tenants per computer.</p>
<p>The suggested solution is to solve all of the above and thus create a better multi-tenant database is to add support for catalogs to MariaDB. </p>
<p>The following picture shows the change:
<img src="/kb/en/catalogs-overview/+image/moving-to-catalogs" alt="moving-to-catalogs" title="moving-to-catalogs"></p>
<p>By each user having their own catalog, they will get very close to the same user experience as if they would have the MariaDB server for themselves.</p>
<p>Catalogs make it possible for hosting providers to have 10-100x more 'not that active' database users on a server compared to having a container or MariaDB server per customer (which limits a 192G server to about 100 customers with a 1G InnoDB buffer each).</p>
<h2 class="anchored_heading" id="user-experience-with-catalogs">User Experience With Catalogs</h2>
<ul start="1"><li>Each user is assigned one catalog. The user can specify their catalog in their my.cnf file or as an argument to clients or when connecting to MariaDB server.
</li><li>Users can <a href="/kb/en/mariadb-dump/">mariadb-dump</a> of all their tables (including the ‘mysql’ database) and apply it on their own on premise MariaDB or to another ‘MariaDB catalog’ to duplicate their setup.
</li><li>Each catalog has its own privilege system. This allows a MariaDB admin to create users independently in their catalog to users in any other catalog. This also implies that the catalog has to be part of the connect information as otherwise the server does not know which user table to use.
</li><li>If the user is using applications that don’t yet support catalogs, they can specify the catalog as part of the database when connecting to the server ('catalog.database') or by connecting to a specific port that is associated with a catalog.
</li><li>After logging in, a normal user can only see the objects (databases, tables, users etc) from their database. They cannot access other catalogs or change catalogs.
</li><li>A normal user cannot change the active catalog with a command. They need to logout from the current catalog and login to another.
</li></ul>
<p>For the end user, the MariaDB server will act as a normal a standalone server, with the following differences:</p>
<ul start="1"><li>When connecting to the server, a normal user must specify the catalog. If the connector software does not support catalogs, then the catalog should be specified in the database string. If the catalog is not specified, the 'def' catalog is assumed.
</li><li><a href="/kb/en/load-data-infile/">LOAD DATA INFILE</a> and <a href="/kb/en/select-into-outfile/">SELECT … INTO OUTFILE</a> can be configured to only be used with the catalog directory or a directory in it.
</li><li><a href="/kb/en/shutdown/">SHUTDOWN</a> command is only for the 'catalog root users'
</li><li>Replication (MASTER and SLAVE commands) are only for 'catalog root users'
</li><li>Errors from background task (like write error) will be logged into the system error log, not the catalog error log.
</li><li><a href="/kb/en/show-status/">SHOW STATUS</a> will show status data for the whole server, not only for the active catalog.
</li><li>The server will handle legacy applications by extending the default database in the connection to contain the catalog in the form “catalog/database”. See Appendix for details.
</li><li>Tables that are only read from the ‘def.mysql’ schema:
<ul start="1"><li><a href="/kb/en/mysqlplugin-table/">plugin</a>
</li><li><a href="/kb/en/mysqlhelp_category-table/">help_*</a> tables
</li><li><a href="/kb/en/mysqltime_zone_name-table/">time_zone*</a> tables
</li><li><a href="/kb/en/mysqlgtid_slave_pos-table/">gtid_slave_pos</a> (replication state)
</li><li><a href="/kb/en/mysqlinnodb_index_stats/">innodb_index_stats</a> (innodb internal)
</li><li><a href="/kb/en/mysqlservers-table/">servers</a> (federated)
</li><li><a href="/kb/en/mysql-transaction_registry-table/">transaction_registry</a> (innodb internal)
</li><li><a href="/kb/en/mysqlfunc-table/">func</a> (udf)
</li><li><a href="/kb/en/performance-schema/">performance_schema</a>
</li></ul>
</li></ul>
<h2 class="anchored_heading" id="new-catalog-root-user">New 'catalog root user'</h2>
<ul start="1"><li>The 'def' catalog is reserved to store permissions for 'catalog root users', which can access any catalog.  * These are meant for admin users that need to do tasks like shutdown, upgrade, create/drop
catalogs, managing primaries and replicas etc.
</li><li>Only the ‘catalog root user’ can change to another catalog with ‘set catalog catalog_name’.
</li><li>A normal user can do ‘set catalog current-catalog’.  This will be needed to be able to execute a <a href="/kb/en/mariadb-dump/">mariadb-dump</a> that includes this command.
</li></ul>
<h2 class="anchored_heading" id="new-storage-layout">New Storage Layout</h2>
<p>MariaDB server will be able to run either on 'original mode', where the data layout is exactly as it was before, or on 'catalog' mode, with a new data layout:</p>
<p>When running <a href="/kb/en/mariadb-install-db/">mariadb-install-db</a> with --use-catalogs, it will create
the following new data structure:</p>
<ul start="1"><li>data_directory/
<ul start="1"><li>engine system data files
</li><li>system files
</li><li>replication files
</li><li>general.log
</li><li>error.log
</li><li>mariadb/
<ul start="1"><li>mysql/
</li><li>privilege tables
</li></ul>
</li><li>catalog1
</li><li>general.log
</li><li>error.log
</li><li>mysql/
<ul start="1"><li>privilege tables
</li></ul>
</li><li>database1/
<ul start="1"><li>tables for database1
</li></ul>
</li><li>database2/
<ul start="1"><li>tables for database2
</li></ul>
</li><li>catalog2/
<ul start="1"><li>general.log
</li><li>error.log
</li></ul>
</li><li>mysql/
<ul start="1"><li>privilege tables
</li></ul>
</li><li>database1/
<ul start="1"><li>tables for database1
</li></ul>
</li><li>database2/
<ul start="1"><li>tables for database2
</li></ul>
</li></ul>
</li></ul>
<p>The disk structure when not using catalogs is:</p>
<ul><li>data_directory/
<ul start="1"><li>engine system data files
</li><li>system files
</li><li>replication files
</li><li>general.log
</li><li>error.log
</li><li>mysql/
<ul start="1"><li>privilege tables
</li></ul>
</li><li>database1/
<ul start="1"><li>tables for database1
</li></ul>
</li><li>database2/
<ul start="1"><li>tables for database2
</li></ul>
</li></ul>
</li></ul>
<p>The above shows:</p>
<ul start="1"><li>There is a 'mariadb' catalog that stores admin users that can access all catalogs, shutdown servers, create new catalogs etc. The 'system root' user uses this when connecting.
</li><li>Each catalog has their own users, privilege tables, databases, error log and general logs
</li></ul>
<p>The MariaDB server will automatically start in catalog mode if it notices the new directory structure.</p>
<h2 class="anchored_heading" id="catalog-sql-commandsfunctions">Catalog SQL Commands/Functions</h2>
<ul start="1"><li><a href="/kb/en/use-catalog/">USE CATALOG catalog_name</a>;
</li><li>CREATE CATALOG
</li><li><a href="/kb/en/drop-catalog/">DROP CATALOG</a>
</li><li>ALTER CATALOG
</li><li>SHOW CATALOGS (and also information_schema.catalogs)
</li><li>SHOW CREATE CATALOG catalog_name;
</li><li>SELECT CATALOG();
</li></ul>
<h2 class="anchored_heading" id="changes-needed-in-mariadb-codebase">Changes Needed in MariaDB Codebase</h2>
<p>Client changes:</p>
<ul start="1"><li>Add --catalog option to all standard MariaDB clients
</li><li>Add support for looping over all existing catalogs to:
<ul start="1"><li><a href="/kb/en/mariadb-dump/">mariadb-dump</a>
</li><li><a href="/kb/en/mariadb-backup/">mariadb-backup</a>
</li><li><a href="/kb/en/mariadb-upgrade/">mariadb-upgrade</a>
</li></ul>
</li></ul>
<p>Changes to <a href="/kb/en/mariadb-install-db/">mariadb-install-db</a>:</p>
<ul start="1"><li>Allow one to create multiple catalogs at once: -–catalogs=”catalog1,catalog2”
</li><li>Init MariaDB with catalog support:  —use-catalogs
</li></ul>
<p>Changes to mariadb (mysql client):</p>
<ul start="1"><li>Add support for 'USE CATALOG xxx’' (and later 'use database xxx').
</li></ul>
<p>Changes to mysql-test-run:</p>
<ul start="1"><li>Add support of running tests with catalogs (normal tests are run without catalogs)
</li></ul>
<p> Changes to MariaDB server (See <a href="https://jira.mariadb.org/browse/MDEV-31542">MDEV-31542</a>):</p>
<ul start="1"><li>Add support for 'catalog' in the connection string.  For old clients, the user can specify the catalog as part of the database. If catalog is not specified, the 'def' catalog (like now) is assumed.
</li><li>Add CATALOG() function that returns the current catalog.
</li><li>Add ‘USE CATALOG xxx’
</li><li>Add 'USE DATABASE xxx'
</li><li>Create a global CATALOG object to hold all information related to the catalog.
</li><li>Add the current catalog to the 'thd' object.
</li><li>Add catalog argument to all functions that take 'database' as an argument.
</li><li>Add SHOW CATALOGS and information_schema.catalogs
</li><li>Move all relevant global variables (users, privileges, mdl-locks(?), open log files) to be stored in the CATALOG structure.
</li><li>Add 'catalog privilege', for ‘catalog super users’ to allow them to access data in any catalog.
</li><li>Add support for accessing tables with 'catalog.schema.table' (needed for catalog super users).
</li><li>For normal users, only show processes for the current catalog in 'show processlist'.
</li><li>Add loops over all catalogs for information schema for the 'catalog root user'.
</li><li>Update performance schema to take catalogs into account.
</li></ul>
<ul start="1"><li>Work with external connectors to get them to support connecting with a catalog.
</li><li>Check/update all storage engines to ensure they work also with catalogs.
</li></ul>
<p>Notes:</p>
<ul start="1"><li>The storage handler calls will probably not be changed. The storage engine will get the catalog name as part of the database name (catalog/database).
</li><li>We don't need a 'catalog' column for tables in the 'mysql' schema (like mysql.proc) as these are stored per catalog.
</li></ul>
<h2 class="anchored_heading" id="some-implementation-ideas">Some Implementation Ideas</h2>
<ul start="1"><li>Instead of sending a catalog string to function, use a pointer to the global catalog object. Do the same later for databases. This allows use to precompute things like 'filename' for catalogs and databases and we don't have to do this for every table open. It also allows us to later support logging information at a catalog and database level.
</li><li>Don't take a MDL lock for the catalog for each table. The metadata lock for the catalog will be taken when a user logs in or changes catalog.
</li><li>Add system variables ‘current_catalog’ and ‘current_database’ and allow users to change these.
</li><li>Add support for ‘catalog ports’ that are connected to catalog.  This allows users to connect to a specific catalog from any client software.
</li></ul>
<h2 class="anchored_heading" id="limitations-in-addition-to-limitations-listed-in-user-experience-with-catalogs">Limitations (in addition to limitations listed in “User experience with catalogs”)</h2>
<ul start="1"><li>Database names cannot contain ‘.’ when connecting from clients without the new catalog connect option.
</li><li>One cannot refer to other catalogs in triggers, stored procedures, events etc. This is because a transaction cannot span catalogs.
</li><li>Only the catalog root user can use mariadb-backup. This is a normal restriction as one has to be system root to be able to use mariadb-backup.
</li><li>Events are global (to save resources). Catalog users can enable/disable events for their catalog.
</li></ul>
<h2 class="anchored_heading" id="stage-2-not-in-first-release">Stage 2 (not in first release)</h2>
<ul start="1"><li>Support usage statistics per catalog and whole server (the last for the ‘catalog root user’). This allows the DBA to see the number of queries, type of queries etc. Some ‘system’ and ‘global innodb’ statistics will only be shown globally (number of open files, number of sync calls etc).
</li><li>Support a my.cnf file in each catalog directory to handle catalog (customer) unique defaults.
</li><li>Add quotas per catalog for tables and temporary files.
</li><li>Add more support to limit users from overusing resources (cpu, tables, databases, number of connections etc)
</li><li>Support 'drop catalog'. (This is in Stage 2 as there may be some issues to drop already active CATALOG objects)
</li><li>Add optional catalog support to the S3 engine
</li><li>More things will be added later.
</li></ul>
<h2 class="anchored_heading" id="stage-3">Stage 3</h2>
<ul start="1"><li>Allow users to manage their own replication stream (maybe?).
</li><li>Allow users to have different options for the S3 engine
</li><li>More things will be added later.
</li></ul>
<p>Appendix</p>
<h6 class="anchored_heading" id=""></h6>
<p>Legacy Connector Support</p>
<h6 class="anchored_heading" id=""></h6>
<p>SQLALchemy test:</p>
<pre class="fixed">In [1]: from sqlalchemy.engine import make_url
In [2]: u = make_url('mariadb+mariadbconnector://app_user:<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="1b4b7a68686c74697f2a29283a5b2a292c352b352b352a">[email&#160;protected]</a>:3306/catalog/company')
In [3]: u.database
Out[3]: 'catalog/company'
</pre><p>The following tests ensured that inside the server (mysql_change_db), the “catalog/test” was picked up as the database.</p>
<p>PHP PDO test:</p>
<pre class="fixed">$ php -r '$db = new \PDO(&#34;mysql:host=localhost;user=dan;dbname=catalog/test;charset=utf8mb4;unix_socket=/tmp/build-mariadb-server-10.4.sock&#34;);'
</pre><p>PHP mysqli test:</p>
<pre class="fixed">php -r '$dbcon = mysqli_connect(&#34;localhost&#34;,&#34;dan&#34;,&#34;nopass&#34;,&#34;catalog/test&#34;,3306,&#34;/tmp/build-mariadb-server-10.4.sock&#34;);'
</pre><p>Nodejs test:</p>
<pre class="fixed">var mysql = require('mysql')
var con = mysql.createConnection({
  socketPath: &#34;/tmp/build-mariadb-server-10.4.sock&#34;,
  user: &#34;dan&#34;,
  password: &#34;yourpassword&#34;,
  database: &#34;catalog/test&#34;,
})
con.connect(function(err) {
  if (err) throw err;
  console.log(&#34;Connected!&#34;);
})
</pre><p>(need to map out a few other connectors here to make sure it’s supported well in this form).</p>
<p>Ref: <a href="https://mariadb.com/kb/en/connection/#handshake-response-packet">https://mariadb.com/kb/en/connection/#handshake-response-packet</a></p>
<h2 class="anchored_heading" id="migration-of-existing-mariadb-original-mode-to-the-new-catalog-layout">Migration of Existing MariaDB Original Mode to the New Catalog Layout</h2>
<p>As shared hosting services have a naming scheme from user/schema to database name in MariaDB, to provide a migration to the new catalog layout, the following steps will be required:</p>
<ul start="1"><li>Use <a href="/kb/en/mariadb-dump/">mariadb-dump</a> to dump the original data
</li><li>On the new server execute:
</li><li><a href="/kb/en/mariadb-install-db/">mariadb-install-db –catalogs=’catalog_name’</a>
</li><li>mariadb –catalog catalog_name &lt; dump_file
</li></ul>
<p>This is needed as InnoDB needs to know where the new files are located.</p>
<h2 class="anchored_heading" id="migration-of-one-catalog-user-to-another-mariadb-server">Migration of One Catalog User to Another MariaDB Server</h2>
<p>Create a migration tool set / procedure that does the following</p>
<ul start="1"><li>Execute <a href="/kb/en/flush-tables-for-export/">FLUSH TABLES FOR EXPORT</a> for all tables in a catalog.
</li><li>Take a copy of the catalog directory
</li><li>Copy the data to a new catalog directory to the new server
</li><li>Run <a href="/kb/en/alter-table/#import-tablespace">ALTER TABLE ... IMPORT TABLESPACE</a> on each InnoDB table
</li></ul>
<p>Note that for partitioned tables the process will be a bit more complex, see above link.</p>
<p>This procedure will be a bit easier after an in-the-works patch for InnoDB related to IMPORT will be pushed. (Should happen before we start on the catalog project)</p>
<h2 class="anchored_heading" id="other-things">Other Things</h2>
<ul start="1"><li>Drizzle’s default catalog was called "local". MariaDB’s default will be called ‘def’, as this is what we already have as the default catalog in information_schema, in current connectors and other places.
</li><li>CONNECT engine will need testing against catalogs and maybe a small code change to support them. It could also be a way to join from one catalog to another.
</li></ul>
<h2 class="anchored_heading" id="see-also">See Also</h2>
<ul start="1"><li><a href="https://jira.mariadb.org/browse/MDEV-31542">MDEV-31542</a> Add multi-tenancy catalogs to MariaDB</li></ul>

    </div>


        
            <div id="subscribe" class="well well-small hide hidden-print"
                 data-subscribe-url="/kb/en/catalogs-overview/+subscriptions/add"
                 data-unsubscribe-url="/kb/en/catalogs-overview/+subscriptions/remove">
            </div>
        

        
        
    
        <div class="simple_section_nav">
            <ul class="nav nav-pills">
                
                
                    <li><a href="/kb/en/catalogs/">
                        ↑ Catalogs ↑
                    </a>
                    </li>
                
                
                    <li class="pull-right"><a href="/kb/en/starting-with-catalogs/">
                        Starting with Catalogs →
                    </a>
                    </li>
                
            </ul>
        </div>
    

        

        
        <h2>Comments</h2>
        
    
    <div id="comments" data-node-id="12321" data-comments-url="/kb/en/catalogs-overview/+comments"
         data-reply-url="/kb/en/catalogs-overview/comments/post/">
        Comments loading...
    </div>

        

    </div>


                    <div id="content_disclaimer" class="graybox">
                        Content reproduced on this site is the property of its respective owners,
                        and this content is not reviewed in advance by MariaDB. The views, information and opinions
                        expressed by this content do not necessarily represent those of MariaDB or any other party.
                    </div>
                </div>
            </section>

            
                <div id="right_bar" class="col-md-2">
                    
    
        
        <ul class="section_navigation well well-small hidden-xs hidden-sm">
            
                <li class="parent"><a href="/kb/en/catalogs/">
                    ↑ Catalogs ↑
                </a>
                </li>
            
            
                
                    <li class="active">
                        <span>Catalogs Overview</span>
                        
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/starting-with-catalogs/">
                            
                            Starting with Catalogs
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/connecting-to-a-server-configured-for-catalogs/">
                            
                            Connecting to a Server Configured for Catalogs
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/create-catalog/">
                            
                            CREATE CATALOG
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/drop-catalog/">
                            
                            DROP CATALOG
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/show-catalogs/">
                            
                            SHOW CATALOGS
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/use-catalog/">
                            
                            USE CATALOG
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/show-create-catalog/">
                            
                            SHOW CREATE CATALOG
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/catalog-status-variables/">
                            
                            Catalog Status Variables
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/catalog-specific-functions-and-variables/">
                            
                            Catalog-Specific Functions and Variables
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/information-schema-catalog-table/">
                            <span class="pull-right not_primary"></span>
                            Information Schema CATALOG Table
                        </a>
                    </li>
                
            
        </ul>
    
    

                </div>
            
        </div>
    </div>
</div>

<!-- Footer -->
<footer id="footer">
    <div class="footer">
        <div class="container">
            <div class="row">
                <div class="col-xs-12">
                    <ul class="list-inline text-center footer-nav">
                        <li>
                            <h5>
                                <a href="https://mariadb.com/products" title="Products">Products</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/services" title="Services">Services</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/pricing" title="Pricing">Pricing</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/resources" title="Resources">Resources</a>
                            </h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/about-us" title="About MariaDB">About Us</a></h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/download" title="Download">Download MariaDB</a></h5>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="row row-10">
                
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div id="block-footerformcontact" class="block block-block-content block-block-contentd754ee1b-3cc9-40e7-9ef4-f504f1197fb1">
                        
                            <h5 style="font-weight: 400;">Subscribe to our newsletter!</h5>
                            <script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script src="//app-sj15.marketo.com/js/forms2/js/forms2.min.js"></script><form id="mktoForm_1498"></form>
                            <script>
                                <!--//--><![CDATA[// ><!--
                                MktoForms2.loadForm("//app-sj15.marketo.com", "573-PXI-984", 1498);
                                //--><!]]]]><![CDATA[>
                                //--><!]]>
                            </script>
                        
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div class="footer-copyright">
                        <div class="text-center">
                            <ul class="list-inline no-margin">
                                <li>
                                    <a href="/legal" title="Legal">Legal</a>
                                </li>
                                <li>
                                    <a href="/privacy-policy" title="Privacy Policy">Privacy Policy</a>
                                </li>
                                <li>
                                    <a href="/cookie-policy/" title="Cookies">Cookie Policy</a>
                                </li>
                            </ul>
                            <p>Copyright &copy; 2025 MariaDB. All rights reserved.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
</footer>
</div>

<div id="ajax_loading">
    <img src="/kb/static/images/ajax-loader.a51c5608d01a.gif" />
</div>

    <!-- Google Tag Manager -->
    <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-MK2847"
                      height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
            '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MK2847');</script>
    <!-- End Google Tag Manager -->

</body>

<script type="text/javascript" src="/kb/static/js/main.1587e3a666fc.js" charset="utf-8"></script>

</html>