<?xml version="1.0" encoding="utf-8"?>
<rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title>MariaDB Knowledge Base Comments for: Parallel Replication</title><link>https://mariadb.com/kb/en/parallel-replication/+comments/feed/</link><description></description><atom:link href="https://mariadb.com/kb/en/parallel-replication/+comments/feed/" rel="self"></atom:link><language>en-us</language><lastBuildDate>Mon, 21 Apr 2025 03:55:57 +0000</lastBuildDate><item><title>Re: Parallel Replication</title><link>https://mariadb.com/kb/en/parallel-replication/+comments/2995</link><description>&lt;p&gt;In your section on "Configuration variable slave-parallel-max-queued" I think you have the variables confused in the last paragraph -- at least it makes no sense to me :)  I think the first uses of "slave_parallel_threads" should be "slave_parallel_max_queued" ??  Suggestion to set this variable "fairly high" to a few 100K obviously doesn't make sense .. but does for the max_queued variable .. &lt;/p&gt;
&lt;p&gt;Here is the offending paragraph : &lt;/p&gt;
&lt;p&gt;Usually, slave_parallel_threads should be set large enough that the SQL thread is able to read far enough ahead in the binlogs to exploit all possible parallelism. In normal operation, the slave will hopefully not be too far behind, so there will not be a need to queue much data in-memory. So slave_parallel_threads could be set fairly high (eg. few hundred kilobytes) to not limit throughtput. It should just be set low enough that the value of slave_parallel_threads * slave_parallel_max_queued will not cause the server to run out of memory.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Steven McDowall</dc:creator><guid>https://mariadb.com/kb/en/parallel-replication/+comments/2995</guid></item><item><title>Re: Parallel Replication</title><link>https://mariadb.com/kb/en/parallel-replication/+comments/2840</link><description>&lt;p&gt;Hi everyone, &lt;/p&gt;
&lt;p&gt;I'm not sure if this is the appropriate place to write this (feel free to delete) but here goes:&lt;/p&gt;
&lt;p&gt;I have MariaDB master/slave replication running, I have enabled parallel replication.&lt;/p&gt;
&lt;p&gt;I have set slave_parallel_mode = optimistic in my.cnf
Indeed show variables like 'slave_parallel_mode' shows that it's set to optimistic.&lt;/p&gt;
&lt;p&gt;Yet show all slaves status show the slave running Parallel_Mode = conservative..&lt;/p&gt;
&lt;p&gt;It seems like mariadb is ignoring my setting? &lt;/p&gt;
&lt;p&gt;I have restarted a million times and read through the documentation on this page 100 times..&lt;/p&gt;
&lt;p&gt;I have enabled GTID on the slave as well.. (have tried without it as well)&lt;/p&gt;
&lt;p&gt;Any ideas why SHOW ALL SLAVES STATUS is showing Parallel_mode = conservative? Is it a bug? or did i miss something? I have checked the error logs for clues.. nothing.&lt;/p&gt;
&lt;p&gt;Thanks&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/"> </dc:creator><guid>https://mariadb.com/kb/en/parallel-replication/+comments/2840</guid></item><item><title>Parallel Replication crash-safety</title><link>https://mariadb.com/kb/en/parallel-replication/+comments/2822</link><description>&lt;p&gt;Hello,
How crash-safety is guaranteed on slave in case of parallel replication?
For example, if several transactions (A and B) from group are applied on slave in parallel. A is fast, while B is slow.
Slave crashed, when A was applied, while B was still in process.
Will slave continue B after restart? From which position slave will start replication: from next group, from B?
Is there any difference in this for &lt;a href="/kb/en/what-is-mariadb-100/"&gt;MariaDB 10.0&lt;/a&gt; and 10.1?
Thanks.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Pavel Katiushyn</dc:creator><guid>https://mariadb.com/kb/en/parallel-replication/+comments/2822</guid></item><item><title>Re: Parallel Replication Ubuntu 12.4 LTS + tokudb</title><link>https://mariadb.com/kb/en/parallel-replication/+comments/1424</link><description>&lt;p&gt;This comment is not related to the topic on this page. SELECT statements are not replicated, hence, not affected by anything explained in this section of the KB. &lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Gerry Narvaja</dc:creator><guid>https://mariadb.com/kb/en/parallel-replication/+comments/1424</guid></item><item><title>Re: Parallel Replication Ubuntu 12.4 LTS + tokudb</title><link>https://mariadb.com/kb/en/parallel-replication/+comments/1022</link><description>&lt;p&gt;knielsen is right. To repeat/rephrase: &lt;em&gt;Parallel replication&lt;/em&gt; is replication with parallel execution of INSERT, UPDATE, and DELETE queries on slaves. It's the correct use of the word parallel. It is &lt;strong&gt;not&lt;/strong&gt; multi-master or multi-source replication.&lt;/p&gt;
&lt;p&gt;What you're doing is fixating on the word parallel, coming up with your own ideas about what the word means, and willfully ignoring the replication part.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Daniel Bartholomew</dc:creator><guid>https://mariadb.com/kb/en/parallel-replication/+comments/1022</guid></item><item><title>Re: Parallel Replication Ubuntu 12.4 LTS + tokudb</title><link>https://mariadb.com/kb/en/parallel-replication/+comments/1018</link><description>&lt;p&gt;hi,&lt;/p&gt;
&lt;p&gt;I know Mysql replication, it's just replication,...
  nothing to do whit parallel !!!&lt;/p&gt;
&lt;p&gt;I suggest you remove word parallel and change it
Multimaster / Master / Master-slave - replication !!!&lt;/p&gt;
&lt;p&gt;I suggest you get familiar whit parallel prosessing.&lt;/p&gt;
&lt;p&gt;It could be possible,.... you could make SELECT
that will be prossed by several threads and machines.
That's parallel.&lt;/p&gt;
&lt;p&gt;Your documentation is miss leading,... "f slave-parallel-threads is 0, then each slave setup will have one thread each to execute queries." What can be run in parallel&lt;/p&gt;
&lt;p&gt;Currently the following things can be run in parallel on the slave:&lt;/p&gt;
&lt;p&gt;    Queries that are run on the master in one group commit.
    Queries that are from different domains.
    Queries from different masters (when using multi-source replication). &lt;/p&gt;
&lt;p&gt;"&lt;/p&gt;
&lt;p&gt;"the SQL threads will read ahead in the relay logs, queueing events in memory while looking for opportunities for executing events in parallel. The @@slave_parallel_max_queued variable sets a limit for how much memory the SQL threads will use for read-ahead in the relay logs looking for such opportunities."&lt;/p&gt;
&lt;p&gt;joni&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Joni-Pekka Kurronen</dc:creator><guid>https://mariadb.com/kb/en/parallel-replication/+comments/1018</guid></item><item><title>Re: Parallel Replication Ubuntu 12.4 LTS + tokudb</title><link>https://mariadb.com/kb/en/parallel-replication/+comments/1016</link><description>&lt;div style="margin-left:2em"&gt;&lt;p&gt; i understand this such way that if I give SELECT statement at Master it start
 threads to do SELECT at Master as well in Slave's.&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;No, this is completely wrong. Replication does not do anything with SELECT statements - only INSERT/UPDATE/DELETE.&lt;/p&gt;
&lt;p&gt;I suggest reading up on a tutorial on MySQL replication to get a clearer picture.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Kristian Nielsen</dc:creator><guid>https://mariadb.com/kb/en/parallel-replication/+comments/1016</guid></item><item><title>Re: Parallel Replication Ubuntu 12.4 LTS + tokudb</title><link>https://mariadb.com/kb/en/parallel-replication/+comments/1008</link><description>&lt;p&gt;Note that Parallel Replication is about how a replication slave applies updates received from the master. SELECT statements do not modify the database and thus are never replicated. So Parallel Replication has no relevance to SELECT statements.&lt;/p&gt;
&lt;p&gt;I do not know if tokudb has optimisations for running a single SELECT in parallel. The server layer of mariadb does not.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Kristian Nielsen</dc:creator><guid>https://mariadb.com/kb/en/parallel-replication/+comments/1008</guid></item><item><title>Re: Parallel Replication Ubuntu 12.4 LTS + tokudb</title><link>https://mariadb.com/kb/en/parallel-replication/+comments/1007</link><description>&lt;p&gt;Should this run parallel:
SELECT Path.Path, Filename.Name, T1.FileIndex, T1.JobId, LStat, DeltaSeq FROM ( SELECT FileId, Job.JobId AS JobId, FileIndex, File.PathId AS PathId, File.FilenameId AS FilenameId, LStat , File.DeltaSeq AS DeltaSeq, Job.JobTDate AS JobTDate FROM Job, File, ( SELECT MAX(JobTDate) AS JobTDate, PathId, FilenameId, DeltaSeq FROM ( SELECT JobTDate, PathId, FilenameId, DeltaSeq FROM File JOIN Job USING (JobId) WHERE File.JobId IN (3556) UNION ALL SELECT JobTDate, PathId, FilenameId, DeltaSeq FROM BaseFiles JOIN File USING (FileId) JOIN Job ON (BaseJobId = Job.JobId) WHERE BaseFiles.JobId IN (3556) ) AS tmp GROUP BY PathId, FilenameId, DeltaSeq ) AS T1 WHERE (Job.JobId IN ( SELECT DISTINCT BaseJobId FROM BaseFiles WHERE JobId IN (3556)) OR Job.JobId IN (3556)) AND T1.JobTDate = Job.JobTDate AND Job.JobId = File.JobId AND T1.PathId = File.PathId AND T1.FilenameId = File.FilenameId ) AS T1 JOIN Filename ON (Filename.FilenameId = T1.FilenameId) JOIN Path ON (Path.PathId = T1.PathId) WHERE FileIndex &amp;gt; 0 ORDER BY T1.JobTDate, FileIndex ASC&lt;/p&gt;
&lt;p&gt;I can see server 1 gives 114% ( top ) which mean's that mysqld is running deamon, 4 system user logged in, 4 threads enable,... but
server 2 is running idle,.. tokudb database at both ( bacula ) and
server-slave,... planing to put it ring when this works first!!! 
At slave also 4 system users logged in,...&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Joni-Pekka Kurronen</dc:creator><guid>https://mariadb.com/kb/en/parallel-replication/+comments/1007</guid></item></channel></rss>