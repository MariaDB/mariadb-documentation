<!DOCTYPE html>
<html>
<head data-cookie-domain=""
      data-cookie-path="/">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="apple-touch-icon" sizes="180x180" href="/kb/static/images/favicons/apple-touch-icon.159e713979be.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/kb/static/images/favicons/favicon-32x32.bc0ac1d5d11e.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/kb/static/images/favicons/favicon-16x16.5801f8f0f34e.png">
    <link rel="shortcut icon" href="/kb/static/images/favicons/favicon.d122d305dee4.ico" type="image/x-icon" />

    <title>Upgrading from MySQL to MariaDB - MariaDB Knowledge Base</title>

    <link href="/kb/static/css/main.f7633538c846.css" rel="stylesheet" type="text/css" />

    

    

    <!-- FB Open Graph tags -->
    <meta property="og:title" content="Upgrading from MySQL to MariaDB" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://mariadb.com/kb/en/upgrading-from-mysql-to-mariadb/" />
    <meta property="og:image" content="http://mariadb.comaskmonty-logo.png" />
    <meta property="og:site_name" content="MariaDB KnowledgeBase" />
    <meta property="fb:admins" content="514852603" />
    <meta property="og:description" content="Upgrading from MySQL to MariaDB." />

    <meta name="description" content="Upgrading from MySQL to MariaDB." />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="//fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet"/>
    
</head>
<body class="mpkb nodes products nodes_view jqui" id="nodes_view">





<div id="menu-mobile" class="visible-sm visible-xs">

    <div>
        <div id="mobile-close-menu" class="text-right">
            <a href="javascript:void(0)" title="Close Menu" id="back-main" class="toggle-menu">X<span></span></a>
        </div>
    </div>
    <div class="mainmenu-mobile">
        <ul class="ls-none ul-menu">
            <li data-sub="submenu5"><a class="open-form-search" href="/kb/search/" title="Search">Search </a></li>
            <li data-sub="submenu0"><a href="/products" title="Products">Products</a><span class="arrow-main"></span></li>
            <li data-sub="submenu1"><a href="/services" title="Services">Services</a><span class="arrow-main"></span></li>
            <li data-sub="submenu2"><a href="/resources" title="Resources">Resources</a><span class="arrow-main"></span></li>
            <li data-sub="submenu3"><a href="/about-us" title="About">About</a><span class="arrow-main"></span></li>
            <li data-sub="submenu4"><a href="/contact" title="Contact">Contact</a></li>
        </ul>
    </div>

    <div class="nav-top-mobile">
        <div class="select-box form">

            <ul class="inline-block-md mb-none top-nav">
                <li>

                </li>
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/upgrading-from-mysql-to-mariadb/"> Login</a>
                    </li>
                
            </ul>



        </div>
        <p class="text-center copyright">Copyright &copy; 2024 MariaDB. All rights reserved.</p>
    </div>
</div>
<div class="violator-wrap d-none" id="top_violator">
    <div class="container">
        <div class="row">
            <div class="col-xs-12 col-sm-12">
                <div class="violator-outer">
                    <div class="violator-inner">
                        <div class="row">
                            <div class="col-xs-12 col-sm-9 col-lg-7 col-lg-offset-2" id="top_violator_content">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="content-link" target="_blank" rel="nofollow noreferrer">
                                    <span>The Ultimate Guide to High Availability with MariaDB</span>
                                </a>
                            </div>
                            <div class="col-xs-12 col-sm-3" id="top_violator_cta">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="btn btn-mariadb" target="_blank" rel="nofollow noreferrer">Download Now</a>
                            </div>
                        </div>
                    </div>
                    <button type="button" class="btn btn-link close-btn">
                        <svg xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 24 24" width="15px" height="15px"><path d="M 4.9902344 3.9902344 A 1.0001 1.0001 0 0 0 4.2929688 5.7070312 L 10.585938 12 L 4.2929688 18.292969 A 1.0001 1.0001 0 1 0 5.7070312 19.707031 L 12 13.414062 L 18.292969 19.707031 A 1.0001 1.0001 0 1 0 19.707031 18.292969 L 13.414062 12 L 19.707031 5.7070312 A 1.0001 1.0001 0 0 0 18.980469 3.9902344 A 1.0001 1.0001 0 0 0 18.292969 4.2929688 L 12 10.585938 L 5.7070312 4.2929688 A 1.0001 1.0001 0 0 0 4.9902344 3.9902344 z"/></svg>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="wrapper">
<div id="top-nav">
    <div class="container">
        <ul class="hidden-sm hidden-xs" >
            <li><a href="https://mariadb.com/kb/">Knowledge Base</a></li>
            <li><a href="https://mariadb.com/contact/">Contact</a></li>
            
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/upgrading-from-mysql-to-mariadb/" rel="nofollow">Login</a>
                    </li>
                
            
            
            <li id="search-form">
                <form action="/kb/en/+search/" method="get" id="search-block-form" accept-charset="UTF-8">
                    <input id="search" title="Enter the terms you wish to search for."
                           placeholder="Search . . ." type="text"
                           name="q" value="" size="15" maxlength="128" class="form-text"
                           data-autocomplete-url="/kb/en/+search/autocomplete/">
                    <input type="hidden" name="quick" value="1" />
                    <input type="hidden" name="source" value="kb" />
                </form>
            </li>
            <li><a id="search-toggler" href="/kb/search/">Search</a></li>
            
        </ul>
    </div>
</div>
<div id="navbar-bottom" class="navbar">
    <div class="container">
        
        
        
        
        <div class="row">
            <div class="col-md-3 col-sm-9 col-xs-9">
                <a class="brand" href="/" title="MariaDB">
                    <img src="/kb/static/images/logo-2018-black.95f5978ae14d.png">
                </a>
            </div>
            <div class="col-md-9 hidden-sm hidden-xs">
                <div class="main-menu">
                    <ul id="main-menu" class="nav navbar-nav inline-block-sm">
    <li class="has-sub full-menu">
        <a href="/products" title="Products">Products</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/services" title="Services">Services</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/pricing" title="Pricing">Pricing</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/resources" title="Resources">Resources</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/about-us" title="About Us">About Us</a>
    </li>
    <li class="">
        <a class="button electric-eel small top-bar-right-download" href="/downloads/">Download</a>
    </li>
</ul>
                </div>
            </div>
            <div class="col-md-3 visible-sm visible-xs col-sm-3 col-xs-3 ps-rv">
                <div class="navbar-header text-right pull-right">
                    <button type="button" class="menu-control toggle-menu" id="open-menu">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="main">
    <div class="container">
        

        <div id="subheader1" class="clearfix">
            <div class="pull-left">
                
                <div id="breadcrumbs" class="breadcrumb">
                    <a href="/kb/en/">Knowledge Base</a>
                    


    
    » <a class="crumb" href="/kb/en/documentation/">MariaDB Server Documentation</a>
    

    
    » <a class="crumb" href="/kb/en/mariadb-administration/">MariaDB Administration</a>
    

    
    » <a class="crumb" href="/kb/en/getting-installing-and-upgrading-mariadb/">Getting, Installing, and Upgrading MariaDB</a>
    

    
    » <a class="crumb" href="/kb/en/migrating-to-mariadb/">Migrating to MariaDB</a>
    

    
    » <a class="crumb" href="/kb/en/moving-from-mysql/">Migrating to MariaDB from MySQL</a>
    


    » <a class="node_link crumb" href="/kb/en/upgrading-from-mysql-to-mariadb/">Upgrading from MySQL to MariaDB</a>


                </div>
                
            </div>
        </div>
    </div>
    <div class="container" id="container-main">
        <div class="row">
            
            
                
                <aside id="sidebar-first" class="sidebar col-md-2 hidden-xs hidden-sm hidden-print">
                    
                        
                        <ul id="category_menu" class="nav nav-pills nav-stacked">
                            <li><a href="/kb/en/">Home</a></li>
                            
                                
                                    <li><a href="/kb/en/+questions/">Open Questions</a></li>
                                
                                <li><a href="/kb/en/documentation/">MariaDB Server</a></li>
                                <li><a href="/kb/en/maxscale/">MariaDB MaxScale</a></li>
                                <li><a href="/kb/en/mariadb-columnstore/">MariaDB ColumnStore</a></li>
                                <li><a href="/kb/en/connectors/">Connectors</a></li>
                            

                        </ul>
                    

                    
<div>



<div class="well well-small box actions"><div>

        <a class="btn btn-block btn-blue btn-sm" href="/kb/en/upgrading-from-mysql-to-mariadb/+history" rel="nofollow">History</a>
        
        
        
        <a class="btn btn-block btn-blue btn-sm" href="/kb/en/upgrading-from-mysql-to-mariadb/+source/">Source</a>
        
        <a class="btn btn-block btn-blue btn-sm flag" href="/kb/en/upgrading-from-mysql-to-mariadb/+flag"
                data-flag-url="/kb/en/upgrading-from-mysql-to-mariadb/+flag" rel="nofollow">
                Flag as Spam / Inappropriate</a>
        
        <a class="btn btn-block btn-blue btn-sm" href="/kb/en/upgrading-from-mysql-to-mariadb/+translate/">
                Translate</a>
        

</div>
</div>





<div class="well well-small box node_info"><div>

    <dl>
        <dt>Created</dt>
        <dd>

<span class="datetime" title="2010-07-30 19:54">14 years ago</span></dd>

        <dt>Modified</dt>
        <dd>

<span class="datetime" title="2024-03-11 09:44">5 months ago</span></dd>

        <dt>Type</dt>
        <dd>article</dd>

        <dt>Status</dt>
        <dd>active</dd>

        <dt>License</dt>
        <dd>
            
                <a href="/kb/en/upgrading-from-mysql-to-mariadb/+license/">CC BY-SA / Gnu FDL</a>
            
        </dd>

        
    </dl>

    
    <ul class="rss_feeds">
        <li><a href="/kb/en/upgrading-from-mysql-to-mariadb/+history/feed/">
            History</a>
        </li>
        <li><a href="/kb/en/upgrading-from-mysql-to-mariadb/+comments/feed/">
            Comments</a>
        </li>
    </ul>
    

</div>
</div>





    
    
    

<div class="well well-small box attachments"><div><div class="edit_link pull-right"><a href="/kb/en/upgrading-from-mysql-to-mariadb/+edit/attachments/">Edit</a></div><h5>Attachments</h5></div><div>

        
            <div class="no_data">No attachments exist</div>
        
    
</div>
</div>

    



    
    
        

<div class="well well-small box"><div><h5>Localized Versions</h5></div><div>

        <ul>
            
            <li><a href="/kb/pt-br/how-can-i-upgrade-from-mysql-to-mariadb/">Como posso atualizar a partir do MySQL para MariaDB?</a> [pt-br]</li>
            
            <li><a href="/kb/it/aggiornare-da-mysql-a-mariadb/">Aggiornare da MySQL a MariaDB</a> [it]</li>
            
            <li><a href="/kb/es/how-can-i-upgrade-from-mysql-to-mariadb/">¿Cómo puedo actualizar desde MySQL a MariaDB?</a> [es]</li>
            
            <li><a href="/kb/zh-cn/how-can-i-upgrade-from-mysql-to-mariadb/">怎样从MySQL升级到 MariaDB？</a> [zh-cn]</li>
            
            <li><a href="/kb/ko/upgrading-from-mysql-to-mariadb/">MySQL에서 MariaDB로 업그레이드 하기!</a> [ko]</li>
            
            <li><a href="/kb/fr/upgrading-from-mysql-to-mariadb/">Mettre à niveau MySQL vers MariaDB</a> [fr]</li>
            
        </ul>
        
</div>
</div>

    






</div>


                    

































                </aside>
            
            
            
                
            
            
                
            
            <section id="content" class="limited_width col-md-8 clearfix">
                
                    <h1>Upgrading from MySQL to MariaDB</h1>
                

                



                <div>
                    
    

    
    
    

    <div class="node creole">
        
        
        


    
    <div class="answer formatted">
        <div class="table_of_contents well well-small">
<h3>Contents</h3>
 <ol class="toc">

    <li class=""><a href="#upgrading-from-mysql-56-or-mysql-57" title="Upgrading from MySQL 5.6 or MySQL 5.7">Upgrading from MySQL 5.6 or MySQL 5.7</a>    <ol class="toc">

        <li class=""><a href="#prerequisites" title="Prerequisites">Prerequisites</a></li>

        <li class=""><a href="#mysql-sha-256-authentication" title="MySQL SHA-256 Authentication">MySQL SHA-256 Authentication</a></li>

        <li class=""><a href="#json" title="JSON">JSON</a></li>

        <li class=""><a href="#xa" title="XA">XA</a></li>

        <li class=""><a href="#encryption-and-compression" title="Encryption and Compression">Encryption and Compression</a></li>

        <li class=""><a href="#config-files" title="Config Files">Config Files</a>        <ol class="toc">

            <li class=""><a href="#audit-plugin" title="Audit plugin">Audit plugin</a>        </ol>
</li>

        <li class=""><a href="#common-steps" title="Common Steps">Common Steps</a></li>

        <li class=""><a href="#sample-steps-for-single-instance-mysql-server" title="Sample Steps for Single Instance MySQL Server">Sample Steps for Single Instance MySQL Server</a></li>

        <li class=""><a href="#mysql-replication-setup" title="MySQL replication setup">MySQL replication setup</a>    </ol>
</li>

    <li class=""><a href="#upgrading-mariadb-on-windowsupgrading-on-windows" title="Upgrading on Windows">Upgrading on Windows</a></li>

    <li class=""><a href="#upgrading-mycnf" title="Upgrading my.cnf">Upgrading my.cnf</a></li>

    <li class=""><a href="#other-things-to-think-about" title="Other Things to Think About">Other Things to Think About</a></li>

    <li class=""><a href="#see-also" title="See Also">See Also</a> </ol>
</li>
</div><p>
For <a href="/kb/en/mariadb-vs-mysql-compatibility/">all practical purposes</a>, you can view MariaDB as an upgrade of MySQL:</p>
<ul start="1"><li>Before upgrading, please <a href="/kb/en/mariadb-vs-mysql-compatibility/">check if there are any known incompatibilities</a> between your MySQL release and the MariaDB release you want to move to.
</li><li>In particular, note that the <a href="/kb/en/json-data-type/">JSON type</a> in MariaDB is a LONGTEXT, while in MySQL it's a binary type. See <a href="https://mariadb.org/making-mariadb-understand-mysql-json/">Making MariaDB understand MySQL JSON</a>.
</li><li>If you are using MySQL 8.0 or above, you have to use  <a href="/kb/en/mysqldump/">mysqldump</a> to move your database to MariaDB.
</li><li>For upgrading from very old MySQL versions, see <a href="/kb/en/upgrading-to-mariadb-from-mysql-50-or-older-version/">Upgrading to MariaDB from MySQL 5.0 (or older version)</a>.
</li><li>Within the same base version (for example MySQL 5.5 -&gt; <a href="/kb/en/what-is-mariadb-55/">MariaDB 5.5</a>, MySQL 5.6 -&gt; <a href="/kb/en/what-is-mariadb-100/">MariaDB 10.0</a> and MySQL 5.7 -&gt; <a href="/kb/en/what-is-mariadb-102/">MariaDB 10.2</a>) you can in most cases just uninstall MySQL and install MariaDB and you are good to go. There is no need to dump and restore databases. As with any upgrade, we recommend making a backup of your data beforehand.
</li><li>You should run <a href="/kb/en/mariadb-upgrade/">mariadb-upgrade</a> (as you would with <code>mysql_upgrade</code> in MySQL) to finish the upgrade. This is needed to ensure that your mysql privilege and event tables are updated with the new fields MariaDB uses. Note that if you use a MariaDB package, <code>mariadb-upgrade</code> is usually run automatically.
</li><li>All your old clients and connectors (PHP, Perl, Python, Java, etc.) will work
  unchanged (no need to recompile). This works because MariaDB and MySQL use
  the same client protocol and the client libraries are binary compatible. You can also use your old MySQL connector packages with MariaDB if you want.
</li></ul>
<h2 class="anchored_heading" id="upgrading-from-mysql-56-or-mysql-57">Upgrading from MySQL 5.6 or MySQL 5.7</h2>
<h3 class="anchored_heading" id="prerequisites">Prerequisites</h3>
<p>Check the values of the following server variables:</p>
<ul start="1"><li><a href="/kb/en/innodb-system-variables/#innodb_file_per_table">innodb_file_per_table</a>
</li><li><a href="/kb/en/innodb-system-variables/#innodb_fast_shutdown">innodb_fast_shutdown</a>
</li></ul>
<pre class="fixed">select @@Innodb_file_per_table,@@Innodb_fast_shutdown\G
</pre><p><a href="/kb/en/innodb-system-variables/#innodb_file_per_table">innodb_file_per_table</a> should be 1. This is the default setting for MySQL and MariaDB.  If not, one should use <a href="/kb/en/mysqldump/">mysqldump</a> for migration as some of the following recommendations will not work.</p>
<p><a href="/kb/en/innodb-system-variables/#innodb_fast_shutdown">innodb_fast_shutdown</a> should be 0 (at least on the migrated server during shutdown, to ensure that a full shutdown is done when taking server down).  This is required when upgrading between major versions of both MySQL and MariaDB as the format of the undo or redo files can change between major versions. This variable can be set just before doing the shutdown.</p>
<p>If your distribution allows it, install the MariaDB packages or the MariaDB tar distribution on the database server. Do not start MariaDB yet! This will decrease the downtime while doing the migration.</p>
<h3 class="anchored_heading" id="mysql-sha-256-authentication">MySQL SHA-256 Authentication</h3>
<p>MariaDB does not support the MySQL SHA-256 authentication protocol as it's cumbersome and not secure for in-house attacks. (clear text password is available inside the server)</p>
<ul start="1"><li>See [authentication-plugin-sha-256/|Authentication Plugin - SHA-256]]
</li><li><a href="https://jira.mariadb.org/browse/MDEV-9804">MDEV-9804</a>
</li></ul>
<p>You can check which MySQL users are using SHA-256 by executing:</p>
<pre class="fixed">SELECT user, plugin FROM mysql.user where plugin like &#34;%sha%&#34;;
</pre><p>You can change the user/s to use a protocol compatible with both MySQL and
MariaDB with:</p>
<pre class="fixed">ALTER USER user_name IDENTIFIED WITH mysql_native_password BY  'new_password';
</pre><h3 class="anchored_heading" id="json">JSON</h3>
<p>MariaDB stores JSON differently than MySQL. Normally you do not have to do anything when migrating JSON data, except if you are using replication or Galera.  If this is the case, then you should convert your JSON columns to TEXT to ensure that all data is stored identically in MySQL and MariaDB:</p>
<p>If you are using JSON columns and want to upgrade to MariaDB, use the <a href="/kb/en/mysql_json/">mysql_json</a> plugin to automatically convert MySQL JSON to TEXT.</p>
<p>Alternatively you need to either convert them to TEXT or use <a href="/kb/en/mysqldump/">mysqldump</a> to copy these tables to MariaDB.</p>
<p>You can check if you are have tables that uses the MySQL JSON type with:</p>
<pre class="fixed">select table_schema, table_name from information_schema.COLUMNS where
data_type=&#34;JSON&#34;;
</pre><p>You can convert the JSON column to text with:</p>
<pre class="fixed">ALTER TABLE table_name MODIFY json_column LONGTEXT;
</pre><h3 class="anchored_heading" id="xa">XA</h3>
<p>When doing a backup, ensure that there are no active XA transactions in the backup, as these transactions needs to be committed/rolled back before the migration.</p>
<h3 class="anchored_heading" id="encryption-and-compression">Encryption and Compression</h3>
<p>Encryption and compression are very different in MySQL and MariaDB.</p>
<p>Encrypted/compressed tables need to be de-encrypted/de-compressed before starting the conversion, and then encrypted/compressed again afterwards.</p>
<p>Detect compressed tables with the following query:</p>
<pre class="fixed">select table_name, create_options from information_schema.TABLES where
create_options like &#34;%comp%&#34;;
</pre><h3 class="anchored_heading" id="config-files">Config Files</h3>
<ul start="1"><li>Create config files for MariaDB that match the MySQL cluster option files
</li><li>There are some configuration options that differ. See <a href="/kb/en/system-variable-differences-between-mariadb-and-mysql/">System Variable Differences between MariaDB and MySQL</a>.
</li><li>You can use <code>[mariadb]</code> or <code>[mariadb-x.y.z]</code> (for the specific version) in the current config files for MariaDB-specific options.
</li><li>You can also place MySQL-specific options inside a <code>[mysqld-5.7]</code> section. This includes all options that use mysql-specific directories for logging or replication (on other words, paths with <code>mysql</code> as part of the path).
</li><li>With a combination of these, it's easy to create a config file that will work with both MariaDB and MySQL, no matter what options are present.
</li><li>See also <a href="https://jira.mariadb.org/browse/MDEV-32745">MDEV-32745</a> for an upcoming tool to automatically detect incompatible options.
</li></ul>
<h4 class="anchored_heading" id="audit-plugin">Audit plugin</h4>
<ul start="1"><li>MariaDB does not have the audit_log_plugin. Rather, MariaDB uses the server_audit plugin, which takes different options.
</li></ul>
<h3 class="anchored_heading" id="common-steps">Common Steps</h3>
<ul start="1"><li>Perform all the prerequisite steps (SHA-256) on the MySQL Server.
</li><li>If replication is used, do these steps also on the primary.
</li><li>Take a backup.
</li><li>Install the MariaB packages or MariaDB tar distribution.
</li><li>Fix the my.cnf file to work with both MariaDB and MySQL.
</li><li>When MariaDB is installed, you can test your config files with <br><code>mariadbd --help --verbose &gt; /tmp/log 2&gt;&amp;1</code> which will display all unsupported config options. It's also possible to use the script at <a href="https://jira.mariadb.org/browse/MDEV-32745">MDEV-32745</a> to find all unsupported options.
</li><li>Check the log for <code>ERROR</code> and fix the config files if needed.
</li></ul>
<h3 class="anchored_heading" id="sample-steps-for-single-instance-mysql-server">Sample Steps for Single Instance MySQL Server</h3>
<p>In the shell:</p>
<pre class="fixed">shell&gt; mysql --user=root ...##
</pre><p>In MySQL:</p>
<pre class="fixed"><span class="k">set</span> <span class="o">@@</span><span class="k">global</span><span class="p">.</span><span class="n">innodb_fast_shutdown</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
<span class="n">quit</span>
</pre><ul start="1"><li>Take down the node with <code>mysqladmin shutdown</code> or <code>sudo service mysqld stop</code>:
</li></ul>
<pre class="fixed">shell&gt; mysqladmin --user=root shutdown
</pre><ul start="1"><li>Drop the MySQL packages:
</li></ul>
<pre class="fixed">shell&gt; yum -y remove Percona-Server*
</pre><p>or</p>
<pre class="fixed">shell&gt; rpm -q -a | grep Percona | xargs rpm -e --nodeps
</pre><p>or</p>
<pre class="fixed">shell&gt; rpm -q -a | grep -i mysql | xargs rpm -e --nodeps
</pre><ul start="1"><li>This can also be done later if one has both MySQL and MariaDB installed at the same time)
</li><li>Remove the unsupported auditlog (Only relevant with Percona server):
</li></ul>
<pre class="fixed">shell&gt; mv /etc/my.cnf.d/auditlog.cnf /etc/my.cnf.d/auditlog.cnf-backup
</pre><ul start="1"><li>Install MariaDB if not already installed from the <a href="https://mariadb.org/download/">download site</a>
</li><li>Using the repo is recommended, or
</li></ul>
<pre class="fixed">shell&gt; yum install MariaDB-server MariaDB-client
</pre><ul start="1"><li>Start mariadbd on the node data
</li></ul>
<pre class="fixed">systemctl start mariadb.service
</pre><ul start="1"><li>If it does not start, check the error file. Remove all unsupported options from the config files and try again.
</li><li>run <a href="/kb/en/mariadb-upgrade/">mariadb-upgrade</a>:
</li></ul>
<pre class="fixed">mariadb-upgrade
</pre><ul start="1"><li>If there were problems with a plugin that does not work or is not supported, you can disable it with:
</li></ul>
<pre class="fixed">mariadb mysql
</pre><ul start="1"><li>Then, from the MariaDB client:
</li></ul>
<pre class="fixed">select * from mysql.plugin
</pre><ul start="1"><li>and then for each unsupported plugin:
</li></ul>
<pre class="fixed">UNINSTALL PLUGIN IF EXISTS #plugin_name#;
</pre><ul start="1"><li>Test your new server
</li><li>As long as one does not create new tables or alter tables, it should be possible to go back to MySQL by:
</li><li>Dropping all tables in the 'mysql' database
</li></ul>
<pre class="fixed">set @@global.innodb_fast_shutdown=0;
SHUTDOWN
</pre><ul start="1"><li>Start MySQL server with --skip-grants
</li><li>Install the backup of the 'mysql' database with:
</li></ul>
<pre class="fixed">shell&gt; mysql mysql &lt; /tmp/mysql-dump.txt
shell&gt; mysqladmin flush-privileges
</pre><h3 class="anchored_heading" id="mysql-replication-setup">MySQL replication setup</h3>
<p>In case of replication you can either convert one of the existing nodes directly to MariaDB or create a new node, convert that to MariaDB and then delete the old MySQL node after testing.</p>
<ul start="1"><li>Do all the "Prerequisite steps" on the to-be-converted node.
</li><li>Follow the <a href="#sample-steps-for-single-instance-mysql-server">Single instance MySQL server</a> instructions for the node.
</li><li>Start MariaDB as a replica to MySQL.
</li><li>Test that the new node works as expected.
</li><li>Note that a MariaDB replica will work with replication positions, not with MySQL GTID.
</li><li>Repeat with all other nodes.
</li><li>Switch one of the MariaDB nodes to be the primary.
</li><li>Convert the old primary according to the above instructions.
</li><li>Add the old primary as a replica.
</li></ul>
<h2 class="anchored_heading" id="upgrading-mariadb-on-windowsupgrading-on-windows"><a href="/kb/en/upgrading-mariadb-on-windows/">Upgrading on Windows</a></h2>
<p>On Windows, you should not uninstall MySQL and install MariaDB, this would not work, the existing database will not be found.</p>
<p>Thus On Windows, just install MariaDB and use the upgrade wizard which is part of installer package and is launched by MSI installer. Or, in case you prefer command line, use <code>mysql_upgrade_service &lt;service_name&gt;</code> on the command line.</p>
<h2 class="anchored_heading" id="upgrading-mycnf">Upgrading my.cnf</h2>
<p>All the options in your original MySQL <a href="/kb/en/mysqld-configuration-files-and-groups/"><code>my.cnf</code> file</a> should work fine for MariaDB.</p>
<p>However as MariaDB has more features than MySQL, there are a few things that you should consider changing in your <code>my.cnf</code> file.</p>
<ul start="1"><li>MariaDB uses the <a href="/kb/en/aria-storage-engine/">Aria storage engine</a> by default for internal temporary files, instead of MyISAM. If you have a lot of temporary files, you should add and set <code><a href="/kb/en/aria-system-variables/#aria_pagecache_buffer_size">aria-pagecache-buffer-size</a></code> to the same value as you have for <code><a href="/kb/en/myisam-system-variables/#key_buffer_size">key-buffer-size</a></code>.
</li><li>If you don't use MyISAM tables, you can set <a href="/kb/en/myisam-system-variables/#key_buffer_size">key-buffer-size</a> to a very low value, like 64K.
</li><li>If you have a LOT of connections (&gt; 100) that mostly run short running queries, you should consider using the <a href="/kb/en/threadpool-in-55/">thread pool</a>. For example using : <a href="/kb/en/server-system-variables/#thread_handling">thread_handling=pool-of-threads</a> and <a href="/kb/en/server-system-variables/#thread_pool_size">thread_pool_size=128</a> could give a notable performance boost in this case. Where the <code>thread_pool_size</code> should be about <code>2 * number of cores on your machine</code>.
</li></ul>
<h2 class="anchored_heading" id="other-things-to-think-about">Other Things to Think About</h2>
<ul start="1"><li>MariaDB has LGPL versions of the <a href="/kb/en/client-library-for-c/">C connector</a> and <a href="/kb/en/mariadb-java-client/">Java Client</a>. If you are shipping an application that supports MariaDB or MySQL, you should consider using these!
</li><li>You should consider trying out the <a href="/kb/en/myrocks/">MyRocks storage engine</a> or some of the other <a href="/kb/en/mariadb-storage-engines/">new storage engines</a> that MariaDB provides.
</li></ul>
<h2 class="anchored_heading" id="see-also">See Also</h2>
<ul start="1"><li>MariaDB has a lot of <a href="/kb/en/mariadb-vs-mysql-features/">new features</a> that you should know about.
</li><li><a href="/kb/en/mariadb-vs-mysql-compatibility/">MariaDB versus MySQL - Compatibility</a>
</li><li><a href="/kb/en/migrating-to-mariadb/">Migrating to MariaDB</a>
</li><li>You can find general upgrading informations on the <a href="/kb/en/getting-installing-and-upgrading-mariadb/">MariaDB installation page</a>.
</li><li>There is a <a href="/kb/en/screencast-for-upgrading-mysql-to-mariadb/">Screencast for upgrading MySQL to MariaDB</a>.
</li><li><a href="/kb/en/moving-from-mysql-to-mariadb-in-debian-9/">Upgrading to MariaDB in Debian 9</a></li></ul>

    </div>


        
            <div id="subscribe" class="well well-small hide hidden-print"
                 data-subscribe-url="/kb/en/upgrading-from-mysql-to-mariadb/+subscriptions/add"
                 data-unsubscribe-url="/kb/en/upgrading-from-mysql-to-mariadb/+subscriptions/remove">
            </div>
        

        
        
    
        <div class="simple_section_nav">
            <ul class="nav nav-pills">
                
                    <li><a href="/kb/en/mariadb-vs-mysql-compatibility/">
                        ← MariaDB versus MySQL - Compatibility
                    </a>
                    </li>
                
                
                    <li><a href="/kb/en/moving-from-mysql/">
                        ↑ Migrating to MariaDB from MySQL ↑
                    </a>
                    </li>
                
                
                    <li class="pull-right"><a href="/kb/en/incompatibilities-and-feature-differences-between-mariadb-11-4-and-mysql-8-/">
                        Incompatibilities and Feature Differences Between MariaDB 11.4 and MySQL 8.0 →
                    </a>
                    </li>
                
            </ul>
        </div>
    

        

        
        <h2>Comments</h2>
        
    
    <div id="comments" data-node-id="617" data-comments-url="/kb/en/upgrading-from-mysql-to-mariadb/+comments"
         data-reply-url="/kb/en/upgrading-from-mysql-to-mariadb/comments/post/">
        Comments loading...
    </div>

        

    </div>


                    <div id="content_disclaimer" class="graybox">
                        Content reproduced on this site is the property of its respective owners,
                        and this content is not reviewed in advance by MariaDB. The views, information and opinions
                        expressed by this content do not necessarily represent those of MariaDB or any other party.
                    </div>
                </div>
            </section>

            
                <div id="right_bar" class="col-md-2">
                    
    
        
        <ul class="section_navigation well well-small hidden-xs hidden-sm">
            
                <li class="parent"><a href="/kb/en/moving-from-mysql/">
                    ↑ Migrating to MariaDB from MySQL ↑
                </a>
                </li>
            
            
                
                    <li>
                        <a href="/kb/en/mariadb-vs-mysql-features/">
                            <span class="pull-right not_primary"></span>
                            MariaDB versus MySQL - Features
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/mariadb-vs-mysql-compatibility/">
                            <span class="pull-right not_primary"></span>
                            MariaDB versus MySQL - Compatibility
                        </a>
                    </li>
                
            
                
                    <li class="active">
                        <span>Upgrading from MySQL to MariaDB</span>
                        
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/incompatibilities-and-feature-differences-between-mariadb-11-4-and-mysql-8-/">
                            <span class="pull-right not_primary"></span>
                            Incompatibilities and Feature Differences Between MariaDB 11.4 and MySQL 8.0
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/incompatibilities-and-feature-differences-between-mariadb-11-3-and-mysql-8-/">
                            <span class="pull-right not_primary"></span>
                            Incompatibilities and Feature Differences Between MariaDB 11.3 and MySQL 8.0
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/incompatibilities-and-feature-differences-between-mariadb-11-2-and-mysql-8-/">
                            <span class="pull-right not_primary"></span>
                            Incompatibilities and Feature Differences Between MariaDB 11.2 and MySQL 8.0
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/incompatibilities-and-feature-differences-between-mariadb-11-1-and-mysql-8-/">
                            <span class="pull-right not_primary"></span>
                            Incompatibilities and Feature Differences Between MariaDB 11.1 and MySQL 8.0
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/incompatibilities-and-feature-differences-between-mariadb-10-11-and-mysql-8/">
                            <span class="pull-right not_primary"></span>
                            Incompatibilities and Feature Differences Between MariaDB 10.11 and MySQL 8.0
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/incompatibilities-and-feature-differences-between-mariadb-10-6-and-mysql-8-/">
                            <span class="pull-right not_primary"></span>
                            Incompatibilities and Feature Differences Between MariaDB 10.6 and MySQL 8.0
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/incompatibilities-and-feature-differences-between-mariadb-10-5-and-mysql-8-/">
                            <span class="pull-right not_primary"></span>
                            Incompatibilities and Feature Differences Between MariaDB 10.5 and MySQL 8.0
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/function-differences-between-mariadb-and-mysql/">
                            <span class="pull-right not_primary"></span>
                            Function Differences Between MariaDB and MySQL
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/system-variable-differences-between-mariadb-and-mysql/">
                            <span class="pull-right not_primary"></span>
                            System Variable Differences between MariaDB and MySQL
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/installing-mariadb-alongside-mysql/">
                            <span class="pull-right not_primary"></span>
                            Installing MariaDB Alongside MySQL
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/moving-from-mysql-to-mariadb-in-debian-9/">
                            <span class="pull-right not_primary"></span>
                            Moving from MySQL to MariaDB in Debian 9
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/migrating-to-mariadb-from-mysql-obsolete-articles/">
                            
                            Migrating to MariaDB from MySQL - Obsolete Articles
                        </a>
                    </li>
                
            
        </ul>
    
    

                </div>
            
        </div>
    </div>
</div>

<!-- Footer -->
<footer id="footer">
    <div class="footer">
        <div class="container">
            <div class="row">
                <div class="col-xs-12">
                    <ul class="list-inline text-center footer-nav">
                        <li>
                            <h5>
                                <a href="https://mariadb.com/products" title="Products">Products</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/services" title="Services">Services</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/pricing" title="Pricing">Pricing</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/resources" title="Resources">Resources</a>
                            </h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/about-us" title="About MariaDB">About Us</a></h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/download" title="Download">Download MariaDB</a></h5>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="row row-10">
                
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div id="block-footerformcontact" class="block block-block-content block-block-contentd754ee1b-3cc9-40e7-9ef4-f504f1197fb1">
                        
                            <h5 style="font-weight: 400;">Subscribe to our newsletter!</h5>
                            <script src="//app-sj15.marketo.com/js/forms2/js/forms2.min.js"></script><form id="mktoForm_1498"></form>
                            <script>
                                <!--//--><![CDATA[// ><!--
                                MktoForms2.loadForm("//app-sj15.marketo.com", "573-PXI-984", 1498);
                                //--><!]]]]><![CDATA[>
                                //--><!]]>
                            </script>
                        
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div class="footer-copyright">
                        <div class="text-center">
                            <ul class="list-inline no-margin">
                                <li>
                                    <a href="/legal" title="Legal">Legal</a>
                                </li>
                                <li>
                                    <a href="/privacy-policy" title="Privacy Policy">Privacy Policy</a>
                                </li>
                                <li>
                                    <a href="/cookie-policy/" title="Cookies">Cookie Policy</a>
                                </li>
                            </ul>
                            <p>Copyright &copy; 2024 MariaDB. All rights reserved.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
</footer>
</div>

<div id="ajax_loading">
    <img src="/kb/static/images/ajax-loader.a51c5608d01a.gif" />
</div>

    <!-- Google Tag Manager -->
    <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-MK2847"
                      height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
            '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MK2847');</script>
    <!-- End Google Tag Manager -->

</body>

<script type="text/javascript" src="/kb/static/js/main.1587e3a666fc.js" charset="utf-8"></script>

</html>