<?xml version="1.0" encoding="utf-8"?>
<rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title>MariaDB Knowledge Base Comments for: Mariadb crashed during deleting a database</title><link>https://mariadb.com/kb/en/mariadb-crashed-during-deleting-a-database/+comments/feed/</link><description></description><atom:link href="https://mariadb.com/kb/en/mariadb-crashed-during-deleting-a-database/+comments/feed/" rel="self"></atom:link><language>en-us</language><lastBuildDate>Fri, 19 Jul 2024 00:58:11 +0000</lastBuildDate><item><title>Re: Mariadb crashed during deleting a database</title><link>https://mariadb.com/kb/en/mariadb-crashed-during-deleting-a-database/+comments/6791</link><description>&lt;p&gt;What do you mean by "doesn't recognize"? Even though &lt;a href="/kb/en/mariadb-10231-release-notes/"&gt;MariaDB 10.2.31&lt;/a&gt; is &lt;a href="https://mariadb.org/about/#maintenance-policy"&gt;long end-of-life&lt;/a&gt;, the variable still existed then. However, its meaning has changed in more recent versions. See &lt;a href="/kb/en/innodb-recovery-modes/"&gt;InnoDB Recovery Modes&lt;/a&gt;.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Ian Gilfillan</dc:creator><guid>https://mariadb.com/kb/en/mariadb-crashed-during-deleting-a-database/+comments/6791</guid></item><item><title>Re: Mariadb crashed during deleting a database</title><link>https://mariadb.com/kb/en/mariadb-crashed-during-deleting-a-database/+comments/6784</link><description>&lt;p&gt;Please help answer the following questions:&lt;/p&gt;
&lt;p&gt;mariadb doesn't recognize --innodb_force_recovery=n variable. Is innodb-force-recovery not packaged with my version of openSUSE Leap 15.1 &lt;a href="/kb/en/mariadb-10231-release-notes/"&gt;mariadb 10.2.31&lt;/a&gt;-lp151.2.12.1 x86_64?&lt;/p&gt;
&lt;p&gt;What am I doing wrong?&lt;/p&gt;
&lt;p&gt;Thank you.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Rich Ayoade</dc:creator><guid>https://mariadb.com/kb/en/mariadb-crashed-during-deleting-a-database/+comments/6784</guid></item><item><title>Re: Mariadb crashed during deleting a database</title><link>https://mariadb.com/kb/en/mariadb-crashed-during-deleting-a-database/+comments/6783</link><description>&lt;p&gt;In the meantime, I have tried to use innodb-force-recovery to force recovery of the databases. (&lt;a href="https://mariadb.com/kb/en/innodb-system-variables/#innodb_force_recovery"&gt;https://mariadb.com/kb/en/innodb-system-variables/#innodb_force_recovery&lt;/a&gt;)&lt;/p&gt;
&lt;p&gt;I have put the option immediately under the [Mysqld] like: innodb-force-recovery=1 in the /etc/mycnf. 
I then tried to start mysql with that option on the command line like:&lt;/p&gt;
&lt;p&gt;mysql --innodb-force-recovery=1 --host=localhost --user=root --password=,
but it threw an error like:&lt;/p&gt;
&lt;p&gt;mysql: unknown variable 'innodb-force-recovery=1'&lt;/p&gt;
&lt;p&gt;Questions:&lt;/p&gt;
&lt;p&gt;- Why is the variable unknown? &lt;/p&gt;
&lt;p&gt;- Is innodb-force-recovery not packaged with my version of openSUSE?&lt;/p&gt;
&lt;p&gt;Thank you.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Rich Ayoade</dc:creator><guid>https://mariadb.com/kb/en/mariadb-crashed-during-deleting-a-database/+comments/6783</guid></item><item><title>Re: Mariadb crashed during deleting a database</title><link>https://mariadb.com/kb/en/mariadb-crashed-during-deleting-a-database/+comments/6782</link><description>&lt;p&gt;Thanks for your reply.&lt;/p&gt;
&lt;p&gt;" per InnoDB Redo Log Directly editing or moving the redo logs can cause corruption, and should never normally be attempted." 
Thank you, well noted.&lt;/p&gt;
&lt;p&gt;"start an 10.4 server on a copy of the data" 
I'm not sure I quite understand what you meant. Do you mean to install 10.4 and then use database backup?&lt;/p&gt;
&lt;p&gt;Note: Only &lt;a href="/kb/en/what-is-mariadb-102/"&gt;mariadb 10.2&lt;/a&gt; came packaged with openSUSE Leap 15.1. I am not sure of 10.4 compatibility with openSUSE Leap 15.1.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Rich Ayoade</dc:creator><guid>https://mariadb.com/kb/en/mariadb-crashed-during-deleting-a-database/+comments/6782</guid></item><item><title>Re: Mariadb crashed during deleting a database</title><link>https://mariadb.com/kb/en/mariadb-crashed-during-deleting-a-database/+comments/6779</link><description>&lt;p&gt;Try to start an 10.4 server on a copy of the data and take the dump from there.&lt;/p&gt;
&lt;p&gt;per &lt;a href="/kb/en/innodb-redo-log/"&gt;InnoDB Redo Log&lt;/a&gt; Directly editing or moving the redo logs can cause corruption, and should never normally be attempted.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Daniel Black</dc:creator><guid>https://mariadb.com/kb/en/mariadb-crashed-during-deleting-a-database/+comments/6779</guid></item><item><title>Re: Mariadb crashed during deleting a database</title><link>https://mariadb.com/kb/en/mariadb-crashed-during-deleting-a-database/+comments/6776</link><description>&lt;p&gt;Thank you for your reply.&lt;/p&gt;
&lt;p&gt;wow! You're saying things I was hoping not to hear already.&lt;/p&gt;
&lt;p&gt;mysqldump threw an error as well:
mysqldump: Got error: 2002: "Can't connect to local MySQL server through socket '/run/mysql/mysql.sock' (111)" when trying to connect&lt;/p&gt;
&lt;p&gt;There's got to be a way to connect and dump the (10 good databases for 3 sites!) databases on mariadb.&lt;/p&gt;
&lt;p&gt;What else can be done?&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Rich Ayoade</dc:creator><guid>https://mariadb.com/kb/en/mariadb-crashed-during-deleting-a-database/+comments/6776</guid></item><item><title>Re: Mariadb crashed during deleting a database</title><link>https://mariadb.com/kb/en/mariadb-crashed-during-deleting-a-database/+comments/6775</link><description>&lt;p&gt;&lt;a href="/kb/en/mariadb-10231-release-notes/"&gt;MariaDB 10.2.31&lt;/a&gt; was released in January 2020. The last release in that series was &lt;a href="/kb/en/mariadb-10244-release-notes/"&gt;MariaDB 10.2.44&lt;/a&gt;, which was released in May 2022. The last release that uses a compatible InnoDB log format is &lt;a href="/kb/en/mariadb-10434-release-notes/"&gt;MariaDB 10.4.34&lt;/a&gt; (May 2024).&lt;/p&gt;
&lt;p&gt;The messages "log sequence number is in the future" are very serious, indicating that the write-ahead logging was broken and that the database pages are in an inconsistent state with respect to each other, that is, some pages correspond to an unexpectedly new logical time. You can expect such trouble when renaming or removing the log files. &lt;a href="https://jira.mariadb.org/browse/MDEV-27199"&gt;MDEV-27199&lt;/a&gt; in a later major version introduced some safeguards against this.&lt;/p&gt;
&lt;p&gt;In &lt;a href="/kb/en/what-is-mariadb-106/"&gt;MariaDB 10.6&lt;/a&gt;, several fixes were applied so that InnoDB should not crash when encountering corruption. The version that you are using does include a fix of &lt;a href="https://jira.mariadb.org/browse/MDEV-21069"&gt;MDEV-21069&lt;/a&gt;, which should avoid some crashes when dropping a corrupted table.&lt;/p&gt;
&lt;p&gt;I believe that your best option is to hope that the server will not crash when executing &lt;code class="fixed" style="white-space:pre-wrap"&gt;mysqldump&lt;/code&gt;, and to load that dump to &lt;a href="/kb/en/what-is-mariadb-106/"&gt;MariaDB 10.6&lt;/a&gt; or &lt;a href="/kb/en/what-is-mariadb-1011/"&gt;MariaDB 10.11&lt;/a&gt;.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Marko Mäkelä</dc:creator><guid>https://mariadb.com/kb/en/mariadb-crashed-during-deleting-a-database/+comments/6775</guid></item></channel></rss>