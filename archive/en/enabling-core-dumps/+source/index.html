<!DOCTYPE html>
<html>
<head data-cookie-domain=""
      data-cookie-path="/">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="apple-touch-icon" sizes="180x180" href="/kb/static/images/favicons/apple-touch-icon.159e713979be.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/kb/static/images/favicons/favicon-32x32.bc0ac1d5d11e.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/kb/static/images/favicons/favicon-16x16.5801f8f0f34e.png">
    <link rel="shortcut icon" href="/kb/static/images/favicons/favicon.d122d305dee4.ico" type="image/x-icon" />

    <title>Enabling Core Dumps - Source - MariaDB Knowledge Base</title>

    <link href="/kb/static/css/main.f7633538c846.css" rel="stylesheet" type="text/css" />

    
        <meta name="robots" content="noindex, nofollow">
    

    

    <!-- FB Open Graph tags -->
    <meta property="og:title" content="Enabling Core Dumps - Source" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://mariadb.com/kb/en/enabling-core-dumps/+source/" />
    <meta property="og:image" content="http://mariadb.comaskmonty-logo.png" />
    <meta property="og:site_name" content="MariaDB KnowledgeBase" />
    <meta property="fb:admins" content="514852603" />
    <meta property="og:description" content="" />

    <meta name="description" content="" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="//fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet"/>
    
</head>
<body class="mpkb nodes autoresize nodes_source jqui" id="nodes_source">





<div id="menu-mobile" class="visible-sm visible-xs">

    <div>
        <div id="mobile-close-menu" class="text-right">
            <a href="javascript:void(0)" title="Close Menu" id="back-main" class="toggle-menu">X<span></span></a>
        </div>
    </div>
    <div class="mainmenu-mobile">
        <ul class="ls-none ul-menu">
            <li data-sub="submenu5"><a class="open-form-search" href="/kb/search/" title="Search">Search </a></li>
            <li data-sub="submenu0"><a href="/products" title="Products">Products</a><span class="arrow-main"></span></li>
            <li data-sub="submenu1"><a href="/services" title="Services">Services</a><span class="arrow-main"></span></li>
            <li data-sub="submenu2"><a href="/resources" title="Resources">Resources</a><span class="arrow-main"></span></li>
            <li data-sub="submenu3"><a href="/about-us" title="About">About</a><span class="arrow-main"></span></li>
            <li data-sub="submenu4"><a href="/contact" title="Contact">Contact</a></li>
        </ul>
    </div>

    <div class="nav-top-mobile">
        <div class="select-box form">

            <ul class="inline-block-md mb-none top-nav">
                <li>

                </li>
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/enabling-core-dumps/+source/"> Login</a>
                    </li>
                
            </ul>



        </div>
        <p class="text-center copyright">Copyright &copy; 2024 MariaDB. All rights reserved.</p>
    </div>
</div>
<div class="violator-wrap d-none" id="top_violator">
    <div class="container">
        <div class="row">
            <div class="col-xs-12 col-sm-12">
                <div class="violator-outer">
                    <div class="violator-inner">
                        <div class="row">
                            <div class="col-xs-12 col-sm-9 col-lg-7 col-lg-offset-2" id="top_violator_content">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="content-link" target="_blank" rel="nofollow noreferrer">
                                    <span>The Ultimate Guide to High Availability with MariaDB</span>
                                </a>
                            </div>
                            <div class="col-xs-12 col-sm-3" id="top_violator_cta">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="btn btn-mariadb" target="_blank" rel="nofollow noreferrer">Download Now</a>
                            </div>
                        </div>
                    </div>
                    <button type="button" class="btn btn-link close-btn">
                        <svg xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 24 24" width="15px" height="15px"><path d="M 4.9902344 3.9902344 A 1.0001 1.0001 0 0 0 4.2929688 5.7070312 L 10.585938 12 L 4.2929688 18.292969 A 1.0001 1.0001 0 1 0 5.7070312 19.707031 L 12 13.414062 L 18.292969 19.707031 A 1.0001 1.0001 0 1 0 19.707031 18.292969 L 13.414062 12 L 19.707031 5.7070312 A 1.0001 1.0001 0 0 0 18.980469 3.9902344 A 1.0001 1.0001 0 0 0 18.292969 4.2929688 L 12 10.585938 L 5.7070312 4.2929688 A 1.0001 1.0001 0 0 0 4.9902344 3.9902344 z"/></svg>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="wrapper">
<div id="top-nav">
    <div class="container">
        <ul class="hidden-sm hidden-xs" >
            <li><a href="https://mariadb.com/kb/">Knowledge Base</a></li>
            <li><a href="https://mariadb.com/contact/">Contact</a></li>
            
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/enabling-core-dumps/+source/" rel="nofollow">Login</a>
                    </li>
                
            
            
            <li id="search-form">
                <form action="/kb/en/+search/" method="get" id="search-block-form" accept-charset="UTF-8">
                    <input id="search" title="Enter the terms you wish to search for."
                           placeholder="Search . . ." type="text"
                           name="q" value="" size="15" maxlength="128" class="form-text"
                           data-autocomplete-url="/kb/en/+search/autocomplete/">
                    <input type="hidden" name="quick" value="1" />
                    <input type="hidden" name="source" value="kb" />
                </form>
            </li>
            <li><a id="search-toggler" href="/kb/search/">Search</a></li>
            
        </ul>
    </div>
</div>
<div id="navbar-bottom" class="navbar">
    <div class="container">
        
        
        
        
        <div class="row">
            <div class="col-md-3 col-sm-9 col-xs-9">
                <a class="brand" href="/" title="MariaDB">
                    <img src="/kb/static/images/logo-2018-black.95f5978ae14d.png">
                </a>
            </div>
            <div class="col-md-9 hidden-sm hidden-xs">
                <div class="main-menu">
                    <ul id="main-menu" class="nav navbar-nav inline-block-sm">
    <li class="has-sub full-menu">
        <a href="/products" title="Products">Products</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/services" title="Services">Services</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/pricing" title="Pricing">Pricing</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/resources" title="Resources">Resources</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/about-us" title="About Us">About Us</a>
    </li>
    <li class="">
        <a class="button electric-eel small top-bar-right-download" href="/downloads/">Download</a>
    </li>
</ul>
                </div>
            </div>
            <div class="col-md-3 visible-sm visible-xs col-sm-3 col-xs-3 ps-rv">
                <div class="navbar-header text-right pull-right">
                    <button type="button" class="menu-control toggle-menu" id="open-menu">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="main">
    <div class="container">
        

        <div id="subheader1" class="clearfix">
            <div class="pull-left">
                
                <div id="breadcrumbs" class="breadcrumb">
                    <a href="/kb/en/">Knowledge Base</a>
                    


    
    » <a class="crumb" href="/kb/en/training-tutorials/">Training &amp; Tutorials</a>
    

    
    » <a class="crumb" href="/kb/en/advanced-mariadb-articles/">Advanced MariaDB Articles</a>
    

    
    » <a class="crumb" href="/kb/en/development-articles/">Development Articles</a>
    

    
    » <a class="crumb" href="/kb/en/debugging-mariadb/">Debugging MariaDB</a>
    


    » <a class="node_link crumb" href="/kb/en/enabling-core-dumps/">Enabling Core Dumps</a>


                </div>
                
            </div>
        </div>
    </div>
    <div class="container" id="container-main">
        <div class="row">
            
            
                
                <aside id="sidebar-first" class="sidebar col-md-2 hidden-xs hidden-sm hidden-print">
                    
                        
                        <ul id="category_menu" class="nav nav-pills nav-stacked">
                            <li><a href="/kb/en/">Home</a></li>
                            
                                
                                    <li><a href="/kb/en/+questions/">Open Questions</a></li>
                                
                                <li><a href="/kb/en/documentation/">MariaDB Server</a></li>
                                <li><a href="/kb/en/maxscale/">MariaDB MaxScale</a></li>
                                <li><a href="/kb/en/mariadb-columnstore/">MariaDB ColumnStore</a></li>
                                <li><a href="/kb/en/connectors/">Connectors</a></li>
                            

                        </ul>
                    

                    
                        <div>
    

<div class="well well-small box actions"><div>

        <a class="btn btn-block btn-small" href="/kb/en/enabling-core-dumps/">Return to article</a>
    
</div>
</div>

</div>
                    

                    

































                </aside>
            
            
            
                
            
            
            <section id="content" class="limited_width col-md-10 clearfix">
                
                    <h1>Enabling Core Dumps - Source</h1>
                

                



                <div>
                    

    

    
    <div class="revision_info">
        <dl class="table">
            <dt>Revision</dt>
            <dd><a href="/kb/en/enabling-core-dumps/+r/139329/">139329</a></dd>
            <dt>User</dt>
            <dd>
<span class="user" id="user-3487">
<a href="/kb/user/id/3487" title="Geoff Montee">Geoff Montee</a>
</span></dd>
            <dt>Date</dt>
            <dd>

<span class="datetime" title="2024-05-22 04:18">2024-05-22 04:18</span></dd>
        </dl>
    </div>
    


    

    
        
        <textarea id="answer_source" class="creole_source autogrow">&lt;&lt;toc&gt;&gt;

== Enabling in an Option File

&lt;&lt;product mariadb from=&#34;10.4&#34;&gt;&gt;
In MariaDB 10.4 and later, core dumps are enabled by default on **Windows**, so **this step can be skipped on Windows** in those versions. See MDEV-18439 for more information.
&lt;&lt;/product&gt;&gt;

In order to enable core dumps, you need to set the ##[[server-system-variables/#core_file|core_file]]## system variable either on the command-line or in a relevant server [[configuring-mariadb-with-option-files/#option-groups|option group]] in an [[configuring-mariadb-with-option-files|option file]]. For example:

&lt;&lt;code&gt;&gt;
[mariadb]
...
core_file
&lt;&lt;/code&gt;&gt;

You can check your current value by executing:

&lt;&lt;code&gt;&gt;
my_print_defaults --mariadbd
&lt;&lt;/code&gt;&gt;

[[server-system-variables/#core_file|core_file]] is a system variable (prior to MariaDB 10.3.9 it was just an option). Its value can be checked at runtime by executing the following:

&lt;&lt;code&gt;&gt;
SHOW GLOBAL VARIABLES LIKE &#39;core_file&#39;;
&lt;&lt;/code&gt;&gt;

== Core Files on Linux

There are some additional details related to using core files on Linux.

=== Disabling Core File Size Restrictions on Linux

On some systems there is a limit on the sizes of core files that can be dumped. You can check the system&#39;s current system-wide limit by executing the following:

&lt;&lt;code&gt;&gt;
ulimit -c
&lt;&lt;/code&gt;&gt;

You can check the current limit of the ##mariadbd## process specifically by executing the following:

&lt;&lt;code&gt;&gt;
sudo cat /proc/$(pidof mariadbd)/limits | grep &#34;core file&#34;
&lt;&lt;/code&gt;&gt;

If you need to change the core size limit, the method you use depends on how you start ##mariadbd##. See the sections below for more details.

&lt;&lt;product mariadb from=&#34;10.4.5&#34;&gt;&gt;
From MariaDB 10.4.5, the resource limits for the ##mariadbd## process are printed to the [[error-log|error log]] when the ##mariadbd## process crashes. That way, users can confirm whether the process may have been allowed to dump a core file. See MDEV-15051 for more information.
&lt;&lt;/product&gt;&gt;

==== Running mariadbd Using mysqld_safe

If you are starting MariaDB by running ##[[mysqld_safe]]##, then configuring the following in the ##[mysqld_safe]## option group in an option file should allow for unlimited sized core files:

&lt;&lt;code&gt;&gt;
[mysqld_safe]
...
core_file_size=unlimited
&lt;&lt;/code&gt;&gt;

You can check your current values by executing:

&lt;&lt;code&gt;&gt;
my_print_defaults mysqld_safe
&lt;&lt;/code&gt;&gt;

See [[mysqld_safe/#configuring-the-core-file-size|mysqld_safe: Configuring the Core File Size]] for more details.

&lt;&lt;style class=&#34;bluebox&#34;&gt;&gt;
**Note:** If you are using ##[[mysqld_safe]]## and running ##mariadbd## as the ##root## user, then no
core file is created on some systems. The solution is to run ##mariadbd## as another user.
&lt;&lt;/style&gt;&gt;

==== Running mariadbd Manually

If you are starting mariadbd manually or in a custom script, then you can allow for unlimited sized core files by executing the following in the same shell or script in which mariadbd is executed:

&lt;&lt;code&gt;&gt;
ulimit -c unlimited
&lt;&lt;/code&gt;&gt;

==== Running mariadbd Using systemd

If you are starting ##mariadbd## using ##[[systemd]]##, then you may need to customize the MariaDB service to allow for unlimited size core files. For example, you could execute the following:

Using ##sudo systemctl edit mariadb.service## add the contents:
&lt;&lt;code&gt;&gt;
[Service]

LimitCORE=infinity
&lt;&lt;/code&gt;&gt;

See [[systemd/#configuring-the-core-file-size|systemd: Configuring the Core File Size]] for more details.

==== Running MariaDB Containers

To get a core dump in a ##mariadb## container requires [[#setting-the-path-on-linux|setting the path on Linux]] to not include a ##sysctl kernel.core_pattern## beginning with a pipe to an executable that doesn&#39;t exist in the container. Setting to a straight ##core## is recommended.

Also see [[how-to-produce-a-full-stack-trace-for-mariadbd/#containers-with-debug-symbols|Container with Debug Symbols]].

==== Changing the System-Wide Limit

If you want to change the system-wide limit to allow for unlimited size core files for for the ##mysql## user account, then you can do so by adding the following lines to a file in ##[[https://linux.die.net/man/5/limits.conf|/etc/security/limits.d/]]##. For example:

&lt;&lt;code&gt;&gt;
sudo tee /etc/security/limits.d/mariadb_core.conf &lt;&lt;EOF
mysql soft core unlimited
mysql hard core unlimited
EOF
&lt;&lt;/code&gt;&gt;

The system would have to be restarted for this change to take effect.

See [[configuring-linux-for-mariadb/#configuring-the-core-file-size|Configuring Linux for MariaDB: Configuring the Core File Size]] for more details.

=== Setting the Path on Linux

If you are using Linux, then it can be helpful to change a few settings to alter where the core files is written and what file name is used. This is done by setting the ##kernel.core_pattern## and ##kernel.core_uses_pid## attributes. You can check the current values by executing the following:

&lt;&lt;code&gt;&gt;
sysctl kernel.core_pattern
sysctl kernel.core_uses_pid
&lt;&lt;/code&gt;&gt;

If you are using ##mysql-test-run## and want to have the core as part of the test result, the optimal
setting is probably the following (store cores in the current directory as ##core.number-of-process-id##):
&lt;&lt;code&gt;&gt;
sudo sysctl kernel.core_pattern=core.%p kernel.core_uses_pid=0
&lt;&lt;/code&gt;&gt;

If you are using a production system, you probably want to have the core files in a specific directory,
not in the data directory. They place to store cores can be temporarily altered using the ##[[https://linux.die.net/man/8/sysctl|sysctl]]## utility, but it is often more common to alter them via the ##[[https://linux.die.net/man/5/proc|/proc]]## file system. See the following example:

&lt;&lt;code&gt;&gt;
sudo mkdir /tmp/corefiles
sudo chmod 777 /tmp/corefiles
sudo sysctl kernel.core_pattern=/tmp/corefiles/core
sudo sysctl kerel.core_uses_pid=1
&lt;&lt;/code&gt;&gt;

The above commands will tell the system to put core files in ##/tmp/corefiles##, and it also tells the system to put the process ID in the file name.

If you want to make these changes permanent, then you can add the following to a file in ##[[https://linux.die.net/man/5/sysctl.conf|/etc/sysctl.conf.d/]]##. For example:

&lt;&lt;code&gt;&gt;
sudo tee /etc/sysctl.d/mariadb_core.conf &lt;&lt;EOF
kernel.core_pattern=/tmp/corefiles/core
kernel.core_uses_pid=1
EOF
&lt;&lt;/code&gt;&gt;

Note: if you are using containers, the pid is always going to be 1, so this may not be a useful setting. Appending an identifier like %t to the ##[[https://www.kernel.org/doc/html/latest/admin-guide/sysctl/kernel.html#core-pattern|kernel.core_pattern]]## will generate more unique files.

&lt;&lt;product mariadb from=&#34;10.4.5&#34;&gt;&gt;
From MariaDB 10.4.5, the value of ##kernel.core_pattern## is printed to the [[error-log|error log]] when the ##mariadbd## process crashes. That way, users can determine where the process may have dumped a core file. See MDEV-15051 for more information.
&lt;&lt;/product&gt;&gt;

&lt;&lt;product mariadb to=&#34;10.4.4&#34;&gt;&gt;
Prior to MariaDB 10.4.5, the [[error-log|error log]] contains a message indicating that a core file would be written in the ##[[server-system-variables/#datadir|datadir]]## when the ##mariadbd## process crashes, even if this was not true because the ##kernel.core_pattern## actually configured the process to write the core file in a different directory.
&lt;&lt;/product&gt;&gt;

&lt;&lt;style class=&#34;bluebox&#34;&gt;&gt;
**Note:** Ensure that you have enough free disk space in the path pointed to by ##kernel.core_pattern##. 
&lt;&lt;/style&gt;&gt;

==== Extracting Linux core dumps with systemd-coredump

Core dump management can be automated using ##[[systemd]]##, which then centrally manages all core dump files and provides information about detected core dumps and access to collected core files using the ##[[https://www.freedesktop.org/software/systemd/man/coredumpctl.html|coredumpctl]]## utility.

This is enabled per default on Red Hat Enterprise Linux 8 and CentOS 8, and maybe other contemporary Linux distribution releases by now, too. It can be easily checked for by looking at the ##kernel.core_pattern setting##. If it looks like this systemd-coredump is enabled:

&lt;&lt;code&gt;&gt;
# sysctl kernel.core_pattern
kernel.core_pattern = |/usr/lib/systemd/systemd-coredump %P %u %g %s %t %c %h %e
&lt;&lt;/code&gt;&gt;

On other distributions like Ubuntu (at least up to 21.10) it is not enabled by default, but can be set up manually.

To see all recent core dumps on the system you can then simply run

&lt;&lt;code&gt;&gt;
# coredumpctl list
&lt;&lt;/code&gt;&gt;

Or you can check for MariaDB Server core dumps specifically with:

&lt;&lt;code&gt;&gt;
# coredumpctl list /usr/sbin/mariadbd 
&lt;&lt;/code&gt;&gt;

If an actual core file got stored you&#39;ll see ##present## in the COREFILE column of the output, you can then extract the core file with:

&lt;&lt;code&gt;&gt;
# coredumpctl dump -o mariadbd.core ...PID...
&lt;&lt;/code&gt;&gt;

using the process id number from the PID column, or when you just want to retrieve the latest MariaDB Server related entry:

&lt;&lt;code&gt;&gt;
# coredumpctl dump -o mariadb.core /usr/sbin/mariadbd
&lt;&lt;/code&gt;&gt;

Starting with ##systemd## 248 it is also possible to invoke the ##gdb## debugger directly using the new ##--debugger-arguments=...## option, e.g. making the extraction of all thread backtraces from the most recent MariaDB server crash a one liner without even having to extract the core dump file first (requires ##gdb## to be installed):

&lt;&lt;code&gt;&gt;
# coredumpctl debug --debugger-arguments=&#34;-batch -ex &#39;thread apply all bt full&#39;&#34; /usr/sbin/mariadbd
&lt;&lt;/code&gt;&gt;

So far none of the long term support Linux distribution releases have a new enough ##systemd## version for this, the (as of this writing) still upcoming Ubuntu 22.04 &#34;Jammy Jellyfish&#34; will probably the first to support this.

=== Core Dumps and setuid on Linux

Since ##mariadbd## executes ##[[https://linux.die.net/man/2/setuid|setuid]]##, you may have to set  ##fs.suid_dumpable=2## to allow core dumps on Linux. You can check the current ##fs.suid_dumpable## value by using the ##[[https://linux.die.net/man/8/sysctl|sysctl]]## utility. For example:

&lt;&lt;code&gt;&gt;
sysctl fs.suid_dumpable
&lt;&lt;/code&gt;&gt;

You can temporarily set it to ##2## by using the ##[[https://linux.die.net/man/8/sysctl|sysctl]]## utility. For example:

&lt;&lt;code&gt;&gt;
sudo sysctl -w fs.suid_dumpable=2
&lt;&lt;/code&gt;&gt;

Or you can temporarily set it to ##2## by writing to the ##[[https://linux.die.net/man/5/proc|/proc]]## file system. For example:

&lt;&lt;code&gt;&gt;
sudo echo 2 &gt; /proc/sys/fs/suid_dumpable
&lt;&lt;/code&gt;&gt;

If you want to permanently set it to ##2## then you can add the following to a file in ##[[https://linux.die.net/man/5/sysctl.conf|/etc/sysctl.conf.d/]]##:

&lt;&lt;code&gt;&gt;
sudo tee /etc/sysctl.d/mariadb_fs_suid_dumpable.conf &lt;&lt;EOF
fs.suid_dumpable=2
EOF
&lt;&lt;/code&gt;&gt;

&lt;&lt;style class=&#34;bluebox&#34;&gt;&gt;
**Note:** If you don&#39;t want to change ##fs.suid_dumpable##, then another solution is to start ##mariadbd## directly as the ##mysql## user, so that the ##[[https://linux.die.net/man/2/setuid|setuid]]## call is not needed.
&lt;&lt;/style&gt;&gt;

=== Forcing a Core File on Linux

You can get a core dump from a running server with:

&lt;&lt;code&gt;&gt;
sudo gcore -o filename $(pidof mariadbd)
&lt;&lt;/code&gt;&gt;

This will store a core dump in ##filename.pid## where pid is the process ID of ##mariadbd##.
##mariadbd## will continue to be running and will not be affected by ##gcore##.

Another method is to force a core file for ##mariadbd## by sending the process the ##sigabrt## signal, which has the signal code ##6##. This is very useful to get the state of the unresponsive ##mariadbd## process. However, this will cause ##mariadbd## to crash, and crash recovery will be run on restart.

You can send the signal with the ##[[https://linux.die.net/man/1/kill|kill]]## command. For example:

&lt;&lt;code&gt;&gt;
sudo kill -6 $(pidof mariadbd)
&lt;&lt;/code&gt;&gt;

As an alternative to ##$(pidof mariadbd)##, you can find the process ID either by using the ##[[https://linux.die.net/man/1/ps|ps]]## utility or by checking the file defined by the ##[[server-system-variables/#pid_file|pid_file]]## system variable.

== Core Files on Windows

In MariaDB 10.4 and later, core dumps are enabled by default on Windows. See MDEV-18439 for more information.

There are some additional details related to using core files on Windows. 

== Core Files on Kubernetes

See the IBM [[https://github.com/IBM/core-dump-handler|Core Dump Handler]] project.

=== Minidump Files on Windows

On Windows, the core file is created as a [[https://docs.microsoft.com/en-us/windows/desktop/debug/minidump-files|minidump file]].

For details on how to configure and read the [[https://docs.microsoft.com/en-us/windows/desktop/debug/minidump-files|minidump file]], see [[https://support.microsoft.com/en-us/help/315263/how-to-read-the-small-memory-dump-file-that-is-created-by-windows-if-a|How to read the small memory dump file that is created by Windows if a crash occurs]].

== Core Files and Address Sanitizer (ASAN)

If your ##mariadbd## binary is built with [[how-to-compile-and-use-mariadb-with-addresssanitizer-asan|Address Sanitizer (ASAN)]] then it will not be able to generate a core file.

== What&#39;s Included in Core Files

Core files usually contain a dump of all memory in the process&#39;s full address space. This means that if a server has some large buffers configured (such as a large [[xtradbinnodb-buffer-pool|InnoDB buffer pool]]), then the server&#39;s core files can get very large.

However, in MariaDB 10.3.7 and later, some large buffers have been excluded from core files on some systems as a way to reduce the size.

The following buffers are excluded:

* [[xtradbinnodb-buffer-pool|InnoDB buffer pool]]
* [[innodb-system-variables/#innodb_log_buffer_size|InnoDB log buffer]]
* InnoDB Redo log buffer (fixed 2M)
* [[query-cache|Query cache]]

The buffers are only excluded on Linux when using kernel version 3.4 and above and when using a non-debug build of ##mariadbd##. Some Linux kernel versions have a [[https://lists.launchpad.net/maria-discuss/msg05245.html|bug]] which would cause the following warning to be printed to the log:

&lt;&lt;code&gt;&gt;
Sep 25 10:41:19 srv1 mysqld: 2018-09-25 10:41:19 0 [Warning] InnoDB: Failed to set memory to DODUMP: Invalid argument ptr 0x2aaac3400000 size 33554432
&lt;&lt;/code&gt;&gt;

In those cases, the core dump may exclude some additional data. If that is not a concern, then the warning can be ignored. The problem can be fixed by upgrading to a Linux kernel version in which the bug is fixed.

== See Also

* [[how-to-produce-a-full-stack-trace-for-mariadbd|How to Produce a Full Stack Trace for mariadbd]]
* [[http://www.cyberciti.biz/tips/linux-core-dumps.html|HowTo: Debug Crashed Linux Application Core Files Like A Pro]]
* [[https://www.percona.com/community-blog/2018/06/28/nice-feature-in-mariadb-103-no-innodb-buffer-pool-in-coredumps/|A Nice Feature in MariaDB 10.3: no InnoDB Buffer Pool in Core Dumps]]
* [[https://www.percona.com/blog/2011/08/26/getting-mysql-core-file-on-linux/|Getting MySQL Core file on Linux]]</textarea>
    


                    <div id="content_disclaimer" class="graybox">
                        Content reproduced on this site is the property of its respective owners,
                        and this content is not reviewed in advance by MariaDB. The views, information and opinions
                        expressed by this content do not necessarily represent those of MariaDB or any other party.
                    </div>
                </div>
            </section>

            
        </div>
    </div>
</div>

<!-- Footer -->
<footer id="footer">
    <div class="footer">
        <div class="container">
            <div class="row">
                <div class="col-xs-12">
                    <ul class="list-inline text-center footer-nav">
                        <li>
                            <h5>
                                <a href="https://mariadb.com/products" title="Products">Products</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/services" title="Services">Services</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/pricing" title="Pricing">Pricing</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/resources" title="Resources">Resources</a>
                            </h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/about-us" title="About MariaDB">About Us</a></h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/download" title="Download">Download MariaDB</a></h5>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="row row-10">
                
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div id="block-footerformcontact" class="block block-block-content block-block-contentd754ee1b-3cc9-40e7-9ef4-f504f1197fb1">
                        
                            <h5 style="font-weight: 400;">Subscribe to our newsletter!</h5>
                            <script src="//app-sj15.marketo.com/js/forms2/js/forms2.min.js"></script><form id="mktoForm_1498"></form>
                            <script>
                                <!--//--><![CDATA[// ><!--
                                MktoForms2.loadForm("//app-sj15.marketo.com", "573-PXI-984", 1498);
                                //--><!]]]]><![CDATA[>
                                //--><!]]>
                            </script>
                        
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div class="footer-copyright">
                        <div class="text-center">
                            <ul class="list-inline no-margin">
                                <li>
                                    <a href="/legal" title="Legal">Legal</a>
                                </li>
                                <li>
                                    <a href="/privacy-policy" title="Privacy Policy">Privacy Policy</a>
                                </li>
                                <li>
                                    <a href="/cookie-policy/" title="Cookies">Cookie Policy</a>
                                </li>
                            </ul>
                            <p>Copyright &copy; 2024 MariaDB. All rights reserved.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
</footer>
</div>

<div id="ajax_loading">
    <img src="/kb/static/images/ajax-loader.a51c5608d01a.gif" />
</div>

    <!-- Google Tag Manager -->
    <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-MK2847"
                      height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
            '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MK2847');</script>
    <!-- End Google Tag Manager -->

</body>

<script type="text/javascript" src="/kb/static/js/main.1587e3a666fc.js" charset="utf-8"></script>

</html>