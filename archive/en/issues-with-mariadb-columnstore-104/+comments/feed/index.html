<?xml version="1.0" encoding="utf-8"?>
<rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title>MariaDB Knowledge Base Comments for: Issues with MariaDB ColumnStore 1.0.4</title><link>https://mariadb.com/kb/en/issues-with-mariadb-columnstore-104/+comments/feed/</link><description></description><atom:link href="https://mariadb.com/kb/en/issues-with-mariadb-columnstore-104/+comments/feed/" rel="self"></atom:link><language>en-us</language><lastBuildDate>Mon, 02 Dec 2024 12:37:07 +0000</lastBuildDate><item><title>Re: Issues with MariaDB ColumnStore 1.0.4</title><link>https://mariadb.com/kb/en/issues-with-mariadb-columnstore-104/+comments/2619</link><description>&lt;p&gt;Yes, this was a miss in the 1.0.4 release. This will be fixed in our next RC release 1.0.5. Thanks for testing!&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">David Thompson</dc:creator><guid>https://mariadb.com/kb/en/issues-with-mariadb-columnstore-104/+comments/2619</guid></item><item><title>Re: Issues with MariaDB ColumnStore 1.0.4</title><link>https://mariadb.com/kb/en/issues-with-mariadb-columnstore-104/+comments/2618</link><description>&lt;p&gt;A similar bug &lt;a href="https://jira.mariadb.org/browse/MCOL-404"&gt;MCOL-404&lt;/a&gt; was submitted. I used non-root installation guide and encountered the same issue. Thanks.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Zeng Chun</dc:creator><guid>https://mariadb.com/kb/en/issues-with-mariadb-columnstore-104/+comments/2618</guid></item><item><title>Re: Issues with MariaDB ColumnStore 1.0.4</title><link>https://mariadb.com/kb/en/issues-with-mariadb-columnstore-104/+comments/2595</link><description>&lt;p&gt;Ok. Thank you very much.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Zeng Chun</dc:creator><guid>https://mariadb.com/kb/en/issues-with-mariadb-columnstore-104/+comments/2595</guid></item><item><title>Re: Issues with MariaDB ColumnStore 1.0.4</title><link>https://mariadb.com/kb/en/issues-with-mariadb-columnstore-104/+comments/2594</link><description>&lt;p&gt;I've create jira bug:&lt;a href="https://jira.mariadb.org/browse/MCOL-396"&gt;https://jira.mariadb.org/browse/MCOL-396&lt;/a&gt; to track the AlarmConfig issue with direct pm server restart.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">David Thompson</dc:creator><guid>https://mariadb.com/kb/en/issues-with-mariadb-columnstore-104/+comments/2594</guid></item><item><title>Re: Issues with MariaDB ColumnStore 1.0.4</title><link>https://mariadb.com/kb/en/issues-with-mariadb-columnstore-104/+comments/2587</link><description>&lt;p&gt;Thanks for your feedback.&lt;/p&gt;
&lt;p&gt;I reinstalled the MariaDB ColumnStore 1.0.4 from scratch after resetting the locale on all worker nodes. Right now, the installation can be finished successfully and the system status is Active. So it seems that it is not an issue of firewalls. In addition, I used local disks for installation.&lt;/p&gt;
&lt;p&gt;I have copied the ssh key from PM1 to other nodes. Also I need copy the ssh key from UM1 to UM2 so that the UM1 can configure the replication between UM1 and UM2.&lt;/p&gt;
&lt;p&gt;My configuration is 2UM3PM. I can reproduce the zero size of AlarmConfig.xml after restarting the processes in a certain PM node using the command "/usr/local/mariadb/columnstore/bin/columnstore restart". You are right, I should use mcsadmin to manage the whole system. But I have to try other workarounds when I failed to stop the system. I have checked the settings of firewalls and stopped the service of iptables. I still encountered the issue of stopping the system. I observed that some processes cannot be stopped while the status of PM node was failed. So please help investigate the stop issue. Thank you very much.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Zeng Chun</dc:creator><guid>https://mariadb.com/kb/en/issues-with-mariadb-columnstore-104/+comments/2587</guid></item><item><title>Re: Issues with MariaDB ColumnStore 1.0.4</title><link>https://mariadb.com/kb/en/issues-with-mariadb-columnstore-104/+comments/2586</link><description>&lt;p&gt;Additional information to help diagnose the issue. Once you install the packages on the initial server, pm1, run post-install and postConfigure. If you get to the point where it says Starting system processes, but it seems to hang or not return. Here are some things to check:&lt;/p&gt;
&lt;p&gt;on pm1, create the alias if you haven't already&lt;/p&gt;
&lt;ol start="1"&gt;&lt;li&gt;. /usr/local/mariadb/columnstore/bin/columnstoreAlias
    then run following command and check the process status:
&lt;/li&gt;&lt;li&gt;mcsadmin getsysteminfo
    check if ProcMon is ACTIVE on all configured servers, if not, check the log files on the asscouiated
    server to see what error ProcMon is reporting. Also make sure the ProcMgr is ACTIVE on pm1.
&lt;/li&gt;&lt;/ol&gt;
&lt;p&gt;    logs are located in:&lt;/p&gt;
&lt;p&gt;    /var/log/mariadb/columnstore&lt;/p&gt;
&lt;p&gt;generally when ProcMon/ProcMgr isn't active, its because one of these issues:
1. if external storage, an pm /etc/fstab isnt setup
2. message issue between the servers that is causing ProcMon's and ProcMgr to fail to communicate. Make sure all server firewalls are disable along with SElinux. &lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">David Hill</dc:creator><guid>https://mariadb.com/kb/en/issues-with-mariadb-columnstore-104/+comments/2586</guid></item><item><title>Re: Issues with MariaDB ColumnStore 1.0.4</title><link>https://mariadb.com/kb/en/issues-with-mariadb-columnstore-104/+comments/2585</link><description>&lt;p&gt;For starters, you shouldn't be using '/usr/local/mariadb/columnstore/bin/columnstore restart' restart the system. This will just restart the columnstore service on a local node. As documented in the KD guides, you will want to use the mcsadmin console for these commands. And these are best run from the pm1, which is where the install took place.&lt;/p&gt;
&lt;p&gt;mcsadmin shutdownsystem y &lt;em&gt;stop all processes on all nodes 
mcsadmin startsystem            &lt;/em&gt; will start all processes, if ssh-key is not setup, you need to provide the
                                               &lt;em&gt; user password as the third argument, when this is run after a shutdown,
                                               &lt;/em&gt; password not required when running after a stopsystem 
mcsadmin                              &lt;em&gt; stopsystem stops all the DB processes on all nodes, leave the 
                                              &lt;/em&gt; Proc-Mgt running&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">David Hill</dc:creator><guid>https://mariadb.com/kb/en/issues-with-mariadb-columnstore-104/+comments/2585</guid></item><item><title>Re: Issues with MariaDB ColumnStore 1.0.4</title><link>https://mariadb.com/kb/en/issues-with-mariadb-columnstore-104/+comments/2583</link><description>&lt;p&gt;We are not aware of issues that could cause AlarmConfig.xml to get emptied. The localedef issue causes some weird behavior because the install is partial so wanted to exclude that (we will update doc and the postCfg script is being updated to log better info if this is not done). On the stop, it would be helpful to check if there is anything in the logs for the other servers. Also the localedef command needs to performed on all servers not just the install one.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">David Thompson</dc:creator><guid>https://mariadb.com/kb/en/issues-with-mariadb-columnstore-104/+comments/2583</guid></item><item><title>Re: Issues with MariaDB ColumnStore 1.0.4</title><link>https://mariadb.com/kb/en/issues-with-mariadb-columnstore-104/+comments/2582</link><description>&lt;p&gt;It seems that the system can be started easier than before. However, the system cannot be stopped successfully including restartSystem and stopSystem. &lt;/p&gt;
&lt;p&gt;The error messages are as follows:&lt;/p&gt;
&lt;p&gt;ProcessMonitor[29575]: 24.095830 |0|0|0| E 18 CAL0000: EXCEPTION ERROR on setProcessStatus: Caught unknown exception!&lt;/p&gt;
&lt;p&gt;controllernode[29910]: 37.135918 |0|0|0| E 29 CAL0000: DBRM: error: SessionManager::getSystemState() failed (network)&lt;/p&gt;
&lt;p&gt;ProcessManager[29910]: 36.016391 |0|0|0| E 17 CAL0000: line: 1211 STOPSYSTEM: Failed, timeout waiting for module to stop&lt;/p&gt;
&lt;p&gt;By the way, can you help investigate the issue of AlarmConfig.xml mentioned in my first reply?&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Zeng Chun</dc:creator><guid>https://mariadb.com/kb/en/issues-with-mariadb-columnstore-104/+comments/2582</guid></item><item><title>Re: Issues with MariaDB ColumnStore 1.0.4</title><link>https://mariadb.com/kb/en/issues-with-mariadb-columnstore-104/+comments/2581</link><description>&lt;p&gt;This looks very similar to another case we just saw. Can you run:
localedef -i en_US -f UTF-8 en_US.UTF-8
On each of the servers as missing locale defs for en_US and UTF-8 were the problem there. Although your server is running in UTF-8 this step may still be needed to make them available to the libraries. This will be added to the pre-req doc.&lt;/p&gt;
&lt;p&gt;Let me know if that fixes the issue.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">David Thompson</dc:creator><guid>https://mariadb.com/kb/en/issues-with-mariadb-columnstore-104/+comments/2581</guid></item><item><title>Re: Issues with MariaDB ColumnStore 1.0.4</title><link>https://mariadb.com/kb/en/issues-with-mariadb-columnstore-104/+comments/2579</link><description>&lt;p&gt;The root cause may be related to the file /usr/local/mariadb/columnstore/etc/AlarmConfig.xml. In some cases, the file size becomes zero that will cause the PM node cannot be started. It is a new feature added in this release. Please help investigate the issue. Thank you very much.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Zeng Chun</dc:creator><guid>https://mariadb.com/kb/en/issues-with-mariadb-columnstore-104/+comments/2579</guid></item><item><title>Re: Issues with MariaDB ColumnStore 1.0.4</title><link>https://mariadb.com/kb/en/issues-with-mariadb-columnstore-104/+comments/2572</link><description>&lt;p&gt;Thanks for your feedback. I have reviewed the web links and followed the guide in those pages carefully. I can start the system to Active status occasionally. So I think it should not be the issue of firewalls.&lt;/p&gt;
&lt;p&gt;My configuration is 2UM3PM. I found some core files in the user home directory of PM2 and PM3 when restarting the system. It should be caused by the conflict of ProcMon after I manually restarted the PM processes by using the command  "/usr/local/mariadb/columnstore/bin/columnstore restart".&lt;/p&gt;
&lt;p&gt;My workaround is installing the system with 2UM1PM and then add other PM modules, i.e. PM2 and PM3. However, it is still difficult to restart the system to Active status. Thanks.&lt;/p&gt;
&lt;p&gt;OS: CentOS release 6.5 (Final) 2.6.32_431-3 #2 SMP Wed Aug 24 14:40:53 CST 2016 x86_64&lt;/p&gt;
&lt;p&gt;OS locale: en_US.UTF-8&lt;/p&gt;
&lt;p&gt;---&lt;/p&gt;
&lt;p&gt;Core was generated by `/usr/local/mariadb/columnstore/bin/ProcMon'.
Program terminated with signal 6, Aborted.&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;0  0x00000032d3e325e5 in raise () from /lib64/libc.so.6
Missing separate debuginfos, use: debuginfo-install glibc-2.12-1.192.el6.x86_64 libgcc-4.4.7-17.el6.x86_64 libstdc++-4.4.7-17.el6.x86_64 libxml2-2.7.6-14.el6.x86_64 zlib-1.2.3-29.el6.x86_64
(gdb) bt
&lt;/li&gt;&lt;li&gt;0  0x00000032d3e325e5 in raise () from /lib64/libc.so.6
&lt;/li&gt;&lt;li&gt;1  0x00000032d3e33dc5 in abort () from /lib64/libc.so.6
&lt;/li&gt;&lt;li&gt;2  0x0000003dc98bea7d in &lt;u&gt;gnu_cxx::&lt;/u&gt;verbose_terminate_handler() () from /usr/lib64/libstdc++.so.6
&lt;/li&gt;&lt;li&gt;3  0x0000003dc98bcbd6 in ?? () from /usr/lib64/libstdc++.so.6
&lt;/li&gt;&lt;li&gt;4  0x0000003dc98bcc03 in std::terminate() () from /usr/lib64/libstdc++.so.6
&lt;/li&gt;&lt;li&gt;5  0x0000003dc98bcd22 in &lt;u&gt;cxa_throw () from /usr/lib64/libstdc++.so.6&lt;/u&gt;
&lt;/li&gt;&lt;li&gt;6  0x000000000045806e in void boost::throw_exception&amp;lt;boost::lock_error&amp;gt;(boost::lock_error const&amp;amp;) ()
&lt;/li&gt;&lt;li&gt;7  0x0000000000456de8 in startup::StartUp::installDir() ()
&lt;/li&gt;&lt;li&gt;8  0x00007fa1ffbca694 in config::Config::makeConfig(char const*) () from /usr/local/mariadb/columnstore/lib/libconfigcpp.so.1
&lt;/li&gt;&lt;li&gt;9  0x00007fa1ffdedb2f in logging::Message::Message(unsigned int) () from /usr/local/mariadb/columnstore/lib/libloggingcpp.so.1
&lt;/li&gt;&lt;li&gt;10 0x000000000042967f in processmonitor::MonitorLog::writeLog(int, std::basic_string&amp;lt;char, std::char_traits&amp;lt;char&amp;gt;, std::allocator&amp;lt;char&amp;gt; &amp;gt;, logging::LOG_TYPE) ()
&lt;/li&gt;&lt;li&gt;11 0x0000000000439618 in processmonitor::ProcessMonitor::stopProcess(int, std::basic_string&amp;lt;char, std::char_traits&amp;lt;char&amp;gt;, std::allocator&amp;lt;char&amp;gt; &amp;gt;, std::basic_string&amp;lt;char, std::char_traits&amp;lt;char&amp;gt;, std::allocator&amp;lt;char&amp;gt; &amp;gt;, int, bool) ()
&lt;/li&gt;&lt;li&gt;12 0x000000000041d16a in main ()&lt;/li&gt;&lt;/ol&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Zeng Chun</dc:creator><guid>https://mariadb.com/kb/en/issues-with-mariadb-columnstore-104/+comments/2572</guid></item><item><title>Re: Issues with MariaDB ColumnStore 1.0.4</title><link>https://mariadb.com/kb/en/issues-with-mariadb-columnstore-104/+comments/2571</link><description>&lt;p&gt;Interesting. Can you share the following:
- OS
- Locale and are you configuring for UTF8?
- are you able to send us the gdb output for the core dump?&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">David Thompson</dc:creator><guid>https://mariadb.com/kb/en/issues-with-mariadb-columnstore-104/+comments/2571</guid></item><item><title>Re: Issues with MariaDB ColumnStore 1.0.4</title><link>https://mariadb.com/kb/en/issues-with-mariadb-columnstore-104/+comments/2570</link><description>&lt;p&gt;OS environment is as follows: 
CentOS release 6.5
2.6.32_431-3 #2 SMP Wed Aug 24 14:40:53 CST 2016 x86_64&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Zeng Chun</dc:creator><guid>https://mariadb.com/kb/en/issues-with-mariadb-columnstore-104/+comments/2570</guid></item><item><title>Re: Issues with MariaDB ColumnStore 1.0.4</title><link>https://mariadb.com/kb/en/issues-with-mariadb-columnstore-104/+comments/2567</link><description>&lt;p&gt;Hi, the best thing to do would be to file a bug in our jira: &lt;a href="https://jira.mariadb.org"&gt;https://jira.mariadb.org&lt;/a&gt;, project MCOL with more details. But first here are some pointers to check before doing this.&lt;/p&gt;
&lt;p&gt;Tips on preparing your system which you should check for especially with a multi server deployment are here:
&lt;a href="https://mariadb.com/kb/en/mariadb/preparing-for-columnstore-installation/"&gt;https://mariadb.com/kb/en/mariadb/preparing-for-columnstore-installation/&lt;/a&gt;
Common issues are firewalls blocking ports or files, inconsistent passwords or ssh-keys, and inconsistent os setup.&lt;/p&gt;
&lt;p&gt; Tips on troubleshooting are available here:
&lt;a href="https://mariadb.com/kb/en/mariadb/system-troubleshooting-mariadb-columnstore/"&gt;https://mariadb.com/kb/en/mariadb/system-troubleshooting-mariadb-columnstore/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;If you just want to try the product out, the single server installation is obviously much simpler.&lt;/p&gt;
&lt;p&gt;After filing a jira ideally you should run the columnstoreSupport -a tool and email that to us separately since our jira is public.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">David Thompson</dc:creator><guid>https://mariadb.com/kb/en/issues-with-mariadb-columnstore-104/+comments/2567</guid></item></channel></rss>