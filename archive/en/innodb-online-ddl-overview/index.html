<!DOCTYPE html>
<html>
<head data-cookie-domain=""
      data-cookie-path="/">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="apple-touch-icon" sizes="180x180" href="/kb/static/images/favicons/apple-touch-icon.159e713979be.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/kb/static/images/favicons/favicon-32x32.bc0ac1d5d11e.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/kb/static/images/favicons/favicon-16x16.5801f8f0f34e.png">
    <link rel="shortcut icon" href="/kb/static/images/favicons/favicon.d122d305dee4.ico" type="image/x-icon" />

    <title>InnoDB Online DDL Overview - MariaDB Knowledge Base</title>

    <link href="/kb/static/css/main.f7633538c846.css" rel="stylesheet" type="text/css" />

    

    

    <!-- FB Open Graph tags -->
    <meta property="og:title" content="InnoDB Online DDL Overview" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://mariadb.com/kb/en/innodb-online-ddl-overview/" />
    <meta property="og:image" content="http://mariadb.comaskmonty-logo.png" />
    <meta property="og:site_name" content="MariaDB KnowledgeBase" />
    <meta property="fb:admins" content="514852603" />
    <meta property="og:description" content="All about online DDL operations with InnoDB." />

    <meta name="description" content="All about online DDL operations with InnoDB." />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="//fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet"/>
    
</head>
<body class="mpkb nodes products nodes_view jqui" id="nodes_view">





<div id="menu-mobile" class="visible-sm visible-xs">

    <div>
        <div id="mobile-close-menu" class="text-right">
            <a href="javascript:void(0)" title="Close Menu" id="back-main" class="toggle-menu">X<span></span></a>
        </div>
    </div>
    <div class="mainmenu-mobile">
        <ul class="ls-none ul-menu">
            <li data-sub="submenu5"><a class="open-form-search" href="/kb/search/" title="Search">Search </a></li>
            <li data-sub="submenu0"><a href="/products" title="Products">Products</a><span class="arrow-main"></span></li>
            <li data-sub="submenu1"><a href="/services" title="Services">Services</a><span class="arrow-main"></span></li>
            <li data-sub="submenu2"><a href="/resources" title="Resources">Resources</a><span class="arrow-main"></span></li>
            <li data-sub="submenu3"><a href="/about-us" title="About">About</a><span class="arrow-main"></span></li>
            <li data-sub="submenu4"><a href="/contact" title="Contact">Contact</a></li>
        </ul>
    </div>

    <div class="nav-top-mobile">
        <div class="select-box form">

            <ul class="inline-block-md mb-none top-nav">
                <li>

                </li>
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/innodb-online-ddl-overview/"> Login</a>
                    </li>
                
            </ul>



        </div>
        <p class="text-center copyright">Copyright &copy; 2024 MariaDB. All rights reserved.</p>
    </div>
</div>
<div class="violator-wrap d-none" id="top_violator">
    <div class="container">
        <div class="row">
            <div class="col-xs-12 col-sm-12">
                <div class="violator-outer">
                    <div class="violator-inner">
                        <div class="row">
                            <div class="col-xs-12 col-sm-9 col-lg-7 col-lg-offset-2" id="top_violator_content">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="content-link" target="_blank" rel="nofollow noreferrer">
                                    <span>The Ultimate Guide to High Availability with MariaDB</span>
                                </a>
                            </div>
                            <div class="col-xs-12 col-sm-3" id="top_violator_cta">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="btn btn-mariadb" target="_blank" rel="nofollow noreferrer">Download Now</a>
                            </div>
                        </div>
                    </div>
                    <button type="button" class="btn btn-link close-btn">
                        <svg xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 24 24" width="15px" height="15px"><path d="M 4.9902344 3.9902344 A 1.0001 1.0001 0 0 0 4.2929688 5.7070312 L 10.585938 12 L 4.2929688 18.292969 A 1.0001 1.0001 0 1 0 5.7070312 19.707031 L 12 13.414062 L 18.292969 19.707031 A 1.0001 1.0001 0 1 0 19.707031 18.292969 L 13.414062 12 L 19.707031 5.7070312 A 1.0001 1.0001 0 0 0 18.980469 3.9902344 A 1.0001 1.0001 0 0 0 18.292969 4.2929688 L 12 10.585938 L 5.7070312 4.2929688 A 1.0001 1.0001 0 0 0 4.9902344 3.9902344 z"/></svg>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="wrapper">
<div id="top-nav">
    <div class="container">
        <ul class="hidden-sm hidden-xs" >
            <li><a href="https://mariadb.com/kb/">Knowledge Base</a></li>
            <li><a href="https://mariadb.com/contact/">Contact</a></li>
            
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/innodb-online-ddl-overview/" rel="nofollow">Login</a>
                    </li>
                
            
            
            <li id="search-form">
                <form action="/kb/en/+search/" method="get" id="search-block-form" accept-charset="UTF-8">
                    <input id="search" title="Enter the terms you wish to search for."
                           placeholder="Search . . ." type="text"
                           name="q" value="" size="15" maxlength="128" class="form-text"
                           data-autocomplete-url="/kb/en/+search/autocomplete/">
                    <input type="hidden" name="quick" value="1" />
                    <input type="hidden" name="source" value="kb" />
                </form>
            </li>
            <li><a id="search-toggler" href="/kb/search/">Search</a></li>
            
        </ul>
    </div>
</div>
<div id="navbar-bottom" class="navbar">
    <div class="container">
        
        
        
        
        <div class="row">
            <div class="col-md-3 col-sm-9 col-xs-9">
                <a class="brand" href="/" title="MariaDB">
                    <img src="/kb/static/images/logo-2018-black.95f5978ae14d.png">
                </a>
            </div>
            <div class="col-md-9 hidden-sm hidden-xs">
                <div class="main-menu">
                    <ul id="main-menu" class="nav navbar-nav inline-block-sm">
    <li class="has-sub full-menu">
        <a href="/products" title="Products">Products</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/services" title="Services">Services</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/pricing" title="Pricing">Pricing</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/resources" title="Resources">Resources</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/about-us" title="About Us">About Us</a>
    </li>
    <li class="">
        <a class="button electric-eel small top-bar-right-download" href="/downloads/">Download</a>
    </li>
</ul>
                </div>
            </div>
            <div class="col-md-3 visible-sm visible-xs col-sm-3 col-xs-3 ps-rv">
                <div class="navbar-header text-right pull-right">
                    <button type="button" class="menu-control toggle-menu" id="open-menu">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="main">
    <div class="container">
        

        <div id="subheader1" class="clearfix">
            <div class="pull-left">
                
                <div id="breadcrumbs" class="breadcrumb">
                    <a href="/kb/en/">Knowledge Base</a>
                    


    
    » <a class="crumb" href="/kb/en/documentation/">MariaDB Server Documentation</a>
    

    
    » <a class="crumb" href="/kb/en/columns-storage-engines-and-plugins/">Columns, Storage Engines, and Plugins</a>
    

    
    » <a class="crumb" href="/kb/en/storage-engines/">Storage Engines</a>
    

    
    » <a class="crumb" href="/kb/en/innodb/">InnoDB</a>
    

    
    » <a class="crumb" href="/kb/en/innodb-online-ddl/">InnoDB Online DDL</a>
    


    » <a class="node_link crumb" href="/kb/en/innodb-online-ddl-overview/">InnoDB Online DDL Overview</a>


                </div>
                
            </div>
        </div>
    </div>
    <div class="container" id="container-main">
        <div class="row">
            
            
                
                <aside id="sidebar-first" class="sidebar col-md-2 hidden-xs hidden-sm hidden-print">
                    
                        
                        <ul id="category_menu" class="nav nav-pills nav-stacked">
                            <li><a href="/kb/en/">Home</a></li>
                            
                                
                                    <li><a href="/kb/en/+questions/">Open Questions</a></li>
                                
                                <li><a href="/kb/en/documentation/">MariaDB Server</a></li>
                                <li><a href="/kb/en/maxscale/">MariaDB MaxScale</a></li>
                                <li><a href="/kb/en/mariadb-columnstore/">MariaDB ColumnStore</a></li>
                                <li><a href="/kb/en/connectors/">Connectors</a></li>
                            

                        </ul>
                    

                    
<div>



<div class="well well-small box actions"><div>

        <a class="btn btn-block btn-blue btn-sm" href="/kb/en/innodb-online-ddl-overview/+history" rel="nofollow">History</a>
        
        
        
        <a class="btn btn-block btn-blue btn-sm" href="/kb/en/innodb-online-ddl-overview/+source/">Source</a>
        
        <a class="btn btn-block btn-blue btn-sm flag" href="/kb/en/innodb-online-ddl-overview/+flag"
                data-flag-url="/kb/en/innodb-online-ddl-overview/+flag" rel="nofollow">
                Flag as Spam / Inappropriate</a>
        
        <a class="btn btn-block btn-blue btn-sm" href="/kb/en/innodb-online-ddl-overview/+translate/">
                Translate</a>
        

</div>
</div>





<div class="well well-small box node_info"><div>

    <dl>
        <dt>Created</dt>
        <dd>

<span class="datetime" title="2017-09-06 11:15">7 years, 3 months ago</span></dd>

        <dt>Modified</dt>
        <dd>

<span class="datetime" title="2022-04-27 14:40">2 years, 7 months ago</span></dd>

        <dt>Type</dt>
        <dd>article</dd>

        <dt>Status</dt>
        <dd>active</dd>

        <dt>License</dt>
        <dd>
            
                <a href="/kb/en/innodb-online-ddl-overview/+license/">CC BY-SA / Gnu FDL</a>
            
        </dd>

        
    </dl>

    
    <ul class="rss_feeds">
        <li><a href="/kb/en/innodb-online-ddl-overview/+history/feed/">
            History</a>
        </li>
        <li><a href="/kb/en/innodb-online-ddl-overview/+comments/feed/">
            Comments</a>
        </li>
    </ul>
    

</div>
</div>





    
    
    

<div class="well well-small box attachments"><div><div class="edit_link pull-right"><a href="/kb/en/innodb-online-ddl-overview/+edit/attachments/">Edit</a></div><h5>Attachments</h5></div><div>

        
            <div class="no_data">No attachments exist</div>
        
    
</div>
</div>

    



    
    



    
    

<div class="well well-small box"><div><h5>Product Versions</h5></div><div>

        <ul id="product_chooser">
            
                <li class="mariadb_from_10_3">
                    <label><input type="checkbox" data-product-class="mariadb_from_10_3"
                            >MariaDB starting with 10.3</label>
                </li>
            
                <li class="mariadb_to_10_2">
                    <label><input type="checkbox" data-product-class="mariadb_to_10_2"
                            >MariaDB until 10.2</label>
                </li>
            
                <li class="mariadb_from_10_3">
                    <label><input type="checkbox" data-product-class="mariadb_from_10_3"
                            >MariaDB starting with 10.3</label>
                </li>
            
                <li class="mariadb_from_10_3">
                    <label><input type="checkbox" data-product-class="mariadb_from_10_3"
                            >MariaDB starting with 10.3</label>
                </li>
            
                <li class="mariadb_from_10_3">
                    <label><input type="checkbox" data-product-class="mariadb_from_10_3"
                            >MariaDB starting with 10.3</label>
                </li>
            
                <li class="mariadb_to_10_2">
                    <label><input type="checkbox" data-product-class="mariadb_to_10_2"
                            >MariaDB until 10.2</label>
                </li>
            
                <li class="mariadb_from_10_3">
                    <label><input type="checkbox" data-product-class="mariadb_from_10_3"
                            >MariaDB starting with 10.3</label>
                </li>
            
                <li class="mariadb_from_10_3">
                    <label><input type="checkbox" data-product-class="mariadb_from_10_3"
                            >MariaDB starting with 10.3</label>
                </li>
            
        </ul>
    
</div>
</div>






</div>


                    

































                </aside>
            
            
            
                
            
            
                
            
            <section id="content" class="limited_width col-md-8 clearfix">
                
                    <h1>InnoDB Online DDL Overview</h1>
                

                



                <div>
                    
    

    
    
    

    <div class="node creole">
        
        
        


    
    <div class="answer formatted">
        <div class="table_of_contents well well-small">
<h3>Contents</h3>
 <ol class="toc">

    <li class=""><a href="#alter-algorithms" title="Alter Algorithms">Alter Algorithms</a></li>

    <li class=""><a href="#specifying-an-alter-algorithm" title="Specifying an Alter Algorithm">Specifying an Alter Algorithm</a>    <ol class="toc">

        <li class=""><a href="#specifying-an-alter-algorithm-using-the-algorithm-clause" title="Specifying an Alter Algorithm Using the ALGORITHM Clause">Specifying an Alter Algorithm Using the ALGORITHM Clause</a></li>

        <li class=""><a href="#specifying-an-alter-algorithm-using-system-variables" title="Specifying an Alter Algorithm Using System Variables">Specifying an Alter Algorithm Using System Variables</a>    </ol>
</li>

    <li class=""><a href="#supported-alter-algorithms" title="Supported Alter Algorithms">Supported Alter Algorithms</a>    <ol class="toc">

        <li class=""><a href="#default-algorithm" title="DEFAULT Algorithm">DEFAULT Algorithm</a></li>

        <li class=""><a href="#copy-algorithm" title="COPY Algorithm">COPY Algorithm</a>        <ol class="toc">

            <li class=""><a href="#using-the-copy-algorithm-with-innodb" title="Using the COPY Algorithm with InnoDB">Using the COPY Algorithm with InnoDB</a>        </ol>
</li>

        <li class=""><a href="#inplace-algorithm" title="INPLACE Algorithm">INPLACE Algorithm</a>        <ol class="toc">

            <li class=""><a href="#using-the-inplace-algorithm-with-innodb" title="Using the INPLACE Algorithm with InnoDB">Using the INPLACE Algorithm with InnoDB</a></li>

            <li class=""><a href="#operations-supported-by-innodb-with-the-inplace-algorithm" title="Operations Supported by InnoDB with the INPLACE Algorithm">Operations Supported by InnoDB with the INPLACE Algorithm</a>        </ol>
</li>

        <li class=""><a href="#nocopy-algorithm" title="NOCOPY Algorithm">NOCOPY Algorithm</a>        <ol class="toc">

            <li class=""><a href="#operations-supported-by-innodb-with-the-nocopy-algorithm" title="Operations Supported by InnoDB with the NOCOPY Algorithm">Operations Supported by InnoDB with the NOCOPY Algorithm</a>        </ol>
</li>

        <li class=""><a href="#instant-algorithm" title="INSTANT Algorithm">INSTANT Algorithm</a>        <ol class="toc">

            <li class=""><a href="#operations-supported-by-innodb-with-the-instant-algorithm" title="Operations Supported by InnoDB with the INSTANT Algorithm">Operations Supported by InnoDB with the INSTANT Algorithm</a>        </ol>
    </ol>
</li>

    <li class=""><a href="#alter-locking-strategies" title="Alter Locking Strategies">Alter Locking Strategies</a></li>

    <li class=""><a href="#specifying-an-alter-locking-strategy" title="Specifying an Alter Locking Strategy">Specifying an Alter Locking Strategy</a>    <ol class="toc">

        <li class=""><a href="#specifying-an-alter-locking-strategy-using-the-lock-clause" title="Specifying an Alter Locking Strategy Using the LOCK Clause">Specifying an Alter Locking Strategy Using the LOCK Clause</a></li>

        <li class=""><a href="#specifying-an-alter-locking-strategy-using-alter-online-table" title="Specifying an Alter Locking Strategy Using ALTER ONLINE TABLE">Specifying an Alter Locking Strategy Using ALTER ONLINE TABLE</a>    </ol>
</li>

    <li class=""><a href="#supported-alter-locking-strategies" title="Supported Alter Locking Strategies">Supported Alter Locking Strategies</a>    <ol class="toc">

        <li class=""><a href="#default-locking-strategy" title="DEFAULT Locking Strategy">DEFAULT Locking Strategy</a></li>

        <li class=""><a href="#none-locking-strategy" title="NONE Locking Strategy">NONE Locking Strategy</a></li>

        <li class=""><a href="#shared-locking-strategy" title="SHARED Locking Strategy">SHARED Locking Strategy</a></li>

        <li class=""><a href="#exclusive-locking-strategy" title="EXCLUSIVE Locking Strategy">EXCLUSIVE Locking Strategy</a>    </ol>
 </ol>
</li>
</div>
<p>InnoDB tables support online DDL, which permits concurrent DML and uses optimizations to avoid unnecessary table copying.</p>
<p>The <a href="/kb/en/alter-table/">ALTER TABLE</a> statement supports two clauses that are used to implement online DDL:</p>
<ul start="1"><li><a href="/kb/en/alter-table/#algorithm">ALGORITHM</a> - This clause controls how the DDL operation is performed.
</li><li><a href="/kb/en/alter-table/#lock">LOCK</a> - This clause controls how much concurrency is allowed while the DDL operation is being performed.
</li></ul>
<h2 class="anchored_heading" id="alter-algorithms">Alter Algorithms</h2>
<p>InnoDB supports multiple algorithms for performing DDL operations. This offers a significant performance improvement over previous versions. The supported algorithms are:</p>
<ul start="1"><li><code>DEFAULT</code> - This implies the default behavior for the specific operation.
</li><li><code>COPY</code>
</li><li><code>INPLACE</code>
</li><li><code>NOCOPY</code> - This was added in <a href="/kb/en/mariadb-1037-release-notes/">MariaDB 10.3.7</a>.
</li><li><code>INSTANT</code> - This was added in <a href="/kb/en/mariadb-1037-release-notes/">MariaDB 10.3.7</a>.
</li></ul>
<h2 class="anchored_heading" id="specifying-an-alter-algorithm">Specifying an Alter Algorithm</h2>
<p>The set of alter algorithms can be considered as a hierarchy. The hierarchy is ranked in the following order, with <em>least efficient</em> algorithm at the top, and <em>most efficient</em> algorithm at the bottom:</p>
<ul start="1"><li><code>COPY</code>
</li><li><code>INPLACE</code>
</li><li><code>NOCOPY</code>
</li><li><code>INSTANT</code>
</li></ul>
<p>When a user specifies an alter algorithm for a DDL operation, MariaDB does not necessarily use that specific algorithm for the operation. It interprets the choice in the following way:</p>
<ul start="1"><li>If the user specifies <code>COPY</code>, then InnoDB uses the <code>COPY</code> algorithm.
</li><li>If the user specifies any other algorithm, then InnoDB interprets that choice as the <em>least efficient</em> algorithm that the user is willing to accept. This means that if the user specifies <code>INPLACE</code>, then InnoDB will use the <em>most efficient</em> algorithm supported by the specific operation from the set (<code>INPLACE</code>, <code>NOCOPY</code>, <code>INSTANT</code>). Likewise, if the user specifies <code>NOCOPY</code>, then InnoDB will use the <em>most efficient</em> algorithm supported by the specific operation from the set (<code>NOCOPY</code>, <code>INSTANT</code>).
</li></ul>
<p>There is also a special value that can be specified:</p>
<ul start="1"><li>If the user specifies <code>DEFAULT</code>, then InnoDB uses its default choice for the operation. The default choice is to use the most efficient algorithm supported by the operation. The default choice will also be used if no algorithm is specified. Therefore, if you want InnoDB to use the most efficient algorithm supported by an operation, then you usually do not have to explicitly specify any algorithm at all.
</li></ul>
<h3 class="anchored_heading" id="specifying-an-alter-algorithm-using-the-algorithm-clause">Specifying an Alter Algorithm Using the ALGORITHM Clause</h3>
<p>InnoDB supports the <a href="/kb/en/alter-table/#algorithm">ALGORITHM</a> clause.</p>
<p>The <a href="/kb/en/alter-table/#algorithm">ALGORITHM</a> clause can be used to specify the <em>least efficient</em> algorithm that the user is willing to accept. It is supported by the <a href="/kb/en/alter-table/">ALTER TABLE</a> and <a href="/kb/en/create-index/">CREATE INDEX</a> statements.</p>
<p>For example, if a user wanted to add a column to a table, but only if the operation used an algorithm that is at least as efficient as the <code>INPLACE</code>, then they could execute the following:</p>
<pre class="fixed"><span class="k">CREATE</span> <span class="k">OR</span> <span class="k">REPLACE</span> <span class="k">TABLE</span> <span class="n">tab</span> <span class="p">(</span>
   <span class="n">a</span> <span class="nb">int</span> <span class="k">PRIMARY</span> <span class="k">KEY</span><span class="p">,</span>
   <span class="n">b</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span>
<span class="p">);</span>

<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">tab</span> <span class="k">ADD</span> <span class="k">COLUMN</span> <span class="k">c</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">50</span><span class="p">),</span> <span class="n">ALGORITHM</span><span class="o">=</span><span class="n">INPLACE</span><span class="p">;</span>
</pre><p>In <a href="/kb/en/what-is-mariadb-103/">MariaDB 10.3</a> and later, the above operation would actually use the <code>INSTANT</code> algorithm, because the <code>ADD COLUMN</code> operation supports the <code>INSTANT</code> algorithm, and the <code>INSTANT</code> algorithm is more efficient than the <code>INPLACE</code> algorithm.</p>
<h3 class="anchored_heading" id="specifying-an-alter-algorithm-using-system-variables">Specifying an Alter Algorithm Using System Variables</h3>
<div class="mariadb_from_10_3 mariadb from_10_3 product"><h5 class="product_title">MariaDB starting with <a href="/kb/en/what-is-mariadb-103/">10.3</a></h5><p>In <a href="/kb/en/what-is-mariadb-103/">MariaDB 10.3</a> and later, the <a href="/kb/en/server-system-variables/#alter_algorithm">alter_algorithm</a> system variable can be used to pick the <em>least efficient</em> algorithm that the user is willing to accept.</p>
<p>For example, if a user wanted to add a column to a table, but only if the operation used an algorithm that is at least as efficient as the <code>INPLACE</code>, then they could execute the following:</p>
<pre class="fixed"><span class="k">CREATE</span> <span class="k">OR</span> <span class="k">REPLACE</span> <span class="k">TABLE</span> <span class="n">tab</span> <span class="p">(</span>
   <span class="n">a</span> <span class="nb">int</span> <span class="k">PRIMARY</span> <span class="k">KEY</span><span class="p">,</span>
   <span class="n">b</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span>
<span class="p">);</span>

<span class="k">SET</span> <span class="k">SESSION</span> <span class="n">alter_algorithm</span><span class="o">=</span><span class="s1">&#39;INPLACE&#39;</span><span class="p">;</span>
<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">tab</span> <span class="k">ADD</span> <span class="k">COLUMN</span> <span class="k">c</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">50</span><span class="p">);</span>
</pre><p>In <a href="/kb/en/what-is-mariadb-103/">MariaDB 10.3</a> and later, the above operation would actually use the <code>INSTANT</code> algorithm, because the <code>ADD COLUMN</code> operation supports the <code>INSTANT</code> algorithm, and the <code>INSTANT</code> algorithm is more efficient than the <code>INPLACE</code> algorithm.</p>
</div><div class="mariadb_to_10_2 mariadb to_10_2 product"><h5 class="product_title">MariaDB until <a href="/kb/en/what-is-mariadb-102/">10.2</a></h5><p>In <a href="/kb/en/what-is-mariadb-102/">MariaDB 10.2</a> and before, the <a href="/kb/en/server-system-variables/#old_alter_table">old_alter_table</a> system variable can be used to specify whether the <code>COPY</code> algorithm should be used.</p>
<p>For example, if a user wanted to add a column to a table, but they wanted to use the <code>COPY</code> algorithm instead of the default algorithm for the operation, then they could execute the following:</p>
<pre class="fixed"><span class="k">CREATE</span> <span class="k">OR</span> <span class="k">REPLACE</span> <span class="k">TABLE</span> <span class="n">tab</span> <span class="p">(</span>
   <span class="n">a</span> <span class="nb">int</span> <span class="k">PRIMARY</span> <span class="k">KEY</span><span class="p">,</span>
   <span class="n">b</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span>
<span class="p">);</span>

<span class="k">SET</span> <span class="k">SESSION</span> <span class="n">old_alter_table</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span>
<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">tab</span> <span class="k">ADD</span> <span class="k">COLUMN</span> <span class="k">c</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">50</span><span class="p">);</span>
</pre></div><h2 class="anchored_heading" id="supported-alter-algorithms">Supported Alter Algorithms</h2>
<p>The supported algorithms are described in more details below.</p>
<h3 class="anchored_heading" id="default-algorithm">DEFAULT Algorithm</h3>
<p>The default behavior, which occurs if <code>ALGORITHM=DEFAULT</code> is specified, or if <code>ALGORITHM</code> is not specified at all, usually only makes a copy if the operation doesn't support being done in-place at all. In this case, the <em>most efficient</em> available algorithm will usually be used.</p>
<p>This means that, if an operation supports the <code>INSTANT</code> algorithm, then it will use that algorithm by default. If an operation does not support the <code>INSTANT</code> algorithm, but it does support the <code>NOCOPY</code> algorithm, then it will use that algorithm by default. If an operation does not support the <code>NOCOPY</code> algorithm, but it does support the <code>INPLACE</code> algorithm, then it will use that algorithm by default.</p>
<h3 class="anchored_heading" id="copy-algorithm">COPY Algorithm</h3>
<p>The <code>COPY</code> algorithm refers to the original <a href="/kb/en/alter-table/">ALTER TABLE</a> algorithm.</p>
<p>When the <code>COPY</code> algorithm is used, MariaDB essentially does the following operations:</p>
<pre class="fixed"><span class="c1">-- Create a temporary table with the new definition</span>
<span class="k">CREATE</span> <span class="k">TEMPORARY</span> <span class="k">TABLE</span> <span class="n">tmp_tab</span> <span class="p">(</span>
<span class="p">...</span>
<span class="p">);</span>

<span class="c1">-- Copy the data from the original table</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">tmp_tab</span>
   <span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">original_tab</span><span class="p">;</span>

<span class="c1">-- Drop the original table</span>
<span class="k">DROP</span> <span class="k">TABLE</span> <span class="n">original_tab</span><span class="p">;</span>

<span class="c1">-- Rename the temporary table, so that it replaces the original one</span>
<span class="k">RENAME</span> <span class="k">TABLE</span> <span class="n">tmp_tab</span> <span class="k">TO</span> <span class="n">original_tab</span><span class="p">;</span>
</pre><p>This algorithm is very inefficient, but it is generic, so it works for all storage engines.</p>
<p>If the <code>COPY</code> algorithm is specified with the <a href="/kb/en/alter-table/#algorithm">ALGORITHM</a> clause or with the <a href="/kb/en/server-system-variables/#alter_algorithm">alter_algorithm</a> system variable, then the <code>COPY</code> algorithm will be used even if it is not necessary. This can result in a lengthy table copy. If multiple <a href="/kb/en/alter-table/">ALTER TABLE</a> operations are required that each require the table to be rebuilt, then it is best to specify all operations in a single <a href="/kb/en/alter-table/">ALTER TABLE</a> statement, so that the table is only rebuilt once.</p>
<h4 class="anchored_heading" id="using-the-copy-algorithm-with-innodb">Using the COPY Algorithm with InnoDB</h4>
<p>If the <code>COPY</code> algorithm is used with an <a href="/kb/en/innodb/">InnoDB</a> table, then the following statements apply:</p>
<ul start="1"><li>The table will be rebuilt using the current values of the <a href="/kb/en/innodb-system-variables/#innodb_file_per_table">innodb_file_per_table</a>, <a href="/kb/en/innodb-system-variables/#innodb_file_format">innodb_file_format</a>, and <a href="/kb/en/innodb-system-variables/#innodb_default_row_format">innodb_default_row_format</a> system variables.
</li></ul>
<ul start="1"><li>The operation will have to create a temporary table to perform the the table copy. This temporary table will be in the same directory as the original table, and it's file name will be in the format <code><code>#</code>sql${PID}_${THREAD_ID}_${TMP_TABLE_COUNT}</code>, where <code>${PID}</code> is the process ID of <code>mysqld</code>, <code>${THREAD_ID}</code> is the connection ID, and <code>${TMP_TABLE_COUNT}</code> is the number of temporary tables that the connection has open. Therefore, the <a href="/kb/en/server-system-variables/#datadir">datadir</a> may contain files with file names like <code><code>#</code>sql1234_12_1.ibd</code>.
</li></ul>
<ul start="1"><li>The operation inserts one record at a time into each index, which is very inefficient.
</li></ul>
<ul start="1"><li>InnoDB does not use a sort buffer.
</li></ul>
<ul start="1"><li>In <a href="/kb/en/mariadb-10213-release-notes/">MariaDB 10.2.13</a>, <a href="/kb/en/mariadb-1035-release-notes/">MariaDB 10.3.5</a> and later, the table copy operation creates a lot fewer <a href="/kb/en/xtradbinnodb-undo-log/">InnoDB undo log</a> writes. See <a href="https://jira.mariadb.org/browse/MDEV-11415">MDEV-11415</a> for more information.
</li></ul>
<ul start="1"><li>The table copy operation creates a lot of <a href="/kb/en/innodb-redo-log/">InnoDB redo log</a> writes.
</li></ul>
<h3 class="anchored_heading" id="inplace-algorithm">INPLACE Algorithm</h3>
<p>The <code>COPY</code> algorithm can be incredibly slow, because the whole table has to be copied and rebuilt. The <code>INPLACE</code> algorithm was introduced as a way to avoid this by performing operations in-place and avoiding the table copy and rebuild, when possible.</p>
<p>When the <code>INPLACE</code> algorithm is used, the underlying storage engine uses optimizations to perform the operation while avoiding the table copy and rebuild. However, <code>INPLACE</code> is a bit of a misnomer, since some operations may still require the table to be rebuilt for some storage engines. Regardless, several operations can be performed without a full copy of the table for some storage engines.</p>
<p>A more accurate name for the algorithm would have been the <code>ENGINE</code> algorithm, since the <a href="/kb/en/storage-engines/">storage engine</a> decides how to implement the algorithm.</p>
<p>If an <a href="/kb/en/alter-table/">ALTER TABLE</a> operation supports the <code>INPLACE</code> algorithm, then it can be performed using optimizations by the underlying storage engine, but it may rebuilt.</p>
<p>If the <code>INPLACE</code> algorithm is specified with the <a href="/kb/en/alter-table/#algorithm">ALGORITHM</a> clause or with the <a href="/kb/en/server-system-variables/#alter_algorithm">alter_algorithm</a> system variable and if the <a href="/kb/en/alter-table/">ALTER TABLE</a> operation does not support the <code>INPLACE</code> algorithm, then an error will be raised. For example:</p>
<pre class="fixed wrap"><span class="k">SET</span> <span class="k">SESSION</span> <span class="n">alter_algorithm</span><span class="o">=</span><span class="s1">&#39;INPLACE&#39;</span><span class="p">;</span>

<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">tab</span> <span class="k">MODIFY</span> <span class="k">COLUMN</span> <span class="k">c</span> <span class="nb">int</span><span class="p">;</span>
<span class="n">ERROR</span> <span class="mi">1846</span> <span class="p">(</span><span class="mi">0</span><span class="n">A000</span><span class="p">):</span> <span class="n">ALGORITHM</span><span class="o">=</span><span class="n">INPLACE</span> <span class="k">is</span> <span class="k">not</span> <span class="n">supported</span><span class="p">.</span> <span class="n">Reason</span><span class="p">:</span> <span class="n">Cannot</span> <span class="n">change</span> <span class="k">column</span> <span class="k">type</span> <span class="n">INPLACE</span><span class="p">.</span> <span class="n">Try</span> <span class="n">ALGORITHM</span><span class="o">=</span><span class="k">COPY</span>
</pre><p>In this case, raising an error is preferable, if the alternative is for the operation to make a copy of the table, and perform unexpectedly slowly.</p>
<h4 class="anchored_heading" id="using-the-inplace-algorithm-with-innodb">Using the INPLACE Algorithm with InnoDB</h4>
<p>If the <code>INPLACE</code> algorithm is used with an <a href="/kb/en/innodb/">InnoDB</a> table, then the following statements apply:</p>
<ul start="1"><li>The operation might have to write sort files in the directory defined by the <a href="/kb/en/innodb-system-variables/#innodb_tmpdir">innodb_tmpdir</a> system variable.
</li></ul>
<ul start="1"><li>The operation might also have to write a temporary log file to track data changes by <a href="/kb/en/data-manipulation/">DML queries</a> executed during the operation. The maximum size for this log file is configured by the <a href="/kb/en/innodb-system-variables/#innodb_online_alter_log_max_size">innodb_online_alter_log_max_size</a> system variable.
</li></ul>
<ul start="1"><li>Some operations require the table to be rebuilt, even though the algorithm is inaccurately called "in-place". This includes operations such as adding or dropping columns, adding a primary key, changing a column to <a href="null-and-not-null">NULL</a>, etc.
</li></ul>
<ul start="1"><li>If the operation requires the table to be rebuilt, then the operation might have to create temporary tables.
<ul start="1"><li>It may have to create a temporary intermediate table for the actual table rebuild operation.
<ul start="1"><li>In <a href="/kb/en/mariadb-10219-release-notes/">MariaDB 10.2.19</a> and later, this temporary table will be in the same directory as the original table, and it's file name will be in the format <code><code>#</code>sql${PID}_${THREAD_ID}_${TMP_TABLE_COUNT}</code>, where <code>${PID}</code> is the process ID of <code>mysqld</code>, <code>${THREAD_ID}</code> is the connection ID, and <code>${TMP_TABLE_COUNT}</code> is the number of temporary tables that the connection has open. Therefore, the <a href="/kb/en/server-system-variables/#datadir">datadir</a> may contain files with file names like <code><code>#</code>sql1234_12_1.ibd</code>.
</li><li>In <a href="/kb/en/mariadb-10218-release-notes/">MariaDB 10.2.18</a> and before, this temporary table will be in the same directory as the original table, and it's file name will be in the format <code><code>#</code>sql-ib${TABLESPACE_ID}-${RAND}</code>, where <code>${TABLESPACE_ID}</code> is the table's tablespace ID within InnoDB and <code>${RAND}</code> is a randomly initialized number. Therefore, the <a href="/kb/en/server-system-variables/#datadir">datadir</a> may contain files with file names like <code><code>#</code>sql-ib230291-1363966925.ibd</code>.
</li></ul>
</li><li>When it replaces the original table with the rebuilt table, it may also have to rename the original table using a temporary table name.
<ul start="1"><li>If the server is <a href="/kb/en/what-is-mariadb-103/">MariaDB 10.3</a> or later or if it is running <a href="/kb/en/what-is-mariadb-102/">MariaDB 10.2</a> and the <a href="/kb/en/innodb-system-variables/#innodb_safe_truncate">innodb_safe_truncate</a> system variable is set to <code>OFF</code>, then the format will actually be <code><code>#</code>sql-ib${TABLESPACE_ID}-${RAND}</code>, where <code>${TABLESPACE_ID}</code> is the table's tablespace ID within InnoDB and <code>${RAND}</code> is a randomly initialized number. Therefore, the <a href="/kb/en/server-system-variables/#datadir">datadir</a> may contain files with file names like <code><code>#</code>sql-ib230291-1363966925.ibd</code>.
</li><li>If the server is running <a href="/kb/en/what-is-mariadb-101/">MariaDB 10.1</a> or before or if it is running <a href="/kb/en/what-is-mariadb-102/">MariaDB 10.2</a> and the <a href="/kb/en/innodb-system-variables/#innodb_safe_truncate">innodb_safe_truncate</a> system variable is set to <code>ON</code>, then the renamed table will have a temporary table name in the format <code><code>#</code>sql-ib${TABLESPACE_ID}</code>, where <code>${TABLESPACE_ID}</code> is the table's tablespace ID within InnoDB. Therefore, the <a href="/kb/en/server-system-variables/#datadir">datadir</a> may contain files with file names like <code><code>#</code>sql-ib230291.ibd</code>.
</li></ul>
</li></ul>
</li></ul>
<ul start="1"><li>The storage needed for the above items can add up to the size of the original table, or more in some cases.
</li></ul>
<ul start="1"><li>Some operations are instantaneous, if they only require the table's metadata to be changed. This includes operations such as renaming a column, changing a column's <a href="/kb/en/create-table/#default-column-option">DEFAULT</a> value, etc.
</li></ul>
<h4 class="anchored_heading" id="operations-supported-by-innodb-with-the-inplace-algorithm">Operations Supported by InnoDB with the <code>INPLACE</code> Algorithm</h4>
<p>With respect to the allowed operations, the <code>INPLACE</code> algorithm supports a subset of the operations supported by the <code>COPY</code> algorithm, and it supports a superset of the operations supported by the <code>NOCOPY</code> algorithm.</p>
<p>See <a href="/kb/en/innodb-online-ddl-operations-with-algorithminplace/">InnoDB Online DDL Operations with ALGORITHM=INPLACE</a> for more information.</p>
<h3 class="anchored_heading" id="nocopy-algorithm">NOCOPY Algorithm</h3>
<div class="mariadb_from_10_3 mariadb from_10_3 product"><h5 class="product_title">MariaDB starting with <a href="/kb/en/what-is-mariadb-103/">10.3</a></h5><p>In <a href="/kb/en/what-is-mariadb-103/">MariaDB 10.3</a> and later, the <code>NOCOPY</code> algorithm is supported.</p>
</div><p>The <code>INPLACE</code> algorithm can sometimes be surprisingly slow in instances where it has to rebuild the clustered index, because when the clustered index has to be rebuilt, the whole table has to be rebuilt. The <code>NOCOPY</code> algorithm was introduced as a way to avoid this. </p>
<p>If an <a href="/kb/en/alter-table/">ALTER TABLE</a> operation supports the <code>NOCOPY</code> algorithm, then it can be performed without rebuilding the clustered index.</p>
<p>If the <code>NOCOPY</code> algorithm is specified with the <a href="/kb/en/alter-table/#algorithm">ALGORITHM</a> clause or with the <a href="/kb/en/server-system-variables/#alter_algorithm">alter_algorithm</a> system variable and if the <a href="/kb/en/alter-table/">ALTER TABLE</a> operation does not support the <code>NOCOPY</code> algorithm, then an error will be raised. For example:</p>
<pre class="fixed"><span class="k">SET</span> <span class="k">SESSION</span> <span class="n">alter_algorithm</span><span class="o">=</span><span class="s1">&#39;NOCOPY&#39;</span><span class="p">;</span>

<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">tab</span> <span class="k">MODIFY</span> <span class="k">COLUMN</span> <span class="k">c</span> <span class="nb">int</span><span class="p">;</span>
<span class="n">ERROR</span> <span class="mi">1846</span> <span class="p">(</span><span class="mi">0</span><span class="n">A000</span><span class="p">):</span> <span class="n">ALGORITHM</span><span class="o">=</span><span class="n">NOCOPY</span> <span class="k">is</span> <span class="k">not</span> <span class="n">supported</span><span class="p">.</span> <span class="n">Reason</span><span class="p">:</span> <span class="n">Cannot</span> <span class="n">change</span> <span class="k">column</span> <span class="k">type</span> <span class="n">INPLACE</span><span class="p">.</span> <span class="n">Try</span> <span class="n">ALGORITHM</span><span class="o">=</span><span class="k">COPY</span>
</pre><p>In this case, raising an error is preferable, if the alternative is for the operation to rebuild the clustered index, and perform unexpectedly slowly.</p>
<h4 class="anchored_heading" id="operations-supported-by-innodb-with-the-nocopy-algorithm">Operations Supported by InnoDB with the <code>NOCOPY</code> Algorithm</h4>
<p>With respect to the allowed operations, the <code>NOCOPY</code> algorithm supports a subset of the operations supported by the <code>INPLACE</code> algorithm, and it supports a superset of the operations supported by the <code>INSTANT</code> algorithm.</p>
<p>See <a href="/kb/en/innodb-online-ddl-operations-with-algorithmnocopy/">InnoDB Online DDL Operations with ALGORITHM=NOCOPY</a> for more information.</p>
<h3 class="anchored_heading" id="instant-algorithm">INSTANT Algorithm</h3>
<div class="mariadb_from_10_3 mariadb from_10_3 product"><h5 class="product_title">MariaDB starting with <a href="/kb/en/what-is-mariadb-103/">10.3</a></h5><p>In <a href="/kb/en/what-is-mariadb-103/">MariaDB 10.3</a> and later, the <code>INSTANT</code> algorithm is supported.</p>
</div><p>The <code>INPLACE</code> algorithm can sometimes be surprisingly slow in instances where it has to modify data files. The <code>INSTANT</code> algorithm was introduced as a way to avoid this.</p>
<p>If an <a href="/kb/en/alter-table/">ALTER TABLE</a> operation supports the <code>INSTANT</code> algorithm, then it can be performed without modifying any data files.</p>
<p>If the <code>INSTANT</code> algorithm is specified with the <a href="/kb/en/alter-table/#algorithm">ALGORITHM</a> clause or with the <a href="/kb/en/server-system-variables/#alter_algorithm">alter_algorithm</a> system variable and if the <a href="/kb/en/alter-table/">ALTER TABLE</a> operation does not support the <code>INSTANT</code> algorithm, then an error will be raised. For example:</p>
<pre class="fixed wrap"><span class="k">SET</span> <span class="k">SESSION</span> <span class="n">alter_algorithm</span><span class="o">=</span><span class="s1">&#39;INSTANT&#39;</span><span class="p">;</span>

<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">tab</span> <span class="k">MODIFY</span> <span class="k">COLUMN</span> <span class="k">c</span> <span class="nb">int</span><span class="p">;</span>
<span class="n">ERROR</span> <span class="mi">1846</span> <span class="p">(</span><span class="mi">0</span><span class="n">A000</span><span class="p">):</span> <span class="n">ALGORITHM</span><span class="o">=</span><span class="n">INSTANT</span> <span class="k">is</span> <span class="k">not</span> <span class="n">supported</span><span class="p">.</span> <span class="n">Reason</span><span class="p">:</span> <span class="n">Cannot</span> <span class="n">change</span> <span class="k">column</span> <span class="k">type</span> <span class="n">INPLACE</span><span class="p">.</span> <span class="n">Try</span> <span class="n">ALGORITHM</span><span class="o">=</span><span class="k">COPY</span>
</pre><p>In this case, raising an error is preferable, if the alternative is for the operation to modify data files, and perform unexpectedly slowly.</p>
<h4 class="anchored_heading" id="operations-supported-by-innodb-with-the-instant-algorithm">Operations Supported by InnoDB with the INSTANT Algorithm</h4>
<p>With respect to the allowed operations, the <code>INSTANT</code> algorithm supports a subset of the operations supported by the <code>NOCOPY</code> algorithm.</p>
<p>See <a href="/kb/en/innodb-online-ddl-operations-with-algorithminstant/">InnoDB Online DDL Operations with ALGORITHM=INSTANT</a> for more information.</p>
<h2 class="anchored_heading" id="alter-locking-strategies">Alter Locking Strategies</h2>
<p>InnoDB supports multiple locking strategies for performing DDL operations. This offers a significant performance improvement over previous versions. The supported locking strategies are:</p>
<ul start="1"><li><code>DEFAULT</code> - This implies the default behavior for the specific operation.
</li><li><code>NONE</code>
</li><li><code>SHARED</code>
</li><li><code>EXCLUSIVE</code>
</li></ul>
<p>Regardless of which locking strategy is used to perform a DDL operation, InnoDB will have to exclusively lock the table for a short time at the start and end of the operation's execution. This means that any active transactions that may have accessed the table must be committed or aborted for the operation to continue. This applies to most DDL statements, such as <a href="/kb/en/alter-table/">ALTER TABLE</a>, <a href="/kb/en/create-index/">CREATE INDEX</a>, <a href="/kb/en/drop-index/">DROP INDEX</a>, <a href="/kb/en/optimize-table/">OPTIMIZE TABLE</a>, <a href="/kb/en/rename-table/">RENAME TABLE</a>, etc.</p>
<h2 class="anchored_heading" id="specifying-an-alter-locking-strategy">Specifying an Alter Locking Strategy</h2>
<h3 class="anchored_heading" id="specifying-an-alter-locking-strategy-using-the-lock-clause">Specifying an Alter Locking Strategy Using the <code>LOCK</code> Clause</h3>
<p>The <a href="/kb/en/alter-table/">ALTER TABLE</a> statement supports the <a href="/kb/en/alter-table/#lock">LOCK</a> clause.</p>
<p>The <a href="/kb/en/alter-table/#lock">LOCK</a> clause can be used to specify the locking strategy that the user is willing to accept. It is supported by the <a href="/kb/en/alter-table/">ALTER TABLE</a> and <a href="/kb/en/create-index/">CREATE INDEX</a> statements.</p>
<p>For example, if a user wanted to add a column to a table, but only if the operation is non-locking, then they could execute the following:</p>
<pre class="fixed"><span class="k">CREATE</span> <span class="k">OR</span> <span class="k">REPLACE</span> <span class="k">TABLE</span> <span class="n">tab</span> <span class="p">(</span>
   <span class="n">a</span> <span class="nb">int</span> <span class="k">PRIMARY</span> <span class="k">KEY</span><span class="p">,</span>
   <span class="n">b</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span>
<span class="p">);</span>

<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">tab</span> <span class="k">ADD</span> <span class="k">COLUMN</span> <span class="k">c</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">50</span><span class="p">),</span> <span class="n">ALGORITHM</span><span class="o">=</span><span class="n">INPLACE</span><span class="p">,</span> <span class="k">LOCK</span><span class="o">=</span><span class="k">NONE</span><span class="p">;</span>
</pre><p>If the <a href="/kb/en/alter-table/#lock">LOCK</a> clause is not explicitly set, then the operation uses <code>LOCK=DEFAULT</code>.</p>
<h3 class="anchored_heading" id="specifying-an-alter-locking-strategy-using-alter-online-table">Specifying an Alter Locking Strategy Using <code>ALTER ONLINE TABLE</code></h3>
<p><a href="/kb/en/alter-table/#alter-online-table">ALTER ONLINE TABLE</a> is equivalent to <code>LOCK=NONE</code>. Therefore, the <a href="alter-online-table">ALTER ONLINE TABLE</a> statement can be used to ensure that your <a href="/kb/en/alter-table/">ALTER TABLE</a> operation allows all concurrent DML.</p>
<h2 class="anchored_heading" id="supported-alter-locking-strategies">Supported Alter Locking Strategies</h2>
<p>The supported algorithms are described in more details below.</p>
<p>To see which locking strategies InnoDB supports for each operation, see the pages that describe which operations are supported for each algorithm:</p>
<ul start="1"><li><a href="/kb/en/innodb-online-ddl-operations-with-algorithminplace/">InnoDB Online DDL Operations with ALGORITHM=INPLACE</a>
</li><li><a href="/kb/en/innodb-online-ddl-operations-with-algorithmnocopy/">InnoDB Online DDL Operations with ALGORITHM=NOCOPY</a>
</li><li><a href="/kb/en/innodb-online-ddl-operations-with-algorithminstant/">InnoDB Online DDL Operations with ALGORITHM=INSTANT</a>
</li></ul>
<h3 class="anchored_heading" id="default-locking-strategy">DEFAULT Locking Strategy</h3>
<p>The default behavior, which occurs if <code>LOCK=DEFAULT</code> is specified, or if <code>LOCK</code> is not specified at all, acquire the least restrictive lock on the table that is supported for the specific operation. This permits the maximum amount of concurrency that is supported for the specific operation.</p>
<h3 class="anchored_heading" id="none-locking-strategy">NONE Locking Strategy</h3>
<p>The <code>NONE</code> locking strategy performs the operation without acquiring any lock on the table. This permits <strong>all</strong> concurrent DML.</p>
<p>If this locking strategy is not permitted for an operation, then an error is raised.</p>
<h3 class="anchored_heading" id="shared-locking-strategy">SHARED Locking Strategy</h3>
<p>The <code>SHARED</code> locking strategy performs the operation after acquiring a read lock on the table. This permit <strong>read-only</strong> concurrent DML.</p>
<p>If this locking strategy is not permitted for an operation, then an error is raised.</p>
<h3 class="anchored_heading" id="exclusive-locking-strategy">EXCLUSIVE Locking Strategy</h3>
<p>The <code>EXCLUSIVE</code> locking strategy performs the operation after acquiring a write lock on the table. This does <strong>not</strong> permit concurrent DML.</p>

    </div>


        
            <div id="subscribe" class="well well-small hide hidden-print"
                 data-subscribe-url="/kb/en/innodb-online-ddl-overview/+subscriptions/add"
                 data-unsubscribe-url="/kb/en/innodb-online-ddl-overview/+subscriptions/remove">
            </div>
        

        
        
    
        <div class="simple_section_nav">
            <ul class="nav nav-pills">
                
                
                    <li><a href="/kb/en/innodb-online-ddl/">
                        ↑ InnoDB Online DDL ↑
                    </a>
                    </li>
                
                
                    <li class="pull-right"><a href="/kb/en/innodb-online-ddl-operations-with-the-inplace-alter-algorithm/">
                        InnoDB Online DDL Operations with the INPLACE Alter Algorithm →
                    </a>
                    </li>
                
            </ul>
        </div>
    

        

        
        <h2>Comments</h2>
        
    
    <div id="comments" data-node-id="7001" data-comments-url="/kb/en/innodb-online-ddl-overview/+comments"
         data-reply-url="/kb/en/innodb-online-ddl-overview/comments/post/">
        Comments loading...
    </div>

        

    </div>


                    <div id="content_disclaimer" class="graybox">
                        Content reproduced on this site is the property of its respective owners,
                        and this content is not reviewed in advance by MariaDB. The views, information and opinions
                        expressed by this content do not necessarily represent those of MariaDB or any other party.
                    </div>
                </div>
            </section>

            
                <div id="right_bar" class="col-md-2">
                    
    
        
        <ul class="section_navigation well well-small hidden-xs hidden-sm">
            
                <li class="parent"><a href="/kb/en/innodb-online-ddl/">
                    ↑ InnoDB Online DDL ↑
                </a>
                </li>
            
            
                
                    <li class="active">
                        <span>InnoDB Online DDL Overview</span>
                        
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/innodb-online-ddl-operations-with-the-inplace-alter-algorithm/">
                            
                            InnoDB Online DDL Operations with the INPLACE Alter Algorithm
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/innodb-online-ddl-operations-with-the-nocopy-alter-algorithm/">
                            
                            InnoDB Online DDL Operations with the NOCOPY Alter Algorithm
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/innodb-online-ddl-operations-with-the-instant-alter-algorithm/">
                            
                            InnoDB Online DDL Operations with the INSTANT Alter Algorithm
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/instant-add-column-for-innodb/">
                            
                            Instant ADD COLUMN for InnoDB
                        </a>
                    </li>
                
            
        </ul>
    
    

                </div>
            
        </div>
    </div>
</div>

<!-- Footer -->
<footer id="footer">
    <div class="footer">
        <div class="container">
            <div class="row">
                <div class="col-xs-12">
                    <ul class="list-inline text-center footer-nav">
                        <li>
                            <h5>
                                <a href="https://mariadb.com/products" title="Products">Products</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/services" title="Services">Services</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/pricing" title="Pricing">Pricing</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/resources" title="Resources">Resources</a>
                            </h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/about-us" title="About MariaDB">About Us</a></h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/download" title="Download">Download MariaDB</a></h5>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="row row-10">
                
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div id="block-footerformcontact" class="block block-block-content block-block-contentd754ee1b-3cc9-40e7-9ef4-f504f1197fb1">
                        
                            <h5 style="font-weight: 400;">Subscribe to our newsletter!</h5>
                            <script src="//app-sj15.marketo.com/js/forms2/js/forms2.min.js"></script><form id="mktoForm_1498"></form>
                            <script>
                                <!--//--><![CDATA[// ><!--
                                MktoForms2.loadForm("//app-sj15.marketo.com", "573-PXI-984", 1498);
                                //--><!]]]]><![CDATA[>
                                //--><!]]>
                            </script>
                        
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div class="footer-copyright">
                        <div class="text-center">
                            <ul class="list-inline no-margin">
                                <li>
                                    <a href="/legal" title="Legal">Legal</a>
                                </li>
                                <li>
                                    <a href="/privacy-policy" title="Privacy Policy">Privacy Policy</a>
                                </li>
                                <li>
                                    <a href="/cookie-policy/" title="Cookies">Cookie Policy</a>
                                </li>
                            </ul>
                            <p>Copyright &copy; 2024 MariaDB. All rights reserved.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
</footer>
</div>

<div id="ajax_loading">
    <img src="/kb/static/images/ajax-loader.a51c5608d01a.gif" />
</div>

    <!-- Google Tag Manager -->
    <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-MK2847"
                      height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
            '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MK2847');</script>
    <!-- End Google Tag Manager -->

</body>

<script type="text/javascript" src="/kb/static/js/main.1587e3a666fc.js" charset="utf-8"></script>

</html>