<?xml version="1.0" encoding="utf-8"?>
<rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title>MariaDB Knowledge Base Comments for: MaxScale Troubleshooting</title><link>https://mariadb.com/kb/en/maxscale-troubleshooting/+comments/feed/</link><description></description><atom:link href="https://mariadb.com/kb/en/maxscale-troubleshooting/+comments/feed/" rel="self"></atom:link><language>en-us</language><lastBuildDate>Mon, 24 Feb 2025 10:55:23 +0000</lastBuildDate><item><title>Re: MaxScale Troubleshooting</title><link>https://mariadb.com/kb/en/maxscale-troubleshooting/+comments/6020</link><description>&lt;p&gt;Today I tried again.
I stopped everything and restarted both Galera clustering and MaxScale on all nodes.
The result was different.&lt;/p&gt;
&lt;p&gt;Node 1
---------
maxctrl list servers
┌─────────┬───────────┬───────┬─────────────┬───────┬──────┬─────────────────┐
│ Server  │ Address   │ Port  │ Connections │ State │ GTID │ Monitor         │
├─────────┼───────────┼───────┼─────────────┼───────┼──────┼─────────────────┤
│ server1 │ 10.0.2.14 │ 33063 │ 0           │ Down  │      │ MariaDB-Monitor │
├─────────┼───────────┼───────┼─────────────┼───────┼──────┼─────────────────┤
│ server2 │ 10.0.2.15 │ 33063 │ 0           │ Down  │      │ MariaDB-Monitor │
├─────────┼───────────┼───────┼─────────────┼───────┼──────┼─────────────────┤
│ server3 │ 10.0.2.16 │ 33063 │ 0           │ Down  │      │ MariaDB-Monitor │
└─────────┴───────────┴───────┴─────────────┴───────┴──────┴─────────────────┘&lt;/p&gt;
&lt;p&gt;Node 2
----------
maxctrl list servers
┌─────────┬───────────┬───────┬─────────────┬─────────────────────────┬──────┬─────────────────┐
│ Server  │ Address   │ Port  │ Connections │ State                   │ GTID │ Monitor         │
├─────────┼───────────┼───────┼─────────────┼─────────────────────────┼──────┼─────────────────┤
│ server1 │ 10.0.2.14 │ 33063 │ 0           │ Slave, Synced, Running  │      │ MariaDB-Monitor │
├─────────┼───────────┼───────┼─────────────┼─────────────────────────┼──────┼─────────────────┤
│ server2 │ 10.0.2.15 │ 33063 │ 0           │ Slave, Synced, Running  │      │ MariaDB-Monitor │
├─────────┼───────────┼───────┼─────────────┼─────────────────────────┼──────┼─────────────────┤
│ server3 │ 10.0.2.16 │ 33063 │ 0           │ Master, Synced, Running │      │ MariaDB-Monitor │
└─────────┴───────────┴───────┴─────────────┴─────────────────────────┴──────┴─────────────────┘&lt;/p&gt;
&lt;p&gt;Node 3
---------
maxctrl list servers
┌─────────┬───────────┬───────┬─────────────┬─────────────────────────┬──────┬─────────────────┐
│ Server  │ Address   │ Port  │ Connections │ State                   │ GTID │ Monitor         │
├─────────┼───────────┼───────┼─────────────┼─────────────────────────┼──────┼─────────────────┤
│ server1 │ 10.0.2.14 │ 33063 │ 0           │ Slave, Synced, Running  │      │ MariaDB-Monitor │
├─────────┼───────────┼───────┼─────────────┼─────────────────────────┼──────┼─────────────────┤
│ server2 │ 10.0.2.15 │ 33063 │ 0           │ Slave, Synced, Running  │      │ MariaDB-Monitor │
├─────────┼───────────┼───────┼─────────────┼─────────────────────────┼──────┼─────────────────┤
│ server3 │ 10.0.2.16 │ 33063 │ 0           │ Master, Synced, Running │      │ MariaDB-Monitor │
└─────────┴───────────┴───────┴─────────────┴─────────────────────────┴──────┴─────────────────┘&lt;/p&gt;
&lt;p&gt;This time, no more 'Auth Error, Down' message but all servers "down" when querying on node 1.&lt;/p&gt;
&lt;p&gt;What's wrong?&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Testing User A Test</dc:creator><guid>https://mariadb.com/kb/en/maxscale-troubleshooting/+comments/6020</guid></item><item><title>Re: MaxScale Troubleshooting</title><link>https://mariadb.com/kb/en/maxscale-troubleshooting/+comments/6018</link><description>&lt;p&gt;The &lt;code&gt;Failed to connect to server 'server1'&lt;/code&gt; error means the monitor was not able to connect to the server when it was checking if the user configured for it has all the required grants. Usually you'll also get other errors in the log stating what the actual problem was.&lt;/p&gt;
&lt;p&gt;I'd recommend checking the user account on &lt;code&gt;server1'&lt;/code&gt; for any problems.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Markus Mäkelä</dc:creator><guid>https://mariadb.com/kb/en/maxscale-troubleshooting/+comments/6018</guid></item><item><title>Re: MaxScale Troubleshooting</title><link>https://mariadb.com/kb/en/maxscale-troubleshooting/+comments/6017</link><description>&lt;p&gt;The '1.' text was changed from '#', which is a comment line on 'module=mariadbmon' statement.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Testing User A Test</dc:creator><guid>https://mariadb.com/kb/en/maxscale-troubleshooting/+comments/6017</guid></item><item><title>Re: MaxScale Troubleshooting</title><link>https://mariadb.com/kb/en/maxscale-troubleshooting/+comments/6016</link><description>&lt;p&gt;On all the nodes, I have the following section defined on /etc/maxscale.cnf:&lt;/p&gt;
&lt;p&gt;[MariaDB-Monitor]
type=monitor&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;module=mariadbmon
module=galeramon
servers=server1,server2,server3
user=monitor
password=testing
monitor_interval=2s
&lt;/li&gt;&lt;/ol&gt;
&lt;p&gt;I have already created the user 'monitor' on mariadb with the following statement:&lt;/p&gt;
&lt;p&gt;CREATE USER 'monitor'@'%' IDENTIFIED BY 'testing';&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Testing User A Test</dc:creator><guid>https://mariadb.com/kb/en/maxscale-troubleshooting/+comments/6016</guid></item><item><title>Re: MaxScale Troubleshooting</title><link>https://mariadb.com/kb/en/maxscale-troubleshooting/+comments/6015</link><description>&lt;p&gt;I got no problem in start MaxScale on my 3-node MariaDB Galera cluster.  But on node1 alone I got the following error message from /var/log/maxscale/maxscale.log:&lt;/p&gt;
&lt;p&gt;error  : [MariaDB-Monitor] Failed to connect to server 'server1' ([10.0.2.14]:33063) when checking monitor user credentials and permissions.&lt;/p&gt;
&lt;p&gt;On node2 and node3, I did not get that error message.  Here are the 'maxctrl' results on all the nodes:&lt;/p&gt;
&lt;p&gt;node1
--------&lt;/p&gt;
&lt;ol start="1"&gt;&lt;li&gt;maxctrl list servers
┌─────────┬───────────┬───────┬─────────────┬─────────────────────────┬──────┬─────────────────┐
│ Server  │ Address   │ Port  │ Connections │ State                   │ GTID │ Monitor         │
├─────────┼───────────┼───────┼─────────────┼─────────────────────────┼──────┼─────────────────┤
│ server1 │ 10.0.2.14 │ 33063 │ 0           │ Auth Error, Down        │      │ MariaDB-Monitor │
├─────────┼───────────┼───────┼─────────────┼─────────────────────────┼──────┼─────────────────┤
│ server2 │ 10.0.2.15 │ 33063 │ 0           │ Master, Synced, Running │      │ MariaDB-Monitor │
├─────────┼───────────┼───────┼─────────────┼─────────────────────────┼──────┼─────────────────┤
│ server3 │ 10.0.2.16 │ 33063 │ 0           │ Slave, Synced, Running  │      │ MariaDB-Monitor │
└─────────┴───────────┴───────┴─────────────┴─────────────────────────┴──────┴─────────────────┘
&lt;/li&gt;&lt;/ol&gt;
&lt;p&gt;node2
--------&lt;/p&gt;
&lt;ol start="1"&gt;&lt;li&gt;maxctrl list servers
┌─────────┬───────────┬───────┬─────────────┬─────────────────────────┬──────┬─────────────────┐
│ Server  │ Address   │ Port  │ Connections │ State                   │ GTID │ Monitor         │
├─────────┼───────────┼───────┼─────────────┼─────────────────────────┼──────┼─────────────────┤
│ server1 │ 10.0.2.14 │ 33063 │ 0           │ Slave, Synced, Running  │      │ MariaDB-Monitor │
├─────────┼───────────┼───────┼─────────────┼─────────────────────────┼──────┼─────────────────┤
│ server2 │ 10.0.2.15 │ 33063 │ 0           │ Master, Synced, Running │      │ MariaDB-Monitor │
├─────────┼───────────┼───────┼─────────────┼─────────────────────────┼──────┼─────────────────┤
│ server3 │ 10.0.2.16 │ 33063 │ 0           │ Slave, Synced, Running  │      │ MariaDB-Monitor │
└─────────┴───────────┴───────┴─────────────┴─────────────────────────┴──────┴─────────────────┘
&lt;/li&gt;&lt;/ol&gt;
&lt;p&gt;node3
--------&lt;/p&gt;
&lt;ol start="1"&gt;&lt;li&gt;maxctrl list servers
┌─────────┬───────────┬───────┬─────────────┬─────────────────────────┬──────┬─────────────────┐
│ Server  │ Address   │ Port  │ Connections │ State                   │ GTID │ Monitor         │
├─────────┼───────────┼───────┼─────────────┼─────────────────────────┼──────┼─────────────────┤
│ server1 │ 10.0.2.14 │ 33063 │ 0           │ Slave, Synced, Running  │      │ MariaDB-Monitor │
├─────────┼───────────┼───────┼─────────────┼─────────────────────────┼──────┼─────────────────┤
│ server2 │ 10.0.2.15 │ 33063 │ 0           │ Master, Synced, Running │      │ MariaDB-Monitor │
├─────────┼───────────┼───────┼─────────────┼─────────────────────────┼──────┼─────────────────┤
│ server3 │ 10.0.2.16 │ 33063 │ 0           │ Slave, Synced, Running  │      │ MariaDB-Monitor │
└─────────┴───────────┴───────┴─────────────┴─────────────────────────┴──────┴─────────────────┘
&lt;/li&gt;&lt;/ol&gt;
&lt;p&gt;node1, node2, node3
---------------------------&lt;/p&gt;
&lt;ol start="1"&gt;&lt;li&gt;maxctrl list services
┌────────────────────┬────────────────┬─────────────┬───────────────────┬───────────────────────────┐
│ Service            │ Router         │ Connections │ Total Connections │ Targets                   │
├────────────────────┼────────────────┼─────────────┼───────────────────┼───────────────────────────┤
│ Read-Write-Service │ readwritesplit │ 0           │ 0                 │ server1, server2, server3 │
└────────────────────┴────────────────┴─────────────┴───────────────────┴───────────────────────────┘
&lt;/li&gt;&lt;/ol&gt;
&lt;ol start="1"&gt;&lt;li&gt;maxctrl list listeners Read-Write-Service
┌─────────────────────┬──────┬─────────┬─────────┬────────────────────┐
│ Name                │ Port │ Host    │ State   │ Service            │
├─────────────────────┼──────┼─────────┼─────────┼────────────────────┤
│ Read-Write-Listener │ 4006 │ 0.0.0.0 │ Running │ Read-Write-Service │
└─────────────────────┴──────┴─────────┴─────────┴────────────────────┘
&lt;/li&gt;&lt;/ol&gt;
&lt;p&gt;What's wrong?&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Testing User A Test</dc:creator><guid>https://mariadb.com/kb/en/maxscale-troubleshooting/+comments/6015</guid></item></channel></rss>