<!DOCTYPE html>
<html>
<head data-cookie-domain=""
      data-cookie-path="/">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="apple-touch-icon" sizes="180x180" href="/kb/static/images/favicons/apple-touch-icon.159e713979be.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/kb/static/images/favicons/favicon-32x32.bc0ac1d5d11e.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/kb/static/images/favicons/favicon-16x16.5801f8f0f34e.png">
    <link rel="shortcut icon" href="/kb/static/images/favicons/favicon.d122d305dee4.ico" type="image/x-icon" />

    <title>MariaDB Enterprise Backup - Source - MariaDB Knowledge Base</title>

    <link href="/kb/static/css/main.f7633538c846.css" rel="stylesheet" type="text/css" />

    
        <meta name="robots" content="noindex, nofollow">
    

    

    <!-- FB Open Graph tags -->
    <meta property="og:title" content="MariaDB Enterprise Backup - Source" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://mariadb.com/kb/en/mariadb-enterprise-backup/+source/" />
    <meta property="og:image" content="http://mariadb.comaskmonty-logo.png" />
    <meta property="og:site_name" content="MariaDB KnowledgeBase" />
    <meta property="fb:admins" content="514852603" />
    <meta property="og:description" content="" />

    <meta name="description" content="" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="//fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet"/>
    
</head>
<body class="mpkb nodes autoresize nodes_source jqui" id="nodes_source">





<div id="menu-mobile" class="visible-sm visible-xs">

    <div>
        <div id="mobile-close-menu" class="text-right">
            <a href="javascript:void(0)" title="Close Menu" id="back-main" class="toggle-menu">X<span></span></a>
        </div>
    </div>
    <div class="mainmenu-mobile">
        <ul class="ls-none ul-menu">
            <li data-sub="submenu5"><a class="open-form-search" href="/kb/search/" title="Search">Search </a></li>
            <li data-sub="submenu0"><a href="/products" title="Products">Products</a><span class="arrow-main"></span></li>
            <li data-sub="submenu1"><a href="/services" title="Services">Services</a><span class="arrow-main"></span></li>
            <li data-sub="submenu2"><a href="/resources" title="Resources">Resources</a><span class="arrow-main"></span></li>
            <li data-sub="submenu3"><a href="/about-us" title="About">About</a><span class="arrow-main"></span></li>
            <li data-sub="submenu4"><a href="/contact" title="Contact">Contact</a></li>
        </ul>
    </div>

    <div class="nav-top-mobile">
        <div class="select-box form">

            <ul class="inline-block-md mb-none top-nav">
                <li>

                </li>
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/mariadb-enterprise-backup/+source/"> Login</a>
                    </li>
                
            </ul>



        </div>
        <p class="text-center copyright">Copyright &copy; 2025 MariaDB. All rights reserved.</p>
    </div>
</div>
<div class="violator-wrap d-none" id="top_violator">
    <div class="container">
        <div class="row">
            <div class="col-xs-12 col-sm-12">
                <div class="violator-outer">
                    <div class="violator-inner">
                        <div class="row">
                            <div class="col-xs-12 col-sm-9 col-lg-7 col-lg-offset-2" id="top_violator_content">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="content-link" target="_blank" rel="nofollow noreferrer">
                                    <span>The Ultimate Guide to High Availability with MariaDB</span>
                                </a>
                            </div>
                            <div class="col-xs-12 col-sm-3" id="top_violator_cta">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="btn btn-mariadb" target="_blank" rel="nofollow noreferrer">Download Now</a>
                            </div>
                        </div>
                    </div>
                    <button type="button" class="btn btn-link close-btn">
                        <svg xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 24 24" width="15px" height="15px"><path d="M 4.9902344 3.9902344 A 1.0001 1.0001 0 0 0 4.2929688 5.7070312 L 10.585938 12 L 4.2929688 18.292969 A 1.0001 1.0001 0 1 0 5.7070312 19.707031 L 12 13.414062 L 18.292969 19.707031 A 1.0001 1.0001 0 1 0 19.707031 18.292969 L 13.414062 12 L 19.707031 5.7070312 A 1.0001 1.0001 0 0 0 18.980469 3.9902344 A 1.0001 1.0001 0 0 0 18.292969 4.2929688 L 12 10.585938 L 5.7070312 4.2929688 A 1.0001 1.0001 0 0 0 4.9902344 3.9902344 z"/></svg>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="wrapper">
<div id="top-nav">
    <div class="container">
        <ul class="hidden-sm hidden-xs" >
            <li><a href="https://mariadb.com/kb/">Knowledge Base</a></li>
            <li><a href="https://mariadb.com/contact/">Contact</a></li>
            
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/mariadb-enterprise-backup/+source/" rel="nofollow">Login</a>
                    </li>
                
            
            
            <li id="search-form">
                <form action="/kb/en/+search/" method="get" id="search-block-form" accept-charset="UTF-8">
                    <input id="search" title="Enter the terms you wish to search for."
                           placeholder="Search . . ." type="text"
                           name="q" value="" size="15" maxlength="128" class="form-text"
                           data-autocomplete-url="/kb/en/+search/autocomplete/">
                    <input type="hidden" name="quick" value="1" />
                    <input type="hidden" name="source" value="kb" />
                </form>
            </li>
            <li><a id="search-toggler" href="/kb/search/">Search</a></li>
            
        </ul>
    </div>
</div>
<div id="navbar-bottom" class="navbar">
    <div class="container">
        
        
        
        
        <div class="row">
            <div class="col-md-3 col-sm-9 col-xs-9">
                <a class="brand" href="/" title="MariaDB">
                    <img src="/kb/static/images/logo-2018-black.95f5978ae14d.png">
                </a>
            </div>
            <div class="col-md-9 hidden-sm hidden-xs">
                <div class="main-menu">
                    <ul id="main-menu" class="nav navbar-nav inline-block-sm">
    <li class="has-sub full-menu">
        <a href="/products" title="Products">Products</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/solutions" title="Solutions">Solutions</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/resources" title="Resources">Resources</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/about-us" title="Company">Company</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/pricing" title="Pricing">Pricing</a>
    </li>
    
    <li class="">
        <a class="button electric-eel small top-bar-right-download" href="/downloads/">Download</a>
    </li>
</ul>
                </div>
            </div>
            <div class="col-md-3 visible-sm visible-xs col-sm-3 col-xs-3 ps-rv">
                <div class="navbar-header text-right pull-right">
                    <button type="button" class="menu-control toggle-menu" id="open-menu">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="main">
    <div class="container">
        

        <div id="subheader1" class="clearfix">
            <div class="pull-left">
                
                <div id="breadcrumbs" class="breadcrumb">
                    <a href="/kb/en/">Knowledge Base</a>
                    


    
    » <a class="crumb" href="/kb/en/documentation/">MariaDB Server Documentation</a>
    

    
    » <a class="crumb" href="/kb/en/mariadb-administration/">MariaDB Administration</a>
    

    
    » <a class="crumb" href="/kb/en/backing-up-and-restoring-databases/">Backing Up and Restoring Databases</a>
    

    
    » <a class="crumb" href="/kb/en/backup-and-restore-with-mariadb-enterprise-server/">Backup and Restore with MariaDB Enterprise Server</a>
    


    » <a class="node_link crumb" href="/kb/en/mariadb-enterprise-backup/">MariaDB Enterprise Backup</a>


                </div>
                
            </div>
        </div>
    </div>
    <div class="container" id="container-main">
        <div class="row">
            
            
                
                <aside id="sidebar-first" class="sidebar col-md-2 hidden-xs hidden-sm hidden-print">
                    
                        
                        <ul id="category_menu" class="nav nav-pills nav-stacked">
                            <li><a href="/kb/en/">Home</a></li>
                            
                                
                                    <li><a href="/kb/en/+questions/">Open Questions</a></li>
                                
                                <li><a href="/kb/en/documentation/">MariaDB Server</a></li>
                                <li><a href="/kb/en/maxscale/">MariaDB MaxScale</a></li>
                                <li><a href="/kb/en/mariadb-columnstore/">MariaDB ColumnStore</a></li>
                                <li><a href="/kb/en/connectors/">Connectors</a></li>
                            

                        </ul>
                    

                    
                        <div>
    

<div class="well well-small box actions"><div>

        <a class="btn btn-block btn-small" href="/kb/en/mariadb-enterprise-backup/">Return to article</a>
    
</div>
</div>

</div>
                    

                    

































                </aside>
            
            
            
                
            
            
            <section id="content" class="limited_width col-md-10 clearfix">
                
                    <h1>MariaDB Enterprise Backup - Source</h1>
                

                



                <div>
                    

    

    
    <div class="revision_info">
        <dl class="table">
            <dt>Revision</dt>
            <dd><a href="/kb/en/mariadb-enterprise-backup/+r/151226/">151226</a></dd>
            <dt>User</dt>
            <dd>
<span class="user" id="user-16293">
<a href="/kb/user/id/16293" title="Shwetha CM">Shwetha CM</a>
</span></dd>
            <dt>Date</dt>
            <dd>

<span class="datetime" title="2025-04-30 20:07">2025-04-30 20:07</span></dd>
        </dl>
    </div>
    


    

    
        
        <textarea id="answer_source" class="creole_source autogrow">&lt;&lt;toc&gt;&gt;

= Overview
Regular and reliable backups are essential to successful recovery of mission critical applications. [[mariadb-enterprise-server|MariaDB Enterprise Server]] backup and restore operations are performed using [[mariabackup|MariaDB Enterprise Backup]], an enterprise-build of [[mariadb-backup-enterprise-docs|MariaDB Backup]].

MariaDB Enterprise Backup is compatible with MariaDB Enterprise Server 10.2, 10.3, 10.4, 10.5, and 10.6.

* [[mariadb-enterprise-backup/#storage-engines-and-backup-types|Storage Engines and Backup Types]]
* [[mariadb-enterprise-backup/#non-blocking-backups|Non-blocking Backups]]
* [[mariadb-enterprise-backup/#understanding-recovery|Understanding Recovery]]
* [[mariadb-enterprise-backup/#creating-the-backup-user|Creating the Backup User]]
* [[mariadb-enterprise-backup/#full-backup-and-restore|Full Backup and Restore]]
* [[mariadb-enterprise-backup/#incremental-backup-and-restore|Incremental Backup and Restore]]
* [[mariadb-enterprise-backup/#partial-backup-and-restore|Partial Backup and Restore]]
* [[mariadb-enterprise-backup/#point-in-time-recoveries|Point-in-Time Recoveries]]

= Storage Engines and Backup Types
MariaDB Backup creates a file-level backup of data from the MariaDB Community Server data directory. This backup includes [[temporal-tables|temporal data]], and the encrypted and unencrypted tablespaces of supported storage engines (e.g., [[innodb|InnoDB]], [[myrocks|MyRocks]], [[aria|Aria]]).


MariaDB Enterprise Server implements:

* Full backups, which contain all data in the database.
* Incremental backups, which contain modifications since the last backup.
* Partial backups, which contain a subset of the tables in the database.

Backup support is specific to storage engines. All supported storage engines enable full backup. The InnoDB storage engine additionally supports incremental backup.

&lt;&lt;style class=&#34;bluebox&#34;&gt;&gt;
**Note:** MariaDB Enterprise Backup does not support backups of MariaDB ColumnStore. Backup of MariaDB ColumnStore can be performed using [[backup-and-restore-for-mariadb-columnstore-110-onwards|MariaDB ColumnStore Tools]]. Backup of data ingested to MariaDB ColumnStore can also occur pre-ingestion, such as in the case of HTAP where backup could occur of transactional data in MariaDB Enterprise Server, and restore of data to MariaDB ColumnStore would then occur through reprocessing.. 
&lt;&lt;/style&gt;&gt;


= Non-blocking Backups
A feature of MariaDB Enterprise Backup and MariaDB Enterprise Server, non-blocking backups minimize workload impact during backups. When MariaDB Enterprise Backup connects to MariaDB Enterprise Server, staging operations are initiated to protect data during read.

Non-blocking backup functionality differs from historical backup functionality in the following ways:
* MariaDB Enterprise Backup in MariaDB Enterprise Server includes enterprise-only optimizations to backup staging, including DDL statement tracking, which reduces lock-time during backups.
* MariaDB Backup in MariaDB Community Server 10.4 and later will block writes, log tables, and statistics.
* Older MariaDB Community Server releases used FLUSH TABLES WITH READ LOCK, which closed open tables and only allowed tables to be reopened with a read lock during the duration of backups.

= Understanding Recovery
MariaDB Enterprise Backup creates complete or incremental backups of MariaDB Enterprise Server data, and is also used to restore data from backups produced using MariaDB Enterprise Backup.

== Preparing Backups for Recovery
Full backups produced using MariaDB Enterprise Server are not initially point-in-time consistent, and an attempt to restore from a raw full backup will cause InnoDB to crash to protect the data.

Incremental backups produced using MariaDB Enterprise Backup contain only the changes since the last backup and cannot be used standalone to perform a restore.

To restore from a backup, you first need to prepare the backup for point-in-time consistency using the ##--prepare## command:
* Running the ## --prepare## command on a full backup synchronizes the tablespaces, ensuring that they are point-in-time consistent and ready for use in recovery.
* Running the ##--prepare## command on an incremental backup synchronizes the tablespaces and also applies the updated data into the previous full backup, making it a complete backup ready for use in recovery.
* Running the ##--prepare## command on data that is to be used for a partial restore (when restoring only one or more selected tables) requires that you also use the ##--export## option to create the necessary ##.cfg## files to use in recovery.

== Restore Requires Empty Data Directory
When MariaDB Enterprise Backup restores from a backup, it copies or moves the backup files into the MariaDB Enterprise Server data directory, as defined by the datadir system variable.

For MariaDB Backup to safely restore data from full and incremental backups, the data directory must be empty. One way to achieve this is to move the data directory aside to a unique directory name:

1. Make sure that the Server is stopped.

2. Move the data directory to a unique name (e.g., ##/var/lib/mysql-2020-01-01##) OR remove the old data directory (depending on how much space you have available).

3. Create a new (empty) data directory (e.g., ##mkdir /var/lib/mysql)##.

4. Run MariaDB Backup to restore the databases into that directory.

5. Change the ownership of all the restored files to the correct system user (e.g., ##chown -R mysql:mysql /var/lib/mysql##).

6. Start MariaDB Enterprise Server, which now uses the restored data directory.

7. When ready, and if you have not already done so, delete the old data directory to free disk space.

= Creating the Backup User
When MariaDB Backup performs a backup operation, it not only copies files from the data directory but also connects to the running MariaDB Enterprise Server.

This connection to MariaDB Enterprise Server is used to manage locks that prevent the Server from writing to a file while being read for a backup.

MariaDB Backup establishes this connection based on the user credentials specified with the ##--user## and ##--password## options when performing a backup.

It is recommended that a dedicated user be created and authorized to perform backups.

== 10.5 and Later
MariaDB Backup 10.5 and later requires this user to have the ##RELOAD, PROCESS, LOCK TABLES,## and ##BINLOG MONITOR## privileges. (The BINLOG MONITOR privilege replaced the REPLICATION CLIENT privilege in MariaDB Enterprise Server 10.5.):

&lt;&lt;code&gt;&gt;
CREATE USER &#39;mariabackup&#39;@&#39;localhost&#39;
IDENTIFIED BY &#39;mbu_passwd&#39;;

GRANT RELOAD, PROCESS, LOCK TABLES, BINLOG MONITOR
ON *.*
TO &#39;mariabackup&#39;@&#39;localhost&#39;;

&lt;&lt;/code&gt;&gt;
In the above example, MariaDB Backup would run on the local system that runs MariaDB Enterprise Server. Where backups may be run against a remote server, the user authentication and authorization should be adjusted.

While MariaDB Backup requires a user for backup operations, no user is required for restore operations since restores occur while MariaDB Community Server is not running.

== 10.4 and Earlier
MariaDB Backup 10.4 and earlier requires this user to have the ##RELOAD, PROCESS, LOCK TABLES,## and ##REPLICATION CLIENT## privileges. (The BINLOG MONITOR privilege replaced the ##REPLICATION CLIENT## privilege in MariaDB Enterprise Server 10.5.):

&lt;&lt;code&gt;&gt;
CREATE USER &#39;mariabackup&#39;@&#39;localhost&#39;
IDENTIFIED BY &#39;mbu_passwd&#39;;

GRANT RELOAD, PROCESS, LOCK TABLES, REPLICATION CLIENT
ON *.*
TO &#39;mariabackup&#39;@&#39;localhost&#39;;
&lt;&lt;/code&gt;&gt;

In the above example, MariaDB Backup would run on the local system that runs MariaDB Enterprise Server. Where backups may be run against a remote server, the user authentication and authorization should be adjusted.

While MariaDB Backup requires a user for backup operations, no user is required for restore operations since restores occur while MariaDB Community Server is not running.

= Full Backup and Restore
Full backups performed with MariaDB Backup contain all table data present in the database.

When performing a full backup, MariaDB Backup makes a file-level copy of the MariaDB Enterprise Server data directory. This backup omits log data such as the binary logs (binlog), error logs, general query logs, and slow query logs.

== Performing Full Backups
When you perform a full backup, MariaDB Backup writes the backup to the ##--target-dir## path. The directory must be empty or non-existent and the operating system user account must have permission to write to that directory. A database user account is required to perform the backup.

The version of ##mariabackup## or ##mariadb-backup## should be the same version as the MariaDB Enterprise Server version. When the version does not match the server version, errors can sometimes occur, or the backup can sometimes be unusable.

To create a backup, execute mariabackup or mariadb-backup with the ##--backup## option, and provide the database user account credentials using the ##--user## and ##--password## options:

&lt;&lt;code&gt;&gt;
$ sudo mariabackup --backup \
      --target-dir=/data/backups/full \
      --user=mariabackup \
      --password=mbu_passwd
&lt;&lt;/code&gt;&gt;

Subsequent to the above example, the backup is now available in the designated ##--target-dir## path.

== Preparing a Full Backup for Recovery
A raw full backup is not [[mariadb-backup-enterprise-docs/#preparing-backups-for-recovery|point-in-time consistent]] and must be prepared before it can be used for a restore. The backup can be prepared any time after the backup is created and before the backup is restored. However, MariaDB recommends preparing a backup immediately after taking the backup to ensure that the backup is consistent.

The backup should be prepared with the same version of MariaDB Backup that was used to create the backup.

To prepare the backup, execute mariabackup or mariadb-backup with the ##--prepare## option:
&lt;&lt;code&gt;&gt;

$ sudo mariabackup --prepare \
   --use-memory=34359738368 \
   --target-dir=/data/backups/full
&lt;&lt;/code&gt;&gt;

For best performance, the ##--use-memory## option should be set to the server&#39;s ##innodb_buffer_pool_size## value.

== Restoring from Full Backups
Once a full backup has been prepared to be point-in-time consistent, MariaDB Backup is used to copy backup data to the MariaDB Enterprise Server data directory.

To restore from a full backup:

1. Stop the MariaDB Enterprise Server

2. [[mariadb-backup-enterprise-docs/#restore-requires-empty-data-directory|Empty]] the data directory

3. Restore from the &#34;full&#34; directory using the ##--copy-back## option:

&lt;&lt;code&gt;&gt;
# mariabackup --copy-back --target-dir=/data/backups/full
&lt;&lt;/code&gt;&gt;

MariaDB Backup writes to the data directory as the current user, which can be changed using ##sudo##. To confirm that restored files are properly owned by the user that runs MariaDB Enterprise Server, run a command like this (adapted for the correct user/group):

&lt;&lt;code&gt;&gt;
# chown -R mysql:mysql /var/lib/mysql
&lt;&lt;/code&gt;&gt;

Once this is done, start MariaDB Enterprise Server:

&lt;&lt;code&gt;&gt;
$ sudo systemctl start mariadb
&lt;&lt;/code&gt;&gt;

When the Server starts, it works from the restored data directory.

= Incremental Backup and Restore
Full backups of large data-sets can be time-consuming and resource-intensive. MariaDB Backup supports the use of incremental backups to minimize this impact.

While full backups are resource-intensive at time of backup, the resource burden around incremental backups occurs when preparing for restore. First, the full backup is prepared for restore, then each incremental backup is applied.

== Performing Incremental Backups
When you perform an incremental backup, MariaDB Backup compares a previous full or incremental backup to what it finds on MariaDB Community Server. It then creates a new backup containing the incremental changes.

Incremental backup is supported for InnoDB tables. Tables using other storage engines receive full backups even during incremental backup operations.

To increment a full backup, use the ##--incremental-basedir## option to indicate the path to the full backup and the ## --target-dir ## option to indicate where you want to write the incremental backup:

&lt;&lt;code&gt;&gt;
# mariabackup --backup \
      --incremental-basedir=/data/backups/full \
      --target-dir=/data/backups/inc1 \
      --user=mariabackup \
      --password=mbu_passwd
&lt;&lt;/code&gt;&gt;

In this example, MariaDB Backup reads the ## /data/backups/full directory##, and MariaDB Enterprise Server then creates an incremental backup in the ##/data/backups/inc1## directory.

== Preparing an Incremental Backup
An incremental backup must be applied to a prepared full backup before it can be used in a restore operation. If you have multiple full backups to choose from, pick the nearest full backup prior to the incremental backup that you want to restore. You may also want to back up your full-backup directory, as it will be modified by the updates in the incremental data.

If your full backup directory is not yet prepared, run this to make it consistent:

&lt;&lt;code&gt;&gt;
# mariabackup --prepare --target-dir=/data/backups/full
&lt;&lt;/code&gt;&gt;

Then, using the prepared full backup, apply the first incremental backup&#39;s data to the full backup in an incremental preparation step:

&lt;&lt;code&gt;&gt;
# mariabackup --prepare \
      --target-dir=/data/backups/full \
      --incremental-dir=/data/backups/inc1
&lt;&lt;/code&gt;&gt;

Once the incremental backup has been applied to the full backup, the full backup directory contains the changes from the incremental backup (that is, the inc1/ directory). Feel free to remove inc1/ to save disk space.

== Restoring from Incremental Backups
Once you have [[mariadb-backup-enterprise-docs/#preparing-a-full-backup-for-recovery|prepared]] the full backup directory with all the incremental changes you need (as described above), stop the MariaDB Community Server,  [[mariadb-backup-enterprise-docs/#restore-requires-empty-data-directory|Empty]] its data directory, and restore from the original full backup directory using the --copy-back option:

&lt;&lt;code&gt;&gt;
# mariabackup --copy-back --target-dir=/data/backups/full
&lt;&lt;/code&gt;&gt;

MariaDB Backup writes files into the data directory using either the current user or root (in the case of a sudo operation), which may be different from the system user that runs the database. Run the following to recursively update the ownership of the restored files and directories:

&lt;&lt;code&gt;&gt;
# chown -R mysql:mysql /var/lib/mysql
&lt;&lt;/code&gt;&gt;

Then, start MariaDB Enterprise Server. When the Server starts, it works from the restored data directory.

= Partial Backup and Restore
In a partial backup, MariaDB Backup copies a specified subset of tablespaces from the MariaDB Enterprise Server data directory. Partial backups are useful in establishing a higher frequency of backups on specific data, at the expense of increased recovery complexity. In selecting tablespaces for a partial backup, please consider referential integrity.

== Performing a Partial Backup

Command-line options can be used to narrow the set of databases or tables to be included within a backup:

&lt;&lt;style class=&#34;darkheader-nospace-borders left&#34;&gt;&gt;
|= Option |= Description |
| --databases  | List of databases to include |
| --databases-exclude  | List of databases to omit from the backup |
| --databases-file | Path to file listing the databases to include|
| --tables | List of tables to include |
| --tables-exclude | List of tables to exclude |
|--tables-file | Path to file listing the tables to include|
&lt;&lt;/style&gt;&gt;
For example, you may wish to produce a partial backup, which excludes a specific database:

&lt;&lt;code&gt;&gt;
# mariabackup --backup \
      --target-dir=/data/backups/part \
      --user=mariabackup \
      --password=mbu_passwd \
      --database-exclude=test
&lt;&lt;/code&gt;&gt;

Partial backups can also be incremental:

&lt;&lt;code&gt;&gt;
# mariabackup --backup \
      --incremental-basedir=/data/backups/part \
      --target-dir=/data/backups/part_inc1 \
      --user=mariabackup \
      --password=mbu_passwd  \
      --database-exclude=test
&lt;&lt;/code&gt;&gt;

== Preparing a Backup Before a Partial Restore
As with full and incremental backups, partial backups are not point-in-time consistent. A partial backup must be prepared before it can be used for recovery.

A partial restore can be performed from a full backup or partial backup.

The preparation step for either partial or full backup restoration requires the use of transportable tablespaces for InnoDB. As such, each prepare operation requires the --export option:

&lt;&lt;code&gt;&gt;
# mariabackup --prepare --export --target-dir=/data/backups/part
&lt;&lt;/code&gt;&gt;
When using a partial incremental backup for restore, the incremental data must be applied to its prior partial backup data before its data is complete. If performing partial incremental backups, run the prepare statement again to apply the incremental changes onto the partial backup that served as the base.

&lt;&lt;code&gt;&gt;
# mariabackup --prepare --export \
      --target-dir=/data/backups/part \
      --incremental-dir=/data/backups/part_inc1
&lt;&lt;/code&gt;&gt;

== Performing a Partial Restore
Unlike full and incremental backups, you cannot restore partial backups directly using MariaDB Backup. Further, as a partial backup does not contain a complete data directory, you cannot restore MariaDB Community Server to a startable state solely with a partial backup.

To restore from a partial backup, you need to prepare a table on the MariaDB Community Server, then manually copy the files into the data directory.

The details of the restore procedure depend on the characteristics of the table:
* [[mariadb-backup-enterprise-docs/#partial-restore-non-partitioned-tables|Partial Restore Non-partitioned Tables]]
* [[mariadb-backup-enterprise-docs/#partial-restore-partitioned-tables|Partial Restore Partitioned Tables]]
* [[mariadb-backup-enterprise-docs/#partial-restore-of-tables-with-full-text-indexes|Partial Restore of Tables with Full-Text Indexes]]

As partial restores are performed while the server is running, not stopped, care should be taken to prevent production workloads during restore activity.

&lt;&lt;style class=&#34;bluebox&#34;&gt;&gt;
**Note:** You can also use data from a full backup in a partial restore operation if you have prepared the data using the --export option as described above.
&lt;&lt;/style&gt;&gt;

== Partial Restore Non-partitioned Tables
To restore a non-partitioned table from a backup, first create a new table on MariaDB Community Server to receive the restored data. It should match the specifications of the table you&#39;re restoring.

Be extra careful if the backup data is from a server with a different version than the restore server, as some differences (such as a differing ROW_FORMAT) can cause an unexpected result.

1. Create an empty table for the data being restored:

&lt;&lt;code&gt;&gt;

CREATE TABLE test.address_book (
   id INT PRIMARY KEY AUTO_INCREMENT,
   name VARCHAR(255),
   email VARCHAR(255));
&lt;&lt;/code&gt;&gt;

2. Modify the table to discard the tablespace:

&lt;&lt;code&gt;&gt;
ALTER TABLE test.address_book DISCARD TABLESPACE;
&lt;&lt;/code&gt;&gt;

3. You can copy (or move) the files for the table from the backup to the data directory:

&lt;&lt;code&gt;&gt;
# cp /data/backups/part_inc1/test/address_book.* /var/lib/mysql/test
&lt;&lt;/code&gt;&gt;

4. Use a wildcard to include both the .ibd and .cfg files. Then, change the owner to the system user running MariaDB Community Server:

&lt;&lt;code&gt;&gt;
# chown mysql:mysql /var/lib/mysql/test/address_book.*
&lt;&lt;/code&gt;&gt;

5. Lastly, import the new tablespace:

&lt;&lt;code&gt;&gt;
ALTER TABLE test.address_book IMPORT TABLESPACE;
&lt;&lt;/code&gt;&gt;

MariaDB Community Server looks in the data directory for the tablespace you copied in, then imports it for use. If the table is encrypted, it also looks for the encryption key with the relevant key ID that the table data specifies.

6. Repeat this step for every table you wish to restore.

== Partial Restore Partitioned Tables
Restoring a partitioned table from a backup requires a few extra steps compared to restoring a non-partitioned table.

To restore a partitioned table from a backup, first create a new table on MariaDB Community Server to receive the restored data. It should match the specifications of the table you&#39;re restoring, including the partition specification.

Be extra careful if the backup data is from a server with a different version than the restore server, as some differences (such as a differing ROW_FORMAT) can cause an unexpected result.

1. Create an empty table for the data being restored:

&lt;&lt;code&gt;&gt;
CREATE TABLE test.students (
   id INT PRIMARY KEY AUTO_INCREMENT
   name VARCHAR(255),
   email VARCHAR(255),
   graduating_year YEAR)
PARTITION BY RANGE (graduating_year) (
   PARTITION p9 VALUES LESS THAN 2019
   PARTITION p1 VALUES LESS THAN MAXVALUE
);
&lt;&lt;/code&gt;&gt;

2. Then create a second empty table matching the column specification, but without partitions. This will be your working table:

&lt;&lt;code&gt;&gt;
CREATE TABLE test.students_work AS
SELECT * FROM test.students WHERE NULL;
&lt;&lt;/code&gt;&gt;


3.  For each partition you want to restore, discard the working table&#39;s tablespace:

&lt;&lt;code&gt;&gt;
ALTER TABLE test.students_work DISCARD TABLESPACE;
&lt;&lt;/code&gt;&gt;


4. Then, copy the table files from the backup, using the new name:
&lt;&lt;code&gt;&gt;

# cp /data/backups/part_inc1/test/students.ibd /var/lib/mysql/test/students_work.ibd
# cp /data/backups/part_inc1/test/students.cfg /var/lib/mysql/test/students_work.cfg
&lt;&lt;/code&gt;&gt;


5. Change the owner to that of the user running MariaDB Community Server:
&lt;&lt;code&gt;&gt;

# chown mysql:mysql /var/lib/mysql/test/students_work.*
&lt;&lt;/code&gt;&gt;

6. Import the copied tablespace:

&lt;&lt;code&gt;&gt;
ALTER TABLE test.students_work IMPORT TABLESPACE;
&lt;&lt;/code&gt;&gt;


7. Lastly, exchange the partition, copying the tablespace from the working table into the partition file for the target table:
&lt;&lt;code&gt;&gt;

ALTER TABLE test.students EXCHANGE PARTITION p0 WITH TABLE test.students_work;
&lt;&lt;/code&gt;&gt;

8. Repeat the above process for each partition until you have them all exchanged into the target table. Then delete the working table, as it&#39;s no longer necessary:

&lt;&lt;code&gt;&gt;
DROP TABLE test.students_work;
&lt;&lt;/code&gt;&gt;

This restores a partitioned table.

== Partial Restore of Tables with Full-Text Indexes
When restoring a table with a full-text search (FTS) index, InnoDB may throw a schema mismatch error.

In this case, to restore the table, it is recommended to:
* Remove the corresponding .cfg file.
* Restore data to a table without any secondary indexes including FTS.
* Add the necessary secondary indexes to the restored table.

For example, to restore table t1 with FTS index from database db1:

1. In the MariaDB shell, drop the table you are going to restore:

&lt;&lt;code&gt;&gt;
DROP TABLE IF EXISTS db1.t1;
&lt;&lt;/code&gt;&gt;


2. Create an empty table for the data being restored:

&lt;&lt;code&gt;&gt;
CREATE TABLE db1.t1(f1 CHAR(10)) ENGINE=INNODB;
&lt;&lt;/code&gt;&gt;

3. Modify the table to discard the tablespace:

&lt;&lt;code&gt;&gt;
ALTER TABLE db1.t1 DISCARD TABLESPACE;
&lt;&lt;/code&gt;&gt;

4. In the operating system shell, copy the table files from the backup to the data directory of the corresponding database:

&lt;&lt;code&gt;&gt;
$ sudo cp /data/backups/part/db1/t1.* /var/lib/mysql/db1
&lt;&lt;/code&gt;&gt;

5. Remove the .cfg file from the data directory:

&lt;&lt;code&gt;&gt;
$ sudo rm /var/lib/mysql/db1/t1.cfg

&lt;&lt;/code&gt;&gt;

6. Change the owner of the newly copied files to the system user running MariaDB Community Server:

&lt;&lt;code&gt;&gt;
$ sudo chown mysql:mysql /var/lib/mysql/db1/t1.*
&lt;&lt;/code&gt;&gt;

7. In the MariaDB shell, import the copied tablespace:

&lt;&lt;code&gt;&gt;
ALTER TABLE db1.t1 IMPORT TABLESPACE;
&lt;&lt;/code&gt;&gt;

8. Verify that the data has been successfully restored:

&lt;&lt;code&gt;&gt;
SELECT * FROM db1.t1;

+--------+
| f1     |
+--------+
| ABC123 |
+--------+
&lt;&lt;/code&gt;&gt;

9. Add the necessary secondary indexes:

&lt;&lt;code&gt;&gt;
ALTER TABLE db1.t1 FORCE, ADD FULLTEXT INDEX f_idx(f1);
&lt;&lt;/code&gt;&gt;

10. The table is now fully restored:

&lt;&lt;code&gt;&gt;
SHOW CREATE TABLE db1.t1\G
&lt;&lt;/code&gt;&gt;

&lt;&lt;code&gt;&gt;
*************************** 1. row ***************************
       Table: t1
Create Table: CREATE TABLE `t1` (
  `f1` char(10) DEFAULT NULL,
  FULLTEXT KEY `f_idx` (`f1`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci
&lt;&lt;/code&gt;&gt;

= Point-in-Time Recoveries
Recovering from a backup restores the data directory at a specific point-in-time, but it does not restore the binary log. In a point-in-time recovery, you begin by restoring the data directory from a full or incremental backup, then use the mysqlbinlog utility to recover the binary log data to a specific point in time.

1. First, prepare the backup as you normally would for a [[mariadb-backup-enterprise-docs/#preparing-a-full-backup-for-recovery|full]] or [[mariadb-backup-enterprise-docs/#preparing-an-incremental-backup|incremental]] backup:

&lt;&lt;code&gt;&gt;
# mariabackup --prepare --target-dir=/data/backups/full
&lt;&lt;/code&gt;&gt;

2. When MariaDB Backup runs on a MariaDB Community Server where binary logs is enabled, it stores binary log information in the xtrabackup_binlog_info file. Consult this file to find the name of the binary log position to use. In the following example, the log position is 321.

&lt;&lt;code&gt;&gt;
# cat /data/backups/full/xtraback_binlog_info

mariadb-node4.00001     321
&lt;&lt;/code&gt;&gt;

3. Update the configuration file to use a new data directory.

&lt;&lt;code&gt;&gt;
[mysqld]
datadir=/var/lib/mysql_new
&lt;&lt;/code&gt;&gt;

4. Using MariaDB Backup, restore from the backup to the new data directory:

&lt;&lt;code&gt;&gt;
# mariabackup --copy-back --target-dir=/data/backups/full
&lt;&lt;/code&gt;&gt;

5. Then change the owner to the MariaDB Community Server system user:

&lt;&lt;code&gt;&gt;
# chown -R mysql:mysql /var/lib/mysql_new
&lt;&lt;/code&gt;&gt;

6. Start MariaDB Community Server:

&lt;&lt;code&gt;&gt;
$ sudo systemctl start mariadb
&lt;&lt;/code&gt;&gt;

7. Using the binary log file in the old data directory, the start position in the ##xtrabackup_binlog_info## file, the date and time you want to restore to, and the mysqlbinlog utility to create an SQL file with the binary log changes:

&lt;&lt;code&gt;&gt;
$ mysqlbinlog --start-position=321 \
      --stop-datetime=&#34;2019-06-28 12:00:00&#34; \
      /var/lib/mysql/mariadb-node4.00001 \
      &gt; mariadb-binlog.sql
&lt;&lt;/code&gt;&gt;

8. Lastly, run the binary log SQL to restore the databases:

&lt;&lt;code&gt;&gt;
$ mysql -u root -p &lt; mariadb-binlog.sql
&lt;&lt;/code&gt;&gt;</textarea>
    


                    <div id="content_disclaimer" class="graybox">
                        Content reproduced on this site is the property of its respective owners,
                        and this content is not reviewed in advance by MariaDB. The views, information and opinions
                        expressed by this content do not necessarily represent those of MariaDB or any other party.
                    </div>
                </div>
            </section>

            
        </div>
    </div>
</div>

<!-- Footer -->
<footer id="footer">
    <div class="footer">
        <div class="container">
            <div class="row">
                <div class="col-xs-12">
                    <ul class="list-inline text-center footer-nav">
                        <li>
                            <h5>
                                <a href="https://mariadb.com/products" title="Products">Products</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/solutions" title="Solutions">Solutions</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/resources" title="Resources">Resources</a>
                            </h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/about-us" title="About MariaDB">Company</a></h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/pricing" title="Pricing">Pricing</a>
                            </h5>
                        </li>
                        
                        
                        <li>
                            <h5><a href="https://mariadb.com/downloads" title="Download">Download MariaDB</a></h5>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="row row-10">
                
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div id="block-footerformcontact" class="block block-block-content block-block-contentd754ee1b-3cc9-40e7-9ef4-f504f1197fb1">
                        
                            <h5 style="font-weight: 400;">Subscribe to our newsletter!</h5>
                            <script src="//app-sj15.marketo.com/js/forms2/js/forms2.min.js"></script><form id="mktoForm_1498"></form>
                            <script>
                                <!--//--><![CDATA[// ><!--
                                MktoForms2.loadForm("//app-sj15.marketo.com", "573-PXI-984", 1498);
                                //--><!]]]]><![CDATA[>
                                //--><!]]>
                            </script>
                        
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div class="footer-copyright">
                        <div class="text-center">
                            <ul class="list-inline no-margin">
                                <li>
                                    <a href="/legal" title="Legal">Legal</a>
                                </li>
                                <li>
                                    <a href="/privacy-policy" title="Privacy Policy">Privacy Policy</a>
                                </li>
                                <li>
                                    <a href="/cookie-policy/" title="Cookies">Cookie Policy</a>
                                </li>
                            </ul>
                            <p>Copyright &copy; 2025 MariaDB. All rights reserved.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
</footer>
</div>

<div id="ajax_loading">
    <img src="/kb/static/images/ajax-loader.a51c5608d01a.gif" />
</div>

    <!-- Google Tag Manager -->
    <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-MK2847"
                      height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
            '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MK2847');</script>
    <!-- End Google Tag Manager -->

</body>

<script type="text/javascript" src="/kb/static/js/main.1587e3a666fc.js" charset="utf-8"></script>

</html>