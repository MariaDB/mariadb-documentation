<?xml version="1.0" encoding="utf-8"?>
<rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title>MariaDB Knowledge Base Comments for: JSON_NORMALIZE</title><link>https://mariadb.com/kb/en/json_normalize/+comments/feed/</link><description></description><atom:link href="https://mariadb.com/kb/en/json_normalize/+comments/feed/" rel="self"></atom:link><language>en-us</language><lastBuildDate>Mon, 03 Mar 2025 03:44:11 +0000</lastBuildDate><item><title>Re: JSON_NORMALIZE</title><link>https://mariadb.com/kb/en/json_normalize/+comments/5603</link><description>&lt;p&gt;Thanks for confirming, I added an issue to Jira for being able to do this without a trigger. Chime in if you'd use it &lt;a href="https://jira.mariadb.org/browse/MDEV-27651"&gt;https://jira.mariadb.org/browse/MDEV-27651&lt;/a&gt;&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Trevor Gross</dc:creator><guid>https://mariadb.com/kb/en/json_normalize/+comments/5603</guid></item><item><title>Re: JSON_NORMALIZE</title><link>https://mariadb.com/kb/en/json_normalize/+comments/5602</link><description>&lt;p&gt;The use of `VIRTUAL` in the example means that you are correct. If you use `PERSISTENT` (or equivalently, `STORED`) instead, then the `jnorm` column will actually be stored in the db, but so too will the `val` column, doubling the storage used. Currently, having `BEFORE INSERT` and `BEFORE UPDATE` triggers with `SET NEW.val = JSON_NORMALIZE(NEW.val)` is the only way to do what we want.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Jivan Pal</dc:creator><guid>https://mariadb.com/kb/en/json_normalize/+comments/5602</guid></item><item><title>Re: JSON_NORMALIZE</title><link>https://mariadb.com/kb/en/json_normalize/+comments/5601</link><description>&lt;p&gt;Thanks for adding the example - but unless I'm wrong, the data is still stored unnormalized, correct? And the normalize function is run each time there's a SELECT jnorm? That seems like quite a hit when dealing with large JSON documents (the column is LONGTEXT after all).&lt;/p&gt;
&lt;p&gt;My hope was to be able to normalize the data between INSERT and actually writing to disk, to remove whitespace and help optimize any functions that run on it.&lt;/p&gt;
&lt;p&gt;Of course, this is easily done on a front end, but if there's already a good JSON_NORMALIZE in MDB, why not let it be used for that purpose.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Trevor Gross</dc:creator><guid>https://mariadb.com/kb/en/json_normalize/+comments/5601</guid></item><item><title>Re: JSON_NORMALIZE</title><link>https://mariadb.com/kb/en/json_normalize/+comments/5597</link><description>&lt;p&gt;The additional example above demonstrates a way to do this.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Ian Gilfillan</dc:creator><guid>https://mariadb.com/kb/en/json_normalize/+comments/5597</guid></item><item><title>Re: JSON_NORMALIZE</title><link>https://mariadb.com/kb/en/json_normalize/+comments/5556</link><description>&lt;p&gt;Will there be any new syntax to have this run automatically for inserts (without triggers)? E.g. column argument `ON UPDATE JSON_NORMALIZE`? This could be an easy way to save about 20%+ on storage, and likely also have some performance benefits for read-heavy applications.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Trevor Gross</dc:creator><guid>https://mariadb.com/kb/en/json_normalize/+comments/5556</guid></item></channel></rss>