<?xml version="1.0" encoding="utf-8"?>
<rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title>MariaDB Knowledge Base Comments for: The database (mariadb) is affected by the restoration of windows</title><link>https://mariadb.com/kb/en/the-database-mariadb-is-affected-by-the-restoration-of-windows/+comments/feed/</link><description></description><atom:link href="https://mariadb.com/kb/en/the-database-mariadb-is-affected-by-the-restoration-of-windows/+comments/feed/" rel="self"></atom:link><language>en-us</language><lastBuildDate>Tue, 30 Jan 2024 01:05:02 +0000</lastBuildDate><item><title>Re: The database (mariadb) is affected by the restoration of windows</title><link>https://mariadb.com/kb/en/the-database-mariadb-is-affected-by-the-restoration-of-windows/+comments/4659</link><description>&lt;p&gt;So I tried the system restore. 
Yes, the innodb tables will go back to the past point. first there is an "Undo" in the UI, it seems like it would create a volume shadow copy before doing system restore. You can explore the content with "System Restore Explorer", and  I found the pre-system-restore .ibd files there.&lt;/p&gt;
&lt;p&gt;Second point is that the user has to regularly do backups, himself of the database, if the data is valuable, rather than not play with Windows System restore. And store them on network location, in the cloud, or somewhere outside of the box, for the case of emergency.&lt;/p&gt;
&lt;p&gt;I bet the developers for SQLServer and Postgres did exactly as much as we for system restore, namely nothing. On some arbitrary reason, this questionable tool decided to handle .IBD files specially, so the options are "complain to Microsoft" , or "tell your customers not to use it, to create database outside of system disk, to do their own emergency backups"  etc.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Vladislav Vaintroub</dc:creator><guid>https://mariadb.com/kb/en/the-database-mariadb-is-affected-by-the-restoration-of-windows/+comments/4659</guid></item><item><title>Re: The database (mariadb) is affected by the restoration of windows</title><link>https://mariadb.com/kb/en/the-database-mariadb-is-affected-by-the-restoration-of-windows/+comments/4657</link><description>&lt;p&gt;&lt;a href="https://docs.microsoft.com/pt-br/windows/win32/sr/monitored-file-extensions?redirectedfrom=MSDN"&gt;https://docs.microsoft.com/pt-br/windows/win32/sr/monitored-file-extensions?redirectedfrom=MSDN&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;it looks like the extension: IBD is monitored by the windows restore point.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">ubiratan santos</dc:creator><guid>https://mariadb.com/kb/en/the-database-mariadb-is-affected-by-the-restoration-of-windows/+comments/4657</guid></item><item><title>Re: The database (mariadb) is affected by the restoration of windows</title><link>https://mariadb.com/kb/en/the-database-mariadb-is-affected-by-the-restoration-of-windows/+comments/4656</link><description>&lt;p&gt;Vladislav Vaintroub, thanks for responding. Windows does not always allow the user to back up before a point restoration, he can simply force a point restoration, so it is not possible to perform a backup. Other databases like SQLSERVER and POSTGRE do not present the problem. Once in MariaDB or MySql the data is lost, returning the data to the date of the restore point.&lt;/p&gt;
&lt;p&gt;In this topic, a user faces the same problem:
&lt;a href="https://social.technet.microsoft.com/Forums/pt-BR/016d8e9b-9ae7-461c-822a-c47859a76c1d/restaurao-do-windows-apaga-dados-de-uma-base-mysql?forum=winvistapt"&gt;https://social.technet.microsoft.com/Forums/pt-BR/016d8e9b-9ae7-461c-822a-c47859a76c1d/restaurao-do-windows-apaga-dados-de-uma-base-mysql?forum=winvistapt&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;it seems that the solution has to do with:
innodb_file_per_table=0&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">ubiratan santos</dc:creator><guid>https://mariadb.com/kb/en/the-database-mariadb-is-affected-by-the-restoration-of-windows/+comments/4656</guid></item><item><title>Re: The database (mariadb) is affected by the restoration of windows</title><link>https://mariadb.com/kb/en/the-database-mariadb-is-affected-by-the-restoration-of-windows/+comments/4655</link><description>&lt;p&gt;Disclaimer : I'm not familiar with system restore, and never used that&lt;/p&gt;
&lt;p&gt;Sounds like someone else had this problem before &lt;a href="https://superuser.com/questions/1259835/exclude-some-files-from-windows-system-restore"&gt;https://superuser.com/questions/1259835/exclude-some-files-from-windows-system-restore&lt;/a&gt;, and his registry key fixes were *not* helpful either (HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\BackupRestore\FilesNotToBackup
HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\BackupRestore\FilesNotToSnapshot)&lt;/p&gt;
&lt;p&gt;That same person complained in &lt;a href="https://jira.mariadb.org/browse/MDEV-14099"&gt;https://jira.mariadb.org/browse/MDEV-14099&lt;/a&gt; , which I closed, before actual understanding what happened.  Yet anyway, MariaDB would not be a place to complain about that, and Innodb won't be changing .ibd extension which it had been using for 25 years.&lt;/p&gt;
&lt;p&gt;If anything, it helps to store data not on system partition, or to do data directory backup before system restore, or to disable system restore.&lt;/p&gt;
&lt;p&gt;It might help to complain to Microsoft to do something different about IBD file extension rather than remove it.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Vladislav Vaintroub</dc:creator><guid>https://mariadb.com/kb/en/the-database-mariadb-is-affected-by-the-restoration-of-windows/+comments/4655</guid></item></channel></rss>