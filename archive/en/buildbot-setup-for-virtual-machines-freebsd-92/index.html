<!DOCTYPE html>
<html>
<head data-cookie-domain=""
      data-cookie-path="/">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="apple-touch-icon" sizes="180x180" href="/kb/static/images/favicons/apple-touch-icon.159e713979be.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/kb/static/images/favicons/favicon-32x32.bc0ac1d5d11e.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/kb/static/images/favicons/favicon-16x16.5801f8f0f34e.png">
    <link rel="shortcut icon" href="/kb/static/images/favicons/favicon.d122d305dee4.ico" type="image/x-icon" />

    <title>Buildbot Setup for Virtual Machines - FreeBSD 9.2 - MariaDB Knowledge Base</title>

    <link href="/kb/static/css/main.f7633538c846.css" rel="stylesheet" type="text/css" />

    

    

    <!-- FB Open Graph tags -->
    <meta property="og:title" content="Buildbot Setup for Virtual Machines - FreeBSD 9.2" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://mariadb.com/kb/en/buildbot-setup-for-virtual-machines-freebsd-92/" />
    <meta property="og:image" content="http://mariadb.comaskmonty-logo.png" />
    <meta property="og:site_name" content="MariaDB KnowledgeBase" />
    <meta property="fb:admins" content="514852603" />
    <meta property="og:description" content="
Base install
qemu-img create -f qcow2 /kvm/vms/vm-freebsd92-amd64-serial.qcow2 15G
qemu-img create -f qcow2 /kvm/vms/vm-freebsd92-i386-serial.qcow2 15G
Start each VM booting ..." />

    <meta name="description" content="
Base install
qemu-img create -f qcow2 /kvm/vms/vm-freebsd92-amd64-serial.qcow2 15G
qemu-img create -f qcow2 /kvm/vms/vm-freebsd92-i386-serial.qcow2 15G
Start each VM booting ..." />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="//fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet"/>
    
</head>
<body class="mpkb nodes products nodes_view jqui" id="nodes_view">





<div id="menu-mobile" class="visible-sm visible-xs">

    <div>
        <div id="mobile-close-menu" class="text-right">
            <a href="javascript:void(0)" title="Close Menu" id="back-main" class="toggle-menu">X<span></span></a>
        </div>
    </div>
    <div class="mainmenu-mobile">
        <ul class="ls-none ul-menu">
            <li data-sub="submenu5"><a class="open-form-search" href="/kb/search/" title="Search">Search </a></li>
            <li data-sub="submenu0"><a href="/products" title="Products">Products</a><span class="arrow-main"></span></li>
            <li data-sub="submenu1"><a href="/services" title="Services">Services</a><span class="arrow-main"></span></li>
            <li data-sub="submenu2"><a href="/resources" title="Resources">Resources</a><span class="arrow-main"></span></li>
            <li data-sub="submenu3"><a href="/about-us" title="About">About</a><span class="arrow-main"></span></li>
            <li data-sub="submenu4"><a href="/contact" title="Contact">Contact</a></li>
        </ul>
    </div>

    <div class="nav-top-mobile">
        <div class="select-box form">

            <ul class="inline-block-md mb-none top-nav">
                <li>

                </li>
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/buildbot-setup-for-virtual-machines-freebsd-92/"> Login</a>
                    </li>
                
            </ul>



        </div>
        <p class="text-center copyright">Copyright &copy; 2024 MariaDB. All rights reserved.</p>
    </div>
</div>
<div class="violator-wrap d-none" id="top_violator">
    <div class="container">
        <div class="row">
            <div class="col-xs-12 col-sm-12">
                <div class="violator-outer">
                    <div class="violator-inner">
                        <div class="row">
                            <div class="col-xs-12 col-sm-9 col-lg-7 col-lg-offset-2" id="top_violator_content">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="content-link" target="_blank" rel="nofollow noreferrer">
                                    <span>The Ultimate Guide to High Availability with MariaDB</span>
                                </a>
                            </div>
                            <div class="col-xs-12 col-sm-3" id="top_violator_cta">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="btn btn-mariadb" target="_blank" rel="nofollow noreferrer">Download Now</a>
                            </div>
                        </div>
                    </div>
                    <button type="button" class="btn btn-link close-btn">
                        <svg xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 24 24" width="15px" height="15px"><path d="M 4.9902344 3.9902344 A 1.0001 1.0001 0 0 0 4.2929688 5.7070312 L 10.585938 12 L 4.2929688 18.292969 A 1.0001 1.0001 0 1 0 5.7070312 19.707031 L 12 13.414062 L 18.292969 19.707031 A 1.0001 1.0001 0 1 0 19.707031 18.292969 L 13.414062 12 L 19.707031 5.7070312 A 1.0001 1.0001 0 0 0 18.980469 3.9902344 A 1.0001 1.0001 0 0 0 18.292969 4.2929688 L 12 10.585938 L 5.7070312 4.2929688 A 1.0001 1.0001 0 0 0 4.9902344 3.9902344 z"/></svg>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="wrapper">
<div id="top-nav">
    <div class="container">
        <ul class="hidden-sm hidden-xs" >
            <li><a href="https://mariadb.com/kb/">Knowledge Base</a></li>
            <li><a href="https://mariadb.com/contact/">Contact</a></li>
            
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/buildbot-setup-for-virtual-machines-freebsd-92/" rel="nofollow">Login</a>
                    </li>
                
            
            
            <li id="search-form">
                <form action="/kb/en/+search/" method="get" id="search-block-form" accept-charset="UTF-8">
                    <input id="search" title="Enter the terms you wish to search for."
                           placeholder="Search . . ." type="text"
                           name="q" value="" size="15" maxlength="128" class="form-text"
                           data-autocomplete-url="/kb/en/+search/autocomplete/">
                    <input type="hidden" name="quick" value="1" />
                    <input type="hidden" name="source" value="kb" />
                </form>
            </li>
            <li><a id="search-toggler" href="/kb/search/">Search</a></li>
            
        </ul>
    </div>
</div>
<div id="navbar-bottom" class="navbar">
    <div class="container">
        
        
        
        
        <div class="row">
            <div class="col-md-3 col-sm-9 col-xs-9">
                <a class="brand" href="/" title="MariaDB">
                    <img src="/kb/static/images/logo-2018-black.95f5978ae14d.png">
                </a>
            </div>
            <div class="col-md-9 hidden-sm hidden-xs">
                <div class="main-menu">
                    <ul id="main-menu" class="nav navbar-nav inline-block-sm">
    <li class="has-sub full-menu">
        <a href="/products" title="Products">Products</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/services" title="Services">Services</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/pricing" title="Pricing">Pricing</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/resources" title="Resources">Resources</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/about-us" title="About Us">About Us</a>
    </li>
    <li class="">
        <a class="button electric-eel small top-bar-right-download" href="/downloads/">Download</a>
    </li>
</ul>
                </div>
            </div>
            <div class="col-md-3 visible-sm visible-xs col-sm-3 col-xs-3 ps-rv">
                <div class="navbar-header text-right pull-right">
                    <button type="button" class="menu-control toggle-menu" id="open-menu">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="main">
    <div class="container">
        

        <div id="subheader1" class="clearfix">
            <div class="pull-left">
                
                <div id="breadcrumbs" class="breadcrumb">
                    <a href="/kb/en/">Knowledge Base</a>
                    


    
    » <a class="crumb" href="/kb/en/training-tutorials/">Training &amp; Tutorials</a>
    

    
    » <a class="crumb" href="/kb/en/advanced-mariadb-articles/">Advanced MariaDB Articles</a>
    

    
    » <a class="crumb" href="/kb/en/development-articles/">Development Articles</a>
    

    
    » <a class="crumb" href="/kb/en/tools/">MariaDB Development Tools</a>
    

    
    » <a class="crumb" href="/kb/en/buildbot/">Buildbot</a>
    

    
    » <a class="crumb" href="/kb/en/buildbot-setup/">Buildbot Setup</a>
    

    
    » <a class="crumb" href="/kb/en/buildbot-setup-for-virtual-machines/">Buildbot Setup for Virtual Machines</a>
    


    » <a class="node_link crumb" href="/kb/en/buildbot-setup-for-virtual-machines-freebsd-92/">Buildbot Setup for Virtual Machines - FreeBSD 9.2</a>


                </div>
                
            </div>
        </div>
    </div>
    <div class="container" id="container-main">
        <div class="row">
            
            
                
                <aside id="sidebar-first" class="sidebar col-md-2 hidden-xs hidden-sm hidden-print">
                    
                        
                        <ul id="category_menu" class="nav nav-pills nav-stacked">
                            <li><a href="/kb/en/">Home</a></li>
                            
                                
                                    <li><a href="/kb/en/+questions/">Open Questions</a></li>
                                
                                <li><a href="/kb/en/documentation/">MariaDB Server</a></li>
                                <li><a href="/kb/en/maxscale/">MariaDB MaxScale</a></li>
                                <li><a href="/kb/en/mariadb-columnstore/">MariaDB ColumnStore</a></li>
                                <li><a href="/kb/en/connectors/">Connectors</a></li>
                            

                        </ul>
                    

                    
<div>



<div class="well well-small box actions"><div>

        <a class="btn btn-block btn-blue btn-sm" href="/kb/en/buildbot-setup-for-virtual-machines-freebsd-92/+history" rel="nofollow">History</a>
        
        
        
        <a class="btn btn-block btn-blue btn-sm" href="/kb/en/buildbot-setup-for-virtual-machines-freebsd-92/+source/">Source</a>
        
        <a class="btn btn-block btn-blue btn-sm flag" href="/kb/en/buildbot-setup-for-virtual-machines-freebsd-92/+flag"
                data-flag-url="/kb/en/buildbot-setup-for-virtual-machines-freebsd-92/+flag" rel="nofollow">
                Flag as Spam / Inappropriate</a>
        
        <a class="btn btn-block btn-blue btn-sm" href="/kb/en/buildbot-setup-for-virtual-machines-freebsd-92/+translate/">
                Translate</a>
        

</div>
</div>





<div class="well well-small box node_info"><div>

    <dl>
        <dt>Created</dt>
        <dd>

<span class="datetime" title="2013-06-25 21:39">11 years ago</span></dd>

        <dt>Modified</dt>
        <dd>

<span class="datetime" title="2013-10-07 14:27">10 years, 9 months ago</span></dd>

        <dt>Type</dt>
        <dd>article</dd>

        <dt>Status</dt>
        <dd>active</dd>

        <dt>License</dt>
        <dd>
            
                <a href="/kb/en/buildbot-setup-for-virtual-machines-freebsd-92/+license/">CC BY-SA / Gnu FDL</a>
            
        </dd>

        
    </dl>

    
    <ul class="rss_feeds">
        <li><a href="/kb/en/buildbot-setup-for-virtual-machines-freebsd-92/+history/feed/">
            History</a>
        </li>
        <li><a href="/kb/en/buildbot-setup-for-virtual-machines-freebsd-92/+comments/feed/">
            Comments</a>
        </li>
    </ul>
    

</div>
</div>





    
    
    

<div class="well well-small box attachments"><div><div class="edit_link pull-right"><a href="/kb/en/buildbot-setup-for-virtual-machines-freebsd-92/+edit/attachments/">Edit</a></div><h5>Attachments</h5></div><div>

        
            <div class="no_data">No attachments exist</div>
        
    
</div>
</div>

    



    
    






</div>


                    

































                </aside>
            
            
            
                
            
            
                
            
            <section id="content" class="limited_width col-md-8 clearfix">
                
                    <h1>Buildbot Setup for Virtual Machines - FreeBSD 9.2</h1>
                

                



                <div>
                    
    

    
    
    

    <div class="node creole">
        
        
        


    
    <div class="answer formatted">
        <div class="table_of_contents well well-small">
<h3>Contents</h3>
 <ol class="toc">

    <li class=""><a href="#base-install" title="Base install">Base install</a></li>

    <li class=""><a href="#vms-for-building-bsd-bintars" title="VMs for building BSD bintars">VMs for building BSD bintars</a></li>

    <li class=""><a href="#vms-for-install-testing" title="VMs for install testing.">VMs for install testing.</a></li>

    <li class=""><a href="#vms-for-mysql-upgrade-testing" title="VMs for MySQL upgrade testing">VMs for MySQL upgrade testing</a></li>

    <li class=""><a href="#vms-for-mariadb-upgrade-testing" title="VMs for MariaDB upgrade testing">VMs for MariaDB upgrade testing</a></li>

    <li class=""><a href="#add-key-to-known_hosts" title="Add Key to known_hosts">Add Key to known_hosts</a> </ol>
</li>
</div>
<h2 class="anchored_heading" id="base-install">Base install</h2>
<pre class="fixed">qemu-img create -f qcow2 /kvm/vms/vm-freebsd92-amd64-serial.qcow2 15G
qemu-img create -f qcow2 /kvm/vms/vm-freebsd92-i386-serial.qcow2 15G
</pre><p>Start each VM booting from the server install iso one at a time and perform
the following install steps:</p>
<pre class="fixed">kvm -m <span class="m">2048</span> -hda /kvm/vms/vm-freebsd92-amd64-serial.qcow2 -cdrom /kvm/iso/freebsd/9.2/FreeBSD-9.2-RELEASE-amd64-dvd1.iso -boot d -smp <span class="m">2</span> -cpu qemu64 -net nic,model<span class="o">=</span>virtio -net user,hostfwd<span class="o">=</span>tcp:127.0.0.1:2283-:22
kvm -m <span class="m">2048</span> -hda /kvm/vms/vm-freebsd92-i386-serial.qcow2 -cdrom /kvm/iso/freebsd/9.2/FreeBSD-9.2-RELEASE-i386-dvd1.iso -boot d -smp <span class="m">2</span> -cpu qemu64 -net nic,model<span class="o">=</span>virtio -net user,hostfwd<span class="o">=</span>tcp:127.0.0.1:2284-:22
</pre><p>Once running you can connect to the VNC server from your local host with:</p>
<pre class="fixed">vncviewer -via <span class="si">${</span><span class="nv">remote_host</span><span class="si">}</span> localhost
</pre><p>Replace <code class="fixed" style="white-space:pre-wrap"><span class="si">${</span><span class="nv">remote_host</span><span class="si">}</span>
</code> with the host the
vm is running on.</p>
<p><strong>Note:</strong> When you activate the install, vncviewer will disconnect after a bit
with a complaint about the rect being too large. This is fine. The installer
has just resized the vnc screen. Simply reconnect.</p>
<p>Install, picking default options mostly, with the following notes:</p>
<ul start="1"><li>Keymap Selection: Do not set non-default key mapping
</li><li>Hostname: to freebsd-92-amd64 or freebsd-92-i386
</li><li>Distribution Select: deselect "games", leave "ports" selected
</li><li>Partitioning: Guided and use the entire disk
<ul start="1"><li>Accept the default partitioning (Finish then Commit)
</li></ul>
</li><li>Archive Extraction: <em>...wait while installer installs the OS...</em>
</li><li>Network Configuration: choose <code>vtnet0</code>
<ul start="1"><li>configure ipv4 w/ DHCP
</li><li>do not configure ipv6
</li></ul>
</li><li>System Configuration: leave sshd selected, don't select the others
</li><li>Dumpdev Configuration: do not enable crash dumps
</li><li>add a buildbot user
<ul start="1"><li>add user to 'wheel' group
</li></ul>
</li><li>Final Configuration: Apply configuration and exit
</li><li>Manual Configuration: yes to opening a shell
<ul start="1"><li><code class="fixed" style="white-space:pre-wrap"><span class="nb">echo</span> <span class="s1">&#39;console=&quot;comconsole&quot;&#39;</span> &gt;&gt; /boot/loader.conf
</code>
</li><li>Edit /etc/ttys and change off to on and dialup to vt100 for the ttyu0 entry.
</li><li><code class="fixed" style="white-space:pre-wrap">shutdown -p now
</code>
</li></ul>
</li></ul>
<p>Now that the VM is installed, it's time to configure it.
If you have the memory you can do the following simultaneously:</p>
<pre class="fixed">kvm -m <span class="m">2048</span> -hda /kvm/vms/vm-freebsd92-amd64-serial.qcow2 -boot c -smp <span class="m">2</span> -cpu qemu64 -net nic,model<span class="o">=</span>virtio -net user,hostfwd<span class="o">=</span>tcp:127.0.0.1:2283-:22 -nographic
kvm -m <span class="m">2048</span> -hda /kvm/vms/vm-freebsd92-i386-serial.qcow2 -boot c -smp <span class="m">2</span> -cpu qemu64 -net nic,model<span class="o">=</span>virtio -net user,hostfwd<span class="o">=</span>tcp:127.0.0.1:2284-:22 -nographic

ssh -p <span class="m">2283</span> localhost
ssh -p <span class="m">2284</span> localhost

su -

<span class="nb">cd</span> /usr/ports/security/sudo<span class="p">;</span> make install clean <span class="c1"># accept defaults</span>
visudo <span class="c1"># uncomment the &#39;# %wheel ALL=(ALL) NOPASSWD: ALL&#39; line</span>
<span class="nb">exit</span>

<span class="nb">cd</span> /usr/ports/ports-mgmt/portmaster<span class="p">;</span> sudo make install clean <span class="c1"># select both autocomplete options</span>

ssh hasky.askmonty.org
<span class="nb">exit</span>
sudo su buildbot -
ssh hasky.askmonty.org
<span class="nb">exit</span>
<span class="nb">exit</span>
<span class="nb">exit</span>

scp -P <span class="m">2283</span> /kvm/vms/authorized_keys localhost:.ssh/
scp -P <span class="m">2283</span> /kvm/vms/authorized_keys buildbot@localhost:.ssh/

scp -P <span class="m">2284</span> /kvm/vms/authorized_keys localhost:.ssh/
scp -P <span class="m">2284</span> /kvm/vms/authorized_keys buildbot@localhost:.ssh/

ssh -p <span class="m">2283</span> localhost
ssh -p <span class="m">2284</span> localhost

sudo portsnap fetch extract
sudo portsnap fetch update
sudo portmaster -Da

sudo shutdown -p now

</pre><h2 class="anchored_heading" id="vms-for-building-bsd-bintars">VMs for building BSD bintars</h2>
<pre class="fixed"><span class="k">for</span> i in <span class="s1">&#39;/kvm/vms/vm-freebsd92-amd64-serial.qcow2 2283 qemu64&#39;</span> <span class="s1">&#39;/kvm/vms/vm-freebsd92-i386-serial.qcow2 2284 qemu64&#39;</span> <span class="p">;</span> <span class="k">do</span> <span class="se">\</span>
  <span class="nb">set</span> <span class="nv">$i</span><span class="p">;</span> <span class="se">\</span>
  runvm --user<span class="o">=</span>buildbot --logfile<span class="o">=</span>kernel_<span class="nv">$2</span>.log --base-image<span class="o">=</span><span class="nv">$1</span> --port<span class="o">=</span><span class="nv">$2</span> --cpu<span class="o">=</span><span class="nv">$3</span> <span class="s2">&quot;</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$1</span> <span class="p">|</span> sed -e <span class="s1">&#39;s/serial/build/&#39;</span><span class="k">)</span><span class="s2">&quot;</span> <span class="se">\</span>
    <span class="s2">&quot;cd /usr/ports/devel/libevent;     sudo make install clean BATCH=yes&quot;</span> <span class="se">\</span>
    <span class="s2">&quot;cd /usr/ports/devel/boost-all;    sudo make install clean BATCH=yes&quot;</span> <span class="se">\</span>
    <span class="s2">&quot;cd /usr/ports/devel/cmake;        sudo make install clean BATCH=yes&quot;</span> <span class="se">\</span>
    <span class="s2">&quot;cd /usr/ports/devel/thrift/;      sudo make install clean BATCH=yes&quot;</span> <span class="se">\</span>
    <span class="s2">&quot;cd /usr/ports/devel/bzr/;         sudo make install clean BATCH=yes&quot;</span> <span class="se">\</span>
    <span class="s2">&quot;cd /usr/ports/devel/bison/;       sudo make install clean BATCH=yes&quot;</span> <span class="se">\</span>
    <span class="s2">&quot;cd /usr/ports/databases/unixODBC; sudo make install clean BATCH=yes&quot;</span> <span class="se">\</span>
    <span class="s2">&quot;cd /usr/ports/devel/doxygen;      sudo make install clean BATCH=yes&quot;</span><span class="p">;</span> <span class="se">\</span>
<span class="k">done</span>
</pre><h2 class="anchored_heading" id="vms-for-install-testing">VMs for install testing.</h2>
<pre class="fixed">qemu-img create -b /kvm/vms/vm-freebsd92-amd64-serial.qcow2 -f qcow2 /kvm/vms/vm-freebsd92-amd64-install.qcow2
qemu-img create -b /kvm/vms/vm-freebsd92-i386-serial.qcow2 -f qcow2 /kvm/vms/vm-freebsd92-i386-install.qcow2

<span class="k">for</span> i in <span class="s1">&#39;/kvm/vms/vm-freebsd92-amd64-serial.qcow2 2283 qemu64&#39;</span> <span class="s1">&#39;/kvm/vms/vm-freebsd92-i386-serial.qcow2 2284 qemu64&#39;</span> <span class="p">;</span> <span class="k">do</span> <span class="se">\</span>
  <span class="nb">set</span> <span class="nv">$i</span><span class="p">;</span> <span class="se">\</span>
  runvm --user<span class="o">=</span>buildbot --logfile<span class="o">=</span>kernel_<span class="nv">$2</span>.log --base-image<span class="o">=</span><span class="nv">$1</span> --port<span class="o">=</span><span class="nv">$2</span> --cpu<span class="o">=</span><span class="nv">$3</span> <span class="s2">&quot;</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$1</span> <span class="p">|</span> sed -e <span class="s1">&#39;s/serial/install/&#39;</span><span class="k">)</span><span class="s2">&quot;</span> <span class="se">\</span>
    <span class="s2">&quot;sudo portsnap cron update&quot;</span><span class="p">;</span> <span class="se">\</span>
<span class="k">done</span>
</pre><h2 class="anchored_heading" id="vms-for-mysql-upgrade-testing">VMs for MySQL upgrade testing</h2>
<pre class="fixed"><span class="k">for</span> i in <span class="s1">&#39;/kvm/vms/vm-freebsd92-amd64-serial.qcow2 2283 qemu64&#39;</span> <span class="s1">&#39;/kvm/vms/vm-freebsd92-i386-serial.qcow2 2284 qemu64&#39;</span> <span class="p">;</span> <span class="k">do</span> <span class="se">\</span>
  <span class="nb">set</span> <span class="nv">$i</span><span class="p">;</span> <span class="se">\</span>
  runvm --user<span class="o">=</span>buildbot --logfile<span class="o">=</span>kernel_<span class="nv">$2</span>.log --base-image<span class="o">=</span><span class="nv">$1</span> --port<span class="o">=</span><span class="nv">$2</span> --cpu<span class="o">=</span><span class="nv">$3</span> <span class="s2">&quot;</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$1</span> <span class="p">|</span> sed -e <span class="s1">&#39;s/serial/upgrade/&#39;</span><span class="k">)</span><span class="s2">&quot;</span> <span class="se">\</span>
    <span class="s2">&quot;cd /usr/ports/databases/mysql55-server;    sudo make install clean BATCH=yes&quot;</span> <span class="se">\</span>
    <span class="s2">&quot;sudo /usr/local/etc/rc.d/mysql-server onestart&quot;</span> <span class="se">\</span>
    <span class="s1">&#39;mysql -uroot -e &quot;create database mytest; use mytest; create table t(a int primary key); insert into t values (1); select * from t&quot;&#39;</span> <span class="p">;</span><span class="se">\</span>
<span class="k">done</span>
</pre><h2 class="anchored_heading" id="vms-for-mariadb-upgrade-testing">VMs for MariaDB upgrade testing</h2>
<pre class="fixed"><span class="k">for</span> i in <span class="s1">&#39;/kvm/vms/vm-freebsd92-amd64-serial.qcow2 2283 qemu64&#39;</span> <span class="s1">&#39;/kvm/vms/vm-freebsd92-i386-serial.qcow2 2284 qemu64&#39;</span> <span class="p">;</span> <span class="k">do</span> <span class="se">\</span>
  <span class="nb">set</span> <span class="nv">$i</span><span class="p">;</span> <span class="se">\</span>
  runvm --user<span class="o">=</span>buildbot --logfile<span class="o">=</span>kernel_<span class="nv">$2</span>.log --base-image<span class="o">=</span><span class="nv">$1</span> --port<span class="o">=</span><span class="nv">$2</span> --cpu<span class="o">=</span><span class="nv">$3</span> <span class="s2">&quot;</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$1</span> <span class="p">|</span> sed -e <span class="s1">&#39;s/serial/upgrade2/&#39;</span><span class="k">)</span><span class="s2">&quot;</span> <span class="se">\</span>
    <span class="s2">&quot;cd /usr/ports/databases/mariadb55-server;    sudo make install clean BATCH=yes&quot;</span> <span class="se">\</span>
    <span class="s2">&quot;sudo /usr/local/etc/rc.d/mysql-server onestart&quot;</span> <span class="se">\</span>
    <span class="s1">&#39;mysql -uroot -e &quot;create database mytest; use mytest; create table t(a int primary key); insert into t values (1); select * from t&quot;&#39;</span><span class="p">;</span> <span class="se">\</span>
<span class="k">done</span>
</pre><h2 class="anchored_heading" id="add-key-to-known_hosts">Add Key to known_hosts</h2>
<p>Do the following on each kvm host server (terrier, terrier2, i7, etc...) to add
the VMs to known_hosts.</p>
<pre class="fixed"><span class="c1"># freebsd92-amd64</span>
cp -avi /kvm/vms/vm-freebsd92-amd64-install.qcow2 /kvm/vms/vm-freebsd92-amd64-test.qcow2
kvm -m <span class="m">1024</span> -hda /kvm/vms/vm-freebsd92-amd64-test.qcow2 -redir tcp:2283::22 -boot c -smp <span class="m">2</span> -cpu qemu64 -net nic,model<span class="o">=</span>virtio -net user -nographic
sudo su - buildbot
ssh -p <span class="m">2283</span> buildbot@localhost sudo shutdown -p now
<span class="c1"># answer &quot;yes&quot; when prompted</span>
<span class="nb">exit</span> <span class="c1"># the buildbot user</span>
rm -v /kvm/vms/vm-freebsd92-amd64-test.qcow2

<span class="c1"># freebsd92-i386</span>
cp -avi /kvm/vms/vm-freebsd92-i386-install.qcow2 /kvm/vms/vm-freebsd92-i386-test.qcow2
kvm -m <span class="m">1024</span> -hda /kvm/vms/vm-freebsd92-i386-test.qcow2 -redir tcp:2284::22 -boot c -smp <span class="m">2</span> -cpu qemu64 -net nic,model<span class="o">=</span>virtio -net user -nographic
sudo su - buildbot
ssh -p <span class="m">2284</span> buildbot@localhost sudo shutdown -p now
<span class="c1"># answer &quot;yes&quot; when prompted</span>
<span class="nb">exit</span> <span class="c1"># the buildbot user</span>
rm -v /kvm/vms/vm-freebsd92-i386-test.qcow2
</pre>
    </div>


        
            <div id="subscribe" class="well well-small hide hidden-print"
                 data-subscribe-url="/kb/en/buildbot-setup-for-virtual-machines-freebsd-92/+subscriptions/add"
                 data-unsubscribe-url="/kb/en/buildbot-setup-for-virtual-machines-freebsd-92/+subscriptions/remove">
            </div>
        

        
        
    
        <div class="simple_section_nav">
            <ul class="nav nav-pills">
                
                    <li><a href="/kb/en/buildbot-setup-for-virtual-machines-additional-steps/">
                        ← Buildbot Setup for Virtual Machines - Additional Steps
                    </a>
                    </li>
                
                
                    <li><a href="/kb/en/buildbot-setup-for-virtual-machines/">
                        ↑ Buildbot Setup for Virtual Machines ↑
                    </a>
                    </li>
                
                
            </ul>
        </div>
    

        

        
        <h2>Comments</h2>
        
    
    <div id="comments" data-node-id="3578" data-comments-url="/kb/en/buildbot-setup-for-virtual-machines-freebsd-92/+comments"
         data-reply-url="/kb/en/buildbot-setup-for-virtual-machines-freebsd-92/comments/post/">
        Comments loading...
    </div>

        

    </div>


                    <div id="content_disclaimer" class="graybox">
                        Content reproduced on this site is the property of its respective owners,
                        and this content is not reviewed in advance by MariaDB. The views, information and opinions
                        expressed by this content do not necessarily represent those of MariaDB or any other party.
                    </div>
                </div>
            </section>

            
                <div id="right_bar" class="col-md-2">
                    
    
        
        <ul class="section_navigation well well-small hidden-xs hidden-sm">
            
                <li class="parent"><a href="/kb/en/buildbot-setup-for-virtual-machines/">
                    ↑ Buildbot Setup for Virtual Machines ↑
                </a>
                </li>
            
            
                
                    <li>
                        <a href="/kb/en/buildbot-setup-for-virtual-machines-general-principles/">
                            
                            Buildbot Setup for Virtual Machines - General Principles
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/buildbot-setup-for-virtual-machines-ubuntu/">
                            
                            Buildbot Setup for Virtual Machines - Ubuntu
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/buildbot-setup-for-virtual-machines-debian/">
                            
                            Buildbot Setup for Virtual Machines - Debian
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/buildbot-setup-for-virtual-machines-red-hat/">
                            
                            Buildbot Setup for Virtual Machines - Red Hat
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/buildbot-setup-for-virtual-machines-additional-steps/">
                            
                            Buildbot Setup for Virtual Machines - Additional Steps
                        </a>
                    </li>
                
            
                
                    <li class="active">
                        <span>Buildbot Setup for Virtual Machines - FreeBSD 9.2</span>
                        
                    </li>
                
            
        </ul>
    
    

                </div>
            
        </div>
    </div>
</div>

<!-- Footer -->
<footer id="footer">
    <div class="footer">
        <div class="container">
            <div class="row">
                <div class="col-xs-12">
                    <ul class="list-inline text-center footer-nav">
                        <li>
                            <h5>
                                <a href="https://mariadb.com/products" title="Products">Products</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/services" title="Services">Services</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/pricing" title="Pricing">Pricing</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/resources" title="Resources">Resources</a>
                            </h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/about-us" title="About MariaDB">About Us</a></h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/download" title="Download">Download MariaDB</a></h5>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="row row-10">
                
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div id="block-footerformcontact" class="block block-block-content block-block-contentd754ee1b-3cc9-40e7-9ef4-f504f1197fb1">
                        
                            <h5 style="font-weight: 400;">Subscribe to our newsletter!</h5>
                            <script src="//app-sj15.marketo.com/js/forms2/js/forms2.min.js"></script><form id="mktoForm_1498"></form>
                            <script>
                                <!--//--><![CDATA[// ><!--
                                MktoForms2.loadForm("//app-sj15.marketo.com", "573-PXI-984", 1498);
                                //--><!]]]]><![CDATA[>
                                //--><!]]>
                            </script>
                        
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div class="footer-copyright">
                        <div class="text-center">
                            <ul class="list-inline no-margin">
                                <li>
                                    <a href="/legal" title="Legal">Legal</a>
                                </li>
                                <li>
                                    <a href="/privacy-policy" title="Privacy Policy">Privacy Policy</a>
                                </li>
                                <li>
                                    <a href="/cookie-policy/" title="Cookies">Cookie Policy</a>
                                </li>
                            </ul>
                            <p>Copyright &copy; 2024 MariaDB. All rights reserved.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
</footer>
</div>

<div id="ajax_loading">
    <img src="/kb/static/images/ajax-loader.a51c5608d01a.gif" />
</div>

    <!-- Google Tag Manager -->
    <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-MK2847"
                      height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
            '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MK2847');</script>
    <!-- End Google Tag Manager -->

</body>

<script type="text/javascript" src="/kb/static/js/main.1587e3a666fc.js" charset="utf-8"></script>

</html>