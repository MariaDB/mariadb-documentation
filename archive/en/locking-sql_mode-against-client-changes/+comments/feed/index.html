<?xml version="1.0" encoding="utf-8"?>
<rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title>MariaDB Knowledge Base Comments for: Locking SQL_MODE against client changes</title><link>https://mariadb.com/kb/en/locking-sql_mode-against-client-changes/+comments/feed/</link><description></description><atom:link href="https://mariadb.com/kb/en/locking-sql_mode-against-client-changes/+comments/feed/" rel="self"></atom:link><language>en-us</language><lastBuildDate>Mon, 23 Oct 2023 23:23:53 +0000</lastBuildDate><item><title>Re: Locking SQL_MODE against client changes</title><link>https://mariadb.com/kb/en/locking-sql_mode-against-client-changes/+comments/238</link><description>&lt;p&gt;Hello Monty, of course - let me be a little more descriptive.&lt;/p&gt;
&lt;p&gt;As we know MySQL sports the sql_mode variable/setting allowing a DBA to better control data formats, value ranges, and server behavior towards invalid data that is thrown at the server. (&lt;a href="http://dev.mysql.com/doc/refman/5.5/en/server-sql-mode.html"&gt;http://dev.mysql.com/doc/refman/5.5/en/server-sql-mode.html&lt;/a&gt;)&lt;/p&gt;
&lt;p&gt;There are many reasons to use sql_mode settings stronger than the default, for one when working in an environment with mixed RDBMS brands (MS SQL, PostgreSQL, Oracle). In such a case you would want MySQL to behave similarly to others, using the TRADITIONAL sql_mode setting for example. One of the reasons being app portability, or at least DBA's ease of life knowing that data will behave mostly the same on all platforms.&lt;/p&gt;
&lt;p&gt;Personally I try to employ the TRADITIONAL option all the time as it allows to catch some unwanted developer behavior - zero dates, uncaught exceptions on maxing out auto-increment keys, NULL values in not-null columns, or unexpected values in ENUM columns. All this can be allievated with a proper sql_mode setting. And this is definitely something you want on a server used by tens of inexperienced developers for their apps. You don't want for their apps to keep functioning while generating warnings which you have to sift through to find those that really matter, you want their queries to fail so they go and fix their apps.&lt;/p&gt;
&lt;p&gt;The problem is, and this is often pointed out to me when I try to push MySQL choice for a project, that while sql_mode can be set by the DBA on a server-wide basis, the Mysql manual says: "Any client can change its own session sql_mode value at any time."&lt;/p&gt;
&lt;p&gt;For people coming from PostgreSQL or SQL Server this is simply unacceptable and, I have to agree with them here, makes the whole sql_mode idea pointless. If it's there to make data more predictable to the DBA, letting users change it at their whim simply destroys that purpose. Sure, I understand some apps may actually be using the functionalities not allowed under the TRADITIONAL mode (zero dates for example) but a DBA doesn't even have a choice on which server to allow or ban said functionalities. Users might just as well set their own session variables if they finds the server-wide setting too restrictive.&lt;/p&gt;
&lt;p&gt;As I understand the official server version does not have any additional feature that would forbid clients changing the session-level SQL mode (like a "sql_mode_client_no_change" setting), nor have I heard anything of the sort for Percona Server. I was wondering if MariaDB had anything that would do the trick. For the time being I'm using MySQL proxy to just block any "set sql_mode" requests, but this solutions does not allow the developers to connect to the server (at least not easy enough) via SSL, which the Proxy does not support for the time being.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">B B</dc:creator><guid>https://mariadb.com/kb/en/locking-sql_mode-against-client-changes/+comments/238</guid></item><item><title>Re: Locking SQL_MODE against client changes</title><link>https://mariadb.com/kb/en/locking-sql_mode-against-client-changes/+comments/231</link><description>&lt;p&gt;Sorry, but don't understand exactly what you need (or why).
Can you provide an example of how this could work and why this would be needed?&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Michael Widenius</dc:creator><guid>https://mariadb.com/kb/en/locking-sql_mode-against-client-changes/+comments/231</guid></item></channel></rss>