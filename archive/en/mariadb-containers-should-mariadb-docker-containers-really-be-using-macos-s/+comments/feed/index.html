<?xml version="1.0" encoding="utf-8"?>
<rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title>MariaDB Knowledge Base Comments for: Should MariaDB Docker Containers really be using MacOS setting for lower_case_table_names when hosted in Windows?</title><link>https://mariadb.com/kb/en/mariadb-containers-should-mariadb-docker-containers-really-be-using-macos-s/+comments/feed/</link><description></description><atom:link href="https://mariadb.com/kb/en/mariadb-containers-should-mariadb-docker-containers-really-be-using-macos-s/+comments/feed/" rel="self"></atom:link><language>en-us</language><lastBuildDate>Mon, 21 Oct 2024 07:26:23 +0000</lastBuildDate><item><title>Re: Should MariaDB Docker Containers really be using MacOS setting for lower_case_table_names?</title><link>https://mariadb.com/kb/en/mariadb-containers-should-mariadb-docker-containers-really-be-using-macos-s/+comments/6692</link><description>&lt;p&gt;Correction: Works OK in Docker hosted on MacOS. So this is indeed just a Windows issue.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Julian Egelstaff</dc:creator><guid>https://mariadb.com/kb/en/mariadb-containers-should-mariadb-docker-containers-really-be-using-macos-s/+comments/6692</guid></item><item><title>Re: Should MariaDB Docker Containers really be using MacOS setting for lower_case_table_names?</title><link>https://mariadb.com/kb/en/mariadb-containers-should-mariadb-docker-containers-really-be-using-macos-s/+comments/6691</link><description>&lt;p&gt;Further context... our Docker container is mapping the /var/lib/mysql folder to a folder on the host file system. This is no doubt a core part of the issue, and why the detection is doing what it's doing.&lt;/p&gt;
&lt;p&gt;HOWEVER, when the host file system is MacOS, the lower_case_table_names setting is 2, presumably correctly, but this seems to break phpMyAdmin dumps for the same reason described above.&lt;/p&gt;
&lt;p&gt;So I think there's actually a deep issue in MariaDB related to the case sensitivity of table names when CREATE TABLE statements are run in a series of commands with other commands, or.... ?? Because I understand why I might need to override this and set 1 on Windows. But surely on a MacOS hosted Docker image, this should work correctly when set to 2?&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Julian Egelstaff</dc:creator><guid>https://mariadb.com/kb/en/mariadb-containers-should-mariadb-docker-containers-really-be-using-macos-s/+comments/6691</guid></item><item><title>Re: Should MariaDB Docker Containers really be using MacOS setting for lower_case_table_names?</title><link>https://mariadb.com/kb/en/mariadb-containers-should-mariadb-docker-containers-really-be-using-macos-s/+comments/6689</link><description>&lt;p&gt;Also, for reference for anyone coming upon this: &lt;a href="https://mariadb.com/docs/server/ref/mdb/system-variables/lower_case_table_names/"&gt;https://mariadb.com/docs/server/ref/mdb/system-variables/lower_case_table_names/&lt;/a&gt;&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Julian Egelstaff</dc:creator><guid>https://mariadb.com/kb/en/mariadb-containers-should-mariadb-docker-containers-really-be-using-macos-s/+comments/6689</guid></item><item><title>Re: Should MariaDB Docker Containers really be using MacOS setting for lower_case_table_names?</title><link>https://mariadb.com/kb/en/mariadb-containers-should-mariadb-docker-containers-really-be-using-macos-s/+comments/6688</link><description>&lt;p&gt;Yes! I think we're heading in the same direction. I posted a followup comment referring to the "lower_case_table_names=2 because file system for %s is case insensitive" issue, but that seems to have been flagged as 'needs_moderation' for some reason.&lt;/p&gt;
&lt;p&gt;OK, and perhaps the underlying issue is the lower_case_file_system detection.&lt;/p&gt;
&lt;p&gt;But... two issues, possibly unrelated...&lt;/p&gt;
&lt;p&gt;1.  The single .sql dump file from phpMyAdmin does not work as a seed for mariadb in Docker when lower_case_table_names is set to 2. But if you run manual sql statements one after the other, first the create table statement, and then the alter table statements, everything works regardless of the lower_case_table_names is set to 2. So what's going on there??&lt;/p&gt;
&lt;p&gt;2. If mariadb can tell the file system is case insensitive... can't it go the extra mile and detect that the host OS / file system is windows, and then use the preferred Windows setting of 1 instead of 2? Because setting 1 seems to make everything work smoothly and would seem to be the preferred setting in Windows.&lt;/p&gt;
&lt;p&gt;Thank you for the quick reply!&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Julian Egelstaff</dc:creator><guid>https://mariadb.com/kb/en/mariadb-containers-should-mariadb-docker-containers-really-be-using-macos-s/+comments/6688</guid></item><item><title>Re: Should MariaDB Docker Containers really be using MacOS setting for lower_case_table_names?</title><link>https://mariadb.com/kb/en/mariadb-containers-should-mariadb-docker-containers-really-be-using-macos-s/+comments/6686</link><description>&lt;p&gt;First, there's no Docker Official Image configuration for lower_case being set:&lt;/p&gt;
&lt;p&gt;Settings that are different from default are (which I hope to reduce):&lt;/p&gt;
&lt;p&gt;podman run --rm mariadb:lts my_print_defaults --mariadbd
--socket=/run/mysqld/mysqld.sock
--host-cache-size=0
--skip-name-resolve
--pid-file=/run/mysqld/mysqld.pid
--basedir=/usr
--expire_logs_days=10
--character-set-server=utf8mb4
--collation-server=utf8mb4_general_ci&lt;/p&gt;
&lt;p&gt;Before we get to lower_case_table_names, you'll notice &lt;a href="/kb/en/server-system-variables/#lower_case_file_system"&gt;lower_case_file_system&lt;/a&gt; is auto determined.&lt;/p&gt;
&lt;p&gt;As lower_case_table names is auto determined from filesystem (if the Linux default 0 is used, but not manually set) you may see a message: Setting "lower_case_table_names=2 because file system for %s is case insensitive"&lt;/p&gt;
&lt;p&gt;Because the container (OCI), is always a Linux container its defaults are Linux, even on MacOS (runs in a VM). This leads to an interesting determination path on the &lt;a href="https://github.com/MariaDB/server/blob/mariadb-10.11.5/sql/mysqld.cc#L4398"&gt;the code&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Has this helped? Running screaming? Dived down a different rabbit hole?&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Daniel Black</dc:creator><guid>https://mariadb.com/kb/en/mariadb-containers-should-mariadb-docker-containers-really-be-using-macos-s/+comments/6686</guid></item></channel></rss>