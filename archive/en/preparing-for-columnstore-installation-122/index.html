<!DOCTYPE html>
<html>
<head data-cookie-domain=""
      data-cookie-path="/">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="apple-touch-icon" sizes="180x180" href="/kb/static/images/favicons/apple-touch-icon.159e713979be.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/kb/static/images/favicons/favicon-32x32.bc0ac1d5d11e.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/kb/static/images/favicons/favicon-16x16.5801f8f0f34e.png">
    <link rel="shortcut icon" href="/kb/static/images/favicons/favicon.d122d305dee4.ico" type="image/x-icon" />

    <title>Preparing for ColumnStore Installation - 1.2.2 - MariaDB Knowledge Base</title>

    <link href="/kb/static/css/main.f7633538c846.css" rel="stylesheet" type="text/css" />

    

    

    <!-- FB Open Graph tags -->
    <meta property="og:title" content="Preparing for ColumnStore Installation - 1.2.2" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://mariadb.com/kb/en/preparing-for-columnstore-installation-122/" />
    <meta property="og:image" content="http://mariadb.comaskmonty-logo.png" />
    <meta property="og:site_name" content="MariaDB KnowledgeBase" />
    <meta property="fb:admins" content="514852603" />
    <meta property="og:description" content="Prerequisite
With version 1.2.2 of MariaDB ColumnStore, there should be no version of MariaDB Server or MySQL installed on the OS before a MariaDB ColumnStore is installed on ..." />

    <meta name="description" content="Prerequisite
With version 1.2.2 of MariaDB ColumnStore, there should be no version of MariaDB Server or MySQL installed on the OS before a MariaDB ColumnStore is installed on ..." />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="//fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet"/>
    
</head>
<body class="mpkb nodes products nodes_view jqui" id="nodes_view">





<div id="menu-mobile" class="visible-sm visible-xs">

    <div>
        <div id="mobile-close-menu" class="text-right">
            <a href="javascript:void(0)" title="Close Menu" id="back-main" class="toggle-menu">X<span></span></a>
        </div>
    </div>
    <div class="mainmenu-mobile">
        <ul class="ls-none ul-menu">
            <li data-sub="submenu5"><a class="open-form-search" href="/kb/search/" title="Search">Search </a></li>
            <li data-sub="submenu0"><a href="/products" title="Products">Products</a><span class="arrow-main"></span></li>
            <li data-sub="submenu1"><a href="/services" title="Services">Services</a><span class="arrow-main"></span></li>
            <li data-sub="submenu2"><a href="/resources" title="Resources">Resources</a><span class="arrow-main"></span></li>
            <li data-sub="submenu3"><a href="/about-us" title="About">About</a><span class="arrow-main"></span></li>
            <li data-sub="submenu4"><a href="/contact" title="Contact">Contact</a></li>
        </ul>
    </div>

    <div class="nav-top-mobile">
        <div class="select-box form">

            <ul class="inline-block-md mb-none top-nav">
                <li>

                </li>
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/preparing-for-columnstore-installation-122/"> Login</a>
                    </li>
                
            </ul>



        </div>
        <p class="text-center copyright">Copyright &copy; 2024 MariaDB. All rights reserved.</p>
    </div>
</div>
<div class="violator-wrap d-none" id="top_violator">
    <div class="container">
        <div class="row">
            <div class="col-xs-12 col-sm-12">
                <div class="violator-outer">
                    <div class="violator-inner">
                        <div class="row">
                            <div class="col-xs-12 col-sm-9 col-lg-7 col-lg-offset-2" id="top_violator_content">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="content-link" target="_blank" rel="nofollow noreferrer">
                                    <span>The Ultimate Guide to High Availability with MariaDB</span>
                                </a>
                            </div>
                            <div class="col-xs-12 col-sm-3" id="top_violator_cta">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="btn btn-mariadb" target="_blank" rel="nofollow noreferrer">Download Now</a>
                            </div>
                        </div>
                    </div>
                    <button type="button" class="btn btn-link close-btn">
                        <svg xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 24 24" width="15px" height="15px"><path d="M 4.9902344 3.9902344 A 1.0001 1.0001 0 0 0 4.2929688 5.7070312 L 10.585938 12 L 4.2929688 18.292969 A 1.0001 1.0001 0 1 0 5.7070312 19.707031 L 12 13.414062 L 18.292969 19.707031 A 1.0001 1.0001 0 1 0 19.707031 18.292969 L 13.414062 12 L 19.707031 5.7070312 A 1.0001 1.0001 0 0 0 18.980469 3.9902344 A 1.0001 1.0001 0 0 0 18.292969 4.2929688 L 12 10.585938 L 5.7070312 4.2929688 A 1.0001 1.0001 0 0 0 4.9902344 3.9902344 z"/></svg>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="wrapper">
<div id="top-nav">
    <div class="container">
        <ul class="hidden-sm hidden-xs" >
            <li><a href="https://mariadb.com/kb/">Knowledge Base</a></li>
            <li><a href="https://mariadb.com/contact/">Contact</a></li>
            
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/preparing-for-columnstore-installation-122/" rel="nofollow">Login</a>
                    </li>
                
            
            
            <li id="search-form">
                <form action="/kb/en/+search/" method="get" id="search-block-form" accept-charset="UTF-8">
                    <input id="search" title="Enter the terms you wish to search for."
                           placeholder="Search . . ." type="text"
                           name="q" value="" size="15" maxlength="128" class="form-text"
                           data-autocomplete-url="/kb/en/+search/autocomplete/">
                    <input type="hidden" name="quick" value="1" />
                    <input type="hidden" name="source" value="kb" />
                </form>
            </li>
            <li><a id="search-toggler" href="/kb/search/">Search</a></li>
            
        </ul>
    </div>
</div>
<div id="navbar-bottom" class="navbar">
    <div class="container">
        
        
        
        
        <div class="row">
            <div class="col-md-3 col-sm-9 col-xs-9">
                <a class="brand" href="/" title="MariaDB">
                    <img src="/kb/static/images/logo-2018-black.95f5978ae14d.png">
                </a>
            </div>
            <div class="col-md-9 hidden-sm hidden-xs">
                <div class="main-menu">
                    <ul id="main-menu" class="nav navbar-nav inline-block-sm">
    <li class="has-sub full-menu">
        <a href="/products" title="Products">Products</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/services" title="Services">Services</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/pricing" title="Pricing">Pricing</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/resources" title="Resources">Resources</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/about-us" title="About Us">About Us</a>
    </li>
    <li class="">
        <a class="button electric-eel small top-bar-right-download" href="/downloads/">Download</a>
    </li>
</ul>
                </div>
            </div>
            <div class="col-md-3 visible-sm visible-xs col-sm-3 col-xs-3 ps-rv">
                <div class="navbar-header text-right pull-right">
                    <button type="button" class="menu-control toggle-menu" id="open-menu">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="main">
    <div class="container">
        

        <div id="subheader1" class="clearfix">
            <div class="pull-left">
                
                <div id="breadcrumbs" class="breadcrumb">
                    <a href="/kb/en/">Knowledge Base</a>
                    


    
    » <a class="crumb" href="/kb/en/documentation/">MariaDB Server Documentation</a>
    

    
    » <a class="crumb" href="/kb/en/columns-storage-engines-and-plugins/">Columns, Storage Engines, and Plugins</a>
    

    
    » <a class="crumb" href="/kb/en/storage-engines/">Storage Engines</a>
    

    
    » <a class="crumb" href="/kb/en/mariadb-columnstore/">MariaDB ColumnStore</a>
    

    
    » <a class="crumb" href="/kb/en/columnstore-getting-started/">ColumnStore Getting Started</a>
    

    
    » <a class="crumb" href="/kb/en/preparing-and-installing-mariadb-columnstore-12x/">Preparing and Installing MariaDB ColumnStore 1.2.X</a>
    


    » <a class="node_link crumb" href="/kb/en/preparing-for-columnstore-installation-122/">Preparing for ColumnStore Installation - 1.2.2</a>


                </div>
                
            </div>
        </div>
    </div>
    <div class="container" id="container-main">
        <div class="row">
            
            
                
                <aside id="sidebar-first" class="sidebar col-md-2 hidden-xs hidden-sm hidden-print">
                    
                        
                        <ul id="category_menu" class="nav nav-pills nav-stacked">
                            <li><a href="/kb/en/">Home</a></li>
                            
                                
                                    <li><a href="/kb/en/+questions/">Open Questions</a></li>
                                
                                <li><a href="/kb/en/documentation/">MariaDB Server</a></li>
                                <li><a href="/kb/en/maxscale/">MariaDB MaxScale</a></li>
                                <li><a href="/kb/en/mariadb-columnstore/">MariaDB ColumnStore</a></li>
                                <li><a href="/kb/en/connectors/">Connectors</a></li>
                            

                        </ul>
                    

                    
<div>



<div class="well well-small box actions"><div>

        <a class="btn btn-block btn-blue btn-sm" href="/kb/en/preparing-for-columnstore-installation-122/+history" rel="nofollow">History</a>
        
        
        
        <a class="btn btn-block btn-blue btn-sm" href="/kb/en/preparing-for-columnstore-installation-122/+source/">Source</a>
        
        <a class="btn btn-block btn-blue btn-sm flag" href="/kb/en/preparing-for-columnstore-installation-122/+flag"
                data-flag-url="/kb/en/preparing-for-columnstore-installation-122/+flag" rel="nofollow">
                Flag as Spam / Inappropriate</a>
        
        <a class="btn btn-block btn-blue btn-sm" href="/kb/en/preparing-for-columnstore-installation-122/+translate/">
                Translate</a>
        

</div>
</div>





<div class="well well-small box node_info"><div>

    <dl>
        <dt>Created</dt>
        <dd>

<span class="datetime" title="2018-11-29 20:41">5 years, 9 months ago</span></dd>

        <dt>Modified</dt>
        <dd>

<span class="datetime" title="2019-07-31 14:34">5 years, 1 month ago</span></dd>

        <dt>Type</dt>
        <dd>article</dd>

        <dt>Status</dt>
        <dd>active</dd>

        <dt>License</dt>
        <dd>
            
                <a href="/kb/en/preparing-for-columnstore-installation-122/+license/">CC BY-SA / Gnu FDL</a>
            
        </dd>

        
    </dl>

    
    <ul class="rss_feeds">
        <li><a href="/kb/en/preparing-for-columnstore-installation-122/+history/feed/">
            History</a>
        </li>
        <li><a href="/kb/en/preparing-for-columnstore-installation-122/+comments/feed/">
            Comments</a>
        </li>
    </ul>
    

</div>
</div>





    
    
    

<div class="well well-small box attachments"><div><div class="edit_link pull-right"><a href="/kb/en/preparing-for-columnstore-installation-122/+edit/attachments/">Edit</a></div><h5>Attachments</h5></div><div>

        
            <div class="no_data">No attachments exist</div>
        
    
</div>
</div>

    



    
    






</div>


                    

































                </aside>
            
            
            
                
            
            
                
            
            <section id="content" class="limited_width col-md-8 clearfix">
                
                    <h1>Preparing for ColumnStore Installation - 1.2.2</h1>
                

                



                <div>
                    
    

    
    
    

    <div class="node creole">
        
        
        


    
    <div class="answer formatted">
        <h3 class="anchored_heading" id="prerequisite">Prerequisite</h3>
<div class="cstm-style redbox"><p>With version 1.2.2 of MariaDB ColumnStore, there should be no version of MariaDB Server or MySQL installed on the OS before a MariaDB ColumnStore is installed on the system. If you have an installation of MariaDB Server or MySQL, uninstall it before proceeding.</p>
</div><div class="table_of_contents standalone">    <ol class="toc">

        <li class=""><a href="#prerequisite" title="Prerequisite">Prerequisite</a>        <ol class="toc">

            <li class=""><a href="#configuration-preparation" title="Configuration preparation">Configuration preparation</a></li>

            <li class=""><a href="#os-information" title="OS information">OS information</a></li>

            <li class=""><a href="#system-administration-information" title="System administration information">System administration information</a></li>

            <li class=""><a href="#network-configuration" title="Network configuration">Network configuration</a></li>

            <li class=""><a href="#mariadb-columnstore-port-usage" title="MariaDB ColumnStore port usage">MariaDB ColumnStore port usage</a></li>

            <li class=""><a href="#installation-and-data-directory-paths" title="Installation and Data Directory Paths">Installation and Data Directory Paths</a></li>

            <li class=""><a href="#storage-and-database-files-dbroots" title="Storage and Database files (DBRoots)">Storage and Database files (DBRoots)</a></li>

            <li class=""><a href="#local-database-files" title="Local database files">Local database files</a></li>

            <li class=""><a href="#san-mounted-database-files" title="SAN mounted database files">SAN mounted database files</a></li>

            <li class=""><a href="#performance-optimization-considerations" title="Performance optimization considerations">Performance optimization considerations</a></li>

            <li class=""><a href="#gbe-nic-settings" title="GbE NIC settings:">GbE NIC settings:</a></li>

            <li class=""><a href="#system-settings-considerations" title="System settings considerations">System settings considerations</a></li>

            <li class=""><a href="#firewall-considerations" title="Firewall considerations">Firewall considerations</a></li>

            <li class=""><a href="#user-considerations" title="User considerations">User considerations</a></li>

            <li class=""><a href="#root-user-installation-and-execution" title="Root User installation and execution">Root User installation and execution</a></li>

            <li class=""><a href="#unprivileged-user-installation-and-execution" title="Unprivileged user installation and execution">Unprivileged user installation and execution</a></li>

            <li class=""><a href="#root-user-installation-and-unprivileged-user-execution" title="Root user installation and unprivileged user execution">Root user installation and unprivileged user execution</a>        </ol>
</li>

        <li class=""><a href="#package-dependencies" title="Package dependencies">Package dependencies</a>        <ol class="toc">

            <li class=""><a href="#boost-libraries" title="Boost libraries">Boost libraries</a></li>

            <li class=""><a href="#other-packages" title="Other packages">Other packages</a></li>

            <li class=""><a href="#data-redundancy-packages" title="Data Redundancy packages">Data Redundancy packages</a></li>

            <li class=""><a href="#system-logging-package" title="System Logging Package">System Logging Package</a>        </ol>
</li>

        <li class=""><a href="#download-location" title="Download location">Download location</a></li>

        <li class=""><a href="#choosing-the-type-of-initial-downloadinstall" title="Choosing the type of initial download/install">Choosing the type of initial download/install</a>        <ol class="toc">

            <li class=""><a href="#non-distributed-installation" title="Non-Distributed Installation">Non-Distributed Installation</a></li>

            <li class=""><a href="#distributed-install" title="Distributed Install">Distributed Install</a>        </ol>
</li>

        <li class=""><a href="#root-user-installations" title="Root user installations">Root user installations</a>        <ol class="toc">

            <li class=""><a href="#initial-downloadinstall-of-mariadb-columnstore-packages" title="Initial download/install of MariaDB ColumnStore Packages">Initial download/install of MariaDB ColumnStore Packages</a></li>

            <li class=""><a href="#initial-downloadinstall-of-mariadb-columnstore-package-with-the-ax-package" title="Initial download/install of MariaDB ColumnStore Package with the AX package">Initial download/install of MariaDB ColumnStore Package with the AX package</a></li>

            <li class=""><a href="#initial-download-installation-of-mariadb-columnstore-rpms" title="Initial download &amp; installation of MariaDB ColumnStore RPMs">Initial download &amp; installation of MariaDB ColumnStore RPMs</a></li>

            <li class=""><a href="#initial-download-installation-of-mariadb-columnstore-binary-package" title="Initial download &amp; installation of MariaDB ColumnStore binary package">Initial download &amp; installation of MariaDB ColumnStore binary package</a></li>

            <li class=""><a href="#initial-download-installation-of-mariadb-columnstore-deb-package" title="Initial download &amp; installation of MariaDB ColumnStore DEB package">Initial download &amp; installation of MariaDB ColumnStore DEB package</a>        </ol>
</li>

        <li class=""><a href="#unprivileged-user-installation" title="Unprivileged user installation">Unprivileged user installation</a>        <ol class="toc">

            <li class=""><a href="#creation-of-a-new-user-by-root-user" title="Creation of a new user (by root user)">Creation of a new user (by root user)</a></li>

            <li class=""><a href="#update-sudo-configuration-if-needed-by-root-user" title="Update sudo configuration, if needed  (by root user)">Update sudo configuration, if needed  (by root user)</a></li>

            <li class=""><a href="#sudo-configuration-for-data-redundancy" title="sudo configuration for Data Redundancy">sudo configuration for Data Redundancy</a></li>

            <li class=""><a href="#sudo-configuration-for-external-storage" title="sudo configuration for External Storage">sudo configuration for External Storage</a></li>

            <li class=""><a href="#sudo-configuration-for-amazon-ec2-using-ebs-storage" title="sudo configuration for Amazon EC2 using EBS storage">sudo configuration for Amazon EC2 using EBS storage</a></li>

            <li class=""><a href="#set-the-user-file-limits-by-root-user" title="Set the user file limits (by root user)">Set the user file limits (by root user)</a></li>

            <li class=""><a href="#modify-fstab-if-using-the-external-storage-option-by-root-user" title="Modify fstab if using the external storage option (by root user)">Modify fstab if using the external storage option (by root user)</a></li>

            <li class=""><a href="#update-permissions-on-directories-that-mariadb-columnstore-writes-to-by-root-user" title="Update permissions on directories that MariaDB Columnstore writes to (by root user)">Update permissions on directories that MariaDB Columnstore writes to (by root user)</a></li>

            <li class=""><a href="#uninstall-existing-mariadb-columnstore-installation-if-needed-by-root-user" title="Uninstall existing MariaDB Columnstore installation, if needed (by root user)">Uninstall existing MariaDB Columnstore installation, if needed (by root user)</a></li>

            <li class=""><a href="#mariadb-columnstore-installation-by-the-new-user" title="MariaDB Columnstore installation (by the new user)">MariaDB Columnstore installation (by the new user)</a></li>

            <li class=""><a href="#configure-columnstore-to-run-automatically-at-boot" title="Configure ColumnStore to run automatically at boot">Configure ColumnStore to run automatically at boot</a>        </ol>
</li>

        <li class=""><a href="#mariadb-server-password-setup" title="MariaDB Server Password setup">MariaDB Server Password setup</a></li>

        <li class=""><a href="#columnstore-cluster-test-tool" title="ColumnStore Cluster Test Tool">ColumnStore Cluster Test Tool</a></li>

        <li class=""><a href="#how-to-configuration-and-launch-mariadb-columnstore" title="How to Configuration and Launch MariaDB Columnstore">How to Configuration and Launch MariaDB Columnstore</a>        <ol class="toc">

            <li class=""><a href="#columnstore-quick-launch-tools" title="ColumnStore Quick Launch Tools">ColumnStore Quick Launch Tools</a></li>

            <li class=""><a href="#columnstore-configuration-and-installation-tool" title="ColumnStore Configuration and Installation Tool">ColumnStore Configuration and Installation Tool</a>        </ol>
    </ol>
 </ol>
</li>
</div>
<h4 class="anchored_heading" id="configuration-preparation">Configuration preparation</h4>
<p>Before installing MariaDB ColumnStore, there is some preparation necessary. You will need to determine the following. Please refer to the MariaDB ColumnStore Architecture Document for additional information.</p>
<ul start="1"><li>How many User Modules (UMs) will your system need?
</li></ul>
<ul start="1"><li>How many Performance Modules (PMs) will your system need?
</li></ul>
<ul start="1"><li>How much disk space will your system need?
</li></ul>
<ul start="1"><li>Would you have passwordless ssh access between PMs?
</li></ul>
<ul start="1"><li>Do you want to run the install as root or an unprivileged user?
</li></ul>
<h4 class="anchored_heading" id="os-information">OS information</h4>
<p>MariaDB ColumnStore is certified to run on:</p>
<p>RHEL/CentOS v6, v7</p>
<p>Ubuntu 16.04 LTS, Ubuntu 18.04 LTS</p>
<p>Debian v8, v9</p>
<p>SUSE 12</p>
<p>but it should run on any recent Linux system.  Make sure all nodes are running the same OS.</p>
<p>Make sure the locale setting on all nodes is the same.</p>
<p>To set locale to en_US and UTf-8, as root run:</p>
<pre class="fixed"># localedef -i en_US -f UTF-8 en_US.UTF-8
</pre><h4 class="anchored_heading" id="system-administration-information">System administration information</h4>
<p>Information your system administrator must provide before installing MariaDB ColumnStore:</p>
<ul start="1"><li>The hostnames of each interface on each node (optional).
</li></ul>
<ul start="1"><li>The IP address of each interface on each node.
</li></ul>
<ul start="1"><li>The user and password ColumnStore will run as should be consistent across all nodes. MariaDB ColumnStore can be installed as root or an unprivileged user.
</li></ul>
<p>Example for 3 PM, 1UM system, these are the steps required to configure PM-1 for password-less ssh. The equivalent steps must be repeated on every PM in the system.
The equivalent steps must be repeated on every UM in the system if the MariaDB ColumnStore Data Replication feature is enabled during the install process.</p>
<pre class="fixed">[root@pm- 1 ~] $ ssh-keygen
[root@pm- 1 ~] $ ssh-copy-id -i ~/.ssh/id_rsa.pub pm-1
[root@pm- 1 ~] $ ssh-copy-id -i ~/.ssh/id_rsa.pub pm-2
[root@pm- 1 ~] $ ssh-copy-id -i ~/.ssh/id_rsa.pub pm-3
[root@pm- 1 ~] $ ssh-copy-id -i ~/.ssh/id_rsa.pub um-1
</pre><p>If you will be using ssh keys...</p>
<ul start="1"><li>and plan to enable Data Replication feature, make sure you can login between all UM nodes and all other UM nodes. 
</li><li>and plan to enable the Local Query Feature, make sure you can login between all UM nodes and all PM nodes.
</li><li>and plan to enable the Data Redundancy feature, make sure you can login to PM1 from PM1, and between all UM nodes, without an additional prompt.  This is required for the Data Redundancy feature. 
</li></ul>
<h4 class="anchored_heading" id="network-configuration">Network configuration</h4>
<p>MariaDB ColumnStore is quite flexible regarding networking. 
Some options are as follows:</p>
<ul start="1"><li>The interconnect between UMs and PMs can be one or more private VLANs. 
In this case MariaDB ColumnStore will automatically trunk the individual LANs together to provide greater effective bandwidth between the UMs and PMs.
</li></ul>
<ul start="1"><li>The PMs do not require a public LAN access as they only need to communicate with the UMs, unless the local query feature is desired.
</li></ul>
<ul start="1"><li>The UMs most likely require at least one public interface to access the MySQL server front end from the site LAN. This interface can be a separate physical or logical connection from the PM interconnect.
</li></ul>
<ul start="1"><li>You can use whatever security your site requires on the public access to the MySQL server front end on the UMs. By default it is listening on port 3306.
</li></ul>
<ul start="1"><li>MariaDB ColumnStore software only requires a TCP/IP stack to be present to function. You can use any physical layer you desire.
</li></ul>
<h4 class="anchored_heading" id="mariadb-columnstore-port-usage">MariaDB ColumnStore port usage</h4>
<p>The MariaDB ColumnStore daemon uses port 3306.</p>
<p>You must reserve the following ports to run the MariaDB ColumnStore
software:
8600 - 8630, 8700, and 8800</p>
<h4 class="anchored_heading" id="installation-and-data-directory-paths">Installation and Data Directory Paths</h4>
<p>MariaDB Columnstore requires that the software gets installed and the data paths in the configuration files don't get changed from their initial settings. The system will not function properly if they are changed or the software is install in the incorrect places.</p>
<p>For root user install, it is required that it gets installed and it runs in this location:</p>
<p>/usr/local/</p>
<p>For non-root user install, it is required that it gets installed and it runs in this location:</p>
<p>/home/'non-root-user-name'</p>
<p>Example if installed and running as 'mysq' user, is has to be installed here:</p>
<p>/home/mysql/</p>
<p>IMPORTANT: Don't change any of the configuration files, Columnstore.xml or my.cnf, to point to a different install or data location.</p>
<p>If you need to have the software or the data (dbroot backend data or the mysql data) placed in a different directory than what is required above, you can use soft-links.</p>
<p>To install in a different directory for root user, here is an example of setting up a softlink</p>
<pre class="fixed"># ln -s /mnt/columnstore /usr/local/mariadb/columnstore
</pre><p>To install in a different directory for non-root user, here is an example of setting up a softlink</p>
<pre class="fixed"># ln -s /mnt/columnstore /home/mysql/mariadb/columnstore
</pre><p>To have the DBRoot data1 placed in a different directory, here is an example of setting up a softlink</p>
<pre class="fixed"># ln -s /mnt/data1 /usr/local/mariadb/columnstore/data1
</pre><p>To have the MariaDB/MySQL aata placed in a different directory, here is an example of setting up a softlink</p>
<pre class="fixed"># ln -s /mnt/mysql /usr/local/mariadb/columnstore/mysql/db
</pre><p>If you do setup softlinks, make sure the permissions and users are setup for the new directories that match the current directories.</p>
<h4 class="anchored_heading" id="storage-and-database-files-dbroots">Storage and Database files (DBRoots)</h4>
<p>'DBRoot' is a term used by ColumnStore to refer to a storage unit, located at mariadb/columnstore/data&lt;N&gt;, where N is the identifier for that storage unit.  You will see that term throughout the documentation. The name of this location can't be changed. But you can use soft-links to point it to other locations.</p>
<p>MariaDB ColumnStore supports many storage options.</p>
<ul start="1"><li>Internal - Internal means you will use block storage already mounted and available on each node.  The data directories (mariadb/columnstore/dataN) can be links to other locations if preferable.  With Internal storage setup, there is no High Availability Performance Module Failover capability. This is one of the limitations to using Internal storage. Its also for systems that have SAN that are mounted to single Performance Module. Its not shared mounted to all Performance Modules. 
</li></ul>
<ul start="1"><li>External - External means the SAN devices used for the DBRoots are shared mounted to all Performance Modules configured in the system. With External storage setup, the High Availability Performance Module Failover capability is supported, because mounts can be moved quickly from one node to another. So this is the only time that 'External' storage should be configured.
</li></ul>
<ul start="1"><li>Data Redundancy - MariaDB ColumnStore supports Data Redundancy for both internal and external configurations.  For Data Redundancy to be an option, the user is required to install the third party GlusterFS software on all Performance Modules. This is discussed later in the Package Dependency section. With Data Redundancy configured, High Availability Performance Module Failover capabilities is supported.
</li></ul>
<p>IMPORTANT: When using external storage, be sure that only whole DBRoots are on the external filesystem.  Do not use higher level directories, which may include the ColumnStore binaries and libraries.  For example, /usr/local/mariadb/columnstore/data1 (aka DBRoot 1) would be a good candidate for external storage, but /usr/local/mariadb/columnstore would not be.</p>
<h4 class="anchored_heading" id="local-database-files">Local database files</h4>
<p>If you are using internal storage, the DBRoot directories will be created under the installation directory, for example /usr/local/mariadb/columnstore/data&lt;N&gt; where N is the DBRoot number. 
There is no performance gain from assigning more than one DBRoot to a single storage device.</p>
<p>DBRoots can be linked to other locations with more capacity if necessary.</p>
<h4 class="anchored_heading" id="san-mounted-database-files">SAN mounted database files</h4>
<p>If you are using a SAN for storage, the following must be taken into account:</p>
<ul start="1"><li>Each DBRoot must be a separate filesystem.
</li></ul>
<ul start="1"><li>Each DBRoot should have the same capacity and performance characteristics, and each Performance Module should have the same number of DBRoots assigned for best performance.
</li></ul>
<ul start="1"><li>MariaDB ColumnStore performs best on filesystems with low overhead, such as the ext family, however it can use any Linux filesystem.  ColumnStore writes relatively large files (up to 64MB) compared to other databases, so please take that into account when choosing and configuring your filesystems.
</li></ul>
<ul start="1"><li>For the failover feature to work, all Performance Modules must be able to mount any DBRoot.
</li></ul>
<ul start="1"><li>The fstab file on all Performance Modules must include all of the external mounts, all with the 'noauto' option specified.  ColumnStore will manage the mounting and unmounting.
</li></ul>
<p>These lines are an example of an installation with 2 DBRoots configured.</p>
<pre class="fixed">/dev/sda1 /usr/local/mariadb/columnstore/data1 ext2 noatime,nodiratime,noauto 0 0
/dev/sdd1 /usr/local/mariadb/columnstore/data2 ext2 noatime,nodiratime,noauto 0 0
</pre><h4 class="anchored_heading" id="performance-optimization-considerations">Performance optimization considerations</h4>
<p>There are optimizations that should be made when using MariaDB ColumnStore listed below. As always, please consult with your network administrator for additional optimization considerations for your specific installation needs.</p>
<h4 class="anchored_heading" id="gbe-nic-settings">GbE NIC settings:</h4>
<ul start="1"><li>Modify /etc/rc.d/rc.local to include the following:
</li></ul>
<pre class="fixed">/sbin/ifconfig eth0 txqueuelen 10000
</pre><ul start="1"><li>Modify /etc/sysctl.conf for the following:
</li></ul>
<pre class="fixed"># increase TCP max buffer size
net.core.rmem_max = 16777216
net.core.wmem_max = 16777216

# increase Linux autotuning TCP buffer limits
# min, default, and max number of bytes to use
net.ipv4.tcp_rmem = 4096 87380 16777216
net.ipv4.tcp_wmem = 4096 65536 16777216

# don't cache ssthresh from previous connection
net.ipv4.tcp_no_metrics_save = 1

# recommended to increase this for 1000 BT or higher
net.core.netdev_max_backlog = 2500

# for 10 GigE, use this
net.core.netdev_max_backlog = 30000
</pre><p>NOTE: Make sure there is only 1 setting of net.core.netdev_max_backlog in the /etc/sysctl.conf file.</p>
<ul start="1"><li>Cache memory settings:
The kernel parameter vm.vfs_cache_pressure can be set to a lower value than 100 to attempt to retain caches for inode and directory structures. This will help improve read performance. A value of 10 is suggested. The following commands must be run as the root user or with sudo.
</li></ul>
<p>To check the current  value:</p>
<pre class="fixed">cat /proc/sys/vm/vfs_cache_pressure
</pre><p>To set the current value until the next reboot:</p>
<pre class="fixed">sysctl -w vm.vfs_cache_pressure=10
</pre><p>To set the value permanently across reboots, add the following to /etc/sysctl.conf:</p>
<pre class="fixed">vm.vfs_cache_pressure = 10
</pre><h4 class="anchored_heading" id="system-settings-considerations">System settings considerations</h4>
<h5 class="anchored_heading" id="umask-setting">umask setting</h5>
<p>The default setting of 022 is what is recommended.  ColumnStore requires that it not end with a 7, like 077. 
For example, on a root installation, mysqld runs as the mysql user, and needs to be able to read the ColumnStore configuration file, which likely is not owned by mysql.  If it were, then the other ColumnStore processes could not read it.</p>
<p>The current umask can be determined by running the 'umask' command:
A value of 022 can be set in the current session or in /etc/profile with the command: <br></p>
<pre class="fixed">umask 022
</pre><h4 class="anchored_heading" id="firewall-considerations">Firewall considerations</h4>
<p>The MariaDB ColumnStore uses TCP ports 3306, 8600 - 8630, 8700, and 8800.  Port 3306 is the default port for clients to connect to the MariaDB server; the others are for internal communication and will need to be open between ColumnStore nodes.</p>
<p>To disable any local firewalls and SELinux on mutli-node installations, as root do the following.</p>
<p>CentOS 6 and systems using iptables</p>
<pre class="fixed">#service iptables save  (Will save your existing IPTable Rules)
#service iptables stop  (It will disable firewall Temporary)
</pre><p>To Disable it Permanentely:</p>
<pre class="fixed">#chkconfig iptables off
</pre><p>CentOS 7 and systems using systemctl with firewalld</p>
<pre class="fixed">#systemctl status firewalld  
#systemctl stop firewalld  
#systemctl disable firewalld  
</pre><p>Ubuntu and systems using ufw</p>
<pre class="fixed">#service ufw stop  (It will disable firewall Temporary)
</pre><p>To Disable it Permanently:</p>
<pre class="fixed">#chkconfig ufw off
</pre><p>SUSE </p>
<pre class="fixed">#/sbin/rcSuSEfirewall2 status
#/sbin/rcSuSEfirewall2 stop 
</pre><p>To disable SELinux, edit "/etc/selinux/config" and find line:</p>
<pre class="fixed">SELINUX=enforcing
</pre><p>Now replace it with,</p>
<pre class="fixed">SELINUX=disabled
</pre><h4 class="anchored_heading" id="user-considerations">User considerations</h4>
<p>MariaDB ColumnStore can be installed in different user configurations.</p>
<h4 class="anchored_heading" id="root-user-installation-and-execution">Root User installation and execution</h4>
<p>MariaDB ColumnStore is installed by root and the MariaDB ColumnStore commands are run by root.
With this installation type, you have the option of install using rpm, deb or binary packages.  You can install the packages with the standard tools yum, apt, or zypper.</p>
<p>The default package installation directory is /usr/local/mariadb/columnstore
The location of the temporary files created by MariaDB ColumnStore is /tmp/columnstore_tmp.</p>
<h4 class="anchored_heading" id="unprivileged-user-installation-and-execution">Unprivileged user installation and execution</h4>
<p>MariaDB ColumnStore is installed by an unprivileged user and the MariaDB ColumnStore commands are run by that user. With this installation type, you are required to install using the binary tarball, which can be downloaded from the MariaDB ColumnStore Downloads page: <a href="https://mariadb.com/downloads/#mariadbax">https://mariadb.com/downloads/#mariadbax</a></p>
<p>The default package installation directory is the home directory of the user account.  The location of the temporary files created by MariaDB ColumnStore is $HOME/.tmp</p>
<h4 class="anchored_heading" id="root-user-installation-and-unprivileged-user-execution">Root user installation and unprivileged user execution</h4>
<p>MariaDB ColumnStore is installed by root user and the MariaDB ColumnStore commands are run by an unprivileged user. This document will show how to configure the system to run commands as an unprivileged user:  <a href="https://mariadb.com/kb/en/library/mariadb-columnstore-system-usage/#non-root-user-mariadb-columnstore-admin-console">https://mariadb.com/kb/en/library/mariadb-columnstore-system-usage/#non-root-user-mariadb-columnstore-admin-console</a></p>
<p>With this installation type, you have the option of install using rpm, deb or binary packages, which you can install with the standard tools yum, apt, zypper.</p>
<p>The default package installation directory is /usr/local/mariadb/columnstore
The location of the temporary files created by MariaDB ColumnStore is /tmp/columnstore_tmp.</p>
<h3 class="anchored_heading" id="package-dependencies">Package dependencies</h3>
<h4 class="anchored_heading" id="boost-libraries">Boost libraries</h4>
<p>MariaDB ColumnStore requires that the boost package of 1.53 or newer is installed.</p>
<p>For Centos 7, Ubuntu 16, Debian 8, SUSE 12 and other newer OS's, you can just install the default boost package that comes with your distribution.</p>
<pre class="fixed"># yum -y install boost
</pre><p>or </p>
<pre class="fixed"># apt-get -y install libboost-all-dev
</pre><p>For SUSE 12, you will need to install the boost-devel package, which is part of the SLE-SDK package.</p>
<pre class="fixed">SUSEConnect -p sle-sdk/12.2/x86_64
zypper install boost-devel
</pre><p>For CentOS 6, you can either download and install the MariaDB Columnstore Centos 6 boost library package or build version 1.55 from source and deploy it to each ColumnStore node.</p>
<p>To download the pre-built libraries from MariaDB, go to binaries download page and download "centos6_boost_1_55.tar.gz"</p>
<p>   <a href="https://mariadb.com/downloads/columnstore">https://mariadb.com/downloads/columnstore</a></p>
<p>   Click All Versions - &gt; 1.0.x -&gt; centos -&gt; x86_64</p>
<p>Install package on each server in the cluster.</p>
<pre class="fixed">wget https://downloads.mariadb.com/ColumnStore/1.0.14/centos/x86_64/centos6_boost_1_55.tar.gz
tar xfz centos6_boost_1_55.tar.gz -C /usr/lib
ldconfig
</pre><p>Downloading and build the boost libraries from source:</p>
<p>NOTE: This requires that the "Development Tools" group and cmake be installed prior to this.</p>
<pre class="fixed">yum groupinstall &#34;Development Tools&#34;
yum install cmake
</pre><p>Here is the procedure to download and build the boost source.  As root do the following:</p>
<pre class="fixed">cd /usr/
wget http://sourceforge.net/projects/boost/files/boost/1.55.0/boost_1_55_0.tar.gz
tar zxvf boost_1_55_0.tar.gz
cd boost_1_55_0
./bootstrap.sh --with-libraries=atomic,date_time,exception,filesystem,iostreams,locale,program_options,regex,signals,system,test,thread,timer,log --prefix=/usr
./b2 install
ldconfig
</pre><h4 class="anchored_heading" id="other-packages">Other packages</h4>
<p>Additional packages are required on each ColumnStore node.</p>
<h5 class="anchored_heading" id="centos-67">Centos 6/7</h5>
<pre class="fixed"># yum -y install expect perl perl-DBI openssl zlib file sudo libaio rsync snappy net-tools numactl-libs nmap
</pre><h5 class="anchored_heading" id="ubuntu-1618">Ubuntu 16/18</h5>
<pre class="fixed"># apt-get -y install tzdata libtcl8.6 expect perl openssl file sudo libdbi-perl libboost-all-dev libreadline-dev rsync libsnappy1v5 net-tools libnuma1 nmap
</pre><h5 class="anchored_heading" id="debian-8">Debian 8</h5>
<pre class="fixed"># apt-get install expect perl openssl file sudo libdbi-perl libboost-all-dev libreadline-dev rsync libsnappy1 net-tools libnuma1 nmap
</pre><h5 class="anchored_heading" id="debian-9">Debian 9</h5>
<pre class="fixed"># apt-get install expect perl openssl file sudo libdbi-perl libboost-all-dev libreadline-dev rsync  net-tools libsnappy1v5 libreadline5 libaio1 libnuma1 nmap

</pre><h5 class="anchored_heading" id="suse-12">SUSE 12</h5>
<pre class="fixed">zypper install expect perl perl-DBI openssl file sudo libaio1 rsync net-tools libsnappy1 libnuma1 nmap
</pre><h4 class="anchored_heading" id="data-redundancy-packages">Data Redundancy packages</h4>
<p>To enable the Data Redundancy feature, install and enable GlusterFS version 3.3.1 or higher on each Performance Module.</p>
<h5 class="anchored_heading" id="centos-67">Centos 6/7</h5>
<pre class="fixed"># yum -y install centos-release-gluster
# yum -y install glusterfs glusterfs-fuse glusterfs-server

start / enable service: 
# systemctl enable glusterd.service
# systemctl start glusterd.service 
</pre><h5 class="anchored_heading" id="ubuntu-1618">Ubuntu 16/18</h5>
<pre class="fixed"># apt-get install glusterfs-server attr

start / enable service:
# systemctl start glusterfs-server.service 
# systemctl enable glusterfs-server.service 
</pre><h5 class="anchored_heading" id="debian-8">Debian 8</h5>
<pre class="fixed"># apt-get -y install glusterfs-server attr

start / enable service:
# update-rc.d glusterfs-server defaults
</pre><h5 class="anchored_heading" id="debian-9">Debian 9</h5>
<pre class="fixed"># apt-get install glusterfs-server attr

start / enable service:
# systemctl start glusterfs-server.service 
# systemctl enable glusterfs-server.service 
</pre><h5 class="anchored_heading" id="suse-12">SUSE 12</h5>
<pre class="fixed"># zypper install glusterfs

start / enable service:
# chkconfig glusterd on
</pre><h4 class="anchored_heading" id="system-logging-package">System Logging Package</h4>
<p>MariaDB ColumnStore can use the following standard logging systems.</p>
<ul start="1"><li>syslog
</li><li>rsyslog
</li><li>syslog-ng
</li></ul>
<h3 class="anchored_heading" id="download-location">Download location</h3>
<p>The standard ColumnStore RPM and DEB packages are available at <a href="https://mariadb.com/downloads/columnstore">https://mariadb.com/downloads/columnstore</a>.  If you need to install ColumnStore without root-level permissions, you must use the binary tarball, which is available at <a href="https://downloads.mariadb.com/ColumnStore/">https://downloads.mariadb.com/ColumnStore/</a></p>
<p>Note: MariaDB ColumnStore will configure a root user with no password in the MariaDB server initially.  Afterward, you may setup users and permissions within MariaDB as you normally would.</p>
<h3 class="anchored_heading" id="choosing-the-type-of-initial-downloadinstall">Choosing the type of initial download/install</h3>
<h4 class="anchored_heading" id="non-distributed-installation">Non-Distributed Installation</h4>
<p>The default MariaDB ColumnStore installation process supports a Non-Distributed installation mode for multi-node deployments. With this option, the user will need to install the ColumnStore packages manually on each node. </p>
<p>This option would be used when Package Repo install of rpm/deb packages are the preferred method to install MariaDB ColumnStore. Its also used for MariaDB ColumnStore Docker images.</p>
<p>The Pre-install setup time will take longer with the Non-Distributed Installation, but the system Install and startup via the install app 'postConfigure' will be faster.</p>
<h4 class="anchored_heading" id="distributed-install">Distributed Install</h4>
<p>With the Distributed option, MariaDB ColumnStore will distribute and install the packages automatically on each node.  The user installs ColumnStore on Performance Module 1, then during the postConfigure step, ColumnStore will handle the rest.</p>
<p>This option would be used on system with multi-nodes where the package only had to be installed on 1 node, the Performance Module 1, the app 'postConfigure' would distribute and all down to all of the other nodes.</p>
<p>The Pre-install setup time would be shorter with the Non-Distributed Installation, but the system Install and startup via the install app 'postConfigure' will be take longer.</p>
<h3 class="anchored_heading" id="root-user-installations">Root user installations</h3>
<h4 class="anchored_heading" id="initial-downloadinstall-of-mariadb-columnstore-packages">Initial download/install of MariaDB ColumnStore Packages</h4>
<p>The MariaDB ColumnStore RPM and DEB Packages can be installed using yum/apt-get commands.
Check here for additional Information:</p>
<p><a href="https://mariadb.com/kb/en/library/installing-mariadb-ax-from-the-package-repositories">https://mariadb.com/kb/en/library/installing-mariadb-ax-from-the-package-repositories</a></p>
<h4 class="anchored_heading" id="initial-downloadinstall-of-mariadb-columnstore-package-with-the-ax-package">Initial download/install of MariaDB ColumnStore Package with the AX package</h4>
<p>The MariaDB ColumnStore RPM, DEB and binary packages can be installed along with the other packages that make up the AX package.
Check here for additional Information:</p>
<p><a href="https://mariadb.com/kb/en/library/columnstore-getting-started-installing-mariadb-ax-from-the-mariadb-download/">https://mariadb.com/kb/en/library/columnstore-getting-started-installing-mariadb-ax-from-the-mariadb-download/</a></p>
<h4 class="anchored_heading" id="initial-download-installation-of-mariadb-columnstore-rpms">Initial download &amp; installation of MariaDB ColumnStore RPMs</h4>
<ol start="1"><li>Install MariaDB ColumnStore as user root:
</li></ol>
<p>Note: MariaDB ColumnStore will configure a root user with no password in the MariaDB server initially.  Afterward, you may setup users and permissions within MariaDB as you normally would.</p>
<p>Note: The packages will be installed at /usr/local. This is required for root user installations.</p>
<ul start="1"><li>Download the appropriate ColumnStore package and place in the /root directory.
</li><li>Unpack the tarball, which contains multiple RPMs.
</li><li>Install the RPMs. The MariaDB ColumnStore software will be installed in /usr/local/. <br>
<code class="fixed" style="white-space:pre-wrap">rpm -ivh mariadb-columnstore*release#*.rpm</code>
<br>
</li></ul>
<h4 class="anchored_heading" id="initial-download-installation-of-mariadb-columnstore-binary-package">Initial download &amp; installation of MariaDB ColumnStore binary package</h4>
<p>The MariaDB ColumnStore binary packages can be downloaded from <a href="https://downloads.mariadb.com/ColumnStore/">https://downloads.mariadb.com/ColumnStore/</a>.  Select version 1.2.2, then navigate to the appropriate package for your system.  The binary package will have the extension '.bin.tar.gz' rather than '.rpm.tar.gz' or '.deb.tar.gz'.</p>
<ul start="1"><li>Unpack the tarball in /usr/local/ <br>
<code class="fixed" style="white-space:pre-wrap">tar -zxf mariadb-columnstore-release#.x86_64.bin.tar.gz</code>
</li></ul>
<p>Run the post-install script: <br></p>
<pre class="fixed">/usr/local/mariadb/columnstore/bin/post-install
</pre><h4 class="anchored_heading" id="initial-download-installation-of-mariadb-columnstore-deb-package">Initial download &amp; installation of MariaDB ColumnStore DEB package</h4>
<ol start="1"><li>Download the package mariadb-columnstore-release#.amd64.deb.tar.gz into the /root directory of the server where you are installing MariaDB ColumnStore.
</li><li>Unpack the tarball, which contains multiple DEBs. <br>
<code class="fixed" style="white-space:pre-wrap"> tar -zxf  mariadb-columnstore-release#.amd64.deb.tar.gz</code> <br>
</li><li>Install the MariaDB ColumnStore DEBs. The MariaDB ColumnStore software will be installed in /usr/
local/. <br>
<code class="fixed" style="white-space:pre-wrap"> dpkg -i mariadb-columnstore*release#*.deb</code>
</li></ol>
<h3 class="anchored_heading" id="unprivileged-user-installation">Unprivileged user installation</h3>
<p>MariaDB Columnstore is installed to run as an unprivileged user using the binary package. It will need to be run on all MariaDB ColumnStore nodes.</p>
<p>For the purpose of these instructions, the following assumptions are:</p>
<ul start="1"><li>Unprivileged user 'mysql' is used in this example
</li><li>Installation directory is /home/mysql/mariadb/columnstore
</li></ul>
<p>Tasks involved:</p>
<ul start="1"><li>Create the mysql user and group of the same name (by root user)
</li><li>Update sudo configuration, if needed (by root user)
</li><li>Set the user file limits (by root user)
</li><li>Modify fstab if using 'external' storage (by root user)
</li><li>Uninstall existing MariaDB Columnstore installation if needed (by root user)
</li><li>Update permissions on certain directories that MariaDB Columnstore writes (by root user)
</li><li>MariaDB Columnstore Installation (by the new user user)
</li><li>Enable MariaDB Columnstore to start automatically at boot time
</li></ul>
<h4 class="anchored_heading" id="creation-of-a-new-user-by-root-user">Creation of a new user (by root user)</h4>
<p>Before beginning the binary tar file installation you will need your system administrator to set up accounts
for you on every MariaDB Columnstore node. The account name &amp; password must be the same on every node. If you change the password on one node, you must change it on every node. The user ID must be the same on every node as well. In the examples below we will use the account name 'mysql' and the password 'mariadb'.</p>
<ul start="1"><li>create new user
</li></ul>
<p>Group ID is an example, can be different than 1000, but needs to be the same on all servers in the cluster</p>
<p><code class="fixed" style="white-space:pre-wrap">adduser mysql -u 1000</code></p>
<ul start="1"><li>create group
</li></ul>
<pre class="fixed">addgroup mysql
moduser -g mysql mysql
</pre><p>The value for user-id must be the same for all nodes.</p>
<ul start="1"><li>Assign a password to newly created user
</li></ul>
<p><code class="fixed" style="white-space:pre-wrap">passwd mysql</code></p>
<ul start="1"><li>Log in as user mysql
</li></ul>
<p><code class="fixed" style="white-space:pre-wrap">su - mysql</code></p>
<p>IMPORTANT: It is required that the installation directory will be the home directory of the user account. So it would be '/home/mysql/' in this example.  The installation directory must be the same on every node.  In the examples below we will use the path '/home/mysql/mariadb/columnstore'. </p>
<h4 class="anchored_heading" id="update-sudo-configuration-if-needed-by-root-user">Update sudo configuration, if needed  (by root user)</h4>
<p>In the MariaDB ColumnStore 1.2.1 and later, sudo configuration is only required for certain system configurations. </p>
<p>These would include:</p>
<ul start="1"><li>Data Redundancy
</li><li>External Storage
</li><li>Amazon EC2 using EBS storage
</li></ul>
<p>If your system is not configured with any of these, you can skip this section.</p>
<h4 class="anchored_heading" id="sudo-configuration-for-data-redundancy">sudo configuration for Data Redundancy</h4>
<p>The sudo configuration on each node will need to allow the new user to run the gluster, mount, umount, and chmod commands.  Add the following lines to your /etc/sudoers file, changing the paths to those commands if necessary on your system.</p>
<pre class="fixed">mysql  ALL=NOPASSWD: /sbin/gluster
mysql ALL=NOPASSWD: /usr/bin/mount
mysql ALL=NOPASSWD: /usr/bin/umount
mysql ALL=NOPASSWD: /usr/bin/chmod
</pre><p>Comment the following line, which will allow the user to login without a terminal:</p>
<pre class="fixed">#Defaults requiretty
</pre><h4 class="anchored_heading" id="sudo-configuration-for-external-storage">sudo configuration for External Storage</h4>
<p>The sudo configuration on each node will need to allow the new user to run the chmod, chown, mount, and umount commands.  Add the following lines to your /etc/sudoers file, changing the path of each command if necessary on your system.</p>
<pre class="fixed">mysql ALL=NOPASSWD: /usr/bin/chmod
mysql ALL=NOPASSWD: /usr/bin/chown
mysql ALL=NOPASSWD: /usr/bin/mount
mysql ALL=NOPASSWD: /usr/bin/umount
</pre><p>Comment the following line, which will allow the user to login without a terminal:</p>
<pre class="fixed">#Defaults requiretty
</pre><h4 class="anchored_heading" id="sudo-configuration-for-amazon-ec2-using-ebs-storage">sudo configuration for Amazon EC2 using EBS storage</h4>
<p>The sudo configuration on each node will need to allow the new user to run several commands.  Add the following lines to your /etc/sudoers file, changing the path of each command if necessary on your system.</p>
<pre class="fixed">mysql ALL=NOPASSWD: /usr/sbin/mkfs.ext2
mysql ALL=NOPASSWD: /usr/bin/chmod
mysql ALL=NOPASSWD: /usr/bin/chown
mysql ALL=NOPASSWD: /usr/bin/sed
mysql ALL=NOPASSWD: /usr/bin/mount
mysql ALL=NOPASSWD: /usr/bin/umount
</pre><p>Comment the following line, which will allow the user to login without a terminal:</p>
<pre class="fixed">#Defaults requiretty
</pre><h4 class="anchored_heading" id="set-the-user-file-limits-by-root-user">Set the user file limits (by root user)</h4>
<p>ColumnStore needs the open file limit to be increased for the new user. To do this edit the /etc/security/limits.conf file and make the following additions at the end of the file:</p>
<pre class="fixed">mysql hard nofile 65536
mysql soft nofile 65536
</pre><p>If you are already logged in as 'mysql' you will need to logout, then login for this change to take effect.</p>
<h4 class="anchored_heading" id="modify-fstab-if-using-the-external-storage-option-by-root-user">Modify fstab if using the external storage option (by root user)</h4>
<p>If you are using an 'external' storage configuration, you will need to allow the new user to mount and unmount those filesystems.  Add the 'users' option to those filesystems in your /etc/fstab file.</p>
<p><br>Example entries: <br>
/dev/sda1 /home/mysql/mariadb/columnstore/data1 ext2 noatime,nodiratime,noauto,users 0 0 <br>
/dev/sdd1 /home/mariadb/columnstore/data2 ext2 noatime,nodiratime,noauto,users 0 0 <br> </p>
<p>The external filesystems will need to be owned by the new user. This is an
example command run as root setting the owner and group of dbroot /dev/sda1 to the mysql user:</p>
<pre class="fixed">mount /dev/sda1 /tmpdir 
chown -R mysql:mysql /tmpdir 
umount /tmpdir 
</pre><h4 class="anchored_heading" id="update-permissions-on-directories-that-mariadb-columnstore-writes-to-by-root-user">Update permissions on directories that MariaDB Columnstore writes to (by root user)</h4>
<p>ColumnStore uses POSIX shared memory segments.  On some systems, the entry point /dev/shm does not allow regular users to create new segments.  If necessary, permissions on /dev/shm should be set such that the new user or group has full access.  The default on most systems is 777.</p>
<pre class="fixed">chmod 777 /dev/shm
</pre><p>For Data Redundancy using GlusterFS configured system:</p>
<pre class="fixed">chmod 777 -R /var/log/glusterfs
</pre><p>To allow external storage on an Amazon EC2 instance using EBS storage:</p>
<pre class="fixed">chmod 644 /etc/fstab
</pre><h4 class="anchored_heading" id="uninstall-existing-mariadb-columnstore-installation-if-needed-by-root-user">Uninstall existing MariaDB Columnstore installation, if needed (by root user)</h4>
<p>If MariaDB Columnstore has ever before been installed on any of the planned hosts as a root user install, you must have the system administrator verify that no remnants of that installation exist. The unprivileged installation will not be successful if there are MariaDB Columnstore files owned by root on any of the hosts.</p>
<ul start="1"><li>Verify the MariaDB Columnstore installation directory does not exist: <br>
The /usr/local/mariadb/columnstore directory should not exist at all unless it is your target directory, in
which case it must be completely empty and owned by the new user.
</li></ul>
<ul start="1"><li>Verify the /etc/fstab entries are correct for the new installation. <br>
</li></ul>
<ul start="1"><li>Verify the /etc/default/columnstore directory does not exist.<br>
</li></ul>
<ul start="1"><li>Verify the /var/lock/subsys/mysql-Columnstore file does not exist.<br>
</li></ul>
<ul start="1"><li>Verify the /tmp/StopColumnstore file does not exist. <br>
</li></ul>
<h4 class="anchored_heading" id="mariadb-columnstore-installation-by-the-new-user">MariaDB Columnstore installation (by the new user)</h4>
<p>You should be familiar with the general MariaDB Columnstore installation instructions in this guide as you will be asked the same questions during installation.</p>
<p>If performing the distributed-mode installation across multiple node, the binary package only needs to be installed on Performance Module #1 (pm1).  If performing a non-distributed installation, the binary package is required to install the MariaDB ColumnStore on all the nodes in the system.</p>
<ul start="1"><li>Log in as the unprivileged user (mysql, in our example)
Note: Ensure you are at your home directory before proceeding to the next step
</li></ul>
<ul start="1"><li>Now place the MariaDB Columnstore binary tar file in your home directory on the host you will be using as
PM1. Untar the binary distribution package to the /home/mysql directory:
tar -xf mariadb-columnstore-release#.x86_64.bin.tar.gz
</li></ul>
<ul start="1"><li>Run post installation:
</li></ul>
<p>If performing the distributed-mode installation, post-install only needs to be run on Performance Module #1 (pm1).  If performing non-distributed installations, post-install needs to be run on all the nodes in the system.</p>
<p>NOTE: $HOME is the same as /home/mysql in this example</p>
<pre class="fixed">./mariadb/columnstore/bin/post-install --installdir=$HOME/mariadb/columnstore
</pre><p>Here is an example of what is printed by the post-install command</p>
<pre class="fixed">NOTE: For non-root install, you will need to run the following commands as root user to
      setup the MariaDB ColumnStore System Logging

export COLUMNSTORE_INSTALL_DIR=/home/mysql/mariadb/columnstore
export LD_LIBRARY_PATH=:/home/mysql/mariadb/columnstore/lib:/home/mysql/mariadb/columnstore/mysql/lib:/home/mysql/mariadb/columnstore/lib:/home/mysql/mariadb/columnstore/mysql/lib
/home/mysql/mariadb/columnstore/bin/syslogSetup.sh --installdir=/home/mysql/mariadb/columnstore --user=mysql install
 
The next steps are:

If installing on a pm1 node using non-distributed install

export COLUMNSTORE_INSTALL_DIR=/home/mysql/mariadb/columnstore
export LD_LIBRARY_PATH=:/home/mysql/mariadb/columnstore/lib:/home/mysql/mariadb/columnstore/mysql/lib:/home/mysql/mariadb/columnstore/lib:/home/mysql/mariadb/columnstore/mysql/lib
/home/mysql/mariadb/columnstore/bin/postConfigure -i /home/mysql/mariadb/columnstore

If installing on a pm1 node using distributed install

export COLUMNSTORE_INSTALL_DIR=/home/mysql/mariadb/columnstore
export LD_LIBRARY_PATH=:/home/mysql/mariadb/columnstore/lib:/home/mysql/mariadb/columnstore/mysql/lib:/home/mysql/mariadb/columnstore/lib:/home/mysql/mariadb/columnstore/mysql/lib
/home/mysql/mariadb/columnstore/bin/postConfigure -i /home/mysql/mariadb/columnstore -d

If installing on a non-pm1 using the non-distributed option:

export COLUMNSTORE_INSTALL_DIR=/home/mysql/mariadb/columnstore
export LD_LIBRARY_PATH=:/home/mysql/mariadb/columnstore/lib:/home/mysql/mariadb/columnstore/mysql/lib:/home/mysql/mariadb/columnstore/lib:/home/mysql/mariadb/columnstore/mysql/lib
/home/mysql/mariadb/columnstore/bin/columnstore start
</pre><ul start="1"><li>Setup System Logging
</li></ul>
<p>For an unprivileged user installation, you will need to run the following commands as root on all nodes after the post-install command is run to make log entries go to the right places:</p>
<pre class="fixed">export COLUMNSTORE_INSTALL_DIR=/home/mysql/mariadb/columnstore
export LD_LIBRARY_PATH=/home/mysql/mariadb/columnstore/lib:/home/mysql/mariadb/columnstore/mysql/lib
/home/mysql/mariadb/columnstore/bin/syslogSetup.sh --installdir=/home/mysql/mariadb/columnstore --user=mysql install
</pre><p>Without that, log entries will go to the main system log file, and low-severity logs may not be recorded at all.</p>
<ul start="1"><li>Start MariaDB ColumnStore Service for Non-Distributed installations
</li></ul>
<p>If performing the non-distributed installation mode, the 'columnstore' service needs to be started on all nodes in the system except Performance Module #1 (pm1). postConfigure is on pm1, which is documented in the next section.</p>
<p>Starting the 'columnstore' service:</p>
<pre class="fixed">export COLUMNSTORE_INSTALL_DIR=/home/mysql/mariadb/columnstore
export LD_LIBRARY_PATH=/home/mysql/mariadb/columnstore/lib:/home/mysql/mariadb/columnstore/mysql/lib
/home/mysql/mariadb/columnstore/bin/columnstore start
</pre><ul start="1"><li>Running ColumnStore Configuration and Installation Tool, 'postConfigure'
</li></ul>
<p>On PM1, run the 2 export commands that were printed by the post-install command, then run postConfigure, which would
look like the following:</p>
<pre class="fixed">export COLUMNSTORE_INSTALL_DIR=/home/mysql/mariadb/columnstore
export LD_LIBRARY_PATH=/home/mysql/mariadb/columnstore/lib:/home/mysql/mariadb/columnstore/mysql/lib
/home/mysql/mariadb/columnstore/bin/postConfigure -i /home/mysql/mariadb/columnstore
</pre><h4 class="anchored_heading" id="configure-columnstore-to-run-automatically-at-boot">Configure ColumnStore to run automatically at boot</h4>
<p>To configure MariaDB Columnstore unprivileged installation to start automatically at boot time, perform the following steps on each Columnstore node:</p>
<ul start="1"><li>Add the following to your local startup script (/etc/rc.local or similar), modifying as necessary:
</li></ul>
<pre class="fixed">runuser -l mysql -c &#34;/home/mysql/mariadb/columnstore/bin/columnstore start&#34;
</pre><p>Note: Make sure the above entry is added to the rc.local file that gets executed at boot time.
Depending on the OS installation, rc.local could be in a different location.</p>
<ul start="1"><li>MariaDB Columnstore will setup and log using your current system logging application in the directory
/var/log/mariadb/columnstore. 
</li></ul>
<h3 class="anchored_heading" id="mariadb-server-password-setup">MariaDB Server Password setup</h3>
<p>If you plan to setup a root user password in the MariaDB server Database, remember to setup the Password Configuration file on each User Module and Performance Module that has User Modules functionality.</p>
<p><a href="https://mariadb.com/kb/en/library/mariadb-columnstore-system-usage/#logging-into-mariadb-columnstore-mariadb-console">https://mariadb.com/kb/en/library/mariadb-columnstore-system-usage/#logging-into-mariadb-columnstore-mariadb-console</a></p>
<h3 class="anchored_heading" id="columnstore-cluster-test-tool">ColumnStore Cluster Test Tool</h3>
<p>This tool can be run before installation. It will verify the setup of all servers that are going to be used in the Columnstore System.</p>
<p><a href="https://mariadb.com/kb/en/mariadb/mariadb-columnstore-cluster-test-tool">https://mariadb.com/kb/en/mariadb/mariadb-columnstore-cluster-test-tool</a></p>
<h3 class="anchored_heading" id="how-to-configuration-and-launch-mariadb-columnstore">How to Configuration and Launch MariaDB Columnstore</h3>
<h4 class="anchored_heading" id="columnstore-quick-launch-tools">ColumnStore Quick Launch Tools</h4>
<p>There are 3 Quick Launch Tools that can be used to launch basic systems. These are 1 step command tool where you provide the number of modules or amazon instances and the tool will take care of the rest.</p>
<p>1. Single Server Quick Launch</p>
<p><a href="https://mariadb.com/kb/en/library/installing-and-configuring-a-single-server-columnstore-system-12x/#mariadb-columnstore-quick-installer-for-a-single-server-system">https://mariadb.com/kb/en/library/installing-and-configuring-a-single-server-columnstore-system-12x/#mariadb-columnstore-quick-installer-for-a-single-server-system</a></p>
<p>2. Multi Server Quick Launch</p>
<p><a href="https://mariadb.com/kb/en/library/installing-and-configuring-a-multi-server-columnstore-system-12x/#mariadb-columnstore-quick-installer">https://mariadb.com/kb/en/library/installing-and-configuring-a-multi-server-columnstore-system-12x/#mariadb-columnstore-quick-installer</a></p>
<p>3. Amazon AMI Quick Launch</p>
<p><a href="https://mariadb.com/kb/en/library/installing-and-configuring-a-columnstore-system-using-the-amazon-ami/#mariadb-columnstore-one-step-quick-installer-script-quick_installer_amazonsh">https://mariadb.com/kb/en/library/installing-and-configuring-a-columnstore-system-using-the-amazon-ami/#mariadb-columnstore-one-step-quick-installer-script-quick_installer_amazonsh</a></p>
<h4 class="anchored_heading" id="columnstore-configuration-and-installation-tool">ColumnStore Configuration and Installation Tool</h4>
<p>MariaDB Columnstore System Configuration and Installation tool, 'postConfigure', will Configure the MariaDB Columnstore System and will perform a Package Installation of all of the Servers within the System that is being configured. It will prompt the user to for information like IP addresses, storage types, MariaDB Server, and system features. At the end, it will start the ColumnStore system. </p>
<p>NOTE:  When prompted for password, enter the non-user account password OR just hit enter if you
have configured password-less ssh keys on all nodes (Please see the “System
Administration Information” section earlier in this guide for more information on ssh keys.)</p>
<p>This tool is always run on the Performance Module #1. </p>
<p>Example uses of this script are shown in the Single and Multi Server Installations Guides.</p>
<pre class="fixed"># /usr/local/mariadb/columnstore/bin/postConfigure -h

This is the MariaDB ColumnStore System Configuration and Installation tool.
It will Configure the MariaDB ColumnStore System based on Operator inputs and
will perform a Package Installation of all of the Modules within the
System that is being configured.

IMPORTANT: This tool should only be run on a Performance Module Server,
           preferably Module #1

Instructions:

	Press 'enter' to accept a value in (), if available or
	Enter one of the options within [], if available, or
	Enter a new value


Usage: postConfigure [-h][-c][-u][-p][-qs][-qm][-qa][-port][-i][-n][-d][-sn][-pm-ip-addrs][-um-ip-addrs][-pm-count][-um-count]
   -h  Help
   -c  Config File to use to extract configuration data, default is Columnstore.xml.rpmsave
   -u  Upgrade, Install using the Config File from -c, default to Columnstore.xml.rpmsave
	    If ssh-keys aren't setup, you should provide passwords as command line arguments
   -p  Unix Password, used with no-prompting option
   -qs Quick Install - Single Server
   -qm Quick Install - Multi Server
   -port MariaDB ColumnStore Port Address
   -i Non-root Install directory, Only use for non-root installs
   -n Non-distributed install, meaning postConfigure will not install packages on remote nodes
   -d Distributed install, meaning postConfigure will install packages on remote nodes
   -sn System Name
   -pm-ip-addrs Performance Module IP Addresses xxx.xxx.xxx.xxx,xxx.xxx.xxx.xxx
   -um-ip-addrs User Module IP Addresses xxx.xxx.xxx.xxx,xxx.xxx.xxx.xxx
</pre>
    </div>


        
            <div id="subscribe" class="well well-small hide hidden-print"
                 data-subscribe-url="/kb/en/preparing-for-columnstore-installation-122/+subscriptions/add"
                 data-unsubscribe-url="/kb/en/preparing-for-columnstore-installation-122/+subscriptions/remove">
            </div>
        

        
        
    
        <div class="simple_section_nav">
            <ul class="nav nav-pills">
                
                    <li><a href="/kb/en/preparing-for-and-installing-columnstore-version-121/">
                        ← Preparing for ColumnStore Installation - 1.2.1
                    </a>
                    </li>
                
                
                    <li><a href="/kb/en/preparing-and-installing-mariadb-columnstore-12x/">
                        ↑ Preparing and Installing MariaDB ColumnStore 1.2.X ↑
                    </a>
                    </li>
                
                
                    <li class="pull-right"><a href="/kb/en/mariadb-columnstore-cluster-test-tool/">
                        MariaDB ColumnStore Cluster Test Tool →
                    </a>
                    </li>
                
            </ul>
        </div>
    

        

        
        <h2>Comments</h2>
        
    
    <div id="comments" data-node-id="8247" data-comments-url="/kb/en/preparing-for-columnstore-installation-122/+comments"
         data-reply-url="/kb/en/preparing-for-columnstore-installation-122/comments/post/">
        Comments loading...
    </div>

        

    </div>


                    <div id="content_disclaimer" class="graybox">
                        Content reproduced on this site is the property of its respective owners,
                        and this content is not reviewed in advance by MariaDB. The views, information and opinions
                        expressed by this content do not necessarily represent those of MariaDB or any other party.
                    </div>
                </div>
            </section>

            
                <div id="right_bar" class="col-md-2">
                    
    
        
        <ul class="section_navigation well well-small hidden-xs hidden-sm">
            
                <li class="parent"><a href="/kb/en/preparing-and-installing-mariadb-columnstore-12x/">
                    ↑ Preparing and Installing MariaDB ColumnStore 1.2.X ↑
                </a>
                </li>
            
            
                
                    <li>
                        <a href="/kb/en/preparing-for-columnstore-installation-120/">
                            
                            Preparing for ColumnStore Installation - 1.2.0
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/preparing-for-and-installing-columnstore-version-121/">
                            
                            Preparing for ColumnStore Installation - 1.2.1
                        </a>
                    </li>
                
            
                
                    <li class="active">
                        <span>Preparing for ColumnStore Installation - 1.2.2</span>
                        
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/mariadb-columnstore-cluster-test-tool/">
                            <span class="pull-right not_primary"></span>
                            MariaDB ColumnStore Cluster Test Tool
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/installing-and-configuring-a-single-server-columnstore-system-12x/">
                            
                            Installing and Configuring a Single Server ColumnStore System - 1.2.x
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/installing-and-configuring-a-multi-server-columnstore-system-12x/">
                            
                            Installing and Configuring a Multi Server ColumnStore System - 1.2.X
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/custom-installation-of-multi-server-columnstore-cluster/">
                            
                            Custom Installation of Multi-Server ColumnStore Cluster
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/preparing-for-columnstore-installation-125/">
                            
                            Preparing for ColumnStore Installation - 1.2.5
                        </a>
                    </li>
                
            
        </ul>
    
    

                </div>
            
        </div>
    </div>
</div>

<!-- Footer -->
<footer id="footer">
    <div class="footer">
        <div class="container">
            <div class="row">
                <div class="col-xs-12">
                    <ul class="list-inline text-center footer-nav">
                        <li>
                            <h5>
                                <a href="https://mariadb.com/products" title="Products">Products</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/services" title="Services">Services</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/pricing" title="Pricing">Pricing</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/resources" title="Resources">Resources</a>
                            </h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/about-us" title="About MariaDB">About Us</a></h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/download" title="Download">Download MariaDB</a></h5>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="row row-10">
                
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div id="block-footerformcontact" class="block block-block-content block-block-contentd754ee1b-3cc9-40e7-9ef4-f504f1197fb1">
                        
                            <h5 style="font-weight: 400;">Subscribe to our newsletter!</h5>
                            <script src="//app-sj15.marketo.com/js/forms2/js/forms2.min.js"></script><form id="mktoForm_1498"></form>
                            <script>
                                <!--//--><![CDATA[// ><!--
                                MktoForms2.loadForm("//app-sj15.marketo.com", "573-PXI-984", 1498);
                                //--><!]]]]><![CDATA[>
                                //--><!]]>
                            </script>
                        
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div class="footer-copyright">
                        <div class="text-center">
                            <ul class="list-inline no-margin">
                                <li>
                                    <a href="/legal" title="Legal">Legal</a>
                                </li>
                                <li>
                                    <a href="/privacy-policy" title="Privacy Policy">Privacy Policy</a>
                                </li>
                                <li>
                                    <a href="/cookie-policy/" title="Cookies">Cookie Policy</a>
                                </li>
                            </ul>
                            <p>Copyright &copy; 2024 MariaDB. All rights reserved.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
</footer>
</div>

<div id="ajax_loading">
    <img src="/kb/static/images/ajax-loader.a51c5608d01a.gif" />
</div>

    <!-- Google Tag Manager -->
    <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-MK2847"
                      height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
            '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MK2847');</script>
    <!-- End Google Tag Manager -->

</body>

<script type="text/javascript" src="/kb/static/js/main.1587e3a666fc.js" charset="utf-8"></script>

</html>