<!DOCTYPE html>
<html>
<head data-cookie-domain=""
      data-cookie-path="/">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="apple-touch-icon" sizes="180x180" href="/kb/static/images/favicons/apple-touch-icon.159e713979be.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/kb/static/images/favicons/favicon-32x32.bc0ac1d5d11e.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/kb/static/images/favicons/favicon-16x16.5801f8f0f34e.png">
    <link rel="shortcut icon" href="/kb/static/images/favicons/favicon.d122d305dee4.ico" type="image/x-icon" />

    <title>Semisynchronous Replication - Source - MariaDB Knowledge Base</title>

    <link href="/kb/static/css/main.b9e1e104f007.css" rel="stylesheet" type="text/css" />

    
        <meta name="robots" content="noindex, nofollow">
    

    <!-- FB Open Graph tags -->
    <meta property="og:title" content="Semisynchronous Replication - Source" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://mariadb.com/kb/en/semisynchronous-replication/+source/" />
    <meta property="og:image" content="http://mariadb.comaskmonty-logo.png" />
    <meta property="og:site_name" content="MariaDB KnowledgeBase" />
    <meta property="fb:admins" content="514852603" />
    <meta property="og:description" content="" />

    <meta name="description" content="" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="//fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet"/>
    
</head>
<body class="mpkb nodes autoresize nodes_source jqui" id="nodes_source">





<div id="menu-mobile" class="visible-sm visible-xs">

    <div>
        <div id="mobile-close-menu" class="text-right">
            <a href="javascript:void(0)" title="Close Menu" id="back-main" class="toggle-menu">X<span></span></a>
        </div>
    </div>
    <div class="mainmenu-mobile">
        <ul class="ls-none ul-menu">
            <li data-sub="submenu5"><a class="open-form-search" href="/kb/search/" title="Search">Search </a></li>
            <li data-sub="submenu0"><a href="/products" title="Products">Products</a><span class="arrow-main"></span></li>
            <li data-sub="submenu1"><a href="/services" title="Services">Services</a><span class="arrow-main"></span></li>
            <li data-sub="submenu2"><a href="/resources" title="Resources">Resources</a><span class="arrow-main"></span></li>
            <li data-sub="submenu3"><a href="/about-us" title="About">About</a><span class="arrow-main"></span></li>
            <li data-sub="submenu4"><a href="/contact" title="Contact">Contact</a></li>
        </ul>
    </div>

    <div class="nav-top-mobile">
        <div class="select-box form">

            <ul class="inline-block-md mb-none top-nav">
                <li>

                </li>
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/semisynchronous-replication/+source/"> Login</a>
                    </li>
                
            </ul>



        </div>
        <p class="text-center copyright">Copyright &copy; 2024 MariaDB. All rights reserved.</p>
    </div>
</div>
<div id="wrapper">
<div id="top-nav">
    <div class="container">
        <ul class="hidden-sm hidden-xs" >
            <li><a href="https://mariadb.com/kb/">Knowledge Base</a></li>
            <li><a href="https://mariadb.com/contact/">Contact</a></li>
            
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/semisynchronous-replication/+source/" rel="nofollow">Login</a>
                    </li>
                
            
            
            <li id="search-form">
                <form action="/kb/en/+search/" method="get" id="search-block-form" accept-charset="UTF-8">
                    <input id="search" title="Enter the terms you wish to search for."
                           placeholder="Search . . ." type="text"
                           name="q" value="" size="15" maxlength="128" class="form-text"
                           data-autocomplete-url="/kb/en/+search/autocomplete/">
                    <input type="hidden" name="quick" value="1" />
                    <input type="hidden" name="source" value="kb" />
                </form>
            </li>
            <li><a id="search-toggler" href="/kb/search/">Search</a></li>
            
        </ul>
    </div>
</div>
<div id="navbar-bottom" class="navbar">
    <div class="container">
        
        
        
        
        <div class="row">
            <div class="col-md-3 col-sm-9 col-xs-9">
                <a class="brand" href="/" title="MariaDB">
                    <img src="/kb/static/images/logo-2018-black.95f5978ae14d.png">
                </a>
            </div>
            <div class="col-md-9 hidden-sm hidden-xs">
                <div class="main-menu">
                    <ul id="main-menu" class="nav navbar-nav inline-block-sm">
    <li class="has-sub full-menu">
        <a href="/products" title="Products">Products</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/services" title="Services">Services</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/pricing" title="Pricing">Pricing</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/resources" title="Resources">Resources</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/about-us" title="About Us">About Us</a>
    </li>
    <li class="">
        <a class="button electric-eel small top-bar-right-download" href="/downloads/">Download</a>
    </li>
</ul>
                </div>
            </div>
            <div class="col-md-3 visible-sm visible-xs col-sm-3 col-xs-3 ps-rv">
                <div class="navbar-header text-right pull-right">
                    <button type="button" class="menu-control toggle-menu" id="open-menu">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="main">
    <div class="container">
        

        <div id="subheader1" class="clearfix">
            <div class="pull-left">
                
                <div id="breadcrumbs" class="breadcrumb">
                    <a href="/kb/en/">Knowledge Base</a>
                    


    
    » <a class="crumb" href="/kb/en/documentation/">MariaDB Server Documentation</a>
    

    
    » <a class="crumb" href="/kb/en/replication-cluster-multi-master/">High Availability &amp; Performance Tuning</a>
    

    
    » <a class="crumb" href="/kb/en/standard-replication/">MariaDB Replication</a>
    


    » <a class="node_link crumb" href="/kb/en/semisynchronous-replication/">Semisynchronous Replication</a>


                </div>
                
            </div>
        </div>
    </div>
    <div class="container" id="container-main">
        <div class="row">
            
            
                
                <aside id="sidebar-first" class="sidebar col-md-2 hidden-xs hidden-sm hidden-print">
                    
                        
                        <ul id="category_menu" class="nav nav-pills nav-stacked">
                            <li><a href="/kb/en/">Home</a></li>
                            
                                
                                    <li><a href="/kb/en/+questions/">Open Questions</a></li>
                                
                                <li><a href="/kb/en/documentation/">MariaDB Server</a></li>
                                <li><a href="/kb/en/maxscale/">MariaDB MaxScale</a></li>
                                <li><a href="/kb/en/mariadb-columnstore/">MariaDB ColumnStore</a></li>
                                <li><a href="/kb/en/connectors/">Connectors</a></li>
                            

                        </ul>
                    

                    
                        <div>
    

<div class="well well-small box actions"><div>

        <a class="btn btn-block btn-small" href="/kb/en/semisynchronous-replication/">Return to article</a>
    
</div>
</div>

</div>
                    

                    

































                </aside>
            
            
            
                
            
            
            <section id="content" class="limited_width col-md-10 clearfix">
                
                    <h1>Semisynchronous Replication - Source</h1>
                

                



                <div>
                    

    

    
    <div class="revision_info">
        <dl class="table">
            <dt>Revision</dt>
            <dd><a href="/kb/en/semisynchronous-replication/+r/135415/">135415</a></dd>
            <dt>User</dt>
            <dd>
<span class="user" id="user-2503">
<a href="/kb/user/id/2503" title="Guillaume Lefranc">Guillaume Lefranc</a>
</span></dd>
            <dt>Date</dt>
            <dd>

<span class="datetime" title="2024-02-22 09:08">2024-02-22 09:08</span></dd>
        </dl>
    </div>
    


    

    
        
        <textarea id="answer_source" class="creole_source autogrow">&lt;&lt;toc&gt;&gt;

== Description
[[standard-replication|Standard MariaDB replication]] is asynchronous, but MariaDB also provides a semisynchronous replication option.

With regular asynchronous replication, replicas request events from the primary&#39;s binary log whenever the replicas are ready. The primary does not wait for a replica to confirm that an event has been received.

With fully synchronous replication, all replicas are required to respond that they have received the events. See [[galera-cluster|Galera Cluster]].

Semisynchronous replication waits for just one replica to acknowledge that it has received and logged the events. 

Semisynchronous replication therefore comes with some negative performance impact, but increased data integrity. Since the delay is based on the roundtrip time to the replica and back, this delay is minimized for servers in close proximity over fast networks.

In MariaDB 10.3 and later, semisynchronous replication is built into the server, and is no longer a plugin so it can be enabled immediately in those versions. This removes some overhead and improves performance. See MDEV-13073 for more information.

In MariaDB 10.2 and before, semisynchronous replication requires the user to install a plugin on both the primary and the replica before it can be enabled.

== Installing the Plugin

&lt;&lt;product mariadb from=&#34;10.3.3&#34;&gt;&gt;
In MariaDB 10.3.3 and later, the Semisynchronous Replication feature is built into MariaDB server and is no longer provided by a plugin. **This means that installing the plugin is not supported on those versions.** In MariaDB 10.3.3 and later, you can skip right to [[#enabling-semisynchronous-replication|Enabling Semisynchronous Replication]].
&lt;&lt;/product&gt;&gt;

The semisynchronous replication plugin is actually two different plugins--one for the primary, and one for the replica. Shared libraries for both plugins are included with MariaDB. Although the plugins&#39; shared libraries distributed with MariaDB by default, the plugin is not actually installed by MariaDB by default prior to MariaDB 10.3.3. There are two methods that can be used to install the plugin with MariaDB.

The first method can be used to install the plugin without restarting the server. You can install the plugin dynamically by executing [[install-soname|INSTALL SONAME]] or [[install-plugin|INSTALL PLUGIN]].

For example, if it&#39;s a primary:

&lt;&lt;sql&gt;&gt;
INSTALL SONAME &#39;semisync_master&#39;;
&lt;&lt;/sql&gt;&gt;

Or if it&#39;s a replica:

&lt;&lt;sql&gt;&gt;
INSTALL SONAME &#39;semisync_slave&#39;;
&lt;&lt;/sql&gt;&gt;

The second method can be used to tell the server to load the plugin when it starts up. The plugin can be installed this way by providing the [[mysqld-options/#-plugin-load|--plugin-load]] or the [[mysqld-options/#-plugin-load-add|--plugin-load-add]] options. This can be specified as a command-line argument to [[mysqld-options|mysqld]] or it can be specified in a relevant server [[configuring-mariadb-with-option-files/#option-groups|option group]] in an [[configuring-mariadb-with-option-files|option file]].

For example, if it&#39;s a primary:

&lt;&lt;code&gt;&gt;
[mariadb]
...
plugin_load_add = semisync_master
&lt;&lt;/code&gt;&gt;

Or if it&#39;s a replica:

&lt;&lt;code&gt;&gt;
[mariadb]
...
plugin_load_add = semisync_slave
&lt;&lt;/code&gt;&gt;

== Uninstalling the Plugin

&lt;&lt;product mariadb from=&#34;10.3.3&#34;&gt;&gt;
In MariaDB 10.3.3 and later, the Semisynchronous Replication feature is built into MariaDB server and is no longer provided by a plugin. **This means that uninstalling the plugin is not supported on those versions.**
&lt;&lt;/product&gt;&gt;

You can uninstall the plugin dynamically by executing [[uninstall-soname|UNINSTALL SONAME]] or [[uninstall-plugin|UNINSTALL PLUGIN]].

For example, if it&#39;s a primary:

&lt;&lt;sql&gt;&gt;
UNINSTALL SONAME &#39;semisync_master&#39;;
&lt;&lt;/sql&gt;&gt;

Or if it&#39;s a replica:

&lt;&lt;sql&gt;&gt;
UNINSTALL SONAME &#39;semisync_slave&#39;;
&lt;&lt;/sql&gt;&gt;

If you installed the plugin by providing the [[mysqld-options/#-plugin-load|--plugin-load]] or the [[mysqld-options/#-plugin-load-add|--plugin-load-add]] options in a relevant server [[configuring-mariadb-with-option-files/#option-groups|option group]] in an [[configuring-mariadb-with-option-files|option file]], then those options should be removed to prevent the plugin from being loaded the next time the server is restarted.

== Enabling Semisynchronous Replication

Semisynchronous replication can be enabled by setting the relevant system variables on the primary and the replica.

If a server needs to be able to switch between acting as a primary and a replica, then you can enable both the primary and replica system variables on the server. For example, you might need to do this if [[maxscale|MariaDB MaxScale]] is being used to enable [[mariadb-maxscale-23-mariadb-monitor/#cluster-manipulation-operations|auto-failover or switchover]] with [[mariadb-maxscale-23-mariadb-monitor|MariaDB Monitor]].

=== Enabling Semisynchronous Replication on the Primary

Semisynchronous replication can be enabled on the primary by setting the [[#rpl_semi_sync_master_enabled|rpl_semi_sync_master_enabled]] system variable to ##ON##. It can be set dynamically with [[set/#global-session|SET GLOBAL]]. For example:

&lt;&lt;sql&gt;&gt;
SET GLOBAL rpl_semi_sync_master_enabled=ON;
&lt;&lt;/sql&gt;&gt;

It can also be set in a server [[configuring-mariadb-with-option-files/#option-groups|option group]] in an [[configuring-mariadb-with-option-files|option file]] prior to starting up the server. For example:

&lt;&lt;code&gt;&gt;
[mariadb]
...
rpl_semi_sync_master_enabled=ON
&lt;&lt;/code&gt;&gt;

=== Enabling Semisynchronous Replication on the Replica

Semisynchronous replication can be enabled on the replica by setting the [[#rpl_semi_sync_slave_enabled|rpl_semi_sync_slave_enabled]] system variable to ##ON##. It can be set dynamically with [[set/#global-session|SET GLOBAL]]. For example:

&lt;&lt;sql&gt;&gt;
SET GLOBAL rpl_semi_sync_slave_enabled=ON;
&lt;&lt;/sql&gt;&gt;

It can also be set in a server [[configuring-mariadb-with-option-files/#option-groups|option group]] in an [[configuring-mariadb-with-option-files|option file]] prior to starting up the server. For example:

&lt;&lt;code&gt;&gt;
[mariadb]
...
rpl_semi_sync_slave_enabled=ON
&lt;&lt;/code&gt;&gt;

When switching between semisynchronous replication and  asynchronous replication on a replica with 
 [[replication-threads/#threads-on-the-slave|replica IO threads]] already running, the replica I/O thread will need to be restarted. For example:

&lt;&lt;code&gt;&gt;
STOP SLAVE IO_THREAD;
START SLAVE IO_THREAD;
&lt;&lt;/code&gt;&gt;

If this is not done, then the replica IO thread will continue to use the previous setting.

== Configuring the Primary Timeout

In semisynchronous replication, only after the events have been written to the relay log and flushed does the replica acknowledge receipt of a transaction&#39;s events. If the replica does not acknowledge the transaction before a certain amount of time has passed, then a timeout occurs and the primary switches to asynchronous replication. This will be reflected in the primary&#39;s [[error-log|error log]] with messages like the following: 

&lt;&lt;code wrap=true&gt;&gt;
[Warning] Timeout waiting for reply of binlog (file: mariadb-1-bin.000002, pos: 538), semi-sync up to file , position 0.
[Note] Semi-sync replication switched OFF.
&lt;&lt;/code&gt;&gt;

When this occurs, the [[semisynchronous-replication-plugin-status-variables#rpl_semi_sync_master_status|Rpl_semi_sync_master_status]] status variable will be switched to ##OFF##.

When at least one semisynchronous replica catches up, semisynchronous replication is resumed. This will be reflected in the primary&#39;s [[error-log|error log]] with messages like the following: 

&lt;&lt;code wrap=true&gt;&gt;
[Note] Semi-sync replication switched ON with replica (server_id: 184137206) at (mariadb-1-bin.000002, 215076)
&lt;&lt;/code&gt;&gt;

When this occurs, the [[semisynchronous-replication-plugin-status-variables#rpl_semi_sync_master_status|Rpl_semi_sync_master_status]] status variable will be switched to ##ON##.

The number of times that semisynchronous replication has been switched off can be checked by looking at the value of the [[semisynchronous-replication-plugin-status-variables/#rpl_semi_sync_master_no_times|Rpl_semi_sync_master_no_times]] status variable.

If you see a lot of timeouts like this in your environment, then you may want to change the timeout period. The timeout period can be changed by setting the [[#rpl_semi_sync_master_timeout|rpl_semi_sync_master_timeout]] system variable. It can be set dynamically with [[set/#global-session|SET GLOBAL]]. For example:

&lt;&lt;sql&gt;&gt;
SET GLOBAL rpl_semi_sync_master_timeout=20000;
&lt;&lt;/sql&gt;&gt;

It can also be set in a server [[configuring-mariadb-with-option-files/#option-groups|option group]] in an [[configuring-mariadb-with-option-files|option file]] prior to starting up the server. For example:

&lt;&lt;code&gt;&gt;
[mariadb]
...
rpl_semi_sync_master_timeout=20000
&lt;&lt;/code&gt;&gt;

To determine a good value for the [[#rpl_semi_sync_master_timeout|rpl_semi_sync_master_timeout]] system variable, you may want to look at the values of the [[semisynchronous-replication-plugin-status-variables/#rpl_semi_sync_master_net_avg_wait_time|Rpl_semi_sync_master_net_avg_wait_time]] and [[semisynchronous-replication-plugin-status-variables/#rpl_semi_sync_master_tx_avg_wait_time|Rpl_semi_sync_master_tx_avg_wait_time]] status variables.

== Configuring the Primary Wait Point

In semisynchronous replication, there are two potential points at which the primary can wait for the replica acknowledge the receipt of a transaction&#39;s events. These two wait points have different advantages and disadvantages.

The wait point is configured by the [[#rpl_semi_sync_master_wait_point|rpl_semi_sync_master_wait_point]] system variable. The supported values are:

* ##AFTER_SYNC##
* ##AFTER_COMMIT##

It can be set dynamically with [[set/#global-session|SET GLOBAL]]. For example:

&lt;&lt;sql&gt;&gt;
SET GLOBAL rpl_semi_sync_master_wait_point=&#39;AFTER_SYNC&#39;;
&lt;&lt;/sql&gt;&gt;

It can also be set in a server [[configuring-mariadb-with-option-files/#option-groups|option group]] in an [[configuring-mariadb-with-option-files|option file]] prior to starting up the server. For example:

&lt;&lt;code&gt;&gt;
[mariadb]
...
rpl_semi_sync_master_wait_point=AFTER_SYNC
&lt;&lt;/code&gt;&gt;

When this variable is set to ##AFTER_SYNC##, the primary performs the following steps:

# Prepares the transaction in the storage engine.
# Syncs the transaction to the [[binary-log|binary log]].
# Waits for acknowledgement from the replica.
# Commits the transaction to the storage engine.
# Returns an acknowledgement to the client.

The effects of the ##AFTER_SYNC## wait point are:

* All clients see the same data on the primary at the same time; after acknowledgement by the replica and after being committed to the storage engine on the primary.

* If the primary crashes, then failover should be lossless, because all transactions committed on the primary would have been replicated to the replica.

* However, if the primary crashes, then its [[binary-log|binary log]] may also contain events for transactions that were prepared by the storage engine and written to the binary log, but that were never actually committed by the storage engine. As part of the server&#39;s [[heuristic-recovery-with-the-transaction-coordinator-log|automatic crash recovery]] process, the server may recover these prepared transactions when the server is restarted. This could cause the &#34;old&#34; crashed primary to become inconsistent with its former replicas when they have
been reconfigured to replace the old primary with a new one.
The old primary in such a scenario can be re-introduced only as a 
[[semisynchronous-replication/#rpl_semi_sync_slave_enabled|semisync slave]].
The server post-crash recovery of the server configured with ##rpl_semi_sync_slave_enabled = ON##
ensures through MDEV-21117 that the server will not have extra transactions.
The reconfigured as semisync replica server&#39;s binlog gets truncated to discard transactions proven
not to be committed, in any of their branches if they are multi-engine.
Truncation does not occur though when there exists a non-transactional group of events beyond the truncation position in which case recovery reports an error.
When the semisync replica recovery can&#39;t be carried out, the crashed primary may need to be rebuilt.

When this variable is set to ##AFTER_COMMIT##, the primary performs the following steps:

# Prepares the transaction in the storage engine.
# Syncs the transaction to the [[binary-log|binary log]].
# Commits the transaction to the storage engine.
# Waits for acknowledgement from the replica.
# Returns an acknowledgement to the client.

The effects of the ##AFTER_COMMIT## wait point are:

* Other clients may see the committed transaction before the committing client.

* If the primary crashes, then failover may involve some data loss, because the primary may have committed transactions that had not yet been acknowledged by the replicas.

== Versions

&lt;&lt;style class=&#34;darkheader-nospace-borders&#34; &gt;&gt;
|= Version |= Status |= Introduced
| N/A | N/A | MariaDB 10.3.3
| 1.0 | Stable | MariaDB 10.1.13
| 1.0 | Gamma | MariaDB 10.0.13
| 1.0 | Unknown | MariaDB 10.0.11
| 1.0 | N/A | MariaDB 5.5
&lt;&lt;/style&gt;&gt;

== System Variables

==== ##rpl_semi_sync_master_enabled##
* **Description:** Set to ##ON## to enable semi-synchronous replication primary. Disabled by default.
* **Commandline:** &lt;&lt;code&gt;&gt;--rpl-semi-sync-master-enabled[={0|1}]&lt;&lt;/code&gt;&gt;
* **Scope:** Global
* **Dynamic:** Yes
* **Data Type:** ##boolean##
* **Default Value:** ##OFF##
----

==== ##rpl_semi_sync_master_timeout##
* **Description:** The timeout value, in milliseconds, for semi-synchronous replication in the primary. If this timeout is exceeded in waiting on a commit for acknowledgement from a replica, the primary will revert to asynchronous replication.
** When a timeout occurs, the [[semisynchronous-replication-plugin-status-variables#rpl_semi_sync_master_status|Rpl_semi_sync_master_status]] status variable will also be switched to ##OFF##.
** See [[#configuring-the-primary-timeout|Configuring the Primary Timeout]] for more information.
* **Commandline:** &lt;&lt;code&gt;&gt;--rpl-semi-sync-master-timeout[=#]&lt;&lt;/code&gt;&gt;
* **Scope:** Global
* **Dynamic:** Yes
* **Data Type:** ##numeric##
* **Default Value:** ##10000## (10 seconds)
* **Range:** ##0## to ##18446744073709551615##
----

==== ##rpl_semi_sync_master_trace_level##
* **Description:** The tracing level for semi-sync replication. Four levels are defined:
** ##1##: General level, including for example time function failures.
** ##16##: More detailed level, with more verbose information.
** ##32##: Net wait level, including more information about network waits.
**##64##: Function level, including information about function entries and exits. 
* **Commandline:** &lt;&lt;code&gt;&gt;--rpl-semi-sync-master-trace-level[=#]&lt;&lt;/code&gt;&gt;
* **Scope:** Global
* **Dynamic:** Yes
* **Data Type:** ##numeric##
* **Default Value:** ##32##
* **Range:** ##0## to ##18446744073709551615##
----

==== ##rpl_semi_sync_master_wait_no_slave##
* **Description:** If set to ##ON##, the default, the replica count (recorded by [[semisynchronous-replication-plugin-status-variables#rpl_semi_sync_master_clients|Rpl_semi_sync_master_clients]]) may drop to zero, and the primary will still wait for the timeout period. If set to ##OFF##, the primary will revert to asynchronous replication as soon as the replica count drops to zero.
* **Commandline:** &lt;&lt;code&gt;&gt;--rpl-semi-sync-master-wait-no-slave[={0|1}]&lt;&lt;/code&gt;&gt;
* **Scope:** Global
* **Dynamic:** Yes
* **Data Type:** ##boolean##
* **Default Value:** ##ON##
----

==== ##rpl_semi_sync_master_wait_point##
* **Description:** Whether the transaction should wait for semi-sync acknowledgement after having synced the binlog (##AFTER_SYNC##), or after having committed in storage engine (##AFTER_COMMIT##, the default).
** When this variable is set to ##AFTER_SYNC##, the primary performs the following steps:
## Prepares the transaction in the storage engine.
## Syncs the transaction to the [[binary-log|binary log]].
## Waits for acknowledgement from the replica.
## Commits the transaction to the storage engine.
## Returns an acknowledgement to the client.
** When this variable is set to ##AFTER_COMMIT##, the primary performs the following steps:
## Prepares the transaction in the storage engine.
## Syncs the transaction to the [[binary-log|binary log]].
## Commits the transaction to the storage engine.
## Waits for acknowledgement from the replica.
## Returns an acknowledgement to the client.
** In MariaDB 10.1.2 and before, this system variable does not exist. However, in those versions, the primary waits for the acknowledgement from replicas at a point that is equivalent to ##AFTER_COMMIT##. 
** See [[#configuring-the-primary-wait-point|Configuring the Primary Wait Point]] for more information.
* **Commandline:** &lt;&lt;code&gt;&gt;--rpl-semi-sync-master-wait-point=value&lt;&lt;/code&gt;&gt;
* **Scope:** Global
* **Dynamic:** Yes
* **Data Type:** ##enum##
* **Default Value:** ##AFTER_COMMIT##
* **Valid Values:** ##AFTER_SYNC##, ##AFTER_COMMIT##
* **Introduced:** MariaDB 10.1.3
----

==== ##rpl_semi_sync_slave_delay_master##
* **Description:** Only write primary info file when ack is needed.
* **Commandline:** &lt;&lt;code&gt;&gt;--rpl-semi-sync-slave-delay-master[={0|1}]&lt;&lt;/code&gt;&gt;
* **Scope:** Global
* **Dynamic:** Yes
* **Data Type:** ##boolean##
* **Default Value:** ##OFF##
* **Introduced:** MariaDB 10.3.3
----

==== ##rpl_semi_sync_slave_enabled##
* **Description:** Set to ##ON## to enable semi-synchronous replication replica. Disabled by default.
* **Commandline:** &lt;&lt;code&gt;&gt;--rpl-semi-sync-slave-enabled[={0|1}]&lt;&lt;/code&gt;&gt;
* **Scope:** Global
* **Dynamic:** Yes
* **Data Type:** ##boolean##
* **Default Value:** ##OFF##
----

==== ##rpl_semi_sync_slave_kill_conn_timeout##
* **Description:** Timeout for the mysql connection used to kill the replica io_thread&#39;s connection on primary. This timeout comes into play when stop slave is executed.
* **Commandline:** &lt;&lt;code&gt;&gt;--rpl-semi-sync-slave-kill-conn-timeout[={0|1}]&lt;&lt;/code&gt;&gt;
* **Scope:** Global
* **Dynamic:** Yes
* **Data Type:** ##numeric##
* **Default Value:** ##5##
* **Range:** ##0## to ##4294967295##
* **Introduced:** MariaDB 10.3.3
----

==== ##rpl_semi_sync_slave_trace_level##
* **Description:** The tracing level for semi-sync replication. The levels are the same as for [[#rpl_semi_sync_master_trace_level|rpl_semi_sync_master_trace_level]].
* **Commandline:** &lt;&lt;code&gt;&gt;--rpl-semi-sync-slave-trace_level[=#]&lt;&lt;/code&gt;&gt;
* **Scope:** Global
* **Dynamic:** Yes
* **Data Type:** ##numeric##
* **Default Value:** ##32##
* **Range:** ##0## to ##18446744073709551615##
----

== Options

=== ##rpl_semi_sync_master##
* **Description:** Controls how the server should treat the plugin when the server starts up.
** Valid values are:
*** ##OFF## - Disables the plugin without removing it from the [[mysqlplugin-table|mysql.plugins]] table.
*** ##ON## - Enables the plugin. If the plugin cannot be initialized, then the server will still continue starting up, but the plugin will be disabled.
*** ##FORCE## - Enables the plugin. If the plugin cannot be initialized, then the server will fail to start with an error.
*** ##FORCE_PLUS_PERMANENT## - Enables the plugin. If the plugin cannot be initialized, then the server will fail to start with an error. In addition, the plugin cannot be uninstalled with [[uninstall-soname|UNINSTALL SONAME]] or [[uninstall-plugin|UNINSTALL PLUGIN]] while the server is running.
** See [[plugin-overview/#configuring-plugin-activation-at-server-startup|Plugin Overview: Configuring Plugin Activation at Server Startup]] for more information.
* **Commandline:** &lt;&lt;code&gt;&gt;--rpl-semi-sync-master=value&lt;&lt;/code&gt;&gt;
* **Data Type:** ##enumerated##
* **Default Value:** ##ON##
* **Valid Values:** ##OFF##, ##ON##, ##FORCE##, ##FORCE_PLUS_PERMANENT##
* **Removed:** MariaDB 10.3.3
----

=== ##rpl_semi_sync_slave##
* **Description:** Controls how the server should treat the plugin when the server starts up.
** Valid values are:
*** ##OFF## - Disables the plugin without removing it from the [[mysqlplugin-table|mysql.plugins]] table.
*** ##ON## - Enables the plugin. If the plugin cannot be initialized, then the server will still continue starting up, but the plugin will be disabled.
*** ##FORCE## - Enables the plugin. If the plugin cannot be initialized, then the server will fail to start with an error.
*** ##FORCE_PLUS_PERMANENT## - Enables the plugin. If the plugin cannot be initialized, then the server will fail to start with an error. In addition, the plugin cannot be uninstalled with [[uninstall-soname|UNINSTALL SONAME]] or [[uninstall-plugin|UNINSTALL PLUGIN]] while the server is running.
** See [[plugin-overview/#configuring-plugin-activation-at-server-startup|Plugin Overview: Configuring Plugin Activation at Server Startup]] for more information.
* **Commandline:** &lt;&lt;code&gt;&gt;--rpl-semi-sync-slave=value&lt;&lt;/code&gt;&gt;
* **Data Type:** ##enumerated##
* **Default Value:** ##ON##
* **Valid Values:** ##OFF##, ##ON##, ##FORCE##, ##FORCE_PLUS_PERMANENT##
* **Removed:** MariaDB 10.3.3
----

== Status Variables
For a list of status variables added when the plugin is installed, see [[semisynchronous-replication-plugin-status-variables|Semisynchronous Replication Plugin Status Variables]].</textarea>
    


                    <div id="content_disclaimer" class="graybox">
                        Content reproduced on this site is the property of its respective owners,
                        and this content is not reviewed in advance by MariaDB. The views, information and opinions
                        expressed by this content do not necessarily represent those of MariaDB or any other party.
                    </div>
                </div>
            </section>

            
        </div>
    </div>
</div>

<!-- Footer -->
<footer id="footer">
    <div class="footer">
        <div class="container">
            <div class="row">
                <div class="col-xs-12">
                    <ul class="list-inline text-center footer-nav">
                        <li>
                            <h5>
                                <a href="https://mariadb.com/products" title="Products">Products</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/services" title="Services">Services</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/pricing" title="Pricing">Pricing</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/resources" title="Resources">Resources</a>
                            </h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/about-us" title="About MariaDB">About Us</a></h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/download" title="Download">Download MariaDB</a></h5>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="row row-10">
                
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div id="block-footerformcontact" class="block block-block-content block-block-contentd754ee1b-3cc9-40e7-9ef4-f504f1197fb1">
                        
                            <h5 style="font-weight: 400;">Subscribe to our newsletter!</h5>
                            <script src="//app-sj15.marketo.com/js/forms2/js/forms2.min.js"></script><form id="mktoForm_1498"></form>
                            <script>
                                <!--//--><![CDATA[// ><!--
                                MktoForms2.loadForm("//app-sj15.marketo.com", "573-PXI-984", 1498);
                                //--><!]]]]><![CDATA[>
                                //--><!]]>
                            </script>
                        
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div class="footer-copyright">
                        <div class="text-center">
                            <ul class="list-inline no-margin">
                                <li>
                                    <a href="/legal" title="Legal">Legal</a>
                                </li>
                                <li>
                                    <a href="/privacy-policy" title="Privacy Policy">Privacy Policy</a>
                                </li>
                                <li>
                                    <a href="/cookie-policy/" title="Cookies">Cookie Policy</a>
                                </li>
                            </ul>
                            <p>Copyright &copy; 2024 MariaDB. All rights reserved.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
</footer>
</div>

<div id="ajax_loading">
    <img src="/kb/static/images/ajax-loader.a51c5608d01a.gif" />
</div>

    <!-- Google Tag Manager -->
    <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-MK2847"
                      height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
            '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MK2847');</script>
    <!-- End Google Tag Manager -->

</body>

<script type="text/javascript" src="/kb/static/js/main.fed4ec768178.js" charset="utf-8"></script>

</html>