<!DOCTYPE html>
<html>
<head data-cookie-domain=""
      data-cookie-path="/">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="apple-touch-icon" sizes="180x180" href="/kb/static/images/favicons/apple-touch-icon.159e713979be.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/kb/static/images/favicons/favicon-32x32.bc0ac1d5d11e.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/kb/static/images/favicons/favicon-16x16.5801f8f0f34e.png">
    <link rel="shortcut icon" href="/kb/static/images/favicons/favicon.d122d305dee4.ico" type="image/x-icon" />

    <title>Cassandra Storage Engine Overview - MariaDB Knowledge Base</title>

    <link href="/kb/static/css/main.f7633538c846.css" rel="stylesheet" type="text/css" />

    

    

    <!-- FB Open Graph tags -->
    <meta property="og:title" content="Cassandra Storage Engine Overview" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://mariadb.com/kb/en/cassandra-storage-engine-overview/" />
    <meta property="og:image" content="http://mariadb.comaskmonty-logo.png" />
    <meta property="og:site_name" content="MariaDB KnowledgeBase" />
    <meta property="fb:admins" content="514852603" />
    <meta property="og:description" content="Introduction to the Cassandra storage engine" />

    <meta name="description" content="Introduction to the Cassandra storage engine" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="//fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet"/>
    
</head>
<body class="mpkb nodes products nodes_view jqui" id="nodes_view">





<div id="menu-mobile" class="visible-sm visible-xs">

    <div>
        <div id="mobile-close-menu" class="text-right">
            <a href="javascript:void(0)" title="Close Menu" id="back-main" class="toggle-menu">X<span></span></a>
        </div>
    </div>
    <div class="mainmenu-mobile">
        <ul class="ls-none ul-menu">
            <li data-sub="submenu5"><a class="open-form-search" href="/kb/search/" title="Search">Search </a></li>
            <li data-sub="submenu0"><a href="/products" title="Products">Products</a><span class="arrow-main"></span></li>
            <li data-sub="submenu1"><a href="/services" title="Services">Services</a><span class="arrow-main"></span></li>
            <li data-sub="submenu2"><a href="/resources" title="Resources">Resources</a><span class="arrow-main"></span></li>
            <li data-sub="submenu3"><a href="/about-us" title="About">About</a><span class="arrow-main"></span></li>
            <li data-sub="submenu4"><a href="/contact" title="Contact">Contact</a></li>
        </ul>
    </div>

    <div class="nav-top-mobile">
        <div class="select-box form">

            <ul class="inline-block-md mb-none top-nav">
                <li>

                </li>
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/cassandra-storage-engine-overview/"> Login</a>
                    </li>
                
            </ul>



        </div>
        <p class="text-center copyright">Copyright &copy; 2024 MariaDB. All rights reserved.</p>
    </div>
</div>
<div class="violator-wrap d-none" id="top_violator">
    <div class="container">
        <div class="row">
            <div class="col-xs-12 col-sm-12">
                <div class="violator-outer">
                    <div class="violator-inner">
                        <div class="row">
                            <div class="col-xs-12 col-sm-9 col-lg-7 col-lg-offset-2" id="top_violator_content">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="content-link" target="_blank" rel="nofollow noreferrer">
                                    <span>The Ultimate Guide to High Availability with MariaDB</span>
                                </a>
                            </div>
                            <div class="col-xs-12 col-sm-3" id="top_violator_cta">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="btn btn-mariadb" target="_blank" rel="nofollow noreferrer">Download Now</a>
                            </div>
                        </div>
                    </div>
                    <button type="button" class="btn btn-link close-btn">
                        <svg xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 24 24" width="15px" height="15px"><path d="M 4.9902344 3.9902344 A 1.0001 1.0001 0 0 0 4.2929688 5.7070312 L 10.585938 12 L 4.2929688 18.292969 A 1.0001 1.0001 0 1 0 5.7070312 19.707031 L 12 13.414062 L 18.292969 19.707031 A 1.0001 1.0001 0 1 0 19.707031 18.292969 L 13.414062 12 L 19.707031 5.7070312 A 1.0001 1.0001 0 0 0 18.980469 3.9902344 A 1.0001 1.0001 0 0 0 18.292969 4.2929688 L 12 10.585938 L 5.7070312 4.2929688 A 1.0001 1.0001 0 0 0 4.9902344 3.9902344 z"/></svg>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="wrapper">
<div id="top-nav">
    <div class="container">
        <ul class="hidden-sm hidden-xs" >
            <li><a href="https://mariadb.com/kb/">Knowledge Base</a></li>
            <li><a href="https://mariadb.com/contact/">Contact</a></li>
            
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/cassandra-storage-engine-overview/" rel="nofollow">Login</a>
                    </li>
                
            
            
            <li id="search-form">
                <form action="/kb/en/+search/" method="get" id="search-block-form" accept-charset="UTF-8">
                    <input id="search" title="Enter the terms you wish to search for."
                           placeholder="Search . . ." type="text"
                           name="q" value="" size="15" maxlength="128" class="form-text"
                           data-autocomplete-url="/kb/en/+search/autocomplete/">
                    <input type="hidden" name="quick" value="1" />
                    <input type="hidden" name="source" value="kb" />
                </form>
            </li>
            <li><a id="search-toggler" href="/kb/search/">Search</a></li>
            
        </ul>
    </div>
</div>
<div id="navbar-bottom" class="navbar">
    <div class="container">
        
        
        
        
        <div class="row">
            <div class="col-md-3 col-sm-9 col-xs-9">
                <a class="brand" href="/" title="MariaDB">
                    <img src="/kb/static/images/logo-2018-black.95f5978ae14d.png">
                </a>
            </div>
            <div class="col-md-9 hidden-sm hidden-xs">
                <div class="main-menu">
                    <ul id="main-menu" class="nav navbar-nav inline-block-sm">
    <li class="has-sub full-menu">
        <a href="/products" title="Products">Products</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/services" title="Services">Services</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/pricing" title="Pricing">Pricing</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/resources" title="Resources">Resources</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/about-us" title="About Us">About Us</a>
    </li>
    <li class="">
        <a class="button electric-eel small top-bar-right-download" href="/downloads/">Download</a>
    </li>
</ul>
                </div>
            </div>
            <div class="col-md-3 visible-sm visible-xs col-sm-3 col-xs-3 ps-rv">
                <div class="navbar-header text-right pull-right">
                    <button type="button" class="menu-control toggle-menu" id="open-menu">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="main">
    <div class="container">
        

        <div id="subheader1" class="clearfix">
            <div class="pull-left">
                
                <div id="breadcrumbs" class="breadcrumb">
                    <a href="/kb/en/">Knowledge Base</a>
                    


    
    » <a class="crumb" href="/kb/en/documentation/">MariaDB Server Documentation</a>
    

    
    » <a class="crumb" href="/kb/en/columns-storage-engines-and-plugins/">Columns, Storage Engines, and Plugins</a>
    

    
    » <a class="crumb" href="/kb/en/storage-engines/">Storage Engines</a>
    

    
    » <a class="crumb" href="/kb/en/legacy-storage-engines/">Legacy Storage Engines</a>
    

    
    » <a class="crumb" href="/kb/en/cassandra/">Cassandra Storage Engine</a>
    


    » <a class="node_link crumb" href="/kb/en/cassandra-storage-engine-overview/">Cassandra Storage Engine Overview</a>


                </div>
                
            </div>
        </div>
    </div>
    <div class="container" id="container-main">
        <div class="row">
            
            
                
                <aside id="sidebar-first" class="sidebar col-md-2 hidden-xs hidden-sm hidden-print">
                    
                        
                        <ul id="category_menu" class="nav nav-pills nav-stacked">
                            <li><a href="/kb/en/">Home</a></li>
                            
                                
                                    <li><a href="/kb/en/+questions/">Open Questions</a></li>
                                
                                <li><a href="/kb/en/documentation/">MariaDB Server</a></li>
                                <li><a href="/kb/en/maxscale/">MariaDB MaxScale</a></li>
                                <li><a href="/kb/en/mariadb-columnstore/">MariaDB ColumnStore</a></li>
                                <li><a href="/kb/en/connectors/">Connectors</a></li>
                            

                        </ul>
                    

                    
<div>



<div class="well well-small box actions"><div>

        <a class="btn btn-block btn-blue btn-sm" href="/kb/en/cassandra-storage-engine-overview/+history" rel="nofollow">History</a>
        
        
        
        <a class="btn btn-block btn-blue btn-sm" href="/kb/en/cassandra-storage-engine-overview/+source/">Source</a>
        
        <a class="btn btn-block btn-blue btn-sm flag" href="/kb/en/cassandra-storage-engine-overview/+flag"
                data-flag-url="/kb/en/cassandra-storage-engine-overview/+flag" rel="nofollow">
                Flag as Spam / Inappropriate</a>
        
        <a class="btn btn-block btn-blue btn-sm" href="/kb/en/cassandra-storage-engine-overview/+translate/">
                Translate</a>
        

</div>
</div>





<div class="well well-small box node_info"><div>

    <dl>
        <dt>Created</dt>
        <dd>

<span class="datetime" title="2012-08-05 10:17">12 years, 2 months ago</span></dd>

        <dt>Modified</dt>
        <dd>

<span class="datetime" title="2020-07-15 12:31">4 years, 2 months ago</span></dd>

        <dt>Type</dt>
        <dd>article</dd>

        <dt>Status</dt>
        <dd>active</dd>

        <dt>License</dt>
        <dd>
            
                <a href="/kb/en/cassandra-storage-engine-overview/+license/">CC BY-SA / Gnu FDL</a>
            
        </dd>

        
    </dl>

    
    <ul class="rss_feeds">
        <li><a href="/kb/en/cassandra-storage-engine-overview/+history/feed/">
            History</a>
        </li>
        <li><a href="/kb/en/cassandra-storage-engine-overview/+comments/feed/">
            Comments</a>
        </li>
    </ul>
    

</div>
</div>





    
    
    

<div class="well well-small box attachments"><div><div class="edit_link pull-right"><a href="/kb/en/cassandra-storage-engine-overview/+edit/attachments/">Edit</a></div><h5>Attachments</h5></div><div>

        
            <ul>
                
                    <li><a href="/kb/en/cassandra-storage-engine-overview/+image/cassandra-se-overview">cassandra-se-overview</a>
                    </li>
                
                    <li><a href="/kb/en/cassandra-storage-engine-overview/+image/mariadb-and-cassandra">mariadb-and-cassandra</a>
                    </li>
                
            </ul>
        
    
</div>
</div>

    



    
    
        

<div class="well well-small box"><div><h5>Localized Versions</h5></div><div>

        <ul>
            
            <li><a href="/kb/it/cassandra/">Cassandra</a> [it]</li>
            
        </ul>
        
</div>
</div>

    



    
    

<div class="well well-small box"><div><h5>Product Versions</h5></div><div>

        <ul id="product_chooser">
            
                <li class="mariadb_from_10_0_1">
                    <label><input type="checkbox" data-product-class="mariadb_from_10_0_1"
                            >MariaDB starting with 10.0.1</label>
                </li>
            
                <li class="mariadb_5_5_27">
                    <label><input type="checkbox" data-product-class="mariadb_5_5_27"
                            >MariaDB 5.5.27</label>
                </li>
            
        </ul>
    
</div>
</div>






</div>


                    

































                </aside>
            
            
            
                
            
            
                
            
            <section id="content" class="limited_width col-md-8 clearfix">
                
                    <h1>Cassandra Storage Engine Overview</h1>
                

                



                <div>
                    
    

    
    
    

    <div class="node creole">
        
        
        


    
    <div class="answer formatted">
        <div class="cstm-style bluebox"><p>CassandraSE is no longer actively being developed and has been removed in <a href="/kb/en/what-is-mariadb-106/">MariaDB 10.6</a>. See <a href="https://jira.mariadb.org/browse/MDEV-23024">MDEV-23024</a>.</p>
</div>
<h2 class="anchored_heading" id="installing">Installing</h2>
<div class="mariadb_from_10_0_1 mariadb from_10_0_1 product"><h5 class="product_title">MariaDB starting with <a href="/kb/en/mariadb-1001-release-notes/">10.0.1</a></h5><p>Cassandra storage engine is a part of <a href="/kb/en/what-is-mariadb-100/">MariaDB 10.0</a>, starting from <a href="/kb/en/mariadb-1001-release-notes/">MariaDB
10.0.1</a>. </p>
</div><p>The Cassandra storage engine is included but is not installed/activated by
default.</p>
<p>If using the
<a href="https://downloads.mariadb.org/mariadb/repositories/">YUM repositories</a>
on Fedora, Red Hat, or CentOS, first install the Cassandra storage engine
package with:</p>
<pre class="fixed">yum install MariaDB-cassandra-engine
</pre><p>If using the Debian or Ubuntu repositories, the Cassandra plugin is in the main
MariaDB server package.</p>
<p>To install/activate the storage engine into MariaDB, issue the following
command:</p>
<pre class="fixed"><span class="n">install</span> <span class="k">soname</span> <span class="s1">&#39;ha_cassandra.so&#39;</span><span class="p">;</span> 
</pre><p>You can also activate the storage engine by using the <code>--plugin-load</code> command
on server startup.</p>
<div class="mariadb_5_5_27 mariadb 5_5_27 product"><h5 class="product_title">MariaDB <a href="/kb/en/mariadb-5527-release-notes/">5.5.27</a></h5><p>There was also a preview release based on <a href="/kb/en/what-is-mariadb-55/">MariaDB 5.5</a> with a source tarball and
x86_64 binaries for Ubuntu 12.04 Precise Pangolin. It is available from here:</p>
<ul start="1"><li><a href="http://downloads.mariadb.org/interstitial/mariadb-5.5.27/cassandra-preview/mariadb-5.5.25-linux-x86_64.tar.gz/from/http://ftp.osuosl.org/pub/mariadb">Binary Tarball</a>,
</li><li><a href="http://downloads.mariadb.org/interstitial/mariadb-5.5.27/cassandra-preview/mariadb-5.5.25.tar.gz/from/http://ftp.osuosl.org/pub/mariadb">Source Tarball</a>.
</li></ul>
<p>The Cassandra storage engine is not included in any regular <a href="/kb/en/what-is-mariadb-55/">MariaDB 5.5</a>
release.</p>
</div><h2 class="anchored_heading" id="introduction">Introduction</h2>
<p>The Cassandra Storage Engine allows access to data in a Cassandra cluster from
MariaDB. The overall architecture is shown in the picture below and is similar
to that of the NDB cluster storage engine.</p>
<p><img src="/kb/en/cassandra-storage-engine-overview/+image/cassandra-se-overview" alt="cassandra-se-overview" title="cassandra-se-overview"></p>
<p>You can access the same Cassandra cluster from multiple MariaDB instances,
provided each of them runs the Cassandra Storage Engine:</p>
<p><img src="/kb/en/cassandra-storage-engine-overview/+image/mariadb-and-cassandra" alt="mariadb-and-cassandra" title="mariadb-and-cassandra"></p>
<p>The primary goal of Cassandra SE (Storage Engine) is data integration between
the SQL and NoSQL worlds. Have you ever needed to:</p>
<ul start="1"><li>grab some of Cassandra's data from your web frontend, or SQL query?
</li><li>insert a few records into Cassandra from some part of your app?
</li></ul>
<p>Now, this is easily possible. Cassandra SE makes Cassandra's column family
appear as a table in MariaDB that you can insert to, update, and select from.
You can write joins against this table, it is possible to join data that's
stored in MariaDB with data that's stored in Cassandra.</p>
<h3 class="anchored_heading" id="versions-in-mariadb">Versions in MariaDB</h3>
<div class="cstm-style darkheader-nospace-borders centered"><table><tr><th>Cassandra SE Version</th><th>Introduced</th><th>Maturity</th></tr>
<tr><td>Cassandra SE 1.8</td><td><a href="/kb/en/mariadb-1001-release-notes/">MariaDB 10.0.1</a></td><td>Experimental</td></tr>
</table>
</div>
<h3 class="anchored_heading" id="what-about-cql">What about CQL?</h3>
<p>The Cassandra Query Language (CQL) is the best way to work with Cassandra.  It
resembles SQL on first glance, however the resemblance is very shallow. CQL
queries are tightly bound to the way Cassandra accesses its data internally.
For example, you can't have even the smallest join. In fact, adding a mere
<code>... AND non_indexed_column=1</code> into a <code>WHERE</code> clause is already invalid
CQL.</p>
<p>Our goal is to let one work in SQL instead of having to move between CQL and
SQL all the time.</p>
<h3 class="anchored_heading" id="does-this-make-cassandra-an-sql-database">Does this make Cassandra an SQL database?</h3>
<p>No. Cassandra SE is not suitable for running analytics-type queries that sift
through huge amounts of data in a Cassandra cluster. That task is better
handled by Hadoop-based tools like Apache Pig or Apache Hive. Cassandra SE is
rather a "window" from an SQL environment into NoSQL.</p>
<h2 class="anchored_heading" id="data-mapping">Data mapping</h2>
<p>Let's get specific. In order to access Cassandra's data from MariaDB, one needs
to create a table with <code>engine=cassandra</code>. The table will represent a view
of a Column Family in Cassandra and its definition will look like so: </p>
<pre class="fixed"><span class="k">set</span> <span class="n">cassandra_default_thrift_host</span><span class="o">=</span><span class="s1">&#39;192.168.0.10&#39;</span> <span class="c1">-- Cassandra&#39;s address. It can also</span>
                                                 <span class="c1">-- be specified as startup parameter</span>
                                                 <span class="c1">-- or on per-table basis</span>

<span class="k">create</span> <span class="k">table</span> <span class="n">cassandra_tbl</span>      <span class="c1">-- table name can be chosen at will</span>
<span class="p">(</span>
  <span class="n">rowkey</span>  <span class="k">type</span> <span class="k">PRIMARY</span> <span class="k">KEY</span><span class="p">,</span>     <span class="c1">-- represents Column Family&#39;s rowkey. Primary key</span>
                                <span class="c1">-- must be defined over this column.</span>

  <span class="n">column1</span> <span class="k">type</span><span class="p">,</span>                 <span class="c1">-- Cassandra&#39;s static columns can be mapped to </span>
  <span class="n">column2</span> <span class="k">type</span><span class="p">,</span>                 <span class="c1">-- regular SQL columns.</span>

  <span class="n">dynamic_cols</span> <span class="nb">blob</span> <span class="n">DYNAMIC_COLUMN_STORAGE</span><span class="o">=</span><span class="n">yes</span> <span class="c1">-- If you need to access Cassandra&#39;s</span>
                                               <span class="c1">-- dynamic columns, you can define</span>
                                               <span class="c1">-- a blob which will receive all of </span>
                                               <span class="c1">-- them, packed as MariaDB&#39;s dynamic</span>
                                               <span class="c1">-- columns.</span>
<span class="p">)</span> <span class="n">engine</span><span class="o">=</span><span class="n">cassandra</span>
  <span class="n">keyspace</span><span class="o">=</span> <span class="s1">&#39;cassandra_key_space&#39;</span>        <span class="c1">-- Cassandra&#39;s keyspace.columnFamily we  </span>
  <span class="n">column_family</span><span class="o">=</span><span class="s1">&#39;column_family_name&#39;</span><span class="p">;</span>    <span class="c1">-- are accessing.</span>
</pre><p>The name of the table can be arbitrary. However, primary key, column names, and
types must "match" those of Cassandra. </p>
<h3 class="anchored_heading" id="cassandras-rowkey">Cassandra's rowkey</h3>
<p>The table must define a column that corresponds to the Column Family's rowkey.</p>
<ul start="1"><li>If Cassandra's <code>rowkey</code> has an alias (or name), then MariaDB's column must
  have the same name.
<ul start="1"><li>Otherwise, it must be named "rowkey".
</li></ul>
</li><li>The type of MariaDB's column must match the validation_class of Cassandra's
  rowkey (datatype matching is covered in more detail below).
</li></ul>
<p>Note: Multi-column primary keys are currently not supported. Support may be
added in a future version, depending on whether there is a demand for it.</p>
<h3 class="anchored_heading" id="cassandras-static-columns">Cassandra's static columns</h3>
<p>Cassandra allows one to define a "static column family", where column metadata
is defined in the Column Family header and is obeyed by all records.</p>
<p>These "static" columns can be mapped to regular columns in MariaDB.  A static
column named 'foo' in Cassandra should have a counterpart named 'foo' in
MariaDB. The types must also match, they are covered below.</p>
<h3 class="anchored_heading" id="cassandras-dynamic-columns">Cassandra's dynamic columns</h3>
<p>Cassandra also allows individual rows to have their own sets of columns. In
other words, each row can have its own unique columns. </p>
<p>These columns can be accessed through MariaDB's
<a href="/kb/en/dynamic-columns/">Dynamic Columns</a> feature. To do so, one must define a
column:</p>
<ul start="1"><li>with an arbitrary name
</li><li>of type <code>blob</code>
</li><li>with the <code>DYNAMIC_COLUMN_STORAGE=yes</code> attribute
</li></ul>
<p>Here is an example:</p>
<pre class="fixed"><span class="n">dynamic_cols</span> <span class="nb">blob</span> <span class="n">DYNAMIC_COLUMN_STORAGE</span><span class="o">=</span><span class="n">yes</span>
</pre><p>Once define, one can access individual columns with the
<a href="/kb/en/dynamic-columns-in-mariadb-10/">new variant</a> of the Dynamic Column functions,
which now support string names (they used to support integers only).</p>
<h3 class="anchored_heading" id="super-columns">Super columns</h3>
<p>Cassandra's SuperColumns are not supported, there are currently no plans to
support them. </p>
<h3 class="anchored_heading" id="datatypes">Datatypes</h3>
<p>There is no direct 1-to-1 mapping between Cassandra's datatypes and
MySQL/MariaDB datatypes. Also, Cassandra's size limitations are often more
relaxed than MySQL/MariaDB's. For example, Cassandra's limit on rowkey length
is about 2G, while MySQL limits unique key length to about 1.5Kb.</p>
<p>The types must be mapped as follows:</p>
<div class="cstm-style darkheader-nospace-borders"><table><tr><th>Cassandra</th><th>MariaDB</th></tr>
<tr><td>blob</td><td>BLOB, VARBINARY(n)</td></tr>
<tr><td>ascii</td><td>BLOB, VARCHAR(n), use charset=latin1</td></tr>
<tr><td>text</td><td>BLOB, VARCHAR(n), use charset=utf8</td></tr>
<tr><td>varint</td><td>VARBINARY(n)</td></tr>
<tr><td>int</td><td>INT</td></tr>
<tr><td>bigint</td><td>BIGINT, TINY, SHORT (pick the one that will fit the real data)</td></tr>
<tr><td>uuid</td><td>CHAR(36), the UUID will be represented in text form on the MariaDB side</td></tr>
<tr><td>timestamp</td><td>TIMESTAMP (second precision), TIMESTAMP(6) (microsecond precision), BIGINT (gets verbatim Cassandra's 64-bit milliseconds-since-epoch)</td></tr>
<tr><td>boolean</td><td>BOOL</td></tr>
<tr><td>float</td><td>FLOAT</td></tr>
<tr><td>double</td><td>DOUBLE</td></tr>
<tr><td>decimal</td><td>VARBINARY(n)</td></tr>
<tr><td>counter</td><td>BIGINT, only reading is supported</td></tr>
</table>
</div><p>For types like "<code>VARBINARY(n)</code>", <code>n</code> should be chosen sufficiently large to
accommodate all the data that is encountered in the table.</p>
<h2 class="anchored_heading" id="command-mapping">Command mapping</h2>
<h3 class="anchored_heading" id="insert">INSERT</h3>
<p>Cassandra doesn't provide any practical way to make INSERT different from
UPDATE. Therefore, INSERT works as INSERT-or-UPDATE, it will overwrite the
data, if necessary.</p>
<p><code>INSERT ... SELECT</code> and multi-line INSERT will try to write data in batches.
Batch size is controlled by the <a href="/kb/en/cassandra-system-variables/#cassandra_insert_batch_size">cassandra_insert_batch_size</a> system
variable, which specifies the max. batch size in columns.</p>
<p>The status variables <a href="/kb/en/cassandra-status-variables/#cassandra_row_inserts">Cassandra_row_inserts</a> and
<a href="/kb/en/cassandra-status-variables/#cassandra_row_insert_batches">Cassandra_row_insert_batches</a> allow one to see whether inserts are actually
batched.</p>
<h3 class="anchored_heading" id="update">UPDATE</h3>
<p>UPDATE works like one would expect SQL's UPDATE command to work (i.e. changing
a primary key value will result in the old record being deleted and a new
record being inserted)</p>
<h3 class="anchored_heading" id="delete">DELETE</h3>
<ul start="1"><li><code>DELETE FROM cassandra_table</code> maps to the <code>truncate(column_family)</code> call.
</li></ul>
<ul start="1"><li>The DELETE with WHERE clause will do per-row deletions.
</li></ul>
<h3 class="anchored_heading" id="select">SELECT</h3>
<p>Generally, all SELECT statements work like one expects SQL to work. Conditions
in the form <code>primary_key=...</code> allow the server to construct query plans which
access Cassandra's rows with key lookups.</p>
<h4 class="anchored_heading" id="full-table-scan">Full table scan</h4>
<p>Full table scans are performed in a memory-efficient way. Cassandra SE performs
a full table scan as a series of batches, each of which reads not more than
<a href="/kb/en/cassandra-system-variables/#cassandra_rnd_batch_size">cassandra_rnd_batch_size</a> records.</p>
<h4 class="anchored_heading" id="batched-key-access-support">Batched Key Access support</h4>
<p>Cassandra supports Batched Key Access in no-association mode. This means that
it requires the SQL layer to do hashing, which means the following settings are
required:</p>
<ul start="1"><li>optimizer_switch='join_cache_hashed=on'
</li><li>join_cache_level=7|8
</li></ul>
<p>Cassandra SE is currently unable to make use of space in the join buffer (the
one whose size is controlled by
<a href="/kb/en/server-system-variables/#join_buffer_size">#join_buffer_size</a>). Instead, it
will limit read batches to reading not more than
<a href="/kb/en/cassandra-system-variables/#cassandra_multiget_batch_size">cassandra_multiget_batch_size</a>
at a time, and memory will be allocated on the heap.  </p>
<p>Note that the <a href="/kb/en/server-system-variables/#join_buffer_size">#join_buffer_size</a>
buffer is still needed by the SQL layer, so its value should still be increased
if you want to read in big batches.</p>
<p>It is possible to track the number of read batches, how many keys were
looked-up, and how many results were produced with these status variables:</p>
<div class="cstm-style darkheader-nospace-borders"><table><tr><th>Variable_name</th><th>Value</th></tr>
<tr><td><a href="/kb/en/cassandra-status-variables/#cassandra_multiget_reads">Cassandra_multiget_reads</a></td><td><code>0</code></td></tr>
<tr><td><a href="/kb/en/cassandra-status-variables/#cassandra_multiget_keys_scanned">Cassandra_multiget_keys_scanned</a></td><td><code>0</code></td></tr>
<tr><td><a href="/kb/en/cassandra-status-variables/#cassandra_multiget_rows_read">Cassandra_multiget_rows_read</a></td><td><code>0</code></td></tr>
</table>
</div><h2 class="anchored_heading" id="system-and-status-variables">System and status variables</h2>
<p>The following <a href="/kb/en/cassandra-system-variables/">system variables</a> are available:</p>
<div class="cstm-style darkheader-nospace-borders"><table><tr><th>Variable name</th><th>Description</th></tr>
<tr><td><a href="/kb/en/cassandra-system-variables/#cassandra_default_thrift_host">cassandra_default_thrift_host</a></td><td>Host to connect to, if not specified on per-table basis</td></tr>
<tr><td><a href="/kb/en/cassandra-system-variables/#cassandra_failure_retries">cassandra_failure_retries</a></td><td>Number of times to retry on timeout/unavailable failures</td></tr>
<tr><td><a href="/kb/en/cassandra-system-variables/#cassandra_insert_batch_size">cassandra_insert_batch_size</a></td><td>INSERT batch size</td></tr>
<tr><td><a href="/kb/en/cassandra-system-variables/#cassandra_multiget_batch_size">cassandra_multiget_batch_size</a></td><td>Batched Key Access batch size</td></tr>
<tr><td><a href="/kb/en/cassandra-system-variables/#cassandra_rnd_batch_size">cassandra_rnd_batch_size</a></td><td>Full table scan batch size</td></tr>
<tr><td><a href="/kb/en/cassandra-system-variables/#cassandra_read_consistency">cassandra_read_consistency</a></td><td>Consistency to use for reading</td></tr>
<tr><td><a href="/kb/en/cassandra-system-variables/#cassandra_write_consistency">cassandra_write_consistency</a></td><td>Consistency to use for writing</td></tr>
</table>
</div><p>The following <a href="/kb/en/cassandra-status-variables/">status variables</a> are available:</p>
<div class="cstm-style darkheader-nospace-borders"><table><tr><th>Variable name</th><th>Description</th></tr>
<tr><td><a href="/kb/en/cassandra-status-variables/#cassandra_row_inserts">Cassandra_row_inserts</a></td><td>Number of rows inserted</td></tr>
<tr><td><a href="/kb/en/cassandra-status-variables/#cassandra_row_insert_batches">Cassandra_row_insert_batches</a></td><td>Number of insert batches performed</td></tr>
<tr><td><a href="/kb/en/cassandra-status-variables/#cassandra_multiget_reads">Cassandra_multiget_reads</a></td><td>Number of read operations</td></tr>
<tr><td><a href="/kb/en/cassandra-status-variables/#cassandra_multiget_keys_scanned">Cassandra_multiget_keys_scanned</a></td><td>Number of keys we've made lookups for</td></tr>
<tr><td><a href="/kb/en/cassandra-status-variables/#cassandra_multiget_rows_read">Cassandra_multiget_rows_read</a></td><td>Number of rows actually read</td></tr>
<tr><td><a href="/kb/en/cassandra-status-variables/#cassandra_timeout_exceptions">Cassandra_timeout_exceptions</a></td><td>Number of Timeout exceptions we got from Cassandra</td></tr>
<tr><td><a href="/kb/en/cassandra-status-variables/#cassandra_unavailable_exceptions">Cassandra_unavailable_exceptions</a></td><td>Number of Unavailable exceptions we got from Cassandra</td></tr>
</table>
</div><h2 class="anchored_heading" id="a-note-about-cassandra-12">A note about Cassandra 1.2</h2>
<p>Cassandra 1.2 has slightly changed its data model, as described at
<a href="http://www.datastax.com/dev/blog/thrift-to-cql3">http://www.datastax.com/dev/blog/thrift-to-cql3</a>. This has caused some of
Thrift-based clients to no longer work (for example, here's a problem
experienced by Pig:
<a href="https://issues.apache.org/jira/browse/CASSANDRA-5234">CASSANDRA-5234</a>).</p>
<p>Currently, Cassandra SE is only able to access Cassandra 1.2's column families
that were defined <code>WITH COMPACT STORAGE</code> attribute.</p>
<h2 class="anchored_heading" id="see-also">See also</h2>
<ul start="1"><li>Slides from talk at Percona Live 2013:<a href="http://www.percona.com/live/mysql-conference-2013/sessions/mariadb-cassandra-interoperability">MariaDB Cassandra Interoperability</a>
</li><li><a href="https://jira.mariadb.org/browse/MDEV-431">MDEV-431</a> - JIRA task for Cassandra SE work
</li><li><a href="/kb/en/building-cassandra-storage-engine-for-packaging/">Instructions for creating binary tarball in MariaDB 5.5</a>
</li><li><a href="/kb/en/cassandra-storage-engine-future-plans/">Cassandra Storage Engine - Future Plans</a>
</li><li><a href="/kb/en/cassandra-storage-engine-use-example/">Cassandra Storage Engine - Use Example</a>
</li><li><a href="/kb/en/cassandra-storage-engine-issues/">Cassandra Storage Engine - Issues</a>
</li><li><a href="/kb/en/hbase-storage-engine/">HBase Storage Engine</a></li></ul>

    </div>


        
            <div id="subscribe" class="well well-small hide hidden-print"
                 data-subscribe-url="/kb/en/cassandra-storage-engine-overview/+subscriptions/add"
                 data-unsubscribe-url="/kb/en/cassandra-storage-engine-overview/+subscriptions/remove">
            </div>
        

        
        
    
        <div class="simple_section_nav">
            <ul class="nav nav-pills">
                
                
                    <li><a href="/kb/en/cassandra-storage-engine/">
                        ↑ Cassandra Storage Engine ↑
                    </a>
                    </li>
                
                
                    <li class="pull-right"><a href="/kb/en/cassandra-storage-engine-use-example/">
                        Cassandra Storage Engine Use Example →
                    </a>
                    </li>
                
            </ul>
        </div>
    

        

        
        <h2>Comments</h2>
        
    
    <div id="comments" data-node-id="2875" data-comments-url="/kb/en/cassandra-storage-engine-overview/+comments"
         data-reply-url="/kb/en/cassandra-storage-engine-overview/comments/post/">
        Comments loading...
    </div>

        

    </div>


                    <div id="content_disclaimer" class="graybox">
                        Content reproduced on this site is the property of its respective owners,
                        and this content is not reviewed in advance by MariaDB. The views, information and opinions
                        expressed by this content do not necessarily represent those of MariaDB or any other party.
                    </div>
                </div>
            </section>

            
                <div id="right_bar" class="col-md-2">
                    
    
        
        <ul class="section_navigation well well-small hidden-xs hidden-sm">
            
                <li class="parent"><a href="/kb/en/cassandra-storage-engine/">
                    ↑ Cassandra Storage Engine ↑
                </a>
                </li>
            
            
                
                    <li class="active">
                        <span>Cassandra Storage Engine Overview</span>
                        
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/cassandra-storage-engine-use-example/">
                            
                            Cassandra Storage Engine Use Example
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/cassandra-storage-engine-issues/">
                            
                            Cassandra Storage Engine Issues
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/cassandra-storage-engine-future-plans/">
                            
                            Cassandra Storage Engine Future Plans
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/handling-joins-with-cassandra/">
                            
                            Handling Joins With Cassandra
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/virtual-machine-to-test-the-cassandra-storage-engine/">
                            
                            Virtual Machine to Test the Cassandra Storage Engine
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/building-cassandra-storage-engine/">
                            
                            Building Cassandra Storage Engine
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/building-cassandra-storage-engine-for-packaging/">
                            
                            Building Cassandra Storage Engine for Packaging
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/cassandra-status-variables/">
                            
                            Cassandra Status Variables
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/cassandra-system-variables/">
                            
                            Cassandra System Variables
                        </a>
                    </li>
                
            
        </ul>
    
    

                </div>
            
        </div>
    </div>
</div>

<!-- Footer -->
<footer id="footer">
    <div class="footer">
        <div class="container">
            <div class="row">
                <div class="col-xs-12">
                    <ul class="list-inline text-center footer-nav">
                        <li>
                            <h5>
                                <a href="https://mariadb.com/products" title="Products">Products</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/services" title="Services">Services</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/pricing" title="Pricing">Pricing</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/resources" title="Resources">Resources</a>
                            </h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/about-us" title="About MariaDB">About Us</a></h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/download" title="Download">Download MariaDB</a></h5>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="row row-10">
                
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div id="block-footerformcontact" class="block block-block-content block-block-contentd754ee1b-3cc9-40e7-9ef4-f504f1197fb1">
                        
                            <h5 style="font-weight: 400;">Subscribe to our newsletter!</h5>
                            <script src="//app-sj15.marketo.com/js/forms2/js/forms2.min.js"></script><form id="mktoForm_1498"></form>
                            <script>
                                <!--//--><![CDATA[// ><!--
                                MktoForms2.loadForm("//app-sj15.marketo.com", "573-PXI-984", 1498);
                                //--><!]]]]><![CDATA[>
                                //--><!]]>
                            </script>
                        
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div class="footer-copyright">
                        <div class="text-center">
                            <ul class="list-inline no-margin">
                                <li>
                                    <a href="/legal" title="Legal">Legal</a>
                                </li>
                                <li>
                                    <a href="/privacy-policy" title="Privacy Policy">Privacy Policy</a>
                                </li>
                                <li>
                                    <a href="/cookie-policy/" title="Cookies">Cookie Policy</a>
                                </li>
                            </ul>
                            <p>Copyright &copy; 2024 MariaDB. All rights reserved.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
</footer>
</div>

<div id="ajax_loading">
    <img src="/kb/static/images/ajax-loader.a51c5608d01a.gif" />
</div>

    <!-- Google Tag Manager -->
    <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-MK2847"
                      height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
            '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MK2847');</script>
    <!-- End Google Tag Manager -->

</body>

<script type="text/javascript" src="/kb/static/js/main.1587e3a666fc.js" charset="utf-8"></script>

</html>