<?xml version="1.0" encoding="utf-8"?>
<rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title>MariaDB Knowledge Base Comments for: InnoDB Undo Log</title><link>https://mariadb.com/kb/en/innodb-undo-log/+comments/feed/</link><description></description><atom:link href="https://mariadb.com/kb/en/innodb-undo-log/+comments/feed/" rel="self"></atom:link><language>en-us</language><lastBuildDate>Mon, 28 Apr 2025 04:07:42 +0000</lastBuildDate><item><title>Re: Managing Undo Logs</title><link>https://mariadb.com/kb/en/innodb-undo-log/+comments/6366</link><description>&lt;p&gt;When the setting innodb_undo_tablespaces=0 is in effect, all undo log records will be stored in the InnoDB system tablespace, and the undo logs cannot be truncated or freed.&lt;/p&gt;
&lt;p&gt;Undo tablespace files undo001 through undo127 (when using innodb_undo_tablespaces) will be truncated automatically when innodb_undo_log_truncate=ON, when all undo log records in that undo tablespace has been processed. The innodb_max_undo_log_size is a soft limit. One undo tablespace at a time is chosen for truncation. During this time, further writes to the undo tablespace that has been chosen for truncation are prevented, and new transactions will write their undo log to the other undo tablespaces.&lt;/p&gt;
&lt;p&gt;Theoretically and conceptually, it could be cafe to remove undo tablespace files after a successful slow shutdown (innodb_fast_shutdown=0) really removed all undo log records. This cannot be guaranteed; there might exist transactions in XA PREPARE state. Also, database start-up would likely fail if the TRX_SYS page in the system tablespace points to non-existing undo tablespace pages.&lt;/p&gt;
&lt;p&gt;Starting with MariaDB Server 10.11, &lt;a href="https://jira.mariadb.org/browse/MDEV-19229"&gt;MDEV-19229&lt;/a&gt; allows you to change innodb_undo_tablespaces between server restarts. If the existing undo tablespaces are logically empty, this will reinitialize the desired number of undo tablespaces.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Marko Mäkelä</dc:creator><guid>https://mariadb.com/kb/en/innodb-undo-log/+comments/6366</guid></item><item><title>Managing Undo Logs</title><link>https://mariadb.com/kb/en/innodb-undo-log/+comments/6273</link><description>&lt;p&gt;It would be nice if this article had a few additional sub-sections.  For example, can you delete an undo log after a system is safely shut down?  Do these undo logs shrink?  Explaining the additional settings in context.  Can you move an undo log to a new directory when the server is shut down for example.  These are mostly operations questions, but the architecture questions should be answered as well.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Larry Adams</dc:creator><guid>https://mariadb.com/kb/en/innodb-undo-log/+comments/6273</guid></item></channel></rss>