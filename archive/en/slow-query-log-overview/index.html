<!DOCTYPE html>
<html>
<head data-cookie-domain=""
      data-cookie-path="/">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="apple-touch-icon" sizes="180x180" href="/kb/static/images/favicons/apple-touch-icon.159e713979be.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/kb/static/images/favicons/favicon-32x32.bc0ac1d5d11e.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/kb/static/images/favicons/favicon-16x16.5801f8f0f34e.png">
    <link rel="shortcut icon" href="/kb/static/images/favicons/favicon.d122d305dee4.ico" type="image/x-icon" />

    <title>Slow Query Log Overview - MariaDB Knowledge Base</title>

    <link href="/kb/static/css/main.f7633538c846.css" rel="stylesheet" type="text/css" />

    

    

    <!-- FB Open Graph tags -->
    <meta property="og:title" content="Slow Query Log Overview" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://mariadb.com/kb/en/slow-query-log-overview/" />
    <meta property="og:image" content="http://mariadb.comaskmonty-logo.png" />
    <meta property="og:site_name" content="MariaDB KnowledgeBase" />
    <meta property="fb:admins" content="514852603" />
    <meta property="og:description" content="A record of SQL queries that took a long time to perform." />

    <meta name="description" content="A record of SQL queries that took a long time to perform." />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="//fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet"/>
    
</head>
<body class="mpkb nodes products nodes_view jqui" id="nodes_view">





<div id="menu-mobile" class="visible-sm visible-xs">

    <div>
        <div id="mobile-close-menu" class="text-right">
            <a href="javascript:void(0)" title="Close Menu" id="back-main" class="toggle-menu">X<span></span></a>
        </div>
    </div>
    <div class="mainmenu-mobile">
        <ul class="ls-none ul-menu">
            <li data-sub="submenu5"><a class="open-form-search" href="/kb/search/" title="Search">Search </a></li>
            <li data-sub="submenu0"><a href="/products" title="Products">Products</a><span class="arrow-main"></span></li>
            <li data-sub="submenu1"><a href="/services" title="Services">Services</a><span class="arrow-main"></span></li>
            <li data-sub="submenu2"><a href="/resources" title="Resources">Resources</a><span class="arrow-main"></span></li>
            <li data-sub="submenu3"><a href="/about-us" title="About">About</a><span class="arrow-main"></span></li>
            <li data-sub="submenu4"><a href="/contact" title="Contact">Contact</a></li>
        </ul>
    </div>

    <div class="nav-top-mobile">
        <div class="select-box form">

            <ul class="inline-block-md mb-none top-nav">
                <li>

                </li>
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/slow-query-log-overview/"> Login</a>
                    </li>
                
            </ul>



        </div>
        <p class="text-center copyright">Copyright &copy; 2025 MariaDB. All rights reserved.</p>
    </div>
</div>
<div class="violator-wrap d-none" id="top_violator">
    <div class="container">
        <div class="row">
            <div class="col-xs-12 col-sm-12">
                <div class="violator-outer">
                    <div class="violator-inner">
                        <div class="row">
                            <div class="col-xs-12 col-sm-9 col-lg-7 col-lg-offset-2" id="top_violator_content">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="content-link" target="_blank" rel="nofollow noreferrer">
                                    <span>The Ultimate Guide to High Availability with MariaDB</span>
                                </a>
                            </div>
                            <div class="col-xs-12 col-sm-3" id="top_violator_cta">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="btn btn-mariadb" target="_blank" rel="nofollow noreferrer">Download Now</a>
                            </div>
                        </div>
                    </div>
                    <button type="button" class="btn btn-link close-btn">
                        <svg xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 24 24" width="15px" height="15px"><path d="M 4.9902344 3.9902344 A 1.0001 1.0001 0 0 0 4.2929688 5.7070312 L 10.585938 12 L 4.2929688 18.292969 A 1.0001 1.0001 0 1 0 5.7070312 19.707031 L 12 13.414062 L 18.292969 19.707031 A 1.0001 1.0001 0 1 0 19.707031 18.292969 L 13.414062 12 L 19.707031 5.7070312 A 1.0001 1.0001 0 0 0 18.980469 3.9902344 A 1.0001 1.0001 0 0 0 18.292969 4.2929688 L 12 10.585938 L 5.7070312 4.2929688 A 1.0001 1.0001 0 0 0 4.9902344 3.9902344 z"/></svg>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="wrapper">
<div id="top-nav">
    <div class="container">
        <ul class="hidden-sm hidden-xs" >
            <li><a href="https://mariadb.com/kb/">Knowledge Base</a></li>
            <li><a href="https://mariadb.com/contact/">Contact</a></li>
            
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/slow-query-log-overview/" rel="nofollow">Login</a>
                    </li>
                
            
            
            <li id="search-form">
                <form action="/kb/en/+search/" method="get" id="search-block-form" accept-charset="UTF-8">
                    <input id="search" title="Enter the terms you wish to search for."
                           placeholder="Search . . ." type="text"
                           name="q" value="" size="15" maxlength="128" class="form-text"
                           data-autocomplete-url="/kb/en/+search/autocomplete/">
                    <input type="hidden" name="quick" value="1" />
                    <input type="hidden" name="source" value="kb" />
                </form>
            </li>
            <li><a id="search-toggler" href="/kb/search/">Search</a></li>
            
        </ul>
    </div>
</div>
<div id="navbar-bottom" class="navbar">
    <div class="container">
        
        
        
        
        <div class="row">
            <div class="col-md-3 col-sm-9 col-xs-9">
                <a class="brand" href="/" title="MariaDB">
                    <img src="/kb/static/images/logo-2018-black.95f5978ae14d.png">
                </a>
            </div>
            <div class="col-md-9 hidden-sm hidden-xs">
                <div class="main-menu">
                    <ul id="main-menu" class="nav navbar-nav inline-block-sm">
    <li class="has-sub full-menu">
        <a href="/products" title="Products">Products</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/services" title="Services">Services</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/pricing" title="Pricing">Pricing</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/resources" title="Resources">Resources</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/about-us" title="About Us">About Us</a>
    </li>
    <li class="">
        <a class="button electric-eel small top-bar-right-download" href="/downloads/">Download</a>
    </li>
</ul>
                </div>
            </div>
            <div class="col-md-3 visible-sm visible-xs col-sm-3 col-xs-3 ps-rv">
                <div class="navbar-header text-right pull-right">
                    <button type="button" class="menu-control toggle-menu" id="open-menu">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="main">
    <div class="container">
        

        <div id="subheader1" class="clearfix">
            <div class="pull-left">
                
                <div id="breadcrumbs" class="breadcrumb">
                    <a href="/kb/en/">Knowledge Base</a>
                    


    
    » <a class="crumb" href="/kb/en/documentation/">MariaDB Server Documentation</a>
    

    
    » <a class="crumb" href="/kb/en/mariadb-administration/">MariaDB Administration</a>
    

    
    » <a class="crumb" href="/kb/en/server-monitoring-logs/">Server Monitoring &amp; Logs</a>
    

    
    » <a class="crumb" href="/kb/en/slow-query-log/">Slow Query Log</a>
    


    » <a class="node_link crumb" href="/kb/en/slow-query-log-overview/">Slow Query Log Overview</a>


                </div>
                
            </div>
        </div>
    </div>
    <div class="container" id="container-main">
        <div class="row">
            
            
                
                <aside id="sidebar-first" class="sidebar col-md-2 hidden-xs hidden-sm hidden-print">
                    
                        
                        <ul id="category_menu" class="nav nav-pills nav-stacked">
                            <li><a href="/kb/en/">Home</a></li>
                            
                                
                                    <li><a href="/kb/en/+questions/">Open Questions</a></li>
                                
                                <li><a href="/kb/en/documentation/">MariaDB Server</a></li>
                                <li><a href="/kb/en/maxscale/">MariaDB MaxScale</a></li>
                                <li><a href="/kb/en/mariadb-columnstore/">MariaDB ColumnStore</a></li>
                                <li><a href="/kb/en/connectors/">Connectors</a></li>
                            

                        </ul>
                    

                    
<div>



<div class="well well-small box actions"><div>

        <a class="btn btn-block btn-blue btn-sm" href="/kb/en/slow-query-log-overview/+history" rel="nofollow">History</a>
        
        
        
        <a class="btn btn-block btn-blue btn-sm" href="/kb/en/slow-query-log-overview/+source/">Source</a>
        
        <a class="btn btn-block btn-blue btn-sm flag" href="/kb/en/slow-query-log-overview/+flag"
                data-flag-url="/kb/en/slow-query-log-overview/+flag" rel="nofollow">
                Flag as Spam / Inappropriate</a>
        
        <a class="btn btn-block btn-blue btn-sm" href="/kb/en/slow-query-log-overview/+translate/">
                Translate</a>
        

</div>
</div>





<div class="well well-small box node_info"><div>

    <dl>
        <dt>Created</dt>
        <dd>

<span class="datetime" title="2013-05-01 11:26">11 years, 10 months ago</span></dd>

        <dt>Modified</dt>
        <dd>

<span class="datetime" title="2024-07-29 16:06">7 months, 3 weeks ago</span></dd>

        <dt>Type</dt>
        <dd>article</dd>

        <dt>Status</dt>
        <dd>active</dd>

        <dt>License</dt>
        <dd>
            
                <a href="/kb/en/slow-query-log-overview/+license/">CC BY-SA / Gnu FDL</a>
            
        </dd>

        
    </dl>

    
    <ul class="rss_feeds">
        <li><a href="/kb/en/slow-query-log-overview/+history/feed/">
            History</a>
        </li>
        <li><a href="/kb/en/slow-query-log-overview/+comments/feed/">
            Comments</a>
        </li>
    </ul>
    

</div>
</div>





    
    
    

<div class="well well-small box attachments"><div><div class="edit_link pull-right"><a href="/kb/en/slow-query-log-overview/+edit/attachments/">Edit</a></div><h5>Attachments</h5></div><div>

        
            <div class="no_data">No attachments exist</div>
        
    
</div>
</div>

    



    
    






</div>


                    

































                </aside>
            
            
            
                
            
            
                
            
            <section id="content" class="limited_width col-md-8 clearfix">
                
                    <h1>Slow Query Log Overview</h1>
                

                



                <div>
                    
    

    
    
    

    <div class="node creole">
        
        
        


    
    <div class="answer formatted">
        <div class="table_of_contents well well-small">
<h3>Contents</h3>
 <ol class="toc">

    <li class=""><a href="#enabling-the-slow-query-log" title="Enabling the Slow Query Log">Enabling the Slow Query Log</a></li>

    <li class=""><a href="#configuring-the-slow-query-log-filename" title="Configuring the Slow Query Log Filename">Configuring the Slow Query Log Filename</a></li>

    <li class=""><a href="#choosing-the-slow-query-log-output-destination" title="Choosing the Slow Query Log Output Destination">Choosing the Slow Query Log Output Destination</a>    <ol class="toc">

        <li class=""><a href="#writing-the-slow-query-log-to-a-file" title="Writing the Slow Query Log to a File">Writing the Slow Query Log to a File</a></li>

        <li class=""><a href="#writing-the-slow-query-log-to-a-table" title="Writing the Slow Query Log to a Table">Writing the Slow Query Log to a Table</a>    </ol>
</li>

    <li class=""><a href="#disabling-the-slow-query-log-for-a-session" title="Disabling the Slow Query Log for a Session">Disabling the Slow Query Log for a Session</a></li>

    <li class=""><a href="#disabling-the-slow-query-log-for-specific-statements" title="Disabling the Slow Query Log for Specific Statements">Disabling the Slow Query Log for Specific Statements</a></li>

    <li class=""><a href="#configuring-the-slow-query-log-time" title="Configuring the Slow Query Log Time">Configuring the Slow Query Log Time</a></li>

    <li class=""><a href="#logging-queries-that-dont-use-indexes" title="Logging Queries That Don&#39;t Use Indexes">Logging Queries That Don&#39;t Use Indexes</a></li>

    <li class=""><a href="#excluding-queries-that-examine-fewer-than-a-minimum-row-limit" title="Excluding Queries That Examine Fewer Than a Minimum Row Limit">Excluding Queries That Examine Fewer Than a Minimum Row Limit</a></li>

    <li class=""><a href="#logging-slow-administrative-statements" title="Logging Slow Administrative Statements">Logging Slow Administrative Statements</a></li>

    <li class=""><a href="#enabling-the-slow-query-log-for-specific-criteria" title="Enabling the Slow Query Log for Specific Criteria">Enabling the Slow Query Log for Specific Criteria</a></li>

    <li class=""><a href="#throttling-the-slow-query-log" title="Throttling the Slow Query Log">Throttling the Slow Query Log</a></li>

    <li class=""><a href="#configuring-the-slow-query-log-verbosity" title="Configuring the Slow Query Log Verbosity">Configuring the Slow Query Log Verbosity</a></li>

    <li class=""><a href="#viewing-the-slow-query-log" title="Viewing the Slow Query Log">Viewing the Slow Query Log</a></li>

    <li class=""><a href="#variables-related-to-the-slow-query-log" title="Variables Related to the Slow Query Log">Variables Related to the Slow Query Log</a></li>

    <li class=""><a href="#rotating-the-slow-query-log-on-unix-and-linux" title="Rotating the Slow Query Log on Unix and Linux">Rotating the Slow Query Log on Unix and Linux</a> </ol>
</li>
</div>
<p>The slow query log is a record of SQL queries that took a long time to perform.</p>
<p>Note that, if your queries contain user's passwords, the slow query log may contain passwords too. Thus, it should be protected.</p>
<p>The number of rows affected by the slow query are also recorded in the slow query log.</p>
<h2 class="anchored_heading" id="enabling-the-slow-query-log">Enabling the Slow Query Log</h2>
<p>The slow query log is disabled by default. </p>
<p>To enable the slow query log, set the <a href="/kb/en/server-system-variables/#slow_query_log">slow_query_log</a> system variable (or, from <a href="/kb/en/what-is-mariadb-1011/">MariaDB 10.11</a>, <a href="/kb/en/server-system-variables/#log_slow_query">log_slow_query</a>) to <code>1</code>. It can be changed dynamically with <a href="/kb/en/set/#global-session">SET GLOBAL</a>. For example:</p>
<pre class="fixed">SET GLOBAL slow_query_log=1;
</pre><p>It can also be set in a server <a href="/kb/en/configuring-mariadb-with-option-files/#option-groups">option group</a> in an <a href="/kb/en/configuring-mariadb-with-option-files/">option file</a> prior to starting up the server. For example:</p>
<pre class="fixed">[mariadb]
...
slow_query_log
</pre><h2 class="anchored_heading" id="configuring-the-slow-query-log-filename">Configuring the Slow Query Log Filename</h2>
<p>By default, the slow query log is written to <code>${hostname}-slow.log</code> in the <a href="/kb/en/server-system-variables/#datadir">datadir</a> directory. However, this can be changed.</p>
<p>One way to configure the slow query log filename is to set the <a href="/kb/en/server-system-variables/#slow_query_log_file">slow_query_log_file</a> system variable (or, from <a href="/kb/en/what-is-mariadb-1011/">MariaDB 10.11</a>, <a href="/kb/en/server-system-variables/#log_slow_query_file">log_slow_query_file</a>). It can be changed dynamically with <a href="/kb/en/set/#global-session">SET GLOBAL</a>. For example:</p>
<pre class="fixed">SET GLOBAL slow_query_log_file='mariadb-slow.log';
</pre><p>It can also be set in a server <a href="/kb/en/configuring-mariadb-with-option-files/#option-groups">option group</a> in an <a href="/kb/en/configuring-mariadb-with-option-files/">option file</a> prior to starting up the server. For example:</p>
<pre class="fixed">[mariadb]
...
slow_query_log
slow_query_log_file=mariadb-slow.log
</pre><p>If it is a relative path, then the <a href="/kb/en/server-system-variables/#slow_query_log_file">slow_query_log_file</a> is relative to the <a href="/kb/en/server-system-variables/#datadir">datadir</a> directory.</p>
<p>However, the <a href="/kb/en/server-system-variables/#slow_query_log_file">slow_query_log_file</a> system variable can also be an absolute path. For example:</p>
<pre class="fixed">[mariadb]
...
slow_query_log
slow_query_log_file=/var/log/mysql/mariadb-slow.log
</pre><p>Another way to configure the slow query log filename is to set the <a href="/kb/en/mariadbd-options/#-log-basename">log-basename</a> option, which configures MariaDB to use a common prefix for all log files (e.g. slow query log, <a href="/kb/en/general-query-log/">general query log</a>, <a href="/kb/en/error-log/">error log</a>, <a href="/kb/en/binary-log/">binary logs</a>, etc.). The slow query log filename will be built by adding <code>-slow.log</code> to this prefix. This option cannot be set dynamically. It can be set in a server <a href="/kb/en/configuring-mariadb-with-option-files/#option-groups">option group</a> in an <a href="/kb/en/configuring-mariadb-with-option-files/">option file</a> prior to starting up the server. For example:</p>
<pre class="fixed">[mariadb]
...
log-basename=mariadb
slow_query_log
</pre><p>The <a href="/kb/en/mysqld-options/#-log-basename">log-basename</a> cannot be an absolute path. The log file name is relative to the <a href="/kb/en/server-system-variables/#datadir">datadir</a> directory.</p>
<h2 class="anchored_heading" id="choosing-the-slow-query-log-output-destination">Choosing the Slow Query Log Output Destination</h2>
<p>The slow query log can either be written to a file on disk, or it can be written to the <a href="/kb/en/mysqlslow_log-table/">slow_log</a> table in the <a href="/kb/en/the-mysql-database-tables/">mysql</a> database. To choose the slow query log output destination, set the <a href="/kb/en/server-system-variables/#log_output">log_output</a> system variable.</p>
<h3 class="anchored_heading" id="writing-the-slow-query-log-to-a-file">Writing the Slow Query Log to a File</h3>
<p>The slow query log is output to a file by default. However, it can be explicitly chosen by setting the <a href="/kb/en/server-system-variables/#log_output">log_output</a> system variable to <code>FILE</code>. It can be changed dynamically with <a href="/kb/en/set/#global-session">SET GLOBAL</a>. For example:</p>
<pre class="fixed">SET GLOBAL log_output='FILE';
</pre><p>It can also be set in a server <a href="/kb/en/configuring-mariadb-with-option-files/#option-groups">option group</a> in an <a href="/kb/en/configuring-mariadb-with-option-files/">option file</a> prior to starting up the server. For example:</p>
<pre class="fixed">[mariadb]
...
log_output=FILE
slow_query_log
slow_query_log_file=slow-queries.log
</pre><h3 class="anchored_heading" id="writing-the-slow-query-log-to-a-table">Writing the Slow Query Log to a Table</h3>
<p>The slow query log can either be written to the <a href="/kb/en/mysqlslow_log-table/">slow_log</a> table in the <a href="/kb/en/the-mysql-database-tables/">mysql</a> database by setting the <a href="/kb/en/server-system-variables/#log_output">log_output</a> system variable to <code>TABLE</code>. It can be changed dynamically with <a href="/kb/en/set/#global-session">SET GLOBAL</a>. For example:</p>
<pre class="fixed">SET GLOBAL log_output='TABLE';
</pre><p>It can also be set in a server <a href="/kb/en/configuring-mariadb-with-option-files/#option-groups">option group</a> in an <a href="/kb/en/configuring-mariadb-with-option-files/">option file</a> prior to starting up the server. For example:</p>
<pre class="fixed">[mariadb]
...
log_output=TABLE
slow_query_log
</pre><p>Some rows in this table might look like this:</p>
<pre class="fixed">SELECT * FROM mysql.slow_log\G
...
*************************** 2. row ***************************
    start_time: 2014-11-11 07:56:28.721519
     user_host: root[root] @ localhost []
    query_time: 00:00:12.000215
     lock_time: 00:00:00.000000
     rows_sent: 1
 rows_examined: 0
            db: test
last_insert_id: 0
     insert_id: 0
     server_id: 1
      sql_text: SELECT SLEEP(12)
     thread_id: 74
...
</pre><p>See <a href="/kb/en/writing-logs-into-tables/">Writing logs into tables</a> for more information.</p>
<h2 class="anchored_heading" id="disabling-the-slow-query-log-for-a-session">Disabling the Slow Query Log for a Session</h2>
<p>A user can disable logging to the slow query log for a connection by setting the <a href="/kb/en/server-system-variables/#slow_query_log">slow_query_log</a> system variable (or, from <a href="/kb/en/what-is-mariadb-1011/">MariaDB 10.11</a>, <a href="/kb/en/server-system-variables/#log_slow_query">log_slow_query</a>) to <code>0</code>. For example:</p>
<pre class="fixed">SET SESSION slow_query_log=0;
</pre><h2 class="anchored_heading" id="disabling-the-slow-query-log-for-specific-statements">Disabling the Slow Query Log for Specific Statements</h2>
<p>It is possible to disable logging to the slow query log for specific types of statements by setting the <a href="/kb/en/server-system-variables/#log_slow_disabled_statements">log_slow_disabled_statements</a> system variable. This option cannot be set dynamically. It can be set in a server <a href="/kb/en/configuring-mariadb-with-option-files/#option-groups">option group</a> in an <a href="/kb/en/configuring-mariadb-with-option-files/">option file</a> prior to starting up the server. For example:</p>
<pre class="fixed">[mariadb]
...
log_output=FILE
general_log
general_log_file=queries.log
log_slow_disabled_statements='admin,call,slave,sp'
</pre><h2 class="anchored_heading" id="configuring-the-slow-query-log-time">Configuring the Slow Query Log Time</h2>
<p>The time that defines a slow query can be configured by setting the <a href="/kb/en/server-system-variables/#long_query_time">long_query_time</a> system variable (or, from <a href="/kb/en/what-is-mariadb-1011/">MariaDB 10.11</a>, <a href="/kb/en/server-system-variables/#log_slow_query_time">log_slow_query_time</a>). It uses a units of seconds, with an optional milliseconds component. The default value is <code>10</code>. It can be changed dynamically with <a href="/kb/en/set/#global-session">SET GLOBAL</a>. For example:</p>
<pre class="fixed">SET GLOBAL long_query_time=5.0;
</pre><p>It can also be set in a server <a href="/kb/en/configuring-mariadb-with-option-files/#option-groups">option group</a> in an <a href="/kb/en/configuring-mariadb-with-option-files/">option file</a> prior to starting up the server. For example:</p>
<pre class="fixed">[mariadb]
...
log_output=FILE
slow_query_log
slow_query_log_file=slow-queries.log
long_query_time=5.0
</pre><h2 class="anchored_heading" id="logging-queries-that-dont-use-indexes">Logging Queries That Don't Use Indexes</h2>
<p>It can be beneficial to log queries that don't use indexes to the slow query log, since queries that don't use indexes can usually be optimized either by adding an index or by doing a slight rewrite. The slow query log can be configured to log queries that don't use indexes regardless of their execution time by adding the option "not_using_index" to <a href="/kb/en/server-system-variables/#log_slow_filter">log_slow_filter</a> or setting the <a href="/kb/en/server-system-variables/#log_queries_not_using_indexes">log_queries_not_using_indexes</a> system variable to 1.  It can be changed dynamically with <a href="/kb/en/set/#global-session">SET GLOBAL</a>.
Some examples:</p>
<pre class="fixed">SET @@log_slow_filter=concat(@@log_slow_filter,&#34;,not_using_index&#34;);
SET GLOBAL log_queries_not_using_indexes=ON;
</pre><p>It can also be set in a server <a href="/kb/en/configuring-mariadb-with-option-files/#option-groups">option group</a> in an <a href="/kb/en/configuring-mariadb-with-option-files/">option file</a> prior to starting up the server. For example:</p>
<pre class="fixed">[mariadb]
...
log_output=FILE
slow_query_log
slow_query_log_file=slow-queries.log
long_query_time=5.0
log_queries_not_using_indexes=ON
</pre><p>As a significant number of queries can run quickly even without indexes, you can use the <a href="/kb/en/server-system-variables/#min_examined_row_limit">min_examined_row_limit</a> system variable (or, from <a href="/kb/en/what-is-mariadb-1011/">MariaDB 10.11</a>, <a href="/kb/en/server-system-variables/#log_slow_min_examined_row_limit">log_slow_min_examined_row_limit</a>) with <a href="/kb/en/server-system-variables/#log_queries_not_using_indexes">log_queries_not_using_indexes</a> to limit the logged queries to those having a material impact on the server.</p>
<h2 class="anchored_heading" id="excluding-queries-that-examine-fewer-than-a-minimum-row-limit">Excluding Queries That Examine Fewer Than a Minimum Row Limit</h2>
<p>It can be beneficial to exclude queries that examine fewer than a minimum number of rows from the log. This can be done by setting the <a href="/kb/en/server-system-variables/#min_examined_row_limit">min_examined_row_limit</a> system variable, or, from <a href="/kb/en/what-is-mariadb-1011/">MariaDB 10.11</a>, <a href="/kb/en/server-system-variables/#log_slow_min_examined_row_limit">log_slow_min_examined_row_limit</a>. It can be changed dynamically with <a href="/kb/en/set/#global-session">SET GLOBAL</a>. For example:</p>
<pre class="fixed">SET GLOBAL min_examined_row_limit=100000;
</pre><p>It can also be set in a server <a href="/kb/en/configuring-mariadb-with-option-files/#option-groups">option group</a> in an <a href="/kb/en/configuring-mariadb-with-option-files/">option file</a> prior to starting up the server. For example:</p>
<pre class="fixed">[mariadb]
...
log_output=FILE
slow_query_log
slow_query_log_file=slow-queries.log
long_query_time=5.0
min_examined_row_limit=100000
</pre><h2 class="anchored_heading" id="logging-slow-administrative-statements">Logging Slow Administrative Statements</h2>
<p>By default, the Slow Query Log logs administrative statements.  To disable logging of administrative statements, remove "admin" from the <a href="/kb/en/server-system-variables/#log_slow_filter">log_slow_filter</a> system variable or alternatively 
set the <a href="/kb/en/server-system-variables/#log_slow_admin_statements">log_slow_admin_statements</a> system variable to OFF.  The Slow Query Log considers the following statements administrative: <a href="/kb/en/alter-table/">ALTER TABLE</a>, <a href="/kb/en/analyze-table/">ANALYZE TABLE</a>, <a href="/kb/en/sql-commands-check-table/">CHECK TABLE</a>, <a href="/kb/en/create-index/">CREATE INDEX</a>, <a href="/kb/en/drop-index/">DROP INDEX</a>, <a href="/kb/en/optimize-table/">OPTIMIZE TABLE</a>, and <a href="/kb/en/repair-table/">REPAIR TABLE</a>.  In <a href="/kb/en/what-is-mariadb-103/">MariaDB 10.3</a> and later, this also includes <a href="/kb/en/alter-sequence/">ALTER SEQUENCE</a> statements.</p>
<p>You can dynamically enable this feature using a <a href="/kb/en/set/#global-session">SET GLOBAL</a> statement and setting it for just the current connection with LOCAL.  Some examples:</p>
<pre class="fixed">SET SESSION log_slow_filter=replace(@@log_slow_filter,&#34;admin&#34;,&#34;&#34;);
SET GLOBAL log_slow_admin_statements=ON;
</pre><p>It can also be set in a server <a href="/kb/en/configuring-mariadb-with-option-files/#option-groups">option group</a> in an <a href="/kb/en/configuring-mariadb-with-option-files/">option file</a> prior to starting up the server. For example:</p>
<pre class="fixed">[mariadb]
...
log_output=FILE
slow_query_log
slow_query_log_file=slow-queries.log
long_query_time=5.0
log_slow_admin_statements=ON
</pre><h2 class="anchored_heading" id="enabling-the-slow-query-log-for-specific-criteria">Enabling the Slow Query Log for Specific Criteria</h2>
<p>It is possible to enable logging to the slow query log for queries that meet specific criteria by configuring the <a href="/kb/en/server-system-variables/#log_slow_filter">log_slow_filter</a> system variable. It can be changed dynamically with <a href="/kb/en/set/#global-session">SET GLOBAL</a>. For example:</p>
<pre class="fixed">SET GLOBAL log_slow_filter='filesort,filesort_on_disk,tmp_table,tmp_table_on_disk';
</pre><p>It can also be set in a server <a href="/kb/en/configuring-mariadb-with-option-files/#option-groups">option group</a> in an <a href="/kb/en/configuring-mariadb-with-option-files/">option file</a> prior to starting up the server. For example:</p>
<pre class="fixed">[mariadb]
...
log_output=FILE
slow_query_log
slow_query_log_file=slow-queries.log
long_query_time=5.0
log_slow_filter=filesort,filesort_on_disk,tmp_table,tmp_table_on_disk
</pre><p>You can find all options for log_slow_filter at <a href="/kb/en/server-system-variables/#log_slow_filter">log_slow_filter system variable</a> or at <a href="/kb/en/slow-query-log-extended-statistics/#log_slow_filter">Slow Query Log Extended Statistics</a>.</p>
<h2 class="anchored_heading" id="throttling-the-slow-query-log">Throttling the Slow Query Log</h2>
<p>The slow query log can create a lot of I/O, so it can be beneficial to throttle it in some cases. The slow query log can be throttled by configuring the <a href="/kb/en/server-system-variables/#log_slow_rate_limit">log_slow_rate_limit</a> system variable. It can be changed dynamically with <a href="/kb/en/set/#global-session">SET GLOBAL</a>. For example:</p>
<pre class="fixed">SET GLOBAL log_slow_rate_limit=5;
</pre><p>It can also be set in a server <a href="/kb/en/configuring-mariadb-with-option-files/#option-groups">option group</a> in an <a href="/kb/en/configuring-mariadb-with-option-files/">option file</a> prior to starting up the server. For example:</p>
<pre class="fixed">[mariadb]
...
log_output=FILE
slow_query_log
slow_query_log_file=slow-queries.log
long_query_time=5.0
log_slow_rate_limit=5
</pre><h2 class="anchored_heading" id="configuring-the-slow-query-log-verbosity">Configuring the Slow Query Log Verbosity</h2>
<p>There are a few optional pieces of information that can be included in the slow query log for each query. This optional information can be included by configuring the <a href="/kb/en/server-system-variables/#log_slow_verbosity">log_slow_verbosity</a> system variable. It can be changed dynamically with <a href="/kb/en/set/#global-session">SET GLOBAL</a>. For example:</p>
<pre class="fixed">SET GLOBAL log_slow_verbosity='full';
</pre><p>It can also be set in a server <a href="/kb/en/configuring-mariadb-with-option-files/#option-groups">option group</a> in an <a href="/kb/en/configuring-mariadb-with-option-files/">option file</a> prior to starting up the server. For example:</p>
<pre class="fixed">[mariadb]
...
log_output=FILE
slow_query_log
slow_query_log_file=slow-queries.log
long_query_time=5.0
log_slow_verbosity=query_plan,explain,engine
</pre><p>It is possible to have <a href="/kb/en/explain-in-the-slow-query-log/">EXPLAIN output printed in the slow query log</a>.</p>
<h2 class="anchored_heading" id="viewing-the-slow-query-log">Viewing the Slow Query Log</h2>
<p>Slow query logs written to file can be viewed with any text editor, or you can use the <a href="/kb/en/mariadb-dumpslow/">mariadb-dumpslow</a> tool to ease the process by summarizing the information.</p>
<p>Queries that you find in the log are key queries to try to optimize by constructing a <a href="/kb/en/query-optimizations/">more efficient query</a> or by making <a href="/kb/en/optimization-and-indexes/">better use of indexes</a>. </p>
<p>For queries that appear in the log that cannot be optimized in the above ways, perhaps because they are simply very large selects, due to slow hardware, or very high lock/cpu/io contention, using shard/clustering/load balancing solutions, better hardware, or stats tables may help to improve these queries.</p>
<p>Slow query logs written to table can be viewed by querying the <a href="/kb/en/mysqlslow_log-table/">slow_log</a> table.</p>
<h2 class="anchored_heading" id="variables-related-to-the-slow-query-log">Variables Related to the Slow Query Log</h2>
<ul start="1"><li><a href="/kb/en/server-system-variables/#slow_query_log">slow_query_log</a> - enable/disable the slow query log.  Renamed to <a href="/kb/en/server-system-variables/#log_slow_query">log_slow_query</a> from <a href="/kb/en/what-is-mariadb-1011/">MariaDB 10.11</a>.
</li><li><a href="/kb/en/server-system-variables/#log_output">log_output</a> - how the output will be written
</li><li><a href="/kb/en/server-system-variables/#log_slow_admin_statements">log_slow_admin_statements</a>. Whether to log OPTIMIZE, ANALYZE, ALTER and other administrative statements to the slow log. Deprecated from <a href="/kb/en/what-is-mariadb-110/">MariaDB 11.0</a>, use <a href="/kb/en/server-system-variables/#log_slow_filter">log_slow_filter</a> without admin.
</li><li><a href="/kb/en/server-system-variables/#slow_query_log_file">slow_query_log_file</a> - name of the slow query log file.  Renamed to <a href="/kb/en/server-system-variables/#log_slow_query_file_name">log_slow_query_file_name</a> from <a href="/kb/en/mdb-10-11-0-rn/">MariaDB 10.11.0</a>.
</li><li><a href="/kb/en/server-system-variables/#long_query_time">long_query_time</a> - time in seconds/microseconds defining a slow query. Renamed to  <a href="/kb/en/server-system-variables/#log_slow_query_time">log_slow_query_time</a> from <a href="/kb/en/mdb-10-11-0-rn/">MariaDB 10.11.0</a>.
</li><li><a href="/kb/en/server-system-variables/#log_queries_not_using_indexes">log_queries_not_using_indexes</a> - whether to log queries that don't use indexes
</li><li><a href="/kb/en/server-system-variables/#log_slow_admin_statements">log_slow_admin_statements</a> - whether to log certain admin statements
</li><li><a href="/kb/en/server-system-variables/#log_slow_disabled_statements">log_slow_disabled_statements</a> - types of statements that should not be logged in the slow query log
</li><li><a href="/kb/en/server-system-variables/#min_examined_row_limit">min_examined_row_limit</a> - minimum rows a query must examine to be slow. Renamed to <a href="/kb/en/server-system-variables/#log_slow_min_examined_row_limit">log_slow_min_examined_row_limit</a> from <a href="/kb/en/mdb-10-11-0-rn/">MariaDB 10.11.0</a>.
</li><li><a href="/kb/en/server-system-variables/#log_slow_rate_limit">log_slow_rate_limit</a> - permits a fraction of slow queries to be logged
</li><li><a href="/kb/en/server-system-variables/#log_slow_verbosity">log_slow_verbosity</a> - amount of detail in the log
</li><li><a href="/kb/en/server-system-variables/#log_slow_filter">log_slow_filter</a> - limit which queries to log
</li><li><a href="/kb/en/replication-and-binary-log-system-variables/#log_slow_slave_statements">log_slow_slave_statements</a> - log slow statements executed by replica thread to the slow log if it is open.
</li></ul>
<h2 class="anchored_heading" id="rotating-the-slow-query-log-on-unix-and-linux">Rotating the Slow Query Log on Unix and Linux</h2>
<p>Unix and Linux distributions offer the <a href="https://linux.die.net/man/8/logrotate">logrotate</a> utility, which makes it very easy to rotate log files. See <a href="/kb/en/rotating-logs-on-unix-and-linux/">Rotating Logs on Unix and Linux</a> for more information on how to use this utility to rotate the slow query log.</p>

    </div>


        
            <div id="subscribe" class="well well-small hide hidden-print"
                 data-subscribe-url="/kb/en/slow-query-log-overview/+subscriptions/add"
                 data-unsubscribe-url="/kb/en/slow-query-log-overview/+subscriptions/remove">
            </div>
        

        
        
    
        <div class="simple_section_nav">
            <ul class="nav nav-pills">
                
                
                    <li><a href="/kb/en/slow-query-log/">
                        ↑ Slow Query Log ↑
                    </a>
                    </li>
                
                
                    <li class="pull-right"><a href="/kb/en/slow-query-log-extended-statistics/">
                        Slow Query Log Extended Statistics →
                    </a>
                    </li>
                
            </ul>
        </div>
    

        

        
        <h2>Comments</h2>
        
    
    <div id="comments" data-node-id="3376" data-comments-url="/kb/en/slow-query-log-overview/+comments"
         data-reply-url="/kb/en/slow-query-log-overview/comments/post/">
        Comments loading...
    </div>

        

    </div>


                    <div id="content_disclaimer" class="graybox">
                        Content reproduced on this site is the property of its respective owners,
                        and this content is not reviewed in advance by MariaDB. The views, information and opinions
                        expressed by this content do not necessarily represent those of MariaDB or any other party.
                    </div>
                </div>
            </section>

            
                <div id="right_bar" class="col-md-2">
                    
    
        
        <ul class="section_navigation well well-small hidden-xs hidden-sm">
            
                <li class="parent"><a href="/kb/en/slow-query-log/">
                    ↑ Slow Query Log ↑
                </a>
                </li>
            
            
                
                    <li class="active">
                        <span>Slow Query Log Overview</span>
                        
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/slow-query-log-extended-statistics/">
                            <span class="pull-right not_primary"></span>
                            Slow Query Log Extended Statistics
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/mariadb-dumpslow/">
                            <span class="pull-right not_primary"></span>
                            mariadb-dumpslow
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/explain-in-the-slow-query-log/">
                            
                            EXPLAIN in the Slow Query Log
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/log_slow_always_query_time-system-variable/">
                            
                            log_slow_always_query_time System Variable
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/mysql-slow_log-table/">
                            <span class="pull-right not_primary"></span>
                            mysql.slow_log Table
                        </a>
                    </li>
                
            
        </ul>
    
    

                </div>
            
        </div>
    </div>
</div>

<!-- Footer -->
<footer id="footer">
    <div class="footer">
        <div class="container">
            <div class="row">
                <div class="col-xs-12">
                    <ul class="list-inline text-center footer-nav">
                        <li>
                            <h5>
                                <a href="https://mariadb.com/products" title="Products">Products</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/services" title="Services">Services</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/pricing" title="Pricing">Pricing</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/resources" title="Resources">Resources</a>
                            </h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/about-us" title="About MariaDB">About Us</a></h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/download" title="Download">Download MariaDB</a></h5>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="row row-10">
                
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div id="block-footerformcontact" class="block block-block-content block-block-contentd754ee1b-3cc9-40e7-9ef4-f504f1197fb1">
                        
                            <h5 style="font-weight: 400;">Subscribe to our newsletter!</h5>
                            <script src="//app-sj15.marketo.com/js/forms2/js/forms2.min.js"></script><form id="mktoForm_1498"></form>
                            <script>
                                <!--//--><![CDATA[// ><!--
                                MktoForms2.loadForm("//app-sj15.marketo.com", "573-PXI-984", 1498);
                                //--><!]]]]><![CDATA[>
                                //--><!]]>
                            </script>
                        
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div class="footer-copyright">
                        <div class="text-center">
                            <ul class="list-inline no-margin">
                                <li>
                                    <a href="/legal" title="Legal">Legal</a>
                                </li>
                                <li>
                                    <a href="/privacy-policy" title="Privacy Policy">Privacy Policy</a>
                                </li>
                                <li>
                                    <a href="/cookie-policy/" title="Cookies">Cookie Policy</a>
                                </li>
                            </ul>
                            <p>Copyright &copy; 2025 MariaDB. All rights reserved.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
</footer>
</div>

<div id="ajax_loading">
    <img src="/kb/static/images/ajax-loader.a51c5608d01a.gif" />
</div>

    <!-- Google Tag Manager -->
    <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-MK2847"
                      height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
            '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MK2847');</script>
    <!-- End Google Tag Manager -->

</body>

<script type="text/javascript" src="/kb/static/js/main.1587e3a666fc.js" charset="utf-8"></script>

</html>