<!DOCTYPE html>
<html>
<head data-cookie-domain=""
      data-cookie-path="/">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="apple-touch-icon" sizes="180x180" href="/kb/static/images/favicons/apple-touch-icon.159e713979be.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/kb/static/images/favicons/favicon-32x32.bc0ac1d5d11e.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/kb/static/images/favicons/favicon-16x16.5801f8f0f34e.png">
    <link rel="shortcut icon" href="/kb/static/images/favicons/favicon.d122d305dee4.ico" type="image/x-icon" />

    <title>MariaDB ColumnStore software upgrade 1.1.7 GA to 1.2.5 GA - MariaDB Knowledge Base</title>

    <link href="/kb/static/css/main.9a0d7dcebefd.css" rel="stylesheet" type="text/css" />

    

    <!-- FB Open Graph tags -->
    <meta property="og:title" content="MariaDB ColumnStore software upgrade 1.1.7 GA to 1.2.5 GA" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://mariadb.com/kb/en/mariadb-columnstore-software-upgrade-117-ga-to-125-ga/" />
    <meta property="og:image" content="http://mariadb.comaskmonty-logo.png" />
    <meta property="og:site_name" content="MariaDB KnowledgeBase" />
    <meta property="fb:admins" content="514852603" />
    <meta property="og:description" content="
MariaDB ColumnStore software upgrade 1.1.7 GA to 1.2.5 GA
This upgrade also applies to 1.2.0 Alpha to 1.2.5 GA upgrades
Changes in 1.2.1 and later
libjemalloc dependency
Colu..." />

    <meta name="description" content="
MariaDB ColumnStore software upgrade 1.1.7 GA to 1.2.5 GA
This upgrade also applies to 1.2.0 Alpha to 1.2.5 GA upgrades
Changes in 1.2.1 and later
libjemalloc dependency
Colu..." />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="//fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet"/>
    
</head>
<body class="mpkb nodes products nodes_view jqui" id="nodes_view">





<div id="menu-mobile" class="visible-sm visible-xs">

    <div>
        <div id="mobile-close-menu" class="text-right">
            <a href="javascript:void(0)" title="Close Menu" id="back-main" class="toggle-menu">X<span></span></a>
        </div>
    </div>
    <div class="mainmenu-mobile">
        <ul class="ls-none ul-menu">
            <li data-sub="submenu5"><a class="open-form-search" href="/kb/search/" title="Search">Search </a></li>
            <li data-sub="submenu0"><a href="/products" title="Products">Products</a><span class="arrow-main"></span></li>
            <li data-sub="submenu1"><a href="/services" title="Services">Services</a><span class="arrow-main"></span></li>
            <li data-sub="submenu2"><a href="/resources" title="Resources">Resources</a><span class="arrow-main"></span></li>
            <li data-sub="submenu3"><a href="/about-us" title="About">About</a><span class="arrow-main"></span></li>
            <li data-sub="submenu4"><a href="/contact" title="Contact">Contact</a></li>
        </ul>
    </div>

    <div class="nav-top-mobile">
        <div class="select-box form">

            <ul class="inline-block-md mb-none top-nav">
                <li>

                </li>
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/mariadb-columnstore-software-upgrade-117-ga-to-125-ga/"> Login</a>
                    </li>
                
            </ul>



        </div>
        <p class="text-center copyright">Copyright &copy; 2023 MariaDB. All rights reserved.</p>
    </div>
</div>
<div id="wrapper">
<div id="top-nav">
    <div class="container">
        <ul class="hidden-sm hidden-xs" >
            <li><a href="https://mariadb.com/kb/">Knowledge Base</a></li>
            <li><a href="https://mariadb.com/contact/">Contact</a></li>
            
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/mariadb-columnstore-software-upgrade-117-ga-to-125-ga/" rel="nofollow">Login</a>
                    </li>
                
            
            
            <li id="search-form">
                <form action="/kb/en/+search/" method="get" id="search-block-form" accept-charset="UTF-8">
                    <input id="search" title="Enter the terms you wish to search for."
                           placeholder="Search . . ." type="text"
                           name="q" value="" size="15" maxlength="128" class="form-text"
                           data-autocomplete-url="/kb/en/+search/autocomplete/">
                    <input type="hidden" name="quick" value="1" />
                    <input type="hidden" name="source" value="kb" />
                </form>
            </li>
            <li><a id="search-toggler" href="/kb/search/">Search</a></li>
            
        </ul>
    </div>
</div>
<div id="navbar-bottom" class="navbar">
    <div class="container">
        
        
        
        
        <div class="row">
            <div class="col-md-3 col-sm-9 col-xs-9">
                <a class="brand" href="/" title="MariaDB">
                    <img src="/kb/static/images/logo-2018-black.95f5978ae14d.png">
                </a>
            </div>
            <div class="col-md-9 hidden-sm hidden-xs">
                <div class="main-menu">
                    <ul id="main-menu" class="nav navbar-nav inline-block-sm">
    <li class="has-sub full-menu">
        <a href="/products" title="Products">Products</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/services" title="Services">Services</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/pricing" title="Pricing">Pricing</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/resources" title="Resources">Resources</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/about-us" title="About Us">About Us</a>
    </li>
    <li class="">
        <a class="button electric-eel small top-bar-right-download" href="/downloads/">Download</a>
    </li>
</ul>
                </div>
            </div>
            <div class="col-md-3 visible-sm visible-xs col-sm-3 col-xs-3 ps-rv">
                <div class="navbar-header text-right pull-right">
                    <button type="button" class="menu-control toggle-menu" id="open-menu">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="main">
    <div class="container">
        

        <div id="subheader1" class="clearfix">
            <div class="pull-left">
                
                <div id="breadcrumbs" class="breadcrumb">
                    <a href="/kb/en/">Knowledge Base</a>
                    


    
    » <a class="crumb" href="/kb/en/documentation/">MariaDB Server Documentation</a>
    

    
    » <a class="crumb" href="/kb/en/columns-storage-engines-and-plugins/">Columns, Storage Engines, and Plugins</a>
    

    
    » <a class="crumb" href="/kb/en/storage-engines/">Storage Engines</a>
    

    
    » <a class="crumb" href="/kb/en/mariadb-columnstore/">MariaDB ColumnStore</a>
    

    
    » <a class="crumb" href="/kb/en/mariadb-columnstore-columnstore/">ColumnStore Upgrade Guides</a>
    

    
    » <a class="crumb" href="/kb/en/mariadb-columnstore-12-upgrades/">MariaDB ColumnStore 1.2 Upgrades</a>
    


    » <a class="node_link crumb" href="/kb/en/mariadb-columnstore-software-upgrade-117-ga-to-125-ga/">MariaDB ColumnStore software upgrade 1.1.7 GA to 1.2.5 GA</a>


                </div>
                
            </div>
        </div>
    </div>
    <div class="container" id="container-main">
        <div class="row">
            
            
                
                <aside id="sidebar-first" class="sidebar col-md-2 hidden-xs hidden-sm hidden-print">
                    
                        
                        <ul id="category_menu" class="nav nav-pills nav-stacked">
                            <li><a href="/kb/en/">Home</a></li>
                            
                                
                                    <li><a href="/kb/en/+questions/">Open Questions</a></li>
                                
                                <li><a href="/kb/en/documentation/">MariaDB Server</a></li>
                                <li><a href="/kb/en/maxscale/">MariaDB MaxScale</a></li>
                                <li><a href="/kb/en/mariadb-columnstore/">MariaDB ColumnStore</a></li>
                                <li><a href="/kb/en/connectors/">Connectors</a></li>
                            

                        </ul>
                    

                    
<div>



<div class="well well-small box actions"><div>

        <a class="btn btn-block btn-blue btn-sm" href="/kb/en/mariadb-columnstore-software-upgrade-117-ga-to-125-ga/+history" rel="nofollow">History</a>
        
        
        
        <a class="btn btn-block btn-blue btn-sm" href="/kb/en/mariadb-columnstore-software-upgrade-117-ga-to-125-ga/+source/">Source</a>
        
        <a class="btn btn-block btn-blue btn-sm flag" href="/kb/en/mariadb-columnstore-software-upgrade-117-ga-to-125-ga/+flag"
                data-flag-url="/kb/en/mariadb-columnstore-software-upgrade-117-ga-to-125-ga/+flag" rel="nofollow">
                Flag as Spam / Inappropriate</a>
        
        <a class="btn btn-block btn-blue btn-sm" href="/kb/en/mariadb-columnstore-software-upgrade-117-ga-to-125-ga/+translate/">
                Translate</a>
        

</div>
</div>





<div class="well well-small box node_info"><div>

    <dl>
        <dt>Created</dt>
        <dd>

<span class="datetime" title="2019-07-23 14:35">3 years, 11 months ago</span></dd>

        <dt>Modified</dt>
        <dd>

<span class="datetime" title="2019-07-24 15:42">3 years, 11 months ago</span></dd>

        <dt>Type</dt>
        <dd>article</dd>

        <dt>Status</dt>
        <dd>active</dd>

        <dt>License</dt>
        <dd>
            
                <a href="/kb/en/mariadb-columnstore-software-upgrade-117-ga-to-125-ga/+license/">CC BY-SA / Gnu FDL</a>
            
        </dd>

        
    </dl>

    
    <ul class="rss_feeds">
        <li><a href="/kb/en/mariadb-columnstore-software-upgrade-117-ga-to-125-ga/+history/feed/">
            History</a>
        </li>
        <li><a href="/kb/en/mariadb-columnstore-software-upgrade-117-ga-to-125-ga/+comments/feed/">
            Comments</a>
        </li>
    </ul>
    

</div>
</div>





    
    
    

<div class="well well-small box attachments"><div><div class="edit_link pull-right"><a href="/kb/en/mariadb-columnstore-software-upgrade-117-ga-to-125-ga/+edit/attachments/">Edit</a></div><h5>Attachments</h5></div><div>

        
            <div class="no_data">No attachments exist</div>
        
    
</div>
</div>

    



    
    






</div>


                    

































                </aside>
            
            
            
                
            
            
                
            
            <section id="content" class="limited_width col-md-8 clearfix">
                
                    <h1>MariaDB ColumnStore software upgrade 1.1.7 GA to 1.2.5 GA</h1>
                

                



                <div>
                    
    

    
    
    

    <div class="node creole">
        
        
        


    
    <div class="answer formatted">
        <div class="table_of_contents standalone"> <ol class="toc">

    <li class=""><a href="#mariadb-columnstore-software-upgrade-117-ga-to-125-ga" title="MariaDB ColumnStore software upgrade 1.1.7 GA to 1.2.5 GA">MariaDB ColumnStore software upgrade 1.1.7 GA to 1.2.5 GA</a>    <ol class="toc">

        <li class=""><a href="#changes-in-121-and-later" title="Changes in 1.2.1 and later">Changes in 1.2.1 and later</a>        <ol class="toc">

            <li class=""><a href="#libjemalloc-dependency" title="libjemalloc dependency">libjemalloc dependency</a></li>

            <li class=""><a href="#non-distributed-is-the-default-distribution-mode-in-postconfigure" title="Non-distributed is the default distribution mode in postConfigure">Non-distributed is the default distribution mode in postConfigure</a></li>

            <li class=""><a href="#non-root-user-sudo-setup" title="Non-root user sudo setup">Non-root user sudo setup</a></li>

            <li class=""><a href="#running-the-mysql_upgrade-script" title="Running the mysql_upgrade script">Running the mysql_upgrade script</a></li>

            <li class=""><a href="#executing-the-upgrade-stored-procedure" title="Executing the upgrade stored procedure">Executing the upgrade stored procedure</a>        </ol>
</li>

        <li class=""><a href="#setup" title="Setup">Setup</a>        <ol class="toc">

            <li class=""><a href="#columnstorexml-mycnf" title="Columnstore.xml / my.cnf">Columnstore.xml / my.cnf</a></li>

            <li class=""><a href="#mariadb-root-user-database-password" title="MariaDB root user database password">MariaDB root user database password</a>        </ol>
</li>

        <li class=""><a href="#choosing-the-type-of-upgrade" title="Choosing the type of upgrade">Choosing the type of upgrade</a>        <ol class="toc">

            <li class=""><a href="#root-user-installs" title="Root User Installs">Root User Installs</a>            <ol class="toc">

                <li class=""><a href="#upgrading-mariadb-columnstore-using-the-tarball-of-rpms-distributed-mode" title="Upgrading MariaDB ColumnStore using the tarball of RPMs (distributed mode)">Upgrading MariaDB ColumnStore using the tarball of RPMs (distributed mode)</a></li>

                <li class=""><a href="#upgrading-mariadb-columnstore-using-rpm-package-repositories-non-distributed-mode" title="Upgrading MariaDB ColumnStore using RPM Package Repositories (non-distributed mode)">Upgrading MariaDB ColumnStore using RPM Package Repositories (non-distributed mode)</a></li>

                <li class=""><a href="#upgrading-mariadb-columnstore-using-the-binary-tarball-distributed-mode" title="Upgrading MariaDB ColumnStore using the binary tarball (distributed mode)">Upgrading MariaDB ColumnStore using the binary tarball (distributed mode)</a></li>

                <li class=""><a href="#upgrading-mariadb-columnstore-using-the-deb-tarball-distributed-mode" title="Upgrading MariaDB ColumnStore using the DEB tarball (distributed mode)">Upgrading MariaDB ColumnStore using the DEB tarball (distributed mode)</a></li>

                <li class=""><a href="#upgrading-mariadb-columnstore-using-deb-package-repositories-non-distributed-mode" title="Upgrading MariaDB ColumnStore using DEB Package Repositories (non-distributed mode)">Upgrading MariaDB ColumnStore using DEB Package Repositories (non-distributed mode)</a>            </ol>
</li>

            <li class=""><a href="#non-root-user-installs" title="Non-Root User Installs">Non-Root User Installs</a>            <ol class="toc">

                <li class=""><a href="#upgrade-mariadb-columnstore-from-the-binary-tarball-without-sudo-access-non-distributed-mode" title="Upgrade MariaDB ColumnStore from the binary tarball without sudo access (non-distributed mode)">Upgrade MariaDB ColumnStore from the binary tarball without sudo access (non-distributed mode)</a></li>

                <li class=""><a href="#upgrade-mariadb-columnstore-from-the-binary-tarball-distributed-mode" title="Upgrade MariaDB ColumnStore from the binary tarball (distributed mode)">Upgrade MariaDB ColumnStore from the binary tarball (distributed mode)</a>            </ol>
        </ol>
    </ol>
 </ol>
</li>
</div>
<h2 class="anchored_heading" id="mariadb-columnstore-software-upgrade-117-ga-to-125-ga">MariaDB ColumnStore software upgrade 1.1.7 GA to 1.2.5 GA</h2>
<p>This upgrade also applies to 1.2.0 Alpha to 1.2.5 GA upgrades</p>
<h3 class="anchored_heading" id="changes-in-121-and-later">Changes in 1.2.1 and later</h3>
<h4 class="anchored_heading" id="libjemalloc-dependency">libjemalloc dependency</h4>
<p>ColumnStore 1.2.3 onwards requires libjemalloc to be installed. For Ubuntu &amp; Debian based distributions this is installed using the package "libjemalloc1" in the standard repositories.</p>
<p>For CentOS the package is in RedHat's EPEL repository:</p>
<pre class="fixed">sudo yum -y install epel-release
sudo yum install jemalloc
</pre><h4 class="anchored_heading" id="non-distributed-is-the-default-distribution-mode-in-postconfigure">Non-distributed is the default distribution mode in postConfigure</h4>
<p>The default distribution mode has changed from 'distributed' to 'non-distributed'.  During an upgrade, however, the default is to use the distribution mode used in the original installation.  The options '-d' and '-n' can always be used to override the default.</p>
<h4 class="anchored_heading" id="non-root-user-sudo-setup">Non-root user sudo setup</h4>
<p>Root-level permissions are no longer required to install or upgrade ColumnStore for some types of installations.  Installations requiring some level of sudo access, and the instructions, are listed here: <a href="https://mariadb.com/kb/en/library/preparing-for-columnstore-installation-121/#update-sudo-configuration-if-needed-by-root-user">https://mariadb.com/kb/en/library/preparing-for-columnstore-installation-121/#update-sudo-configuration-if-needed-by-root-user</a></p>
<h4 class="anchored_heading" id="running-the-mysql_upgrade-script">Running the mysql_upgrade script</h4>
<p>As part of the upgrade process to 1.2.5, the user is required to run the mysql_upgrade script on all of the following nodes.</p>
<ul start="1"><li>All User Modules on a system configured with separate User and Performance Modules
</li><li>All Performance Modules on a system configured with separate User and Performance Modules and Local Query Feature is enabled
</li><li>All Performance Modules on a system configured with combined User and Performance Modules
</li></ul>
<p>mysql_upgrade should be run once the upgrade has been completed.</p>
<p>This is an example of how it run on a root user install:</p>
<pre class="fixed">/usr/local/mariadb/columnstore/mysql/bin/mysql_upgrade --defaults-file=/usr/local/mariadb/columnstore/mysql/my.cnf --force
</pre><p>This is an example of how it run on a non-root user install, assuming ColumnStore is installed under the user's home directory:</p>
<pre class="fixed">$HOME/mariadb/columnstore/mysql/bin/mysql_upgrade --defaults-file=$HOME/mariadb/columnstore/mysql/my.cnf --force
</pre><p>In addition you should run the upgrade stored procedure below for a major version upgrade.</p>
<h4 class="anchored_heading" id="executing-the-upgrade-stored-procedure">Executing the upgrade stored procedure</h4>
<p>If you are upgrading from 1.1.7 or have upgraded in the past you should run the MariaDB ColumnStore stored procedure. This updates the MariaDB FRM files by altering every ColumnStore table with a blank table comment. This will not affect options set using table comments but will erase any table comment the user has manually set.</p>
<p>You only need to execute this as part of a major version upgrade. It is executed using the following query which should be executed by a user which has access to alter every ColumnStore table:</p>
<pre class="fixed">call columnstore_info.columnstore_upgrade();
</pre><h3 class="anchored_heading" id="setup">Setup</h3>
<p>In this section, we will refer to the directory ColumnStore is installed in as &lt;CSROOT&gt;.  If you installed the RPM or DEB package, then your &lt;CSROOT&gt; will be /usr/local.  If you installed it from the tarball, &lt;CSROOT&gt; will be where you unpacked it.</p>
<h4 class="anchored_heading" id="columnstorexml-mycnf">Columnstore.xml / my.cnf</h4>
<p>Configuration changes made manually are not automatically carried forward during the upgrade.  These modifications will need to be made again manually after the upgrade is complete.</p>
<p>After the upgrade process the configuration files will be saved at:</p>
<ul start="1"><li>&lt;CSROOT&gt;/mariadb/columnstore/etc/Columnstore.xml.rpmsave
</li><li>&lt;CSROOT&gt;/mariadb/columnstore/mysql/my.cnf.rpmsave
</li></ul>
<h4 class="anchored_heading" id="mariadb-root-user-database-password">MariaDB root user database password</h4>
<p>If you have specified a root user database password (which is good practice), then you must configure a .my.cnf file with user credentials for the upgrade process to use. Create a .my.cnf file in the user home directory with 600 file permissions with the following content (updating PASSWORD as appropriate):</p>
<pre class="fixed">[mysqladmin]
user = root
password = PASSWORD
</pre><h3 class="anchored_heading" id="choosing-the-type-of-upgrade">Choosing the type of upgrade</h3>
<p>Note, softlinks may cause a problem during the upgrade if you use the RPM or DEB packages.  If you have linked a directory above /usr/local/mariadb/columnstore, the softlinks will be deleted and the upgrade will fail.  In that case you will need to upgrade using the binary tarball instead.  If you have only linked the data directories (ie /usr/local/MariaDB/columnstore/data*), the RPM/DEB package upgrade will work.</p>
<h4 class="anchored_heading" id="root-user-installs">Root User Installs</h4>
<h5 class="anchored_heading" id="upgrading-mariadb-columnstore-using-the-tarball-of-rpms-distributed-mode">Upgrading MariaDB ColumnStore using the tarball of RPMs (distributed mode)</h5>
<p>Upgrade MariaDB ColumnStore as user root on the server designated as PM1:</p>
<p><strong> Download the package mariadb-columnstore-1.2.5-1-centos#.x86_64.rpm.tar.gz to the PM1 server where you are installing MariaDB ColumnStore.</strong></p>
<p><strong> Shutdown the MariaDB ColumnStore system:</strong></p>
<pre class="fixed"># mcsadmin shutdownsystem y
</pre><ul><li>Unpack the tarball, which will generate a set of RPMs that will reside in the /root/ directory.
</li></ul>
<pre class="fixed"># tar -zxf mariadb-columnstore-1.2.5-1-centos#.x86_64.rpm.tar.gz
</pre><ul start="1"><li>Uninstall the old packages, then install the new packages. The MariaDB ColumnStore software will be installed in /usr/local/.
</li></ul>
<pre class="fixed"># rpm -e --nodeps $(rpm -qa | grep '^mariadb-columnstore')
# rpm -ivh mariadb-columnstore-*1.2.5*rpm
</pre><ul start="1"><li>Run postConfigure using the upgrade option
</li></ul>
<pre class="fixed"># /usr/local/mariadb/columnstore/bin/postConfigure -u
</pre><ul start="1"><li>Run the mysql_upgrade script on the nodes documented above for a root user install
</li></ul>
<p><a href="https://mariadb.com/kb/en/library/mariadb-columnstore-software-upgrade-117-ga-to-125-ga/#running-the-mysql_upgrade-script">https://mariadb.com/kb/en/library/mariadb-columnstore-software-upgrade-117-ga-to-125-ga/#running-the-mysql_upgrade-script</a></p>
<h5 class="anchored_heading" id="upgrading-mariadb-columnstore-using-rpm-package-repositories-non-distributed-mode">Upgrading MariaDB ColumnStore using RPM Package Repositories (non-distributed mode)</h5>
<p>The system can be upgraded when it was previously installed from the Package Repositories. This will need to be run on each module in the system.</p>
<p>Additional information can be found in this document on how to setup and install using the 'yum' package repo command:</p>
<p><a href="https://mariadb.com/kb/en/library/installing-mariadb-ax-from-the-package-repositories">https://mariadb.com/kb/en/library/installing-mariadb-ax-from-the-package-repositories</a></p>
<p>Upgrade MariaDB ColumnStore as user root on the server designated as PM1:</p>
<p><strong> Shutdown the MariaDB ColumnStore system:</strong></p>
<pre class="fixed"># mcsadmin shutdownsystem y
</pre><ul><li>Uninstall MariaDB ColumnStore Packages
</li></ul>
<pre class="fixed"># yum remove mariadb-columnstore*
</pre><ul start="1"><li>Install MariaDB ColumnStore Packages
</li></ul>
<pre class="fixed"># yum --enablerepo=mariadb-columnstore clean metadata
# yum install mariadb-columnstore*
</pre><p>NOTE: On all modules except for PM1, start the columnstore service</p>
<pre class="fixed"># /usr/local/mariadb/columnstore/bin/columnstore start
</pre><ul start="1"><li>Run postConfigure using the upgrade and non-distributed options
</li></ul>
<pre class="fixed"># /usr/local/mariadb/columnstore/bin/postConfigure -u -n
</pre><ul start="1"><li>Run the mysql_upgrade script on the nodes documented above for a root user install
</li></ul>
<p><a href="https://mariadb.com/kb/en/library/mariadb-columnstore-software-upgrade-117-ga-to-125-ga/#running-the-mysql_upgrade-script">https://mariadb.com/kb/en/library/mariadb-columnstore-software-upgrade-117-ga-to-125-ga/#running-the-mysql_upgrade-script</a></p>
<h5 class="anchored_heading" id="upgrading-mariadb-columnstore-using-the-binary-tarball-distributed-mode">Upgrading MariaDB ColumnStore using the binary tarball (distributed mode)</h5>
<p>Upgrade MariaDB ColumnStore as user root on the server designated as PM1:</p>
<ul start="1"><li>Download the package into the /usr/local directory mariadb-columnstore-1.2.5-1.x86_64.bin.tar.gz
</li></ul>
<ul start="1"><li>Shutdown the MariaDB ColumnStore system:
</li></ul>
<pre class="fixed"># mcsadmin shutdownsystem y
</pre><ul start="1"><li>Run pre-uninstall script
</li></ul>
<pre class="fixed"># /usr/local/mariadb/columnstore/bin/pre-uninstall
</pre><ul start="1"><li>Unpack the tarball in the /usr/local/ directory.
</li></ul>
<pre class="fixed"># tar -zxvf mariadb-columnstore-1.2.5-1.x86_64.bin.tar.gz
</pre><ul start="1"><li>Run post-install scripts
</li></ul>
<pre class="fixed"># /usr/local/mariadb/columnstore/bin/post-install
</pre><ul start="1"><li>Run postConfigure using the upgrade option
</li></ul>
<pre class="fixed"># /usr/local/mariadb/columnstore/bin/postConfigure -u
</pre><ul start="1"><li>Run the mysql_upgrade script on the nodes documented above for a root user install
</li></ul>
<p><a href="https://mariadb.com/kb/en/library/mariadb-columnstore-software-upgrade-117-ga-to-125-ga/#running-the-mysql_upgrade-script">https://mariadb.com/kb/en/library/mariadb-columnstore-software-upgrade-117-ga-to-125-ga/#running-the-mysql_upgrade-script</a></p>
<h5 class="anchored_heading" id="upgrading-mariadb-columnstore-using-the-deb-tarball-distributed-mode">Upgrading MariaDB ColumnStore using the DEB tarball (distributed mode)</h5>
<p>Upgrade MariaDB ColumnStore as user root on the server designated as PM1:</p>
<ul start="1"><li>Download the package into the /root directory mariadb-columnstore-1.2.5-1.amd64.deb.tar.gz
</li></ul>
<ul start="1"><li>Shutdown the MariaDB ColumnStore system:
</li></ul>
<pre class="fixed"># mcsadmin shutdownsystem y
</pre><ul start="1"><li>Unpack the tarball, which contains DEBs.
</li></ul>
<pre class="fixed"># tar -zxf mariadb-columnstore-1.2.5-1.amd64.deb.tar.gz
</pre><ul start="1"><li>Remove and install all MariaDB ColumnStore debs
</li></ul>
<pre class="fixed"># cd /root/
# dpkg -r  $(dpkg --list | grep 'mariadb-columnstore' | awk '{print $2}')
# dpkg --install mariadb-columnstore-*1.2.5-1*deb
</pre><ul start="1"><li>Run postConfigure using the upgrade option
</li></ul>
<pre class="fixed"># /usr/local/mariadb/columnstore/bin/postConfigure -u
</pre><ul start="1"><li>Run the mysql_upgrade script on the nodes documented above for a root user install
</li></ul>
<p><a href="https://mariadb.com/kb/en/library/mariadb-columnstore-software-upgrade-117-ga-to-125-ga/#running-the-mysql_upgrade-script">https://mariadb.com/kb/en/library/mariadb-columnstore-software-upgrade-117-ga-to-125-ga/#running-the-mysql_upgrade-script</a></p>
<h5 class="anchored_heading" id="upgrading-mariadb-columnstore-using-deb-package-repositories-non-distributed-mode">Upgrading MariaDB ColumnStore using DEB Package Repositories (non-distributed mode)</h5>
<p>The system can be upgraded when it was previously installed from the Package Repositories. This will need to be run on each module in the system</p>
<p>Additional information can be found in this document on how to setup and install using the 'apt-get' package repo command:</p>
<p><a href="https://mariadb.com/kb/en/library/installing-mariadb-ax-from-the-package-repositories">https://mariadb.com/kb/en/library/installing-mariadb-ax-from-the-package-repositories</a></p>
<p>Upgrade MariaDB ColumnStore as user root on the server designated as PM1:</p>
<p><strong> Shutdown the MariaDB ColumnStore system:</strong></p>
<pre class="fixed"># mcsadmin shutdownsystem y
</pre><ul><li>Uninstall MariaDB ColumnStore Packages
</li></ul>
<pre class="fixed"># apt-get remove mariadb-columnstore*
</pre><ul start="1"><li>Install MariaDB ColumnStore Packages
</li></ul>
<pre class="fixed"># apt-get update
# sudo apt-get install mariadb-columnstore*
</pre><p>NOTE: On all modules except for PM1, start the columnstore service</p>
<pre class="fixed"># /usr/local/mariadb/columnstore/bin/columnstore start
</pre><ul start="1"><li>Run postConfigure using the upgrade and non-distributed options
</li></ul>
<pre class="fixed"># /usr/local/mariadb/columnstore/bin/postConfigure -u -n
</pre><ul start="1"><li>Run the mysql_upgrade script on the nodes documented above for a root user install
</li></ul>
<p><a href="https://mariadb.com/kb/en/library/mariadb-columnstore-software-upgrade-117-ga-to-125-ga/#running-the-mysql_upgrade-script">https://mariadb.com/kb/en/library/mariadb-columnstore-software-upgrade-117-ga-to-125-ga/#running-the-mysql_upgrade-script</a></p>
<h4 class="anchored_heading" id="non-root-user-installs">Non-Root User Installs</h4>
<h5 class="anchored_heading" id="upgrade-mariadb-columnstore-from-the-binary-tarball-without-sudo-access-non-distributed-mode">Upgrade MariaDB ColumnStore from the binary tarball without sudo access (non-distributed mode)</h5>
<p>This upgrade method applies when root/sudo access is not an option.</p>
<p>The uninstall script for 1.1.7 requires root access to perform some operations.  These operations are the following:</p>
<ul start="1"><li>removing /etc/profile.d/columnstore{Alias,Env}.sh to remove aliases and environment variables from all users.
</li><li>running '&lt;CSROOT&gt;/mysql/columnstore/bin/syslogSetup.sh uninstall' to remove ColumnStore from the logging system
</li><li>removing the columnstore startup script
</li><li>remove /etc/ld.so.conf.d/columnstore.conf to ColumnStore directories from the ld library search path
</li></ul>
<p>Because you are upgrading ColumnStore and not uninstalling it, they are not necessary.  If at some point you wish to uninstall it, you (or your sysadmin) will have to perform those operations by hand.</p>
<p>The upgrade instructions:</p>
<ul start="1"><li>Download the binary tarball to the current installation location on all nodes.  See <a href="https://downloads.mariadb.com/ColumnStore/">https://downloads.mariadb.com/ColumnStore/</a>
</li></ul>
<ul start="1"><li>Shutdown the MariaDB ColumnStore system:
</li></ul>
<pre class="fixed">$ mcsadmin shutdownsystem y
</pre><ul start="1"><li>Copy Columnstore.xml to Columnstore.xml.rpmsave, and my.cnf to my.cnf.rpmsave
</li></ul>
<pre class="fixed">$ cp &lt;CSROOT&gt;/mariadb/columnstore/etc/Columnstore{.xml,.xml.rpmsave} 
$ cp &lt;CSROOT&gt;/mariadb/columnstore/mysql/my{.cnf,.cnf.rpmsave}
</pre><ul start="1"><li>On all nodes, untar the new files in the same location as the old ones
</li></ul>
<pre class="fixed">$ tar zxf columnstore-1.2.5-1.x86_64.bin.tar.gz
</pre><ul start="1"><li>On all nodes, run post-install, specifying where ColumnStore is installed
</li></ul>
<pre class="fixed">$ &lt;CSROOT&gt;/mariadb/columnstore/bin/post-install --installdir=&lt;CSROOT&gt;/mariadb/columnstore
</pre><ul start="1"><li>On all nodes except for PM1, start the columnstore service
</li></ul>
<pre class="fixed">$ &lt;CSROOT&gt;/mariadb/columnstore/bin/columnstore start
</pre><ul start="1"><li>On PM1 only, run postConfigure, specifying the upgrade, non-distributed installation mode, and the location of the installation
</li></ul>
<pre class="fixed">$ &lt;CSROOT&gt;/mariadb/columnstore/bin/postConfigure -u -n -i &lt;CSROOT&gt;/mariadb/columnstore
</pre><ul start="1"><li>Run the mysql_upgrade script on the nodes documented above for a non-root user install
</li></ul>
<p><a href="https://mariadb.com/kb/en/library/mariadb-columnstore-software-upgrade-117-ga-to-125-ga/#running-the-mysql_upgrade-script">https://mariadb.com/kb/en/library/mariadb-columnstore-software-upgrade-117-ga-to-125-ga/#running-the-mysql_upgrade-script</a></p>
<h5 class="anchored_heading" id="upgrade-mariadb-columnstore-from-the-binary-tarball-distributed-mode">Upgrade MariaDB ColumnStore from the binary tarball (distributed mode)</h5>
<p>Upgrade MariaDB ColumnStore as user USER on the server designated as PM1:</p>
<ul start="1"><li>Download the package into the user's home directory mariadb-columnstore-1.2.5-1.x86_64.bin.tar.gz
</li></ul>
<ul start="1"><li>Shutdown the MariaDB ColumnStore system:
</li></ul>
<pre class="fixed">$ mcsadmin shutdownsystem y
</pre><ul start="1"><li>Run the pre-uninstall script; this will require sudo access as you are running a script from 1.1.7.
</li></ul>
<pre class="fixed">$ &lt;CSROOT&gt;/mariadb/columnstore/bin/pre-uninstall --installdir=&lt;CSROOT&gt;/mariadb/columnstore
</pre><ul start="1"><li>Make the sudo changes as noted at the beginning of this document
</li></ul>
<ul start="1"><li>Unpack the tarball in the same place as the original installation
</li></ul>
<pre class="fixed">$ tar -zxvf mariadb-columnstore-1.2.5-1.x86_64.bin.tar.gz
</pre><ul start="1"><li>Run post-install scripts
</li></ul>
<pre class="fixed">$ &lt;CSROOT&gt;/mariadb/columnstore/bin/post-install --installdir=&lt;CSROOT&gt;/mariadb/columnstore
</pre><ul start="1"><li>Run postConfigure using the upgrade option
</li></ul>
<pre class="fixed">$ &lt;CSROOT&gt;/mariadb/columnstore/bin/postConfigure -u -i &lt;CSROOT&gt;/mariadb/columnstore
</pre><ul start="1"><li>Run the mysql_upgrade script on the nodes documented above for a non-root user install
</li></ul>
<p><a href="https://mariadb.com/kb/en/library/mariadb-columnstore-software-upgrade-117-ga-to-125-ga/#running-the-mysql_upgrade-script">https://mariadb.com/kb/en/library/mariadb-columnstore-software-upgrade-117-ga-to-125-ga/#running-the-mysql_upgrade-script</a></p>

    </div>


        
            <div id="subscribe" class="well well-small hide hidden-print"
                 data-subscribe-url="/kb/en/mariadb-columnstore-software-upgrade-117-ga-to-125-ga/+subscriptions/add"
                 data-unsubscribe-url="/kb/en/mariadb-columnstore-software-upgrade-117-ga-to-125-ga/+subscriptions/remove">
            </div>
        

        
        
    
        <div class="simple_section_nav">
            <ul class="nav nav-pills">
                
                    <li><a href="/kb/en/mariadb-columnstore-software-upgrade-117-ga-to-124-ga/">
                        ← MariaDB ColumnStore software upgrade 1.1.7 GA to 1.2.4 GA
                    </a>
                    </li>
                
                
                    <li><a href="/kb/en/mariadb-columnstore-12-upgrades/">
                        ↑ MariaDB ColumnStore 1.2 Upgrades ↑
                    </a>
                    </li>
                
                
                    <li class="pull-right"><a href="/kb/en/mariadb-columnstore-software-upgrade-12x-ga-to-124-ga/">
                        MariaDB ColumnStore software upgrade 1.2.x GA to 1.2.4 GA →
                    </a>
                    </li>
                
            </ul>
        </div>
    

        

        
        <h2>Comments</h2>
        
    
    <div id="comments" data-node-id="9185" data-comments-url="/kb/en/mariadb-columnstore-software-upgrade-117-ga-to-125-ga/+comments"
         data-reply-url="/kb/en/mariadb-columnstore-software-upgrade-117-ga-to-125-ga/comments/post/">
        Comments loading...
    </div>

        

    </div>


                    <div id="content_disclaimer" class="graybox">
                        Content reproduced on this site is the property of its respective owners,
                        and this content is not reviewed in advance by MariaDB. The views, information and opinions
                        expressed by this content do not necessarily represent those of MariaDB or any other party.
                    </div>
                </div>
            </section>

            
                <div id="right_bar" class="col-md-2">
                    
    
        
        <ul class="section_navigation well well-small hidden-xs hidden-sm">
            
                <li class="parent"><a href="/kb/en/mariadb-columnstore-12-upgrades/">
                    ↑ MariaDB ColumnStore 1.2 Upgrades ↑
                </a>
                </li>
            
            
                
                    <li>
                        <a href="/kb/en/mariadb-columnstore-software-upgrade-116-ga-to-120-alpha/">
                            
                            MariaDB ColumnStore software upgrade 1.1.6 GA to 1.2.0 Alpha
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/mariadb-columnstore-software-upgrade-116-ga-to-121-beta/">
                            
                            MariaDB ColumnStore software upgrade 1.1.6 GA to 1.2.1 Beta
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/mariadb-columnstore-software-upgrade-116-ga-to-122-ga/">
                            
                            MariaDB ColumnStore software upgrade 1.1.6 GA to 1.2.2 GA
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/mariadb-columnstore-software-upgrade-117-ga-to-123-ga/">
                            
                            MariaDB ColumnStore software upgrade 1.1.7 GA to 1.2.3 GA
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/mariadb-columnstore-software-upgrade-117-ga-to-124-ga/">
                            
                            MariaDB ColumnStore software upgrade 1.1.7 GA to 1.2.4 GA
                        </a>
                    </li>
                
            
                
                    <li class="active">
                        <span>MariaDB ColumnStore software upgrade 1.1.7 GA to 1.2.5 GA</span>
                        
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/mariadb-columnstore-software-upgrade-12x-ga-to-124-ga/">
                            
                            MariaDB ColumnStore software upgrade 1.2.x GA to 1.2.4 GA
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/mariadb-columnstore-software-upgrade-12x-ga-to-125-ga/">
                            
                            MariaDB ColumnStore software upgrade 1.2.x GA to 1.2.5 GA
                        </a>
                    </li>
                
            
        </ul>
    
    

                </div>
            
        </div>
    </div>
</div>

<!-- Footer -->
<footer id="footer">
    <div class="footer">
        <div class="container">
            <div class="row row-10">
                <div class="col-md-2 col-xs-4 item">
                    <h5>
                        <a href="/products" title="Products">Products</a>
                    </h5>
                    <ul>
                        <li id="menu-item-7816" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-7816"><a href="https://mariadb.com/products/mariadb-platform/">MariaDB Platform</a></li>
                        <li id="menu-item-7815" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-7815"><a href="https://mariadb.com/products/skysql/">MariaDB SkySQL</a></li>
                        <li id="menu-item-4172" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4172"><a href="https://mariadb.com/pricing/">Pricing</a></li>
                        <li id="menu-item-4163" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4163"><a href="https://mariadb.com/downloads/">Download MariaDB</a></li>
                    </ul>
                </div>
                <div class="col-md-2 col-xs-4 item">
                    <h5>
                        <a href="/services" title="Services">Services</a>
                    </h5>
                    <ul>
                        <li id="menu-item-4169" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4169"><a href="https://mariadb.com/services/remote-dba/">Remote DBA</a></li>
                        <li id="menu-item-41691" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4169"><a href="https://mariadb.com/services/skydba/">SkyDBA</a></li>
                        <li id="menu-item-4167" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4167"><a href="https://mariadb.com/services/enterprise-architect/">Enterprise Architect</a></li>
                        <li id="menu-item-4170" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4170"><a href="https://mariadb.com/services/technical-support-services/">Technical Support</a></li>
                        <li id="menu-item-4168" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4168"><a href="https://mariadb.com/services/migration-practice/">Migration Practice</a></li>
                        <li id="menu-item-4166" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4166"><a href="https://mariadb.com/services/consulting/">Consulting</a></li>
                        <li id="menu-item-4171" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4171"><a href="https://mariadb.com/services/training/">Training</a></li>
                    </ul>
                </div>
                <div class="col-md-2 col-xs-4 item">
                    <h5>
                        <a href="/resources" title="Resources">Resources</a>
                    </h5>
                    <ul>
                        <li id="menu-item-41751" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4175"><a href="https://mariadb.com/docs/">Documentation</a></li>
                        <li id="menu-item-41752" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4175"><a href="https://mariadb.com/developers/">Developers</a></li>
                        <li id="menu-item-4175" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4175"><a href="https://mariadb.com/resources/blog/">Blog</a></li>
                        <li id="menu-item-5462" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-5462"><a href="https://support.mariadb.com">Support</a></li>
                        <li id="menu-item-6004" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-6004"><a href="https://mariadb.com/openworks/">OpenWorks</a></li>
                        <li id="menu-item-60041" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-6004"><a href="https://mariadb.com/resources/customer-stories/">Customer Stories</a></li>
                        <li id="menu-item-7817" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-7817"><a href="https://mariadb.com/resources/events/">Events</a></li>
                        <li id="menu-item-4177" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4177"><a href="https://mariadb.com/roadshow/">MariaDB Roadshow</a></li>
                    </ul>
                </div>
                <div class="visible-xs visible-sm clear"></div>
                <div class="col-md-2 col-xs-5 item">
                    <h5>
                        <a href="/about-us" title="About MariaDB">About</a>
                    </h5>
                    <ul>
                        <li id="menu-item-4173" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4173"><a href="https://mariadb.com/contact/">Contact</a></li>
                        <li id="menu-item-4161" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4161"><a href="https://mariadb.com/about-us/leadership/">Leadership</a></li>
                        <li id="menu-item-4162" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4162"><a href="https://mariadb.com/about-us/partners/">Partners</a></li>
                        <li id="menu-item-4174" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4174"><a href="https://mariadb.com/newsroom/">Newsroom</a></li>
                        <li id="menu-item-4160" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4160"><a href="https://mariadb.com/about-us/investors/">Investors</a></li>
                        <li id="menu-item-4159" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4159"><a href="https://mariadb.com/about-us/careers/">Careers</a></li>
                        <li id="menu-item-41591" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4159"><a href="https://mariadb.com/trust/">Trust Center</a></li>
                        <li id="menu-item-41592" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4159"><a href="https://mariadb.com/vulnerability-reporting/">Vulnerability Reporting</a></li>
                    </ul>
                </div>
                <div class="col-md-4 col-xs-7 item">
                    <div id="block-footercontact" class="block block-block-content block-block-content22b3af28-0754-44ec-a5c6-4466568f37e3">
                        <h5><a href="/contact" title="Contact">Contact</a></h5>
                    </div>
                    <div class="social">
                        <ul class="list-inline">
                            <li>
                                <a target="_blank" href="https://www.facebook.com/MariaDB.dbms/" title="Facebook">
                                    <i class="fa fa-facebook" aria-hidden="true"></i>
                                </a>
                            </li>
                            <li>
                                <a target="_blank" href="https://twitter.com/mariadb" title="Twitter">
                                    <i class="fa fa-twitter" aria-hidden="true"></i>
                                </a>
                            </li>
                            <li>
                                <a target="_blank" href="https://www.linkedin.com/company/mariadb-corporation?trk=company_logo " title="LinkedIn">
                                    <i class="fa fa-linkedin" aria-hidden="true"></i>
                                </a>
                            </li>
                        </ul>
                    </div>
                    <div id="block-footerformcontact" class="block block-block-content block-block-contentd754ee1b-3cc9-40e7-9ef4-f504f1197fb1">
                        
                            <p>Subscribe to our newsletter!</p>
                            <script src="//app-sj15.marketo.com/js/forms2/js/forms2.min.js"></script><form id="mktoForm_1498"></form>
                            <script>
                                <!--//--><![CDATA[// ><!--
                                MktoForms2.loadForm("//app-sj15.marketo.com", "573-PXI-984", 1498);
                                //--><!]]]]><![CDATA[>
                                //--><!]]>
                            </script>
                        
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="footer-copyright">
        <div class="container text-center">
            <ul class="list-inline no-margin">
                <li>
                    <a href="/legal" title="Legal">Legal</a>
                </li>
                <li>
                    <a href="/privacy-policy" title="Privacy Policy">Privacy Policy</a>
                </li>
                <li>
                    <a href="/cookie-policy/" title="Cookies">Cookie Policy</a>
                </li>
            </ul>
            <p>Copyright &copy; 2023 MariaDB. All rights reserved.</p>
        </div>
    </div>
</footer>
</div>

<div id="ajax_loading">
    <img src="/kb/static/images/ajax-loader.a51c5608d01a.gif" />
</div>

    <!-- Google Tag Manager -->
    <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-MK2847"
                      height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
            '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MK2847');</script>
    <!-- End Google Tag Manager -->

</body>

<script type="text/javascript" src="/kb/static/js/main.fed4ec768178.js" charset="utf-8"></script>

</html>