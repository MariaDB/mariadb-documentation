<?xml version="1.0" encoding="utf-8"?>
<rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title>MariaDB Knowledge Base Comments for: JSON_SET</title><link>https://mariadb.com/kb/en/json_set/+comments/feed/</link><description></description><atom:link href="https://mariadb.com/kb/en/json_set/+comments/feed/" rel="self"></atom:link><language>en-us</language><lastBuildDate>Mon, 26 May 2025 03:19:41 +0000</lastBuildDate><item><title>Splicing arbitrary JSON data / non-scalar values</title><link>https://mariadb.com/kb/en/json_set/+comments/6993</link><description>&lt;p&gt;To splice &lt;em&gt;arbitrary&lt;/em&gt; JSON data into the json_doc at the specified path, you must combine &lt;code&gt;JSON_SET()&lt;/code&gt; with &lt;code&gt;JSON_EXTRACT()&lt;/code&gt; like so:&lt;/p&gt;
&lt;pre class="fixed"&gt;JSON_SET(json_doc, path, JSON_EXTRACT(val, '$'))
&lt;/pre&gt;&lt;p&gt;Where val is a string of encoded JSON for any valid value (including scalars, because JSON_EXTRACT() handles both scalar and non-scalar values).  E.g.:&lt;/p&gt;
&lt;pre class="fixed"&gt;JSON_SET(config, '$.options', JSON_EXTRACT('{&amp;#34;verbose&amp;#34;:true, &amp;#34;type&amp;#34;: &amp;#34;info&amp;#34;}', '$'))
&lt;/pre&gt;&lt;p&gt;(In MySQL you could &lt;code&gt;CAST(val AS JSON)&lt;/code&gt; to do the same thing, but JSON is not a valid target type for CAST in MariaDB.)&lt;/p&gt;
&lt;p&gt;Note that if you simply use &lt;code&gt;JSON_SET(json_doc, path, '{...}')&lt;/code&gt; then you will instead set the value to a single string (containing the JSON-encoded data).&lt;/p&gt;
&lt;p&gt;Note also that the call to &lt;code&gt;JSON_EXTRACT()&lt;/code&gt; must &lt;em&gt;directly&lt;/em&gt; provide the value.  If you were to wrap it with another function, the end result will again just be a single string.  So while &lt;code&gt;JSON_EXTRACT()&lt;/code&gt; "Returns NULL if no paths match or if any of the arguments are NULL", you cannot use the following to provide a fallback value:&lt;/p&gt;
&lt;pre class="fixed"&gt;JSON_SET(json_doc, path, COALESCE(JSON_EXTRACT(val, '$'), '&amp;#34;invalid&amp;#34;'))
&lt;/pre&gt;&lt;p&gt;You could, however, use:&lt;/p&gt;
&lt;pre class="fixed"&gt;JSON_SET(json_doc, path, JSON_EXTRACT(COALESCE(JSON_EXTRACT(val, '$'), '&amp;#34;invalid&amp;#34;'), '$'))
&lt;/pre&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Phil S</dc:creator><guid>https://mariadb.com/kb/en/json_set/+comments/6993</guid></item><item><title>Re: JSON_SET - Version number?</title><link>https://mariadb.com/kb/en/json_set/+comments/6711</link><description>&lt;p&gt;If there's no version information listed, it means the function is supported in all currently maintained versions (&lt;a href="/kb/en/what-is-mariadb-104/"&gt;MariaDB 10.4&lt;/a&gt; +). This function was added in &lt;a href="/kb/en/what-is-mariadb-102/"&gt;MariaDB 10.2&lt;/a&gt;.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Ian Gilfillan</dc:creator><guid>https://mariadb.com/kb/en/json_set/+comments/6711</guid></item><item><title>Re: JSON_SET - Version number?</title><link>https://mariadb.com/kb/en/json_set/+comments/6700</link><description>&lt;p&gt;Looking for version info. Looks like this was added around version 10.2/10.5 - would be handy to know what versions support JSON functions&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Edward Parkinson</dc:creator><guid>https://mariadb.com/kb/en/json_set/+comments/6700</guid></item><item><title>Re: JSON_SET</title><link>https://mariadb.com/kb/en/json_set/+comments/5062</link><description>&lt;p&gt;Thanks, it appears so. Fixed.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Ian Gilfillan</dc:creator><guid>https://mariadb.com/kb/en/json_set/+comments/5062</guid></item><item><title>Re: JSON_SET</title><link>https://mariadb.com/kb/en/json_set/+comments/5053</link><description>&lt;p&gt;I think there's a typo in the example. Should '%.locked' be '$.locked'?&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Ross Holmberg</dc:creator><guid>https://mariadb.com/kb/en/json_set/+comments/5053</guid></item></channel></rss>