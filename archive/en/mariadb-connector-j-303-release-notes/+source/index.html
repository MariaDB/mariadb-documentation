<!DOCTYPE html>
<html>
<head data-cookie-domain=""
      data-cookie-path="/">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="apple-touch-icon" sizes="180x180" href="/kb/static/images/favicons/apple-touch-icon.159e713979be.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/kb/static/images/favicons/favicon-32x32.bc0ac1d5d11e.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/kb/static/images/favicons/favicon-16x16.5801f8f0f34e.png">
    <link rel="shortcut icon" href="/kb/static/images/favicons/favicon.d122d305dee4.ico" type="image/x-icon" />

    <title>MariaDB Connector/J 3.0.3 Release Notes - Source - MariaDB Knowledge Base</title>

    <link href="/kb/static/css/main.b9e1e104f007.css" rel="stylesheet" type="text/css" />

    
        <meta name="robots" content="noindex, nofollow">
    

    <!-- FB Open Graph tags -->
    <meta property="og:title" content="MariaDB Connector/J 3.0.3 Release Notes - Source" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://mariadb.com/kb/en/mariadb-connector-j-303-release-notes/+source/" />
    <meta property="og:image" content="http://mariadb.comaskmonty-logo.png" />
    <meta property="og:site_name" content="MariaDB KnowledgeBase" />
    <meta property="fb:admins" content="514852603" />
    <meta property="og:description" content="" />

    <meta name="description" content="" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="//fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet"/>
    
</head>
<body class="mpkb nodes autoresize nodes_source jqui" id="nodes_source">





<div id="menu-mobile" class="visible-sm visible-xs">

    <div>
        <div id="mobile-close-menu" class="text-right">
            <a href="javascript:void(0)" title="Close Menu" id="back-main" class="toggle-menu">X<span></span></a>
        </div>
    </div>
    <div class="mainmenu-mobile">
        <ul class="ls-none ul-menu">
            <li data-sub="submenu5"><a class="open-form-search" href="/kb/search/" title="Search">Search </a></li>
            <li data-sub="submenu0"><a href="/products" title="Products">Products</a><span class="arrow-main"></span></li>
            <li data-sub="submenu1"><a href="/services" title="Services">Services</a><span class="arrow-main"></span></li>
            <li data-sub="submenu2"><a href="/resources" title="Resources">Resources</a><span class="arrow-main"></span></li>
            <li data-sub="submenu3"><a href="/about-us" title="About">About</a><span class="arrow-main"></span></li>
            <li data-sub="submenu4"><a href="/contact" title="Contact">Contact</a></li>
        </ul>
    </div>

    <div class="nav-top-mobile">
        <div class="select-box form">

            <ul class="inline-block-md mb-none top-nav">
                <li>

                </li>
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/mariadb-connector-j-303-release-notes/+source/"> Login</a>
                    </li>
                
            </ul>



        </div>
        <p class="text-center copyright">Copyright &copy; 2024 MariaDB. All rights reserved.</p>
    </div>
</div>
<div id="wrapper">
<div id="top-nav">
    <div class="container">
        <ul class="hidden-sm hidden-xs" >
            <li><a href="https://mariadb.com/kb/">Knowledge Base</a></li>
            <li><a href="https://mariadb.com/contact/">Contact</a></li>
            
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/mariadb-connector-j-303-release-notes/+source/" rel="nofollow">Login</a>
                    </li>
                
            
            
            <li id="search-form">
                <form action="/kb/en/+search/" method="get" id="search-block-form" accept-charset="UTF-8">
                    <input id="search" title="Enter the terms you wish to search for."
                           placeholder="Search . . ." type="text"
                           name="q" value="" size="15" maxlength="128" class="form-text"
                           data-autocomplete-url="/kb/en/+search/autocomplete/">
                    <input type="hidden" name="quick" value="1" />
                    <input type="hidden" name="source" value="kb" />
                </form>
            </li>
            <li><a id="search-toggler" href="/kb/search/">Search</a></li>
            
        </ul>
    </div>
</div>
<div id="navbar-bottom" class="navbar">
    <div class="container">
        
        
        
        
        <div class="row">
            <div class="col-md-3 col-sm-9 col-xs-9">
                <a class="brand" href="/" title="MariaDB">
                    <img src="/kb/static/images/logo-2018-black.95f5978ae14d.png">
                </a>
            </div>
            <div class="col-md-9 hidden-sm hidden-xs">
                <div class="main-menu">
                    <ul id="main-menu" class="nav navbar-nav inline-block-sm">
    <li class="has-sub full-menu">
        <a href="/products" title="Products">Products</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/services" title="Services">Services</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/pricing" title="Pricing">Pricing</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/resources" title="Resources">Resources</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/about-us" title="About Us">About Us</a>
    </li>
    <li class="">
        <a class="button electric-eel small top-bar-right-download" href="/downloads/">Download</a>
    </li>
</ul>
                </div>
            </div>
            <div class="col-md-3 visible-sm visible-xs col-sm-3 col-xs-3 ps-rv">
                <div class="navbar-header text-right pull-right">
                    <button type="button" class="menu-control toggle-menu" id="open-menu">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="main">
    <div class="container">
        

        <div id="subheader1" class="clearfix">
            <div class="pull-left">
                
                <div id="breadcrumbs" class="breadcrumb">
                    <a href="/kb/en/">Knowledge Base</a>
                    


    
    » <a class="crumb" href="/kb/en/server-client-software/">Server &amp; Client Software</a>
    

    
    » <a class="crumb" href="/kb/en/client-libraries/">Client Libraries</a>
    

    
    » <a class="crumb" href="/kb/en/connectors/">Application Programming Interfaces</a>
    

    
    » <a class="crumb" href="/kb/en/mariadb-connector-j/">Java Connector</a>
    

    
    » <a class="crumb" href="/kb/en/mariadb-connector-j-release-notes/">MariaDB Connector/J Release Notes</a>
    

    
    » <a class="crumb" href="/kb/en/mariadb-connectorj-30-release-notes/">MariaDB Connector/J 3.0 Release Notes</a>
    


    » <a class="node_link crumb" href="/kb/en/mariadb-connector-j-303-release-notes/">MariaDB Connector/J 3.0.3 Release Notes</a>


                </div>
                
            </div>
        </div>
    </div>
    <div class="container" id="container-main">
        <div class="row">
            
            
                
                <aside id="sidebar-first" class="sidebar col-md-2 hidden-xs hidden-sm hidden-print">
                    
                        
                        <ul id="category_menu" class="nav nav-pills nav-stacked">
                            <li><a href="/kb/en/">Home</a></li>
                            
                                
                                    <li><a href="/kb/en/+questions/">Open Questions</a></li>
                                
                                <li><a href="/kb/en/documentation/">MariaDB Server</a></li>
                                <li><a href="/kb/en/maxscale/">MariaDB MaxScale</a></li>
                                <li><a href="/kb/en/mariadb-columnstore/">MariaDB ColumnStore</a></li>
                                <li><a href="/kb/en/connectors/">Connectors</a></li>
                            

                        </ul>
                    

                    
                        <div>
    

<div class="well well-small box actions"><div>

        <a class="btn btn-block btn-small" href="/kb/en/mariadb-connector-j-303-release-notes/">Return to article</a>
    
</div>
</div>

</div>
                    

                    

































                </aside>
            
            
            
                
            
            
            <section id="content" class="limited_width col-md-10 clearfix">
                
                    <h1>MariaDB Connector/J 3.0.3 Release Notes - Source</h1>
                

                



                <div>
                    

    

    
    <div class="revision_info">
        <dl class="table">
            <dt>Revision</dt>
            <dd><a href="/kb/en/mariadb-connector-j-303-release-notes/+r/116382/">116382</a></dd>
            <dt>User</dt>
            <dd>
<span class="user" id="user-3114">
<a href="/kb/user/id/3114" title="Diego Dupin">Diego Dupin</a>
</span></dd>
            <dt>Date</dt>
            <dd>

<span class="datetime" title="2022-05-17 15:42">2022-05-17 15:42</span></dd>
        </dl>
    </div>
    


    

    
        
        <textarea id="answer_source" class="creole_source autogrow">&lt;&lt;include slug=&#34;latest-java&#34;&gt;&gt;
&lt;&lt;button target=&#34;https://mariadb.com/downloads/#connectors&#34; class=&#34;btn-primary&#34;&gt;&gt;Download&lt;&lt;/button&gt;&gt;
&lt;&lt;button target=&#34;mariadb-connector-j-303-release-notes&#34; class=&#34;btn-info disabled&#34;&gt;&gt;Release Notes&lt;&lt;/button&gt;&gt;
&lt;&lt;button target=&#34;mariadb-connector-j-303-changelog&#34; class=&#34;btn-info&#34;&gt;&gt;Changelog&lt;&lt;/button&gt;&gt;
&lt;&lt;button target=&#34;about-mariadb-connector-j&#34; class=&#34;btn-info&#34;&gt;&gt;Connector/J Overview&lt;&lt;/button&gt;&gt;

**Release date:** 25 Jan 2022

MariaDB Connector/J 3.0.3 is a **//[[release-criteria|Stable]] (GA)//** release.

&lt;&lt;style class=&#34;bluebox&#34;&gt;&gt;
**NOTE:** MariaDB Connector/J 3.0.3 is **NOT** fully compatible with the latest release
of version 2.7.
&lt;&lt;/style&gt;&gt;

&lt;&lt;style class=&#34;greenbox&#34;&gt;&gt;
**For an overview of MariaDB Connector/J see the
[[about-mariadb-connector-j|About MariaDB Connector/J]] page**
&lt;&lt;/style&gt;&gt;


New version 3.0 is a complete rewrite of the connector, with code simplification, reduced size (15%), more than 90% coverage tested, with performance gain. 

Licence is still LGPL-2.1 or later with copyright to MariaDB Corporation AB only (2.x was a fork from Drizzle-JDBC - BSD licensed)

What’s new : 
* Binary prepare statement improvement
* faster connection creation
* Support of new 10.6 metadata skip
* Pipelining PREPARE
* REDO failover transaction
* Better java version support
* New option `tcpKeepIdle`, `tcpKeepCount`, `tcpKeepInterval` for java 11+
* Provide a full JPMS module descriptor
* new option `restrictedAuth` to permit authentication plugin restriction
* metadata queries performance improvement
* Easy logging
* Deprecated option removal
* Support codec registry implementation


== Performance
Other than features, connector permit significant performance improvements : 
Here are real world TPCC benchmarks results, comparing connector version 2.7.4 and 3.0.3


\\\\{{2}}


=== Binary prepare statement improvement
When using option `useServerPrepStmts`, the connector uses BINARY protocol, meaning executing PREPARE + EXECUTE commands. 

=== Pipelining
Queries issued from the application are sent one by one to the server, waiting on the results of the first query before sending the next. Communication with the server follows this synchronous request-response messaging pattern. 

When using binary protocol, a PREPARE command is issued (if not in cache) before executing an EXECUTE command.

For MariaDB server 10.2+, the connector will send an optimistic PREPARE + EXECUTE, sending queries one after another. EXECUTE command will be executed only if the PREPARE command succeeds. This avoids some network latency reading PREPARE result before sending EXECUTE command. 

=== Support of new 10.6 metadata skip
10.6 Server with MDEV-19237 permit to avoid resending metadata when they haven’t changed. 
This concerns SQL commands that return a resultset, when using option `useServerPrepStmts`.

Now, the server will send metadata only if they have changed (DDL change for example). This avoids useless information transiting on the network and parsing those metadata. 

Connector internal JMH Benchmark results, selecting one row of a 100 int column table : 

{{multicol}}

=== Avoiding additional command on connection creation

Connection creation by default won&#39;t execute additional command to set session environement. 
Depending on options, there might be a few commands, but driver avoid them to the maximum. 

== REDO failover transaction

After a failover occurs, reconnection will be automatically done according to high-availability configuration. Even if implementation is now smaller and clearer, the result will be the same.


After reconnection, the connector might still throw an exception if the state is unsure. Failover on replica are transparent. 
This is different when the failover occurs during the execution of a query on a master server.

A new option `transactionReplay` permit to replay transactions : 
Most of the time, queries occur in transactions so redo transaction implementation will solve most of the failover cases transparently. Option is disabled by default. When enabled, all queries in a transaction are cached until transaction resolution.
If a failover occurs, the driver will recreate a new connection and replay cache.
There is a few limitations:
When the last command was a &#34;commit&#34; sent to the server, an exception will be thrown, the driver cannot know the current state.
application must have idempotent queries only (queries can be &#34;replayable&#34;)
If the transaction is too big (cache size limit set with new option `transactionReplaySize`), the driver won’t cache the transaction anymore, so a failover during that specific transaction will result in throwing an exception.






== Better java version support

Driver uses Multi-Release JARs (MRJAR), to simultaneously contain implementations for different versions of java. This permit still supports Java 8, but provides solutions for higher versions of java. 

Connector now provides a java 9 full module-info JPMS descriptor

Java 11 socket extended option TCP_KEEPIDLE, TCP_KEEPCOUNT and TCP_KEEPINTERVAL are now configurable with `tcpKeepIdle`, `tcpKeepCount`, `tcpKeepInterval` options respectively. (These options don&#39;t have any effect if using a java version lower than 11).

== Authentication plugin restriction
A new option `restrictedAuth` permits to restrict authentication plugins. 
Example connection string `jdbc:mariadb://localhost/db?restrictedAuth=mysql_native_password,client_ed25519`
will restrict plugin use of standard mysql_native_password and client_ed25519 only.


== Metadata queries performance improvement
Metadata queries use of information_schema improvement for partial or exact matching, permitting faster results.  

== Easy logging
Logging can now be easily enabled at runtime, using slf4j if present, or fallback to JDK logger / console if not. 

* INFO level log connection error
* DEBUG/FINE level log commands
* TRACE/FINEST level log network exchanges

== jdbc:mariadb scheme

It occurs that mysql AND mariadb driver are sometimes available in the same classpath, 
so, now, driver only accept `jdbc:mariadb:` by default. 

If for some reason, connection string is required to be `jdbc:mysql:` 
Driver will be used only if connection string contain &#39;permitMysqlScheme&#39;.
example : 
`jdbc:mysql://localhost/test?permitMysqlScheme`. 



== Option changed
Ssl configuration use now a new option **`sslMode`** to simplify configuration
Possible value are : 
&lt;&lt;style class=&#34;borders  table-head-align-top &#34;&gt;&gt;
|=disable|No ssl (default)|
|=trust|Encryption only (no certificate and hostname validation) (DEVELOPMENT ONLY)|
|=verify-ca|Encryption, certificates validation, BUT no hostname verification|
|=verify-full|Standard SSL use: Encryption, certificate validation and hostname validation|
&lt;&lt;/style&gt;&gt;
This can still be done by 2.x options (useSsl, disableSslHostnameVerification, trustServerCertificate) for compatibility, but this is the preferred way.


A new option **`timezone`** permits to force session timezone in case of client having a different timezone compare to server. if set timezone must to either offset or IANA tz (like &#39;+5:00&#39; or &#39;America/New_York&#39;)&#39;: connector will set connection timezone. This replace options `useLegacyDatetimeCode` and `serverTimezone` that did cause some problems when using [[https://mariadb.com/kb/en/time-zones/#time-zone-effects-on-functions|some functions that are affected by the time zone setting]].


== Option removal

Even if connectors aim to be compatible with the 2.x version, there has been very few option removal since connection exists. This is now the time :

&lt;&lt;style class=&#34;borders  table-head-align-top &#34;&gt;&gt;
|=allowMasterDownConnection|In master/replica setup, master must be up|
|=assureReadOnly|connectors now configure replica connection being read-only|
|=autoReconnect|doesn’t have any sense now, better use high availability mode|
|=cachePrepStmts|always cache when using binary protocol|
|=callableStmtCacheSize|always cache when using binary protocol|
|=continueBatchOnError||
|=enablePacketDebug|log are now set using standard logger|
|=ensureSocketState|removed, this was a debugging option|
|=failOnReadOnly|one master must always be present when using master/replica setup|
|=failoverLoopRetries|failover number of attempts rely now only on retriesAllDown option|
|=jdbcCompliantTruncation|The connector ensures STRICT_TRANS_TABLES is always set to follow JDBC expected truncation.|
|=keyPassword||
|=loadBalanceBlacklistTimeout|denied lists are handled automatically, and if all servers are denied, the connector will reconnect using the denied servers. No need for these options anymore.|
|=log|log are now set using standard logger|
|=maximizeMysqlCompatibility|very old option for old mysql connector compatibility|
|=nullCatalogMeansCurrent|was to permit non JDBC behavior for compatibility with old version correction|
|=passwordCharacterEncoding||
|=pinGlobalTxToPhysicalConnection||
|=prepStmtCacheSqlLimit|forced to 8K value|
|=profileSql|log are now set using standard logger|
|=retriesAllDown|not compatible with new failover implementation|
|=rewriteBatchedStatements|replaced by use of faster batching implementation ( COM_STMT_BULK)|
|=serverTimezone||
|=sharedMemory|plugin removed|
|=slowQueryThresholdNanos||
|=staticGlobal||
|=tcpNoDelay|Who would want to disable NAGLE to have a slow connector|
|=tcpRcvBuf||
|=tcpSndBuf||
|=trackSchema|Automatically set|
|=trustStore|Use java standard truststore or option serverSslCert to provide certificates.|
|=trustStorePassword|Same than trustStore|
|=trustStoreType|Same than trustStore|
|=useBatchMultiSend|replaced by use of faster batching implementation ( COM_STMT_BULK)|
|=useBatchMultiSendNumber|See useBatchMultiSend|
|=useFractionalSeconds|server are expected to support fractional seconds (all mariadb server support it, mysql since 5.6)|
|=useLegacyDatetimeCode||
|=useOldAliasMetadataBehavior|was to permit non JDBC behavior for compatibility with old version correction|
|=validConnectionTimeout|No automatic validation done by connector, pool must validate connection, not connector having a thread for that|
&lt;&lt;/style&gt;&gt;

Specific support for aurora has been removed, since Issues were piling up without the community proposing any PR for them and without access for us to test those modifications.


== Changelog
For a complete list of changes made in MariaDB Connector/J 3.0.3, with links to detailed
information on each push, see the [[mariadb-connector-j-303-changelog|changelog]].</textarea>
    


                    <div id="content_disclaimer" class="graybox">
                        Content reproduced on this site is the property of its respective owners,
                        and this content is not reviewed in advance by MariaDB. The views, information and opinions
                        expressed by this content do not necessarily represent those of MariaDB or any other party.
                    </div>
                </div>
            </section>

            
        </div>
    </div>
</div>

<!-- Footer -->
<footer id="footer">
    <div class="footer">
        <div class="container">
            <div class="row">
                <div class="col-xs-12">
                    <ul class="list-inline text-center footer-nav">
                        <li>
                            <h5>
                                <a href="https://mariadb.com/products" title="Products">Products</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/services" title="Services">Services</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/pricing" title="Pricing">Pricing</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/resources" title="Resources">Resources</a>
                            </h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/about-us" title="About MariaDB">About Us</a></h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/download" title="Download">Download MariaDB</a></h5>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="row row-10">
                
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div id="block-footerformcontact" class="block block-block-content block-block-contentd754ee1b-3cc9-40e7-9ef4-f504f1197fb1">
                        
                            <h5 style="font-weight: 400;">Subscribe to our newsletter!</h5>
                            <script src="//app-sj15.marketo.com/js/forms2/js/forms2.min.js"></script><form id="mktoForm_1498"></form>
                            <script>
                                <!--//--><![CDATA[// ><!--
                                MktoForms2.loadForm("//app-sj15.marketo.com", "573-PXI-984", 1498);
                                //--><!]]]]><![CDATA[>
                                //--><!]]>
                            </script>
                        
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div class="footer-copyright">
                        <div class="text-center">
                            <ul class="list-inline no-margin">
                                <li>
                                    <a href="/legal" title="Legal">Legal</a>
                                </li>
                                <li>
                                    <a href="/privacy-policy" title="Privacy Policy">Privacy Policy</a>
                                </li>
                                <li>
                                    <a href="/cookie-policy/" title="Cookies">Cookie Policy</a>
                                </li>
                            </ul>
                            <p>Copyright &copy; 2024 MariaDB. All rights reserved.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
</footer>
</div>

<div id="ajax_loading">
    <img src="/kb/static/images/ajax-loader.a51c5608d01a.gif" />
</div>

    <!-- Google Tag Manager -->
    <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-MK2847"
                      height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
            '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MK2847');</script>
    <!-- End Google Tag Manager -->

</body>

<script type="text/javascript" src="/kb/static/js/main.fed4ec768178.js" charset="utf-8"></script>

</html>