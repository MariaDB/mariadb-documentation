<!DOCTYPE html>
<html>
<head data-cookie-domain=""
      data-cookie-path="/">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="apple-touch-icon" sizes="180x180" href="/kb/static/images/favicons/apple-touch-icon.159e713979be.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/kb/static/images/favicons/favicon-32x32.bc0ac1d5d11e.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/kb/static/images/favicons/favicon-16x16.5801f8f0f34e.png">
    <link rel="shortcut icon" href="/kb/static/images/favicons/favicon.d122d305dee4.ico" type="image/x-icon" />

    <title>mariadb-test Auxiliary Files - MariaDB Knowledge Base</title>

    <link href="/kb/static/css/main.f7633538c846.css" rel="stylesheet" type="text/css" />

    

    

    <!-- FB Open Graph tags -->
    <meta property="og:title" content="mariadb-test Auxiliary Files" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://mariadb.com/kb/en/mariadb-test-auxiliary-files/" />
    <meta property="og:image" content="http://mariadb.comaskmonty-logo.png" />
    <meta property="og:site_name" content="MariaDB KnowledgeBase" />
    <meta property="fb:admins" content="514852603" />
    <meta property="og:description" content="Besides test and result files, many other files that affect the testing process in mariadb-test" />

    <meta name="description" content="Besides test and result files, many other files that affect the testing process in mariadb-test" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="//fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet"/>
    
</head>
<body class="mpkb nodes products nodes_view jqui" id="nodes_view">





<div id="menu-mobile" class="visible-sm visible-xs">

    <div>
        <div id="mobile-close-menu" class="text-right">
            <a href="javascript:void(0)" title="Close Menu" id="back-main" class="toggle-menu">X<span></span></a>
        </div>
    </div>
    <div class="mainmenu-mobile">
        <ul class="ls-none ul-menu">
            <li data-sub="submenu5"><a class="open-form-search" href="/kb/search/" title="Search">Search </a></li>
            <li data-sub="submenu0"><a href="/products" title="Products">Products</a><span class="arrow-main"></span></li>
            <li data-sub="submenu1"><a href="/services" title="Services">Services</a><span class="arrow-main"></span></li>
            <li data-sub="submenu2"><a href="/resources" title="Resources">Resources</a><span class="arrow-main"></span></li>
            <li data-sub="submenu3"><a href="/about-us" title="About">About</a><span class="arrow-main"></span></li>
            <li data-sub="submenu4"><a href="/contact" title="Contact">Contact</a></li>
        </ul>
    </div>

    <div class="nav-top-mobile">
        <div class="select-box form">

            <ul class="inline-block-md mb-none top-nav">
                <li>

                </li>
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/mariadb-test-auxiliary-files/"> Login</a>
                    </li>
                
            </ul>



        </div>
        <p class="text-center copyright">Copyright &copy; 2025 MariaDB. All rights reserved.</p>
    </div>
</div>
<div class="violator-wrap d-none" id="top_violator">
    <div class="container">
        <div class="row">
            <div class="col-xs-12 col-sm-12">
                <div class="violator-outer">
                    <div class="violator-inner">
                        <div class="row">
                            <div class="col-xs-12 col-sm-9 col-lg-7 col-lg-offset-2" id="top_violator_content">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="content-link" target="_blank" rel="nofollow noreferrer">
                                    <span>The Ultimate Guide to High Availability with MariaDB</span>
                                </a>
                            </div>
                            <div class="col-xs-12 col-sm-3" id="top_violator_cta">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="btn btn-mariadb" target="_blank" rel="nofollow noreferrer">Download Now</a>
                            </div>
                        </div>
                    </div>
                    <button type="button" class="btn btn-link close-btn">
                        <svg xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 24 24" width="15px" height="15px"><path d="M 4.9902344 3.9902344 A 1.0001 1.0001 0 0 0 4.2929688 5.7070312 L 10.585938 12 L 4.2929688 18.292969 A 1.0001 1.0001 0 1 0 5.7070312 19.707031 L 12 13.414062 L 18.292969 19.707031 A 1.0001 1.0001 0 1 0 19.707031 18.292969 L 13.414062 12 L 19.707031 5.7070312 A 1.0001 1.0001 0 0 0 18.980469 3.9902344 A 1.0001 1.0001 0 0 0 18.292969 4.2929688 L 12 10.585938 L 5.7070312 4.2929688 A 1.0001 1.0001 0 0 0 4.9902344 3.9902344 z"/></svg>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="wrapper">
<div id="top-nav">
    <div class="container">
        <ul class="hidden-sm hidden-xs" >
            <li><a href="https://mariadb.com/kb/">Knowledge Base</a></li>
            <li><a href="https://mariadb.com/contact/">Contact</a></li>
            
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/mariadb-test-auxiliary-files/" rel="nofollow">Login</a>
                    </li>
                
            
            
            <li id="search-form">
                <form action="/kb/en/+search/" method="get" id="search-block-form" accept-charset="UTF-8">
                    <input id="search" title="Enter the terms you wish to search for."
                           placeholder="Search . . ." type="text"
                           name="q" value="" size="15" maxlength="128" class="form-text"
                           data-autocomplete-url="/kb/en/+search/autocomplete/">
                    <input type="hidden" name="quick" value="1" />
                    <input type="hidden" name="source" value="kb" />
                </form>
            </li>
            <li><a id="search-toggler" href="/kb/search/">Search</a></li>
            
        </ul>
    </div>
</div>
<div id="navbar-bottom" class="navbar">
    <div class="container">
        
        
        
        
        <div class="row">
            <div class="col-md-3 col-sm-9 col-xs-9">
                <a class="brand" href="/" title="MariaDB">
                    <img src="/kb/static/images/logo-2018-black.95f5978ae14d.png">
                </a>
            </div>
            <div class="col-md-9 hidden-sm hidden-xs">
                <div class="main-menu">
                    <ul id="main-menu" class="nav navbar-nav inline-block-sm">
    <li class="has-sub full-menu">
        <a href="/products" title="Products">Products</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/services" title="Services">Services</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/pricing" title="Pricing">Pricing</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/resources" title="Resources">Resources</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/about-us" title="About Us">About Us</a>
    </li>
    <li class="">
        <a class="button electric-eel small top-bar-right-download" href="/downloads/">Download</a>
    </li>
</ul>
                </div>
            </div>
            <div class="col-md-3 visible-sm visible-xs col-sm-3 col-xs-3 ps-rv">
                <div class="navbar-header text-right pull-right">
                    <button type="button" class="menu-control toggle-menu" id="open-menu">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="main">
    <div class="container">
        

        <div id="subheader1" class="clearfix">
            <div class="pull-left">
                
                <div id="breadcrumbs" class="breadcrumb">
                    <a href="/kb/en/">Knowledge Base</a>
                    


    
    » <a class="crumb" href="/kb/en/documentation/">MariaDB Server Documentation</a>
    

    
    » <a class="crumb" href="/kb/en/using-mariadb-server/">Using MariaDB Server</a>
    

    
    » <a class="crumb" href="/kb/en/clients-utilities/">Clients &amp; Utilities</a>
    

    
    » <a class="crumb" href="/kb/en/mariadb-test/">mariadb-test</a>
    


    » <a class="node_link crumb" href="/kb/en/mariadb-test-auxiliary-files/">mariadb-test Auxiliary Files</a>


                </div>
                
            </div>
        </div>
    </div>
    <div class="container" id="container-main">
        <div class="row">
            
            
                
                <aside id="sidebar-first" class="sidebar col-md-2 hidden-xs hidden-sm hidden-print">
                    
                        
                        <ul id="category_menu" class="nav nav-pills nav-stacked">
                            <li><a href="/kb/en/">Home</a></li>
                            
                                
                                    <li><a href="/kb/en/+questions/">Open Questions</a></li>
                                
                                <li><a href="/kb/en/documentation/">MariaDB Server</a></li>
                                <li><a href="/kb/en/maxscale/">MariaDB MaxScale</a></li>
                                <li><a href="/kb/en/mariadb-columnstore/">MariaDB ColumnStore</a></li>
                                <li><a href="/kb/en/connectors/">Connectors</a></li>
                            

                        </ul>
                    

                    
<div>



<div class="well well-small box actions"><div>

        <a class="btn btn-block btn-blue btn-sm" href="/kb/en/mariadb-test-auxiliary-files/+history" rel="nofollow">History</a>
        
        
        
        <a class="btn btn-block btn-blue btn-sm" href="/kb/en/mariadb-test-auxiliary-files/+source/">Source</a>
        
        <a class="btn btn-block btn-blue btn-sm flag" href="/kb/en/mariadb-test-auxiliary-files/+flag"
                data-flag-url="/kb/en/mariadb-test-auxiliary-files/+flag" rel="nofollow">
                Flag as Spam / Inappropriate</a>
        
        <a class="btn btn-block btn-blue btn-sm" href="/kb/en/mariadb-test-auxiliary-files/+translate/">
                Translate</a>
        

</div>
</div>





<div class="well well-small box node_info"><div>

    <dl>
        <dt>Created</dt>
        <dd>

<span class="datetime" title="2012-03-03 11:33">12 years, 10 months ago</span></dd>

        <dt>Modified</dt>
        <dd>

<span class="datetime" title="2023-07-03 11:42">1 year, 6 months ago</span></dd>

        <dt>Type</dt>
        <dd>article</dd>

        <dt>Status</dt>
        <dd>active</dd>

        <dt>License</dt>
        <dd>
            
                <a href="/kb/en/mariadb-test-auxiliary-files/+license/">CC BY-SA / Gnu FDL</a>
            
        </dd>

        
    </dl>

    
    <ul class="rss_feeds">
        <li><a href="/kb/en/mariadb-test-auxiliary-files/+history/feed/">
            History</a>
        </li>
        <li><a href="/kb/en/mariadb-test-auxiliary-files/+comments/feed/">
            Comments</a>
        </li>
    </ul>
    

</div>
</div>





    
    
    

<div class="well well-small box attachments"><div><div class="edit_link pull-right"><a href="/kb/en/mariadb-test-auxiliary-files/+edit/attachments/">Edit</a></div><h5>Attachments</h5></div><div>

        
            <div class="no_data">No attachments exist</div>
        
    
</div>
</div>

    



    
    






</div>


                    

































                </aside>
            
            
            
                
            
            
                
            
            <section id="content" class="limited_width col-md-8 clearfix">
                
                    <h1>mariadb-test Auxiliary Files</h1>
                

                



                <div>
                    
    

    
    
    

    <div class="node creole">
        
        
        


    
    <div class="answer formatted">
        <div class="table_of_contents well well-small">
<h3>Contents</h3>
 <ol class="toc">

    <li class=""><a href="#disableddef-file" title="disabled.def file">disabled.def file</a></li>

    <li class=""><a href="#suiteopt-file" title="suite.opt file">suite.opt file</a></li>

    <li class=""><a href="#other-opt-files" title="other *.opt files">other *.opt files</a></li>

    <li class=""><a href="#mycnf-file" title="my.cnf file">my.cnf file</a></li>

    <li class=""><a href="#other-cnf-files" title="other *.cnf files">other *.cnf files</a></li>

    <li class=""><a href="#combinations-file" title="combinations file">combinations file</a></li>

    <li class=""><a href="#other-combinations-files" title="other *.combinations files">other *.combinations files</a></li>

    <li class=""><a href="#suitepm-file" title="suite.pm file">suite.pm file</a></li>

    <li class=""><a href="#sh-files" title="*.sh files">*.sh files</a></li>

    <li class=""><a href="#require-files" title="*.require files">*.require files</a></li>

    <li class=""><a href="#rdiff-files" title="*.rdiff files">*.rdiff files</a></li>

    <li class=""><a href="#valgrindsupp-file" title="valgrind.supp file">valgrind.supp file</a> </ol>
</li>
</div>
<p>The mariadb-test framework utilizes many other files that affect the testing
process, in addition to test and result files.</p>
<hr>
<h2 class="anchored_heading" id="disableddef-file"><code>disabled.def</code> file</h2>
<p>This file can be used to disable certain tests temporarily. For example, if one
test fails and you are working on that, you may want to push the changeset that
disables the test into the test suite so that other tests won't be disturbed by
this failure.</p>
<p>The file contains test names and a comment (that should explain why the test
was disabled), separated by a colon. Lines that start with a hash sign
(<code>#</code>) are ignored. A typical <code>disabled.def</code> may look like this (note
that a hash sign in the middle of a line does not start a comment):</p>
<pre class="fixed"># List of disabled tests
# test name : comment
rpl_redirect : Fails due to bug#49978
events_time_zone  : need to fix the timing
</pre><p>During testing, mtr will print disabled tests like this:</p>
<pre class="fixed">...
rpl.rpl_redirect              [ disabled ]  Fails due to bug#49978
rpl.events_time_zone          [ disabled ]  need to fix the timing
...
</pre><p>This file should be located in the suite directory.</p>
<hr>
<h2 class="anchored_heading" id="suiteopt-file"><code>suite.opt</code> file</h2>
<p>This file lists server options that will be added to the <code>mariadbd</code> command
line for every test of this suite. It can refer to environment variables with
the <code>$NAME</code> syntax. Shell meta-characters should be quoted. For example</p>
<pre class="fixed">--plugin-load=$AUTH_PAM_SO
--max-connections=40 --net_read_timeout=5
&#34;--replicate-rewrite-db=test-&gt;rewrite&#34;
</pre><p>Note that options may be put either on one line or on separate lines. It is a
good idea to start an option name with the <code class="fixed" style="white-space:pre-wrap">--loose-</code> prefix if
the server may or may not recognize the option depending on the configuration.
An unknown option in the <code>.opt</code> file will stop the server from starting, and
the test will be aborted.</p>
<p>This file should be located in the suite directory.</p>
<hr>
<h2 class="anchored_heading" id="other-opt-files">other <code>*.opt</code> files</h2>
<p>For every test or include file <code>somefile.test</code> or <code>somefile.inc</code>, mtr will
look for <code>somefile.opt</code>, <code>somefile-master.opt</code> and <code>somefile-slave.opt</code>.
These files have exactly the same syntax as the <code>suite.opt</code> above. Options
from these files will also be added to the server command line (all servers
started for this test, only master, or only slave respectively) for all
affected tests, for example, for all tests that include <code>somefile.inc</code>
directly or indirectly.</p>
<p>A typical usage example is <code>include/have_blackhole.inc</code> and
<code>include/have_blackhole.opt</code>. The latter contains the necessary command-line
options to load the Blackhole storage engine, while the former verifies that
the engine was really loaded. Any test that needs the Blackhole engine needs
only to start from <code>source include/have_blackhole.inc;</code> and the engine will
be automatically loaded for the test.</p>
<hr>
<h2 class="anchored_heading" id="mycnf-file"><code>my.cnf</code> file</h2>
<p>This is not the <code>my.cnf</code> file that tests from this suite will use, but rather
a <em>template</em> of it. It will be converted later to an actual <code>my.cnf</code>. If a
suite contains no <code>my.cnf</code> template, a default template,
<span>&mdash;</span> <code>include/default_my.cnf</code>
<span>&mdash;</span> will be used. Or <code>suite/rpl/my.cnf</code> if the test
includes <code>master-slave.inc</code> (it's one of the few bits of the old MySQL
<code>mysql-test-run</code> magic that we have not removed yet). Typically a suite
template will not contain a complete server configuration, but rather start
from</p>
<pre class="fixed">!include include/default_my.cnf
</pre><p>and then add the necessary modifications.</p>
<p>The syntax of <code>my.cnf</code> template is the same of a normal <code>my.cnf</code> file, with
a few extensions and assumptions. They are:</p>
<ul start="1"><li>For any group with the name <code>[mysqld.<strong>N</strong>]</code>, where <strong>N</strong> is a number, mtr
  will start one <code>mysqld</code> process. Usually one needs to have
  only <code>[mysqld.1]</code> group, and <code>[mysqld.2]</code> group for replication tests.
</li></ul>
<ul start="1"><li>There can be groups with non-standard names (<code>[foo]</code>, <code>[bar]</code>, whatever),
  not used by <code>mysqld</code>. The <code>suite.pm</code> files (see below) may use them
  somehow.
</li></ul>
<ul start="1"><li>Values can refer to each other using the syntax <code>@groupname.optionname</code>
  <span>&mdash;</span> these references be expanded as needed. For
  example<pre class="fixed">[mysqld.2]
master-port= @mysqld.1.port
</pre>
</li></ul>
<ul start="1" style="list-style: none"><li>it sets the value of the <code>master-port</code> in the <code>[mysqld.2]</code> group to the value of <code>port</code> in the <code>[mysqld.1]</code> group.
</li></ul>
<ul start="1"><li>An option name may start with a hash sign <code>#</code>. In the
  resulting <code>my.cnf</code> it will look like a comment, but it still can be
  referred to. For example:
</li></ul>
<pre class="fixed">[example]
#location = localhost:@mysqld.1.port
bar = server:@example.#location/data
</pre><ul start="1"><li>There is the <code>[ENV]</code> group. It sets values for the environment variables.
  For example<pre class="fixed">[ENV]
MASTER_MYPORT = @mysqld.1.port
</pre>
</li></ul>
<ul start="1" style="list-style: none"><li>Also, one can refer to values of environment variables via this
      group:<pre class="fixed">[mysqld.1]
user = @ENV.LOGNAME
</pre>
</li></ul>
<ul start="1"><li>There is the <code>[OPT]</code> group. It allows to invoke functions and
  generate values. Currently it contains only one option
  <span>&mdash;</span> <code>@OPT.port</code>. Every time this option is referred
  to in some other group in the <code>my.cnf</code> template, a new unique port number
  is generated. It will not match any other port number used by this test run.
  For example<pre class="fixed">[ENV]
SPHINXSEARCH_PORT = @OPT.port
</pre>
</li></ul>
<p>This file should be located in the suite directory.</p>
<hr>
<h2 class="anchored_heading" id="other-cnf-files">other <code>*.cnf</code> files</h2>
<p>For every test file <code>somefile.test</code> (but for not included files) mtr will
look for <code>somefile.cnf</code> file. If such a file exists, it will be used as a
template instead of suite <code>my.cnf</code> or a default <code>include/default_my.cnf</code>
templates.</p>
<hr>
<h2 class="anchored_heading" id="combinations-file"><code>combinations</code> file</h2>
<p>The <code>combinations</code> file defines few sets of alternative configurations, and
every test in this suite will be run many times - once for every configuration.
This can be used, for example, to run all replication tests in the <em>rpl</em>
suite for all three binlog format modes (row, statement, and mixed). A
corresponding <code>combinations</code> file would look as
following:</p>
<pre class="fixed">[row]
binlog-format=row

[stmt]
binlog-format=statement

[mix]
binlog-format=mixed
</pre><p>It uses <code>my.cnf</code> file syntax, with groups (where group names define
combination names) and options. But, despite the similarity, it is not a
<code>my.cnf</code> template, and it cannot use the templating extentions. Instead,
options from the <code>combinations</code> file are added to the server command line. In
this regard, combination file is closer to <code>suite.opt</code> file. And just like
it, combination file can use environment variables using the <code>$NAME</code> syntax.</p>
<p>Not all tests will necessarily run for all combinations. A particular test may
require to be run only in one specific combination. For example, in
replication, if a test can only be run with the row binlog format, it will have
<code>--binlog-format=row</code> in one of the <code>.opt</code> files. In this case, mtr will
notice that server command line already has an option that matches one of the
combinations, and will skip all other combinations for this particular test.</p>
<p>The <code>combinations</code> file should be located in the suite directory.</p>
<hr>
<h2 class="anchored_heading" id="other-combinations-files">other <code>*.combinations</code> files</h2>
<p>Just like with the <code>*.opt</code> files, mtr will use <code>somefile.combinations</code> file
for any <code>somefile.test</code> and <code>somefile.inc</code> that is used in testing. These
files have exactly the same format as a suite <code>combinations</code> file.</p>
<p>This can cause many combination files affecting one test file (if a test
includes two <code>.inc</code> files, and both of them have corresponding
<code>.combinations</code> files). In this case, mtr will run the test for all
combinations of combinations from both files. In <a href="/kb/en/what-is-mariadb-55/">MariaDB 5.5</a>, for example,
<code>rpl_init.inc</code> adds combinations for row/statement/mixed, and
<code>have_innodb.inc</code> adds combinations for innodb/xtradb. Thus any replication
test that uses innodb will be run six times.</p>
<hr>
<h2 class="anchored_heading" id="suitepm-file"><code>suite.pm</code> file</h2>
<p>This (optional) file is a perl module. It must declare a
package that inherits from <code>My::Suite</code>.</p>
<p>This file must normally end with <code>bless {}</code> <span>&mdash;</span> that
is it must return an object of that class.  It can also return a string
<span>&mdash;</span> in this case all tests in the suite will be skipped,
with this string being printed as a reason (for example "PBXT engine was not
compiled").</p>
<p>A suite class can define the following methods:</p>
<ul start="1"><li><code>config_files()</code>
</li><li><code>is_default()</code>
</li><li><code>list_cases()</code>
</li><li><code>servers()</code>
</li><li><code>skip_combinations()</code>
</li><li><code>start_test()</code>
</li></ul>
<p>A <code>config_files()</code> method returns a list of additional config files (besides
<code>my.cnf</code>), that this suite needs to be created. For every file it specifies a
function that will create it, when given a <code>My::Config</code> object. For example:</p>
<pre class="fixed"><span class="k">sub </span><span class="nf">config_files</span> <span class="p">{(</span>
    <span class="s">&#39;config.ini&#39;</span> <span class="o">=&gt;</span> <span class="o">\&amp;</span><span class="n">write_ini</span><span class="p">,</span>
    <span class="s">&#39;new.conf&#39;</span>   <span class="o">=&gt;</span> <span class="o">\&amp;</span><span class="n">do_new</span>
<span class="p">)}</span>
</pre><p>A <code>servers()</code> method returns a list of processes that needs to be started for
this suite. A process is specified as a [regex, hash] pair. The regular
expression must match a section in the <code>my.cnf</code> template (for example,
<code>qr/mysqld\./</code> corresponds to all <code>mysqld</code> processes), the hash contains
these options:</p>
<div class="cstm-style darkheader-nospace-borders"><table><tr><td><code>SORT</code></td><td>a number. Processes are started in the order of increasing <code>SORT</code> values (and stopped in the reverse order). <code>mysqld</code> has number 300.</td></tr>
<tr><td><code>START</code></td><td>a function to start a process. It takes two arguments, <code>My::Config::Group</code> and <code>My::Test</code>. If <code>START</code> is undefined a process will not be started.</td></tr>
<tr><td><code>WAIT</code></td><td>a function to wait for the process to be started. It takes <code>My::Config::Group</code> as an argument. Internally mtr first invokes <code>START</code> for all processes, then <code>WAIT</code> for all started processes.</td></tr>
</table>
</div><pre class="fixed"><span class="k">sub </span><span class="nf">servers</span> <span class="p">{(</span>
    <span class="sx">qr/^foo$/</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="n">SORT</span> <span class="o">=&gt;</span> <span class="mi">200</span><span class="p">,</span>  <span class="c1"># start foo before mysqld</span>
                   <span class="n">START</span> <span class="o">=&gt;</span> <span class="o">\&amp;</span><span class="n">start_foo</span><span class="p">,</span>
                   <span class="n">WAIT</span> <span class="o">=&gt;</span> <span class="o">\&amp;</span><span class="n">wait_foo</span> <span class="p">}</span>
<span class="p">)}</span>
</pre><p>See the <em>sphinx</em> suite for a working example.</p>
<p>A <code>list_cases()</code> method returns a complete list of tests for this suite. By
default it will be the list of files that have <code>.test</code> extension, but without
the extension. This list will be filtered by mtr, subject to different mtr
options (<code>--big-test</code>, <code>--start-from</code>, etc), the suite object does not have
to do it.</p>
<p>A <code>start_test()</code> method starts one test process, by default it will be
<code>mariadb-test</code>.  See the <em>unit</em> suite for a working example of
<code>list_cases()</code> and <code>start_test()</code> methods.</p>
<p>A <code>skip_combinations()</code> method returns a hash that maps file names (where
combinations are defined) to a list of combinations that should be skipped. As
a special case, it can disable a complete file by using a string instead of a
hash. For example</p>
<pre class="fixed"><span class="k">sub </span><span class="nf">skip_combinations</span> <span class="p">{(</span>
    <span class="s">&#39;combinations&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span> <span class="s">&#39;mix&#39;</span><span class="p">,</span> <span class="s">&#39;rpl&#39;</span> <span class="p">],</span>
    <span class="s">&#39;inc/many.combinations&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span> <span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;bb&#39;</span><span class="p">,</span> <span class="s">&#39;c&#39;</span> <span class="p">],</span>
    <span class="s">&#39;windows.inc&#39;</span> <span class="o">=&gt;</span> <span class="s">&quot;Not on windows&quot;</span><span class="p">,</span>
<span class="p">)}</span>
</pre><p>The last line will cause all tests of this suite that include <code>windows.inc</code>
to be skipped with the reason being "Not on windows".</p>
<p>An <code>is_default()</code> method returns 1 if this particular suite should be run by default, when the <code>mariadb-test-run.pl</code> script is run without explicitly specified test suites or test cases.</p>
<hr>
<h2 class="anchored_heading" id="sh-files"><code>*.sh</code> files</h2>
<p>For every test file <code>sometest.test</code> mtr looks for <code>sometest-master.sh</code> and
<code>sometest-slave.sh</code>. If either of these files is found, it will be run before
the test itself.</p>
<hr>
<h2 class="anchored_heading" id="require-files"><code>*.require</code> files</h2>
<p>These files are obsolete. Do not use them anymore. If you need to skip a test
use the <code>skip</code> command instead.</p>
<hr>
<h2 class="anchored_heading" id="rdiff-files"><code>*.rdiff</code> files</h2>
<p>These files also define what the test result should be. But unlike <code>*.result</code>
files, they contain a patch that should be applied to one result file to create
a new result file. This is very useful when a result of some test in one
combination differs slightly from the result of the same test, but in another
combination. Or when a result of a test in an overlay differs from the test
result in the overlayed suite.</p>
<p>It is quite difficult to edit <code>.rdiff</code> files to update them after the test
file has changed. But luckily, it is never needed. When a test fails, mtr
creates a <code>.reject</code> file. Having it, one can create <code>.rdiff</code> file as easy
as (for example)</p>
<pre class="fixed">diff -u main/foo.result main/foo.reject &gt; main/foo,comb.rdiff
or
diff -u main/foo.result main/foo,comb.reject &gt; main/foo,comb.rdiff
</pre><p>Some example:</p>
<pre class="fixed wrap">diff -u main/innodb_ext_key.result main/innodb_ext_key,off.reject &gt; main/innodb_ext_key,off.rdiff

diff -u suite/sys_vars/r/sysvars_server_notembedded.result suite/sys_vars/r/sysvars_server_notembedded,32bit.reject &gt; suite/sys_vars/r/sysvars_server_notembedded,32bit.rdiff
</pre><p>Note: This will also add a timestamp in the .rdiff file, so if you are submitting a patch you could remove it manually. If the same .rdiff file is used for multiple combinations, then it would be good to omit in the header that would identify the combination, to allow git to pack the repository better. Example:</p>
<pre class="fixed">--- testname.result
+++ testname.reject
</pre><p>Because a combination can be part of the <code>.result</code> or <code>.rdiff</code> file name,
mtr has to look in many different places for a test result. For example,
consider a test <code>foo.test</code> in the combination pair <code>aa,bb</code>, that is run
in the overlay <em>rty</em> of the suite <em>qwe</em>, in other words, for the test that
mtr prints as</p>
<pre class="fixed">qwe-rty.foo &#39;aa,bb&#39;                     [ pass ]
</pre><p>For this test a result can be in</p>
<ul start="1"><li>either <code>.rdiff</code> or <code>.result</code> file
</li><li>either in the overlay "<code>rty/</code>" or in the overlayed suite "<code>qwe/</code>"
</li><li>with or without combinations in the file name ("<code>,a</code>", "<code>,b</code>",
  "<code>,a,b</code>", or nothing)
</li></ul>
<p>which means any of the following 15 file names can be used:</p>
<ol start="1"><li><code>rty/r/foo,aa,bb.result</code>
</li><li><code>rty/r/foo,aa,bb.rdiff</code>
</li><li><code>qwe/r/foo,aa,bb.result</code>
</li><li><code>qwe/r/foo,aa,bb.rdiff</code>
</li><li><code>rty/r/foo,aa.result</code>
</li><li><code>rty/r/foo,aa.rdiff</code>
</li><li><code>qwe/r/foo,aa.result</code>
</li><li><code>qwe/r/foo,aa.rdiff</code>
</li><li><code>rty/r/foo,bb.result</code>
</li><li><code>rty/r/foo,bb.rdiff</code>
</li><li><code>qwe/r/foo,bb.result</code>
</li><li><code>qwe/r/foo,bb.rdiff</code>
</li><li><code>rty/r/foo.result</code>
</li><li><code>rty/r/foo.rdiff</code>
</li><li><code>qwe/r/foo.result</code>
</li></ol>
<p>They are listed, precisely, in the order of preference, and mtr will walk that
list from top to bottom and the first file that is found will be used.</p>
<p>If this found file is a <code>.rdiff</code>, mtr continues walking down the list until
the first <code>.result</code> file is found. A <code>.rdiff</code> is applied to that
<code>.result</code>.</p>
<hr>
<h2 class="anchored_heading" id="valgrindsupp-file"><code>valgrind.supp</code> file</h2>
<p>This file defines valgrind suppressions, and it is used when mtr is started
with a <code>--valgrind</code> option.</p>

    </div>


        
            <div id="subscribe" class="well well-small hide hidden-print"
                 data-subscribe-url="/kb/en/mariadb-test-auxiliary-files/+subscriptions/add"
                 data-unsubscribe-url="/kb/en/mariadb-test-auxiliary-files/+subscriptions/remove">
            </div>
        

        
        
    
        <div class="simple_section_nav">
            <ul class="nav nav-pills">
                
                    <li><a href="/kb/en/mariadb-test-overview/">
                        ← mariadb-test Overview
                    </a>
                    </li>
                
                
                    <li><a href="/kb/en/mariadb-test/">
                        ↑ mariadb-test ↑
                    </a>
                    </li>
                
                
                    <li class="pull-right"><a href="/kb/en/mariadb-test-run-pl-options/">
                        mariadb-test-run.pl Options →
                    </a>
                    </li>
                
            </ul>
        </div>
    

        

        
        <h2>Comments</h2>
        
    
    <div id="comments" data-node-id="2436" data-comments-url="/kb/en/mariadb-test-auxiliary-files/+comments"
         data-reply-url="/kb/en/mariadb-test-auxiliary-files/comments/post/">
        Comments loading...
    </div>

        

    </div>


                    <div id="content_disclaimer" class="graybox">
                        Content reproduced on this site is the property of its respective owners,
                        and this content is not reviewed in advance by MariaDB. The views, information and opinions
                        expressed by this content do not necessarily represent those of MariaDB or any other party.
                    </div>
                </div>
            </section>

            
                <div id="right_bar" class="col-md-2">
                    
    
        
        <ul class="section_navigation well well-small hidden-xs hidden-sm">
            
                <li class="parent"><a href="/kb/en/mariadb-test/">
                    ↑ mariadb-test ↑
                </a>
                </li>
            
            
                
                    <li>
                        <a href="/kb/en/mariadb-test-overview/">
                            
                            mariadb-test Overview
                        </a>
                    </li>
                
            
                
                    <li class="active">
                        <span>mariadb-test Auxiliary Files</span>
                        
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/mariadb-test-run-pl-options/">
                            
                            mariadb-test-run.pl Options
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/pausing-mariadb-test-run-pl/">
                            
                            Pausing mariadb-test-run.pl
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/mariadb-test-and-mariadb-test-embedded/">
                            <span class="pull-right not_primary"></span>
                            mariadb-test and mariadb-test-embedded
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/new-features-for-mysqltest-in-mariadb/">
                            
                            New Features for mysqltest in MariaDB
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/debugging-mariadb-with-a-debugger/">
                            <span class="pull-right not_primary"></span>
                            Debugging MariaDB With a Debugger
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/the-debug-sync-facility/">
                            
                            The Debug Sync Facility
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/dgcov/">
                            <span class="pull-right not_primary"></span>
                            Code Coverage with dgcov
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/installing-minio-for-usage-with-mariadb-test-run/">
                            
                            Installing MinIO for Usage With mariadb-test-run
                        </a>
                    </li>
                
            
        </ul>
    
    

                </div>
            
        </div>
    </div>
</div>

<!-- Footer -->
<footer id="footer">
    <div class="footer">
        <div class="container">
            <div class="row">
                <div class="col-xs-12">
                    <ul class="list-inline text-center footer-nav">
                        <li>
                            <h5>
                                <a href="https://mariadb.com/products" title="Products">Products</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/services" title="Services">Services</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/pricing" title="Pricing">Pricing</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/resources" title="Resources">Resources</a>
                            </h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/about-us" title="About MariaDB">About Us</a></h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/download" title="Download">Download MariaDB</a></h5>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="row row-10">
                
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div id="block-footerformcontact" class="block block-block-content block-block-contentd754ee1b-3cc9-40e7-9ef4-f504f1197fb1">
                        
                            <h5 style="font-weight: 400;">Subscribe to our newsletter!</h5>
                            <script src="//app-sj15.marketo.com/js/forms2/js/forms2.min.js"></script><form id="mktoForm_1498"></form>
                            <script>
                                <!--//--><![CDATA[// ><!--
                                MktoForms2.loadForm("//app-sj15.marketo.com", "573-PXI-984", 1498);
                                //--><!]]]]><![CDATA[>
                                //--><!]]>
                            </script>
                        
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div class="footer-copyright">
                        <div class="text-center">
                            <ul class="list-inline no-margin">
                                <li>
                                    <a href="/legal" title="Legal">Legal</a>
                                </li>
                                <li>
                                    <a href="/privacy-policy" title="Privacy Policy">Privacy Policy</a>
                                </li>
                                <li>
                                    <a href="/cookie-policy/" title="Cookies">Cookie Policy</a>
                                </li>
                            </ul>
                            <p>Copyright &copy; 2025 MariaDB. All rights reserved.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
</footer>
</div>

<div id="ajax_loading">
    <img src="/kb/static/images/ajax-loader.a51c5608d01a.gif" />
</div>

    <!-- Google Tag Manager -->
    <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-MK2847"
                      height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
            '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MK2847');</script>
    <!-- End Google Tag Manager -->

</body>

<script type="text/javascript" src="/kb/static/js/main.1587e3a666fc.js" charset="utf-8"></script>

</html>