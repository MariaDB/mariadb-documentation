<?xml version="1.0" encoding="utf-8"?>
<rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title>MariaDB Knowledge Base Comments for: TIMESTAMP</title><link>https://mariadb.com/kb/en/timestamp/+comments/feed/</link><description></description><atom:link href="https://mariadb.com/kb/en/timestamp/+comments/feed/" rel="self"></atom:link><language>en-us</language><lastBuildDate>Wed, 16 Oct 2024 00:10:51 +0000</lastBuildDate><item><title>TIMESTAMP &amp; timezone problems</title><link>https://mariadb.com/kb/en/timestamp/+comments/3653</link><description>&lt;p&gt;When using the TIMESTAMP type in timezone settings with daylight savings, you must be aware that:&lt;/p&gt;
&lt;ul start="1"&gt;&lt;li&gt;Storing data in the column will be ambiguous at the end of daylight savings, because the local-time hour gets repeated twice.
&lt;/li&gt;&lt;/ul&gt;
&lt;ul start="1"&gt;&lt;li&gt;At the start of daylight savings, when clocks are turned forwards, there's a "missing hour".  Technically times in this hour aren't valid, but if you do try to store a time from this missing hour in a TIMESTAMP column and then read it back, you WON'T get out what you put in! (Contrary to what the MySQL docs state). 
&lt;/li&gt;&lt;/ul&gt;
&lt;ul start="1"&gt;&lt;li&gt;If you ORDER BY your timezone column, it will order by the internal UTC representation; &lt;em&gt;displayed&lt;/em&gt; times can therefore be out of order when daylight savings ends.
&lt;/li&gt;&lt;/ul&gt;
&lt;ul start="1"&gt;&lt;li&gt;HOWEVER, any computation will use the derived local time, even in the ORDER BY clause, so if ts is a TIMESTAMP column, "ORDER BY ts" "ORDER BY &amp;lt;column number&amp;gt;", or "ORDER BY UNIX_TIMESTAMP(ts)" give UTC-time ordering, but "ORDER BY ts+0", "ORDER BY ts + INTERVAL 1 SECOND", "ORDER BY CAST(ts AS datetime)" will be ordered by &lt;em&gt;local&lt;/em&gt; time, which may result in a different row ordering!
&lt;/li&gt;&lt;/ul&gt;
&lt;ul start="1"&gt;&lt;li&gt;Similarly, comparisons between timestamp values, i.e.  &lt;em&gt;ts1&lt;/em&gt;&amp;lt;&lt;em&gt;ts2&lt;/em&gt;  etc are always carried out using local-time values.  So the result of this comparison can CHANGE depending on the timezone you set, if the values are on different sides of the turn-the-clocks-back point:  IT IS NOT A COMPARISON BETWEEN UTC TIMESTAMPS!!!  To do that, compare UNIX_TIMESTAMP(&lt;em&gt;ts1&lt;/em&gt;)&amp;lt;UNIX_TIMESTAMP(&lt;em&gt;ts2&lt;/em&gt;)
&lt;/li&gt;&lt;/ul&gt;
&lt;p&gt;These problems can be largely obviated by setting the server timezone to UTC (temporarily, if you prefer), i.e.:&lt;/p&gt;
&lt;pre class="fixed"&gt;    SET @oldTZ := @@time_zone;
    SET @@time_zone := '+00:00';
    #
    # Do something with timestamps here; it'll work reliably[*] as everything is in UTC
    #
    SET @@time_zone := @oldTZ;
&lt;/pre&gt;&lt;p&gt;[*] Actually, not entirely true, as there may also occasionally be leap-seconds, represented by hh:59:59 repeating twice.  So events with these timestamps may be more than one second apart, and there isn't a 1-1 correspondence between actual seconds and displayed seconds; and when storing decimal seconds (milliseconds, etc), once again all the local-times-are-out-of order issues can arise (even in the UTC timezone).  See the following page in the MySQL docs:  &lt;a href="https://dev.mysql.com/doc/refman/8.0/en/time-zone-leap-seconds.html"&gt;https://dev.mysql.com/doc/refman/8.0/en/time-zone-leap-seconds.html&lt;/a&gt;&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Dean Trower</dc:creator><guid>https://mariadb.com/kb/en/timestamp/+comments/3653</guid></item><item><title>Timezones</title><link>https://mariadb.com/kb/en/timestamp/+comments/2433</link><description>&lt;p&gt;It's important to note that MariaDB (and MySQL) both have the notion of a server timezone - when writing an explicit value to a timestamp column, time data is converted from the server timezone into UTC for storage, then converted back to server time when reading.&lt;/p&gt;
&lt;p&gt;If you're planning on using the timestamp data type to hold timestamps which already in UTC, it's probably worth setting your server timezone to UTC. Alternatively, pay the size penalty and use the DATETIME type, which isn't affected by timezones.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://mariadb.com/kb/en/mariadb/time-zones/"&gt;https://mariadb.com/kb/en/mariadb/time-zones/&lt;/a&gt;&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Andy Walker</dc:creator><guid>https://mariadb.com/kb/en/timestamp/+comments/2433</guid></item><item><title>Re: TIMESTAMP end range is incorrect.</title><link>https://mariadb.com/kb/en/timestamp/+comments/1715</link><description>&lt;p&gt;Thanks, this has been fixed (the limit is actually 2038-01-19 05:14:07)&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Ian Gilfillan</dc:creator><guid>https://mariadb.com/kb/en/timestamp/+comments/1715</guid></item><item><title>Re: TIMESTAMP</title><link>https://mariadb.com/kb/en/timestamp/+comments/1256</link><description>&lt;p&gt;thanks to update the documentation.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Max Dix</dc:creator><guid>https://mariadb.com/kb/en/timestamp/+comments/1256</guid></item><item><title>Re: TIMESTAMP</title><link>https://mariadb.com/kb/en/timestamp/+comments/1255</link><description>&lt;p&gt;I missed that this has been possible since MySQL 5.6.5 and &lt;a href="/kb/en/mariadb-1001-release-notes/"&gt;MariaDB 10.0.1&lt;/a&gt;, so it is already possible in the current stable MariaDB release. The limit still applies to the old versions MariaDB and MySQL 5.5.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Ian Gilfillan</dc:creator><guid>https://mariadb.com/kb/en/timestamp/+comments/1255</guid></item><item><title>Re: TIMESTAMP</title><link>https://mariadb.com/kb/en/timestamp/+comments/1254</link><description>&lt;p&gt;it s clear that is per-table limit.
i got an error while i try to restore from mysql5.6 to maria55 due the presence of two default values "CURRENT_TIMESTAMP''. That limits does not exist anymore on mysql56. I am not discussing or suggest any 'strategy' or 'improve portability', i got this error and i need to deal as soon as i have to restore not only on test environment but also on production. 
that s why i ask, if is very useful or not  its a matter of opinion i guess.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Max Dix</dc:creator><guid>https://mariadb.com/kb/en/timestamp/+comments/1254</guid></item><item><title>Re: TIMESTAMP</title><link>https://mariadb.com/kb/en/timestamp/+comments/1253</link><description>&lt;p&gt;No, I'm not aware of any plans to remove this limitation - I can't see that it would be very useful? It's a per-table limit, in case that wasn't clear in the original description. &lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Ian Gilfillan</dc:creator><guid>https://mariadb.com/kb/en/timestamp/+comments/1253</guid></item></channel></rss>