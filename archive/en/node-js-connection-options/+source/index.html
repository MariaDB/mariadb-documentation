<!DOCTYPE html>
<html>
<head data-cookie-domain=""
      data-cookie-path="/">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="apple-touch-icon" sizes="180x180" href="/kb/static/images/favicons/apple-touch-icon.159e713979be.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/kb/static/images/favicons/favicon-32x32.bc0ac1d5d11e.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/kb/static/images/favicons/favicon-16x16.5801f8f0f34e.png">
    <link rel="shortcut icon" href="/kb/static/images/favicons/favicon.d122d305dee4.ico" type="image/x-icon" />

    <title>Node.js Connection Options - Source - MariaDB Knowledge Base</title>

    <link href="/kb/static/css/main.f7633538c846.css" rel="stylesheet" type="text/css" />

    
        <meta name="robots" content="noindex, nofollow">
    

    

    <!-- FB Open Graph tags -->
    <meta property="og:title" content="Node.js Connection Options - Source" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://mariadb.com/kb/en/node-js-connection-options/+source/" />
    <meta property="og:image" content="http://mariadb.comaskmonty-logo.png" />
    <meta property="og:site_name" content="MariaDB KnowledgeBase" />
    <meta property="fb:admins" content="514852603" />
    <meta property="og:description" content="" />

    <meta name="description" content="" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="//fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet"/>
    
</head>
<body class="mpkb nodes autoresize nodes_source jqui" id="nodes_source">





<div id="menu-mobile" class="visible-sm visible-xs">

    <div>
        <div id="mobile-close-menu" class="text-right">
            <a href="javascript:void(0)" title="Close Menu" id="back-main" class="toggle-menu">X<span></span></a>
        </div>
    </div>
    <div class="mainmenu-mobile">
        <ul class="ls-none ul-menu">
            <li data-sub="submenu5"><a class="open-form-search" href="/kb/search/" title="Search">Search </a></li>
            <li data-sub="submenu0"><a href="/products" title="Products">Products</a><span class="arrow-main"></span></li>
            <li data-sub="submenu1"><a href="/services" title="Services">Services</a><span class="arrow-main"></span></li>
            <li data-sub="submenu2"><a href="/resources" title="Resources">Resources</a><span class="arrow-main"></span></li>
            <li data-sub="submenu3"><a href="/about-us" title="About">About</a><span class="arrow-main"></span></li>
            <li data-sub="submenu4"><a href="/contact" title="Contact">Contact</a></li>
        </ul>
    </div>

    <div class="nav-top-mobile">
        <div class="select-box form">

            <ul class="inline-block-md mb-none top-nav">
                <li>

                </li>
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/node-js-connection-options/+source/"> Login</a>
                    </li>
                
            </ul>



        </div>
        <p class="text-center copyright">Copyright &copy; 2024 MariaDB. All rights reserved.</p>
    </div>
</div>
<div class="violator-wrap d-none" id="top_violator">
    <div class="container">
        <div class="row">
            <div class="col-xs-12 col-sm-12">
                <div class="violator-outer">
                    <div class="violator-inner">
                        <div class="row">
                            <div class="col-xs-12 col-sm-9 col-lg-7 col-lg-offset-2" id="top_violator_content">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="content-link" target="_blank" rel="nofollow noreferrer">
                                    <span>The Ultimate Guide to High Availability with MariaDB</span>
                                </a>
                            </div>
                            <div class="col-xs-12 col-sm-3" id="top_violator_cta">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="btn btn-mariadb" target="_blank" rel="nofollow noreferrer">Download Now</a>
                            </div>
                        </div>
                    </div>
                    <button type="button" class="btn btn-link close-btn">
                        <svg xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 24 24" width="15px" height="15px"><path d="M 4.9902344 3.9902344 A 1.0001 1.0001 0 0 0 4.2929688 5.7070312 L 10.585938 12 L 4.2929688 18.292969 A 1.0001 1.0001 0 1 0 5.7070312 19.707031 L 12 13.414062 L 18.292969 19.707031 A 1.0001 1.0001 0 1 0 19.707031 18.292969 L 13.414062 12 L 19.707031 5.7070312 A 1.0001 1.0001 0 0 0 18.980469 3.9902344 A 1.0001 1.0001 0 0 0 18.292969 4.2929688 L 12 10.585938 L 5.7070312 4.2929688 A 1.0001 1.0001 0 0 0 4.9902344 3.9902344 z"/></svg>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="wrapper">
<div id="top-nav">
    <div class="container">
        <ul class="hidden-sm hidden-xs" >
            <li><a href="https://mariadb.com/kb/">Knowledge Base</a></li>
            <li><a href="https://mariadb.com/contact/">Contact</a></li>
            
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/node-js-connection-options/+source/" rel="nofollow">Login</a>
                    </li>
                
            
            
            <li id="search-form">
                <form action="/kb/en/+search/" method="get" id="search-block-form" accept-charset="UTF-8">
                    <input id="search" title="Enter the terms you wish to search for."
                           placeholder="Search . . ." type="text"
                           name="q" value="" size="15" maxlength="128" class="form-text"
                           data-autocomplete-url="/kb/en/+search/autocomplete/">
                    <input type="hidden" name="quick" value="1" />
                    <input type="hidden" name="source" value="kb" />
                </form>
            </li>
            <li><a id="search-toggler" href="/kb/search/">Search</a></li>
            
        </ul>
    </div>
</div>
<div id="navbar-bottom" class="navbar">
    <div class="container">
        
        
        
        
        <div class="row">
            <div class="col-md-3 col-sm-9 col-xs-9">
                <a class="brand" href="/" title="MariaDB">
                    <img src="/kb/static/images/logo-2018-black.95f5978ae14d.png">
                </a>
            </div>
            <div class="col-md-9 hidden-sm hidden-xs">
                <div class="main-menu">
                    <ul id="main-menu" class="nav navbar-nav inline-block-sm">
    <li class="has-sub full-menu">
        <a href="/products" title="Products">Products</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/services" title="Services">Services</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/pricing" title="Pricing">Pricing</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/resources" title="Resources">Resources</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/about-us" title="About Us">About Us</a>
    </li>
    <li class="">
        <a class="button electric-eel small top-bar-right-download" href="/downloads/">Download</a>
    </li>
</ul>
                </div>
            </div>
            <div class="col-md-3 visible-sm visible-xs col-sm-3 col-xs-3 ps-rv">
                <div class="navbar-header text-right pull-right">
                    <button type="button" class="menu-control toggle-menu" id="open-menu">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="main">
    <div class="container">
        

        <div id="subheader1" class="clearfix">
            <div class="pull-left">
                
                <div id="breadcrumbs" class="breadcrumb">
                    <a href="/kb/en/">Knowledge Base</a>
                    


    
    » <a class="crumb" href="/kb/en/server-client-software/">Server &amp; Client Software</a>
    

    
    » <a class="crumb" href="/kb/en/client-libraries/">Client Libraries</a>
    

    
    » <a class="crumb" href="/kb/en/connectors/">Application Programming Interfaces</a>
    

    
    » <a class="crumb" href="/kb/en/nodejs-connector/">Node.js Connector</a>
    


    » <a class="node_link crumb" href="/kb/en/node-js-connection-options/">Node.js Connection Options</a>


                </div>
                
            </div>
        </div>
    </div>
    <div class="container" id="container-main">
        <div class="row">
            
            
                
                <aside id="sidebar-first" class="sidebar col-md-2 hidden-xs hidden-sm hidden-print">
                    
                        
                        <ul id="category_menu" class="nav nav-pills nav-stacked">
                            <li><a href="/kb/en/">Home</a></li>
                            
                                
                                    <li><a href="/kb/en/+questions/">Open Questions</a></li>
                                
                                <li><a href="/kb/en/documentation/">MariaDB Server</a></li>
                                <li><a href="/kb/en/maxscale/">MariaDB MaxScale</a></li>
                                <li><a href="/kb/en/mariadb-columnstore/">MariaDB ColumnStore</a></li>
                                <li><a href="/kb/en/connectors/">Connectors</a></li>
                            

                        </ul>
                    

                    
                        <div>
    

<div class="well well-small box actions"><div>

        <a class="btn btn-block btn-small" href="/kb/en/node-js-connection-options/">Return to article</a>
    
</div>
</div>

</div>
                    

                    

































                </aside>
            
            
            
                
            
            
            <section id="content" class="limited_width col-md-10 clearfix">
                
                    <h1>Node.js Connection Options - Source</h1>
                

                



                <div>
                    

    

    
    <div class="revision_info">
        <dl class="table">
            <dt>Revision</dt>
            <dd><a href="/kb/en/node-js-connection-options/+r/128950/">128950</a></dd>
            <dt>User</dt>
            <dd>
<span class="user" id="user-3114">
<a href="/kb/user/id/3114" title="Diego Dupin">Diego Dupin</a>
</span></dd>
            <dt>Date</dt>
            <dd>

<span class="datetime" title="2023-08-21 09:58">2023-08-21 09:58</span></dd>
        </dl>
    </div>
    


    

    
        
        <textarea id="answer_source" class="creole_source autogrow">&lt;&lt;toc&gt;&gt;
= Connection Options
* [[#essential-option|Essential options]]
* [[#support-for-big-integer|Support for big integer]]
* [[#ssl|Ssl]]
* [[#configuration|Configuration]]
* [[#certificate-validation|Certificate validation]]
* [[#one-way-ssl-authentication|One-way SSL authentication]]
* [[#two-way-ssl-authentication|Two-way SSL authentication]]
* [[#other-options|Other options]]
* [[#faq|F.A.Q.]]


== Essential Options


&lt;&lt;style class=&#34;darkheader-nospace-borders&#34;&gt;&gt;
|= Option |= Description |=Type |=Default
|**user**| User to access database. |//string//| |
|**password**| User password. |//string//| | 
|**host**| IP address or DNS of database server. //Not used when using the socketPath option//. |//string//|&#34;localhost&#34;|
|**port**| Database server port number. |//integer//|3306|
|**database**| Default database to use when establishing the connection. |//string//| |
|**socketPath**| Permit connecting to the database via Unix domain socket or named pipe, if the server allows it. |//string//| |
|**compress**| Compress exchanges with database using gzip. This can give you better performance when accessing a database in a different location. |//boolean//|false|
|**connectTimeout**| Connection timeout in milliseconds. |//integer//|10 000|
|**socketTimeout**| Socket timeout in milliseconds after the connection is established. |//integer//|0|
|**rowsAsArray**| Return resultsets as array, rather than a JSON object. This is a faster way to get results.  For more information, see the [[../README.md#querysql-values---promise|Promise]] and [[callback-api.md#querysql-values-callback---emoitter|Callback]] query implementations. |//boolean//|false|
&lt;&lt;/style&gt;&gt;

== Big Integer Support
Integers in JavaScript use IEEE-754 representation. This means that Node.js cannot exactly represent integers in the ±9,007,199,254,740,991 range. However, MariaDB does support larger integers.


This means that when the value set on a column is not in the [[https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/isSafeInteger|safe]] range, the default implementation receives an inexact representation of the number.


The Connector provides two options to address this issue.


&lt;&lt;style class=&#34;darkheader-nospace-borders&#34;&gt;&gt;
|= Option |= Description |=Type |=Default
|**bigNumberStrings**| When an integer is not in the safe range, the Connector interprets the value as a string|//boolean//. |false|
|**supportBigNumbers**| When an integer is not in the safe range, the Connector interprets the value as a [[https://www.npmjs.com/package/long|Long]] object. |//boolean//|false|
&lt;&lt;/style&gt;&gt;

== SSL
The Connector can encrypt data during transfer using the Transport Layer Security (TLS) protocol. TLS/SSL allows for transfer encryption, and can optionally use identity validation for the server and client.


&lt;&lt;style class=&#34;bluebox&#34;&gt;&gt;
The term SSL (Secure Sockets Layer) is often used interchangeably with TLS, although strictly-speaking the SSL protocol is the predecessor of TLS, and is not implemented as it is now considered insecure.
&lt;&lt;/style&gt;&gt;

There are two different kinds of SSL authentication:
* **One-Way SSL Authentication:** The client verifies the certificate of the server. This allows you to encrypt all exchanges and make sure that you are connecting to the expected server (to avoid a man-in-the-middle attack).
* **Two-Way SSL Authentication** The client verifies the certificate of the server, the server verifies the certificate of the client. This is also called mutual authentication or client authentication. When using this system, the client also requires a dedicated certificate.


=== Server Configuration
In order to use SSL, you need to ensure that the MariaDB Server is correctly configured. You can determine this using the [[ssltls-system-variables/#have_ssl|have_ssl]] system variable.


&lt;&lt;code  lang=&#34;sql&#34;&gt;&gt;
SHOW VARIABLES LIKE &#39;have_ssl&#39;;

+---------------+----------+
| Variable_name | Value    |
+---------------+----------+
| have_ssl      | DISABLED |
+---------------+----------+
&lt;&lt;/code&gt;&gt;
A value of NO indicates that MariaDB was compiled without support for TLS.  DISABLED means that it was compiled with TLS support, but it&#39;s currently turned off.  In order to use SSL with the Connector, the server must return YES, indicating that TLS support is available and turned on.
For more information, see the [[secure-connections/|MariaDB Server]] documentation.


=== User Configuration
Enabling the [[mysqld-options/#-ssl|ssl option]] on the server, the Connector uses one-way SSL authentication to connect to the server. Additionally, it&#39;s recommended that you also configure your users to connect through SSL.  This ensures that their accounts can only be used with an SSL connection.


For [[grant|GRANT statements]], use the [[grant/#per-account-ssltls-options|REQUIRE SSL]] option for one-way SSL authentication and the [[grant/#per-account-ssltls-options|REQUIRE X509]] option for two-way SSL authentication.  For more information, see the [[create-user|CREATE USER]] documentation.


&lt;&lt;code  lang=&#34;sql&#34;&gt;&gt;
CREATE USER &#39;johnSmith&#39;@&#39;%&#39; IDENTIFIED BY PASSWORD(&#39;passwd&#39;);
GRANT ALL ON company.* TO &#39;johnSmith&#39;@&#39;%&#39; REQUIRE SSL;
&lt;&lt;/code&gt;&gt;
Now when this user attempts to connect to MariaDB without SSL, the server rejects the connection.


=== Configuration

* ssl: boolean/JSON object.



JSON object:


&lt;&lt;style class=&#34;darkheader-nospace-borders&#34;&gt;&gt;
|= Option |= Description |=Type |=Default
|**checkServerIdentity**|function(servername, cert) to replace SNI default function|//Function//| |
|**minDHSize**|Minimum size of the DH parameter in bits to accept a TLS connection|//number//|1024| 
|**pfx**|Optional PFX or PKCS12 encoded private key and certificate chain. Encrypted PFX will be decrypted with passphrase if provided|*string / string[] / Buffer / Buffer[] / //Object[]//| | 
|**key**|Optional private keys in PEM format. Encrypted keys are decrypted with passphrase if provided|*string / string[] / //Buffer// / //Buffer[]// / //Object[]//| | 
|**passphrase**|Optional shared passphrase used for a single private key and/or a PFX|//string//| | 
|**cert**|Optional cert chains in PEM format. One cert chain should be provided per private key|//string / string[] / Buffer / Buffer[]//| | 
|**ca**|Optionally override the trusted CA certificates. Default is to trust the well-known CAs curated by Mozilla. For self-signed certificates, the certificate is its own CA, and must be provided|//string / string[] / Buffer / Buffer[]//| | 
|**ciphers**|Optional cipher suite specification, replacing the default|//string//| | 
|**honorCipherOrder**|Attempt to use the server&#39;s cipher suite preferences instead of the client&#39;s|//boolean//| | 
|**ecdhCurve**|A string describing a named curve or a colon separated list of curve NIDs or names, for example P-521:P-384:P-256, to use for ECDH key agreement, or false to disable ECDH. Set to auto to select the curve automatically|//string//|tls.DEFAULT_ECDH_CURVE| 
|**clientCertEngine**|Optional name of an OpenSSL engine which can provide the client certificate|//string//| | 
|**crl**|Optional PEM formatted CRLs (Certificate Revocation Lists)|//string / string[] / Buffer / Buffer[]//| | 
|**dhparam**|Diffie Hellman parameters, required for Perfect Forward Secrecy|//string / Buffer//| | 
|**secureProtocol**|Optional SSL method to use, default is &#34;SSLv23_method&#34;|//string//| | 
&lt;&lt;/style&gt;&gt;
The Connector uses the Node.js implementation of TLS.  For more information, see the [[https://nodejs.org/api/tls.html#tls_tls_connect_options_callback|Node.js TLS API]] documentation.


=== Certificate Validation
==== Trusted CA
By default, Node.js trusts the well-known root Certificate Authorities (CA), based on Mozilla. For a complete list, (including the popular and free Let&#39;s Encrypt), see the [[https://ccadb-public.secure.force.com/mozilla/IncludedCACertificateReport|CA Certificate List]].


When using a certificate signed with a certificate chain from a root CA known to Node.js, the only configuration you need to do is enable the ##ssl## option.


==== Certificate Chain Validation
A certificate chain is a list of certificates that were issued from the same Certification Authority hierarchy. In order for any certificate to be validated, all certificates in the chain have to be validated.


In cases where intermediate or root certificates are not trusted by the Connector, the Connector rejects the connection and issues an error.


==== Hostname Verification (SNI)
Certificates can provide hostname verification to the driver.  By default this is done against the certificate&#39;s subjectAlternativeName DNS name field.


=== One-way SSL Authentication
When the server certificate is signed using the certificate chain that uses a root CA known in the JavaScript trust store, setting the ##ssl## option enables one-way SSL authentication.


For instance,


&lt;&lt;code  lang=&#34;javascript&#34;&gt;&gt;
const mariadb = require(&#39;mariadb&#39;);
mariadb
 .createConnection({
   host: &#39;myHost.com&#39;, 
   ssl: true, 
   user: &#39;myUser&#39;, 
   password:&#39;MyPwd&#39;, 
   database:&#39;db_name&#39;
 }).then(conn =&gt; {})
&lt;&lt;/code&gt;&gt;
When the server uses a self-signed certificate or uses an intermediate certificate, there are two different possibilities:


In non-production environments, you can tell the Connector to trust all certificates by setting rejectUnauthorized to false.  Do **NOT** use this in production.


&lt;&lt;code  lang=&#34;javascript&#34;&gt;&gt;
//connecting
mariadb
 .createConnection({
   host: &#39;myHost.com&#39;, 
   ssl: {
	 rejectUnauthorized: false
   }, 
   user: &#39;myUser&#39;, 
   password:&#39;MyPwd&#39;, 
 }).then(conn =&gt; {})
&lt;&lt;/code&gt;&gt;
A more secure alternative is to provide the certificate chain to the Connector.


&lt;&lt;code  lang=&#34;javascript&#34;&gt;&gt;
const fs = require(&#34;fs&#34;);
const mariadb = require(&#39;mariadb&#39;);

//reading certificates from file
const serverCert = [fs.readFileSync(&#34;server.pem&#34;, &#34;utf8&#34;)];

//connecting
mariadb
 .createConnection({
   user: &#34;myUser&#34;,
   host: &#34;myHost.com&#34;,
   ssl: {
	 ca: serverCert
   }
 }).then(conn =&gt; {})
&lt;&lt;/code&gt;&gt;

==== Using Specific TLS Protocols or Ciphers
In situations where you don&#39;t like the default TLS protocol or cipher or where you would like to use a specific version, you force the Connector to use the one you want using the ##secureProtocol## and ##cipher## options.


For instance, say you want to connect using TLS version 1.2:


&lt;&lt;code  lang=&#34;javascript&#34;&gt;&gt;
//connecting
mariadb
 .createConnection({ 
   user:&#34;myUser&#34;, 
   host: &#34;myHost.com&#34;,
   ssl: {
	 ca: serverCert,
	 secureProtocol: &#34;TLSv1_2_method&#34;,
	 ciphers:
	   &#34;ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES256-GCM-SHA384:DHE-RSA-AES128-GCM-SHA256&#34;        
   }
 }).then(conn =&gt; {})
&lt;&lt;/code&gt;&gt;

For more information on what&#39;s available, see [[https://www.openssl.org/docs/man1.0.2/ssl/ssl.html#DEALING-WITH-PROTOCOL-METHODS|possible protocol]] values.


=== Two-way SSL Authentication
Mutual SSL authentication or certificate-based mutual authentication refers to two parties authenticating each other by verifying the provided digital certificates. This allows both parties to be assured of the other&#39;s identity.  In order to use mutual authentication, you must set the [[grant/#per-account-ssltls-options|REQUIRE X509]] option in the [[grant|GRANT]] statement.  For example,


&lt;&lt;code  lang=&#34;sql&#34;&gt;&gt;
GRANT ALL ON company.* TO &#39;johnSmith&#39;@&#39;%&#39; REQUIRE X509;
&lt;&lt;/code&gt;&gt;
This option causes the server to ask the Connector for a client certificate.  **If the user is not set with REQUIRE X509, the server defaults to one-way authentication**


When using mutual authentication, you need a certificate, (and its related private key), for the Connector as well as the server.  If the Connector doesn&#39;t provide a certificate and the user is set to REQUIRE X509, the server returns a basic ##Access denied for user## message.


In the event that you would like to see how users are defined, you can find this information by querying the [[mysqluser-table|mysql.user table]] on the server.  For instance, say you wanted information on the johnSmith user.


&lt;&lt;code  lang=&#34;sql&#34;&gt;&gt;
SELECT ssl_type, ssl_cipher, x509_subject 
FROM mysql.user
WHERE User = &#39;johnSmith&#39;;
&lt;&lt;/code&gt;&gt;
You can test it by creating a user with REQUIRE X509 for testing:


&lt;&lt;code  lang=&#34;sql&#34;&gt;&gt;
CREATE USER &#39;X509testUser&#39;@&#39;%&#39;;
GRANT ALL PRIVILEGES ON *.* TO &#39;X509testUser&#39;@&#39;%&#39; REQUIRE X509;
&lt;&lt;/code&gt;&gt;
Then use its credentials in your application:


&lt;&lt;code  lang=&#34;javascript&#34;&gt;&gt;
const fs = require(&#34;fs&#34;);
const mariadb = require(&#39;mariadb&#39;);

//reading certificates from file
const serverCert = [fs.readFileSync(&#34;server.pem&#34;, &#34;utf8&#34;)];
const clientKey = [fs.readFileSync(&#34;client.key&#34;, &#34;utf8&#34;)];
const clientCert = [fs.readFileSync(&#34;client.pem&#34;, &#34;utf8&#34;)];

//connecting
mariadb
 .createConnection({ 
   user:&#34;X509testUser&#34;, 
   host: &#34;mariadb.example.com&#34;,
   ssl: {
	 ca: serverCert,
	 cert: clientCert,
	 key: clientKey
   }
 }).then(conn =&gt; {})
&lt;&lt;/code&gt;&gt;

==== Using Keystores
Keystores allow you to store private keys and certificate chains encrypted with a password to file.  For instance, using OpenSSL you can generate a keystore using PKCS12 format:


&lt;&lt;code &gt;&gt;
$ openssl pkcs12 \
	-export \
	-in &#34;${clientCertFile}&#34; \
	-inkey &#34;${clientKeyFile}&#34; \
	-out &#34;${keystoreFile}&#34; \
	-name &#34;mariadbAlias&#34; \
	-passout pass:kspass
&lt;&lt;/code&gt;&gt;

You can then use the keystore in your application:


&lt;&lt;code  lang=&#34;javascript&#34;&gt;&gt;
const fs = require(&#34;fs&#34;);
const mariadb = require(&#39;mariadb&#39;);

//reading certificates from file (keystore must be read as binary)
const serverCert = fs.readFileSync(&#34;server.pem&#34;, &#34;utf8&#34;);
const clientKeystore = fs.readFileSync(&#34;keystore.p12&#34;);

//connecting
mariadb.createConnection({ 
 user:&#34;X509testUser&#34;, 
 host: &#34;mariadb.example.com&#34;,
 ssl: {
   ca: serverCert,
   pfx: clientKeystore,
   passphrase: &#34;kspass&#34;
 }
}).then(conn =&gt; {});
&lt;&lt;/code&gt;&gt;

== Other Options

&lt;&lt;style class=&#34;darkheader-nospace-borders&#34;&gt;&gt;
|= Option |= Description |=Type |=Default
|**charset**|Protocol character set used with the server.  It&#39;s mainly used for micro-optimizations.  The default is often sufficient.|//string//|UTF8MB4_UNICODE_CI
|**dateStrings**|Whether to retrieve dates as strings or as Date objects.|//boolean//|false
|**debug**|Logs all exchanges with the server.  Displays in hexa.|//boolean//|false
|**foundRows**|When enabled, the update number corresponds to update rows.  When disabled, it indicates the real rows changed.|//boolean//|true
|**multipleStatements**|Allows you to issue several SQL statements in a single query() call. (For example: INSERT INTO a VALUES(&#39;b&#39;); INSERT INTO c VALUES(&#39;d&#39;);).  \\\\ This might be a **security risk** as it allows SQL Injection attacks.|//boolean//|false
|**namedPlaceholders**|Allows the use of named placeholders.|//boolean//|false
|**permitLocalInfile**|Allows the use of [[load-data-infile|LOAD DATA INFILE]] statements.\\\\Loading data from a file from the client may be a security issue, as a man-in-the-middle proxy server can change the actual file the server loads.  Being able to execute a query on the client gives you access to files on the client.|//boolean//|false
|**timezone**|Forces use of the indicated timezone, rather than the current Node.js timezone.  Possible values are Z for UTC, local or ±HH:MM format|//string//| | 
|**nestTables**|Presents resultsets by table to avoid results with colliding fields.  See the query() description for more information.|//boolean//|false
|**pipelining**|Sends queries one by one without waiting for the results of the previous entry.  For more information, see [[connectornodejs-pipelining|Pipelining]]|//boolean//|true
|**trace**|Adds the stack trace at the time of query creation to the error stack trace, making it easier to identify the  part of the code that issued the query. Note: This feature is disabled by default due to the performance cost of stack creation.  Only turn it on when you need to debug issues.|//boolean//|false
|**typeCast**|Allows you to cast result types.|//function//| | 
|**connectAttributes**|Sends information (client name, version, operating system, Node.js version, and so on) to the [[performance-schema-session_connect_attrs-table/|Performance Schema]]. When enabled, the Connector sends JSON attributes in addition to the defaults.|//boolean/json//|false
|**metaAsArray**|Compatibility option, causes Promise to return an array object, [rows, metadata] rather than the rows as JSON objects with a meta property.|//boolean//|false
&lt;&lt;/style&gt;&gt;

== F.A.Q.
==== Error Hostname/IP doesn&#39;t match certificate&#39;s altnames
Clients verify certificate SAN (subject alternative names) and CN to ensure that the certificate corresponds to the hostname.  If the certificate&#39;s SAN/CN does not correspond to the host option, it returns an error such as:


&lt;&lt;code &gt;&gt;
Hostname/IP doesn&#39;t match certificate&#39;s altnames: &#34;Host: other.example.com. is not cert&#39;s CN: mariadb.example.com&#34;
&lt;&lt;/code&gt;&gt;
To fix this, correct the host value to correspond to the host identified in the certificate.



==== Error routines:ssl_choose_client_version:unsupported protocol

Since Node.js 12 minimum TLS version is set to 1.2. 

MariaDB server can be built with different SSL library, old version supporting only TLS up to 1.1.  
The error &#34;1976:error:1425F102:SSL routines:ssl_choose_client_version:unsupported protocol&#34; can occur if MariaDB SSL implementation doesn&#39;t support TLSv1.2.

This can be solved by : 
* Server side: update MariaDB to a recent version
* Client side: permit lesser version with &#34;tls.DEFAULT_MIN_VERSION = &#39;TLSv1.1&#39;;&#34; or permitting lesser version of protocol by connection configuration: using option `ssl: { secureProtocol: &#39;TLSv1_1_method&#39; }&#39;</textarea>
    


                    <div id="content_disclaimer" class="graybox">
                        Content reproduced on this site is the property of its respective owners,
                        and this content is not reviewed in advance by MariaDB. The views, information and opinions
                        expressed by this content do not necessarily represent those of MariaDB or any other party.
                    </div>
                </div>
            </section>

            
        </div>
    </div>
</div>

<!-- Footer -->
<footer id="footer">
    <div class="footer">
        <div class="container">
            <div class="row">
                <div class="col-xs-12">
                    <ul class="list-inline text-center footer-nav">
                        <li>
                            <h5>
                                <a href="https://mariadb.com/products" title="Products">Products</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/services" title="Services">Services</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/pricing" title="Pricing">Pricing</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/resources" title="Resources">Resources</a>
                            </h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/about-us" title="About MariaDB">About Us</a></h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/download" title="Download">Download MariaDB</a></h5>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="row row-10">
                
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div id="block-footerformcontact" class="block block-block-content block-block-contentd754ee1b-3cc9-40e7-9ef4-f504f1197fb1">
                        
                            <h5 style="font-weight: 400;">Subscribe to our newsletter!</h5>
                            <script src="//app-sj15.marketo.com/js/forms2/js/forms2.min.js"></script><form id="mktoForm_1498"></form>
                            <script>
                                <!--//--><![CDATA[// ><!--
                                MktoForms2.loadForm("//app-sj15.marketo.com", "573-PXI-984", 1498);
                                //--><!]]]]><![CDATA[>
                                //--><!]]>
                            </script>
                        
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div class="footer-copyright">
                        <div class="text-center">
                            <ul class="list-inline no-margin">
                                <li>
                                    <a href="/legal" title="Legal">Legal</a>
                                </li>
                                <li>
                                    <a href="/privacy-policy" title="Privacy Policy">Privacy Policy</a>
                                </li>
                                <li>
                                    <a href="/cookie-policy/" title="Cookies">Cookie Policy</a>
                                </li>
                            </ul>
                            <p>Copyright &copy; 2024 MariaDB. All rights reserved.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
</footer>
</div>

<div id="ajax_loading">
    <img src="/kb/static/images/ajax-loader.a51c5608d01a.gif" />
</div>

    <!-- Google Tag Manager -->
    <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-MK2847"
                      height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
            '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MK2847');</script>
    <!-- End Google Tag Manager -->

</body>

<script type="text/javascript" src="/kb/static/js/main.1587e3a666fc.js" charset="utf-8"></script>

</html>