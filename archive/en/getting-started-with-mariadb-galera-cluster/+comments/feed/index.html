<?xml version="1.0" encoding="utf-8"?>
<rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title>MariaDB Knowledge Base Comments for: Getting Started with MariaDB Galera Cluster</title><link>https://mariadb.com/kb/en/getting-started-with-mariadb-galera-cluster/+comments/feed/</link><description></description><atom:link href="https://mariadb.com/kb/en/getting-started-with-mariadb-galera-cluster/+comments/feed/" rel="self"></atom:link><language>en-us</language><lastBuildDate>Mon, 21 Aug 2023 18:14:00 +0000</lastBuildDate><item><title>Re: Getting Started with MariaDB Galera Cluster</title><link>https://mariadb.com/kb/en/getting-started-with-mariadb-galera-cluster/+comments/5009</link><description>&lt;p&gt;I've faced a problem building a cluster with docker. A new container cant join a cluster in its first start. i'ts needed to start first the container with wsrep_on=off (or unset), let mariadb initialize internal db (or whatever). And then restart with wsrep_on and join the cluster. I've been struggling with it for days so, at least a comment here.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Granjerox .</dc:creator><guid>https://mariadb.com/kb/en/getting-started-with-mariadb-galera-cluster/+comments/5009</guid></item><item><title>Re: Getting Started with MariaDB Galera Cluster</title><link>https://mariadb.com/kb/en/getting-started-with-mariadb-galera-cluster/+comments/2911</link><description>&lt;p&gt;Thanks, updated.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Ian Gilfillan</dc:creator><guid>https://mariadb.com/kb/en/getting-started-with-mariadb-galera-cluster/+comments/2911</guid></item><item><title>Re: Getting Started with MariaDB Galera Cluster</title><link>https://mariadb.com/kb/en/getting-started-with-mariadb-galera-cluster/+comments/2787</link><description>&lt;p&gt;I have two questions:
1. Can a cluster have a non-member replication master te replicate data from (like multi-master)
2. Can a cluster replicate to a non-member?&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Willy de Zutter</dc:creator><guid>https://mariadb.com/kb/en/getting-started-with-mariadb-galera-cluster/+comments/2787</guid></item><item><title>Re: Getting Started with MariaDB Galera Cluster</title><link>https://mariadb.com/kb/en/getting-started-with-mariadb-galera-cluster/+comments/2661</link><description>&lt;p&gt;Hi,
Is possible to specify only one database instead of all databases of the server?
I did not find information about it.&lt;/p&gt;
&lt;p&gt;Thank you.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Rubén González</dc:creator><guid>https://mariadb.com/kb/en/getting-started-with-mariadb-galera-cluster/+comments/2661</guid></item><item><title>Re: Getting Started with MariaDB Galera Cluster</title><link>https://mariadb.com/kb/en/getting-started-with-mariadb-galera-cluster/+comments/1453</link><description>&lt;p&gt;Thanks Daniel, I used the two node example just to keep it simple.What happens if there are simultaneous inserts in more than one node for a particular table is that arbitrated somehow by the cluster and Ids generated accordingly?&lt;/p&gt;
&lt;p&gt;Thanks&lt;/p&gt;
&lt;p&gt;Raghav&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Raghav Narayanan</dc:creator><guid>https://mariadb.com/kb/en/getting-started-with-mariadb-galera-cluster/+comments/1453</guid></item><item><title>Re: Getting Started with MariaDB Galera Cluster</title><link>https://mariadb.com/kb/en/getting-started-with-mariadb-galera-cluster/+comments/1441</link><description>&lt;div style="margin-left:2em"&gt;&lt;p&gt; Hi, I have a question around auto_increment values - is it always guaranteed to be in the ascending order?&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;Yes.&lt;/p&gt;
&lt;div style="margin-left:2em"&gt;&lt;p&gt;  say we have a 2 node cluster with the following settings&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;There is rarely a good reason not to have 3 nodes. With two you don't have a automated failure recovery&lt;/p&gt;
&lt;p&gt;The autoincrement is sorted with the &lt;a href="/kb/en/galera-cluster-system-variables/"&gt;wsrep_auto_increment_control&lt;/a&gt;=1 (the default)&lt;/p&gt;
&lt;div style="margin-left:2em"&gt;&lt;p&gt; If 2 rows are inserted from Node1 into a table with an auto_increment primary key the IDs generated will be 1 and 3. If the next insert into the table is from Node2 the ID should be 4 as opposed to 2.&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;If the insert on Node 2 occurs before the from Node 1 applies you may get 2.&lt;/p&gt;
&lt;p&gt;autoincrements can have gaps (due to transaction rollback). Use &lt;a href="/kb/en/last_insert_id/"&gt;last_insert_id&lt;/a&gt; if you want the value of a last insert. Don't try to predict them.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Daniel Black </dc:creator><guid>https://mariadb.com/kb/en/getting-started-with-mariadb-galera-cluster/+comments/1441</guid></item><item><title>Re: Getting Started with MariaDB Galera Cluster</title><link>https://mariadb.com/kb/en/getting-started-with-mariadb-galera-cluster/+comments/1439</link><description>&lt;p&gt;Hi,
          I have a question around auto_increment values - is it always guaranteed to be in the ascending order? To give an example, say we have a 2 node cluster with the following settings &lt;/p&gt;
&lt;p&gt;Node1: @@auto_increment_increment=2, @@auto_increment_offset=1
Node2: @@auto_increment_increment=2, @@auto_increment_offset=2&lt;/p&gt;
&lt;p&gt;If 2 rows are inserted from Node1 into a table with an auto_increment primary key the IDs generated will be 1 and 3. If the next insert into the table is from Node2 the ID should be 4 as opposed to 2.&lt;/p&gt;
&lt;p&gt;Thanks
Raghav&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Raghav Narayanan</dc:creator><guid>https://mariadb.com/kb/en/getting-started-with-mariadb-galera-cluster/+comments/1439</guid></item><item><title>Re: Getting Started with MariaDB Galera Cluster</title><link>https://mariadb.com/kb/en/getting-started-with-mariadb-galera-cluster/+comments/1271</link><description>&lt;p&gt;You don't really need "full access". If you search around you'll see what permissions you need on the databases. 
First of all you create a specific user for SST transfers, than you give permission 640 to your /etc/my.cnf.d/server.cnf file, and assign it to mysql:mysql. 
At the end if you liked this explanaton, you can configure your cluster by using my tool: &lt;a href="https://github.com/maxadamo/galera-wizard"&gt;https://github.com/maxadamo/galera-wizard&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;p.s.: of course you can also implemente SSL for your replication.... &lt;/p&gt;
&lt;p&gt;Cheers.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Massimiliano Adamo</dc:creator><guid>https://mariadb.com/kb/en/getting-started-with-mariadb-galera-cluster/+comments/1271</guid></item><item><title>Re: Getting Started with MariaDB Galera Cluster</title><link>https://mariadb.com/kb/en/getting-started-with-mariadb-galera-cluster/+comments/1072</link><description>&lt;p&gt;even if not using ssh keys and rsync, rsync uses a direct network connection and doesn't use wsrep_sst_auth.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Daniel Black </dc:creator><guid>https://mariadb.com/kb/en/getting-started-with-mariadb-galera-cluster/+comments/1072</guid></item><item><title>Re: Getting Started with MariaDB Galera Cluster</title><link>https://mariadb.com/kb/en/getting-started-with-mariadb-galera-cluster/+comments/1071</link><description>&lt;p&gt;innobackupex is available from Percona &lt;a href="http://www.percona.com/software/percona-xtrabackup"&gt;http://www.percona.com/software/percona-xtrabackup&lt;/a&gt;&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Daniel Black </dc:creator><guid>https://mariadb.com/kb/en/getting-started-with-mariadb-galera-cluster/+comments/1071</guid></item><item><title>Re: Getting Started with MariaDB Galera Cluster</title><link>https://mariadb.com/kb/en/getting-started-with-mariadb-galera-cluster/+comments/933</link><description>&lt;p&gt;Does xtrabackup method work with RPMs? The script complains that innobackupex is not available:&lt;br&gt;
&lt;em&gt;&lt;strong&gt;$ /usr/bin/wsrep_sst_xtrabackup&lt;br&gt;
Can't find innobackupex in the path&lt;/strong&gt;&lt;/em&gt;&lt;br&gt;
I've been searching for innobackupex inside all RPMs but I found nothing.&lt;br&gt;
Is this script available on some other package? Can it be downloaded separately? &lt;br&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;p.s.: rsync works properly, but I don't like the fact that it blocks the database during the transfer. &lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Massimiliano Adamo</dc:creator><guid>https://mariadb.com/kb/en/getting-started-with-mariadb-galera-cluster/+comments/933</guid></item><item><title>Re: Getting Started with MariaDB Galera Cluster</title><link>https://mariadb.com/kb/en/getting-started-with-mariadb-galera-cluster/+comments/886</link><description>&lt;p&gt;Along with aRoboto comment about wsrep_sst_auth user needing to have full root access to all databases. Is it consider safe to have a root username and password in plain text in a world-readable file? It seems like something I would want to avoid. Does anyone have an suggestions for this or am I am just being paranoid?&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Ryan Hanson</dc:creator><guid>https://mariadb.com/kb/en/getting-started-with-mariadb-galera-cluster/+comments/886</guid></item><item><title>Re: Getting Started with MariaDB Galera Cluster</title><link>https://mariadb.com/kb/en/getting-started-with-mariadb-galera-cluster/+comments/611</link><description>&lt;p&gt;Yes, there isn't a mariadb-galera-server package for Raring. I'll add a note to this page.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Daniel Bartholomew</dc:creator><guid>https://mariadb.com/kb/en/getting-started-with-mariadb-galera-cluster/+comments/611</guid></item><item><title>Re: Getting Started with MariaDB Galera Cluster</title><link>https://mariadb.com/kb/en/getting-started-with-mariadb-galera-cluster/+comments/593</link><description>&lt;p&gt;Just a suggestion, but the wsrep_sst_auth variable may need to be explained more clearly. I stumbled on this for a few hours. The only reason I figured this out was by looking at the mysql error log on the DONOR.&lt;/p&gt;
&lt;p&gt;The errors looked like this:&lt;/p&gt;
&lt;p&gt;[ERROR] WSREP: Process completed with error: wsrep_sst_mysqldump --user '' --password '' --host '172.20.1.123' --port '3306' --local-port '33
06' --socket '/var/lib/mysql/mysql.sock' --gtid '5a568cb8-c658-11e2-0800-29e7f95d4235:0': 2 (No such file or directory)&lt;/p&gt;
&lt;p&gt;wsrep_sst_auth needs to be defined with a username and password with root access to all dbservers in either my.cnf or as an argument to your mysqld command. The format for my.cnf is:&lt;/p&gt;
&lt;p&gt;wsrep_sst_auth=username:password&lt;/p&gt;
&lt;p&gt;Hope this helps.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Eric Howey</dc:creator><guid>https://mariadb.com/kb/en/getting-started-with-mariadb-galera-cluster/+comments/593</guid></item></channel></rss>