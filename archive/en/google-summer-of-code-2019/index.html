<!DOCTYPE html>
<html>
<head data-cookie-domain=""
      data-cookie-path="/">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="apple-touch-icon" sizes="180x180" href="/kb/static/images/favicons/apple-touch-icon.159e713979be.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/kb/static/images/favicons/favicon-32x32.bc0ac1d5d11e.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/kb/static/images/favicons/favicon-16x16.5801f8f0f34e.png">
    <link rel="shortcut icon" href="/kb/static/images/favicons/favicon.d122d305dee4.ico" type="image/x-icon" />

    <title>Google Summer of Code 2019 - MariaDB Knowledge Base</title>

    <link href="/kb/static/css/main.f7633538c846.css" rel="stylesheet" type="text/css" />

    

    

    <!-- FB Open Graph tags -->
    <meta property="og:title" content="Google Summer of Code 2019" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://mariadb.com/kb/en/google-summer-of-code-2019/" />
    <meta property="og:image" content="http://mariadb.comaskmonty-logo.png" />
    <meta property="og:site_name" content="MariaDB KnowledgeBase" />
    <meta property="fb:admins" content="514852603" />
    <meta property="og:description" content="Project Ideas for the Google Summer of Code 2019." />

    <meta name="description" content="Project Ideas for the Google Summer of Code 2019." />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="//fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet"/>
    
</head>
<body class="mpkb nodes products nodes_view jqui" id="nodes_view">





<div id="menu-mobile" class="visible-sm visible-xs">

    <div>
        <div id="mobile-close-menu" class="text-right">
            <a href="javascript:void(0)" title="Close Menu" id="back-main" class="toggle-menu">X<span></span></a>
        </div>
    </div>
    <div class="mainmenu-mobile">
        <ul class="ls-none ul-menu">
            <li data-sub="submenu5"><a class="open-form-search" href="/kb/search/" title="Search">Search </a></li>
            <li data-sub="submenu0"><a href="/products" title="Products">Products</a><span class="arrow-main"></span></li>
            <li data-sub="submenu1"><a href="/services" title="Services">Services</a><span class="arrow-main"></span></li>
            <li data-sub="submenu2"><a href="/resources" title="Resources">Resources</a><span class="arrow-main"></span></li>
            <li data-sub="submenu3"><a href="/about-us" title="About">About</a><span class="arrow-main"></span></li>
            <li data-sub="submenu4"><a href="/contact" title="Contact">Contact</a></li>
        </ul>
    </div>

    <div class="nav-top-mobile">
        <div class="select-box form">

            <ul class="inline-block-md mb-none top-nav">
                <li>

                </li>
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/google-summer-of-code-2019/"> Login</a>
                    </li>
                
            </ul>



        </div>
        <p class="text-center copyright">Copyright &copy; 2024 MariaDB. All rights reserved.</p>
    </div>
</div>
<div class="violator-wrap d-none" id="top_violator">
    <div class="container">
        <div class="row">
            <div class="col-xs-12 col-sm-12">
                <div class="violator-outer">
                    <div class="violator-inner">
                        <div class="row">
                            <div class="col-xs-12 col-sm-9 col-lg-7 col-lg-offset-2" id="top_violator_content">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="content-link" target="_blank" rel="nofollow noreferrer">
                                    <span>The Ultimate Guide to High Availability with MariaDB</span>
                                </a>
                            </div>
                            <div class="col-xs-12 col-sm-3" id="top_violator_cta">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="btn btn-mariadb" target="_blank" rel="nofollow noreferrer">Download Now</a>
                            </div>
                        </div>
                    </div>
                    <button type="button" class="btn btn-link close-btn">
                        <svg xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 24 24" width="15px" height="15px"><path d="M 4.9902344 3.9902344 A 1.0001 1.0001 0 0 0 4.2929688 5.7070312 L 10.585938 12 L 4.2929688 18.292969 A 1.0001 1.0001 0 1 0 5.7070312 19.707031 L 12 13.414062 L 18.292969 19.707031 A 1.0001 1.0001 0 1 0 19.707031 18.292969 L 13.414062 12 L 19.707031 5.7070312 A 1.0001 1.0001 0 0 0 18.980469 3.9902344 A 1.0001 1.0001 0 0 0 18.292969 4.2929688 L 12 10.585938 L 5.7070312 4.2929688 A 1.0001 1.0001 0 0 0 4.9902344 3.9902344 z"/></svg>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="wrapper">
<div id="top-nav">
    <div class="container">
        <ul class="hidden-sm hidden-xs" >
            <li><a href="https://mariadb.com/kb/">Knowledge Base</a></li>
            <li><a href="https://mariadb.com/contact/">Contact</a></li>
            
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/google-summer-of-code-2019/" rel="nofollow">Login</a>
                    </li>
                
            
            
            <li id="search-form">
                <form action="/kb/en/+search/" method="get" id="search-block-form" accept-charset="UTF-8">
                    <input id="search" title="Enter the terms you wish to search for."
                           placeholder="Search . . ." type="text"
                           name="q" value="" size="15" maxlength="128" class="form-text"
                           data-autocomplete-url="/kb/en/+search/autocomplete/">
                    <input type="hidden" name="quick" value="1" />
                    <input type="hidden" name="source" value="kb" />
                </form>
            </li>
            <li><a id="search-toggler" href="/kb/search/">Search</a></li>
            
        </ul>
    </div>
</div>
<div id="navbar-bottom" class="navbar">
    <div class="container">
        
        
        
        
        <div class="row">
            <div class="col-md-3 col-sm-9 col-xs-9">
                <a class="brand" href="/" title="MariaDB">
                    <img src="/kb/static/images/logo-2018-black.95f5978ae14d.png">
                </a>
            </div>
            <div class="col-md-9 hidden-sm hidden-xs">
                <div class="main-menu">
                    <ul id="main-menu" class="nav navbar-nav inline-block-sm">
    <li class="has-sub full-menu">
        <a href="/products" title="Products">Products</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/services" title="Services">Services</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/pricing" title="Pricing">Pricing</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/resources" title="Resources">Resources</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/about-us" title="About Us">About Us</a>
    </li>
    <li class="">
        <a class="button electric-eel small top-bar-right-download" href="/downloads/">Download</a>
    </li>
</ul>
                </div>
            </div>
            <div class="col-md-3 visible-sm visible-xs col-sm-3 col-xs-3 ps-rv">
                <div class="navbar-header text-right pull-right">
                    <button type="button" class="menu-control toggle-menu" id="open-menu">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="main">
    <div class="container">
        

        <div id="subheader1" class="clearfix">
            <div class="pull-left">
                
                <div id="breadcrumbs" class="breadcrumb">
                    <a href="/kb/en/">Knowledge Base</a>
                    


    
    » <a class="crumb" href="/kb/en/community/">The Community</a>
    

    
    » <a class="crumb" href="/kb/en/contributing-participating/">Contributing &amp; Participating</a>
    

    
    » <a class="crumb" href="/kb/en/google-summers-of-code/">Google Summers of Code</a>
    


    » <a class="node_link crumb" href="/kb/en/google-summer-of-code-2019/">Google Summer of Code 2019</a>


                </div>
                
            </div>
        </div>
    </div>
    <div class="container" id="container-main">
        <div class="row">
            
            
                
                <aside id="sidebar-first" class="sidebar col-md-2 hidden-xs hidden-sm hidden-print">
                    
                        
                        <ul id="category_menu" class="nav nav-pills nav-stacked">
                            <li><a href="/kb/en/">Home</a></li>
                            
                                
                                    <li><a href="/kb/en/+questions/">Open Questions</a></li>
                                
                                <li><a href="/kb/en/documentation/">MariaDB Server</a></li>
                                <li><a href="/kb/en/maxscale/">MariaDB MaxScale</a></li>
                                <li><a href="/kb/en/mariadb-columnstore/">MariaDB ColumnStore</a></li>
                                <li><a href="/kb/en/connectors/">Connectors</a></li>
                            

                        </ul>
                    

                    
<div>



<div class="well well-small box actions"><div>

        <a class="btn btn-block btn-blue btn-sm" href="/kb/en/google-summer-of-code-2019/+history" rel="nofollow">History</a>
        
        
        
        <a class="btn btn-block btn-blue btn-sm" href="/kb/en/google-summer-of-code-2019/+source/">Source</a>
        
        <a class="btn btn-block btn-blue btn-sm flag" href="/kb/en/google-summer-of-code-2019/+flag"
                data-flag-url="/kb/en/google-summer-of-code-2019/+flag" rel="nofollow">
                Flag as Spam / Inappropriate</a>
        
        <a class="btn btn-block btn-blue btn-sm" href="/kb/en/google-summer-of-code-2019/+translate/">
                Translate</a>
        

</div>
</div>





<div class="well well-small box node_info"><div>

    <dl>
        <dt>Created</dt>
        <dd>

<span class="datetime" title="2019-02-27 02:10">5 years, 5 months ago</span></dd>

        <dt>Modified</dt>
        <dd>

<span class="datetime" title="2021-03-09 10:22">3 years, 5 months ago</span></dd>

        <dt>Type</dt>
        <dd>article</dd>

        <dt>Status</dt>
        <dd>active</dd>

        <dt>License</dt>
        <dd>
            
                <a href="/kb/en/google-summer-of-code-2019/+license/">CC BY-SA / Gnu FDL</a>
            
        </dd>

        
    </dl>

    
    <ul class="rss_feeds">
        <li><a href="/kb/en/google-summer-of-code-2019/+history/feed/">
            History</a>
        </li>
        <li><a href="/kb/en/google-summer-of-code-2019/+comments/feed/">
            Comments</a>
        </li>
    </ul>
    

</div>
</div>





    
    
    

<div class="well well-small box attachments"><div><div class="edit_link pull-right"><a href="/kb/en/google-summer-of-code-2019/+edit/attachments/">Edit</a></div><h5>Attachments</h5></div><div>

        
            <div class="no_data">No attachments exist</div>
        
    
</div>
</div>

    



    
    






</div>


                    

































                </aside>
            
            
            
                
            
            
                
            
            <section id="content" class="limited_width col-md-8 clearfix">
                
                    <h1>Google Summer of Code 2019</h1>
                

                



                <div>
                    
    

    
    
    

    <div class="node creole">
        
        
        


    
    <div class="answer formatted">
        <p>We participated in the <a href="https://summerofcode.withgoogle.com/">Google Summer of Code</a> 2019. The <a href="https://www.mariadb.org">MariaDB Foundation</a> believes we are making a better database that remains application compatible with MySQL. We also work on making LGPL connectors (currently C, ODBC, Java) and on <a href="/kb/en/galera/">MariaDB Galera Cluster</a>, which allows you to scale your reads &amp; writes. And we have <a href="/kb/en/mariadb-columnstore/">MariaDB ColumnStore</a>, which is a columnar storage engine, designed to process petabytes of data with real-time response to analytical queries.</p>
<div class="table_of_contents well well-small">
<h3>Contents</h3>
 <ol class="toc">

 <li class=""><a href="#where-to-start" title="Where to Start">Where to Start</a></li>

 <li class=""><a href="#list-of-tasks" title="List of Tasks">List of Tasks</a> <ol class="toc">

    <li class=""><a href="#mariadb-server-optimizer" title="MariaDB Server: Optimizer">MariaDB Server: Optimizer</a>    <ol class="toc">

        <li class=""><a href="#evaluate-subquery-predicates-earlier-or-later-depending-on-their-selectivity" title="Evaluate subquery predicates earlier or later depending on their SELECTIVITY">Evaluate subquery predicates earlier or later depending on their SELECTIVITY</a></li>

        <li class=""><a href="#add-support-for-indexes-on-expressions" title="Add support for Indexes on Expressions">Add support for Indexes on Expressions</a></li>

        <li class=""><a href="#histograms-with-equal-width-bins-in-mariadb" title="Histograms with equal-width bins in MariaDB">Histograms with equal-width bins in MariaDB</a></li>

        <li class=""><a href="#add-full-outer-join-to-mariadb" title="Add FULL OUTER JOIN to MariaDB">Add FULL OUTER JOIN to MariaDB</a></li>

        <li class=""><a href="#recursive-cte-support-for-update-and-delete-statements" title="Recursive CTE support for UPDATE (and DELETE) statements">Recursive CTE support for UPDATE (and DELETE) statements</a></li>

        <li class=""><a href="#implement-except-all-and-intersect-all-operations" title="Implement EXCEPT ALL and INTERSECT ALL operations">Implement EXCEPT ALL and INTERSECT ALL operations</a>    </ol>
</li>

    <li class=""><a href="#mariadb-server-others" title="MariaDB Server: others">MariaDB Server: others</a>    <ol class="toc">

        <li class=""><a href="#implement-update-with-result-set" title="Implement UPDATE with result set">Implement UPDATE with result set</a></li>

        <li class=""><a href="#automatic-provisioning-of-slave" title="Automatic provisioning of slave">Automatic provisioning of slave</a>        <ol class="toc">

            <li class=""><a href="#idea" title="Idea">Idea</a></li>

            <li class=""><a href="#implementation" title="Implementation:">Implementation:</a>        </ol>
</li>

        <li class=""><a href="#connection-encryption-plugin-support" title="connection encryption plugin support">connection encryption plugin support</a></li>

        <li class=""><a href="#add-returning-to-insert" title="Add RETURNING to INSERT">Add RETURNING to INSERT</a></li>

        <li class=""><a href="#aggregate-window-functions" title="Aggregate Window Functions">Aggregate Window Functions</a></li>

        <li class=""><a href="#true-alter-locknone-on-slave" title="True ALTER LOCK=NONE on slave">True ALTER LOCK=NONE on slave</a>        <ol class="toc">

            <li class=""><a href="#implementation-idea" title="Implementation Idea">Implementation Idea</a>        </ol>
</li>

        <li class=""><a href="#improve-mysqltest-language" title="Improve mysqltest language">Improve mysqltest language</a></li>

        <li class=""><a href="#implement-multiple-table-updatedelete-returning-a-result-set" title="Implement multiple-table UPDATE/DELETE returning a result set">Implement multiple-table UPDATE/DELETE returning a result set</a></li>

        <li class=""><a href="#sort-out-the-compression-library-chaos" title="sort out the compression library chaos">sort out the compression library chaos</a></li>

        <li class=""><a href="#control-over-memory-allocated-for-spps" title="Control over memory allocated for SP/PS">Control over memory allocated for SP/PS</a>        <ol class="toc">

            <li class=""><a href="#task-minimum" title="Task minimum:">Task minimum:</a></li>

            <li class=""><a href="#other-ideas" title="Other ideas:">Other ideas:</a>        </ol>
    </ol>
</li>

    <li class=""><a href="#mariadb-columnstore" title="MariaDB ColumnStore">MariaDB ColumnStore</a>    <ol class="toc">

        <li class=""><a href="#full-decimal-support-in-columnstore" title="Full DECIMAL support in ColumnStore">Full DECIMAL support in ColumnStore</a></li>

        <li class=""><a href="#mcsapi-needs-a-new-read-api-design" title="mcsapi needs a new read API Design">mcsapi needs a new read API Design</a></li>

        <li class=""><a href="#use-jit-for-aggregation-functions" title="Use JIT for aggregation functions">Use JIT for aggregation functions</a></li>

        <li class=""><a href="#engine-independent-statistics-for-columnstore" title="Engine independent statistics for Columnstore">Engine independent statistics for Columnstore</a>    </ol>
 </ol>
</li>

 <li class=""><a href="#suggest-a-task" title="Suggest a Task">Suggest a Task</a></li>
</div>
<h1 class="anchored_heading" id="where-to-start">Where to Start</h1>
<p>Please join us on <a href="/kb/en/irc-chat-servers-and-zulip-instance/">Zulip and on IRC</a> to mingle with the community. Don't forget to subscribe to <a href="https://launchpad.net/~maria-developers"><span class="__cf_email__" data-cfemail="016c607368602c656477646d6e71647372416d687275722f6d60746f62697160652f6f6475">[email&#160;protected]</span></a> (this is the main list where we discuss development).</p>
<p>A few handy tips for any interested students who are unsure which projects to choose:
<a href="https://vicentiu.ciorbaru.io/mariadb-participates-in-gsoc-2017/">Blog post from former GSoC student &amp; mentor</a></p>
<p>To improve your chances of being accepted, it is a good idea to submit a pull request with a bug fix to the server.</p>
<p><a href="https://jira.mariadb.org/issues/?jql=status%20%3D%20Open%20AND%20resolution%20%3D%20Unresolved%20AND%20labels%20%3D%20beginner-friendly%20ORDER%20BY%20updated%20DESC">List of beginner friendly bugs</a></p>
<h1 class="anchored_heading" id="list-of-tasks">List of Tasks</h1>
<p><em>Loaded from the <a href="https://jira.mariadb.org/issues/?jql=labels=gsoc19">MariaDB issue tracker</a></em></p>
<h2 class="anchored_heading" id="mariadb-server-optimizer">MariaDB Server: Optimizer</h2>
<div class="cstm-style" style="border-left: 1px solid grey; padding-left: 10px;"><h3 class="anchored_heading" id="evaluate-subquery-predicates-earlier-or-later-depending-on-their-selectivity">Evaluate subquery predicates earlier or later depending on their SELECTIVITY</h3>
<p>(Based on conversation with Igor)
There are a lot of subquery conditions out there that are inexpensive to
evaluate and have good selectivity.</p>
<p>If we just implement <a href="https://jira.mariadb.org/browse/MDEV-83">MDEV-83</a>, we may get regressions. We need to take
subquery condition's selectivity into account.</p>
<p>It is difficult to get a meaningful estimate for an arbitrary, correlated
subquery predicate.</p>
<p>One possible solution is to measure selectivity during execution and reattach
predicates on the fly.</p>
<p>We don't want to change the query plan all the time, one way to dynamically
move items between item trees is to wrap them inside Item_func_trig_cond so
we can switch them on and off.</p>
<table><tr><th>Details:</th><td><a href="https://jira.mariadb.org/browse/MDEV-383">MDEV-383</a></td></tr>
<tr><th>Mentor:</th><td>Igor Babaev</td></tr>
</table>
<hr>
<h3 class="anchored_heading" id="add-support-for-indexes-on-expressions">Add support for Indexes on Expressions</h3>
<p>An index on expression means something like</p>
<pre class="fixed"><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">t1</span> <span class="p">(</span><span class="n">a</span> <span class="nb">int</span><span class="p">,</span> <span class="n">b</span> <span class="nb">int</span><span class="p">,</span> <span class="k">INDEX</span> <span class="p">(</span><span class="n">a</span><span class="o">/</span><span class="mi">2</span><span class="o">+</span><span class="n">b</span><span class="p">));</span>
<span class="p">...</span>
<span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">t1</span> <span class="k">WHERE</span> <span class="n">a</span><span class="o">/</span><span class="mi">2</span><span class="o">+</span><span class="n">b</span><span class="o">=</span><span class="mi">100</span><span class="p">;</span>
</pre><p>in this case the optimizer should be able to use an index.</p>
<p>This task naturally splits in two steps:</p>
<ol start="1"><li>add expression matching into the optimizer, use it for generated columns. Like in <code>CREATE TABLE t1 (a int, b int, v INT GENERATED ALWAYS AS (a/2+b), INDEX (v));</code>
</li><li>support the syntax to create an index on expression directly, this will automatically create a hidden generated column under the hood
</li></ol>
<p><em>original task description is visible in the history</em></p>
<table><tr><th>Details:</th><td><a href="https://jira.mariadb.org/browse/MDEV-6017">MDEV-6017</a></td></tr>
<tr><th>Mentor:</th><td>Sergei Golubchik</td></tr>
</table>
<hr>
<h3 class="anchored_heading" id="histograms-with-equal-width-bins-in-mariadb">Histograms with equal-width bins in MariaDB</h3>
<p>Histograms with equal-width bins are easy to construct using samples. For this it's enough
to look through the given sample set and for each value from it to figure out what bin this value can be placed in. Each bin requires only one counter.
Let f be a column of a table with N rows and n be the number of samples by which the equal-width histogram of k bins for this column is constructed. Let after looking through all sample
rows the counters created for the histogram bins contain numbers c[1],..,c[k]. Then
m[i]= c[i]/n * 100 is the percentage of the rows whose values of f are expected to be in the interval</p>
<pre class="fixed"> (max(f)-min(f))/k *(i-1), max(f)-min(f))/k *i-1).
</pre><p>It means that if the sample rows have been chosen randomly the expected number of rows with the values of f from this interval can be approximated by the number m[i]*/100 * N.</p>
<p>To collect such statistics it is suggested to use the following variant of the ANALYZE TABLE command:</p>
<pre class="fixed"><span class="k">ANALYZE</span> <span class="n">FAST</span> <span class="k">TABLE</span> <span class="n">tbl</span> <span class="p">[</span> <span class="k">WITH</span> <span class="n">n</span> <span class="k">ROWS</span> <span class="p">]</span> <span class="p">[</span><span class="n">SAMPLING</span> <span class="n">p</span> <span class="n">PERCENTS</span> <span class="p">]</span>
   <span class="n">PERSISTENT</span> <span class="k">FOR</span> <span class="n">COLUMNS</span> <span class="p">(</span><span class="n">col1</span> <span class="p">[</span><span class="k">IN</span> <span class="n">RANGE</span> <span class="n">r</span><span class="p">]</span> <span class="p">[</span><span class="k">WITH</span> <span class="n">k</span> <span class="n">INTERVALS</span><span class="p">],...)</span>
</pre><p>Here:</p>
<ul start="1"><li>'WITH n ROWS' provides an estimate for the number of rows in the table in the case when this estimate cannot be obtained from statistical data.
</li><li>'SAMPLING p PERCENTS' provides the percentage of sample rows to collect statistics. If this is omitted the number is taken from the system variable samples_ratio.
</li><li>'IN RANGE r' sets the range of equal-width bins of the histogram built for the column col1. If this is omitted then and min and max values for the column can be read from statistical data then the histogram is built for the range [min(col1), max(col1)]. Otherwise the range [MIN_type(col1), MAX_type(col1) is considered]. The values beyond the given range, if any, are also is taken into account in two additional bins.
</li><li>WITH k INTERVALS says how many bins are included in the histogram. If it is omitted this value is taken from the system variable histogram_size.
</li></ul>
<table><tr><th>Details:</th><td><a href="https://jira.mariadb.org/browse/MDEV-12313">MDEV-12313</a></td></tr>
<tr><th>Mentor:</th><td>Vicentiu Ciorbaru</td></tr>
</table>
<hr>
<h3 class="anchored_heading" id="add-full-outer-join-to-mariadb">Add FULL OUTER JOIN to MariaDB</h3>
<p>Add support for FULL OUTER JOIN</p>
<p><a href="https://www.w3schools.com/sql/sql_join_full.asp">https://www.w3schools.com/sql/sql_join_full.asp</a></p>
<p>One of the way how to implement is to re-write the query</p>
<pre class="fixed"><span class="k">select</span> <span class="n">t1</span><span class="p">.</span><span class="o">*</span><span class="p">,</span> <span class="n">t2</span><span class="p">.</span><span class="o">*</span> <span class="k">from</span> <span class="n">t1</span> <span class="k">full</span> <span class="k">outer</span> <span class="k">join</span> <span class="n">t2</span> <span class="k">on</span> <span class="n">P</span><span class="p">(</span><span class="n">t1</span><span class="p">,</span><span class="n">t2</span><span class="p">)</span> 
</pre><p>into the following union all:</p>
<pre class="fixed"><span class="k">select</span> <span class="n">t1</span><span class="p">.</span><span class="o">*</span><span class="p">,</span> <span class="n">t2</span><span class="p">.</span><span class="o">*</span> <span class="k">from</span> <span class="n">t1</span> <span class="k">left</span> <span class="k">outer</span> <span class="k">join</span> <span class="n">t2</span> <span class="k">on</span> <span class="n">P</span><span class="p">(</span><span class="n">t1</span><span class="p">,</span><span class="n">t2</span><span class="p">)</span> 
<span class="k">union</span> <span class="k">all</span> 
<span class="k">select</span> <span class="n">t1</span><span class="p">.</span><span class="o">*</span><span class="p">,</span><span class="n">t2</span><span class="p">.</span><span class="o">*</span> <span class="k">from</span> <span class="n">t2</span> <span class="k">left</span> <span class="k">outer</span> <span class="k">join</span> <span class="n">t1</span> <span class="k">on</span> <span class="n">P</span><span class="p">(</span><span class="n">t1</span><span class="p">,</span><span class="n">t2</span><span class="p">)</span> <span class="k">where</span> <span class="n">t1</span><span class="p">.</span><span class="n">a</span> <span class="k">is</span> <span class="k">null</span>
</pre><p>Here t1.a is some non-nullable column of t1 (e.g. the column of single column primary key).</p>
<table><tr><th>Details:</th><td><a href="https://jira.mariadb.org/browse/MDEV-13648">MDEV-13648</a></td></tr>
<tr><th>Mentor:</th><td>Igor Babaev</td></tr>
</table>
<hr>
<h3 class="anchored_heading" id="recursive-cte-support-for-update-and-delete-statements">Recursive CTE support for UPDATE (and DELETE) statements</h3>
<pre class="fixed">     <span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">tree</span> <span class="p">(</span>
       <span class="o">`</span><span class="n">Node</span><span class="o">`</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span>
       <span class="o">`</span><span class="n">ParentNode</span><span class="o">`</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span>
       <span class="o">`</span><span class="n">EmployeeID</span><span class="o">`</span> <span class="nb">INTEGER</span><span class="p">,</span>
       <span class="o">`</span><span class="n">Depth</span><span class="o">`</span> <span class="nb">INTEGER</span><span class="p">,</span>
       <span class="o">`</span><span class="n">Lineage</span><span class="o">`</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">16</span><span class="p">)</span>
     <span class="p">);</span>

     <span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">tree</span>
       <span class="p">(</span><span class="o">`</span><span class="n">Node</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">ParentNode</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">EmployeeID</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">Depth</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">Lineage</span><span class="o">`</span><span class="p">)</span>
     <span class="k">VALUES</span>
       <span class="p">(</span><span class="s1">&#39;100&#39;</span><span class="p">,</span> <span class="k">NULL</span><span class="p">,</span> <span class="s1">&#39;1001&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;/&#39;</span><span class="p">),</span>
       <span class="p">(</span><span class="s1">&#39;101&#39;</span><span class="p">,</span> <span class="s1">&#39;100&#39;</span><span class="p">,</span> <span class="s1">&#39;1002&#39;</span><span class="p">,</span> <span class="k">NULL</span><span class="p">,</span> <span class="k">NULL</span><span class="p">),</span>
       <span class="p">(</span><span class="s1">&#39;102&#39;</span><span class="p">,</span> <span class="s1">&#39;101&#39;</span><span class="p">,</span> <span class="s1">&#39;1003&#39;</span><span class="p">,</span> <span class="k">NULL</span><span class="p">,</span> <span class="k">NULL</span><span class="p">),</span>
       <span class="p">(</span><span class="s1">&#39;103&#39;</span><span class="p">,</span> <span class="s1">&#39;102&#39;</span><span class="p">,</span> <span class="s1">&#39;1004&#39;</span><span class="p">,</span> <span class="k">NULL</span><span class="p">,</span> <span class="k">NULL</span><span class="p">),</span>
       <span class="p">(</span><span class="s1">&#39;104&#39;</span><span class="p">,</span> <span class="s1">&#39;102&#39;</span><span class="p">,</span> <span class="s1">&#39;1005&#39;</span><span class="p">,</span> <span class="k">NULL</span><span class="p">,</span> <span class="k">NULL</span><span class="p">),</span>
       <span class="p">(</span><span class="s1">&#39;105&#39;</span><span class="p">,</span> <span class="s1">&#39;102&#39;</span><span class="p">,</span> <span class="s1">&#39;1006&#39;</span><span class="p">,</span> <span class="k">NULL</span><span class="p">,</span> <span class="k">NULL</span><span class="p">);</span>
 
     <span class="k">WITH</span> <span class="k">RECURSIVE</span> <span class="n">prev</span> <span class="k">AS</span> <span class="p">(</span>
     <span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">tree</span> <span class="k">WHERE</span> <span class="n">ParentNode</span> <span class="k">IS</span> <span class="k">NULL</span>
     <span class="k">UNION</span>
     <span class="k">SELECT</span> <span class="n">t</span><span class="p">.</span><span class="n">Node</span><span class="p">,</span><span class="n">t</span><span class="p">.</span><span class="n">ParentNode</span><span class="p">,</span><span class="n">t</span><span class="p">.</span><span class="n">EmployeeID</span><span class="p">,</span><span class="n">p</span><span class="p">.</span><span class="n">Depth</span> <span class="o">+</span> <span class="mi">1</span> <span class="k">as</span> <span class="n">Depth</span><span class="p">,</span> <span class="n">CONCAT</span><span class="p">(</span><span class="n">p</span><span class="p">.</span><span class="n">Lineage</span><span class="p">,</span> <span class="n">t</span><span class="p">.</span><span class="n">ParentNode</span><span class="p">,</span> <span class="s1">&#39;/&#39;</span><span class="p">)</span>
     <span class="k">FROM</span> <span class="n">tree</span> <span class="n">t</span> <span class="k">JOIN</span> <span class="n">prev</span> <span class="n">p</span> <span class="k">ON</span> <span class="n">t</span><span class="p">.</span><span class="n">ParentNode</span> <span class="o">=</span> <span class="n">p</span><span class="p">.</span><span class="n">Node</span>
     <span class="p">)</span>
     <span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">prev</span><span class="p">;</span>

     <span class="k">WITH</span> <span class="k">RECURSIVE</span> <span class="n">prev</span> <span class="k">AS</span> <span class="p">(</span>
     <span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">tree</span> <span class="k">WHERE</span> <span class="n">ParentNode</span> <span class="k">IS</span> <span class="k">NULL</span>
     <span class="k">UNION</span>
     <span class="k">SELECT</span> <span class="n">t</span><span class="p">.</span><span class="n">Node</span><span class="p">,</span><span class="n">t</span><span class="p">.</span><span class="n">ParentNode</span><span class="p">,</span><span class="n">t</span><span class="p">.</span><span class="n">EmployeeID</span><span class="p">,</span><span class="n">p</span><span class="p">.</span><span class="n">Depth</span> <span class="o">+</span> <span class="mi">1</span> <span class="k">as</span> <span class="n">Depth</span><span class="p">,</span> <span class="n">CONCAT</span><span class="p">(</span><span class="n">p</span><span class="p">.</span><span class="n">Lineage</span><span class="p">,</span> <span class="n">t</span><span class="p">.</span><span class="n">ParentNode</span><span class="p">,</span> <span class="s1">&#39;/&#39;</span><span class="p">)</span>
     <span class="k">FROM</span> <span class="n">prev</span> <span class="n">p</span> <span class="k">JOIN</span> <span class="n">tree</span> <span class="n">t</span> <span class="k">ON</span> <span class="n">t</span><span class="p">.</span><span class="n">ParentNode</span> <span class="o">=</span> <span class="n">p</span><span class="p">.</span><span class="n">Node</span>
     <span class="p">)</span>
     <span class="k">UPDATE</span> <span class="n">tree</span> <span class="n">t</span><span class="p">,</span> <span class="n">prev</span> <span class="n">p</span> <span class="k">SET</span> <span class="n">t</span><span class="p">.</span><span class="n">Depth</span><span class="o">=</span><span class="n">p</span><span class="p">.</span><span class="n">Depth</span><span class="p">,</span> <span class="n">t</span><span class="p">.</span><span class="n">Lineage</span><span class="o">=</span><span class="n">p</span><span class="p">.</span><span class="n">Lineage</span> <span class="k">WHERE</span> <span class="n">t</span><span class="p">.</span><span class="n">Node</span><span class="o">=</span><span class="n">p</span><span class="p">.</span><span class="n">Node</span><span class="p">;</span> 

<span class="n">You</span> <span class="n">have</span> <span class="n">an</span> <span class="n">error</span> <span class="k">in</span> <span class="n">your</span> <span class="k">SQL</span> <span class="n">syntax</span><span class="p">;</span> <span class="k">check</span> <span class="n">the</span> <span class="n">manual</span> <span class="n">that</span> <span class="n">corresponds</span> <span class="k">to</span> <span class="n">your</span> <span class="n">MariaDB</span> <span class="n">server</span> <span class="k">version</span> <span class="k">for</span> <span class="n">the</span> <span class="k">right</span> <span class="n">syntax</span> <span class="k">to</span> <span class="n">use</span> <span class="n">near</span> <span class="s1">&#39;UPDATE tree t, prev p SET t.Depth=p.Depth, t.Lineage=p.Lineage WHERE t.Node=p.No&#39;</span> <span class="k">at</span> <span class="n">line</span> <span class="mi">7</span>
</pre><p>supported in MySQL-8.0 and MSSQL</p>
<table><tr><th>Details:</th><td><a href="https://jira.mariadb.org/browse/MDEV-18511">MDEV-18511</a></td></tr>
<tr><th>Mentor:</th><td>Igor Babaev</td></tr>
</table>
<hr>
<h3 class="anchored_heading" id="implement-except-all-and-intersect-all-operations">Implement EXCEPT ALL and INTERSECT ALL operations</h3>
<p>SQL Standard allows to use EXCEPT ALL and INTERSECT ALL as set operations.
Currently MariaDB Server does not support them.</p>
<p>The goal of this task is to support EXCEPT ALL and INTERSECT ALL
1. at syntax level - allow to use operators EXCEPT ALL and INTERSECT ALL in query expression body
2. at execution level - implement these operations employing temporary tables
(the implementation could use the idea similar to that used for the existing implementation of the INTERSECT operation).</p>
<table><tr><th>Details:</th><td><a href="https://jira.mariadb.org/browse/MDEV-18844">MDEV-18844</a></td></tr>
<tr><th>Mentor:</th><td>Igor Babaev</td></tr>
</table>
<hr>
</div><h2 class="anchored_heading" id="mariadb-server-others">MariaDB Server: others</h2>
<div class="cstm-style" style="border-left: 1px solid grey; padding-left: 10px;"><h3 class="anchored_heading" id="implement-update-with-result-set">Implement UPDATE with result set</h3>
<p>Add an UPDATE operation that returns a result set of the changed rows to the client.</p>
<pre class="fixed"><span class="k">UPDATE</span> <span class="p">[</span><span class="n">LOW_PRIORITY</span><span class="p">]</span> <span class="p">[</span><span class="k">IGNORE</span><span class="p">]</span> <span class="n">tbl_name</span>
    <span class="k">SET</span> <span class="n">col_name1</span><span class="o">=</span><span class="err">{</span><span class="n">expr1</span><span class="o">|</span><span class="k">DEFAULT</span><span class="err">}</span> <span class="p">[,</span> <span class="n">col_name2</span><span class="o">=</span><span class="err">{</span><span class="n">expr2</span><span class="o">|</span><span class="k">DEFAULT</span><span class="err">}</span><span class="p">]</span> <span class="p">...</span>
    <span class="p">[</span><span class="k">WHERE</span> <span class="n">where_condition</span><span class="p">]</span>
    <span class="p">[</span><span class="k">ORDER</span> <span class="k">BY</span> <span class="p">...]</span>
    <span class="p">[</span><span class="k">LIMIT</span> <span class="k">row_count</span><span class="p">]</span>
<span class="n">RETURNING</span> <span class="n">select_expr</span> <span class="p">[,</span> <span class="n">select_expr</span> <span class="p">...]</span>
</pre><p>I'm not exactly sure how the corresponding multiple-table syntax should look like, or if it is possible at all. But already having it for single-table updates would be a nice feature.</p>
<table><tr><th>Details:</th><td><a href="https://jira.mariadb.org/browse/MDEV-5092">MDEV-5092</a></td></tr>
<tr><th>Mentor:</th><td>Igor Babaev</td></tr>
</table>
<hr>
<h3 class="anchored_heading" id="automatic-provisioning-of-slave">Automatic provisioning of slave</h3>
<h4 class="anchored_heading" id="idea">Idea</h4>
<p>The purpose of this task is to create an easy-to-use facility for setting up a
new MariaDB replication slave.</p>
<p>Setting up a new slave currently involves: 1) installing MariaDB with initial
database; 2) point the slave to the master with CHANGE MASTER TO; 3) copying
initial data from the master to the slave; and 4) starting the slave with
START SLAVE. The idea is to automate step (3), which currently needs to be
done manually.</p>
<p>The syntax could be something as simple as</p>
<pre class="fixed"><span class="k">LOAD</span> <span class="k">DATA</span> <span class="k">FROM</span> <span class="n">MASTER</span>
</pre><p>This would then connect to the master that is currently configured. It will
load a snapshot of all the data on the master, and leave the slave position at
the point of the snapshot, ready for START SLAVE to continue replication from
that point.</p>
<h4 class="anchored_heading" id="implementation">Implementation:</h4>
<p>The idea is to do this non-blocking on the master, in a way that works for any
storage engine. It will rely on row-based replication to be used between the
master and the slave.</p>
<p>At the start of <code>LOAD DATA FROM MASTER</code>, the slave will enter a special
provisioning mode. It will start replicating events from the master at the
master's current position.</p>
<p>The master dump thread will send binlog events to the slave as normal. But in
addition, it will interleave a dump of all the data on the master contained in
tables, views, or stored functions. Whenever the dump thread would normally go
to sleep waiting for more data to arrive in the binlog, the dump thread will
instead send another chunk of data in the binlog stream for the slave to apply.</p>
<p>A "chunk of data" can be:</p>
<ul start="1"><li>A CREATE OR REPLACE TABLE / VIEW / PROCEDURE / FUNCTION
</li></ul>
<ul start="1"><li>A range of N rows (N=100, for example). Each successive chunk will do a range scan on the primary key from the end position of the last chunk.
</li></ul>
<p>Sending data in small chunks avoids the need for long-lived table locks or
transactions that could adversely affect master performance.</p>
<p>The slave will connect in GTID mode. The master will send dumped chunks in a
separate domain id, allowing the slave to process chunks in parallel with
normal data.</p>
<p>During the provisioning, all normal replication events from the master will
arrive on the slave, and the slave will attempt to apply them locally. Some of
these events will fail to apply, since the affected table or row may not yet
have been loaded. In the provisioning mode, all such errors will be silently
ignored. Proper locking (isolation mode, eg.) must be used on the master when
fetching chunks, to ensure that updates for any row will always be applied
correctly on the slave, either in a chunk, or in a later row event.</p>
<p>In order to make the first version of this feature feasible to implement in a
reasonable amount of time, it should set a number of reasonable restrictions
(which could be relaxed in a later version of the feature):</p>
<ul start="1"><li>Give up with an error if the slave is not configured for GTID mode (MASTER_USE_GTID != NO).
</li></ul>
<ul start="1"><li>Give up with error if the slave receives any event in statement-based binlogging (so the master must be running in row-based replication mode, and no DDL must be done while the provisioning is running).
</li></ul>
<ul start="1"><li>Give up with an error if the master has a table without primary key.
</li></ul>
<ul start="1"><li>Secondary indexes will be enabled during the provisioning; this means that tables with large secondary indexes could be expensive to provision.
</li></ul>
<table><tr><th>Details:</th><td><a href="https://jira.mariadb.org/browse/MDEV-7502">MDEV-7502</a></td></tr>
<tr><th>Mentor:</th><td>Andrei Elkin</td></tr>
</table>
<hr>
<h3 class="anchored_heading" id="connection-encryption-plugin-support">connection encryption plugin support</h3>
<p>As a follow-on to <a href="https://jira.mariadb.org/browse/MDEV-4691">MDEV-4691</a> we would like GSSAPI encryption (in addition to authentication) support in MariaDB. I am told that the current plan is to create a plugin interface and then we can build GSSAPI encryption on top of that, so here is a ticket for that.</p>
<p>From having written GSSAPI for the internal interface, there were a couple things I would like to see in the plugin encryption interface.</p>
<p>First, GSSAPI is weird in that it does authentication before encryption (TLS/SSL are the other way around, establishing an encrypted channel and then doing authentication over it). Of course support for this is needed, but more importantly, packets must be processed in a fully serialized fashion. This is because encrypted packets may be queued while one end of the connection is still finishing up processing the authentication handshake. One way to do this is registering "handle" callbacks with connection-specific state, but there are definitely others.</p>
<p>Additionally, for whatever conception there ends up being of authentication and encryption, it needs to be possible to share more data than just a socket between them. The same context will be used for authentication and encryption, much as an SSL context is (except of course we go from authentication to encryption and not the other way around).</p>
<p>This ties into an issue of dependency. If authentication plugins are separate entities from encryption plugins in the final architecture, it might make sense to do mix-and-match authentication with encryption. However, there are cases - and GSSAPI is one - where doing encryption requires a certain kind of authentication (or vice versa). You can't do GSSAPI encryption without first doing GSSAPI authentication. (Whether or not it's permitted to do GSSAPI auth-&gt;encryption all over a TLS channel, for instance, is not something I'm concerned about.)</p>
<p>Finally, encrypted messages are larger than their non-encrypted counterparts. The transport layer should cope with this so that plugins don't have to think about reassembly, keeping in mind that there may not be a way to get the size of a message when encrypted without first encrypting it.</p>
<p>It's unfortunately been a little while since I wrote that code, but I think those were the main things that we'll need for GSSAPI. Thanks!</p>
<table><tr><th>Details:</th><td><a href="https://jira.mariadb.org/browse/MDEV-9090">MDEV-9090</a></td></tr>
<tr><th>Mentor:</th></tr>
</table>
<hr>
<h3 class="anchored_heading" id="add-returning-to-insert">Add RETURNING to INSERT</h3>
<p>Please add a RETURNING option to INSERT.</p>
<p>Example from PostgreSQL</p>
<pre class="fixed"><span class="n">postgres</span><span class="o">=#</span> <span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">t1</span> <span class="p">(</span><span class="n">id</span> <span class="nb">SERIAL</span><span class="p">,</span> <span class="n">name</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">100</span><span class="p">));</span>
<span class="k">CREATE</span> <span class="k">TABLE</span>
<span class="n">postgres</span><span class="o">=#</span> <span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">t1</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="k">VALUES</span><span class="p">(</span><span class="s1">&#39;test&#39;</span><span class="p">)</span> <span class="n">RETURNING</span> <span class="n">id</span><span class="p">;</span>
 <span class="n">id</span> 
<span class="c1">----</span>
  <span class="mi">1</span>
<span class="p">(</span><span class="mi">1</span> <span class="k">row</span><span class="p">)</span>

<span class="k">INSERT</span> <span class="mi">0</span> <span class="mi">1</span>
</pre><p>Inspired by: <a href="https://evertpot.com/writing-sql-for-postgres-mysql-sqlite/">https://evertpot.com/writing-sql-for-postgres-mysql-sqlite/</a></p>
<p>This could make it easier to write statements which work with both MariaDB and PostgreSQL. And this might improve compatibility with Oracle RDBMS.</p>
<table><tr><th>Details:</th><td><a href="https://jira.mariadb.org/browse/MDEV-10014">MDEV-10014</a></td></tr>
<tr><th>Mentor:</th><td>Oleksandr Byelkin</td></tr>
</table>
<hr>
<h3 class="anchored_heading" id="aggregate-window-functions">Aggregate Window Functions</h3>
<p>With a few exceptions, most native aggregate functions are supported as window functions.
<a href="https://mariadb.com/kb/en/library/aggregate-functions-as-window-functions/">https://mariadb.com/kb/en/library/aggregate-functions-as-window-functions/</a></p>
<p>In <a href="https://jira.mariadb.org/browse/MDEV-7773">MDEV-7773</a>, support for creating of custom aggregate functions was added.
This task proposes to extend that feature and allow custom aggregate functions to be used as window functions</p>
<p>An example of a creating a custom aggregate function is given below:</p>
<pre class="fixed"><span class="k">create</span> <span class="k">aggregate</span> <span class="k">function</span> <span class="n">agg_sum</span><span class="p">(</span><span class="n">x</span> <span class="nb">INT</span><span class="p">)</span> <span class="k">returns</span> <span class="n">double</span>
<span class="k">begin</span>
  <span class="k">declare</span> <span class="n">z</span> <span class="n">double</span> <span class="k">default</span> <span class="mi">0</span><span class="p">;</span>
  <span class="k">declare</span> <span class="k">continue</span> <span class="k">handler</span> <span class="k">for</span> <span class="k">not</span> <span class="k">found</span> <span class="k">return</span> <span class="n">z</span><span class="p">;</span>
  <span class="n">loop</span>
    <span class="k">fetch</span> <span class="k">group</span> <span class="k">next</span> <span class="k">row</span><span class="p">;</span>
    <span class="k">set</span> <span class="n">z</span> <span class="o">=</span> <span class="n">z</span> <span class="o">+</span> <span class="n">x</span><span class="p">;</span>
  <span class="k">end</span> <span class="n">loop</span><span class="p">;</span>
<span class="k">end</span><span class="o">|</span>
</pre><p>This functions can be used in the following query:</p>
<pre class="fixed"><span class="k">create</span> <span class="k">table</span> <span class="n">balances</span> <span class="p">(</span><span class="n">id</span> <span class="nb">int</span><span class="p">,</span> <span class="n">amount</span> <span class="nb">int</span><span class="p">);</span>
<span class="k">insert</span> <span class="k">into</span> <span class="n">balances</span> <span class="k">values</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">20</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">30</span><span class="p">);</span>
 
<span class="k">select</span> <span class="n">agg_sum</span><span class="p">(</span><span class="n">amount</span><span class="p">)</span> <span class="k">from</span> <span class="n">balances</span><span class="p">;</span>
</pre><p>After this task is complete the following must also work:</p>
<pre class="fixed"><span class="k">select</span> <span class="n">agg_sum</span><span class="p">(</span><span class="n">amount</span><span class="p">)</span> <span class="n">over</span> <span class="p">(</span><span class="k">order</span> <span class="k">by</span> <span class="n">id</span><span class="p">);</span>
</pre><table><tr><th>Details:</th><td><a href="https://jira.mariadb.org/browse/MDEV-11263">MDEV-11263</a></td></tr>
<tr><th>Mentor:</th><td>Varun Gupta</td></tr>
</table>
<hr>
<h3 class="anchored_heading" id="true-alter-locknone-on-slave">True ALTER LOCK=NONE on slave</h3>
<p>Currently no true LOCK=NONE exists on slave.
Alter table is first committed on master then it is replicated on slaves.
The purpose of this task is to create a true LOCK=NONE</p>
<h4 class="anchored_heading" id="implementation-idea">Implementation Idea</h4>
<p>Master will write BEGIN_DDL_EVENT in binlog after it hits ha_prepare_inplace_alter_table.
Then master will write QUERY_EVENT on binlog with actual alter query .
On commit/rollback master will write COMMIT_DDL_EVENT/ROLLBACK_DDL_EVENT.</p>
<p>On slave there will be pool of threads(configurable global variable), which
will apply these DDLs. On reciving BEGIN_DDL_EVENT slave thread will pass the
QUERY_EVENT to one of the worker thread. Worker thread will execute untill
ha_inplace_alter_table. Actual commit_inplace_alter will be called by sql thread.
If sql thread recieve some kind of rollback event , then it will somehow signal
worker thread to stop executing alter. If none of the worker threads are avaliable
then event will be enqueued, then If we recieved rollback event the we will simply
discard event from queue, If we recieved commit event then SQL thread will syncrolysly
process DDL event.</p>
<table><tr><th>Details:</th><td><a href="https://jira.mariadb.org/browse/MDEV-11675">MDEV-11675</a></td></tr>
<tr><th>Mentor:</th><td>Sachin Setiya</td></tr>
</table>
<hr>
<h3 class="anchored_heading" id="improve-mysqltest-language">Improve mysqltest language</h3>
<p>mysqltest has a lot of historical problems:</p>
<ul start="1"><li>ad hoc parser, weird limitations
</li><li>commands added as needed with no view over the total language structure
</li><li>historical code issues (e.g. casts that become unnecessary 10 years ago)
etc
</li></ul>
<p>A lot can be done to improve it.
Ideas</p>
<ul start="1"><li>control structures, else in if, break and continue in while, for (or foreach) loop
</li><li>proper expression support in let, if, etc
</li><li>rich enough expressions to make resorting to sql unnecessary in most cases
</li><li>remove unused and redundant commands (e.g. system vs exec, query_vertical vs vertical_results ONCE)
</li><li>remove complex commands that do many sql statements under the hood, if they can be scripted, e.g. sync_slave_with_master
</li><li>remove over-verbose treatment of rpl test failures
</li><li>scoped variables
</li><li>parameters for the source command
</li><li>remove dead code
</li></ul>
<table><tr><th>Details:</th><td><a href="https://jira.mariadb.org/browse/MDEV-12130">MDEV-12130</a></td></tr>
<tr><th>Mentor:</th><td>Sergei Golubchik</td></tr>
</table>
<hr>
<h3 class="anchored_heading" id="implement-multiple-table-updatedelete-returning-a-result-set">Implement multiple-table UPDATE/DELETE returning a result set</h3>
<p>A multiple-table UPDATE first performs join operations, then it updates the matching rows.
A multiple-table UPDATE returning a result set does the following:</p>
<ul start="1"><li>first performs join operations
</li><li>for each row of the result of the join it calculates some expressions over the columns of the join and forms from them a row of the returned result set
</li><li>after this it updates the matching rows
</li></ul>
<p>A multiple-table DELETE first performs join operations, then it deletes the matching rows.
A multiple-table DELETE returning a result set does the following:</p>
<ul start="1"><li>first performs join operations
</li><li>for each row of the result of the join it calculates some expressions over the columns of the join and forms from them a row of the returned result set
</li><li>after this it deletes the matching rows
</li></ul>
<table><tr><th>Details:</th><td><a href="https://jira.mariadb.org/browse/MDEV-12326">MDEV-12326</a></td></tr>
<tr><th>Mentor:</th><td>Igor Babaev</td></tr>
</table>
<hr>
<h3 class="anchored_heading" id="sort-out-the-compression-library-chaos">sort out the compression library chaos</h3>
<p>As MariaDB is getting more storage engines and as they're getting more features, MariaDB can optionally use more and more compression libraries for various purposes.</p>
<p>InnoDB, TokuDB, RocksDB — they all can use different sets of compression libraries. Compiling them all in would result in a lot of run-time/rpm/deb dependencies, most of which will be never used by most of the users. Not compiling them in, would result in requests to compile them in. While most users don't use all these libraries, many users use some of these libraries.</p>
<p>A solution could be to load these libraries on request, without creating a packaging dependency. There are different ways to do it</p>
<ul start="1"><li>hide all compression libraries behind a single unified compression API. Either develop our own or use something like Squash. This would require changing all engines to use this API
</li><li>use the same approach as in server services — create a service per compression library, a service implementation will just return an error code for any function invocation if the corresponding library is not installed. this way — may be — we could avoid modifying all affected storage engines
</li></ul>
<table><tr><th>Details:</th><td><a href="https://jira.mariadb.org/browse/MDEV-12933">MDEV-12933</a></td></tr>
<tr><th>Mentor:</th><td>Sergei Golubchik</td></tr>
</table>
<hr>
<h3 class="anchored_heading" id="control-over-memory-allocated-for-spps">Control over memory allocated for SP/PS</h3>
<p>SP/PS (Stored Procedures / Prepared Statements) allocates memory till the PS cache of SP will be destroyed. There is no way to see how many memory allocated and if it grows with each execution (first 2 execution can lead to new memory allocation but not more)</p>
<h4 class="anchored_heading" id="task-minimum">Task minimum:</h4>
<p>Status variables which count the memory used/allocated for SP/PS by thread and/or for the server.</p>
<h4 class="anchored_heading" id="other-ideas">Other ideas:</h4>
<ul start="1"><li>Automatic stop allocation in debvugging version after second execution and call exception on attempt.
</li><li>Information schema by threads and SP/PS with information about allocated and used memory
</li></ul>
<p>Information can be collected in MEM_ROOTs of SP/PS. Storing info about status of mem_root before execution then checking after new allocated memory can be found.</p>
<p>MEM_ROOT can be changed to have debug mode which make it read only which can be switched on after second execution.</p>
<table><tr><th>Details:</th><td><a href="https://jira.mariadb.org/browse/MDEV-14959">MDEV-14959</a></td></tr>
<tr><th>Mentor:</th><td>Oleksandr Byelkin</td></tr>
</table>
</div><h2 class="anchored_heading" id="mariadb-columnstore">MariaDB ColumnStore</h2>
<div class="cstm-style" style="border-left: 1px solid grey; padding-left: 10px;"><h3 class="anchored_heading" id="full-decimal-support-in-columnstore">Full DECIMAL support in ColumnStore</h3>
<p>MariaDB ColumnStore supports DECIMAL with some limitations:</p>
<p>1. We do not support the full DECIMAL range that is in MariaDB
2. In several places in the code we convert the DECIMAL to DOUBLE during execution therefore losing precision</p>
<p>Implementing this will likely require the following:</p>
<ul start="1"><li>Implementation of methods to handle MariaDB's DECIMAL format
</li><li>Support for a longer than 8-byte numeric column type (there is an InfiniDB tree with work for this already)
</li><li>Modification of the primitives processor for the math
</li><li>Modification of the function expression processor to handle the new type
</li><li>Version upgrade support for DECIMAL from the current form to the new form
</li></ul>
<table><tr><th>Details</th><td><a href="https://jira.mariadb.org/browse/MCOL-641">MCOL-641</a></td></tr>
<tr><th>Mentor:</th><td>Andrew Hutchings</td></tr>
</table>
<hr>
<h3 class="anchored_heading" id="mcsapi-needs-a-new-read-api-design">mcsapi needs a new read API Design</h3>
<p>We need an ORM-style NoSQL read API to go along with the bulk write API of mcsapi.</p>
<p>This will likely take the form of:</p>
<p>1. A reader in ExeMgr which will convert messages from mcsapi into jobs
2. Code in mcsapi to send/receive the messages</p>
<p>Although ExeMgr can already receive messages with an execution plan the format is very complex and ABI breaks easily (we often send whole C++ objects).</p>
<p>We should look at other ORM frameworks for inspiration as the the API design.</p>
<p>This task to do the design for this API.</p>
<table><tr><th>Details:</th><td><a href="https://jira.mariadb.org/browse/MCOL-1151">MCOL-1151</a></td></tr>
<tr><th>Mentor:</th><td>Andrew Hutchings</td></tr>
</table>
<hr>
<h3 class="anchored_heading" id="use-jit-for-aggregation-functions">Use JIT for aggregation functions</h3>
<p>CS uses Volcano processing approach working on one value at a time. This is very inefficient way for analytics workload that usually uses lots of aggregation functions in projections, filtering or sorting.
We are interested in using JIT for basic aggregation functions: sum, avg, count, min, max. The patch must compile and run a program that processes and returns the aggregation function result. We were written this description having LLVM in mind as it is widespread and has a lots of examples in the wild.
I suggest to start looking at RowAggregation::addRowGroup() from ./utils/rowgroup/rowaggregation.cpp to get what it takmakees to get avg() function result.
Here is the link on how to build fast a CS developer environment.</p>
<table><tr><th>Details:</th><td><a href="https://jira.mariadb.org/browse/MCOL-2222">MCOL-2222</a></td></tr>
<tr><th>Mentor:</th><td>Roman</td></tr>
</table>
<hr>
<h3 class="anchored_heading" id="engine-independent-statistics-for-columnstore">Engine independent statistics for Columnstore</h3>
<p>CS now has a very rudimentary query optimization capabilities and we want to improve the situtation. We consider to use Server's optimizer for the purpose but the Server needs statistics namely values distribution histograms and Number of Distinct Values distribution histograms.
There are different levels of complexity for the task:</p>
<ul start="1"><li>implement standalone segment files reader that in the end populates both mysql.column_stats and mysql.table_stats using out of band mariadb client connection
</li><li>implement ANALYZE TABLE functionality for Columnstore engine
</li><li>implement ANALYZE TABLE and Histograms with equal-width bins for values distribution histograms(similar to <a href="https://jira.mariadb.org/browse/MDEV-12313">MDEV-12313</a>) together with NDV histograms to decrease I/O
</li></ul>
<p>We expect to have both unit and regression tests but this is optional.</p>
<table><tr><th>Details:</th><td><a href="https://jira.mariadb.org/browse/MCOL-2223">MCOL-2223</a></td></tr>
<tr><th>Mentor:</th><td>Roman</td></tr>
</table>
</div><h1 class="anchored_heading" id="suggest-a-task">Suggest a Task</h1>
<p>Do you have an idea of your own, not listed above? Do let us know!</p>

    </div>


        
            <div id="subscribe" class="well well-small hide hidden-print"
                 data-subscribe-url="/kb/en/google-summer-of-code-2019/+subscriptions/add"
                 data-unsubscribe-url="/kb/en/google-summer-of-code-2019/+subscriptions/remove">
            </div>
        

        
        
    
        <div class="simple_section_nav">
            <ul class="nav nav-pills">
                
                    <li><a href="/kb/en/google-summer-of-code-2020/">
                        ← Google Summer of Code 2020
                    </a>
                    </li>
                
                
                    <li><a href="/kb/en/google-summers-of-code/">
                        ↑ Google Summers of Code ↑
                    </a>
                    </li>
                
                
                    <li class="pull-right"><a href="/kb/en/google-summer-of-code-2018/">
                        Google Summer of Code 2018 →
                    </a>
                    </li>
                
            </ul>
        </div>
    

        

        
        <h2>Comments</h2>
        
    
    <div id="comments" data-node-id="8731" data-comments-url="/kb/en/google-summer-of-code-2019/+comments"
         data-reply-url="/kb/en/google-summer-of-code-2019/comments/post/">
        Comments loading...
    </div>

        

    </div>


                    <div id="content_disclaimer" class="graybox">
                        Content reproduced on this site is the property of its respective owners,
                        and this content is not reviewed in advance by MariaDB. The views, information and opinions
                        expressed by this content do not necessarily represent those of MariaDB or any other party.
                    </div>
                </div>
            </section>

            
                <div id="right_bar" class="col-md-2">
                    
    
        
        <ul class="section_navigation well well-small hidden-xs hidden-sm">
            
                <li class="parent"><a href="/kb/en/google-summers-of-code/">
                    ↑ Google Summers of Code ↑
                </a>
                </li>
            
            
                
                    <li>
                        <a href="/kb/en/google-summer-of-code-2024/">
                            
                            Google Summer of Code 2024
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/google-summer-of-code-2023/">
                            
                            Google Summer of Code 2023
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/google-summer-of-code-2022/">
                            
                            Google Summer of Code 2022
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/google-summer-of-code-2021/">
                            
                            Google Summer of Code 2021
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/google-summer-of-code-2020/">
                            
                            Google Summer of Code 2020
                        </a>
                    </li>
                
            
                
                    <li class="active">
                        <span>Google Summer of Code 2019</span>
                        
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/google-summer-of-code-2018/">
                            
                            Google Summer of Code 2018
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/google-summer-of-code-2017/">
                            
                            Google Summer of Code 2017
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/google-summer-of-code-2016/">
                            
                            Google Summer of Code 2016
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/google-summer-of-code-2015/">
                            
                            Google Summer of Code 2015
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/google-summer-of-code-2014/">
                            
                            Google Summer of Code 2014
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/google-summer-of-code-2013/">
                            
                            Google Summer of Code 2013
                        </a>
                    </li>
                
            
        </ul>
    
    

                </div>
            
        </div>
    </div>
</div>

<!-- Footer -->
<footer id="footer">
    <div class="footer">
        <div class="container">
            <div class="row">
                <div class="col-xs-12">
                    <ul class="list-inline text-center footer-nav">
                        <li>
                            <h5>
                                <a href="https://mariadb.com/products" title="Products">Products</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/services" title="Services">Services</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/pricing" title="Pricing">Pricing</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/resources" title="Resources">Resources</a>
                            </h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/about-us" title="About MariaDB">About Us</a></h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/download" title="Download">Download MariaDB</a></h5>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="row row-10">
                
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div id="block-footerformcontact" class="block block-block-content block-block-contentd754ee1b-3cc9-40e7-9ef4-f504f1197fb1">
                        
                            <h5 style="font-weight: 400;">Subscribe to our newsletter!</h5>
                            <script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script src="//app-sj15.marketo.com/js/forms2/js/forms2.min.js"></script><form id="mktoForm_1498"></form>
                            <script>
                                <!--//--><![CDATA[// ><!--
                                MktoForms2.loadForm("//app-sj15.marketo.com", "573-PXI-984", 1498);
                                //--><!]]]]><![CDATA[>
                                //--><!]]>
                            </script>
                        
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div class="footer-copyright">
                        <div class="text-center">
                            <ul class="list-inline no-margin">
                                <li>
                                    <a href="/legal" title="Legal">Legal</a>
                                </li>
                                <li>
                                    <a href="/privacy-policy" title="Privacy Policy">Privacy Policy</a>
                                </li>
                                <li>
                                    <a href="/cookie-policy/" title="Cookies">Cookie Policy</a>
                                </li>
                            </ul>
                            <p>Copyright &copy; 2024 MariaDB. All rights reserved.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
</footer>
</div>

<div id="ajax_loading">
    <img src="/kb/static/images/ajax-loader.a51c5608d01a.gif" />
</div>

    <!-- Google Tag Manager -->
    <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-MK2847"
                      height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
            '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MK2847');</script>
    <!-- End Google Tag Manager -->

</body>

<script type="text/javascript" src="/kb/static/js/main.1587e3a666fc.js" charset="utf-8"></script>

</html>