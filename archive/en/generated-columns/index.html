<!DOCTYPE html>
<html>
<head data-cookie-domain=""
      data-cookie-path="/">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="apple-touch-icon" sizes="180x180" href="/kb/static/images/favicons/apple-touch-icon.159e713979be.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/kb/static/images/favicons/favicon-32x32.bc0ac1d5d11e.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/kb/static/images/favicons/favicon-16x16.5801f8f0f34e.png">
    <link rel="shortcut icon" href="/kb/static/images/favicons/favicon.d122d305dee4.ico" type="image/x-icon" />

    <title>Generated (Virtual and Persistent/Stored) Columns - MariaDB Knowledge Base</title>

    <link href="/kb/static/css/main.f7633538c846.css" rel="stylesheet" type="text/css" />

    

    

    <!-- FB Open Graph tags -->
    <meta property="og:title" content="Generated (Virtual and Persistent/Stored) Columns" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://mariadb.com/kb/en/generated-columns/" />
    <meta property="og:image" content="http://mariadb.comaskmonty-logo.png" />
    <meta property="og:site_name" content="MariaDB KnowledgeBase" />
    <meta property="fb:admins" content="514852603" />
    <meta property="og:description" content="Generated (virtual and persistent/stored) columns." />

    <meta name="description" content="Generated (virtual and persistent/stored) columns." />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="//fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet"/>
    
</head>
<body class="mpkb nodes products nodes_view jqui" id="nodes_view">





<div id="menu-mobile" class="visible-sm visible-xs">

    <div>
        <div id="mobile-close-menu" class="text-right">
            <a href="javascript:void(0)" title="Close Menu" id="back-main" class="toggle-menu">X<span></span></a>
        </div>
    </div>
    <div class="mainmenu-mobile">
        <ul class="ls-none ul-menu">
            <li data-sub="submenu5"><a class="open-form-search" href="/kb/search/" title="Search">Search </a></li>
            <li data-sub="submenu0"><a href="/products" title="Products">Products</a><span class="arrow-main"></span></li>
            <li data-sub="submenu1"><a href="/services" title="Services">Services</a><span class="arrow-main"></span></li>
            <li data-sub="submenu2"><a href="/resources" title="Resources">Resources</a><span class="arrow-main"></span></li>
            <li data-sub="submenu3"><a href="/about-us" title="About">About</a><span class="arrow-main"></span></li>
            <li data-sub="submenu4"><a href="/contact" title="Contact">Contact</a></li>
        </ul>
    </div>

    <div class="nav-top-mobile">
        <div class="select-box form">

            <ul class="inline-block-md mb-none top-nav">
                <li>

                </li>
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/generated-columns/"> Login</a>
                    </li>
                
            </ul>



        </div>
        <p class="text-center copyright">Copyright &copy; 2024 MariaDB. All rights reserved.</p>
    </div>
</div>
<div class="violator-wrap d-none" id="top_violator">
    <div class="container">
        <div class="row">
            <div class="col-xs-12 col-sm-12">
                <div class="violator-outer">
                    <div class="violator-inner">
                        <div class="row">
                            <div class="col-xs-12 col-sm-9 col-lg-7 col-lg-offset-2" id="top_violator_content">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="content-link" target="_blank" rel="nofollow noreferrer">
                                    <span>The Ultimate Guide to High Availability with MariaDB</span>
                                </a>
                            </div>
                            <div class="col-xs-12 col-sm-3" id="top_violator_cta">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="btn btn-mariadb" target="_blank" rel="nofollow noreferrer">Download Now</a>
                            </div>
                        </div>
                    </div>
                    <button type="button" class="btn btn-link close-btn">
                        <svg xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 24 24" width="15px" height="15px"><path d="M 4.9902344 3.9902344 A 1.0001 1.0001 0 0 0 4.2929688 5.7070312 L 10.585938 12 L 4.2929688 18.292969 A 1.0001 1.0001 0 1 0 5.7070312 19.707031 L 12 13.414062 L 18.292969 19.707031 A 1.0001 1.0001 0 1 0 19.707031 18.292969 L 13.414062 12 L 19.707031 5.7070312 A 1.0001 1.0001 0 0 0 18.980469 3.9902344 A 1.0001 1.0001 0 0 0 18.292969 4.2929688 L 12 10.585938 L 5.7070312 4.2929688 A 1.0001 1.0001 0 0 0 4.9902344 3.9902344 z"/></svg>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="wrapper">
<div id="top-nav">
    <div class="container">
        <ul class="hidden-sm hidden-xs" >
            <li><a href="https://mariadb.com/kb/">Knowledge Base</a></li>
            <li><a href="https://mariadb.com/contact/">Contact</a></li>
            
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/generated-columns/" rel="nofollow">Login</a>
                    </li>
                
            
            
            <li id="search-form">
                <form action="/kb/en/+search/" method="get" id="search-block-form" accept-charset="UTF-8">
                    <input id="search" title="Enter the terms you wish to search for."
                           placeholder="Search . . ." type="text"
                           name="q" value="" size="15" maxlength="128" class="form-text"
                           data-autocomplete-url="/kb/en/+search/autocomplete/">
                    <input type="hidden" name="quick" value="1" />
                    <input type="hidden" name="source" value="kb" />
                </form>
            </li>
            <li><a id="search-toggler" href="/kb/search/">Search</a></li>
            
        </ul>
    </div>
</div>
<div id="navbar-bottom" class="navbar">
    <div class="container">
        
        
        
        
        <div class="row">
            <div class="col-md-3 col-sm-9 col-xs-9">
                <a class="brand" href="/" title="MariaDB">
                    <img src="/kb/static/images/logo-2018-black.95f5978ae14d.png">
                </a>
            </div>
            <div class="col-md-9 hidden-sm hidden-xs">
                <div class="main-menu">
                    <ul id="main-menu" class="nav navbar-nav inline-block-sm">
    <li class="has-sub full-menu">
        <a href="/products" title="Products">Products</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/services" title="Services">Services</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/pricing" title="Pricing">Pricing</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/resources" title="Resources">Resources</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/about-us" title="About Us">About Us</a>
    </li>
    <li class="">
        <a class="button electric-eel small top-bar-right-download" href="/downloads/">Download</a>
    </li>
</ul>
                </div>
            </div>
            <div class="col-md-3 visible-sm visible-xs col-sm-3 col-xs-3 ps-rv">
                <div class="navbar-header text-right pull-right">
                    <button type="button" class="menu-control toggle-menu" id="open-menu">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="main">
    <div class="container">
        

        <div id="subheader1" class="clearfix">
            <div class="pull-left">
                
                <div id="breadcrumbs" class="breadcrumb">
                    <a href="/kb/en/">Knowledge Base</a>
                    


    
    » <a class="crumb" href="/kb/en/documentation/">MariaDB Server Documentation</a>
    

    
    » <a class="crumb" href="/kb/en/using-mariadb-server/">Using MariaDB Server</a>
    

    
    » <a class="crumb" href="/kb/en/sql-statements-structure/">SQL Statements &amp; Structure</a>
    

    
    » <a class="crumb" href="/kb/en/sql-statements/">SQL Statements</a>
    

    
    » <a class="crumb" href="/kb/en/data-definition/">Data Definition</a>
    

    
    » <a class="crumb" href="/kb/en/create/">CREATE</a>
    


    » <a class="node_link crumb" href="/kb/en/generated-columns/">Generated (Virtual and Persistent/Stored) Columns</a>


                </div>
                
            </div>
        </div>
    </div>
    <div class="container" id="container-main">
        <div class="row">
            
            
                
                <aside id="sidebar-first" class="sidebar col-md-2 hidden-xs hidden-sm hidden-print">
                    
                        
                        <ul id="category_menu" class="nav nav-pills nav-stacked">
                            <li><a href="/kb/en/">Home</a></li>
                            
                                
                                    <li><a href="/kb/en/+questions/">Open Questions</a></li>
                                
                                <li><a href="/kb/en/documentation/">MariaDB Server</a></li>
                                <li><a href="/kb/en/maxscale/">MariaDB MaxScale</a></li>
                                <li><a href="/kb/en/mariadb-columnstore/">MariaDB ColumnStore</a></li>
                                <li><a href="/kb/en/connectors/">Connectors</a></li>
                            

                        </ul>
                    

                    
<div>



<div class="well well-small box actions"><div>

        <a class="btn btn-block btn-blue btn-sm" href="/kb/en/generated-columns/+history" rel="nofollow">History</a>
        
        
        
        <a class="btn btn-block btn-blue btn-sm" href="/kb/en/generated-columns/+source/">Source</a>
        
        <a class="btn btn-block btn-blue btn-sm flag" href="/kb/en/generated-columns/+flag"
                data-flag-url="/kb/en/generated-columns/+flag" rel="nofollow">
                Flag as Spam / Inappropriate</a>
        
        <a class="btn btn-block btn-blue btn-sm" href="/kb/en/generated-columns/+translate/">
                Translate</a>
        

</div>
</div>





<div class="well well-small box node_info"><div>

    <dl>
        <dt>Created</dt>
        <dd>

<span class="datetime" title="2010-08-14 16:19">14 years ago</span></dd>

        <dt>Modified</dt>
        <dd>

<span class="datetime" title="2022-10-25 12:06">1 year, 10 months ago</span></dd>

        <dt>Type</dt>
        <dd>article</dd>

        <dt>Status</dt>
        <dd>active</dd>

        <dt>License</dt>
        <dd>
            
                <a href="/kb/en/generated-columns/+license/">CC BY-SA / Gnu FDL</a>
            
        </dd>

        
    </dl>

    
    <ul class="rss_feeds">
        <li><a href="/kb/en/generated-columns/+history/feed/">
            History</a>
        </li>
        <li><a href="/kb/en/generated-columns/+comments/feed/">
            Comments</a>
        </li>
    </ul>
    

</div>
</div>





    
    
    

<div class="well well-small box attachments"><div><div class="edit_link pull-right"><a href="/kb/en/generated-columns/+edit/attachments/">Edit</a></div><h5>Attachments</h5></div><div>

        
            <div class="no_data">No attachments exist</div>
        
    
</div>
</div>

    



    
    
        

<div class="well well-small box"><div><h5>Localized Versions</h5></div><div>

        <ul>
            
            <li><a href="/kb/it/virtual-columns/">Colonne Virtuali</a> [it]</li>
            
        </ul>
        
</div>
</div>

    



    
    

<div class="well well-small box"><div><h5>Product Versions</h5></div><div>

        <ul id="product_chooser">
            
                <li class="mariadb_from_10_5">
                    <label><input type="checkbox" data-product-class="mariadb_from_10_5"
                            >MariaDB starting with 10.5</label>
                </li>
            
                <li class="mariadb_from_10_5">
                    <label><input type="checkbox" data-product-class="mariadb_from_10_5"
                            >MariaDB starting with 10.5</label>
                </li>
            
        </ul>
    
</div>
</div>






</div>


                    

































                </aside>
            
            
            
                
            
            
                
            
            <section id="content" class="limited_width col-md-8 clearfix">
                
                    <h1>Generated (Virtual and Persistent/Stored) Columns</h1>
                

                



                <div>
                    
    

    
    
    

    <div class="node creole">
        
        
        


    
    <div class="answer formatted">
        <h2 class="anchored_heading" id="syntax">Syntax</h2>
<pre class="fixed">&lt;type&gt;  [GENERATED ALWAYS]  AS   ( &lt;expression&gt; )
[VIRTUAL | PERSISTENT | STORED]  [UNIQUE] [UNIQUE KEY] [COMMENT &lt;text&gt;]
</pre><div class="table_of_contents well well-small">
<h3>Contents</h3>
 <ol class="toc">

    <li class=""><a href="#syntax" title="Syntax">Syntax</a></li>

    <li class=""><a href="#description" title="Description">Description</a></li>

    <li class=""><a href="#supported-features" title="Supported Features">Supported Features</a>    <ol class="toc">

        <li class=""><a href="#storage-engine-support" title="Storage Engine Support">Storage Engine Support</a></li>

        <li class=""><a href="#data-type-support" title="Data Type Support">Data Type Support</a></li>

        <li class=""><a href="#index-support" title="Index Support">Index Support</a></li>

        <li class=""><a href="#statement-support" title="Statement Support">Statement Support</a></li>

        <li class=""><a href="#expression-support" title="Expression Support">Expression Support</a></li>

        <li class=""><a href="#making-stored-values-consistent" title="Making Stored Values Consistent">Making Stored Values Consistent</a></li>

        <li class=""><a href="#mysql-compatibility-support" title="MySQL Compatibility Support">MySQL Compatibility Support</a>    </ol>
</li>

    <li class=""><a href="#implementation-differences" title="Implementation Differences">Implementation Differences</a>    <ol class="toc">

        <li class=""><a href="#implementation-differences-compared-to-microsoft-sql-server" title="Implementation Differences Compared to Microsoft SQL Server">Implementation Differences Compared to Microsoft SQL Server</a>    </ol>
</li>

    <li class=""><a href="#development-history" title="Development History">Development History</a></li>

    <li class=""><a href="#examples" title="Examples">Examples</a></li>

    <li class=""><a href="#see-also" title="See Also">See Also</a> </ol>
</li>
</div>
<p>MariaDB's generated columns syntax is designed to be similar to the syntax for <a href="https://docs.microsoft.com/en-us/sql/relational-databases/tables/specify-computed-columns-in-a-table?view=sql-server-2017">Microsoft SQL Server's computed columns</a> and <a href="https://oracle-base.com/articles/11g/virtual-columns-11gr1">Oracle Database's virtual columns</a>. In <a href="/kb/en/what-is-mariadb-102/">MariaDB 10.2</a> and later, the syntax is also compatible with the syntax for <a href="https://dev.mysql.com/doc/refman/5.7/en/create-table-generated-columns.html">MySQL's generated columns</a>.</p>
<h2 class="anchored_heading" id="description">Description</h2>
<p>A generated column is a column in a table that cannot explicitly be set to a specific value in a <a href="/kb/en/data-manipulation/">DML query</a>. Instead, its value is automatically generated based on an expression. This expression might generate the value based on the values of other columns in the table, or it might generate the value by calling <a href="/kb/en/built-in-functions/">built-in functions</a> or <a href="/kb/en/user-defined-functions/">user-defined functions (UDFs)</a>.</p>
<p>There are two types of generated columns:</p>
<ul start="1"><li><code>PERSISTENT</code> (a.k.a. <code>STORED</code>): This type's value is actually stored in the table.
</li><li><code>VIRTUAL</code>: This type's value is not stored at all. Instead, the value is generated dynamically when the table is queried. This type is the default.
</li></ul>
<p>Generated columns are also sometimes called computed columns or virtual columns.</p>
<h2 class="anchored_heading" id="supported-features">Supported Features</h2>
<h3 class="anchored_heading" id="storage-engine-support">Storage Engine Support</h3>
<ul start="1"><li>Generated columns can only be used with storage engines which support them. If you try to use a storage engine that does not support them, then you will see an error similar to the following:
</li></ul>
<pre class="fixed">ERROR 1910 (HY000): TokuDB storage engine does not support computed columns
</pre><ul start="1"><li><a href="/kb/en/innodb/">InnoDB</a>, <a href="/kb/en/aria/">Aria</a>, <a href="/kb/en/myisam/">MyISAM</a> and <a href="/kb/en/using-connect-virtual-and-special-columns/">CONNECT</a> support generated columns.
</li></ul>
<ul start="1"><li>A column in a <a href="/kb/en/merge/">MERGE</a> table can be built on a <code>PERSISTENT</code> generated column.
<ul start="1"><li>However, a column in a MERGE table can <strong>not</strong> be defined as a <code>VIRTUAL</code> and <code>PERSISTENT</code> generated column.
</li></ul>
</li></ul>
<h3 class="anchored_heading" id="data-type-support">Data Type Support</h3>
<ul start="1"><li>All data types are supported when defining generated columns.
</li></ul>
<ul start="1"><li>Using the <a href="/kb/en/create-table/#zerofill-column-option">ZEROFILL</a> column option is supported when defining generated columns.
</li></ul>
<ul start="1"><li>Using the <a href="/kb/en/auto_increment/">AUTO_INCREMENT</a> column option is <strong>not</strong> supported when defining generated columns. Until <a href="/kb/en/mariadb-10225-release-notes/">MariaDB 10.2.25</a>, it was supported, but this support was removed, because it would not work correctly. See <a href="https://jira.mariadb.org/browse/MDEV-11117">MDEV-11117</a>.
</li></ul>
<h3 class="anchored_heading" id="index-support">Index Support</h3>
<ul start="1"><li>Using a generated column as a table's primary key is <strong>not</strong> supported. See <a href="https://jira.mariadb.org/browse/MDEV-5590">MDEV-5590</a> for more information. If you try to use one as a primary key, then you will see an error similar to the following:
</li></ul>
<pre class="fixed">ERROR 1903 (HY000): Primary key cannot be defined upon a computed column
</pre><ul start="1"><li>Using <code>PERSISTENT</code> generated columns as part of a <a href="/kb/en/foreign-keys/">foreign key</a> is supported.
</li></ul>
<ul start="1"><li>Referencing <code>PERSISTENT</code> generated columns as part of a <a href="/kb/en/foreign-keys/">foreign key</a> is also supported.
<ul start="1"><li>However, using the <code>ON UPDATE CASCADE</code>, <code>ON UPDATE SET NULL</code>, or <code>ON DELETE SET NULL</code> clauses is <strong>not</strong> supported. If you try to use an unsupported clause, then you will see an error similar to the following:
</li></ul>
</li></ul>
<pre class="fixed wrap">ERROR 1905 (HY000): Cannot define foreign key with ON UPDATE SET NULL clause on a computed column
</pre><ul start="1"><li>Defining indexes on both <code>VIRTUAL</code> and <code>PERSISTENT</code> generated columns is supported.
<ul start="1"><li>If an index is defined on a generated column, then the optimizer considers using it in the same way as indexes based on "real" columns.
</li></ul>
</li></ul>
<h3 class="anchored_heading" id="statement-support">Statement Support</h3>
<ul start="1"><li>Generated columns are used in <a href="/kb/en/data-manipulation/">DML queries</a> just as if they were "real" columns.
<ul start="1"><li>However, <code>VIRTUAL</code> and <code>PERSISTENT</code> generated columns differ in how their data is stored.
<ul start="1"><li>Values for <code>PERSISTENT</code> generated columns are generated whenever a <a href="/kb/en/data-manipulation/">DML queries</a> inserts or updates the row with the special <code>DEFAULT</code> value. This generates the columns value, and it is stored in the table like the other "real" columns. This value can be read by other <a href="/kb/en/data-manipulation/">DML queries</a> just like the other "real" columns.
</li><li>Values for <code>VIRTUAL</code> generated columns are not stored in the table. Instead, the value is generated dynamically whenever the column is queried. If other columns in a row are queried, but the <code>VIRTUAL</code> generated column is not one of the queried columns, then the column's value is not generated.
</li></ul>
</li></ul>
</li></ul>
<ul start="1"><li>The <a href="/kb/en/select/">SELECT</a> statement supports generated columns.
</li></ul>
<ul start="1"><li>Generated columns can be referenced in the <a href="/kb/en/insert/">INSERT</a>, <a href="/kb/en/update/">UPDATE</a>, and <a href="/kb/en/delete/">DELETE</a> statements.
<ul start="1"><li>However, <code>VIRTUAL</code> or <code>PERSISTENT</code> generated columns cannot be explicitly set to any other values than <code>NULL</code> or <a href="/kb/en/default/">DEFAULT</a>. If a generated column is explicitly set to any other value, then the outcome depends on whether <a href="/kb/en/sql-mode/#strict-mode">strict mode</a> is enabled in <a href="/kb/en/sql-mode/">sql_mode</a>. If it is not enabled, then a warning will be raised and the default generated value will be used instead. If it is enabled, then an error will be raised instead.
</li></ul>
</li></ul>
<ul start="1"><li>The <a href="/kb/en/create-table/">CREATE TABLE</a> statement has limited support for generated columns.
<ul start="1"><li>It supports defining generated columns in a new table.
</li><li>It supports using generated columns to <a href="/kb/en/partitioning-tables/">partition tables</a>.
</li><li>It does <strong>not</strong> support using the <a href="/kb/en/system-versioned-tables/">versioning clauses</a> with generated columns.
</li></ul>
</li></ul>
<ul start="1"><li>The <a href="/kb/en/alter-table/">ALTER TABLE</a> statement has limited support for generated columns.
<ul start="1"><li>It supports the <code>MODIFY</code> and <code>CHANGE</code> clauses for <code>PERSISTENT</code> generated columns.
</li><li>It does <strong>not</strong> support the <code>MODIFY</code> clause for <code>VIRTUAL</code> generated columns if <a href="/kb/en/alter-table/#algorithm">ALGORITHM</a> is not set to <code>COPY</code>. See <a href="https://jira.mariadb.org/browse/MDEV-15476">MDEV-15476</a> for more information.
</li><li>It does <strong>not</strong> support the  <code>CHANGE</code> clause for <code>VIRTUAL</code> generated columns if <a href="/kb/en/alter-table/#algorithm">ALGORITHM</a> is not set to <code>COPY</code>. See <a href="https://jira.mariadb.org/browse/MDEV-17035">MDEV-17035</a> for more information.
</li><li>It does <strong>not</strong> support altering a table if <a href="/kb/en/alter-table/#algorithm">ALGORITHM</a> is not set to <code>COPY</code> if the table has a <code>VIRTUAL</code> generated column that is indexed. See <a href="https://jira.mariadb.org/browse/MDEV-14046">MDEV-14046</a> for more information.
</li><li>It does <strong>not</strong> support adding a <code>VIRTUAL</code> generated column with the <code>ADD</code> clause if the same statement is also adding other columns if <a href="/kb/en/alter-table/#algorithm">ALGORITHM</a> is not set to <code>COPY</code>. See <a href="https://jira.mariadb.org/browse/MDEV-17468">MDEV-17468</a> for more information.
</li><li>It also does <strong>not</strong> support altering an existing column into a <code>VIRTUAL</code> generated column.
</li><li>It supports using generated columns to <a href="/kb/en/partitioning-tables/">partition tables</a>.
</li><li>It does <strong>not</strong> support using the <a href="/kb/en/system-versioned-tables/">versioning clauses</a> with generated columns.
</li></ul>
</li></ul>
<ul start="1"><li>The <a href="/kb/en/show-create-table/">SHOW CREATE TABLE</a> statement supports generated columns.
</li></ul>
<ul start="1"><li>The <a href="/kb/en/describe/">DESCRIBE</a> statement can be used to check whether a table has generated columns.
<ul start="1"><li>You can tell which columns are generated by looking for the ones where the <code>Extra</code> column is set to either <code>VIRTUAL</code> or <code>PERSISTENT</code>. For example:
</li></ul>
</li></ul>
<pre class="fixed"><span class="k">DESCRIBE</span> <span class="n">table1</span><span class="p">;</span>
<span class="o">+-------+-------------+------+-----+---------+------------+</span>
<span class="o">|</span> <span class="n">Field</span> <span class="o">|</span> <span class="n">Type</span>        <span class="o">|</span> <span class="no">Null</span> <span class="o">|</span> <span class="k">Key</span> <span class="o">|</span> <span class="k">Default</span> <span class="o">|</span> <span class="n">Extra</span>      <span class="o">|</span>
<span class="o">+-------+-------------+------+-----+---------+------------+</span>
<span class="o">|</span> <span class="n">a</span>     <span class="o">|</span> <span class="kt">int</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span>     <span class="o">|</span> <span class="n">NO</span>   <span class="o">|</span>     <span class="o">|</span> <span class="no">NULL</span>    <span class="o">|</span>            <span class="o">|</span>
<span class="o">|</span> <span class="n">b</span>     <span class="o">|</span> <span class="kt">varchar</span><span class="p">(</span><span class="mi">32</span><span class="p">)</span> <span class="o">|</span> <span class="n">YES</span>  <span class="o">|</span>     <span class="o">|</span> <span class="no">NULL</span>    <span class="o">|</span>            <span class="o">|</span>
<span class="o">|</span> <span class="n">c</span>     <span class="o">|</span> <span class="kt">int</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span>     <span class="o">|</span> <span class="n">YES</span>  <span class="o">|</span>     <span class="o">|</span> <span class="no">NULL</span>    <span class="o">|</span> <span class="n">VIRTUAL</span>    <span class="o">|</span>
<span class="o">|</span> <span class="n">d</span>     <span class="o">|</span> <span class="kt">varchar</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>  <span class="o">|</span> <span class="n">YES</span>  <span class="o">|</span>     <span class="o">|</span> <span class="no">NULL</span>    <span class="o">|</span> <span class="n">PERSISTENT</span> <span class="o">|</span>
<span class="o">+-------+-------------+------+-----+---------+------------+</span>
</pre><ul start="1"><li>Generated columns can be properly referenced in the <code>NEW</code> and <code>OLD</code> rows in <a href="/kb/en/triggers/">triggers</a>.
</li></ul>
<ul start="1"><li><a href="/kb/en/stored-procedures/">Stored procedures</a> support generated columns.
</li></ul>
<ul start="1"><li>The <a href="/kb/en/handler-commands/">HANDLER</a> statement supports generated columns.
</li></ul>
<h3 class="anchored_heading" id="expression-support">Expression Support</h3>
<ul start="1"><li>Most legal, deterministic expressions which can be calculated are supported in expressions for generated columns.
</li></ul>
<ul start="1"><li>Most <a href="/kb/en/built-in-functions/">built-in functions</a> are supported in expressions for generated columns.
<ul start="1"><li>However, some <a href="/kb/en/built-in-functions/">built-in functions</a> can't be supported for technical reasons. For example,  If you try to use an unsupported function in an expression, an error is generated similar to the following:
</li></ul>
</li></ul>
<pre class="fixed wrap">ERROR 1901 (HY000): Function or expression 'dayname()' cannot be used in the GENERATED ALWAYS AS clause of `v`
</pre><ul start="1"><li><a href="/kb/en/subqueries/">Subqueries</a> are <strong>not</strong> supported in expressions for generated columns because the underlying data can change.
</li></ul>
<ul start="1"><li>Using anything that depends on data outside the row is <strong>not</strong> supported in expressions for generated columns.
</li></ul>
<ul start="1"><li><a href="/kb/en/stored-functions/">Stored functions</a> are <strong>not</strong> supported in expressions for generated columns. See <a href="https://jira.mariadb.org/browse/MDEV-17587">MDEV-17587</a> for more information.
</li></ul>
<ul start="1"><li>Non-deterministic <a href="/kb/en/built-in-functions/">built-in functions</a> are supported in expressions for not indexed <code>VIRTUAL</code> generated columns.
</li></ul>
<ul start="1"><li>Non-deterministic <a href="/kb/en/built-in-functions/">built-in functions</a> are <strong>not</strong> supported in expressions for <code>PERSISTENT</code> or indexed <code>VIRTUAL</code> generated columns.
</li></ul>
<ul start="1"><li><a href="/kb/en/user-defined-functions/">User-defined functions (UDFs)</a> are supported in expressions for generated columns.
<ul start="1"><li>However, MariaDB can't check whether a UDF is deterministic, so it is up to the user to be sure that they do not use non-deterministic UDFs with <code>VIRTUAL</code> generated columns.
</li></ul>
</li></ul>
<ul start="1"><li>Defining a generated column based on other generated columns defined before it in the table definition is supported. For example:
</li></ul>
<pre class="fixed">CREATE TABLE t1 (a int as (1), b int as (a));
</pre><ul start="1"><li>However, defining a generated column based on other generated columns defined after in the table definition is <strong>not</strong> supported in expressions for generation columns because generated columns are calculated in the order they are defined.
</li></ul>
<ul start="1"><li>Using an expression that exceeds 255 characters in length is supported in expressions for generated columns. The new limit for the entire table definition, including all expressions for generated columns, is 65,535 bytes.
</li></ul>
<ul start="1"><li>Using constant expressions is supported in expressions for generated columns. For example:
</li></ul>
<pre class="fixed">CREATE TABLE t1 (a int as (1));
</pre><h3 class="anchored_heading" id="making-stored-values-consistent">Making Stored Values Consistent</h3>
<p>When a generated column is <code>PERSISTENT</code> or indexed, the value of the expression needs to be consistent regardless of the <a href="/kb/en/sql-mode/">SQL Mode</a> flags in the current session.  If it is not, then the table will be seen as corrupted when the value that should actually be returned by the computed expression and the value that was previously stored and/or indexed using a different <a href="/kb/en/sql-mode/">sql_mode</a> setting disagree.</p>
<p>There are currently two affected classes of inconsistencies: character padding and unsigned subtraction:</p>
<ul start="1"><li>For a <code>VARCHAR</code> or <code>TEXT</code> generated column the length of the value returned can vary depending on the PAD_CHAR_TO_FULL_LENGTH <a href="/kb/en/sql-mode/">sql_mode</a> flag.  To make the value consistent, create the generated column using an RTRIM() or RPAD() function.  Alternately, create the generated column as a <code>CHAR</code> column so that its data is always fully padded.
</li></ul>
<ul start="1"><li>If a <code>SIGNED</code> generated column is based on the subtraction of an <code>UNSIGNED</code> value, the resulting value can vary depending on how large the value is and the NO_UNSIGNED_SUBTRACTION <a href="/kb/en/sql-mode/">sql_mode</a> flag.  To make the value consistent, use <a href="/kb/en/cast/">CAST()</a> to ensure that each <code>UNSIGNED</code> operand is <code>SIGNED</code> before the subtraction.
</li></ul>
<div class="mariadb_from_10_5 mariadb from_10_5 product"><h5 class="product_title">MariaDB starting with <a href="/kb/en/what-is-mariadb-105/">10.5</a></h5><p>Beginning in <a href="/kb/en/what-is-mariadb-105/">MariaDB 10.5</a>, there is a fatal error generated when trying to create a generated column whose value can change depending on the <a href="/kb/en/sql-mode/">SQL Mode</a> when its data is <code>PERSISTENT</code> or indexed.</p>
<p>For an existing generated column that has a potentially inconsistent value, a warning about a bad expression is generated the first time it is used (if warnings are enabled).</p>
<p>Beginning in <a href="/kb/en/mariadb-1048-release-notes/">MariaDB 10.4.8</a>, <a href="/kb/en/mariadb-10318-release-notes/">MariaDB 10.3.18</a>, and <a href="/kb/en/mariadb-10227-release-notes/">MariaDB 10.2.27</a> a potentially inconsistent generated column outputs a warning when created or first used (without restricting their creation).</p>
</div><p>Here is an example of two tables that would be rejected in <a href="/kb/en/what-is-mariadb-105/">MariaDB 10.5</a> and warned about in the other listed versions:</p>
<pre class="fixed"><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="nf">bad_pad</span> <span class="p">(</span>
  <span class="n">txt</span> <span class="kt">CHAR</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span>
  <span class="c1">-- CHAR -&gt; VARCHAR or CHAR -&gt; TEXT can&#39;t be persistent or indexed:</span>
  <span class="n">vtxt</span> <span class="kt">VARCHAR</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="k">AS</span> <span class="p">(</span><span class="n">txt</span><span class="p">)</span> <span class="n">PERSISTENT</span>
<span class="p">);</span>

<span class="k">CREATE</span> <span class="k">TABLE</span> <span class="nf">bad_sub</span> <span class="p">(</span>
  <span class="n">num1</span> <span class="kt">BIGINT</span> <span class="k">UNSIGNED</span><span class="p">,</span>
  <span class="n">num2</span> <span class="kt">BIGINT</span> <span class="k">UNSIGNED</span><span class="p">,</span>
  <span class="c1">-- The resulting value can vary for some large values</span>
  <span class="n">vnum</span> <span class="kt">BIGINT</span> <span class="k">AS</span> <span class="p">(</span><span class="n">num1</span> <span class="o">-</span> <span class="n">num2</span><span class="p">)</span> <span class="n">VIRTUAL</span><span class="p">,</span>
  <span class="k">KEY</span><span class="p">(</span><span class="n">vnum</span><span class="p">)</span>
<span class="p">);</span>
</pre><p>The warnings for the above tables look like this:</p>
<pre class="fixed wrap">Warning (Code 1901): Function or expression '`txt`' cannot be used in the GENERATED ALWAYS AS clause of `vtxt`
Warning (Code 1105): Expression depends on the @@sql_mode value PAD_CHAR_TO_FULL_LENGTH

Warning (Code 1901): Function or expression '`num1` - `num2`' cannot be used in the GENERATED ALWAYS AS clause of `vnum`
Warning (Code 1105): Expression depends on the @@sql_mode value NO_UNSIGNED_SUBTRACTION
</pre><p>To work around the issue, force the padding or type to make the generated column's expression return a consistent value.  For example:</p>
<pre class="fixed"><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="nf">good_pad</span> <span class="p">(</span>
  <span class="n">txt</span> <span class="kt">CHAR</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span>
  <span class="c1">-- Using RTRIM() or RPAD() makes the value consistent:</span>
  <span class="n">vtxt</span> <span class="kt">VARCHAR</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="k">AS</span> <span class="p">(</span><span class="nf">RTRIM</span><span class="p">(</span><span class="n">txt</span><span class="p">))</span> <span class="n">PERSISTENT</span><span class="p">,</span>
  <span class="c1">-- When not persistent or indexed, it is OK for the value to vary by mode:</span>
  <span class="n">vtxt2</span> <span class="kt">VARCHAR</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="k">AS</span> <span class="p">(</span><span class="n">txt</span><span class="p">)</span> <span class="n">VIRTUAL</span><span class="p">,</span>
  <span class="c1">-- CHAR -&gt; CHAR is always OK:</span>
  <span class="n">txt2</span> <span class="kt">CHAR</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="k">AS</span> <span class="p">(</span><span class="n">txt</span><span class="p">)</span> <span class="n">PERSISTENT</span>
<span class="p">);</span>

<span class="k">CREATE</span> <span class="k">TABLE</span> <span class="nf">good_sub</span> <span class="p">(</span>
  <span class="n">num1</span> <span class="kt">BIGINT</span> <span class="k">UNSIGNED</span><span class="p">,</span>
  <span class="n">num2</span> <span class="kt">BIGINT</span> <span class="k">UNSIGNED</span><span class="p">,</span>
  <span class="c1">-- The indexed value will always be consistent in this expression:</span>
  <span class="n">vnum</span> <span class="kt">BIGINT</span> <span class="k">AS</span> <span class="p">(</span><span class="nf">CAST</span><span class="p">(</span><span class="n">num1</span> <span class="k">AS</span> <span class="n">SIGNED</span><span class="p">)</span> <span class="o">-</span> <span class="nf">CAST</span><span class="p">(</span><span class="n">num2</span> <span class="k">AS</span> <span class="n">SIGNED</span><span class="p">))</span> <span class="n">VIRTUAL</span><span class="p">,</span>
  <span class="k">KEY</span><span class="p">(</span><span class="n">vnum</span><span class="p">)</span>
<span class="p">);</span>
</pre><h3 class="anchored_heading" id="mysql-compatibility-support">MySQL Compatibility Support</h3>
<ul start="1"><li>The <code>STORED</code> keyword is supported as an alias for the <code>PERSISTENT</code> keyword.
</li></ul>
<ul start="1"><li>Tables created with MySQL 5.7 or later that contain <a href="https://dev.mysql.com/doc/refman/5.7/en/create-table-generated-columns.html">MySQL's generated columns</a> can be imported into MariaDB without a dump and restore.
</li></ul>
<h2 class="anchored_heading" id="implementation-differences">Implementation Differences</h2>
<p>Generated columns are subject to various constraints in other DBMSs that are not present in MariaDB's implementation. Generated columns may also be called computed columns or virtual columns in different implementations. The various details for a specific implementation can be found in the documentation for each specific DBMS.</p>
<h3 class="anchored_heading" id="implementation-differences-compared-to-microsoft-sql-server">Implementation Differences Compared to Microsoft SQL Server</h3>
<p>MariaDB's generated columns implementation does not enforce the following
restrictions that are present in <a href="https://docs.microsoft.com/en-us/sql/relational-databases/tables/specify-computed-columns-in-a-table?view=sql-server-2017">Microsoft SQL Server's computed columns</a> implementation:</p>
<ul start="1"><li>MariaDB allows <a href="/kb/en/system-variables/">server variables</a> in generated column expressions, including those that change dynamically, such as <a href="/kb/en/server-system-variables/#warning_count">warning_count</a>.
</li><li>MariaDB allows the <a href="/kb/en/convert_tz/">CONVERT_TZ()</a> function to be called with a named <a href="/kb/en/time-zones/">time zone</a> as an argument, even though time zone names and time offsets are configurable.
</li><li>MariaDB allows the <a href="/kb/en/cast/">CAST()</a> function to be used with non-unicode <a href="/kb/en/data-types-character-sets-and-collations/">character sets</a>, even though character sets are configurable and differ between binaries/versions.
</li><li>MariaDB allows <a href="/kb/en/float/">FLOAT</a> expressions to be used in generated columns. Microsoft SQL Server considers these expressions to be "imprecise" due to potential cross-platform differences in floating-point implementations and precision.
</li><li>Microsoft SQL Server requires the <a href="https://docs.microsoft.com/en-us/sql/t-sql/statements/set-arithabort-transact-sql?view=sql-server-2017">ARITHABORT</a> mode to be set, so that division by zero returns an error, and not a NULL.
</li><li>Microsoft SQL Server requires <code>QUOTED_IDENTIFIER</code> to be set in <a href="/kb/en/sql-mode/">sql_mode</a>. In MariaDB, if data is inserted without <code>ANSI_QUOTES</code> set in <a href="/kb/en/sql-mode/">sql_mode</a>, then it will be processed and stored differently in a generated column that contains quoted identifiers.
</li></ul>
<p>Microsoft SQL Server enforces the above restrictions by doing one of the following things:</p>
<ul start="1"><li>Refusing to create computed columns.
</li><li>Refusing to allow updates to a table containing them.
</li><li>Refusing to use an index over such a column if it can not be guaranteed that the expression is fully deterministic.
</li></ul>
<p>In MariaDB, as long as the <a href="/kb/en/sql-mode/">sql_mode</a>, language, and other settings that were in effect during the CREATE TABLE remain unchanged, the generated column expression will always be evaluated the same. If any of these things change, then please be aware that the generated column expression might not be
evaluated the same way as it previously was.</p>
<p>If you try to update a virtual column, you will get an error if the default <a href="/kb/en/sql-mode/#strict-mode">strict mode</a> is enabled in <a href="/kb/en/sql-mode/">sql_mode</a>, or a warning otherwise.</p>
<h2 class="anchored_heading" id="development-history">Development History</h2>
<p>Generated columns was originally developed by Andrey Zhakov. It was then modified by Sanja Byelkin and Igor Babaev at Monty Program for inclusion in MariaDB. Monty did the work on <a href="/kb/en/what-is-mariadb-102/">MariaDB 10.2</a> to lift a some of the old limitations.</p>
<h2 class="anchored_heading" id="examples">Examples</h2>
<p>Here is an example table that uses both <code class="fixed" style="white-space:pre-wrap">VIRTUAL</code> and
<code class="fixed" style="white-space:pre-wrap">PERSISTENT</code> virtual columns:</p>
<pre class="fixed"><span class="k">USE</span> <span class="n">TEST</span><span class="p">;</span>

<span class="k">CREATE</span> <span class="k">TABLE</span> <span class="nf">table1</span> <span class="p">(</span>
     <span class="n">a</span> <span class="kt">INT</span> <span class="k">NOT</span> <span class="no">NULL</span><span class="p">,</span>
     <span class="n">b</span> <span class="kt">VARCHAR</span><span class="p">(</span><span class="mi">32</span><span class="p">),</span>
     <span class="n">c</span> <span class="kt">INT</span> <span class="k">AS</span> <span class="p">(</span><span class="n">a</span> <span class="k">mod</span> <span class="mi">10</span><span class="p">)</span> <span class="n">VIRTUAL</span><span class="p">,</span>
     <span class="n">d</span> <span class="kt">VARCHAR</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="k">AS</span> <span class="p">(</span><span class="k">left</span><span class="p">(</span><span class="n">b</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span> <span class="n">PERSISTENT</span><span class="p">);</span>
</pre><p>If you describe the table, you can easily see which columns are virtual by
looking in the "Extra" column:</p>
<pre class="fixed"><span class="k">DESCRIBE</span> <span class="n">table1</span><span class="p">;</span>
<span class="o">+-------+-------------+------+-----+---------+------------+</span>
<span class="o">|</span> <span class="n">Field</span> <span class="o">|</span> <span class="n">Type</span>        <span class="o">|</span> <span class="no">Null</span> <span class="o">|</span> <span class="k">Key</span> <span class="o">|</span> <span class="k">Default</span> <span class="o">|</span> <span class="n">Extra</span>      <span class="o">|</span>
<span class="o">+-------+-------------+------+-----+---------+------------+</span>
<span class="o">|</span> <span class="n">a</span>     <span class="o">|</span> <span class="kt">int</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span>     <span class="o">|</span> <span class="n">NO</span>   <span class="o">|</span>     <span class="o">|</span> <span class="no">NULL</span>    <span class="o">|</span>            <span class="o">|</span>
<span class="o">|</span> <span class="n">b</span>     <span class="o">|</span> <span class="kt">varchar</span><span class="p">(</span><span class="mi">32</span><span class="p">)</span> <span class="o">|</span> <span class="n">YES</span>  <span class="o">|</span>     <span class="o">|</span> <span class="no">NULL</span>    <span class="o">|</span>            <span class="o">|</span>
<span class="o">|</span> <span class="n">c</span>     <span class="o">|</span> <span class="kt">int</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span>     <span class="o">|</span> <span class="n">YES</span>  <span class="o">|</span>     <span class="o">|</span> <span class="no">NULL</span>    <span class="o">|</span> <span class="n">VIRTUAL</span>    <span class="o">|</span>
<span class="o">|</span> <span class="n">d</span>     <span class="o">|</span> <span class="kt">varchar</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>  <span class="o">|</span> <span class="n">YES</span>  <span class="o">|</span>     <span class="o">|</span> <span class="no">NULL</span>    <span class="o">|</span> <span class="n">PERSISTENT</span> <span class="o">|</span>
<span class="o">+-------+-------------+------+-----+---------+------------+</span>
</pre><p>To find out what function(s) generate the value of the virtual column you can use <code class="fixed" style="white-space:pre-wrap">SHOW CREATE TABLE</code>:</p>
<pre class="fixed"><span class="k">SHOW</span> <span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">table1</span><span class="p">;</span>

<span class="o">|</span> <span class="n">table1</span> <span class="o">|</span> <span class="k">CREATE</span> <span class="k">TABLE</span> <span class="ss">`table1`</span> <span class="p">(</span>
  <span class="ss">`a`</span> <span class="kt">int</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span> <span class="k">NOT</span> <span class="no">NULL</span><span class="p">,</span>
  <span class="ss">`b`</span> <span class="kt">varchar</span><span class="p">(</span><span class="mi">32</span><span class="p">)</span> <span class="k">DEFAULT</span> <span class="no">NULL</span><span class="p">,</span>
  <span class="ss">`c`</span> <span class="kt">int</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span> <span class="k">AS</span> <span class="p">(</span><span class="n">a</span> <span class="k">mod</span> <span class="mi">10</span><span class="p">)</span> <span class="n">VIRTUAL</span><span class="p">,</span>
  <span class="ss">`d`</span> <span class="kt">varchar</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="k">AS</span> <span class="p">(</span><span class="k">left</span><span class="p">(</span><span class="n">b</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span> <span class="n">PERSISTENT</span>
<span class="p">)</span> <span class="kp">ENGINE</span><span class="o">=</span><span class="n">MyISAM</span> <span class="k">DEFAULT</span> <span class="kp">CHARSET</span><span class="o">=</span><span class="n">latin1</span> <span class="o">|</span>
</pre><p>If you try to insert non-default values into a virtual column, you will receive
a warning and what you tried to insert will be ignored and the derived value
inserted instead:</p>
<pre class="fixed"><span class="n">WARNINGS</span><span class="p">;</span>
<span class="k">Show</span> <span class="n">warnings</span> <span class="n">enabled</span><span class="p">.</span>

<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">table1</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;some text&#39;</span><span class="p">,</span><span class="k">default</span><span class="p">,</span><span class="k">default</span><span class="p">);</span>
<span class="n">Query</span> <span class="n">OK</span><span class="p">,</span> <span class="mi">1</span> <span class="k">row</span> <span class="n">affected</span> <span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span> <span class="n">sec</span><span class="p">)</span>

<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">table1</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;more text&#39;</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="k">default</span><span class="p">);</span>
<span class="n">Query</span> <span class="n">OK</span><span class="p">,</span> <span class="mi">1</span> <span class="k">row</span> <span class="n">affected</span><span class="p">,</span> <span class="mi">1</span> <span class="n">warning</span> <span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span> <span class="n">sec</span><span class="p">)</span>

<span class="n">Warning</span> <span class="p">(</span><span class="n">Code</span> <span class="mi">1645</span><span class="p">):</span> <span class="n">The</span> <span class="n">value</span> <span class="n">specified</span> <span class="k">for</span> <span class="n">computed</span> <span class="k">column</span> <span class="s1">&#39;c&#39;</span> <span class="k">in</span> <span class="k">table</span> <span class="s1">&#39;table1&#39;</span> <span class="n">has</span> <span class="n">been</span> <span class="n">ignored</span><span class="p">.</span>

<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">table1</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">123</span><span class="p">,</span> <span class="s1">&#39;even more text&#39;</span><span class="p">,</span><span class="k">default</span><span class="p">,</span><span class="s1">&#39;something&#39;</span><span class="p">);</span>
<span class="n">Query</span> <span class="n">OK</span><span class="p">,</span> <span class="mi">1</span> <span class="k">row</span> <span class="n">affected</span><span class="p">,</span> <span class="mi">2</span> <span class="n">warnings</span> <span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span> <span class="n">sec</span><span class="p">)</span>

<span class="n">Warning</span> <span class="p">(</span><span class="n">Code</span> <span class="mi">1645</span><span class="p">):</span> <span class="n">The</span> <span class="n">value</span> <span class="n">specified</span> <span class="k">for</span> <span class="n">computed</span> <span class="k">column</span> <span class="s1">&#39;d&#39;</span> <span class="k">in</span> <span class="k">table</span> <span class="s1">&#39;table1&#39;</span> <span class="n">has</span> <span class="n">been</span> <span class="n">ignored</span><span class="p">.</span>
<span class="n">Warning</span> <span class="p">(</span><span class="n">Code</span> <span class="mi">1265</span><span class="p">):</span> <span class="k">Data</span> <span class="n">truncated</span> <span class="k">for</span> <span class="k">column</span> <span class="s1">&#39;d&#39;</span> <span class="k">at</span> <span class="k">row</span> <span class="mi">1</span>

<span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">table1</span><span class="p">;</span>
<span class="o">+</span><span class="c1">-----+----------------+------+-------+</span>
<span class="o">|</span> <span class="n">a</span>   <span class="o">|</span> <span class="n">b</span>              <span class="o">|</span> <span class="k">c</span>    <span class="o">|</span> <span class="n">d</span>     <span class="o">|</span>
<span class="o">+</span><span class="c1">-----+----------------+------+-------+</span>
<span class="o">|</span>   <span class="mi">1</span> <span class="o">|</span> <span class="k">some</span> <span class="nb">text</span>      <span class="o">|</span>    <span class="mi">1</span> <span class="o">|</span> <span class="k">some</span>  <span class="o">|</span>
<span class="o">|</span>   <span class="mi">2</span> <span class="o">|</span> <span class="k">more</span> <span class="nb">text</span>      <span class="o">|</span>    <span class="mi">2</span> <span class="o">|</span> <span class="k">more</span>  <span class="o">|</span>
<span class="o">|</span> <span class="mi">123</span> <span class="o">|</span> <span class="n">even</span> <span class="k">more</span> <span class="nb">text</span> <span class="o">|</span>    <span class="mi">3</span> <span class="o">|</span> <span class="n">even</span>  <span class="o">|</span>
<span class="o">+</span><span class="c1">-----+----------------+------+-------+</span>
<span class="mi">3</span> <span class="k">rows</span> <span class="k">in</span> <span class="k">set</span> <span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span> <span class="n">sec</span><span class="p">)</span>
</pre><p>If the <code>ZEROFILL</code> clause is specified, it should be placed directly after the type definition, before the <code>AS (&lt;expression&gt;)</code>:</p>
<pre class="fixed"><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="nf">table2</span> <span class="p">(</span><span class="n">a</span> <span class="kt">INT</span><span class="p">,</span> <span class="n">b</span> <span class="kt">INT</span> <span class="k">ZEROFILL</span> <span class="k">AS</span> <span class="p">(</span><span class="n">a</span><span class="o">*</span><span class="mi">2</span><span class="p">)</span> <span class="n">VIRTUAL</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="nf">table2</span> <span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">1</span><span class="p">);</span>

<span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">table2</span><span class="p">;</span>
<span class="o">+------+------------+</span>
<span class="o">|</span> <span class="n">a</span>    <span class="o">|</span> <span class="n">b</span>          <span class="o">|</span>
<span class="o">+------+------------+</span>
<span class="o">|</span>    <span class="mi">1</span> <span class="o">|</span> <span class="mi">0000000002</span> <span class="o">|</span>
<span class="o">+------+------------+</span>
<span class="mi">1</span> <span class="n">row</span> <span class="k">in</span> <span class="kt">set</span> <span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span> <span class="n">sec</span><span class="p">)</span>
</pre><p>You can also use virtual columns to implement a "poor man's partial index". See example at the end of <a href="/kb/en/getting-started-with-indexes/#unique-index">Unique Index</a>.</p>
<h2 class="anchored_heading" id="see-also">See Also</h2>
<ul start="1"><li><a href="https://mariadb.com/blog/putting-virtual-columns-good-use">Putting Virtual Columns to good use</a> on the mariadb.com blog.</li></ul>

    </div>


        
            <div id="subscribe" class="well well-small hide hidden-print"
                 data-subscribe-url="/kb/en/generated-columns/+subscriptions/add"
                 data-unsubscribe-url="/kb/en/generated-columns/+subscriptions/remove">
            </div>
        

        
        
    
        <div class="simple_section_nav">
            <ul class="nav nav-pills">
                
                    <li><a href="/kb/en/silent-column-changes/">
                        ← Silent Column Changes
                    </a>
                    </li>
                
                
                    <li><a href="/kb/en/create/">
                        ↑ CREATE ↑
                    </a>
                    </li>
                
                
                    <li class="pull-right"><a href="/kb/en/invisible-columns/">
                        Invisible Columns →
                    </a>
                    </li>
                
            </ul>
        </div>
    

        

        
        <h2>Comments</h2>
        
    
    <div id="comments" data-node-id="668" data-comments-url="/kb/en/generated-columns/+comments"
         data-reply-url="/kb/en/generated-columns/comments/post/">
        Comments loading...
    </div>

        

    </div>


                    <div id="content_disclaimer" class="graybox">
                        Content reproduced on this site is the property of its respective owners,
                        and this content is not reviewed in advance by MariaDB. The views, information and opinions
                        expressed by this content do not necessarily represent those of MariaDB or any other party.
                    </div>
                </div>
            </section>

            
                <div id="right_bar" class="col-md-2">
                    
    
        
        <ul class="section_navigation well well-small hidden-xs hidden-sm">
            
                <li class="parent"><a href="/kb/en/create/">
                    ↑ CREATE ↑
                </a>
                </li>
            
            
                
                    <li>
                        <a href="/kb/en/create-database/">
                            
                            CREATE DATABASE
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/create-table/">
                            
                            CREATE TABLE
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/create-view/">
                            <span class="pull-right not_primary"></span>
                            CREATE VIEW
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/create-catalog/">
                            <span class="pull-right not_primary"></span>
                            CREATE CATALOG
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/create-user/">
                            <span class="pull-right not_primary"></span>
                            CREATE USER
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/create-trigger/">
                            <span class="pull-right not_primary"></span>
                            CREATE TRIGGER
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/create-event/">
                            
                            CREATE EVENT
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/create-function/">
                            
                            CREATE FUNCTION
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/create-function-udf/">
                            <span class="pull-right not_primary"></span>
                            CREATE FUNCTION UDF
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/create-index/">
                            
                            CREATE INDEX
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/create-logfile-group/">
                            
                            CREATE LOGFILE GROUP
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/create-package/">
                            
                            CREATE PACKAGE
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/create-package-body/">
                            
                            CREATE PACKAGE BODY
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/create-procedure/">
                            <span class="pull-right not_primary"></span>
                            CREATE PROCEDURE
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/create-role/">
                            <span class="pull-right not_primary"></span>
                            CREATE ROLE
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/create-sequence/">
                            <span class="pull-right not_primary"></span>
                            CREATE SEQUENCE
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/create-server/">
                            
                            CREATE SERVER
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/create-tablespace/">
                            
                            CREATE TABLESPACE
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/silent-column-changes/">
                            
                            Silent Column Changes
                        </a>
                    </li>
                
            
                
                    <li class="active">
                        <span>Generated (Virtual and Persistent/Stored) Columns</span>
                        
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/invisible-columns/">
                            
                            Invisible Columns
                        </a>
                    </li>
                
            
        </ul>
    
    

                </div>
            
        </div>
    </div>
</div>

<!-- Footer -->
<footer id="footer">
    <div class="footer">
        <div class="container">
            <div class="row">
                <div class="col-xs-12">
                    <ul class="list-inline text-center footer-nav">
                        <li>
                            <h5>
                                <a href="https://mariadb.com/products" title="Products">Products</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/services" title="Services">Services</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/pricing" title="Pricing">Pricing</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/resources" title="Resources">Resources</a>
                            </h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/about-us" title="About MariaDB">About Us</a></h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/download" title="Download">Download MariaDB</a></h5>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="row row-10">
                
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div id="block-footerformcontact" class="block block-block-content block-block-contentd754ee1b-3cc9-40e7-9ef4-f504f1197fb1">
                        
                            <h5 style="font-weight: 400;">Subscribe to our newsletter!</h5>
                            <script src="//app-sj15.marketo.com/js/forms2/js/forms2.min.js"></script><form id="mktoForm_1498"></form>
                            <script>
                                <!--//--><![CDATA[// ><!--
                                MktoForms2.loadForm("//app-sj15.marketo.com", "573-PXI-984", 1498);
                                //--><!]]]]><![CDATA[>
                                //--><!]]>
                            </script>
                        
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div class="footer-copyright">
                        <div class="text-center">
                            <ul class="list-inline no-margin">
                                <li>
                                    <a href="/legal" title="Legal">Legal</a>
                                </li>
                                <li>
                                    <a href="/privacy-policy" title="Privacy Policy">Privacy Policy</a>
                                </li>
                                <li>
                                    <a href="/cookie-policy/" title="Cookies">Cookie Policy</a>
                                </li>
                            </ul>
                            <p>Copyright &copy; 2024 MariaDB. All rights reserved.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
</footer>
</div>

<div id="ajax_loading">
    <img src="/kb/static/images/ajax-loader.a51c5608d01a.gif" />
</div>

    <!-- Google Tag Manager -->
    <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-MK2847"
                      height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
            '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MK2847');</script>
    <!-- End Google Tag Manager -->

</body>

<script type="text/javascript" src="/kb/static/js/main.1587e3a666fc.js" charset="utf-8"></script>

</html>