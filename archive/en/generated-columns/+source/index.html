<!DOCTYPE html>
<html>
<head data-cookie-domain=""
      data-cookie-path="/">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="apple-touch-icon" sizes="180x180" href="/kb/static/images/favicons/apple-touch-icon.159e713979be.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/kb/static/images/favicons/favicon-32x32.bc0ac1d5d11e.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/kb/static/images/favicons/favicon-16x16.5801f8f0f34e.png">
    <link rel="shortcut icon" href="/kb/static/images/favicons/favicon.d122d305dee4.ico" type="image/x-icon" />

    <title>Generated (Virtual and Persistent/Stored) Columns - Source - MariaDB Knowledge Base</title>

    <link href="/kb/static/css/main.f7633538c846.css" rel="stylesheet" type="text/css" />

    
        <meta name="robots" content="noindex, nofollow">
    

    

    <!-- FB Open Graph tags -->
    <meta property="og:title" content="Generated (Virtual and Persistent/Stored) Columns - Source" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://mariadb.com/kb/en/generated-columns/+source/" />
    <meta property="og:image" content="http://mariadb.comaskmonty-logo.png" />
    <meta property="og:site_name" content="MariaDB KnowledgeBase" />
    <meta property="fb:admins" content="514852603" />
    <meta property="og:description" content="" />

    <meta name="description" content="" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="//fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet"/>
    
</head>
<body class="mpkb nodes autoresize nodes_source jqui" id="nodes_source">





<div id="menu-mobile" class="visible-sm visible-xs">

    <div>
        <div id="mobile-close-menu" class="text-right">
            <a href="javascript:void(0)" title="Close Menu" id="back-main" class="toggle-menu">X<span></span></a>
        </div>
    </div>
    <div class="mainmenu-mobile">
        <ul class="ls-none ul-menu">
            <li data-sub="submenu5"><a class="open-form-search" href="/kb/search/" title="Search">Search </a></li>
            <li data-sub="submenu0"><a href="/products" title="Products">Products</a><span class="arrow-main"></span></li>
            <li data-sub="submenu1"><a href="/services" title="Services">Services</a><span class="arrow-main"></span></li>
            <li data-sub="submenu2"><a href="/resources" title="Resources">Resources</a><span class="arrow-main"></span></li>
            <li data-sub="submenu3"><a href="/about-us" title="About">About</a><span class="arrow-main"></span></li>
            <li data-sub="submenu4"><a href="/contact" title="Contact">Contact</a></li>
        </ul>
    </div>

    <div class="nav-top-mobile">
        <div class="select-box form">

            <ul class="inline-block-md mb-none top-nav">
                <li>

                </li>
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/generated-columns/+source/"> Login</a>
                    </li>
                
            </ul>



        </div>
        <p class="text-center copyright">Copyright &copy; 2025 MariaDB. All rights reserved.</p>
    </div>
</div>
<div class="violator-wrap d-none" id="top_violator">
    <div class="container">
        <div class="row">
            <div class="col-xs-12 col-sm-12">
                <div class="violator-outer">
                    <div class="violator-inner">
                        <div class="row">
                            <div class="col-xs-12 col-sm-9 col-lg-7 col-lg-offset-2" id="top_violator_content">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="content-link" target="_blank" rel="nofollow noreferrer">
                                    <span>The Ultimate Guide to High Availability with MariaDB</span>
                                </a>
                            </div>
                            <div class="col-xs-12 col-sm-3" id="top_violator_cta">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="btn btn-mariadb" target="_blank" rel="nofollow noreferrer">Download Now</a>
                            </div>
                        </div>
                    </div>
                    <button type="button" class="btn btn-link close-btn">
                        <svg xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 24 24" width="15px" height="15px"><path d="M 4.9902344 3.9902344 A 1.0001 1.0001 0 0 0 4.2929688 5.7070312 L 10.585938 12 L 4.2929688 18.292969 A 1.0001 1.0001 0 1 0 5.7070312 19.707031 L 12 13.414062 L 18.292969 19.707031 A 1.0001 1.0001 0 1 0 19.707031 18.292969 L 13.414062 12 L 19.707031 5.7070312 A 1.0001 1.0001 0 0 0 18.980469 3.9902344 A 1.0001 1.0001 0 0 0 18.292969 4.2929688 L 12 10.585938 L 5.7070312 4.2929688 A 1.0001 1.0001 0 0 0 4.9902344 3.9902344 z"/></svg>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="wrapper">
<div id="top-nav">
    <div class="container">
        <ul class="hidden-sm hidden-xs" >
            <li><a href="https://mariadb.com/kb/">Knowledge Base</a></li>
            <li><a href="https://mariadb.com/contact/">Contact</a></li>
            
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/generated-columns/+source/" rel="nofollow">Login</a>
                    </li>
                
            
            
            <li id="search-form">
                <form action="/kb/en/+search/" method="get" id="search-block-form" accept-charset="UTF-8">
                    <input id="search" title="Enter the terms you wish to search for."
                           placeholder="Search . . ." type="text"
                           name="q" value="" size="15" maxlength="128" class="form-text"
                           data-autocomplete-url="/kb/en/+search/autocomplete/">
                    <input type="hidden" name="quick" value="1" />
                    <input type="hidden" name="source" value="kb" />
                </form>
            </li>
            <li><a id="search-toggler" href="/kb/search/">Search</a></li>
            
        </ul>
    </div>
</div>
<div id="navbar-bottom" class="navbar">
    <div class="container">
        
        
        
        
        <div class="row">
            <div class="col-md-3 col-sm-9 col-xs-9">
                <a class="brand" href="/" title="MariaDB">
                    <img src="/kb/static/images/logo-2018-black.95f5978ae14d.png">
                </a>
            </div>
            <div class="col-md-9 hidden-sm hidden-xs">
                <div class="main-menu">
                    <ul id="main-menu" class="nav navbar-nav inline-block-sm">
    <li class="has-sub full-menu">
        <a href="/products" title="Products">Products</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/solutions" title="Solutions">Solutions</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/resources" title="Resources">Resources</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/about-us" title="Company">Company</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/pricing" title="Pricing">Pricing</a>
    </li>
    
    <li class="">
        <a class="button electric-eel small top-bar-right-download" href="/downloads/">Download</a>
    </li>
</ul>
                </div>
            </div>
            <div class="col-md-3 visible-sm visible-xs col-sm-3 col-xs-3 ps-rv">
                <div class="navbar-header text-right pull-right">
                    <button type="button" class="menu-control toggle-menu" id="open-menu">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="main">
    <div class="container">
        

        <div id="subheader1" class="clearfix">
            <div class="pull-left">
                
                <div id="breadcrumbs" class="breadcrumb">
                    <a href="/kb/en/">Knowledge Base</a>
                    


    
    » <a class="crumb" href="/kb/en/documentation/">MariaDB Server Documentation</a>
    

    
    » <a class="crumb" href="/kb/en/using-mariadb-server/">Using MariaDB Server</a>
    

    
    » <a class="crumb" href="/kb/en/sql-statements-structure/">SQL Statements &amp; Structure</a>
    

    
    » <a class="crumb" href="/kb/en/sql-statements/">SQL Statements</a>
    

    
    » <a class="crumb" href="/kb/en/data-definition/">Data Definition</a>
    

    
    » <a class="crumb" href="/kb/en/create/">CREATE</a>
    


    » <a class="node_link crumb" href="/kb/en/generated-columns/">Generated (Virtual and Persistent/Stored) Columns</a>


                </div>
                
            </div>
        </div>
    </div>
    <div class="container" id="container-main">
        <div class="row">
            
            
                
                <aside id="sidebar-first" class="sidebar col-md-2 hidden-xs hidden-sm hidden-print">
                    
                        
                        <ul id="category_menu" class="nav nav-pills nav-stacked">
                            <li><a href="/kb/en/">Home</a></li>
                            
                                
                                    <li><a href="/kb/en/+questions/">Open Questions</a></li>
                                
                                <li><a href="/kb/en/documentation/">MariaDB Server</a></li>
                                <li><a href="/kb/en/maxscale/">MariaDB MaxScale</a></li>
                                <li><a href="/kb/en/mariadb-columnstore/">MariaDB ColumnStore</a></li>
                                <li><a href="/kb/en/connectors/">Connectors</a></li>
                            

                        </ul>
                    

                    
                        <div>
    

<div class="well well-small box actions"><div>

        <a class="btn btn-block btn-small" href="/kb/en/generated-columns/">Return to article</a>
    
</div>
</div>

</div>
                    

                    

































                </aside>
            
            
            
                
            
            
            <section id="content" class="limited_width col-md-10 clearfix">
                
                    <h1>Generated (Virtual and Persistent/Stored) Columns - Source</h1>
                

                



                <div>
                    

    

    
    <div class="revision_info">
        <dl class="table">
            <dt>Revision</dt>
            <dd><a href="/kb/en/generated-columns/+r/145976/">145976</a></dd>
            <dt>User</dt>
            <dd>
<span class="user" id="user-2">
<a href="/kb/user/id/2" title="Daniel Bartholomew">Daniel Bartholomew</a>
</span></dd>
            <dt>Date</dt>
            <dd>

<span class="datetime" title="2025-01-27 11:22">2025-01-27 11:22</span></dd>
        </dl>
    </div>
    


    

    
        
        <textarea id="answer_source" class="creole_source autogrow">== Syntax

&lt;&lt;code&gt;&gt;
&lt;type&gt;  [GENERATED ALWAYS]  AS   ( &lt;expression&gt; )
[VIRTUAL | PERSISTENT | STORED]  [UNIQUE] [UNIQUE KEY] [COMMENT &lt;text&gt;]
&lt;&lt;/code&gt;&gt;
&lt;&lt;toc&gt;&gt;

MariaDB&#39;s generated columns syntax is designed to be similar to the syntax for [[https://docs.microsoft.com/en-us/sql/relational-databases/tables/specify-computed-columns-in-a-table?view=sql-server-2017|Microsoft SQL Server&#39;s computed columns]] and [[https://oracle-base.com/articles/11g/virtual-columns-11gr1|Oracle Database&#39;s virtual columns]]. In MariaDB 10.2 and later, the syntax is also compatible with the syntax for [[https://dev.mysql.com/doc/refman/5.7/en/create-table-generated-columns.html|MySQL&#39;s generated columns]].

== Description

A generated column is a column in a table that cannot explicitly be set to a specific value in a [[data-manipulation|DML query]]. Instead, its value is automatically generated based on an expression. This expression might generate the value based on the values of other columns in the table, or it might generate the value by calling [[built-in-functions|built-in functions]] or [[user-defined-functions|user-defined functions (UDFs)]].

There are two types of generated columns:

* ##PERSISTENT## (a.k.a. ##STORED##): This type&#39;s value is actually stored in the table.
* ##VIRTUAL##: This type&#39;s value is not stored at all. Instead, the value is generated dynamically when the table is queried. This type is the default.

Generated columns are also sometimes called computed columns or virtual columns.

== Supported Features

=== Storage Engine Support

* Generated columns can only be used with storage engines which support them. If you try to use a storage engine that does not support them, then you will see an error similar to the following:

&lt;&lt;code&gt;&gt;
ERROR 1910 (HY000): TokuDB storage engine does not support computed columns
&lt;&lt;/code&gt;&gt;

* [[InnoDB]], [[Aria]], [[MyISAM]] and [[using-connect-virtual-and-special-columns|CONNECT]] support generated columns.

* A column in a [[MERGE]] table can be built on a ##PERSISTENT## generated column.
** However, a column in a MERGE table can **not** be defined as a ##VIRTUAL## and ##PERSISTENT## generated column.

=== Data Type Support

* All data types are supported when defining generated columns.

* Using the [[create-table/#zerofill-column-option|ZEROFILL]] column option is supported when defining generated columns.

* Using the [[auto_increment|AUTO_INCREMENT]] column option is **not** supported when defining generated columns. Until MariaDB 10.2.25, it was supported, but this support was removed, because it would not work correctly. See MDEV-11117.

=== Index Support

* Using a generated column as a table&#39;s primary key is **not** supported. See MDEV-5590 for more information. If you try to use one as a primary key, then you will see an error similar to the following:

&lt;&lt;code&gt;&gt;
ERROR 1903 (HY000): Primary key cannot be defined upon a computed column
&lt;&lt;/code&gt;&gt;

* Using ##PERSISTENT## generated columns as part of a [[foreign-keys|foreign key]] is supported.

* Referencing ##PERSISTENT## generated columns as part of a [[foreign-keys|foreign key]] is also supported.
** However, using the ##ON UPDATE CASCADE##, ##ON UPDATE SET NULL##, or ##ON DELETE SET NULL## clauses is **not** supported. If you try to use an unsupported clause, then you will see an error similar to the following:

&lt;&lt;code wrap=true&gt;&gt;
ERROR 1905 (HY000): Cannot define foreign key with ON UPDATE SET NULL clause on a computed column
&lt;&lt;/code&gt;&gt;

* Defining indexes on both ##VIRTUAL## and ##PERSISTENT## generated columns is supported.
** If an index is defined on a generated column, then the optimizer considers using it in the same way as indexes based on &#34;real&#34; columns.
* From MariaDB 11.8, the optimizer can recognize use of indexed virtual column expressions in the WHERE clause and use them to construct range and ref(const) accesses. See [[virtual-column-support-in-the-optimizer|Virtual Column Support in the Optimizer]].

=== Statement Support

* Generated columns are used in [[data-manipulation|DML queries]] just as if they were &#34;real&#34; columns.
** However, ##VIRTUAL## and ##PERSISTENT## generated columns differ in how their data is stored.
*** Values for ##PERSISTENT## generated columns are generated whenever a [[data-manipulation|DML queries]] inserts or updates the row with the special ##DEFAULT## value. This generates the columns value, and it is stored in the table like the other &#34;real&#34; columns. This value can be read by other [[data-manipulation|DML queries]] just like the other &#34;real&#34; columns.
*** Values for ##VIRTUAL## generated columns are not stored in the table. Instead, the value is generated dynamically whenever the column is queried. If other columns in a row are queried, but the ##VIRTUAL## generated column is not one of the queried columns, then the column&#39;s value is not generated.

* The [[select|SELECT]] statement supports generated columns.

* Generated columns can be referenced in the [[insert|INSERT]], [[update|UPDATE]], and [[delete|DELETE]] statements.
** However, ##VIRTUAL## or ##PERSISTENT## generated columns cannot be explicitly set to any other values than ##NULL## or [[default|DEFAULT]]. If a generated column is explicitly set to any other value, then the outcome depends on whether [[sql-mode/#strict-mode|strict mode]] is enabled in [[sql-mode|sql_mode]]. If it is not enabled, then a warning will be raised and the default generated value will be used instead. If it is enabled, then an error will be raised instead.

* The [[create-table|CREATE TABLE]] statement has limited support for generated columns.
** It supports defining generated columns in a new table.
** It supports using generated columns to [[partitioning-tables|partition tables]].
** It does **not** support using the [[system-versioned-tables|versioning clauses]] with generated columns.

* The [[alter-table|ALTER TABLE]] statement has limited support for generated columns.
** It supports the ##MODIFY## and ##CHANGE## clauses for ##PERSISTENT## generated columns.
** It does **not** support the ##MODIFY## clause for ##VIRTUAL## generated columns if [[alter-table/#algorithm|ALGORITHM]] is not set to ##COPY##. See MDEV-15476 for more information.
** It does **not** support the  ##CHANGE## clause for ##VIRTUAL## generated columns if [[alter-table/#algorithm|ALGORITHM]] is not set to ##COPY##. See MDEV-17035 for more information.
** It does **not** support altering a table if [[alter-table/#algorithm|ALGORITHM]] is not set to ##COPY## if the table has a ##VIRTUAL## generated column that is indexed. See MDEV-14046 for more information.
** It does **not** support adding a ##VIRTUAL## generated column with the ##ADD## clause if the same statement is also adding other columns if [[alter-table/#algorithm|ALGORITHM]] is not set to ##COPY##. See MDEV-17468 for more information.
** It also does **not** support altering an existing column into a ##VIRTUAL## generated column.
** It supports using generated columns to [[partitioning-tables|partition tables]].
** It does **not** support using the [[system-versioned-tables|versioning clauses]] with generated columns.

* The [[show-create-table|SHOW CREATE TABLE]] statement supports generated columns.

* The [[describe|DESCRIBE]] statement can be used to check whether a table has generated columns.
** You can tell which columns are generated by looking for the ones where the ##Extra## column is set to either ##VIRTUAL## or ##PERSISTENT##. For example:

&lt;&lt;code lang=mysql&gt;&gt;
DESCRIBE table1;
+-------+-------------+------+-----+---------+------------+
| Field | Type        | Null | Key | Default | Extra      |
+-------+-------------+------+-----+---------+------------+
| a     | int(11)     | NO   |     | NULL    |            |
| b     | varchar(32) | YES  |     | NULL    |            |
| c     | int(11)     | YES  |     | NULL    | VIRTUAL    |
| d     | varchar(5)  | YES  |     | NULL    | PERSISTENT |
+-------+-------------+------+-----+---------+------------+
&lt;&lt;/code&gt;&gt;

* Generated columns can be properly referenced in the ##NEW## and ##OLD## rows in [[triggers|triggers]].

* [[stored-procedures|Stored procedures]] support generated columns.

* The [[handler-commands|HANDLER]] statement supports generated columns.

=== Expression Support

* Most legal, deterministic expressions which can be calculated are supported in expressions for generated columns.

* Most [[built-in-functions|built-in functions]] are supported in expressions for generated columns.
** However, some [[built-in-functions|built-in functions]] can&#39;t be supported for technical reasons. For example,  If you try to use an unsupported function in an expression, an error is generated similar to the following:

&lt;&lt;code wrap=true&gt;&gt;
ERROR 1901 (HY000): Function or expression &#39;dayname()&#39; cannot be used in the GENERATED ALWAYS AS clause of `v`
&lt;&lt;/code&gt;&gt;

* [[subqueries|Subqueries]] are **not** supported in expressions for generated columns because the underlying data can change.

* Using anything that depends on data outside the row is **not** supported in expressions for generated columns.

* [[stored-functions|Stored functions]] are **not** supported in expressions for generated columns. See MDEV-17587 for more information.

* Non-deterministic [[built-in-functions|built-in functions]] are supported in expressions for not indexed ##VIRTUAL## generated columns.

* Non-deterministic [[built-in-functions|built-in functions]] are **not** supported in expressions for ##PERSISTENT## or indexed ##VIRTUAL## generated columns.

* [[user-defined-functions|User-defined functions (UDFs)]] are supported in expressions for generated columns.
** However, MariaDB can&#39;t check whether a UDF is deterministic, so it is up to the user to be sure that they do not use non-deterministic UDFs with ##VIRTUAL## generated columns.

* Defining a generated column based on other generated columns defined before it in the table definition is supported. For example:

&lt;&lt;code&gt;&gt;
CREATE TABLE t1 (a int as (1), b int as (a));
&lt;&lt;/code&gt;&gt;

* However, defining a generated column based on other generated columns defined after in the table definition is **not** supported in expressions for generation columns because generated columns are calculated in the order they are defined.

* Using an expression that exceeds 255 characters in length is supported in expressions for generated columns. The new limit for the entire table definition, including all expressions for generated columns, is 65,535 bytes.

* Using constant expressions is supported in expressions for generated columns. For example:

&lt;&lt;code&gt;&gt;
CREATE TABLE t1 (a int as (1));
&lt;&lt;/code&gt;&gt;

=== Making Stored Values Consistent

When a generated column is ##PERSISTENT## or indexed, the value of the expression needs to be consistent regardless of the [[sql-mode|SQL Mode]] flags in the current session.  If it is not, then the table will be seen as corrupted when the value that should actually be returned by the computed expression and the value that was previously stored and/or indexed using a different [[sql-mode|sql_mode]] setting disagree.

There are currently two affected classes of inconsistencies: character padding and unsigned subtraction:

* For a ##VARCHAR## or ##TEXT## generated column the length of the value returned can vary depending on the PAD_CHAR_TO_FULL_LENGTH [[sql-mode|sql_mode]] flag.  To make the value consistent, create the generated column using an RTRIM() or RPAD() function.  Alternately, create the generated column as a ##CHAR## column so that its data is always fully padded.

* If a ##SIGNED## generated column is based on the subtraction of an ##UNSIGNED## value, the resulting value can vary depending on how large the value is and the NO_UNSIGNED_SUBTRACTION [[sql-mode|sql_mode]] flag.  To make the value consistent, use [[cast|CAST()]] to ensure that each ##UNSIGNED## operand is ##SIGNED## before the subtraction.

&lt;&lt;product mariadb from=10.5&gt;&gt;
Beginning in MariaDB 10.5, there is a fatal error generated when trying to create a generated column whose value can change depending on the [[sql-mode|SQL Mode]] when its data is ##PERSISTENT## or indexed.

For an existing generated column that has a potentially inconsistent value, a warning about a bad expression is generated the first time it is used (if warnings are enabled).

Beginning in MariaDB 10.4.8, MariaDB 10.3.18, and MariaDB 10.2.27 a potentially inconsistent generated column outputs a warning when created or first used (without restricting their creation).
&lt;&lt;/product&gt;&gt;

Here is an example of two tables that would be rejected in MariaDB 10.5 and warned about in the other listed versions:

&lt;&lt;code lang=mysql&gt;&gt;
CREATE TABLE bad_pad (
  txt CHAR(5),
  -- CHAR -&gt; VARCHAR or CHAR -&gt; TEXT can&#39;t be persistent or indexed:
  vtxt VARCHAR(5) AS (txt) PERSISTENT
);

CREATE TABLE bad_sub (
  num1 BIGINT UNSIGNED,
  num2 BIGINT UNSIGNED,
  -- The resulting value can vary for some large values
  vnum BIGINT AS (num1 - num2) VIRTUAL,
  KEY(vnum)
);
&lt;&lt;/code&gt;&gt;

The warnings for the above tables look like this:

&lt;&lt;code wrap=true&gt;&gt;
Warning (Code 1901): Function or expression &#39;`txt`&#39; cannot be used in the GENERATED ALWAYS AS clause of `vtxt`
Warning (Code 1105): Expression depends on the @@sql_mode value PAD_CHAR_TO_FULL_LENGTH

Warning (Code 1901): Function or expression &#39;`num1` - `num2`&#39; cannot be used in the GENERATED ALWAYS AS clause of `vnum`
Warning (Code 1105): Expression depends on the @@sql_mode value NO_UNSIGNED_SUBTRACTION
&lt;&lt;/code&gt;&gt;

To work around the issue, force the padding or type to make the generated column&#39;s expression return a consistent value.  For example:

&lt;&lt;code lang=mysql&gt;&gt;
CREATE TABLE good_pad (
  txt CHAR(5),
  -- Using RTRIM() or RPAD() makes the value consistent:
  vtxt VARCHAR(5) AS (RTRIM(txt)) PERSISTENT,
  -- When not persistent or indexed, it is OK for the value to vary by mode:
  vtxt2 VARCHAR(5) AS (txt) VIRTUAL,
  -- CHAR -&gt; CHAR is always OK:
  txt2 CHAR(5) AS (txt) PERSISTENT
);

CREATE TABLE good_sub (
  num1 BIGINT UNSIGNED,
  num2 BIGINT UNSIGNED,
  -- The indexed value will always be consistent in this expression:
  vnum BIGINT AS (CAST(num1 AS SIGNED) - CAST(num2 AS SIGNED)) VIRTUAL,
  KEY(vnum)
);
&lt;&lt;/code&gt;&gt;

=== MySQL Compatibility Support

* The ##STORED## keyword is supported as an alias for the ##PERSISTENT## keyword.

* Tables created with MySQL 5.7 or later that contain [[https://dev.mysql.com/doc/refman/5.7/en/create-table-generated-columns.html|MySQL&#39;s generated columns]] can be imported into MariaDB without a dump and restore.

== Implementation Differences

Generated columns are subject to various constraints in other DBMSs that are not present in MariaDB&#39;s implementation. Generated columns may also be called computed columns or virtual columns in different implementations. The various details for a specific implementation can be found in the documentation for each specific DBMS.

=== Implementation Differences Compared to Microsoft SQL Server

MariaDB&#39;s generated columns implementation does not enforce the following
restrictions that are present in [[https://docs.microsoft.com/en-us/sql/relational-databases/tables/specify-computed-columns-in-a-table?view=sql-server-2017|Microsoft SQL Server&#39;s computed columns]] implementation:

* MariaDB allows [[system-variables|server variables]] in generated column expressions, including those that change dynamically, such as [[server-system-variables#warning_count|warning_count]].
* MariaDB allows the [[convert_tz|CONVERT_TZ()]] function to be called with a named [[time-zones|time zone]] as an argument, even though time zone names and time offsets are configurable.
* MariaDB allows the [[cast|CAST()]] function to be used with non-unicode [[data-types-character-sets-and-collations|character sets]], even though character sets are configurable and differ between binaries/versions.
* MariaDB allows [[float|FLOAT]] expressions to be used in generated columns. Microsoft SQL Server considers these expressions to be &#34;imprecise&#34; due to potential cross-platform differences in floating-point implementations and precision.
* Microsoft SQL Server requires the [[https://docs.microsoft.com/en-us/sql/t-sql/statements/set-arithabort-transact-sql?view=sql-server-2017|ARITHABORT]] mode to be set, so that division by zero returns an error, and not a NULL.
* Microsoft SQL Server requires ##QUOTED_IDENTIFIER## to be set in [[sql-mode|sql_mode]]. In MariaDB, if data is inserted without ##ANSI_QUOTES## set in [[sql-mode|sql_mode]], then it will be processed and stored differently in a generated column that contains quoted identifiers.

Microsoft SQL Server enforces the above restrictions by doing one of the following things:
* Refusing to create computed columns.
* Refusing to allow updates to a table containing them.
* Refusing to use an index over such a column if it can not be guaranteed that the expression is fully deterministic.

In MariaDB, as long as the [[sql-mode|sql_mode]], language, and other settings that were in effect during the CREATE TABLE remain unchanged, the generated column expression will always be evaluated the same. If any of these things change, then please be aware that the generated column expression might not be
evaluated the same way as it previously was.

If you try to update a virtual column, you will get an error if the default [[sql-mode/#strict-mode|strict mode]] is enabled in [[sql-mode|sql_mode]], or a warning otherwise.

== Development History

Generated columns was originally developed by Andrey Zhakov. It was then modified by Sanja Byelkin and Igor Babaev at Monty Program for inclusion in MariaDB. Monty did the work on MariaDB 10.2 to lift a some of the old limitations.

== Examples

Here is an example table that uses both &lt;&lt;code&gt;&gt;VIRTUAL&lt;&lt;/code&gt;&gt; and
&lt;&lt;code&gt;&gt;PERSISTENT&lt;&lt;/code&gt;&gt; virtual columns:

&lt;&lt;code lang=mysql&gt;&gt;
USE TEST;

CREATE TABLE table1 (
     a INT NOT NULL,
     b VARCHAR(32),
     c INT AS (a mod 10) VIRTUAL,
     d VARCHAR(5) AS (left(b,5)) PERSISTENT);
&lt;&lt;/code&gt;&gt;

If you describe the table, you can easily see which columns are virtual by
looking in the &#34;Extra&#34; column:

&lt;&lt;code lang=mysql&gt;&gt;
DESCRIBE table1;
+-------+-------------+------+-----+---------+------------+
| Field | Type        | Null | Key | Default | Extra      |
+-------+-------------+------+-----+---------+------------+
| a     | int(11)     | NO   |     | NULL    |            |
| b     | varchar(32) | YES  |     | NULL    |            |
| c     | int(11)     | YES  |     | NULL    | VIRTUAL    |
| d     | varchar(5)  | YES  |     | NULL    | PERSISTENT |
+-------+-------------+------+-----+---------+------------+
&lt;&lt;/code&gt;&gt;

To find out what function(s) generate the value of the virtual column you can use &lt;&lt;code&gt;&gt;SHOW CREATE TABLE&lt;&lt;/code&gt;&gt;:

&lt;&lt;code lang=mysql&gt;&gt;
SHOW CREATE TABLE table1;

| table1 | CREATE TABLE `table1` (
  `a` int(11) NOT NULL,
  `b` varchar(32) DEFAULT NULL,
  `c` int(11) AS (a mod 10) VIRTUAL,
  `d` varchar(5) AS (left(b,5)) PERSISTENT
) ENGINE=MyISAM DEFAULT CHARSET=latin1 |
&lt;&lt;/code&gt;&gt;

If you try to insert non-default values into a virtual column, you will receive
a warning and what you tried to insert will be ignored and the derived value
inserted instead:

&lt;&lt;sql&gt;&gt;
WARNINGS;
Show warnings enabled.

INSERT INTO table1 VALUES (1, &#39;some text&#39;,default,default);
Query OK, 1 row affected (0.00 sec)

INSERT INTO table1 VALUES (2, &#39;more text&#39;,5,default);
Query OK, 1 row affected, 1 warning (0.00 sec)

Warning (Code 1645): The value specified for computed column &#39;c&#39; in table &#39;table1&#39; has been ignored.

INSERT INTO table1 VALUES (123, &#39;even more text&#39;,default,&#39;something&#39;);
Query OK, 1 row affected, 2 warnings (0.00 sec)

Warning (Code 1645): The value specified for computed column &#39;d&#39; in table &#39;table1&#39; has been ignored.
Warning (Code 1265): Data truncated for column &#39;d&#39; at row 1

SELECT * FROM table1;
+-----+----------------+------+-------+
| a   | b              | c    | d     |
+-----+----------------+------+-------+
|   1 | some text      |    1 | some  |
|   2 | more text      |    2 | more  |
| 123 | even more text |    3 | even  |
+-----+----------------+------+-------+
3 rows in set (0.00 sec)
&lt;&lt;/sql&gt;&gt;

If the ##ZEROFILL## clause is specified, it should be placed directly after the type definition, before the ##AS (&lt;expression&gt;)##:

&lt;&lt;code lang=mysql&gt;&gt;
CREATE TABLE table2 (a INT, b INT ZEROFILL AS (a*2) VIRTUAL);
INSERT INTO table2 (a) VALUES (1);

SELECT * FROM table2;
+------+------------+
| a    | b          |
+------+------------+
|    1 | 0000000002 |
+------+------------+
1 row in set (0.00 sec)
&lt;&lt;/code&gt;&gt;

You can also use virtual columns to implement a &#34;poor man&#39;s partial index&#34;. See example at the end of [[getting-started-with-indexes#unique-index|Unique Index]].

== See Also
* [[https://mariadb.com/blog/putting-virtual-columns-good-use|Putting Virtual Columns to good use]] on the mariadb.com blog.</textarea>
    


                    <div id="content_disclaimer" class="graybox">
                        Content reproduced on this site is the property of its respective owners,
                        and this content is not reviewed in advance by MariaDB. The views, information and opinions
                        expressed by this content do not necessarily represent those of MariaDB or any other party.
                    </div>
                </div>
            </section>

            
        </div>
    </div>
</div>

<!-- Footer -->
<footer id="footer">
    <div class="footer">
        <div class="container">
            <div class="row">
                <div class="col-xs-12">
                    <ul class="list-inline text-center footer-nav">
                        <li>
                            <h5>
                                <a href="https://mariadb.com/products" title="Products">Products</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/solutions" title="Solutions">Solutions</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/resources" title="Resources">Resources</a>
                            </h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/about-us" title="About MariaDB">Company</a></h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/pricing" title="Pricing">Pricing</a>
                            </h5>
                        </li>
                        
                        
                        <li>
                            <h5><a href="https://mariadb.com/downloads" title="Download">Download MariaDB</a></h5>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="row row-10">
                
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div id="block-footerformcontact" class="block block-block-content block-block-contentd754ee1b-3cc9-40e7-9ef4-f504f1197fb1">
                        
                            <h5 style="font-weight: 400;">Subscribe to our newsletter!</h5>
                            <script src="//app-sj15.marketo.com/js/forms2/js/forms2.min.js"></script><form id="mktoForm_1498"></form>
                            <script>
                                <!--//--><![CDATA[// ><!--
                                MktoForms2.loadForm("//app-sj15.marketo.com", "573-PXI-984", 1498);
                                //--><!]]]]><![CDATA[>
                                //--><!]]>
                            </script>
                        
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div class="footer-copyright">
                        <div class="text-center">
                            <ul class="list-inline no-margin">
                                <li>
                                    <a href="/legal" title="Legal">Legal</a>
                                </li>
                                <li>
                                    <a href="/privacy-policy" title="Privacy Policy">Privacy Policy</a>
                                </li>
                                <li>
                                    <a href="/cookie-policy/" title="Cookies">Cookie Policy</a>
                                </li>
                            </ul>
                            <p>Copyright &copy; 2025 MariaDB. All rights reserved.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
</footer>
</div>

<div id="ajax_loading">
    <img src="/kb/static/images/ajax-loader.a51c5608d01a.gif" />
</div>

    <!-- Google Tag Manager -->
    <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-MK2847"
                      height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
            '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MK2847');</script>
    <!-- End Google Tag Manager -->

</body>

<script type="text/javascript" src="/kb/static/js/main.1587e3a666fc.js" charset="utf-8"></script>

</html>