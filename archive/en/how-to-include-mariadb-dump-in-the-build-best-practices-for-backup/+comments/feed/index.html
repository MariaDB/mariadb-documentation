<?xml version="1.0" encoding="utf-8"?>
<rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title>MariaDB Knowledge Base Comments for: How to include "mariadb-dump" in the build? Best practices for backup?</title><link>https://mariadb.com/kb/en/how-to-include-mariadb-dump-in-the-build-best-practices-for-backup/+comments/feed/</link><description></description><atom:link href="https://mariadb.com/kb/en/how-to-include-mariadb-dump-in-the-build-best-practices-for-backup/+comments/feed/" rel="self"></atom:link><language>en-us</language><lastBuildDate>Mon, 23 Dec 2024 12:13:21 +0000</lastBuildDate><item><title>Re: How to include "mariadb-dump" in the build? Best practices for backup?</title><link>https://mariadb.com/kb/en/how-to-include-mariadb-dump-in-the-build-best-practices-for-backup/+comments/6760</link><description>&lt;p&gt;If you have 8 cores&lt;/p&gt;
&lt;p&gt;cmake --build . -j 8&lt;/p&gt;
&lt;p&gt;is much faster than without -j.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Vladislav Vaintroub</dc:creator><guid>https://mariadb.com/kb/en/how-to-include-mariadb-dump-in-the-build-best-practices-for-backup/+comments/6760</guid></item><item><title>Re: How to include "mariadb-dump" in the build? Best practices for backup?</title><link>https://mariadb.com/kb/en/how-to-include-mariadb-dump-in-the-build-best-practices-for-backup/+comments/6759</link><description>&lt;p&gt;Thank you so much Vladislav, you helped me a lot!
I was trying to figure out for 8 hours how to include "mariadb-dump" in the installation. It turns out I already had it - haha!&lt;/p&gt;
&lt;p&gt;Now I will go continue working on my script to automate database backups with it. I will also try "mariabackup" and compare it, but I think it will be too large for my email attachment.&lt;/p&gt;
&lt;p&gt;Thanks a lot and have a nice day!&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">John Doe</dc:creator><guid>https://mariadb.com/kb/en/how-to-include-mariadb-dump-in-the-build-best-practices-for-backup/+comments/6759</guid></item><item><title>Re: How to include "mariadb-dump" in the build? Best practices for backup?</title><link>https://mariadb.com/kb/en/how-to-include-mariadb-dump-in-the-build-best-practices-for-backup/+comments/6758</link><description>&lt;p&gt;I think your "rm -rf" should be fine. cmake --install did not create anything outside of that directory.&lt;/p&gt;
&lt;p&gt;You need to decide where you'll create data directory with mariadb-install-db, and then decide whether to remove or retain when you uninstall like that, there is no automatisms for that, with "cmake --install"&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Vladislav Vaintroub</dc:creator><guid>https://mariadb.com/kb/en/how-to-include-mariadb-dump-in-the-build-best-practices-for-backup/+comments/6758</guid></item><item><title>Re: How to include "mariadb-dump" in the build? Best practices for backup?</title><link>https://mariadb.com/kb/en/how-to-include-mariadb-dump-in-the-build-best-practices-for-backup/+comments/6757</link><description>&lt;p&gt;Ahaaaaaaa! I understand it now!&lt;/p&gt;
&lt;p&gt;The "mariadb-dump" is already installed.
On my system, MariaDB is installed to "/usr/local/mysql".&lt;/p&gt;
&lt;p&gt;And if i run&lt;/p&gt;
&lt;pre class="fixed"&gt;/usr/local/mysql/bin/mariadb-dump
&lt;/pre&gt;&lt;p&gt;This will start the "mariadb-dump". I did not know it's inside the installation directory!&lt;/p&gt;
&lt;p&gt;So it looks like I do not need to reinstall anything, which is nice.&lt;/p&gt;
&lt;p&gt;By the way, I just wonder:
If I want to completely uninstall/reinstall MariaDB in the future after building manually, what is the best way?&lt;/p&gt;
&lt;p&gt;I just do:&lt;/p&gt;
&lt;p&gt;&lt;code class="unknown_macro"&gt;&amp;lt;&amp;lt;&lt;span class="macro_name"&gt;code&lt;/span&gt;&lt;span class="macro_arg_string"&gt;&lt;/span&gt;&amp;gt;&amp;gt;&lt;/code&gt;
sudo rm -rf /usr/local/mysql
&amp;lt;&amp;lt;/code&amp;gt;&lt;/p&gt;
&lt;p&gt;Or I need to do something else, to make a complete uninstall?&lt;/p&gt;
&lt;p&gt;Thank you so much!&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">John Doe</dc:creator><guid>https://mariadb.com/kb/en/how-to-include-mariadb-dump-in-the-build-best-practices-for-backup/+comments/6757</guid></item><item><title>Re: How to include "mariadb-dump" in the build? Best practices for backup?</title><link>https://mariadb.com/kb/en/how-to-include-mariadb-dump-in-the-build-best-practices-for-backup/+comments/6754</link><description>&lt;p&gt;Not, not exactly what I meant.&lt;/p&gt;
&lt;p&gt;I mean, if I do the same as you do, then after then cmake --build , there is a client/mariadb-dump already, and if I install with&lt;/p&gt;
&lt;p&gt;  cmake --install . --prefix my_prefix&lt;/p&gt;
&lt;p&gt;then run&lt;/p&gt;
&lt;p&gt;  my_prefix/bin/mariadb-dump --help&lt;/p&gt;
&lt;p&gt;it does what it should do, namely, output usage and various variables it accepts.&lt;/p&gt;
&lt;p&gt;I'm saying it works for me, because I just ran this sequence. I could recommend passing -j&amp;lt;number_of_cpus&amp;gt; to the cmake --build , to shorten the build time.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Vladislav Vaintroub</dc:creator><guid>https://mariadb.com/kb/en/how-to-include-mariadb-dump-in-the-build-best-practices-for-backup/+comments/6754</guid></item><item><title>Re: How to include "mariadb-dump" in the build? Best practices for backup?</title><link>https://mariadb.com/kb/en/how-to-include-mariadb-dump-in-the-build-best-practices-for-backup/+comments/6753</link><description>&lt;p&gt;Just wanted to clarify exactly how I do it currently (for MariaDB):&lt;/p&gt;
&lt;pre class="fixed"&gt;cd ~
wget https://archive.mariadb.org/mariadb-11.4.2/source/mariadb-11.4.2.tar.gz
tar -xf mariadb-*.tar.gz
cd mariadb-11.4.2

cmake . -DWITHOUT_DYNAMIC_PLUGINS=1 -DWITH_MARIABACKUP=0 -DPLUGIN_PERFSCHEMA=NO -DWITH_UNIT_TESTS=0

cmake --build .
sudo cmake --install .
&lt;/pre&gt;&lt;p&gt;So if I want to also build the "mariadb-dump", I should change the last two lines to this:&lt;/p&gt;
&lt;pre class="fixed"&gt;cmake --build .
cmake --build . --target mariadb-dump
sudo cmake --install .
&lt;/pre&gt;&lt;p&gt;Is this what you mean?&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">John Doe</dc:creator><guid>https://mariadb.com/kb/en/how-to-include-mariadb-dump-in-the-build-best-practices-for-backup/+comments/6753</guid></item><item><title>Re: How to include "mariadb-dump" in the build? Best practices for backup?</title><link>https://mariadb.com/kb/en/how-to-include-mariadb-dump-in-the-build-best-practices-for-backup/+comments/6751</link><description>&lt;p&gt;You're asking many questions at once :)&lt;/p&gt;
&lt;p&gt;My cmake command line is quite similar to yours, just I'd not build in the source directory, but anyway&lt;/p&gt;
&lt;p&gt;In the build directory, this line&lt;/p&gt;
&lt;p&gt;   cmake --build . --target mariadb-dump&lt;/p&gt;
&lt;p&gt;Will build your the mariadb-dump,  starting maybe with 10.5 (before that, target was called mysqldump). Maybe you build an old version.&lt;/p&gt;
&lt;p&gt;You can't exclude mariadb-dump from the build using CMake during configure step,
there are no options for it.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Vladislav Vaintroub</dc:creator><guid>https://mariadb.com/kb/en/how-to-include-mariadb-dump-in-the-build-best-practices-for-backup/+comments/6751</guid></item></channel></rss>