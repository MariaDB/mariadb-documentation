<?xml version="1.0" encoding="utf-8"?>
<rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title>MariaDB Knowledge Base Comments for: JSON_ARRAY_APPEND</title><link>https://mariadb.com/kb/en/json_array_append/+comments/feed/</link><description></description><atom:link href="https://mariadb.com/kb/en/json_array_append/+comments/feed/" rel="self"></atom:link><language>en-us</language><lastBuildDate>Mon, 11 Mar 2024 20:25:46 +0000</lastBuildDate><item><title>Re: JSON_ARRAY_APPEND</title><link>https://mariadb.com/kb/en/json_array_append/+comments/6474</link><description>&lt;p&gt;Hi, 
Please note that if ANY of the arguments are NULL, JSON_ARRAY_APPEND will return NULL (very dangerous in an UPDATE). &lt;/p&gt;
&lt;p&gt;If, for example, the json_doc argument (most likely a column that should contain a JSON object and the column that will likely receive the new JSON object after the append happens) is null, then one can before the append initialize (With set or update) the json_doc with "[]" (an empty and valid JSON object), solving all problems.  &lt;/p&gt;
&lt;p&gt;SET @json =null;
SELECT JSON_ARRAY_APPEND(@json, '$[0]', 5)&lt;/p&gt;
&lt;p&gt;the above will not work, but the below will:&lt;/p&gt;
&lt;p&gt;SET @json = '[]';
SELECT JSON_ARRAY_APPEND(@json, '$[0]', 5)&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Fernando Garcia</dc:creator><guid>https://mariadb.com/kb/en/json_array_append/+comments/6474</guid></item></channel></rss>