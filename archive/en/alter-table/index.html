<!DOCTYPE html>
<html>
<head data-cookie-domain=""
      data-cookie-path="/">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="apple-touch-icon" sizes="180x180" href="/kb/static/images/favicons/apple-touch-icon.159e713979be.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/kb/static/images/favicons/favicon-32x32.bc0ac1d5d11e.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/kb/static/images/favicons/favicon-16x16.5801f8f0f34e.png">
    <link rel="shortcut icon" href="/kb/static/images/favicons/favicon.d122d305dee4.ico" type="image/x-icon" />

    <title>ALTER TABLE - MariaDB Knowledge Base</title>

    <link href="/kb/static/css/main.f7633538c846.css" rel="stylesheet" type="text/css" />

    

    

    <!-- FB Open Graph tags -->
    <meta property="og:title" content="ALTER TABLE" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://mariadb.com/kb/en/alter-table/" />
    <meta property="og:image" content="http://mariadb.comaskmonty-logo.png" />
    <meta property="og:site_name" content="MariaDB KnowledgeBase" />
    <meta property="fb:admins" content="514852603" />
    <meta property="og:description" content="Modify a table&#39;s definition." />

    <meta name="description" content="Modify a table&#39;s definition." />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="//fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet"/>
    
</head>
<body class="mpkb nodes products nodes_view jqui" id="nodes_view">





<div id="menu-mobile" class="visible-sm visible-xs">

    <div>
        <div id="mobile-close-menu" class="text-right">
            <a href="javascript:void(0)" title="Close Menu" id="back-main" class="toggle-menu">X<span></span></a>
        </div>
    </div>
    <div class="mainmenu-mobile">
        <ul class="ls-none ul-menu">
            <li data-sub="submenu5"><a class="open-form-search" href="/kb/search/" title="Search">Search </a></li>
            <li data-sub="submenu0"><a href="/products" title="Products">Products</a><span class="arrow-main"></span></li>
            <li data-sub="submenu1"><a href="/services" title="Services">Services</a><span class="arrow-main"></span></li>
            <li data-sub="submenu2"><a href="/resources" title="Resources">Resources</a><span class="arrow-main"></span></li>
            <li data-sub="submenu3"><a href="/about-us" title="About">About</a><span class="arrow-main"></span></li>
            <li data-sub="submenu4"><a href="/contact" title="Contact">Contact</a></li>
        </ul>
    </div>

    <div class="nav-top-mobile">
        <div class="select-box form">

            <ul class="inline-block-md mb-none top-nav">
                <li>

                </li>
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/alter-table/"> Login</a>
                    </li>
                
            </ul>



        </div>
        <p class="text-center copyright">Copyright &copy; 2024 MariaDB. All rights reserved.</p>
    </div>
</div>
<div class="violator-wrap d-none" id="top_violator">
    <div class="container">
        <div class="row">
            <div class="col-xs-12 col-sm-12">
                <div class="violator-outer">
                    <div class="violator-inner">
                        <div class="row">
                            <div class="col-xs-12 col-sm-9 col-lg-7 col-lg-offset-2" id="top_violator_content">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="content-link" target="_blank" rel="nofollow noreferrer">
                                    <span>The Ultimate Guide to High Availability with MariaDB</span>
                                </a>
                            </div>
                            <div class="col-xs-12 col-sm-3" id="top_violator_cta">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="btn btn-mariadb" target="_blank" rel="nofollow noreferrer">Download Now</a>
                            </div>
                        </div>
                    </div>
                    <button type="button" class="btn btn-link close-btn">
                        <svg xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 24 24" width="15px" height="15px"><path d="M 4.9902344 3.9902344 A 1.0001 1.0001 0 0 0 4.2929688 5.7070312 L 10.585938 12 L 4.2929688 18.292969 A 1.0001 1.0001 0 1 0 5.7070312 19.707031 L 12 13.414062 L 18.292969 19.707031 A 1.0001 1.0001 0 1 0 19.707031 18.292969 L 13.414062 12 L 19.707031 5.7070312 A 1.0001 1.0001 0 0 0 18.980469 3.9902344 A 1.0001 1.0001 0 0 0 18.292969 4.2929688 L 12 10.585938 L 5.7070312 4.2929688 A 1.0001 1.0001 0 0 0 4.9902344 3.9902344 z"/></svg>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="wrapper">
<div id="top-nav">
    <div class="container">
        <ul class="hidden-sm hidden-xs" >
            <li><a href="https://mariadb.com/kb/">Knowledge Base</a></li>
            <li><a href="https://mariadb.com/contact/">Contact</a></li>
            
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/alter-table/" rel="nofollow">Login</a>
                    </li>
                
            
            
            <li id="search-form">
                <form action="/kb/en/+search/" method="get" id="search-block-form" accept-charset="UTF-8">
                    <input id="search" title="Enter the terms you wish to search for."
                           placeholder="Search . . ." type="text"
                           name="q" value="" size="15" maxlength="128" class="form-text"
                           data-autocomplete-url="/kb/en/+search/autocomplete/">
                    <input type="hidden" name="quick" value="1" />
                    <input type="hidden" name="source" value="kb" />
                </form>
            </li>
            <li><a id="search-toggler" href="/kb/search/">Search</a></li>
            
        </ul>
    </div>
</div>
<div id="navbar-bottom" class="navbar">
    <div class="container">
        
        
        
        
        <div class="row">
            <div class="col-md-3 col-sm-9 col-xs-9">
                <a class="brand" href="/" title="MariaDB">
                    <img src="/kb/static/images/logo-2018-black.95f5978ae14d.png">
                </a>
            </div>
            <div class="col-md-9 hidden-sm hidden-xs">
                <div class="main-menu">
                    <ul id="main-menu" class="nav navbar-nav inline-block-sm">
    <li class="has-sub full-menu">
        <a href="/products" title="Products">Products</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/services" title="Services">Services</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/pricing" title="Pricing">Pricing</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/resources" title="Resources">Resources</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/about-us" title="About Us">About Us</a>
    </li>
    <li class="">
        <a class="button electric-eel small top-bar-right-download" href="/downloads/">Download</a>
    </li>
</ul>
                </div>
            </div>
            <div class="col-md-3 visible-sm visible-xs col-sm-3 col-xs-3 ps-rv">
                <div class="navbar-header text-right pull-right">
                    <button type="button" class="menu-control toggle-menu" id="open-menu">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="main">
    <div class="container">
        

        <div id="subheader1" class="clearfix">
            <div class="pull-left">
                
                <div id="breadcrumbs" class="breadcrumb">
                    <a href="/kb/en/">Knowledge Base</a>
                    


    
    » <a class="crumb" href="/kb/en/documentation/">MariaDB Server Documentation</a>
    

    
    » <a class="crumb" href="/kb/en/using-mariadb-server/">Using MariaDB Server</a>
    

    
    » <a class="crumb" href="/kb/en/sql-statements-structure/">SQL Statements &amp; Structure</a>
    

    
    » <a class="crumb" href="/kb/en/sql-statements/">SQL Statements</a>
    

    
    » <a class="crumb" href="/kb/en/data-definition/">Data Definition</a>
    

    
    » <a class="crumb" href="/kb/en/alter/">ALTER</a>
    


    » <a class="node_link crumb" href="/kb/en/alter-table/">ALTER TABLE</a>


                </div>
                
            </div>
        </div>
    </div>
    <div class="container" id="container-main">
        <div class="row">
            
            
                
                <aside id="sidebar-first" class="sidebar col-md-2 hidden-xs hidden-sm hidden-print">
                    
                        
                        <ul id="category_menu" class="nav nav-pills nav-stacked">
                            <li><a href="/kb/en/">Home</a></li>
                            
                                
                                    <li><a href="/kb/en/+questions/">Open Questions</a></li>
                                
                                <li><a href="/kb/en/documentation/">MariaDB Server</a></li>
                                <li><a href="/kb/en/maxscale/">MariaDB MaxScale</a></li>
                                <li><a href="/kb/en/mariadb-columnstore/">MariaDB ColumnStore</a></li>
                                <li><a href="/kb/en/connectors/">Connectors</a></li>
                            

                        </ul>
                    

                    
<div>



<div class="well well-small box actions"><div>

        <a class="btn btn-block btn-blue btn-sm" href="/kb/en/alter-table/+history" rel="nofollow">History</a>
        
        
        
        <a class="btn btn-block btn-blue btn-sm" href="/kb/en/alter-table/+source/">Source</a>
        
        <a class="btn btn-block btn-blue btn-sm flag" href="/kb/en/alter-table/+flag"
                data-flag-url="/kb/en/alter-table/+flag" rel="nofollow">
                Flag as Spam / Inappropriate</a>
        
        <a class="btn btn-block btn-blue btn-sm" href="/kb/en/alter-table/+translate/">
                Translate</a>
        

</div>
</div>





<div class="well well-small box node_info"><div>

    <dl>
        <dt>Created</dt>
        <dd>

<span class="datetime" title="2010-04-02 19:04">14 years, 3 months ago</span></dd>

        <dt>Modified</dt>
        <dd>

<span class="datetime" title="2024-07-10 06:05">2 weeks, 4 days ago</span></dd>

        <dt>Type</dt>
        <dd>article</dd>

        <dt>Status</dt>
        <dd>active</dd>

        <dt>License</dt>
        <dd>
            
                <a href="/kb/en/alter-table/+license/">GPLv2 fill_help_tables.sql</a>
            
        </dd>

        
    </dl>

    
    <ul class="rss_feeds">
        <li><a href="/kb/en/alter-table/+history/feed/">
            History</a>
        </li>
        <li><a href="/kb/en/alter-table/+comments/feed/">
            Comments</a>
        </li>
    </ul>
    

</div>
</div>





    
    
    

<div class="well well-small box attachments"><div><div class="edit_link pull-right"><a href="/kb/en/alter-table/+edit/attachments/">Edit</a></div><h5>Attachments</h5></div><div>

        
            <div class="no_data">No attachments exist</div>
        
    
</div>
</div>

    



    
    
        

<div class="well well-small box"><div><h5>Localized Versions</h5></div><div>

        <ul>
            
            <li><a href="/kb/pt-br/alter-table/">ALTER TABLE</a> [pt-br]</li>
            
            <li><a href="/kb/it/alter-table/">ALTER TABLE</a> [it]</li>
            
            <li><a href="/kb/zh-cn/alter-table/">ALTER TABLE</a> [zh-cn]</li>
            
        </ul>
        
</div>
</div>

    



    
    

<div class="well well-small box"><div><h5>Product Versions</h5></div><div>

        <ul id="product_chooser">
            
                <li class="mariadb_from_10_5_2">
                    <label><input type="checkbox" data-product-class="mariadb_from_10_5_2"
                            >MariaDB starting with 10.5.2</label>
                </li>
            
                <li class="mariadb_from_10_5_2">
                    <label><input type="checkbox" data-product-class="mariadb_from_10_5_2"
                            >MariaDB starting with 10.5.2</label>
                </li>
            
                <li class="mariadb_from_10_5_2">
                    <label><input type="checkbox" data-product-class="mariadb_from_10_5_2"
                            >MariaDB starting with 10.5.2</label>
                </li>
            
                <li class="mariadb_from_10_6_1">
                    <label><input type="checkbox" data-product-class="mariadb_from_10_6_1"
                            >MariaDB starting with 10.6.1</label>
                </li>
            
                <li class="mariadb_from_10_8_1">
                    <label><input type="checkbox" data-product-class="mariadb_from_10_8_1"
                            >MariaDB starting with 10.8.1</label>
                </li>
            
                <li class="mariadb_from_10_5_2">
                    <label><input type="checkbox" data-product-class="mariadb_from_10_5_2"
                            >MariaDB starting with 10.5.2</label>
                </li>
            
                <li class="mariadb_from_10_5_2">
                    <label><input type="checkbox" data-product-class="mariadb_from_10_5_2"
                            >MariaDB starting with 10.5.2</label>
                </li>
            
                <li class="mariadb_from_10_5_2">
                    <label><input type="checkbox" data-product-class="mariadb_from_10_5_2"
                            >MariaDB starting with 10.5.2</label>
                </li>
            
                <li class="mariadb_from_10_6_1">
                    <label><input type="checkbox" data-product-class="mariadb_from_10_6_1"
                            >MariaDB starting with 10.6.1</label>
                </li>
            
                <li class="mariadb_from_10_8_1">
                    <label><input type="checkbox" data-product-class="mariadb_from_10_8_1"
                            >MariaDB starting with 10.8.1</label>
                </li>
            
        </ul>
    
</div>
</div>






</div>


                    

































                </aside>
            
            
            
                
            
            
                
            
            <section id="content" class="limited_width col-md-8 clearfix">
                
                    <h1>ALTER TABLE</h1>
                

                



                <div>
                    
    

    
    
    

    <div class="node creole">
        
        
        


    
    <div class="answer formatted">
        <h2 class="anchored_heading" id="syntax">Syntax</h2>
<pre class="highlight fixed"><p>ALTER [ONLINE] [IGNORE] TABLE [IF EXISTS] tbl_name
    [WAIT n | NOWAIT]
    alter_specification [, alter_specification] ...</p>
<p>alter_specification:
    <a href="/kb/en/create-table/#table-options">table_option</a> ...
  <code>|</code> ADD [COLUMN] [IF NOT EXISTS] col_name <a href="/kb/en/create-table/#column-definitions">column_definition</a>
        [FIRST | AFTER col_name ]
  <code>|</code> ADD [COLUMN] [IF NOT EXISTS] (col_name <a href="/kb/en/create-table/#column-definitions">column_definition</a>,...)
  <code>|</code> ADD {INDEX|KEY} [IF NOT EXISTS] [index_name]
        [index_type] (index_col_name,...) [index_option] ...
  <code>|</code> ADD [CONSTRAINT [symbol]] PRIMARY KEY
        [index_type] (index_col_name,...) [index_option] ...
  <code>|</code> ADD [CONSTRAINT [symbol]]
        UNIQUE [INDEX|KEY] [index_name]
        [index_type] (index_col_name,...) [index_option] ...
  <code>|</code> ADD FULLTEXT [INDEX|KEY] [index_name]
        (index_col_name,...) [index_option] ...
  <code>|</code> ADD SPATIAL [INDEX|KEY] [index_name]
        (index_col_name,...) [index_option] ...
  <code>|</code> ADD [CONSTRAINT [symbol]]
        FOREIGN KEY [IF NOT EXISTS] [index_name] (index_col_name,...)
        reference_definition
  <code>|</code> ADD PERIOD FOR [time_period_name|SYSTEM_TIME] (start_column_name, end_column_name)
  <code>|</code> ALTER [COLUMN] col_name SET DEFAULT literal | (expression)
  <code>|</code> ALTER [COLUMN] col_name DROP DEFAULT
  <code>|</code> ALTER {INDEX|KEY} index_name [NOT] INVISIBLE
  <code>|</code> CHANGE [COLUMN] [IF EXISTS] old_col_name new_col_name <a href="/kb/en/create-table/#column-definitions">column_definition</a>
        [FIRST|AFTER col_name]
  <code>|</code> MODIFY [COLUMN] [IF EXISTS] col_name <a href="/kb/en/create-table/#column-definitions">column_definition</a>
        [FIRST | AFTER col_name]
  <code>|</code> DROP [COLUMN] [IF EXISTS] col_name [RESTRICT|CASCADE]
  <code>|</code> DROP PRIMARY KEY
  <code>|</code> DROP {INDEX|KEY} [IF EXISTS] index_name
  <code>|</code> DROP FOREIGN KEY [IF EXISTS] fk_symbol
  <code>|</code> DROP CONSTRAINT [IF EXISTS] constraint_name
  <code>|</code> DISABLE KEYS
  <code>|</code> ENABLE KEYS
  <code>|</code> RENAME [TO] new_tbl_name
  <code>|</code> ORDER BY col_name [, col_name] ...
  <code>|</code> RENAME COLUMN old_col_name TO new_col_name
  <code>|</code> RENAME {INDEX|KEY} old_index_name TO new_index_name
  <code>|</code> CONVERT TO CHARACTER SET charset_name [COLLATE collation_name]
  <code>|</code> [DEFAULT] CHARACTER SET [=] charset_name
  <code>|</code> [DEFAULT] COLLATE [=] collation_name
  <code>|</code> DISCARD TABLESPACE
  <code>|</code> IMPORT TABLESPACE
  <code>|</code> ALGORITHM [=] {DEFAULT|INPLACE|COPY|NOCOPY|INSTANT}
  <code>|</code> LOCK [=] {DEFAULT|NONE|SHARED|EXCLUSIVE}
  <code>|</code> FORCE
  <code>|</code> <a href="/kb/en/create-table/#partitions">partition_options</a>
  <code>|</code> CONVERT TABLE normal_table TO <a href="/kb/en/create-table/#partitions">partition_definition</a> [{WITH | WITHOUT} VALIDATION]
  <code>|</code> CONVERT PARTITION partition_name TO TABLE tbl_name
  <code>|</code> ADD PARTITION [IF NOT EXISTS] (<a href="/kb/en/create-table/#partitions">partition_definition</a>)
  <code>|</code> DROP PARTITION [IF EXISTS] partition_names
  <code>|</code> TRUNCATE PARTITION partition_names
  <code>|</code> COALESCE PARTITION number
  <code>|</code> REORGANIZE PARTITION [partition_names INTO (partition_definitions)]
  <code>|</code> ANALYZE PARTITION partition_names
  <code>|</code> CHECK PARTITION partition_names
  <code>|</code> OPTIMIZE PARTITION partition_names
  <code>|</code> REBUILD PARTITION partition_names
  <code>|</code> REPAIR PARTITION partition_names
  <code>|</code> EXCHANGE PARTITION partition_name WITH TABLE tbl_name [{WITH | WITHOUT} VALIDATION]
  <code>|</code> REMOVE PARTITIONING
  <code>|</code> ADD SYSTEM VERSIONING
  <code>|</code> DROP SYSTEM VERSIONING</p>
<p>index_col_name:
    col_name [(length)] [ASC | DESC]</p>
<p>index_type:
    USING {BTREE | HASH | RTREE}</p>
<p><a href="/kb/en/create-table/#index-options">index_option</a>:
    [ KEY_BLOCK_SIZE [=] value
  <code>|</code> index_type
  <code>|</code> WITH PARSER parser_name
  <code>|</code> VISIBLE
  <code>|</code> COMMENT 'string'
  <code>|</code> CLUSTERING={YES| NO} ]
  [ IGNORED | NOT IGNORED ]</p>
<p>table_options:
    <a href="/kb/en/create-table/#table-options">table_option</a> <code>[</code>[,] <a href="/kb/en/create-table/#table-options">table_option</a>] ...</p></pre><div class="table_of_contents well well-small">
<h3>Contents</h3>
 <ol class="toc">

    <li class=""><a href="#syntax" title="Syntax">Syntax</a></li>

    <li class=""><a href="#description" title="Description">Description</a></li>

    <li class=""><a href="#privileges" title="Privileges">Privileges</a></li>

    <li class=""><a href="#online-ddl" title="Online DDL">Online DDL</a>    <ol class="toc">

        <li class=""><a href="#alter-online-table" title="ALTER ONLINE TABLE">ALTER ONLINE TABLE</a>    </ol>
</li>

    <li class=""><a href="#waitnowait" title="WAIT/NOWAIT">WAIT/NOWAIT</a></li>

    <li class=""><a href="#if-exists" title="IF EXISTS">IF EXISTS</a></li>

    <li class=""><a href="#column-definitions" title="Column Definitions">Column Definitions</a></li>

    <li class=""><a href="#index-definitions" title="Index Definitions">Index Definitions</a></li>

    <li class=""><a href="#character-sets-and-collations" title="Character Sets and Collations">Character Sets and Collations</a></li>

    <li class=""><a href="#alter-specifications" title="Alter Specifications">Alter Specifications</a>    <ol class="toc">

        <li class=""><a href="#table-options" title="Table Options">Table Options</a></li>

        <li class=""><a href="#add-column" title="ADD COLUMN">ADD COLUMN</a></li>

        <li class=""><a href="#drop-column" title="DROP COLUMN">DROP COLUMN</a></li>

        <li class=""><a href="#modify-column" title="MODIFY COLUMN">MODIFY COLUMN</a></li>

        <li class=""><a href="#change-column" title="CHANGE COLUMN">CHANGE COLUMN</a></li>

        <li class=""><a href="#alter-column" title="ALTER COLUMN">ALTER COLUMN</a></li>

        <li class=""><a href="#rename-indexkey" title="RENAME INDEX/KEY">RENAME INDEX/KEY</a></li>

        <li class=""><a href="#rename-column" title="RENAME COLUMN">RENAME COLUMN</a></li>

        <li class=""><a href="#add-primary-key" title="ADD PRIMARY KEY">ADD PRIMARY KEY</a></li>

        <li class=""><a href="#drop-primary-key" title="DROP PRIMARY KEY">DROP PRIMARY KEY</a></li>

        <li class=""><a href="#add-foreign-key" title="ADD FOREIGN KEY">ADD FOREIGN KEY</a></li>

        <li class=""><a href="#drop-foreign-key" title="DROP FOREIGN KEY">DROP FOREIGN KEY</a></li>

        <li class=""><a href="#add-index" title="ADD INDEX">ADD INDEX</a></li>

        <li class=""><a href="#drop-index" title="DROP INDEX">DROP INDEX</a></li>

        <li class=""><a href="#add-unique-index" title="ADD UNIQUE INDEX">ADD UNIQUE INDEX</a></li>

        <li class=""><a href="#drop-unique-index" title="DROP UNIQUE INDEX">DROP UNIQUE INDEX</a></li>

        <li class=""><a href="#add-fulltext-index" title="ADD FULLTEXT INDEX">ADD FULLTEXT INDEX</a></li>

        <li class=""><a href="#drop-fulltext-index" title="DROP FULLTEXT INDEX">DROP FULLTEXT INDEX</a></li>

        <li class=""><a href="#add-spatial-index" title="ADD SPATIAL INDEX">ADD SPATIAL INDEX</a></li>

        <li class=""><a href="#drop-spatial-index" title="DROP SPATIAL INDEX">DROP SPATIAL INDEX</a></li>

        <li class=""><a href="#enable-disable-keys" title="ENABLE/ DISABLE KEYS">ENABLE/ DISABLE KEYS</a></li>

        <li class=""><a href="#rename-to" title="RENAME TO">RENAME TO</a></li>

        <li class=""><a href="#add-constraint" title="ADD CONSTRAINT">ADD CONSTRAINT</a></li>

        <li class=""><a href="#drop-constraint" title="DROP CONSTRAINT">DROP CONSTRAINT</a></li>

        <li class=""><a href="#add-system-versioning" title="ADD SYSTEM VERSIONING">ADD SYSTEM VERSIONING</a></li>

        <li class=""><a href="#drop-system-versioning" title="DROP SYSTEM VERSIONING">DROP SYSTEM VERSIONING</a></li>

        <li class=""><a href="#add-period-for" title="ADD PERIOD FOR">ADD PERIOD FOR</a></li>

        <li class=""><a href="#force" title="FORCE">FORCE</a></li>

        <li class=""><a href="#partitions" title="Partitions">Partitions</a>        <ol class="toc">

            <li class=""><a href="#add-partition" title="ADD PARTITION">ADD PARTITION</a></li>

            <li class=""><a href="#analyze-partition" title="ANALYZE PARTITION">ANALYZE PARTITION</a></li>

            <li class=""><a href="#check-partition" title="CHECK PARTITION">CHECK PARTITION</a></li>

            <li class=""><a href="#coalesce-partition" title="COALESCE PARTITION">COALESCE PARTITION</a></li>

            <li class=""><a href="#convert-partition-table" title="CONVERT PARTITION / TABLE">CONVERT PARTITION / TABLE</a></li>

            <li class=""><a href="#drop-partition" title="DROP PARTITION">DROP PARTITION</a></li>

            <li class=""><a href="#exchange-partition" title="EXCHANGE PARTITION">EXCHANGE PARTITION</a></li>

            <li class=""><a href="#optimize-partition" title="OPTIMIZE PARTITION">OPTIMIZE PARTITION</a></li>

            <li class=""><a href="#remove-partitioning" title="REMOVE PARTITIONING">REMOVE PARTITIONING</a></li>

            <li class=""><a href="#reorganize-partition" title="REORGANIZE PARTITION">REORGANIZE PARTITION</a></li>

            <li class=""><a href="#truncate-partition" title="TRUNCATE PARTITION">TRUNCATE PARTITION</a>        </ol>
</li>

        <li class=""><a href="#discard-tablespace" title="DISCARD TABLESPACE">DISCARD TABLESPACE</a></li>

        <li class=""><a href="#import-tablespace" title="IMPORT TABLESPACE">IMPORT TABLESPACE</a></li>

        <li class=""><a href="#algorithm" title="ALGORITHM">ALGORITHM</a>        <ol class="toc">

            <li class=""><a href="#algorithmdefault" title="ALGORITHM=DEFAULT">ALGORITHM=DEFAULT</a></li>

            <li class=""><a href="#algorithmcopy" title="ALGORITHM=COPY">ALGORITHM=COPY</a></li>

            <li class=""><a href="#algorithminplace" title="ALGORITHM=INPLACE">ALGORITHM=INPLACE</a></li>

            <li class=""><a href="#algorithmnocopy" title="ALGORITHM=NOCOPY">ALGORITHM=NOCOPY</a></li>

            <li class=""><a href="#algorithminstant" title="ALGORITHM=INSTANT">ALGORITHM=INSTANT</a>        </ol>
</li>

        <li class=""><a href="#lock" title="LOCK">LOCK</a>        <ol class="toc">

            <li class=""><a href="#default" title="DEFAULT">DEFAULT</a></li>

            <li class=""><a href="#none" title="NONE">NONE</a></li>

            <li class=""><a href="#shared" title="SHARED">SHARED</a></li>

            <li class=""><a href="#exclusive" title="EXCLUSIVE">EXCLUSIVE</a>        </ol>
</li>

        <li class=""><a href="#index-options" title="Index Options">Index Options</a>    </ol>
</li>

    <li class=""><a href="#progress-reporting" title="Progress Reporting">Progress Reporting</a></li>

    <li class=""><a href="#aborting-alter-table-operations" title="Aborting ALTER TABLE Operations">Aborting ALTER TABLE Operations</a></li>

    <li class=""><a href="#atomic-alter-table" title="Atomic ALTER TABLE">Atomic ALTER TABLE</a></li>

    <li class=""><a href="#replication" title="Replication">Replication</a></li>

    <li class=""><a href="#examples" title="Examples">Examples</a></li>

    <li class=""><a href="#see-also" title="See Also">See Also</a> </ol>
</li>
</div>
<h2 class="anchored_heading" id="description">Description</h2>
<p><code>ALTER TABLE</code> enables you to change the structure of an existing table.
For example, you can add or delete columns, create or destroy indexes,
change the type of existing columns, or rename columns or the table
itself. You can also change the comment for the table and the storage engine of the
table.</p>
<p>If another connection is using the table, a <a href="/kb/en/metadata-locking/">metadata lock</a> is active, and this statement will wait until the lock is released. This is also true for non-transactional tables.</p>
<p>When adding a <code>UNIQUE</code> index on a column (or a set of columns) which have duplicated values, an error will be produced and the statement will be stopped. To suppress the error and force the creation of <code>UNIQUE</code> indexes, discarding duplicates, the <a href="/kb/en/ignore/">IGNORE</a> option can be specified. This can be useful if a column (or a set of columns) should be UNIQUE but it contains duplicate values; however, this technique provides no control on which rows are preserved and which are deleted. Also, note that <code>IGNORE</code> is accepted but ignored in <code>ALTER TABLE ... EXCHANGE PARTITION</code> statements.</p>
<p>This statement can also be used to rename a table. For details see <a href="/kb/en/rename-table/">RENAME TABLE</a>.</p>
<p>When an index is created, the storage engine may use a configurable buffer in the process. Incrementing the buffer speeds up the index creation. <a href="/kb/en/aria/">Aria</a> and <a href="/kb/en/myisam/">MyISAM</a> allocate a buffer whose size is defined by <a href="/kb/en/aria-system-variables/#aria_sort_buffer_size">aria_sort_buffer_size</a> or <a href="/kb/en/myisam-system-variables/#myisam_sort_buffer_size">myisam_sort_buffer_size</a>, also used for <a href="/kb/en/repair-table/">REPAIR TABLE</a>. <a href="/kb/en/innodb/">InnoDB</a> allocates three buffers whose size is defined by <a href="/kb/en/innodb-system-variables/#innodb_sort_buffer_size">innodb_sort_buffer_size</a>.</p>
<h2 class="anchored_heading" id="privileges">Privileges</h2>
<p>Executing the <code>ALTER TABLE</code> statement generally requires at least the <a href="/kb/en/grant/#table-privileges">ALTER</a> privilege for the table or the database..</p>
<p>If you are renaming a table, then it also requires the <a href="/kb/en/grant/#table-privileges">DROP</a>, <a href="/kb/en/grant/#table-privileges">CREATE</a> and <a href="/kb/en/grant/#table-privileges">INSERT</a> privileges for the table or the database as well.</p>
<h2 class="anchored_heading" id="online-ddl">Online DDL</h2>
<p>Online DDL is supported with the <a href="#algorithm">ALGORITHM</a> and <a href="#lock">LOCK</a> clauses.</p>
<p>See <a href="/kb/en/innodb-online-ddl-overview/">InnoDB Online DDL Overview</a> for more information on online DDL with <a href="/kb/en/innodb/">InnoDB</a>.</p>
<h3 class="anchored_heading" id="alter-online-table">ALTER ONLINE TABLE</h3>
<p>ALTER ONLINE TABLE also works for partitioned tables.</p>
<p>Online <code>ALTER TABLE</code> is available by executing the following:</p>
<pre class="fixed"><span class="k">ALTER</span> <span class="n">ONLINE</span> <span class="k">TABLE</span> <span class="p">...;</span>
</pre><p>This statement is equivalent to the following:</p>
<pre class="fixed"><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="p">...</span> <span class="k">LOCK</span><span class="o">=</span><span class="k">NONE</span><span class="p">;</span>
</pre><p>See the <a href="#lock">LOCK</a> alter specification for more information.</p>
<h2 class="anchored_heading" id="waitnowait">WAIT/NOWAIT</h2>
<p>Set the lock wait timeout. See <a href="/kb/en/wait-and-nowait/">WAIT and NOWAIT</a>.</p>
<h2 class="anchored_heading" id="if-exists">IF EXISTS</h2>
<p>The  <code>IF EXISTS</code> and <code>IF NOT EXISTS</code> clauses are available for the following:</p>
<pre class="highlight fixed"><p>ADD COLUMN       [IF NOT EXISTS]
ADD INDEX        [IF NOT EXISTS]
ADD FOREIGN KEY  [IF NOT EXISTS]
ADD PARTITION    [IF NOT EXISTS]
CREATE INDEX     [IF NOT EXISTS]</p>
<p>DROP COLUMN      [IF EXISTS]
DROP INDEX       [IF EXISTS]
DROP FOREIGN KEY [IF EXISTS]
DROP PARTITION   [IF EXISTS]
CHANGE COLUMN    [IF EXISTS]
MODIFY COLUMN    [IF EXISTS]
DROP INDEX       [IF EXISTS]</p></pre><p>When <code>IF EXISTS</code> and <code>IF NOT EXISTS</code> are used in clauses, queries will not
report errors when the condition is triggered for that clause. A warning with
the same message text will be issued and the ALTER will move on to the next
clause in the statement (or end if finished).</p>
<div class="mariadb_from_10_5_2 mariadb from_10_5_2 product"><h5 class="product_title">MariaDB starting with <a href="/kb/en/mariadb-1052-release-notes/">10.5.2</a></h5><p>If this is directive is used after <code>ALTER ... TABLE</code>, one will not get an error if the table doesn't exist.</p>
</div><h2 class="anchored_heading" id="column-definitions">Column Definitions</h2>
<p>See <a href="/kb/en/create-table/#column-definitions">CREATE TABLE: Column Definitions</a> for information about column definitions.</p>
<h2 class="anchored_heading" id="index-definitions">Index Definitions</h2>
<p>See <a href="/kb/en/create-table/#index-definitions">CREATE TABLE: Index Definitions</a> for information about index definitions.</p>
<p>The <a href="/kb/en/create-index/">CREATE INDEX</a> and <a href="/kb/en/drop-index/">DROP INDEX</a> statements can also be used to add or remove an index.</p>
<h2 class="anchored_heading" id="character-sets-and-collations">Character Sets and Collations</h2>
<pre class="highlight fixed"><p>CONVERT TO CHARACTER SET charset_name [COLLATE collation_name]
[DEFAULT] CHARACTER SET [=] charset_name
[DEFAULT] COLLATE [=] collation_name</p></pre><p>See <a href="/kb/en/setting-character-sets-and-collations/">Setting Character Sets and Collations</a> for details on setting the <a href="/kb/en/character-sets/">character sets and collations</a>.</p>
<h2 class="anchored_heading" id="alter-specifications">Alter Specifications</h2>
<h3 class="anchored_heading" id="table-options">Table Options</h3>
<p>See <a href="/kb/en/create-table/#table-options">CREATE TABLE: Table Options</a> for information about table options.</p>
<h3 class="anchored_heading" id="add-column">ADD COLUMN</h3>
<pre class="highlight fixed"><p>... ADD COLUMN [IF NOT EXISTS]  (col_name <a href="/kb/en/create-table/#column-definitions">column_definition</a>,...)</p></pre><p>Adds a column to the table. The syntax is the same as in <a href="/kb/en/create-table/">CREATE TABLE</a>.
If you are using <code class="highlight fixed" style="white-space:pre-wrap">IF NOT_EXISTS</code> the column will not be added if it was not there already. This is very useful when doing scripts to modify tables.</p>
<p>The <code>FIRST</code> and <code>AFTER</code> clauses affect the physical order of columns in the datafile. Use <code>FIRST</code> to add a column in the first (leftmost) position, or <code>AFTER</code> followed by a column name to add the new column in any other position. Note that, nowadays, the physical position of a column is usually irrelevant.</p>
<p>See also <a href="/kb/en/instant-add-column-for-innodb/">Instant ADD COLUMN for InnoDB</a>.</p>
<h3 class="anchored_heading" id="drop-column">DROP COLUMN</h3>
<pre class="highlight fixed"><p>... DROP COLUMN [IF EXISTS] col_name [CASCADE|RESTRICT]</p></pre><p>Drops the column from the table.
If you are using <code class="highlight fixed" style="white-space:pre-wrap">IF EXISTS</code> you will not get an error if the column didn't exist.
If the column is part of any index, the column will be dropped from them, except if you add a new column with identical name at the same time. The index will be dropped if all columns from the index were dropped.
If the column was used in a view or trigger, you will get an error next time the view or trigger is accessed.
Dropping a column that is part of a multi-column <code class="highlight fixed" style="white-space:pre-wrap">UNIQUE</code> constraint is not permitted. For example:</p>
<pre class="fixed">CREATE TABLE a (
  a int,
  b int,
  primary key (a,b)
);

ALTER TABLE x DROP COLUMN a;
[42000][1072] Key column 'A' doesn't exist in table
</pre><p>The reason is that dropping column <code>a</code> would result in the new constraint that all values in column <code>b</code> be unique. In order to drop the column, an explicit <code>DROP PRIMARY KEY</code> and <code>ADD PRIMARY KEY</code> would be required. Up until <a href="/kb/en/mariadb-1027-release-notes/">MariaDB 10.2.7</a>, the column was dropped and the additional constraint applied, resulting in the following structure:</p>
<pre class="fixed">ALTER TABLE x DROP COLUMN a;
Query OK, 0 rows affected (0.46 sec)

DESC x;
+-------+---------+------+-----+---------+-------+
| Field | Type    | Null | Key | Default | Extra |
+-------+---------+------+-----+---------+-------+
| b     | int(11) | NO   | PRI | NULL    |       |
+-------+---------+------+-----+---------+-------+
</pre><p>MariaDB supports instant DROP COLUMN. DROP COLUMN of an indexed column would imply <a href="/kb/en/drop-index/">DROP INDEX</a> (and in the case of a non-UNIQUE multi-column index, possibly ADD INDEX). These will not be allowed with <a href="#algorithm">ALGORITHM=INSTANT</a>, but unlike prior to <a href="/kb/en/what-is-mariadb-104/">MariaDB 10.4</a>, they can be allowed with <a href="#algorithm">ALGORITHM=NOCOPY</a></p>
<p><code class="highlight fixed" style="white-space:pre-wrap">RESTRICT</code> and <code class="highlight fixed" style="white-space:pre-wrap">CASCADE</code> are allowed to make porting from other database systems easier. In MariaDB, they do nothing.</p>
<h3 class="anchored_heading" id="modify-column">MODIFY COLUMN</h3>
<p>Allows you to modify the type of a column. The column will be at the same place as the original column and all indexes on the column will be kept.  Note that when modifying column, you should specify all attributes for the new column.</p>
<pre class="fixed"><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">t1</span> <span class="p">(</span><span class="n">a</span> <span class="nb">INT</span> <span class="n">UNSIGNED</span> <span class="n">AUTO_INCREMENT</span><span class="p">,</span> <span class="k">PRIMARY</span> <span class="k">KEY</span><span class="p">((</span><span class="n">a</span><span class="p">));</span>
<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">t1</span> <span class="k">MODIFY</span> <span class="n">a</span> <span class="nb">BIGINT</span> <span class="n">UNSIGNED</span> <span class="n">AUTO_INCREMENT</span><span class="p">;</span>
</pre><h3 class="anchored_heading" id="change-column">CHANGE COLUMN</h3>
<p>Works like <code>MODIFY COLUMN</code> except that you can also change the name of the column. The column will be at the same place as the original column and all index on the column will be kept.</p>
<pre class="fixed"><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">t1</span> <span class="p">(</span><span class="n">a</span> <span class="nb">INT</span> <span class="n">UNSIGNED</span> <span class="n">AUTO_INCREMENT</span><span class="p">,</span> <span class="k">PRIMARY</span> <span class="k">KEY</span><span class="p">(</span><span class="n">a</span><span class="p">));</span>
<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">t1</span> <span class="n">CHANGE</span> <span class="n">a</span> <span class="n">b</span> <span class="nb">BIGINT</span> <span class="n">UNSIGNED</span> <span class="n">AUTO_INCREMENT</span><span class="p">;</span>
</pre><h3 class="anchored_heading" id="alter-column">ALTER COLUMN</h3>
<p>This lets you change column options.</p>
<pre class="fixed"><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">t1</span> <span class="p">(</span><span class="n">a</span> <span class="nb">INT</span> <span class="n">UNSIGNED</span> <span class="n">AUTO_INCREMENT</span><span class="p">,</span> <span class="n">b</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">50</span><span class="p">),</span> <span class="k">PRIMARY</span> <span class="k">KEY</span><span class="p">(</span><span class="n">a</span><span class="p">));</span>
<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">t1</span> <span class="k">ALTER</span> <span class="n">b</span> <span class="k">SET</span> <span class="k">DEFAULT</span> <span class="s1">&#39;hello&#39;</span><span class="p">;</span>
</pre><h3 class="anchored_heading" id="rename-indexkey">RENAME INDEX/KEY</h3>
<div class="mariadb_from_10_5_2 mariadb from_10_5_2 product"><h5 class="product_title">MariaDB starting with <a href="/kb/en/mariadb-1052-release-notes/">10.5.2</a></h5><p>From <a href="/kb/en/mariadb-1052-release-notes/">MariaDB 10.5.2</a>, it is possible to rename an index using the <code>RENAME INDEX</code> (or <code>RENAME KEY</code>) syntax, for example:</p>
<pre class="fixed"><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">t1</span> <span class="k">RENAME</span> <span class="k">INDEX</span> <span class="n">i_old</span> <span class="k">TO</span> <span class="n">i_new</span><span class="p">;</span>
</pre></div><h3 class="anchored_heading" id="rename-column">RENAME COLUMN</h3>
<div class="mariadb_from_10_5_2 mariadb from_10_5_2 product"><h5 class="product_title">MariaDB starting with <a href="/kb/en/mariadb-1052-release-notes/">10.5.2</a></h5><p>From <a href="/kb/en/mariadb-1052-release-notes/">MariaDB 10.5.2</a>, it is possible to rename a column using the <code>RENAME COLUMN</code> syntax, for example:</p>
<pre class="fixed"><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">t1</span> <span class="k">RENAME</span> <span class="k">COLUMN</span> <span class="n">c_old</span> <span class="k">TO</span> <span class="n">c_new</span><span class="p">;</span>
</pre></div><h3 class="anchored_heading" id="add-primary-key">ADD PRIMARY KEY</h3>
<p>Add a primary key.</p>
<p>For <code>PRIMARY KEY</code> indexes, you can specify a name for the index, but it is silently ignored, and the name of the index is always <code>PRIMARY</code>.</p>
<p>See <a href="/kb/en/getting-started-with-indexes/#primary-key">Getting Started with Indexes: Primary Key</a> for more information.</p>
<h3 class="anchored_heading" id="drop-primary-key">DROP PRIMARY KEY</h3>
<p>Drop a primary key.</p>
<p>For <code>PRIMARY KEY</code> indexes, you can specify a name for the index, but it is silently ignored, and the name of the index is always <code>PRIMARY</code>.</p>
<p>See <a href="/kb/en/getting-started-with-indexes/#primary-key">Getting Started with Indexes: Primary Key</a> for more information.</p>
<h3 class="anchored_heading" id="add-foreign-key">ADD FOREIGN KEY</h3>
<p>Add a foreign key.</p>
<p>For <code>FOREIGN KEY</code> indexes, a reference definition must be provided.</p>
<p>For <code>FOREIGN KEY</code> indexes, you can specify a name for the constraint, using the <code>CONSTRAINT</code> keyword. That name will be used in error messages.</p>
<p>First, you have to specify the name of the target (parent) table and a column or a column list which must be indexed and whose values must match to the foreign key's values. The <code>MATCH</code> clause is accepted to improve the compatibility with other DBMS's, but has no meaning in MariaDB. The <code>ON DELETE</code> and <code>ON UPDATE</code> clauses specify what must be done when a <code>DELETE</code> (or a <code>REPLACE</code>) statements attempts to delete a referenced row from the parent table, and when an <code>UPDATE</code> statement attempts to modify the referenced foreign key columns in a parent table row, respectively. The following options are allowed:</p>
<ul start="1"><li><code>RESTRICT</code>: The delete/update operation is not performed.  The statement terminates with a 1451 error (SQLSTATE '2300').
</li><li><code>NO ACTION</code>: Synonym for <code>RESTRICT</code>.
</li><li><code>CASCADE</code>: The delete/update operation is performed in both tables.
</li><li><code>SET NULL</code>: The update or delete goes ahead in the parent table, and the corresponding foreign key fields in the child table are set to <code>NULL</code>.  (They must not be defined as <code>NOT NULL</code> for this to succeed).
</li><li><code>SET DEFAULT</code>: This option is implemented only for the legacy PBXT storage engine, which is disabled by default and no longer maintained. It sets the child table's foreign key fields to their <code>DEFAULT</code> values when the referenced parent table key entries are updated or deleted.
</li></ul>
<p>If either clause is omitted, the default behavior for the omitted clause is <code>RESTRICT</code>.</p>
<p>See <a href="/kb/en/foreign-keys/">Foreign Keys</a> for more information.</p>
<h3 class="anchored_heading" id="drop-foreign-key">DROP FOREIGN KEY</h3>
<p>Drop a foreign key.</p>
<p>See <a href="/kb/en/foreign-keys/">Foreign Keys</a> for more information.</p>
<h3 class="anchored_heading" id="add-index">ADD INDEX</h3>
<p>Add a plain index.</p>
<p>Plain indexes are regular indexes that are not unique, and are not acting as a primary key or a foreign key. They are also not the "specialized" <code>FULLTEXT</code> or <code>SPATIAL</code> indexes. For limits on InnoDB indexes, see <a href="InnoDB_Limitations">InnoDB Limitations</a>.</p>
<p>See <a href="/kb/en/getting-started-with-indexes/#plain-indexes">Getting Started with Indexes: Plain Indexes</a> for more information.</p>
<h3 class="anchored_heading" id="drop-index">DROP INDEX</h3>
<p>Drop a plain index.</p>
<p>Plain indexes are regular indexes that are not unique, and are not acting as a primary key or a foreign key. They are also not the "specialized" <code>FULLTEXT</code> or <code>SPATIAL</code> indexes.</p>
<p>See <a href="/kb/en/getting-started-with-indexes/#plain-indexes">Getting Started with Indexes: Plain Indexes</a> for more information.</p>
<h3 class="anchored_heading" id="add-unique-index">ADD UNIQUE INDEX</h3>
<p>Add a unique index.</p>
<p>The <code>UNIQUE</code> keyword means that the index will not accept duplicated values, except for NULLs. An error will raise if you try to insert duplicate values in a UNIQUE index.</p>
<p>For <code>UNIQUE</code> indexes, you can specify a name for the constraint, using the <code>CONSTRAINT</code> keyword. That name will be used in error messages.</p>
<p>See <a href="/kb/en/getting-started-with-indexes/#unique-index">Getting Started with Indexes: Unique Index</a> for more information.</p>
<h3 class="anchored_heading" id="drop-unique-index">DROP UNIQUE INDEX</h3>
<p>Drop a unique index.</p>
<p>The <code>UNIQUE</code> keyword means that the index will not accept duplicated values, except for NULLs. An error will raise if you try to insert duplicate values in a UNIQUE index.</p>
<p>For <code>UNIQUE</code> indexes, you can specify a name for the constraint, using the <code>CONSTRAINT</code> keyword. That name will be used in error messages.</p>
<p>See <a href="/kb/en/getting-started-with-indexes/#unique-index">Getting Started with Indexes: Unique Index</a> for more information.</p>
<h3 class="anchored_heading" id="add-fulltext-index">ADD FULLTEXT INDEX</h3>
<p>Add a <code>FULLTEXT</code> index.</p>
<p>See <a href="/kb/en/full-text-indexes/">Full-Text Indexes</a> for more information.</p>
<h3 class="anchored_heading" id="drop-fulltext-index">DROP FULLTEXT INDEX</h3>
<p>Drop a <code>FULLTEXT</code> index.</p>
<p>See <a href="/kb/en/full-text-indexes/">Full-Text Indexes</a> for more information.</p>
<h3 class="anchored_heading" id="add-spatial-index">ADD SPATIAL INDEX</h3>
<p>Add a SPATIAL index.</p>
<p>See <a href="/kb/en/spatial-index/">SPATIAL INDEX</a> for more information.</p>
<h3 class="anchored_heading" id="drop-spatial-index">DROP SPATIAL INDEX</h3>
<p>Drop a SPATIAL index.</p>
<p>See <a href="/kb/en/spatial-index/">SPATIAL INDEX</a> for more information.</p>
<h3 class="anchored_heading" id="enable-disable-keys">ENABLE/ DISABLE KEYS</h3>
<p><code>DISABLE KEYS</code> will disable all non unique keys for the table for storage engines that support this (at least MyISAM and Aria). This can be used to <a href="/kb/en/how-to-quickly-insert-data-into-mariadb/">speed up inserts</a> into empty tables.</p>
<p><code>ENABLE KEYS</code> will enable all disabled keys.</p>
<h3 class="anchored_heading" id="rename-to">RENAME TO</h3>
<p>Renames the table. See also <a href="/kb/en/rename-table/">RENAME TABLE</a>.</p>
<h3 class="anchored_heading" id="add-constraint">ADD CONSTRAINT</h3>
<p>Modifies the table adding a <a href="/kb/en/constraint/">constraint</a> on a particular column or columns.</p>
<pre class="highlight fixed"><p>ALTER TABLE table_name 
ADD CONSTRAINT [constraint_name] CHECK(expression);</p></pre><p>Before a row is inserted or updated, all constraints are evaluated in the order they are defined.  If any constraint fails, then the row will not be updated.  One can use most deterministic functions in a constraint, including <a href="/kb/en/user-defined-functions/">UDF's</a>.</p>
<pre class="fixed"><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">account_ledger</span> <span class="p">(</span>
	<span class="n">id</span> <span class="nb">INT</span> <span class="k">PRIMARY</span> <span class="k">KEY</span> <span class="n">AUTO_INCREMENT</span><span class="p">,</span>
	<span class="n">transaction_name</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">100</span><span class="p">),</span>
	<span class="n">credit_account</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">100</span><span class="p">),</span>
	<span class="n">credit_amount</span> <span class="nb">INT</span><span class="p">,</span>
	<span class="n">debit_account</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">100</span><span class="p">),</span>
	<span class="n">debit_amount</span> <span class="nb">INT</span><span class="p">);</span>

<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">account_ledger</span> 
<span class="k">ADD</span> <span class="k">CONSTRAINT</span> <span class="n">is_balanced</span> 
    <span class="k">CHECK</span><span class="p">((</span><span class="n">debit_amount</span> <span class="o">+</span> <span class="n">credit_amount</span><span class="p">)</span> <span class="o">=</span> <span class="mi">0</span><span class="p">);</span>
</pre><p>The <code>constraint_name</code> is optional.  If you don't provide one in the <code>ALTER TABLE</code> statement, MariaDB auto-generates a name for you.  This is done so that you can remove it later using <a href="#drop-constraint">DROP CONSTRAINT</a> clause.</p>
<p>You can disable all constraint expression checks by setting the variable <a href="/kb/en/server-system-variables/#check_constraint_checks">check_constraint_checks</a> to <code>OFF</code>.  You may find this useful when loading a table that violates some constraints that you want to later find and fix in SQL.</p>
<p>To view constraints on a table, query <a href="/kb/en/information-schema-table_constraints-table/">information_schema.TABLE_CONSTRAINTS</a>:</p>
<pre class="fixed"><span class="k">SELECT</span> <span class="k">CONSTRAINT_NAME</span><span class="p">,</span> <span class="k">TABLE_NAME</span><span class="p">,</span> <span class="n">CONSTRAINT_TYPE</span> 
<span class="k">FROM</span> <span class="n">information_schema</span><span class="p">.</span><span class="n">TABLE_CONSTRAINTS</span>
<span class="k">WHERE</span> <span class="k">TABLE_NAME</span> <span class="o">=</span> <span class="s1">&#39;account_ledger&#39;</span><span class="p">;</span>

<span class="o">+</span><span class="c1">-----------------+----------------+-----------------+</span>
<span class="o">|</span> <span class="k">CONSTRAINT_NAME</span> <span class="o">|</span> <span class="k">TABLE_NAME</span>     <span class="o">|</span> <span class="n">CONSTRAINT_TYPE</span> <span class="o">|</span>
<span class="o">+</span><span class="c1">-----------------+----------------+-----------------+</span>
<span class="o">|</span> <span class="n">is_balanced</span>     <span class="o">|</span> <span class="n">account_ledger</span> <span class="o">|</span> <span class="k">CHECK</span>           <span class="o">|</span>
<span class="o">+</span><span class="c1">-----------------+----------------+-----------------+</span>
</pre><h3 class="anchored_heading" id="drop-constraint">DROP CONSTRAINT</h3>
<p><code>DROP CONSTRAINT</code> for <code>UNIQUE</code> and <code>FOREIGN KEY</code> <a href="/kb/en/constraint/">constraints</a> was introduced in <a href="/kb/en/mariadb-10222-release-notes/">MariaDB 10.2.22</a> and <a href="/kb/en/mariadb-10313-release-notes/">MariaDB 10.3.13</a>.</p>
<p><code>DROP CONSTRAINT</code> for <code>CHECK</code> constraints was introduced in <a href="/kb/en/mariadb-1021-release-notes/">MariaDB 10.2.1</a></p>
<p>Modifies the table, removing the given constraint.</p>
<pre class="fixed">ALTER TABLE table_name
DROP CONSTRAINT constraint_name;
</pre><p>When you add a constraint to a table, whether through a <a href="/kb/en/create-table/#constraint-expressions">CREATE TABLE</a> or <a href="#add-constraint">ALTER TABLE...ADD CONSTRAINT</a> statement, you can either set a <code>constraint_name</code> yourself, or allow MariaDB to auto-generate one for you.  To view constraints on a table, query <a href="/kb/en/information-schema-table_constraints-table/">information_schema.TABLE_CONSTRAINTS</a>.  For instance,</p>
<pre class="fixed"><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">t</span> <span class="p">(</span>
   <span class="n">a</span> <span class="nb">INT</span><span class="p">,</span>
   <span class="n">b</span> <span class="nb">INT</span><span class="p">,</span>
   <span class="k">c</span> <span class="nb">INT</span><span class="p">,</span>
   <span class="k">CONSTRAINT</span> <span class="k">CHECK</span><span class="p">(</span><span class="n">a</span> <span class="o">&gt;</span> <span class="n">b</span><span class="p">),</span>
   <span class="k">CONSTRAINT</span> <span class="n">check_equals</span> <span class="k">CHECK</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="k">c</span><span class="p">));</span> 

<span class="k">SELECT</span> <span class="k">CONSTRAINT_NAME</span><span class="p">,</span> <span class="k">TABLE_NAME</span><span class="p">,</span> <span class="n">CONSTRAINT_TYPE</span> 
<span class="k">FROM</span> <span class="n">information_schema</span><span class="p">.</span><span class="n">TABLE_CONSTRAINTS</span>
<span class="k">WHERE</span> <span class="k">TABLE_NAME</span> <span class="o">=</span> <span class="s1">&#39;t&#39;</span><span class="p">;</span>

<span class="o">+</span><span class="c1">-----------------+----------------+-----------------+</span>
<span class="o">|</span> <span class="k">CONSTRAINT_NAME</span> <span class="o">|</span> <span class="k">TABLE_NAME</span>     <span class="o">|</span> <span class="n">CONSTRAINT_TYPE</span> <span class="o">|</span>
<span class="o">+</span><span class="c1">-----------------+----------------+-----------------+</span>
<span class="o">|</span> <span class="n">check_equals</span>    <span class="o">|</span> <span class="n">t</span>              <span class="o">|</span> <span class="k">CHECK</span>           <span class="o">|</span>
<span class="o">|</span> <span class="n">CONSTRAINT_1</span>    <span class="o">|</span> <span class="n">t</span>              <span class="o">|</span> <span class="k">CHECK</span>           <span class="o">|</span>
<span class="o">+</span><span class="c1">-----------------+----------------+-----------------+</span>
</pre><p>To remove a constraint from the table, issue an <code>ALTER TABLE...DROP CONSTRAINT</code> statement.  For example,</p>
<pre class="fixed"><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">t</span> <span class="k">DROP</span> <span class="k">CONSTRAINT</span> <span class="n">is_unique</span><span class="p">;</span>
</pre><h3 class="anchored_heading" id="add-system-versioning">ADD SYSTEM VERSIONING</h3>
<p>Add system versioning. See <a href="/kb/en/system-versioned-tables/">System-versioned tables</a>.</p>
<h3 class="anchored_heading" id="drop-system-versioning">DROP SYSTEM VERSIONING</h3>
<p>Drop system versioning. See <a href="/kb/en/system-versioned-tables/">System-versioned tables</a>.</p>
<h3 class="anchored_heading" id="add-period-for">ADD PERIOD FOR</h3>
<p>See <a href="/kb/en/system-versioned-tables/">System-versioned tables</a>, <a href="/kb/en/application-time-periods/">Application-time-period tables</a> or <a href="/kb/en/bitemporal-tables/">Bitemporal Tables</a>.</p>
<h3 class="anchored_heading" id="force">FORCE</h3>
<p><code>ALTER TABLE ... FORCE</code> can force MariaDB to re-build the table.</p>
<p>In <a href="/kb/en/what-is-mariadb-55/">MariaDB 5.5</a> and before, this could only be done by setting the <a href="/kb/en/create-table/#storage-engine">ENGINE</a> table option to its old value. For example, for an InnoDB table, one could execute the following:</p>
<pre class="fixed"><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">tab_name</span> <span class="n">ENGINE</span> <span class="o">=</span> <span class="n">InnoDB</span><span class="p">;</span>
</pre><p>The <code>FORCE</code> option can be used instead. For example, :</p>
<pre class="fixed"><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">tab_name</span> <span class="k">FORCE</span><span class="p">;</span>
</pre><p>With InnoDB, the table rebuild will only reclaim unused space (i.e. the space previously used for deleted rows) if the <a href="/kb/en/innodb-system-variables/#innodb_file_per_table">innodb_file_per_table</a> system variable is set to <code>ON</code> (the default). If the system variable is <code>OFF</code>, then the space will not be reclaimed, but it will be-re-used for new data that's later added.</p>
<p>The rebuild may fail if conditions are violated due to a change in the <a href="/kb/en/sql_mode/">sql_mode</a>. For example:</p>
<pre class="fixed"><span class="k">CREATE</span> <span class="k">OR</span> <span class="k">REPLACE</span> <span class="k">TABLE</span> <span class="n">x</span> <span class="p">(</span><span class="n">d</span> <span class="nb">DATE</span> <span class="k">DEFAULT</span> <span class="s1">&#39;0000-00-00&#39;</span><span class="p">);</span>

<span class="k">SET</span> <span class="n">SQL_MODE</span><span class="o">=</span><span class="s1">&#39;NO_ZERO_DATE&#39;</span><span class="p">;</span>

<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">x</span> <span class="k">FORCE</span><span class="p">;</span>
<span class="n">ERROR</span> <span class="mi">1067</span> <span class="p">(</span><span class="mi">42000</span><span class="p">):</span> <span class="n">Invalid</span> <span class="k">default</span> <span class="n">value</span> <span class="k">for</span> <span class="s1">&#39;d&#39;</span>
</pre><h3 class="anchored_heading" id="partitions">Partitions</h3>
<h4 class="anchored_heading" id="add-partition">ADD PARTITION</h4>
<p>See <a href="/kb/en/partitioning-overview/#adding-partitions">Partitioning Overview: Adding Partitions</a> for details.</p>
<h4 class="anchored_heading" id="analyze-partition">ANALYZE PARTITION</h4>
<p>See <a href="/kb/en/partitioning-overview/#analyzing-partitions">Partitioning Overview: Analyzing Partitions</a> for details.</p>
<h4 class="anchored_heading" id="check-partition">CHECK PARTITION</h4>
<p>See <a href="/kb/en/partitioning-overview/#checking-partitions">Partitioning Overview: Checking Partitions</a> for details.</p>
<h4 class="anchored_heading" id="coalesce-partition">COALESCE PARTITION</h4>
<p>Reduces the number of HASH or KEY partitions in a table. See <a href="/kb/en/partitioning-overview/#coalescing-partitions">Partitioning Overview: Coalescing Partitions</a>.</p>
<h4 class="anchored_heading" id="convert-partition-table">CONVERT PARTITION / TABLE</h4>
<p><code>CONVERT PARTITION</code> and <code>CONVERT TABLE</code> were introduced in <a href="/kb/en/mariadb-1071-release-notes/">MariaDB 10.7.1</a>.</p>
<p><code>CONVERT PARTITION</code> can be used to remove a partition from a table and make this an ordinary table. For example:</p>
<pre class="fixed"><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">partitioned_table</span> <span class="k">CONVERT</span> <span class="n">PARTITION</span> <span class="n">part1</span> <span class="k">TO</span> <span class="k">TABLE</span> <span class="n">normal_table</span><span class="p">;</span>
</pre><p><code>CONVERT TABLE</code> will take an existing table and move this to another table as its own partition with a specified <a href="/kb/en/create-table/#partitions">partition definition</a>. For example the following moves <code>normal_table</code> to a partition of <code>partitioned_table</code> with a definition that its values, based on the <code>PARTITION BY</code> of the <code>partitioned_table</code>, are less than 12345.</p>
<pre class="fixed"><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">partitioned_table</span> <span class="k">CONVERT</span> <span class="k">TABLE</span> <span class="n">normal_table</span> 
  <span class="k">TO</span> <span class="n">PARTITION</span> <span class="n">part1</span> <span class="k">VALUES</span> <span class="k">LESS</span> <span class="k">THAN</span> <span class="p">(</span><span class="mi">12345</span><span class="p">);</span>
</pre><p>From <a href="/kb/en/what-is-mariadb-114/">MariaDB 11.4</a>, the optional <code>[{WITH | WITHOUT} VALIDATION]</code> is permitted.</p>
<p>See <a href="/kb/en/partitioning-overview/#converting-partitions-tofrom-tables">Partitioning Overview: Converting Partitions to/from Tables</a> for more details.</p>
<p>See also <a href="https://mariadb.org/10-7-preview-feature-convert-partition/">10.7 preview feature: CONVERT PARTITION</a> (mariadb.org blog post)</p>
<h4 class="anchored_heading" id="drop-partition">DROP PARTITION</h4>
<p>Used to drop specific partitions (and discard all data within the specified partitions) for <a href="/kb/en/range-partitioning-type/">RANGE</a> and <a href="/kb/en/list-partitioning-type/">LIST</a> partitions. See <a href="/kb/en/partitioning-overview/#dropping-partitions">Partitioning Overview: Dropping Partitions</a>.</p>
<h4 class="anchored_heading" id="exchange-partition">EXCHANGE PARTITION</h4>
<p>This is used to exchange the contents of a partition with another table. This is performed by swapping the tablespaces of the partition with the other table.</p>
<p>From <a href="/kb/en/what-is-mariadb-114/">MariaDB 11.4</a>, the optional <code>[{WITH | WITHOUT} VALIDATION]</code> is permitted.</p>
<p>See <a href="/kb/en/partitioning-overview/#exchanging-partitions">Partitioning Overview: Exchanging Partitions</a> for more details.</p>
<p>See also <a href="/kb/en/innodb-file-per-table-tablespaces/#copying-transportable-tablespaces">copying InnoDB's transportable tablespaces</a>.</p>
<h4 class="anchored_heading" id="optimize-partition">OPTIMIZE PARTITION</h4>
<p>See <a href="/kb/en/partitioning-overview/#optimizing-partitions">Partitioning Overview: Optimizing Partitions</a> for details.</p>
<h4 class="anchored_heading" id="remove-partitioning">REMOVE PARTITIONING</h4>
<p>See <a href="/kb/en/partitioning-overview/#removing-partitioning">Partitioning Overview: Removing Partitioning</a>.</p>
<h4 class="anchored_heading" id="reorganize-partition">REORGANIZE PARTITION</h4>
<p>See <a href="/kb/en/partitioning-overview/#reorganizing-partitions">Partitioning Overview: Reorganizing Partitions</a>.</p>
<h4 class="anchored_heading" id="truncate-partition">TRUNCATE PARTITION</h4>
<p>See <a href="/kb/en/partitioning-overview/#truncating-partitions">Partitioning Overview: Truncating Partitions</a>.</p>
<h3 class="anchored_heading" id="discard-tablespace">DISCARD TABLESPACE</h3>
<p>This is used to discard an InnoDB table's tablespace.</p>
<p>See <a href="/kb/en/innodb-file-per-table-tablespaces/#copying-transportable-tablespaces">copying InnoDB's transportable tablespaces</a> for more information.</p>
<h3 class="anchored_heading" id="import-tablespace">IMPORT TABLESPACE</h3>
<p>This is used to import an InnoDB table's tablespace. The tablespace should have been copied from its original server after executing <a href="/kb/en/flush-tables-for-export/">FLUSH TABLES FOR EXPORT</a>.</p>
<p>See <a href="/kb/en/innodb-file-per-table-tablespaces/#copying-transportable-tablespaces">copying InnoDB's transportable tablespaces</a> for more information.</p>
<p><code>ALTER TABLE ... IMPORT</code> only applies to InnoDB tables. Most other popular storage engines, such as Aria and MyISAM, will recognize their data files as soon as they've been placed in the proper directory under the datadir, and no special DDL is required to import them.</p>
<h3 class="anchored_heading" id="algorithm">ALGORITHM</h3>
<p>The <code>ALTER TABLE</code> statement supports the <code>ALGORITHM</code> clause. This clause is one of the clauses that is used to implement online DDL. <code>ALTER TABLE</code> supports several different algorithms. An algorithm can be explicitly chosen for an <code>ALTER TABLE</code> operation by setting the <code>ALGORITHM</code> clause. The supported values are:</p>
<ul start="1"><li><code>ALGORITHM=DEFAULT</code> - This implies the default behavior for the specific statement, such as if no <code>ALGORITHM</code> clause is specified.
</li><li><code>ALGORITHM=COPY</code>
</li><li><code>ALGORITHM=INPLACE</code>
</li><li><code>ALGORITHM=NOCOPY</code> - This was added in <a href="/kb/en/mariadb-1037-release-notes/">MariaDB 10.3.7</a>.
</li><li><code>ALGORITHM=INSTANT</code> - This was added in <a href="/kb/en/mariadb-1037-release-notes/">MariaDB 10.3.7</a>.
</li></ul>
<p>See <a href="/kb/en/innodb-online-ddl-overview/#algorithm">InnoDB Online DDL Overview: ALGORITHM</a> for information on how the <code>ALGORITHM</code> clause affects InnoDB.</p>
<h4 class="anchored_heading" id="algorithmdefault">ALGORITHM=DEFAULT</h4>
<p>The default behavior, which occurs if <code>ALGORITHM=DEFAULT</code> is specified, or if <code>ALGORITHM</code> is not specified at all, usually only makes a copy if the operation doesn't support being done in-place at all. In this case, the most efficient available algorithm will usually be used.</p>
<p>However, in <a href="/kb/en/mariadb-1036-release-notes/">MariaDB 10.3.6</a> and before, if the value of the <a href="/kb/en/server-system-variables/#old_alter_table">old_alter_table</a> system variable is set to <code>ON</code>, then the default behavior is to perform <code>ALTER TABLE</code> operations by making a copy of the table using the old algorithm.</p>
<p>In <a href="/kb/en/mariadb-1037-release-notes/">MariaDB 10.3.7</a> and later, the <a href="/kb/en/server-system-variables/#old_alter_table">old_alter_table</a> system variable is deprecated. Instead, the <a href="/kb/en/server-system-variables/#alter_algorithm">alter_algorithm</a> system variable defines the default algorithm for <code>ALTER TABLE</code> operations. This was removed in <a href="/kb/en/what-is-mariadb-115/">MariaDB 11.5</a> for the following reasons:</p>
<ul start="1"><li>alter_algorithm was introduced as a replacement for the old_alter_table that was used to force the usage of the original alter table algorithm (copy) in cases where the new alter algorithm did not work. The new option was added as a way to force the usage of a specific algorithm when it should instead have made it possible to disable algorithms that would not work for some reason.
</li><li>alter_algorithm introduced some cases where ALTER TABLE would not work without specifying the ALGORITHM=XXX option together with ALTER TABLE.
</li><li>Having different values of alter_algorithm on the primary and replica could cause replicas to stop unexpectedly.
</li><li>ALTER TABLE FORCE, as used by mariadb-upgrade, would not always work if alter_algorithm was set for the server.
</li><li>As part of <a href="https://jira.mariadb.org/browse/MDEV-33449">MDEV-33449</a> "improving repair of tables" it became clear that alter-algorithm made it harder to provide a better and more consistent ALTER TABLE FORCE and REPAIR TABLE, and it would be better to remove it.
</li></ul>
<h4 class="anchored_heading" id="algorithmcopy">ALGORITHM=COPY</h4>
<p><code>ALGORITHM=COPY</code> is the name for the original <a href="/kb/en/alter-table/">ALTER TABLE</a> algorithm from early MariaDB versions.</p>
<p>When <code>ALGORITHM=COPY</code> is set, MariaDB essentially does the following operations:</p>
<pre class="fixed"><span class="c1">-- Create a temporary table with the new definition</span>
<span class="k">CREATE</span> <span class="k">TEMPORARY</span> <span class="k">TABLE</span> <span class="n">tmp_tab</span> <span class="p">(</span>
<span class="p">...</span>
<span class="p">);</span>

<span class="c1">-- Copy the data from the original table</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">tmp_tab</span>
   <span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">original_tab</span><span class="p">;</span>

<span class="c1">-- Drop the original table</span>
<span class="k">DROP</span> <span class="k">TABLE</span> <span class="n">original_tab</span><span class="p">;</span>

<span class="c1">-- Rename the temporary table, so that it replaces the original one</span>
<span class="k">RENAME</span> <span class="k">TABLE</span> <span class="n">tmp_tab</span> <span class="k">TO</span> <span class="n">original_tab</span><span class="p">;</span>
</pre><p>This algorithm is very inefficient, but it is generic, so it works for all storage engines.</p>
<p>If <code>ALGORITHM=COPY</code> is specified, then the copy algorithm will be used even if it is not necessary. This can result in a lengthy table copy. If multiple <a href="/kb/en/alter-table/">ALTER TABLE</a> operations are required that each require the table to be rebuilt, then it is best to specify all operations in a single <a href="/kb/en/alter-table/">ALTER TABLE</a> statement, so that the table is only rebuilt once.</p>
<p>From <a href="/kb/en/what-is-mariadb-112/">MariaDB 11.2</a>, ALTER TABLE can now do most operations with ALGORITHM=COPY, LOCK=NONE. See <a href="#none">LOCK=NONE</a>.</p>
<h4 class="anchored_heading" id="algorithminplace">ALGORITHM=INPLACE</h4>
<p><code>ALGORITHM=COPY</code> can be incredibly slow, because the whole table has to be copied and rebuilt. <code>ALGORITHM=INPLACE</code> was introduced as a way to avoid this by performing operations in-place and avoiding the table copy and rebuild, when possible.</p>
<p>When <code>ALGORITHM=INPLACE</code> is set, the underlying storage engine uses optimizations to perform the operation while avoiding the table copy and rebuild. However, <code>INPLACE</code> is a bit of a misnomer, since some operations may still require the table to be rebuilt for some storage engines. Regardless, several operations can be performed without a full copy of the table for some storage engines.</p>
<p>A more accurate name would have been <code>ALGORITHM=ENGINE</code>, where <code>ENGINE</code> refers to an "engine-specific" algorithm.</p>
<p>If an <a href="/kb/en/alter-table/">ALTER TABLE</a> operation supports <code>ALGORITHM=INPLACE</code>, then it can be performed using optimizations by the underlying storage engine, but it may rebuilt.</p>
<p>See <a href="/kb/en/innodb-online-ddl-operations-with-the-inplace-alter-algorithm/">InnoDB Online DDL Operations with ALGORITHM=INPLACE</a> for more.</p>
<h4 class="anchored_heading" id="algorithmnocopy">ALGORITHM=NOCOPY</h4>
<p><code>ALGORITHM=NOCOPY</code> was introduced in <a href="/kb/en/mariadb-1037-release-notes/">MariaDB 10.3.7</a>.</p>
<p><code>ALGORITHM=INPLACE</code> can sometimes be surprisingly slow in instances where it has to rebuild the clustered index, because when the clustered index has to be rebuilt, the whole table has to be rebuilt. <code>ALGORITHM=NOCOPY</code> was introduced as a way to avoid this. </p>
<p>If an <code>ALTER TABLE</code> operation supports <code>ALGORITHM=NOCOPY</code>, then it can be performed without rebuilding the clustered index.</p>
<p>If <code>ALGORITHM=NOCOPY</code> is specified for an <code>ALTER TABLE</code> operation that does not support <code>ALGORITHM=NOCOPY</code>, then an error will be raised. In this case, raising an error is preferable, if the alternative is for the operation to rebuild the clustered index, and perform unexpectedly slowly.</p>
<p>See <a href="/kb/en/innodb-online-ddl-operations-with-algorithmnocopy/">InnoDB Online DDL Operations with ALGORITHM=NOCOPY</a> for more.</p>
<h4 class="anchored_heading" id="algorithminstant">ALGORITHM=INSTANT</h4>
<p><code>ALGORITHM=INSTANT</code> was introduced in <a href="/kb/en/mariadb-1037-release-notes/">MariaDB 10.3.7</a>.</p>
<p><code>ALGORITHM=INPLACE</code> can sometimes be surprisingly slow in instances where it has to modify data files. <code>ALGORITHM=INSTANT</code> was introduced as a way to avoid this.</p>
<p>If an <code>ALTER TABLE</code> operation supports <code>ALGORITHM=INSTANT</code>, then it can be performed without modifying any data files.</p>
<p>If <code>ALGORITHM=INSTANT</code> is specified for an <code>ALTER TABLE</code> operation that does not support <code>ALGORITHM=INSTANT</code>, then an error will be raised. In this case, raising an error is preferable, if the alternative is for the operation to modify data files, and perform unexpectedly slowly.</p>
<p>See <a href="/kb/en/innodb-online-ddl-operations-with-algorithminstant/">InnoDB Online DDL Operations with ALGORITHM=INSTANT</a> for more.</p>
<h3 class="anchored_heading" id="lock">LOCK</h3>
<p>The <code>ALTER TABLE</code> statement supports the <code>LOCK</code> clause. This clause is one of the clauses that is used to implement online DDL. <code>ALTER TABLE</code> supports several different locking strategies. A locking strategy can be explicitly chosen for an <code>ALTER TABLE</code> operation by setting the <code>LOCK</code> clause. The supported values are:</p>
<h4 class="anchored_heading" id="default">DEFAULT</h4>
<p>Acquire the least restrictive lock on the table that is supported for the specific operation. Permit the maximum amount of concurrency that is supported for the specific operation.</p>
<h4 class="anchored_heading" id="none">NONE</h4>
<p>Acquire no lock on the table. Permit <strong>all</strong> concurrent DML. If this locking strategy is not permitted for an operation, then an error is raised. From <a href="/kb/en/what-is-mariadb-112/">MariaDB 11.2</a>, <code>ALTER TABLE</code> can do most operations with <code>ALGORITHM=COPY, LOCK=NONE</code>, that is, in most cases, unless the algorithm and lock level are explicitly specified, <code>ALTER TABLE</code> will be performed using the <code>COPY</code> algorithm while simultaneously allowing concurrent DML statements on the altered table. If this is not desired, one can explicitly specify a different lock level or set old_mode to <a href="/kb/en/old-mode/#lock_alter_table_copy">LOCK_ALTER_TABLE_COPY</a> that will make <code>ALGORITHM=COPY</code> use  <code>LOCK=SHARED</code> by default (but still allowing <code>LOCK=NONE</code> to be specified explicitly).</p>
<h4 class="anchored_heading" id="shared">SHARED</h4>
<p>Acquire a read lock on the table. Permit <strong>read-only</strong> concurrent DML. If this locking strategy is not permitted for an operation, then an error is raised.</p>
<h4 class="anchored_heading" id="exclusive">EXCLUSIVE</h4>
<p>Acquire a write lock on the table. Do <strong>not</strong> permit concurrent DML.</p>
<p>Different storage engines support different locking strategies for different operations. If a specific locking strategy is chosen for an <code>ALTER TABLE</code> operation, and that table's storage engine does not support that locking strategy for that specific operation, then an error will be raised.</p>
<p>If the <code>LOCK</code> clause is not explicitly set, then the operation uses <code>LOCK=DEFAULT</code>.</p>
<p><a href="alter-online-table">ALTER ONLINE TABLE</a> is equivalent to <code>LOCK=NONE</code>. Therefore, the <a href="alter-online-table">ALTER ONLINE TABLE</a> statement can be used to ensure that your <code>ALTER TABLE</code> operation allows all concurrent DML.</p>
<p>See <a href="/kb/en/innodb-online-ddl-overview/#lock">InnoDB Online DDL Overview: LOCK</a> for information on how the <code>LOCK</code> clause affects InnoDB.</p>
<h3 class="anchored_heading" id="index-options">Index Options</h3>
<p>See <a href="/kb/en/create-table/#index-options">CREATE TABLE</a> page for meaning of the index options.</p>
<h2 class="anchored_heading" id="progress-reporting">Progress Reporting</h2>
<p>MariaDB provides progress reporting for <code>ALTER TABLE</code> statement for clients
that support the new progress reporting protocol. For example, if you were using the <a href="/kb/en/mariadb-command-line-client/">mariadb</a> client, then the progress report might look like this::</p>
<pre class="fixed">ALTER TABLE test ENGINE=Aria;
Stage: 1 of 2 'copy to tmp table'    46% of stage
</pre><p>The progress report is also shown in the output of the <a href="/kb/en/show-processlist/">SHOW PROCESSLIST</a> statement and in the contents of the <a href="/kb/en/information-schema-processlist-table/">information_schema.PROCESSLIST</a> table.</p>
<p>See <a href="/kb/en/progress-reporting/">Progress Reporting</a> for more information.</p>
<h2 class="anchored_heading" id="aborting-alter-table-operations">Aborting ALTER TABLE Operations</h2>
<p>If an <code>ALTER TABLE</code> operation is being performed and the connection is killed, the changes will be rolled back in a controlled manner. The rollback can be a slow operation as the time it takes is relative to how far the operation has progressed.</p>
<p>Aborting <code>ALTER TABLE ... ALGORITHM=COPY</code>  was made faster in <a href="/kb/en/mariadb-10213-release-notes/">MariaDB 10.2.13</a> by removing excessive undo logging (<a href="https://jira.mariadb.org/browse/MDEV-11415">MDEV-11415</a>). This significantly shortened the time it takes to abort a running ALTER TABLE operation, compared with earlier releases.</p>
<h2 class="anchored_heading" id="atomic-alter-table">Atomic ALTER TABLE</h2>
<div class="mariadb_from_10_6_1 mariadb from_10_6_1 product"><h5 class="product_title">MariaDB starting with <a href="/kb/en/mariadb-1061-release-notes/">10.6.1</a></h5><p>From <a href="/kb/en/what-is-mariadb-106/">MariaDB 10.6</a>, <code>ALTER TABLE</code> is atomic for most engines, including InnoDB, MyRocks, MyISAM and  Aria (<a href="https://jira.mariadb.org/browse/MDEV-25180">MDEV-25180</a>).
This means that if there is a crash (server down or power outage) during an <code>ALTER TABLE</code> operation, after
recovery, either the old table and associated triggers and status will be intact, or the new table will be active.</p>
<p>In older MariaDB versions one could get leftover #sql-alter..', '#sql-backup..' or 'table_name.frm˝' files if the system crashed during the <code>ALTER TABLE</code> operation.</p>
<p>See <a href="/kb/en/atomic-ddl/">Atomic DDL</a> for more information.</p>
</div><h2 class="anchored_heading" id="replication">Replication</h2>
<div class="mariadb_from_10_8_1 mariadb from_10_8_1 product"><h5 class="product_title">MariaDB starting with <a href="/kb/en/mariadb-1081-release-notes/">10.8.1</a></h5><p>Before <a href="/kb/en/mariadb-1081-release-notes/">MariaDB 10.8.1</a>, ALTER TABLE got fully executed on the primary first, and only then was it replicated and started executing on replicas. From <a href="/kb/en/mariadb-1081-release-notes/">MariaDB 10.8.1</a>, ALTER TABLE gains <a href="/kb/en/replication-and-binary-log-system-variables/#binlog_alter_two_phase">an option</a> to replicate sooner and begin executing on replicas when it merely <em>starts</em> executing on the primary, not when it <em>finishes</em>. This way the replication lag caused by a heavy ALTER TABLE can be completely eliminated (<a href="https://jira.mariadb.org/browse/MDEV-11675">MDEV-11675</a>). </p>
</div><h2 class="anchored_heading" id="examples">Examples</h2>
<p>Adding a new column:</p>
<pre class="fixed"><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">t1</span> <span class="k">ADD</span> <span class="n">x</span> <span class="nb">INT</span><span class="p">;</span>
</pre><p>Dropping a column:</p>
<pre class="fixed"><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">t1</span> <span class="k">DROP</span> <span class="n">x</span><span class="p">;</span>
</pre><p>Modifying the type of a column:</p>
<pre class="fixed"><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">t1</span> <span class="k">MODIFY</span> <span class="n">x</span> <span class="nb">bigint</span> <span class="n">unsigned</span><span class="p">;</span>
</pre><p>Changing the name and type of a column:</p>
<pre class="fixed"><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">t1</span> <span class="n">CHANGE</span> <span class="n">a</span> <span class="n">b</span> <span class="nb">bigint</span> <span class="n">unsigned</span> <span class="n">auto_increment</span><span class="p">;</span>
</pre><p>Combining multiple clauses in a single ALTER TABLE statement, separated by commas:</p>
<pre class="fixed"><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">t1</span> <span class="k">DROP</span> <span class="n">x</span><span class="p">,</span> <span class="k">ADD</span> <span class="n">x2</span> <span class="nb">INT</span><span class="p">,</span>  <span class="n">CHANGE</span> <span class="n">y</span> <span class="n">y2</span> <span class="nb">INT</span><span class="p">;</span>
</pre><p>Changing the storage engine and adding a comment:</p>
<pre class="fixed"><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">t1</span> 
  <span class="n">ENGINE</span> <span class="o">=</span> <span class="n">InnoDB</span> 
  <span class="k">COMMENT</span> <span class="o">=</span> <span class="s1">&#39;First of three tables containing usage info&#39;</span><span class="p">;</span>
</pre><p>Rebuilding the table (the previous example will also rebuild the table if it was already InnoDB):</p>
<pre class="fixed"><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">t1</span> <span class="k">FORCE</span><span class="p">;</span>
</pre><p>Dropping an index:</p>
<pre class="fixed"><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">rooms</span> <span class="k">DROP</span> <span class="k">INDEX</span> <span class="n">u</span><span class="p">;</span>
</pre><p>Adding a unique index:</p>
<pre class="fixed"><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">rooms</span> <span class="k">ADD</span> <span class="k">UNIQUE</span> <span class="k">INDEX</span> <span class="n">u</span><span class="p">(</span><span class="n">room_number</span><span class="p">);</span>
</pre><p>From <a href="/kb/en/mariadb-1053-release-notes/">MariaDB 10.5.3</a>, adding a primary key for an <a href="/kb/en/application-time-periods/">application-time period table</a> with a <a href="/kb/en/application-time-periods/#without-overlaps">WITHOUT OVERLAPS</a> constraint:</p>
<pre class="fixed"><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">rooms</span> <span class="k">ADD</span> <span class="k">PRIMARY</span> <span class="k">KEY</span><span class="p">(</span><span class="n">room_number</span><span class="p">,</span> <span class="n">p</span> <span class="k">WITHOUT</span> <span class="k">OVERLAPS</span><span class="p">);</span>
</pre><p>From <a href="/kb/en/mariadb-1081-release-notes/">MariaDB 10.8.1</a>, ALTER query can be replicated faster with the setting of</p>
<pre class="fixed"><span class="k">SET</span> <span class="o">@@</span><span class="k">SESSION</span><span class="p">.</span><span class="n">binlog_alter_two_phase</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span>
</pre><p>prior the ALTER query. Binlog would contain two event groups</p>
<pre class="fixed"><span class="o">|</span> <span class="n">master</span><span class="o">-</span><span class="n">bin</span><span class="p">.</span><span class="mi">000001</span> <span class="o">|</span> <span class="mi">495</span> <span class="o">|</span> <span class="n">Gtid</span>              <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>         <span class="mi">537</span> <span class="o">|</span> <span class="n">GTID</span> <span class="mi">0</span><span class="o">-</span><span class="mi">1</span><span class="o">-</span><span class="mi">2</span> <span class="k">START</span> <span class="k">ALTER</span>                                        <span class="o">|</span>
<span class="o">|</span> <span class="n">master</span><span class="o">-</span><span class="n">bin</span><span class="p">.</span><span class="mi">000001</span> <span class="o">|</span> <span class="mi">537</span> <span class="o">|</span> <span class="n">Query</span>             <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>         <span class="mi">655</span> <span class="o">|</span> <span class="n">use</span> <span class="o">`</span><span class="n">test</span><span class="o">`</span><span class="p">;</span> <span class="k">alter</span> <span class="k">table</span> <span class="n">t</span> <span class="k">add</span> <span class="k">column</span> <span class="n">b</span> <span class="nb">int</span><span class="p">,</span> <span class="n">algorithm</span><span class="o">=</span><span class="n">inplace</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">master</span><span class="o">-</span><span class="n">bin</span><span class="p">.</span><span class="mi">000001</span> <span class="o">|</span> <span class="mi">655</span> <span class="o">|</span> <span class="n">Gtid</span>              <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>         <span class="mi">700</span> <span class="o">|</span> <span class="n">GTID</span> <span class="mi">0</span><span class="o">-</span><span class="mi">1</span><span class="o">-</span><span class="mi">3</span> <span class="k">COMMIT</span> <span class="k">ALTER</span> <span class="n">id</span><span class="o">=</span><span class="mi">2</span>                                  <span class="o">|</span>
<span class="o">|</span> <span class="n">master</span><span class="o">-</span><span class="n">bin</span><span class="p">.</span><span class="mi">000001</span> <span class="o">|</span> <span class="mi">700</span> <span class="o">|</span> <span class="n">Query</span>             <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>         <span class="mi">835</span> <span class="o">|</span> <span class="n">use</span> <span class="o">`</span><span class="n">test</span><span class="o">`</span><span class="p">;</span> <span class="k">alter</span> <span class="k">table</span> <span class="n">t</span> <span class="k">add</span> <span class="k">column</span> <span class="n">b</span> <span class="nb">int</span><span class="p">,</span> <span class="n">algorithm</span><span class="o">=</span><span class="n">inplace</span> <span class="o">|</span>
</pre><p>of which the first one gets delivered to replicas before ALTER is taken to actual execution on the primary. </p>
<h2 class="anchored_heading" id="see-also">See Also</h2>
<ul start="1"><li><a href="/kb/en/create-table/">CREATE TABLE</a>
</li><li><a href="/kb/en/drop-table/">DROP TABLE</a>
</li><li><a href="/kb/en/character-sets-and-collations/">Character Sets and Collations</a>
</li><li><a href="/kb/en/show-create-table/">SHOW CREATE TABLE</a>
</li><li><a href="/kb/en/instant-add-column-for-innodb/">Instant ADD COLUMN for InnoDB</a></li></ul>

    </div>


        
            <div id="subscribe" class="well well-small hide hidden-print"
                 data-subscribe-url="/kb/en/alter-table/+subscriptions/add"
                 data-unsubscribe-url="/kb/en/alter-table/+subscriptions/remove">
            </div>
        

        
        
    
        <div class="simple_section_nav">
            <ul class="nav nav-pills">
                
                
                    <li><a href="/kb/en/alter/">
                        ↑ ALTER ↑
                    </a>
                    </li>
                
                
                    <li class="pull-right"><a href="/kb/en/alter-database/">
                        ALTER DATABASE →
                    </a>
                    </li>
                
            </ul>
        </div>
    

        

        
        <h2>Comments</h2>
        
    
    <div id="comments" data-node-id="250" data-comments-url="/kb/en/alter-table/+comments"
         data-reply-url="/kb/en/alter-table/comments/post/">
        Comments loading...
    </div>

        

    </div>


                    <div id="content_disclaimer" class="graybox">
                        Content reproduced on this site is the property of its respective owners,
                        and this content is not reviewed in advance by MariaDB. The views, information and opinions
                        expressed by this content do not necessarily represent those of MariaDB or any other party.
                    </div>
                </div>
            </section>

            
                <div id="right_bar" class="col-md-2">
                    
    
        
        <ul class="section_navigation well well-small hidden-xs hidden-sm">
            
                <li class="parent"><a href="/kb/en/alter/">
                    ↑ ALTER ↑
                </a>
                </li>
            
            
                
                    <li class="active">
                        <span>ALTER TABLE</span>
                        
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/alter-database/">
                            
                            ALTER DATABASE
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/alter-event/">
                            <span class="pull-right not_primary"></span>
                            ALTER EVENT
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/alter-function/">
                            
                            ALTER FUNCTION
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/alter-logfile-group/">
                            
                            ALTER LOGFILE GROUP
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/alter-procedure/">
                            <span class="pull-right not_primary"></span>
                            ALTER PROCEDURE
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/alter-sequence/">
                            <span class="pull-right not_primary"></span>
                            ALTER SEQUENCE
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/alter-server/">
                            
                            ALTER SERVER
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/alter-tablespace/">
                            
                            ALTER TABLESPACE
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/alter-user/">
                            <span class="pull-right not_primary"></span>
                            ALTER USER
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/alter-view/">
                            <span class="pull-right not_primary"></span>
                            ALTER VIEW
                        </a>
                    </li>
                
            
        </ul>
    
    

                </div>
            
        </div>
    </div>
</div>

<!-- Footer -->
<footer id="footer">
    <div class="footer">
        <div class="container">
            <div class="row">
                <div class="col-xs-12">
                    <ul class="list-inline text-center footer-nav">
                        <li>
                            <h5>
                                <a href="https://mariadb.com/products" title="Products">Products</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/services" title="Services">Services</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/pricing" title="Pricing">Pricing</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/resources" title="Resources">Resources</a>
                            </h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/about-us" title="About MariaDB">About Us</a></h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/download" title="Download">Download MariaDB</a></h5>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="row row-10">
                
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div id="block-footerformcontact" class="block block-block-content block-block-contentd754ee1b-3cc9-40e7-9ef4-f504f1197fb1">
                        
                            <h5 style="font-weight: 400;">Subscribe to our newsletter!</h5>
                            <script src="//app-sj15.marketo.com/js/forms2/js/forms2.min.js"></script><form id="mktoForm_1498"></form>
                            <script>
                                <!--//--><![CDATA[// ><!--
                                MktoForms2.loadForm("//app-sj15.marketo.com", "573-PXI-984", 1498);
                                //--><!]]]]><![CDATA[>
                                //--><!]]>
                            </script>
                        
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div class="footer-copyright">
                        <div class="text-center">
                            <ul class="list-inline no-margin">
                                <li>
                                    <a href="/legal" title="Legal">Legal</a>
                                </li>
                                <li>
                                    <a href="/privacy-policy" title="Privacy Policy">Privacy Policy</a>
                                </li>
                                <li>
                                    <a href="/cookie-policy/" title="Cookies">Cookie Policy</a>
                                </li>
                            </ul>
                            <p>Copyright &copy; 2024 MariaDB. All rights reserved.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
</footer>
</div>

<div id="ajax_loading">
    <img src="/kb/static/images/ajax-loader.a51c5608d01a.gif" />
</div>

    <!-- Google Tag Manager -->
    <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-MK2847"
                      height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
            '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MK2847');</script>
    <!-- End Google Tag Manager -->

</body>

<script type="text/javascript" src="/kb/static/js/main.1587e3a666fc.js" charset="utf-8"></script>

</html>