<?xml version="1.0" encoding="utf-8"?>
<rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title>MariaDB Knowledge Base Comments for: Why is ORDER BY in a FROM Subquery Ignored?</title><link>https://mariadb.com/kb/en/why-is-order-by-in-a-from-subquery-ignored/+comments/feed/</link><description></description><atom:link href="https://mariadb.com/kb/en/why-is-order-by-in-a-from-subquery-ignored/+comments/feed/" rel="self"></atom:link><language>en-us</language><lastBuildDate>Mon, 14 Oct 2024 08:59:51 +0000</lastBuildDate><item><title>Re: Why is ORDER BY in a FROM Subquery Ignored?</title><link>https://mariadb.com/kb/en/why-is-order-by-in-a-from-subquery-ignored/+comments/4890</link><description>&lt;p&gt;The LIMIT clause will not have any performance hit as the extra 'limit' row counting is neglectable compared to doing the full ORDER BY.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Michael Widenius</dc:creator><guid>https://mariadb.com/kb/en/why-is-order-by-in-a-from-subquery-ignored/+comments/4890</guid></item><item><title>Re: Why is ORDER BY in a FROM Subquery Ignored?</title><link>https://mariadb.com/kb/en/why-is-order-by-in-a-from-subquery-ignored/+comments/4889</link><description>&lt;p&gt;An effect of some of the GROUP BY algorithms (sorting and collecting rows) will create a table where the rows happens to be in order.
It's however not guaranteed according to the SQL standard&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Michael Widenius</dc:creator><guid>https://mariadb.com/kb/en/why-is-order-by-in-a-from-subquery-ignored/+comments/4889</guid></item><item><title>Re: Why is ORDER BY in a FROM subquery ignored?</title><link>https://mariadb.com/kb/en/why-is-order-by-in-a-from-subquery-ignored/+comments/4888</link><description>&lt;p&gt;Higher execution time is expected if you force an ORDER BY on your biggest table.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Michael Widenius</dc:creator><guid>https://mariadb.com/kb/en/why-is-order-by-in-a-from-subquery-ignored/+comments/4888</guid></item><item><title>Re: Why is ORDER BY in a FROM Subquery Ignored?</title><link>https://mariadb.com/kb/en/why-is-order-by-in-a-from-subquery-ignored/+comments/4051</link><description>&lt;p&gt;I am not sure if this is expected behaviour or not, but using GROUP BY in the subquery seems to force the overall query to accept the ORDER BY clause in the subquery. &lt;/p&gt;
&lt;p&gt;Is this correct behaviour?&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Stevie Robb</dc:creator><guid>https://mariadb.com/kb/en/why-is-order-by-in-a-from-subquery-ignored/+comments/4051</guid></item><item><title>Re: Why is ORDER BY in a FROM Subquery Ignored?</title><link>https://mariadb.com/kb/en/why-is-order-by-in-a-from-subquery-ignored/+comments/3868</link><description>&lt;p&gt;Personally, I do see this as a bug, as the subquery is creating a result set, not a table, to a set of specified requirements; one requirement being an order, therefore it should be treated as ordered. This totally screws up previously working code that attempts to group based on the results of the ordered subquery. You cannot sort before grouping on the top level SELECT!&lt;/p&gt;
&lt;p&gt;The limit hack seems to work, but must have a performance hit, so thanks @rspadim&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Darren Lines</dc:creator><guid>https://mariadb.com/kb/en/why-is-order-by-in-a-from-subquery-ignored/+comments/3868</guid></item><item><title>Re: Why is ORDER BY in a FROM subquery ignored?</title><link>https://mariadb.com/kb/en/why-is-order-by-in-a-from-subquery-ignored/+comments/2771</link><description>&lt;p&gt;@rspadim : Thank you for the workaround but on my biggest table, the time of execution increased since I tried. Do you have another idea ?&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Nicolas Tazzaz</dc:creator><guid>https://mariadb.com/kb/en/why-is-order-by-in-a-from-subquery-ignored/+comments/2771</guid></item><item><title>Re: Why is ORDER BY in a FROM subquery ignored?</title><link>https://mariadb.com/kb/en/why-is-order-by-in-a-from-subquery-ignored/+comments/964</link><description>&lt;p&gt;@rspadim That's true, and I understand that this can be a way to avoid refactoring bad code, which may take time. But creating an unnecessary temporary table doesn't seem a great solution to me.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Federico Razzoli</dc:creator><guid>https://mariadb.com/kb/en/why-is-order-by-in-a-from-subquery-ignored/+comments/964</guid></item><item><title>Re: Why is ORDER BY in a FROM subquery ignored?</title><link>https://mariadb.com/kb/en/why-is-order-by-in-a-from-subquery-ignored/+comments/815</link><description>&lt;p&gt;an 'easy' workaround to this, is:&lt;/p&gt;
&lt;pre&gt;
SELECT field1, field2 FROM (
SELECT field1, field2 FROM table1 
ORDER BY field2
LIMIT 18446744073709551615
) alias
&lt;/pre&gt;
&lt;p&gt;this cause the optimizer to create a temporary table, and use filesort to order the query&lt;/p&gt;
&lt;p&gt;the limit number is a 64bit unsigned -1 (2^64-1), this is a big number and can work with 99.999% of queries i know&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">roberto spadim</dc:creator><guid>https://mariadb.com/kb/en/why-is-order-by-in-a-from-subquery-ignored/+comments/815</guid></item></channel></rss>