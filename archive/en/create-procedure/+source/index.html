<!DOCTYPE html>
<html>
<head data-cookie-domain=""
      data-cookie-path="/">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="apple-touch-icon" sizes="180x180" href="/kb/static/images/favicons/apple-touch-icon.159e713979be.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/kb/static/images/favicons/favicon-32x32.bc0ac1d5d11e.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/kb/static/images/favicons/favicon-16x16.5801f8f0f34e.png">
    <link rel="shortcut icon" href="/kb/static/images/favicons/favicon.d122d305dee4.ico" type="image/x-icon" />

    <title>CREATE PROCEDURE - Source - MariaDB Knowledge Base</title>

    <link href="/kb/static/css/main.f7633538c846.css" rel="stylesheet" type="text/css" />

    
        <meta name="robots" content="noindex, nofollow">
    

    

    <!-- FB Open Graph tags -->
    <meta property="og:title" content="CREATE PROCEDURE - Source" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://mariadb.com/kb/en/create-procedure/+source/" />
    <meta property="og:image" content="http://mariadb.comaskmonty-logo.png" />
    <meta property="og:site_name" content="MariaDB KnowledgeBase" />
    <meta property="fb:admins" content="514852603" />
    <meta property="og:description" content="" />

    <meta name="description" content="" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="//fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet"/>
    
</head>
<body class="mpkb nodes autoresize nodes_source jqui" id="nodes_source">





<div id="menu-mobile" class="visible-sm visible-xs">

    <div>
        <div id="mobile-close-menu" class="text-right">
            <a href="javascript:void(0)" title="Close Menu" id="back-main" class="toggle-menu">X<span></span></a>
        </div>
    </div>
    <div class="mainmenu-mobile">
        <ul class="ls-none ul-menu">
            <li data-sub="submenu5"><a class="open-form-search" href="/kb/search/" title="Search">Search </a></li>
            <li data-sub="submenu0"><a href="/products" title="Products">Products</a><span class="arrow-main"></span></li>
            <li data-sub="submenu1"><a href="/services" title="Services">Services</a><span class="arrow-main"></span></li>
            <li data-sub="submenu2"><a href="/resources" title="Resources">Resources</a><span class="arrow-main"></span></li>
            <li data-sub="submenu3"><a href="/about-us" title="About">About</a><span class="arrow-main"></span></li>
            <li data-sub="submenu4"><a href="/contact" title="Contact">Contact</a></li>
        </ul>
    </div>

    <div class="nav-top-mobile">
        <div class="select-box form">

            <ul class="inline-block-md mb-none top-nav">
                <li>

                </li>
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/create-procedure/+source/"> Login</a>
                    </li>
                
            </ul>



        </div>
        <p class="text-center copyright">Copyright &copy; 2025 MariaDB. All rights reserved.</p>
    </div>
</div>
<div class="violator-wrap d-none" id="top_violator">
    <div class="container">
        <div class="row">
            <div class="col-xs-12 col-sm-12">
                <div class="violator-outer">
                    <div class="violator-inner">
                        <div class="row">
                            <div class="col-xs-12 col-sm-9 col-lg-7 col-lg-offset-2" id="top_violator_content">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="content-link" target="_blank" rel="nofollow noreferrer">
                                    <span>The Ultimate Guide to High Availability with MariaDB</span>
                                </a>
                            </div>
                            <div class="col-xs-12 col-sm-3" id="top_violator_cta">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="btn btn-mariadb" target="_blank" rel="nofollow noreferrer">Download Now</a>
                            </div>
                        </div>
                    </div>
                    <button type="button" class="btn btn-link close-btn">
                        <svg xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 24 24" width="15px" height="15px"><path d="M 4.9902344 3.9902344 A 1.0001 1.0001 0 0 0 4.2929688 5.7070312 L 10.585938 12 L 4.2929688 18.292969 A 1.0001 1.0001 0 1 0 5.7070312 19.707031 L 12 13.414062 L 18.292969 19.707031 A 1.0001 1.0001 0 1 0 19.707031 18.292969 L 13.414062 12 L 19.707031 5.7070312 A 1.0001 1.0001 0 0 0 18.980469 3.9902344 A 1.0001 1.0001 0 0 0 18.292969 4.2929688 L 12 10.585938 L 5.7070312 4.2929688 A 1.0001 1.0001 0 0 0 4.9902344 3.9902344 z"/></svg>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="wrapper">
<div id="top-nav">
    <div class="container">
        <ul class="hidden-sm hidden-xs" >
            <li><a href="https://mariadb.com/kb/">Knowledge Base</a></li>
            <li><a href="https://mariadb.com/contact/">Contact</a></li>
            
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/create-procedure/+source/" rel="nofollow">Login</a>
                    </li>
                
            
            
            <li id="search-form">
                <form action="/kb/en/+search/" method="get" id="search-block-form" accept-charset="UTF-8">
                    <input id="search" title="Enter the terms you wish to search for."
                           placeholder="Search . . ." type="text"
                           name="q" value="" size="15" maxlength="128" class="form-text"
                           data-autocomplete-url="/kb/en/+search/autocomplete/">
                    <input type="hidden" name="quick" value="1" />
                    <input type="hidden" name="source" value="kb" />
                </form>
            </li>
            <li><a id="search-toggler" href="/kb/search/">Search</a></li>
            
        </ul>
    </div>
</div>
<div id="navbar-bottom" class="navbar">
    <div class="container">
        
        
        
        
        <div class="row">
            <div class="col-md-3 col-sm-9 col-xs-9">
                <a class="brand" href="/" title="MariaDB">
                    <img src="/kb/static/images/logo-2018-black.95f5978ae14d.png">
                </a>
            </div>
            <div class="col-md-9 hidden-sm hidden-xs">
                <div class="main-menu">
                    <ul id="main-menu" class="nav navbar-nav inline-block-sm">
    <li class="has-sub full-menu">
        <a href="/products" title="Products">Products</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/services" title="Services">Services</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/pricing" title="Pricing">Pricing</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/resources" title="Resources">Resources</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/about-us" title="About Us">About Us</a>
    </li>
    <li class="">
        <a class="button electric-eel small top-bar-right-download" href="/downloads/">Download</a>
    </li>
</ul>
                </div>
            </div>
            <div class="col-md-3 visible-sm visible-xs col-sm-3 col-xs-3 ps-rv">
                <div class="navbar-header text-right pull-right">
                    <button type="button" class="menu-control toggle-menu" id="open-menu">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="main">
    <div class="container">
        

        <div id="subheader1" class="clearfix">
            <div class="pull-left">
                
                <div id="breadcrumbs" class="breadcrumb">
                    <a href="/kb/en/">Knowledge Base</a>
                    


    
    » <a class="crumb" href="/kb/en/documentation/">MariaDB Server Documentation</a>
    

    
    » <a class="crumb" href="/kb/en/programming-customizing-mariadb/">Programming &amp; Customizing MariaDB</a>
    

    
    » <a class="crumb" href="/kb/en/stored-routines/">Stored Routines</a>
    

    
    » <a class="crumb" href="/kb/en/stored-procedures/">Stored Procedures</a>
    


    » <a class="node_link crumb" href="/kb/en/create-procedure/">CREATE PROCEDURE</a>


                </div>
                
            </div>
        </div>
    </div>
    <div class="container" id="container-main">
        <div class="row">
            
            
                
                <aside id="sidebar-first" class="sidebar col-md-2 hidden-xs hidden-sm hidden-print">
                    
                        
                        <ul id="category_menu" class="nav nav-pills nav-stacked">
                            <li><a href="/kb/en/">Home</a></li>
                            
                                
                                    <li><a href="/kb/en/+questions/">Open Questions</a></li>
                                
                                <li><a href="/kb/en/documentation/">MariaDB Server</a></li>
                                <li><a href="/kb/en/maxscale/">MariaDB MaxScale</a></li>
                                <li><a href="/kb/en/mariadb-columnstore/">MariaDB ColumnStore</a></li>
                                <li><a href="/kb/en/connectors/">Connectors</a></li>
                            

                        </ul>
                    

                    
                        <div>
    

<div class="well well-small box actions"><div>

        <a class="btn btn-block btn-small" href="/kb/en/create-procedure/">Return to article</a>
    
</div>
</div>

</div>
                    

                    

































                </aside>
            
            
            
                
            
            
            <section id="content" class="limited_width col-md-10 clearfix">
                
                    <h1>CREATE PROCEDURE - Source</h1>
                

                



                <div>
                    

    

    
    <div class="revision_info">
        <dl class="table">
            <dt>Revision</dt>
            <dd><a href="/kb/en/create-procedure/+r/126077/">126077</a></dd>
            <dt>User</dt>
            <dd>
<span class="user" id="user-2">
<a href="/kb/user/id/2" title="Daniel Bartholomew">Daniel Bartholomew</a>
</span></dd>
            <dt>Date</dt>
            <dd>

<span class="datetime" title="2023-05-23 19:18">2023-05-23 19:18</span></dd>
        </dl>
    </div>
    


    

    
        
        <textarea id="answer_source" class="creole_source autogrow">== Syntax

&lt;&lt;code&gt;&gt;
CREATE
    [OR REPLACE]
    [DEFINER = { user | CURRENT_USER | role | CURRENT_ROLE }]
    PROCEDURE [IF NOT EXISTS] sp_name ([proc_parameter[,...]])
    [characteristic ...] routine_body

proc_parameter:
    [ IN | OUT | INOUT ] param_name type

type:
    Any valid MariaDB data type

characteristic:
    LANGUAGE SQL
  | [NOT] DETERMINISTIC
  | { CONTAINS SQL | NO SQL | READS SQL DATA | MODIFIES SQL DATA }
  | SQL SECURITY { DEFINER | INVOKER }
  | COMMENT &#39;string&#39;

routine_body:
    Valid SQL procedure statement
&lt;&lt;/code&gt;&gt;
&lt;&lt;toc&gt;&gt;

== Description

Creates a [[stored-procedures|stored procedure]]. By default, a routine is
associated with the default database. To associate the routine
explicitly with a given database, specify the name as db_name.sp_name
when you create it.

When the routine is invoked, an implicit USE db_name is performed (and
undone when the routine terminates). The causes the routine to have
the given default database while it executes. USE statements within
stored routines are disallowed.

When a stored procedure has been created, you invoke it by
using the ##CALL## statement (see [[call|CALL]]).

To execute the ##CREATE PROCEDURE## statement, it is
necessary to have the ##CREATE ROUTINE## privilege. By default, MariaDB
automatically grants the ##ALTER ROUTINE## and ##EXECUTE## privileges to the
routine creator. See also [[stored-routine-privileges|Stored Routine Privileges]].

The ##DEFINER## and SQL SECURITY clauses specify the security context to
be used when checking access privileges at routine execution time, as
described [[stored-routine-privileges|here]]. Requires the [[grant/#super|SUPER]] privilege, or, from MariaDB 10.5.2, the [[grant/#set-user|SET USER]] privilege.

If the routine name is the same as the name of a built-in SQL
function, you must use a space between the name and the following
parenthesis when defining the routine, or a syntax error occurs. This
is also true when you invoke the routine later. For this reason, we
suggest that it is better to avoid re-using the names of existing SQL
functions for your own stored routines.

The IGNORE_SPACE SQL mode applies to built-in functions, not to stored
routines. It is always allowable to have spaces after a routine name,
regardless of whether IGNORE_SPACE is enabled.

The parameter list enclosed within parentheses must always be present.
If there are no parameters, an empty parameter list of () should be
used. Parameter names are not case sensitive.

Each parameter can be declared to use any valid data type, except that
the COLLATE attribute cannot be used.

For valid identifiers to use as procedure names, see [[identifier-names|Identifier Names]].

=== Things to be Aware of With CREATE OR REPLACE

* One can&#39;t use &lt;&lt;fixed&gt;&gt;OR REPLACE&lt;&lt;/fixed&gt;&gt; together with &lt;&lt;fixed&gt;&gt;IF EXISTS&lt;&lt;/fixed&gt;&gt;.

== CREATE PROCEDURE IF NOT EXISTS

If the ##IF NOT EXISTS## clause is used, then the procedure will only be created if a procedure with the same name does not already exist. If the procedure already exists, then a warning will be triggered by default.

=== IN/OUT/INOUT
Each parameter is an ##IN## parameter by default. To specify otherwise for
a parameter, use the keyword ##OUT## or ##INOUT## before the parameter name.

An ##IN## parameter passes a value into a procedure. The procedure might
modify the value, but the modification is not visible to the caller
when the procedure returns. An ##OUT## parameter passes a value from the
procedure back to the caller. Its initial value is NULL within the
procedure, and its value is visible to the caller when the procedure
returns. An ##INOUT## parameter is initialized by the caller, can be
modified by the procedure, and any change made by the procedure is
visible to the caller when the procedure returns.

For each ##OUT## or ##INOUT## parameter, pass a user-defined variable in the
##CALL## statement that invokes the procedure so that you can obtain its
value when the procedure returns. If you are calling the procedure
from within another stored procedure or function, you can also pass a
routine parameter or local routine variable as an ##IN## or ##INOUT##
parameter.

=== DETERMINISTIC/NOT DETERMINISTIC
##DETERMINISTIC## and ##NOT DETERMINISTIC## apply only to [[stored-functions|functions]]. Specifying ##DETERMINISTC## or ##NON-DETERMINISTIC## in procedures has no effect. The default value is ##NOT DETERMINISTIC##. Functions are ##DETERMINISTIC## when they always return the same value for the same input. For example, a truncate or substring function. Any function involving data, therefore, is always ##NOT DETERMINISTIC##.

=== CONTAINS SQL/NO SQL/READS SQL DATA/MODIFIES SQL DATA
##CONTAINS SQL##, ##NO SQL##, ##READS SQL DATA##, and ##MODIFIES SQL DATA## are informative clauses that tell the server what the function does. MariaDB does not check in any way whether the specified clause is correct. If none of these clauses are specified, ##CONTAINS SQL## is used by default.

##MODIFIES SQL DATA## means that the function contains statements that may modify data stored in databases. This happens if the function contains statements like [[DELETE]], [[UPDATE]], [[INSERT]], [[REPLACE]] or DDL.

##READS SQL DATA## means that the function reads data stored in databases, but does not modify any data. This happens if [[SELECT]] statements are used, but there no write operations are executed.

##CONTAINS SQL## means that the function contains at least one SQL statement, but it does not read or write any data stored in a database. Examples include [[SET]] or [[DO]].

##NO SQL## means nothing, because MariaDB does not currently support any language other than SQL.

The routine_body consists of a valid SQL procedure statement. This can
be a simple statement such as [[SELECT]] or [[INSERT]], or it can be a
compound statement written using [[begin-end|BEGIN and END]]. Compound statements
can contain declarations, loops, and other control structure
statements. See [[programmatic-and-compound-statements|Programmatic and Compound Statements]] for syntax details.

MariaDB allows routines to contain DDL statements, such as ##CREATE## and
DROP. MariaDB also allows [[stored-procedures|stored procedures]] (but not [[stored-functions|stored functions]])
to contain SQL transaction statements such as ##COMMIT##.

For additional information about statements that are not allowed in
stored routines, see [[stored-routine-limitations|Stored Routine Limitations]].

=== Invoking stored procedure from within programs
For information about invoking [[stored-procedures|stored procedures]] from within programs written in a language that has a MariaDB/MySQL interface, see [[call|CALL]].

=== OR REPLACE
If the optional ##OR REPLACE## clause is used, it acts as a shortcut for:

&lt;&lt;code lang=mysql inline=false&gt;&gt;
DROP PROCEDURE IF EXISTS name;
CREATE PROCEDURE name ...;
&lt;&lt;/code&gt;&gt;
with the exception that any existing [[stored-routine-privileges|privileges]] for the procedure are not dropped.

=== sql_mode

MariaDB stores the [[server-system-variables#sql_mode|sql_mode]] system variable setting that is in effect at the time a routine is created, and always executes the routine with this setting in force, regardless of the server [[sql_mode|SQL mode]] in effect when the routine is invoked.

=== Character Sets and Collations
Procedure parameters can be declared with any character set/collation. If the character set and collation are not specifically set, the database defaults at the time of creation will be used. If the database defaults change at a later stage, the stored procedure character set/collation will not be changed at the same time; the stored procedure needs to be dropped and recreated to ensure the same character set/collation as the database is used.

=== Oracle Mode
A subset of Oracle&#39;s PL/SQL language is supported in addition to the traditional SQL/PSM-based MariaDB syntax. See [[sql_modeoracle-from-mariadb-103#stored-procedures-and-stored-functions|Oracle mode]] for details on changes when running Oracle mode.

== Examples

The following example shows a simple stored procedure that uses an ##OUT##
parameter. It uses the DELIMITER command to set a new delimiter for the duration of the process &lt;&lt;entity&gt;&gt;mdash&lt;&lt;/entity&gt;&gt; see [[delimiters|Delimiters in the mariadb client]].

&lt;&lt;code&gt;&gt;
DELIMITER //

CREATE PROCEDURE simpleproc (OUT param1 INT)
 BEGIN
  SELECT COUNT(*) INTO param1 FROM t;
 END;
//

DELIMITER ;

CALL simpleproc(@a);

SELECT @a;
+------+
| @a   |
+------+
|    1 |
+------+
&lt;&lt;/code&gt;&gt;

Character set and collation:
&lt;&lt;code&gt;&gt;
DELIMITER //

CREATE PROCEDURE simpleproc2 (
  OUT param1 CHAR(10) CHARACTER SET &#39;utf8&#39; COLLATE &#39;utf8_bin&#39;
)
 BEGIN
  SELECT CONCAT(&#39;a&#39;),f1 INTO param1 FROM t;
 END;
//

DELIMITER ;
&lt;&lt;/code&gt;&gt;

CREATE OR REPLACE:
&lt;&lt;sql&gt;&gt;
DELIMITER //

CREATE PROCEDURE simpleproc2 (
  OUT param1 CHAR(10) CHARACTER SET &#39;utf8&#39; COLLATE &#39;utf8_bin&#39;
)
 BEGIN
  SELECT CONCAT(&#39;a&#39;),f1 INTO param1 FROM t;
 END;
//
ERROR 1304 (42000): PROCEDURE simpleproc2 already exists

DELIMITER ;

DELIMITER //

CREATE OR REPLACE PROCEDURE simpleproc2 (
  OUT param1 CHAR(10) CHARACTER SET &#39;utf8&#39; COLLATE &#39;utf8_bin&#39;
)
 BEGIN
  SELECT CONCAT(&#39;a&#39;),f1 INTO param1 FROM t;
 END;
//
ERROR 1304 (42000): PROCEDURE simpleproc2 already exists

DELIMITER ;
Query OK, 0 rows affected (0.03 sec)
&lt;&lt;/sql&gt;&gt;

== See Also
* [[identifier-names/|Identifier Names]]
* [[stored-procedure-overview|Stored Procedure Overview]]
* [[alter-procedure|ALTER PROCEDURE]]
* [[drop-procedure|DROP PROCEDURE]]
* [[show-create-procedure|SHOW CREATE PROCEDURE]]
* [[show-procedure-status|SHOW PROCEDURE STATUS]]
* [[stored-routine-privileges|Stored Routine Privileges]]
* [[information-schema-routines-table|Information Schema ROUTINES Table]]</textarea>
    


                    <div id="content_disclaimer" class="graybox">
                        Content reproduced on this site is the property of its respective owners,
                        and this content is not reviewed in advance by MariaDB. The views, information and opinions
                        expressed by this content do not necessarily represent those of MariaDB or any other party.
                    </div>
                </div>
            </section>

            
        </div>
    </div>
</div>

<!-- Footer -->
<footer id="footer">
    <div class="footer">
        <div class="container">
            <div class="row">
                <div class="col-xs-12">
                    <ul class="list-inline text-center footer-nav">
                        <li>
                            <h5>
                                <a href="https://mariadb.com/products" title="Products">Products</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/services" title="Services">Services</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/pricing" title="Pricing">Pricing</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/resources" title="Resources">Resources</a>
                            </h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/about-us" title="About MariaDB">About Us</a></h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/download" title="Download">Download MariaDB</a></h5>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="row row-10">
                
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div id="block-footerformcontact" class="block block-block-content block-block-contentd754ee1b-3cc9-40e7-9ef4-f504f1197fb1">
                        
                            <h5 style="font-weight: 400;">Subscribe to our newsletter!</h5>
                            <script src="//app-sj15.marketo.com/js/forms2/js/forms2.min.js"></script><form id="mktoForm_1498"></form>
                            <script>
                                <!--//--><![CDATA[// ><!--
                                MktoForms2.loadForm("//app-sj15.marketo.com", "573-PXI-984", 1498);
                                //--><!]]]]><![CDATA[>
                                //--><!]]>
                            </script>
                        
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div class="footer-copyright">
                        <div class="text-center">
                            <ul class="list-inline no-margin">
                                <li>
                                    <a href="/legal" title="Legal">Legal</a>
                                </li>
                                <li>
                                    <a href="/privacy-policy" title="Privacy Policy">Privacy Policy</a>
                                </li>
                                <li>
                                    <a href="/cookie-policy/" title="Cookies">Cookie Policy</a>
                                </li>
                            </ul>
                            <p>Copyright &copy; 2025 MariaDB. All rights reserved.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
</footer>
</div>

<div id="ajax_loading">
    <img src="/kb/static/images/ajax-loader.a51c5608d01a.gif" />
</div>

    <!-- Google Tag Manager -->
    <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-MK2847"
                      height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
            '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MK2847');</script>
    <!-- End Google Tag Manager -->

</body>

<script type="text/javascript" src="/kb/static/js/main.1587e3a666fc.js" charset="utf-8"></script>

</html>