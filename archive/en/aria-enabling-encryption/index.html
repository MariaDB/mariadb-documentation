<!DOCTYPE html>
<html>
<head data-cookie-domain=""
      data-cookie-path="/">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="apple-touch-icon" sizes="180x180" href="/kb/static/images/favicons/apple-touch-icon.159e713979be.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/kb/static/images/favicons/favicon-32x32.bc0ac1d5d11e.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/kb/static/images/favicons/favicon-16x16.5801f8f0f34e.png">
    <link rel="shortcut icon" href="/kb/static/images/favicons/favicon.d122d305dee4.ico" type="image/x-icon" />

    <title>Aria Enabling Encryption - MariaDB Knowledge Base</title>

    <link href="/kb/static/css/main.f7633538c846.css" rel="stylesheet" type="text/css" />

    

    

    <!-- FB Open Graph tags -->
    <meta property="og:title" content="Aria Enabling Encryption" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://mariadb.com/kb/en/aria-enabling-encryption/" />
    <meta property="og:image" content="http://mariadb.comaskmonty-logo.png" />
    <meta property="og:site_name" content="MariaDB KnowledgeBase" />
    <meta property="fb:admins" content="514852603" />
    <meta property="og:description" content="
In order to enable data-at-rest encryption for tables using the Aria storage engine, you first need to configure the server to use an Encryption Key Management plugin.  Once ..." />

    <meta name="description" content="
In order to enable data-at-rest encryption for tables using the Aria storage engine, you first need to configure the server to use an Encryption Key Management plugin.  Once ..." />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="//fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet"/>
    
</head>
<body class="mpkb nodes products nodes_view jqui" id="nodes_view">





<div id="menu-mobile" class="visible-sm visible-xs">

    <div>
        <div id="mobile-close-menu" class="text-right">
            <a href="javascript:void(0)" title="Close Menu" id="back-main" class="toggle-menu">X<span></span></a>
        </div>
    </div>
    <div class="mainmenu-mobile">
        <ul class="ls-none ul-menu">
            <li data-sub="submenu5"><a class="open-form-search" href="/kb/search/" title="Search">Search </a></li>
            <li data-sub="submenu0"><a href="/products" title="Products">Products</a><span class="arrow-main"></span></li>
            <li data-sub="submenu1"><a href="/services" title="Services">Services</a><span class="arrow-main"></span></li>
            <li data-sub="submenu2"><a href="/resources" title="Resources">Resources</a><span class="arrow-main"></span></li>
            <li data-sub="submenu3"><a href="/about-us" title="About">About</a><span class="arrow-main"></span></li>
            <li data-sub="submenu4"><a href="/contact" title="Contact">Contact</a></li>
        </ul>
    </div>

    <div class="nav-top-mobile">
        <div class="select-box form">

            <ul class="inline-block-md mb-none top-nav">
                <li>

                </li>
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/aria-enabling-encryption/"> Login</a>
                    </li>
                
            </ul>



        </div>
        <p class="text-center copyright">Copyright &copy; 2024 MariaDB. All rights reserved.</p>
    </div>
</div>
<div class="violator-wrap d-none" id="top_violator">
    <div class="container">
        <div class="row">
            <div class="col-xs-12 col-sm-12">
                <div class="violator-outer">
                    <div class="violator-inner">
                        <div class="row">
                            <div class="col-xs-12 col-sm-9 col-lg-7 col-lg-offset-2" id="top_violator_content">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="content-link" target="_blank" rel="nofollow noreferrer">
                                    <span>The Ultimate Guide to High Availability with MariaDB</span>
                                </a>
                            </div>
                            <div class="col-xs-12 col-sm-3" id="top_violator_cta">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="btn btn-mariadb" target="_blank" rel="nofollow noreferrer">Download Now</a>
                            </div>
                        </div>
                    </div>
                    <button type="button" class="btn btn-link close-btn">
                        <svg xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 24 24" width="15px" height="15px"><path d="M 4.9902344 3.9902344 A 1.0001 1.0001 0 0 0 4.2929688 5.7070312 L 10.585938 12 L 4.2929688 18.292969 A 1.0001 1.0001 0 1 0 5.7070312 19.707031 L 12 13.414062 L 18.292969 19.707031 A 1.0001 1.0001 0 1 0 19.707031 18.292969 L 13.414062 12 L 19.707031 5.7070312 A 1.0001 1.0001 0 0 0 18.980469 3.9902344 A 1.0001 1.0001 0 0 0 18.292969 4.2929688 L 12 10.585938 L 5.7070312 4.2929688 A 1.0001 1.0001 0 0 0 4.9902344 3.9902344 z"/></svg>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="wrapper">
<div id="top-nav">
    <div class="container">
        <ul class="hidden-sm hidden-xs" >
            <li><a href="https://mariadb.com/kb/">Knowledge Base</a></li>
            <li><a href="https://mariadb.com/contact/">Contact</a></li>
            
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/aria-enabling-encryption/" rel="nofollow">Login</a>
                    </li>
                
            
            
            <li id="search-form">
                <form action="/kb/en/+search/" method="get" id="search-block-form" accept-charset="UTF-8">
                    <input id="search" title="Enter the terms you wish to search for."
                           placeholder="Search . . ." type="text"
                           name="q" value="" size="15" maxlength="128" class="form-text"
                           data-autocomplete-url="/kb/en/+search/autocomplete/">
                    <input type="hidden" name="quick" value="1" />
                    <input type="hidden" name="source" value="kb" />
                </form>
            </li>
            <li><a id="search-toggler" href="/kb/search/">Search</a></li>
            
        </ul>
    </div>
</div>
<div id="navbar-bottom" class="navbar">
    <div class="container">
        
        
        
        
        <div class="row">
            <div class="col-md-3 col-sm-9 col-xs-9">
                <a class="brand" href="/" title="MariaDB">
                    <img src="/kb/static/images/logo-2018-black.95f5978ae14d.png">
                </a>
            </div>
            <div class="col-md-9 hidden-sm hidden-xs">
                <div class="main-menu">
                    <ul id="main-menu" class="nav navbar-nav inline-block-sm">
    <li class="has-sub full-menu">
        <a href="/products" title="Products">Products</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/services" title="Services">Services</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/pricing" title="Pricing">Pricing</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/resources" title="Resources">Resources</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/about-us" title="About Us">About Us</a>
    </li>
    <li class="">
        <a class="button electric-eel small top-bar-right-download" href="/downloads/">Download</a>
    </li>
</ul>
                </div>
            </div>
            <div class="col-md-3 visible-sm visible-xs col-sm-3 col-xs-3 ps-rv">
                <div class="navbar-header text-right pull-right">
                    <button type="button" class="menu-control toggle-menu" id="open-menu">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="main">
    <div class="container">
        

        <div id="subheader1" class="clearfix">
            <div class="pull-left">
                
                <div id="breadcrumbs" class="breadcrumb">
                    <a href="/kb/en/">Knowledge Base</a>
                    


    
    » <a class="crumb" href="/kb/en/documentation/">MariaDB Server Documentation</a>
    

    
    » <a class="crumb" href="/kb/en/mariadb-administration/">MariaDB Administration</a>
    

    
    » <a class="crumb" href="/kb/en/user-server-security/">User &amp; Server Security</a>
    

    
    » <a class="crumb" href="/kb/en/securing-mariadb/">Securing MariaDB</a>
    

    
    » <a class="crumb" href="/kb/en/securing-mariadb-encryption/">Encryption</a>
    

    
    » <a class="crumb" href="/kb/en/encryption-data-at-rest-encryption/">Data-at-Rest Encryption</a>
    

    
    » <a class="crumb" href="/kb/en/aria-encryption/">Aria Encryption</a>
    


    » <a class="node_link crumb" href="/kb/en/aria-enabling-encryption/">Aria Enabling Encryption</a>


                </div>
                
            </div>
        </div>
    </div>
    <div class="container" id="container-main">
        <div class="row">
            
            
                
                <aside id="sidebar-first" class="sidebar col-md-2 hidden-xs hidden-sm hidden-print">
                    
                        
                        <ul id="category_menu" class="nav nav-pills nav-stacked">
                            <li><a href="/kb/en/">Home</a></li>
                            
                                
                                    <li><a href="/kb/en/+questions/">Open Questions</a></li>
                                
                                <li><a href="/kb/en/documentation/">MariaDB Server</a></li>
                                <li><a href="/kb/en/maxscale/">MariaDB MaxScale</a></li>
                                <li><a href="/kb/en/mariadb-columnstore/">MariaDB ColumnStore</a></li>
                                <li><a href="/kb/en/connectors/">Connectors</a></li>
                            

                        </ul>
                    

                    
<div>



<div class="well well-small box actions"><div>

        <a class="btn btn-block btn-blue btn-sm" href="/kb/en/aria-enabling-encryption/+history" rel="nofollow">History</a>
        
        
        
        <a class="btn btn-block btn-blue btn-sm" href="/kb/en/aria-enabling-encryption/+source/">Source</a>
        
        <a class="btn btn-block btn-blue btn-sm flag" href="/kb/en/aria-enabling-encryption/+flag"
                data-flag-url="/kb/en/aria-enabling-encryption/+flag" rel="nofollow">
                Flag as Spam / Inappropriate</a>
        
        <a class="btn btn-block btn-blue btn-sm" href="/kb/en/aria-enabling-encryption/+translate/">
                Translate</a>
        

</div>
</div>





<div class="well well-small box node_info"><div>

    <dl>
        <dt>Created</dt>
        <dd>

<span class="datetime" title="2019-03-11 22:36">5 years, 8 months ago</span></dd>

        <dt>Modified</dt>
        <dd>

<span class="datetime" title="2019-04-16 00:14">5 years, 6 months ago</span></dd>

        <dt>Type</dt>
        <dd>article</dd>

        <dt>Status</dt>
        <dd>active</dd>

        <dt>License</dt>
        <dd>
            
                <a href="/kb/en/aria-enabling-encryption/+license/">CC BY-SA / Gnu FDL</a>
            
        </dd>

        
    </dl>

    
    <ul class="rss_feeds">
        <li><a href="/kb/en/aria-enabling-encryption/+history/feed/">
            History</a>
        </li>
        <li><a href="/kb/en/aria-enabling-encryption/+comments/feed/">
            Comments</a>
        </li>
    </ul>
    

</div>
</div>





    
    
    

<div class="well well-small box attachments"><div><div class="edit_link pull-right"><a href="/kb/en/aria-enabling-encryption/+edit/attachments/">Edit</a></div><h5>Attachments</h5></div><div>

        
            <div class="no_data">No attachments exist</div>
        
    
</div>
</div>

    



    
    






</div>


                    

































                </aside>
            
            
            
                
            
            
                
            
            <section id="content" class="limited_width col-md-8 clearfix">
                
                    <h1>Aria Enabling Encryption</h1>
                

                



                <div>
                    
    

    
    
    

    <div class="node creole">
        
        
        


    
    <div class="answer formatted">
        <div class="table_of_contents well well-small">
<h3>Contents</h3>
 <ol class="toc">

    <li class=""><a href="#encrypting-user-created-tables" title="Encrypting User-created Tables">Encrypting User-created Tables</a>    <ol class="toc">

        <li class=""><a href="#encrypting-existing-tables" title="Encrypting Existing Tables">Encrypting Existing Tables</a>    </ol>
</li>

    <li class=""><a href="#encrypting-internal-on-disk-temporary-tables" title="Encrypting Internal On-disk Temporary Tables">Encrypting Internal On-disk Temporary Tables</a></li>

    <li class=""><a href="#manually-encrypting-tables" title="Manually Encrypting Tables">Manually Encrypting Tables</a> </ol>
</li>
</div>
<p>In order to enable data-at-rest encryption for tables using the <a href="/kb/en/aria/">Aria</a> storage engine, you first need to configure the server to use an <a href="/kb/en/encryption-key-management/">Encryption Key Management</a> plugin.  Once this is done, you can enable encryption by setting the relevant system variables. </p>
<h2 class="anchored_heading" id="encrypting-user-created-tables">Encrypting User-created Tables</h2>
<p> With tables that the user creates, you can enable encryption by setting the <code><a href="/kb/en/aria-system-variables/#aria_encrypt_tables">aria_encrypt_tables</a></code> system variable to <code>ON</code>, then restart the Server.  Once this is set, Aria automatically enables encryption on all tables you create after with the <code><a href="/kb/en/create-table/#row_format">ROW_FORMAT</a></code> table option set to <code>PAGE</code>.</p>
<p>Currently, Aria does not support encryption on tables where the <code><a href="/kb/en/create-table/#row_format">ROW_FORMAT</a></code> table option is set to the <code>FIXED</code> or <code>DYNAMIC</code> values.</p>
<p>Unlike InnoDB, Aria does not support the <code><a href="/kb/en/create-table/#encrypted">ENCRYPTED</a></code> table option (see <a href="https://jira.mariadb.org/browse/MDEV-18049">MDEV-18049</a> about that). Encryption for Aria can only be enabled globally using the <code><a href="/kb/en/aria-system-variables/#aria_encrypt_tables">aria_encrypt_tables</a></code> system variable.</p>
<h3 class="anchored_heading" id="encrypting-existing-tables">Encrypting Existing Tables</h3>
<p>In cases where you have existing Aria tables that you would like to encrypt, the process is a little more complicated.  Unlike InnoDB, Aria does not utilize <a href="/kb/en/innodb-background-encryption-threads/">background encryption threads</a> to automatically perform encryption changes (see <a href="https://jira.mariadb.org/browse/MDEV-18971">MDEV-18971</a> about that).  Therefore, to encrypt existing tables, you need to identify each table that needs to be encrypted, and then you need to manually rebuild each table.</p>
<p>First, set the <code><a href="/kb/en/aria-system-variables/#aria_encrypt_tables">aria_encrypt_tables</a></code> system variable to encrypt new tables.</p>
<pre class="fixed"><span class="k">SET</span> <span class="k">GLOBAL</span> <span class="n">aria_encrypt_tables</span><span class="o">=</span><span class="k">ON</span><span class="p">;</span>
</pre><p>Identify Aria tables that have the <code><a href="/kb/en/create-table/#row_format">ROW_FORMAT</a></code> table option set to <code>PAGE</code>.</p>
<pre class="fixed"><span class="k">SELECT</span> <span class="n">TABLE_SCHEMA</span><span class="p">,</span> <span class="k">TABLE_NAME</span> 
<span class="k">FROM</span> <span class="n">information_schema</span><span class="p">.</span><span class="n">TABLES</span> 
<span class="k">WHERE</span> <span class="n">ENGINE</span><span class="o">=</span><span class="s1">&#39;Aria&#39;</span> 
  <span class="k">AND</span> <span class="n">ROW_FORMAT</span><span class="o">=</span><span class="s1">&#39;PAGE&#39;</span>
  <span class="k">AND</span> <span class="n">TABLE_SCHEMA</span> <span class="o">!=</span> <span class="s1">&#39;information_schema&#39;</span><span class="p">;</span>
</pre><p>For each table in the result-set, issue an <code><a href="/kb/en/alter-table/">ALTER TABLE</a></code> statement to rebuild the table.</p>
<pre class="fixed"><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">test</span><span class="p">.</span><span class="n">aria_table</span> <span class="n">ENGINE</span><span class="o">=</span><span class="n">Aria</span> <span class="n">ROW_FORMAT</span><span class="o">=</span><span class="n">PAGE</span><span class="p">;</span>
</pre><p>This statement causes Aria to rebuild the table using the <code><a href="/kb/en/create-table/#row_format">ROW_FORMAT</a></code> table option.  In the process, with the new default setting, it encrypts the table when it writes to disk. </p>
<h2 class="anchored_heading" id="encrypting-internal-on-disk-temporary-tables">Encrypting Internal On-disk Temporary Tables</h2>
<p>During the execution of queries, MariaDB routinely creates internal temporary tables.  These internal temporary tables initially use the <a href="/kb/en/memory-storage-engine/">MEMORY</a> storage engine, which is entirely stored in memory.  When the table size exceeds the allocation defined by the <code><a href="/kb/en/server-system-variables/#max_heap_table_size">max_heap_table_size</a></code> system variable, MariaDB writes the data to disk using another storage engine.  If you have the <code><a href="/kb/en/aria-system-variables/#aria_used_for_temp_tables">aria_used_for_temp_tables</a></code> set to <code>ON</code>, MariaDB uses Aria in writing the internal temporary tables to disk.</p>
<p>Encryption for internal temporary tables is handled separately from encryption for user-created tables.  To enable encryption for these tables, set the <code><a href="/kb/en/server-system-variables/#encrypt_tmp_disk_tables">encrypt_tmp_disk_tables</a></code> system variable to <code>ON</code>.  Once set, all internal temporary tables that are written to disk using Aria are automatically encrypted.</p>
<h2 class="anchored_heading" id="manually-encrypting-tables">Manually Encrypting Tables</h2>
<p>Currently, Aria does not support manually encrypting tables through the <code><a href="/kb/en/create-table/#encrypted">ENCRYPTED</a></code> and <code><a href="/kb/en/create-table/#encryption_key_id">ENCRYPTION_KEY_ID</a></code> table options.  For more information, see <a href="https://jira.mariadb.org/browse/MDEV-18049">MDEV-18049</a>.</p>
<p>In cases where you want to encrypt tables manually or set the specific encryption key, use <a href="/kb/en/innodb-encryption/">InnoDB</a>.</p>

    </div>


        
            <div id="subscribe" class="well well-small hide hidden-print"
                 data-subscribe-url="/kb/en/aria-enabling-encryption/+subscriptions/add"
                 data-unsubscribe-url="/kb/en/aria-enabling-encryption/+subscriptions/remove">
            </div>
        

        
        
    
        <div class="simple_section_nav">
            <ul class="nav nav-pills">
                
                    <li><a href="/kb/en/aria-encryption-overview/">
                        ← Aria Encryption Overview
                    </a>
                    </li>
                
                
                    <li><a href="/kb/en/aria-encryption/">
                        ↑ Aria Encryption ↑
                    </a>
                    </li>
                
                
                    <li class="pull-right"><a href="/kb/en/aria-disabling-encryption/">
                        Aria Disabling Encryption →
                    </a>
                    </li>
                
            </ul>
        </div>
    

        

        
        <h2>Comments</h2>
        
    
    <div id="comments" data-node-id="8754" data-comments-url="/kb/en/aria-enabling-encryption/+comments"
         data-reply-url="/kb/en/aria-enabling-encryption/comments/post/">
        Comments loading...
    </div>

        

    </div>


                    <div id="content_disclaimer" class="graybox">
                        Content reproduced on this site is the property of its respective owners,
                        and this content is not reviewed in advance by MariaDB. The views, information and opinions
                        expressed by this content do not necessarily represent those of MariaDB or any other party.
                    </div>
                </div>
            </section>

            
                <div id="right_bar" class="col-md-2">
                    
    
        
        <ul class="section_navigation well well-small hidden-xs hidden-sm">
            
                <li class="parent"><a href="/kb/en/aria-encryption/">
                    ↑ Aria Encryption ↑
                </a>
                </li>
            
            
                
                    <li>
                        <a href="/kb/en/aria-encryption-overview/">
                            
                            Aria Encryption Overview
                        </a>
                    </li>
                
            
                
                    <li class="active">
                        <span>Aria Enabling Encryption</span>
                        
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/aria-disabling-encryption/">
                            
                            Aria Disabling Encryption
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/aria-encryption-keys/">
                            
                            Aria Encryption Keys
                        </a>
                    </li>
                
            
        </ul>
    
    

                </div>
            
        </div>
    </div>
</div>

<!-- Footer -->
<footer id="footer">
    <div class="footer">
        <div class="container">
            <div class="row">
                <div class="col-xs-12">
                    <ul class="list-inline text-center footer-nav">
                        <li>
                            <h5>
                                <a href="https://mariadb.com/products" title="Products">Products</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/services" title="Services">Services</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/pricing" title="Pricing">Pricing</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/resources" title="Resources">Resources</a>
                            </h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/about-us" title="About MariaDB">About Us</a></h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/download" title="Download">Download MariaDB</a></h5>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="row row-10">
                
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div id="block-footerformcontact" class="block block-block-content block-block-contentd754ee1b-3cc9-40e7-9ef4-f504f1197fb1">
                        
                            <h5 style="font-weight: 400;">Subscribe to our newsletter!</h5>
                            <script src="//app-sj15.marketo.com/js/forms2/js/forms2.min.js"></script><form id="mktoForm_1498"></form>
                            <script>
                                <!--//--><![CDATA[// ><!--
                                MktoForms2.loadForm("//app-sj15.marketo.com", "573-PXI-984", 1498);
                                //--><!]]]]><![CDATA[>
                                //--><!]]>
                            </script>
                        
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div class="footer-copyright">
                        <div class="text-center">
                            <ul class="list-inline no-margin">
                                <li>
                                    <a href="/legal" title="Legal">Legal</a>
                                </li>
                                <li>
                                    <a href="/privacy-policy" title="Privacy Policy">Privacy Policy</a>
                                </li>
                                <li>
                                    <a href="/cookie-policy/" title="Cookies">Cookie Policy</a>
                                </li>
                            </ul>
                            <p>Copyright &copy; 2024 MariaDB. All rights reserved.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
</footer>
</div>

<div id="ajax_loading">
    <img src="/kb/static/images/ajax-loader.a51c5608d01a.gif" />
</div>

    <!-- Google Tag Manager -->
    <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-MK2847"
                      height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
            '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MK2847');</script>
    <!-- End Google Tag Manager -->

</body>

<script type="text/javascript" src="/kb/static/js/main.1587e3a666fc.js" charset="utf-8"></script>

</html>