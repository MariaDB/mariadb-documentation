<!DOCTYPE html>
<html>
<head data-cookie-domain=""
      data-cookie-path="/">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="apple-touch-icon" sizes="180x180" href="/kb/static/images/favicons/apple-touch-icon.159e713979be.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/kb/static/images/favicons/favicon-32x32.bc0ac1d5d11e.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/kb/static/images/favicons/favicon-16x16.5801f8f0f34e.png">
    <link rel="shortcut icon" href="/kb/static/images/favicons/favicon.d122d305dee4.ico" type="image/x-icon" />

    <title>MariaDB Galera Cluster Quickstart - MariaDB Knowledge Base</title>

    <link href="/kb/static/css/main.f7633538c846.css" rel="stylesheet" type="text/css" />

    

    

    <!-- FB Open Graph tags -->
    <meta property="og:title" content="MariaDB Galera Cluster Quickstart" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://mariadb.com/kb/en/mariadb-galera-cluster-quickstart/" />
    <meta property="og:image" content="http://mariadb.comaskmonty-logo.png" />
    <meta property="og:site_name" content="MariaDB KnowledgeBase" />
    <meta property="fb:admins" content="514852603" />
    <meta property="og:description" content="
Overview
MariaDB Enterprise Cluster, powered by Galera, is available with MariaDB Enterprise Server. MariaDB Galera Cluster is available with MariaDB Community Server.
In ord..." />

    <meta name="description" content="
Overview
MariaDB Enterprise Cluster, powered by Galera, is available with MariaDB Enterprise Server. MariaDB Galera Cluster is available with MariaDB Community Server.
In ord..." />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="//fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet"/>
    
</head>
<body class="mpkb nodes products nodes_view jqui" id="nodes_view">





<div id="menu-mobile" class="visible-sm visible-xs">

    <div>
        <div id="mobile-close-menu" class="text-right">
            <a href="javascript:void(0)" title="Close Menu" id="back-main" class="toggle-menu">X<span></span></a>
        </div>
    </div>
    <div class="mainmenu-mobile">
        <ul class="ls-none ul-menu">
            <li data-sub="submenu5"><a class="open-form-search" href="/kb/search/" title="Search">Search </a></li>
            <li data-sub="submenu0"><a href="/products" title="Products">Products</a><span class="arrow-main"></span></li>
            <li data-sub="submenu1"><a href="/services" title="Services">Services</a><span class="arrow-main"></span></li>
            <li data-sub="submenu2"><a href="/resources" title="Resources">Resources</a><span class="arrow-main"></span></li>
            <li data-sub="submenu3"><a href="/about-us" title="About">About</a><span class="arrow-main"></span></li>
            <li data-sub="submenu4"><a href="/contact" title="Contact">Contact</a></li>
        </ul>
    </div>

    <div class="nav-top-mobile">
        <div class="select-box form">

            <ul class="inline-block-md mb-none top-nav">
                <li>

                </li>
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/mariadb-galera-cluster-quickstart/"> Login</a>
                    </li>
                
            </ul>



        </div>
        <p class="text-center copyright">Copyright &copy; 2025 MariaDB. All rights reserved.</p>
    </div>
</div>
<div class="violator-wrap d-none" id="top_violator">
    <div class="container">
        <div class="row">
            <div class="col-xs-12 col-sm-12">
                <div class="violator-outer">
                    <div class="violator-inner">
                        <div class="row">
                            <div class="col-xs-12 col-sm-9 col-lg-7 col-lg-offset-2" id="top_violator_content">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="content-link" target="_blank" rel="nofollow noreferrer">
                                    <span>The Ultimate Guide to High Availability with MariaDB</span>
                                </a>
                            </div>
                            <div class="col-xs-12 col-sm-3" id="top_violator_cta">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="btn btn-mariadb" target="_blank" rel="nofollow noreferrer">Download Now</a>
                            </div>
                        </div>
                    </div>
                    <button type="button" class="btn btn-link close-btn">
                        <svg xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 24 24" width="15px" height="15px"><path d="M 4.9902344 3.9902344 A 1.0001 1.0001 0 0 0 4.2929688 5.7070312 L 10.585938 12 L 4.2929688 18.292969 A 1.0001 1.0001 0 1 0 5.7070312 19.707031 L 12 13.414062 L 18.292969 19.707031 A 1.0001 1.0001 0 1 0 19.707031 18.292969 L 13.414062 12 L 19.707031 5.7070312 A 1.0001 1.0001 0 0 0 18.980469 3.9902344 A 1.0001 1.0001 0 0 0 18.292969 4.2929688 L 12 10.585938 L 5.7070312 4.2929688 A 1.0001 1.0001 0 0 0 4.9902344 3.9902344 z"/></svg>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="wrapper">
<div id="top-nav">
    <div class="container">
        <ul class="hidden-sm hidden-xs" >
            <li><a href="https://mariadb.com/kb/">Knowledge Base</a></li>
            <li><a href="https://mariadb.com/contact/">Contact</a></li>
            
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/mariadb-galera-cluster-quickstart/" rel="nofollow">Login</a>
                    </li>
                
            
            
            <li id="search-form">
                <form action="/kb/en/+search/" method="get" id="search-block-form" accept-charset="UTF-8">
                    <input id="search" title="Enter the terms you wish to search for."
                           placeholder="Search . . ." type="text"
                           name="q" value="" size="15" maxlength="128" class="form-text"
                           data-autocomplete-url="/kb/en/+search/autocomplete/">
                    <input type="hidden" name="quick" value="1" />
                    <input type="hidden" name="source" value="kb" />
                </form>
            </li>
            <li><a id="search-toggler" href="/kb/search/">Search</a></li>
            
        </ul>
    </div>
</div>
<div id="navbar-bottom" class="navbar">
    <div class="container">
        
        
        
        
        <div class="row">
            <div class="col-md-3 col-sm-9 col-xs-9">
                <a class="brand" href="/" title="MariaDB">
                    <img src="/kb/static/images/logo-2018-black.95f5978ae14d.png">
                </a>
            </div>
            <div class="col-md-9 hidden-sm hidden-xs">
                <div class="main-menu">
                    <ul id="main-menu" class="nav navbar-nav inline-block-sm">
    <li class="has-sub full-menu">
        <a href="/products" title="Products">Products</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/solutions" title="Solutions">Solutions</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/resources" title="Resources">Resources</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/about-us" title="Company">Company</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/pricing" title="Pricing">Pricing</a>
    </li>
    
    <li class="">
        <a class="button electric-eel small top-bar-right-download" href="/downloads/">Download</a>
    </li>
</ul>
                </div>
            </div>
            <div class="col-md-3 visible-sm visible-xs col-sm-3 col-xs-3 ps-rv">
                <div class="navbar-header text-right pull-right">
                    <button type="button" class="menu-control toggle-menu" id="open-menu">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="main">
    <div class="container">
        

        <div id="subheader1" class="clearfix">
            <div class="pull-left">
                
                <div id="breadcrumbs" class="breadcrumb">
                    <a href="/kb/en/">Knowledge Base</a>
                    


    
    » <a class="crumb" href="/kb/en/documentation/">MariaDB Server Documentation</a>
    

    
    » <a class="crumb" href="/kb/en/replication-cluster-multi-master/">High Availability &amp; Performance Tuning</a>
    

    
    » <a class="crumb" href="/kb/en/galera-cluster/">MariaDB Galera Cluster</a>
    


    » <a class="node_link crumb" href="/kb/en/mariadb-galera-cluster-quickstart/">MariaDB Galera Cluster Quickstart</a>


                </div>
                
            </div>
        </div>
    </div>
    <div class="container" id="container-main">
        <div class="row">
            
            
                
                <aside id="sidebar-first" class="sidebar col-md-2 hidden-xs hidden-sm hidden-print">
                    
                        
                        <ul id="category_menu" class="nav nav-pills nav-stacked">
                            <li><a href="/kb/en/">Home</a></li>
                            
                                
                                    <li><a href="/kb/en/+questions/">Open Questions</a></li>
                                
                                <li><a href="/kb/en/documentation/">MariaDB Server</a></li>
                                <li><a href="/kb/en/maxscale/">MariaDB MaxScale</a></li>
                                <li><a href="/kb/en/mariadb-columnstore/">MariaDB ColumnStore</a></li>
                                <li><a href="/kb/en/connectors/">Connectors</a></li>
                            

                        </ul>
                    

                    
<div>



<div class="well well-small box actions"><div>

        <a class="btn btn-block btn-blue btn-sm" href="/kb/en/mariadb-galera-cluster-quickstart/+history" rel="nofollow">History</a>
        
        
        
        <a class="btn btn-block btn-blue btn-sm" href="/kb/en/mariadb-galera-cluster-quickstart/+source/">Source</a>
        
        <a class="btn btn-block btn-blue btn-sm flag" href="/kb/en/mariadb-galera-cluster-quickstart/+flag"
                data-flag-url="/kb/en/mariadb-galera-cluster-quickstart/+flag" rel="nofollow">
                Flag as Spam / Inappropriate</a>
        
        <a class="btn btn-block btn-blue btn-sm" href="/kb/en/mariadb-galera-cluster-quickstart/+translate/">
                Translate</a>
        

</div>
</div>





<div class="well well-small box node_info"><div>

    <dl>
        <dt>Created</dt>
        <dd>

<span class="datetime" title="2025-03-12 17:04">1 month, 3 weeks ago</span></dd>

        <dt>Modified</dt>
        <dd>

<span class="datetime" title="2025-04-30 08:41">4 days, 19 hours ago</span></dd>

        <dt>Type</dt>
        <dd>article</dd>

        <dt>Status</dt>
        <dd>active</dd>

        <dt>License</dt>
        <dd>
            
                <a href="/kb/en/mariadb-galera-cluster-quickstart/+license/">CC BY-SA / Gnu FDL</a>
            
        </dd>

        
    </dl>

    
    <ul class="rss_feeds">
        <li><a href="/kb/en/mariadb-galera-cluster-quickstart/+history/feed/">
            History</a>
        </li>
        <li><a href="/kb/en/mariadb-galera-cluster-quickstart/+comments/feed/">
            Comments</a>
        </li>
    </ul>
    

</div>
</div>





    
    
    

<div class="well well-small box attachments"><div><div class="edit_link pull-right"><a href="/kb/en/mariadb-galera-cluster-quickstart/+edit/attachments/">Edit</a></div><h5>Attachments</h5></div><div>

        
            <div class="no_data">No attachments exist</div>
        
    
</div>
</div>

    



    
    






</div>


                    

































                </aside>
            
            
            
                
            
            
                
            
            <section id="content" class="limited_width col-md-8 clearfix">
                
                    <h1>MariaDB Galera Cluster Quickstart</h1>
                

                



                <div>
                    
    

    
    
    

    <div class="node creole">
        
        
        


    
    <div class="answer formatted">
        <div class="table_of_contents well well-small">
<h3>Contents</h3>
 <ol class="toc">

 <li class=""><a href="#overview" title="Overview">Overview</a></li>

 <li class=""><a href="#how-it-works" title="How it Works">How it Works</a></li>

 <li class=""><a href="#architecture" title="Architecture">Architecture</a></li>

 <li class=""><a href="#cluster-configuration" title="Cluster Configuration">Cluster Configuration</a> <ol class="toc">

    <li class=""><a href="#general-configuration" title="General Configuration">General Configuration</a></li>

    <li class=""><a href="#cluster-name-and-address" title="Cluster Name and Address">Cluster Name and Address</a></li>

    <li class=""><a href="#galera-replicator-plugin" title="Galera Replicator Plugin">Galera Replicator Plugin</a> </ol>
</li>

 <li class=""><a href="#cluster-replication" title="Cluster Replication">Cluster Replication</a> <ol class="toc">

    <li class=""><a href="#quorum" title="Quorum">Quorum</a></li>

    <li class=""><a href="#dynamically-bootstrapping-the-cluster" title="Dynamically Bootstrapping the Cluster">Dynamically Bootstrapping the Cluster</a></li>

    <li class=""><a href="#state-transfers" title="State Transfers">State Transfers</a></li>

    <li class=""><a href="#flow-control" title="Flow Control">Flow Control</a></li>

    <li class=""><a href="#eviction" title="Eviction">Eviction</a></li>

    <li class=""><a href="#streaming-replication" title="Streaming Replication">Streaming Replication</a></li>

    <li class=""><a href="#initiate-streaming-replication" title="Initiate Streaming Replication">Initiate Streaming Replication</a></li>

    <li class=""><a href="#galera-arbitrator" title="Galera Arbitrator">Galera Arbitrator</a></li>

    <li class=""><a href="#scale-out" title="Scale-out">Scale-out</a></li>

    <li class=""><a href="#failover" title="Failover">Failover</a></li>

    <li class=""><a href="#backups" title="Backups">Backups</a></li>

    <li class=""><a href="#encryption" title="Encryption">Encryption</a></li>

    <li class=""><a href="#data-in-transit-encryption" title="Data-in-Transit Encryption">Data-in-Transit Encryption</a></li>

    <li class=""><a href="#enabling-gcache-encryption" title="Enabling GCache Encryption">Enabling GCache Encryption</a></li>

    <li class=""><a href="#disabling-gcache-encryption" title="Disabling GCache Encryption">Disabling GCache Encryption</a> </ol>
</li>
</div>
<h1 class="anchored_heading" id="overview">Overview</h1>
<p>MariaDB Enterprise Cluster, powered by Galera, is available with MariaDB Enterprise Server. MariaDB Galera Cluster is available with MariaDB Community Server.</p>
<p>In order to handle increasing load and especially when that load exceeds what a single server can process, it is best practice to deploy multiple MariaDB Enterprise Servers with a replication solution to maintain data consistency between them. MariaDB Enterprise Cluster is a multi-primary replication solution that serves as an alternative to the single-primary MariaDB Replication.</p>
<h1 class="anchored_heading" id="how-it-works">How it Works</h1>
<p>MariaDB Enterprise Cluster is built on MariaDB Enterprise Server with Galera Cluster and MariaDB MaxScale. In MariaDB Enterprise Server 10.5 and later, it features enterprise-specific options, such as data-at-rest encryption for the write-set cache, that are not available in other Galera Cluster implementations.</p>
<p>As a multi-primary replication solution, any MariaDB Enterprise Server can operate as a Primary Server. This means that changes made to any node in the cluster replicate to every other node in the cluster, using certification-based replication and global ordering of transactions for the InnoDB storage engine.</p>
<div class="cstm-style bluebox"><p><strong>Note:</strong> MariaDB Enterprise Cluster is only available for Linux operating systems.</p>
</div><h1 class="anchored_heading" id="architecture">Architecture</h1>
<p>There are a few things to consider when planning the hardware, virtual machines, or containers for MariaDB Enterprise Cluster.</p>
<p>MariaDB Enterprise Cluster architecture involves deploying <a href="/kb/en/maxscale/">MariaDB MaxScale</a> with multiple instances of MariaDB Enterprise Server. The Servers are configured to use multi-primary replication to maintain consistency between themselves while MariaDB MaxScale routes reads and writes between them.</p>
<p>The application establishes a client connection to MariaDB MaxScale. MaxScale then routes statements to one of the MariaDB Enterprise Servers in the cluster. Writes made to any node in this cluster replicate to all the other nodes of the cluster.</p>
<p>When MariaDB Enterprise Servers start in a cluster:</p>
<ul start="1"><li>Each Server attempts to establish network connectivity with the other Servers in the cluster
</li><li>Groups of connected Servers form a component
</li><li>When a Server establishes network connectivity with the Primary Component, it synchronizes its local database with that of the cluster
</li><li>As a member of the Primary Component, the Server becomes operational — able to accept read and write queries from clients
</li><li>During startup, the Primary Component is the Server bootstrapped to run as the Primary Component. Once the cluster is online, the Primary Component is any combination of Servers which includes a minimum of more than half the total number of Servers.
</li><li>A Server or group of Servers that loses network connectivity with the majority of the cluster becomes non-operational.
</li></ul>
<p>In planning the number of systems to provision for MariaDB Enterprise Cluster, it is important to keep cluster operation in mind. Ensuring that it has enough disk space and that it is able to maintain a Primary Component in the event of outages.</p>
<ul start="1"><li>Each Server requires the minimum amount of disk space needed to store the entire database. The upper storage limit for MariaDB Enterprise Cluster is that of the smallest disk in use.
</li><li>Each switch in use should have an odd number of Servers above three.
</li><li>In a cluster that spans multiple switches, each data center in use should have an odd number of switches above three.
</li><li>In a cluster that spans multiple data centers, use an odd number of data centers above three.
</li><li>Each data center in use should have at least one Server dedicated to backup operations. This can be another cluster node or a separate Replica Server kept in sync using MariaDB Replication.
</li></ul>
<p>In case of planning Servers to the switch, switches to the data center, and data centers in the cluster, this model helps preserve the Primary Component. A minimum of three in use means that a single Server or switch can fail without taking down the cluster.</p>
<p>Using an odd number above three reduces the risk of a split-brain situation (that is, a case where two separate groups of Servers believe that they are part of the Primary Component and remain operational).</p>
<h1 class="anchored_heading" id="cluster-configuration">Cluster Configuration</h1>
<p>Nodes in MariaDB Enterprise Cluster are individual MariaDB Enterprise Servers configured to perform multi-primary cluster replication. This configuration is set using a series of system variables in the configuration file.</p>
<pre class="fixed">[mariadb]

# General Configuration
bind_address             = 0.0.0.0
innodb_autoinc_lock_mode = 2

# Cluster Configuration
wsrep_cluster_name    = &#34;accounting_cluster&#34;
wsrep_cluster_address = &#34;gcomm://192.0.2.1,192.0.2.2,192.0.2.3&#34;

# wsrep Provider
wsrep_provider = /usr/lib/galera/libgalera_enterprise_smm.so
wsrep_provider_options = &#34;evs.suspect_timeout=PT10S&#34;
</pre><p>Additional information on system variables is available in the Reference chapter.</p>
<h2 class="anchored_heading" id="general-configuration">General Configuration</h2>
<p>The <code>innodb_autoinc_lock_mode</code> system variable must be set to a value of 2 to enable interleaved lock mode. MariaDB Enterprise Cluster does not support other lock modes.</p>
<p>Ensure also that the <code>bind_address</code> system variable is properly set to allow MariaDB Enterprise Server to listen for TCP/IP connections:</p>
<pre class="fixed">bind_address             = 0.0.0.0
innodb_autoinc_lock_mode = 2
</pre><h2 class="anchored_heading" id="cluster-name-and-address">Cluster Name and Address</h2>
<p>MariaDB Enterprise Cluster requires that you set a name for your cluster, using the <code>wsrep_cluster_name</code> system variable. When nodes connect to each other, they check the cluster name to ensure that they've connected to the correct cluster before replicating data. All Servers in the cluster must have the same value for this system variable.</p>
<p>Using the <code>wsrep_cluster_address</code> system variable, you can define the back-end protocol (always gcomm) and comma-separated list of the IP addresses or domain names of the other nodes in the cluster.</p>
<pre class="fixed">wsrep_cluster_name    = &#34;accounting_cluster&#34;
wsrep_cluster_address = &#34;gcomm://192.0.2.1,192.0.2.2,192.0.2.3&#34;
</pre><p>It is best practice to list all nodes on this system variable, as this is the list the node searches when attempting to reestablish network connectivity with the primary component.</p>
<div class="cstm-style bluebox"><p><strong>Note:</strong> In certain environments, such as deployments in the cloud, you may also need to set the <code>wsrep_node_address</code> system variable, so that MariaDB Enterprise Server properly informs other Servers how to reach it.</p>
</div><h2 class="anchored_heading" id="galera-replicator-plugin">Galera Replicator Plugin</h2>
<p>MariaDB Enterprise Server connects to other Servers and replicates data from the cluster through a wsrep Provider called the Galera Replicator plugin. In order to enable clustering, specify the path to the relevant <code>.so</code> file using the <code>wsrep_provider</code> system variable.</p>
<p>MariaDB Enterprise Server 10.4 and later installations use an enterprise-build of the Galera Enterprise 4 plugin. This includes all the features of Galera Cluster 4 as well as enterprise features like GCache encryption.</p>
<p>To enable MariaDB Enterprise Cluster, use the <code>libgalera_enterprise_smm.so</code> library:</p>
<pre class="fixed">wsrep_provider = /usr/lib/galera/libgalera_enterprise_smm.so
</pre><p>MariaDB Enterprise Server use the older community-release of the Galera 3 plugin. This is set using the <code>libgalera_smm.so</code> library:</p>
<pre class="fixed">wsrep_provider = /usr/lib/galera/libgalera_smm.so
</pre><p>In addition to system variables, there is a set of options that you can pass to the wsrep Provider to configure or to otherwise adjust its operations. This is done through the <code>wsrep_provider_options</code> system variable:</p>
<pre class="fixed">wsrep_provider_options = &#34;evs.suspect_timeout=PT10S&#34;
</pre><p>Additional information is available in the Reference chapter.</p>
<h1 class="anchored_heading" id="cluster-replication">Cluster Replication</h1>
<p>MariaDB Enterprise Cluster implements a multi-primary replication solution.</p>
<p>When you write to a table on a node, the node collects the write into a write-set transaction, which it then replicates to the other nodes in the cluster.</p>
<p>Your application can write to any node in the cluster. Each node certifies the replicated write-set. If the transaction has no conflicts, the nodes apply it. If the transaction does have conflicts, it is rejected and all of the nodes revert the changes.</p>
<h2 class="anchored_heading" id="quorum">Quorum</h2>
<p>The first node you start in MariaDB Enterprise Cluster bootstraps the Primary Component. Each subsequent node that establishes a connection joins and synchronizes with the Primary Component. A cluster achieves a quorum when more than half the nodes are joined to the Primary Component.</p>
<p>When a component forms that has less than half the nodes in the cluster, it becomes non-operational, since it believes there is a running Primary Component to which it has lost network connectivity.</p>
<p>These quorum requirements, combined with the requisite number of odd nodes, avoid a split brain situation, or one in which two separate components believe they are each the Primary Component.</p>
<h2 class="anchored_heading" id="dynamically-bootstrapping-the-cluster">Dynamically Bootstrapping the Cluster</h2>
<p>In cases where the cluster goes down and your nodes become non-operational, you can dynamically bootstrap the cluster.</p>
<p>First, find the most up-to-date node (that is, the node with the highest value for the <code>wsrep_last_committed</code> status variable):</p>
<pre class="fixed">SHOW STATUS LIKE 'wsrep_last_committed';
</pre><p>Once you determine the node with the most recent transaction, you can designate it as the Primary Component by running the following on it:</p>
<pre class="fixed">SET GLOBAL wsrep_provider_options=&#34;pc.bootstrap=YES&#34;;
</pre><p>The node bootstraps the Primary Component onto itself. Other nodes in the cluster with network connectivity then submit state transfer requests to this node to bring their local databases into sync with what's available on this node.</p>
<h2 class="anchored_heading" id="state-transfers">State Transfers</h2>
<p>From time to time a node can fall behind the cluster. This can occur due to expensive operations being issued to it or due to network connectivity issues that lead to write-sets backing up in the queue. Whatever the cause, when a node finds that it has fallen too far behind the cluster, it attempts to initiate a state transfer.</p>
<p>In a state transfer, the node connects to another node in the cluster and attempts to bring its local database back in sync with the cluster. There are two types of state transfers:</p>
<ul start="1"><li>Incremental State Transfer (IST)
</li></ul>
<ul start="1"><li>State Snapshot Transfer (SST)
</li></ul>
<p>When the donor node receives a state transfer request, it checks its write-set cache (that is, the GCache) to see if it has enough saved write-sets to bring the joiner into sync. If the donor node has the intervening write-sets, it performs an IST operation, where the donor node only sends the missing write-sets to the joiner. The joiner applies these write-sets following the global ordering to bring its local databases into sync with the cluster.</p>
<p>When the donor does not have enough write-sets cached for an IST, it runs an SST operation. In an SST, the donor uses a backup solution, like MariaDB Enterprise Backup, to copy its data directory to the joiner. When the joiner completes the SST, it begins to process the write-sets that came in during the transfer. Once it's in sync with the cluster, it becomes operational.</p>
<p>IST's provide the best performance for state transfers and the size of the GCache may need adjustment to facilitate their use.</p>
<h2 class="anchored_heading" id="flow-control">Flow Control</h2>
<p>MariaDB Enterprise Server uses Flow Control to sometimes throttle transactions and ensure that all nodes work equitably.</p>
<p>Write-sets that replicate to a node are collected by the node in its received queue. The node then processes the write-sets according to global ordering. Large transactions, expensive operations, or simple hardware limitations can lead to the received queue backing up over time.</p>
<p>When a node's received queue grows beyond certain limits, the node initiates Flow Control. In Flow Control, the node pauses replication to work through the write-sets it already has. Once it has worked the received queue down to a certain size, it re-initiates replication.</p>
<h2 class="anchored_heading" id="eviction">Eviction</h2>
<p>A node or nodes will be removed or evicted from a cluster if it becomes non-responsive.</p>
<p>In MariaDB Enterprise Cluster, each node monitors network connectivity and response times from every other node. MariaDB Enterprise Cluster evaluates network performance using the EVS Protocol.</p>
<p>When a node finds another to have poor network connectivity, it adds an entry to the delayed list. If the node becomes active again and the network performance improves for a certain amount of time, an entry for it is removed from the delayed list. That is, the longer a node has network problems the longer it has to be active again to be removed from the delayed list.</p>
<p>If the number of entries for a node in the delayed list exceeds a threshold established for the cluster, the EVS Protocol evicts the node from the cluster.</p>
<p>Evicted nodes become non-operational components. They cannot rejoin the cluster until you restart MariaDB Enterprise Server.</p>
<h2 class="anchored_heading" id="streaming-replication">Streaming Replication</h2>
<p>Under normal operation, huge transactions and long-running transactions are difficult to replicate. MariaDB Enterprise Cluster rejects conflicting transactions and rolls back the changes. A transaction that takes several minutes or longer to run can encounter issues if a small transaction is run on another node and attempts to write to the same table. The large transaction fails because it encounters a conflict when it attempts to replicate.</p>
<p>MariaDB Enterprise Server 10.4 and later support streaming replication for MariaDB Enterprise Cluster. In streaming replication, huge transactions are broken into transactional fragments, which are replicated and applied as the operation runs. This makes it more difficult for intervening sessions to introduce conflicts.</p>
<h2 class="anchored_heading" id="initiate-streaming-replication">Initiate Streaming Replication</h2>
<p>To initiate streaming replication, set the <code>wsrep_trx_fragment_unit and wsrep_trx_fragment_size</code> system variables. You can set the unit to <code>BYTES, ROWS, or STATEMENTS</code>:</p>
<pre class="fixed">SET SESSION wsrep_trx_fragment_unit='STATEMENTS';

SET SESSION wsrep_trx_fragment_size=5;
</pre><p>Then, run your transaction.</p>
<p>Streaming replication works best with very large transactions where you don't expect to encounter conflicts. If the statement does encounter a conflict, the rollback operation is much more expensive than usual. As such, it's best practice to enable streaming replication at a session-level and to disable it by setting the <code>wsrep_trx_fragment_size</code> system variable to 0 when it's not needed.</p>
<pre class="fixed">SET SESSION wsrep_trx_fragment_size=0;
</pre><h2 class="anchored_heading" id="galera-arbitrator">Galera Arbitrator</h2>
<p>Deployments on mixed hardware can introduce issues where some MariaDB Enterprise Servers perform better than others. A Server in one part of the world might perform more reliably or be physically closer to most users than others. In cases where a particular MariaDB Enterprise Server holds logical significance for your cluster, you can weight its value in quorum calculations.</p>
<p>Galera Arbitrator is a separate process that runs alongside MariaDB Enterprise Server. While the Arbitrator does not take part in replication, whenever the cluster performs quorum calculations it gives the Arbitrator a vote as though it were another MariaDB Enterprise Server. In effect this means that the system has the vote of MariaDB Enterprise Server plus any running Arbitrators in determining whether it's part of the Primary Component.</p>
<p>Bear in mind that the Galera Arbitrator is a separate package, <code>galera-arbitrator-4</code>, which is not installed by default with MariaDB Enterprise Server.</p>
<h2 class="anchored_heading" id="scale-out">Scale-out</h2>
<p>MariaDB Enterprise Servers that join a cluster attempt to connect to the IP addresses provided to the <code>wsrep_cluster_address</code> system variable. This variable adjusts itself at runtime to include the addresses of all connected nodes.</p>
<p>To scale-out MariaDB Enterprise Cluster, start new MariaDB Enterprise Servers with the appropriate <code>wsrep_cluster_address</code> list and the same <code>wsrep_cluster_name</code> value. The new nodes establish network connectivity with the running cluster and request a state transfer to bring their local database into sync with the cluster.</p>
<p>Once the MariaDB Enterprise Server reports itself as being in sync with the cluster, MariaDB MaxScale can begin including it in the load distribution for the cluster.</p>
<p>Being a multi-primary replication solution means that any MariaDB Enterprise Server in the cluster can handle write operations, but write scale-out is minimal as every Server in the cluster needs to apply the changes.</p>
<h2 class="anchored_heading" id="failover">Failover</h2>
<p>MariaDB Enterprise Cluster does not provide failover capabilities on its own. <a href="/kb/en/maxscale/">MariaDB MaxScale</a> is used to route client connections to MariaDB Enterprise Server.</p>
<p>Unlike a traditional load balancer, MariaDB MaxScale is aware of changes in the node and cluster states.</p>
<p>MaxScale takes nodes out of the distribution that initiate a blocking SST operation or Flow Control or otherwise go down, which allows them to recover or catch up without stopping service to the rest of the cluster.</p>
<h2 class="anchored_heading" id="backups">Backups</h2>
<p>With MariaDB Enterprise Cluster, each node contains a replica of all the data in the cluster. As such, you run <a href="/kb/en/mariabackup/">MariaDB Enterprise Backup</a> on any node to backup the available data. The process for backing-up a node is the same as for a single MariaDB Enterprise Server.</p>
<h2 class="anchored_heading" id="encryption">Encryption</h2>
<p>MariaDB Enterprise Server supports data-at-rest encryption to secure data on disk, and data-in-transit encryption to secure data on the network.</p>
<p>MariaDB Enterprise Server support data-at-rest encryption of the GCache, the file used by Galera systems to cache write sets. Encrypting GCache ensures the Server encrypts both data it temporarily caches from the cluster as well as the data it permanently stores in tablespaces.</p>
<p>For data-in-transit, MariaDB Enterprise Cluster supports encryption the same as MariaDB Server and additionally provides data-in-transit encryption for Galera replication traffic and for State Snapshot Transfer (SST) traffic.</p>
<h2 class="anchored_heading" id="data-in-transit-encryption">Data-in-Transit Encryption</h2>
<p>MariaDB Enterprise Server 10.6 encrypts Galera replication and SST traffic using the server's TLS configuration by default. With the <code>wsrep_ssl_mode</code> system variable, you can configure the node to use the TLS configuration of <a href="/kb/en/wsrep_provider_options/">wsrep Provider options</a>.</p>
<p>MariaDB Enterprise Server 10.5 and earlier support encrypting Galera replication and SST traffic through <a href="/kb/en/wsrep_provider_options/">wsrep Provider options</a>.</p>
<p>TLS encryption is only available when used by all nodes in the cluster.</p>
<h2 class="anchored_heading" id="enabling-gcache-encryption">Enabling GCache Encryption</h2>
<p>To encrypt data-at-rest such as GCache, stop the server, set <code>encrypt_binlog=ON</code> within the MariaDB Enterprise Server configuration file, and restart the server. This variable also controls encryption of the binary log and the relay log when used.</p>
<pre class="fixed">[mariadb]
...
# Controls Binary Log, Relay Log, and GCache Encryption
encrypt_binlog=ON
</pre><h2 class="anchored_heading" id="disabling-gcache-encryption">Disabling GCache Encryption</h2>
<p>To stop using encryption on the GCache file, stop the server, set <code>encrypt_binlog=OFF</code> within the MariaDB Enterprise Server configuration file, and restart the server. This variable also controls encryption of the binary log and the relay log when used.</p>
<pre class="fixed">[mariadb]
...
# Controls Binary Log, Relay Log, and GCache Encryption
encrypt_binlog=OFF
</pre>
    </div>


        
            <div id="subscribe" class="well well-small hide hidden-print"
                 data-subscribe-url="/kb/en/mariadb-galera-cluster-quickstart/+subscriptions/add"
                 data-unsubscribe-url="/kb/en/mariadb-galera-cluster-quickstart/+subscriptions/remove">
            </div>
        

        
        
    
        <div class="simple_section_nav">
            <ul class="nav nav-pills">
                
                    <li><a href="/kb/en/what-is-mariadb-galera-cluster/">
                        ← What is MariaDB Galera Cluster?
                    </a>
                    </li>
                
                
                    <li><a href="/kb/en/galera-cluster/">
                        ↑ MariaDB Galera Cluster ↑
                    </a>
                    </li>
                
                
                    <li class="pull-right"><a href="/kb/en/about-galera-replication/">
                        About Galera Replication →
                    </a>
                    </li>
                
            </ul>
        </div>
    

        

        
        <h2>Comments</h2>
        
    
    <div id="comments" data-node-id="15969" data-comments-url="/kb/en/mariadb-galera-cluster-quickstart/+comments"
         data-reply-url="/kb/en/mariadb-galera-cluster-quickstart/comments/post/">
        Comments loading...
    </div>

        

    </div>


                    <div id="content_disclaimer" class="graybox">
                        Content reproduced on this site is the property of its respective owners,
                        and this content is not reviewed in advance by MariaDB. The views, information and opinions
                        expressed by this content do not necessarily represent those of MariaDB or any other party.
                    </div>
                </div>
            </section>

            
                <div id="right_bar" class="col-md-2">
                    
    
        
        <ul class="section_navigation well well-small hidden-xs hidden-sm">
            
                <li class="parent"><a href="/kb/en/galera-cluster/">
                    ↑ MariaDB Galera Cluster ↑
                </a>
                </li>
            
            
                
                    <li>
                        <a href="/kb/en/what-is-mariadb-galera-cluster/">
                            
                            What is MariaDB Galera Cluster?
                        </a>
                    </li>
                
            
                
                    <li class="active">
                        <span>MariaDB Galera Cluster Quickstart</span>
                        
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/about-galera-replication/">
                            
                            About Galera Replication
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/galera-use-cases/">
                            
                            Galera Use Cases
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/mariadb-galera-cluster-known-limitations/">
                            
                            MariaDB Galera Cluster - Known Limitations
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/tips-on-converting-to-galera/">
                            
                            Tips on Converting to Galera
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/getting-started-with-mariadb-galera-cluster/">
                            
                            Getting Started with MariaDB Galera Cluster
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/configuring-mariadb-galera-cluster/">
                            
                            Configuring MariaDB Galera Cluster
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/state-snapshot-transfers-ssts-in-galera-cluster/">
                            
                            State Snapshot Transfers (SSTs) in Galera Cluster
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/galera-cluster-status-variables/">
                            
                            Galera Cluster Status Variables
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/galera-cluster-system-variables/">
                            
                            Galera Cluster System Variables
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/building-the-galera-wsrep-package-on-ubuntu-and-debian/">
                            
                            Building the Galera wsrep Package on Ubuntu and Debian
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/building-the-galera-wsrep-package-on-fedora/">
                            
                            Building the Galera wsrep Package on Fedora
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/installing-galera-from-source/">
                            
                            Installing Galera from Source
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/galera-test-repositories/">
                            
                            Galera Test Repositories
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/wsrep_provider_options/">
                            
                            wsrep_provider_options
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/galera-cluster-address/">
                            
                            Galera Cluster Address
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/galera-load-balancer/">
                            
                            Galera Load Balancer
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/mariadb-galera-cluster-releases/">
                            
                            MariaDB Galera Cluster Releases
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/using-mariadb-replication-with-mariadb-galera-cluster/">
                            
                            Using MariaDB Replication with MariaDB Galera Cluster
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/securing-communications-in-galera-cluster/">
                            <span class="pull-right not_primary"></span>
                            Securing Communications in Galera Cluster
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/installing-mariadb-galera-on-ibm-cloud/">
                            
                            Installing MariaDB Galera on IBM Cloud
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/upgrading-galera-cluster/">
                            
                            Upgrading Galera Cluster
                        </a>
                    </li>
                
            
        </ul>
    
    

                </div>
            
        </div>
    </div>
</div>

<!-- Footer -->
<footer id="footer">
    <div class="footer">
        <div class="container">
            <div class="row">
                <div class="col-xs-12">
                    <ul class="list-inline text-center footer-nav">
                        <li>
                            <h5>
                                <a href="https://mariadb.com/products" title="Products">Products</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/solutions" title="Solutions">Solutions</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/resources" title="Resources">Resources</a>
                            </h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/about-us" title="About MariaDB">Company</a></h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/pricing" title="Pricing">Pricing</a>
                            </h5>
                        </li>
                        
                        
                        <li>
                            <h5><a href="https://mariadb.com/downloads" title="Download">Download MariaDB</a></h5>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="row row-10">
                
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div id="block-footerformcontact" class="block block-block-content block-block-contentd754ee1b-3cc9-40e7-9ef4-f504f1197fb1">
                        
                            <h5 style="font-weight: 400;">Subscribe to our newsletter!</h5>
                            <script src="//app-sj15.marketo.com/js/forms2/js/forms2.min.js"></script><form id="mktoForm_1498"></form>
                            <script>
                                <!--//--><![CDATA[// ><!--
                                MktoForms2.loadForm("//app-sj15.marketo.com", "573-PXI-984", 1498);
                                //--><!]]]]><![CDATA[>
                                //--><!]]>
                            </script>
                        
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div class="footer-copyright">
                        <div class="text-center">
                            <ul class="list-inline no-margin">
                                <li>
                                    <a href="/legal" title="Legal">Legal</a>
                                </li>
                                <li>
                                    <a href="/privacy-policy" title="Privacy Policy">Privacy Policy</a>
                                </li>
                                <li>
                                    <a href="/cookie-policy/" title="Cookies">Cookie Policy</a>
                                </li>
                            </ul>
                            <p>Copyright &copy; 2025 MariaDB. All rights reserved.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
</footer>
</div>

<div id="ajax_loading">
    <img src="/kb/static/images/ajax-loader.a51c5608d01a.gif" />
</div>

    <!-- Google Tag Manager -->
    <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-MK2847"
                      height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
            '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MK2847');</script>
    <!-- End Google Tag Manager -->

</body>

<script type="text/javascript" src="/kb/static/js/main.1587e3a666fc.js" charset="utf-8"></script>

</html>