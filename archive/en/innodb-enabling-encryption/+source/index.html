<!DOCTYPE html>
<html>
<head data-cookie-domain=""
      data-cookie-path="/">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="apple-touch-icon" sizes="180x180" href="/kb/static/images/favicons/apple-touch-icon.159e713979be.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/kb/static/images/favicons/favicon-32x32.bc0ac1d5d11e.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/kb/static/images/favicons/favicon-16x16.5801f8f0f34e.png">
    <link rel="shortcut icon" href="/kb/static/images/favicons/favicon.d122d305dee4.ico" type="image/x-icon" />

    <title>Enabling InnoDB Encryption - Source - MariaDB Knowledge Base</title>

    <link href="/kb/static/css/main.f7633538c846.css" rel="stylesheet" type="text/css" />

    
        <meta name="robots" content="noindex, nofollow">
    

    

    <!-- FB Open Graph tags -->
    <meta property="og:title" content="Enabling InnoDB Encryption - Source" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://mariadb.com/kb/en/innodb-enabling-encryption/+source/" />
    <meta property="og:image" content="http://mariadb.comaskmonty-logo.png" />
    <meta property="og:site_name" content="MariaDB KnowledgeBase" />
    <meta property="fb:admins" content="514852603" />
    <meta property="og:description" content="" />

    <meta name="description" content="" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="//fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet"/>
    
</head>
<body class="mpkb nodes autoresize nodes_source jqui" id="nodes_source">





<div id="menu-mobile" class="visible-sm visible-xs">

    <div>
        <div id="mobile-close-menu" class="text-right">
            <a href="javascript:void(0)" title="Close Menu" id="back-main" class="toggle-menu">X<span></span></a>
        </div>
    </div>
    <div class="mainmenu-mobile">
        <ul class="ls-none ul-menu">
            <li data-sub="submenu5"><a class="open-form-search" href="/kb/search/" title="Search">Search </a></li>
            <li data-sub="submenu0"><a href="/products" title="Products">Products</a><span class="arrow-main"></span></li>
            <li data-sub="submenu1"><a href="/services" title="Services">Services</a><span class="arrow-main"></span></li>
            <li data-sub="submenu2"><a href="/resources" title="Resources">Resources</a><span class="arrow-main"></span></li>
            <li data-sub="submenu3"><a href="/about-us" title="About">About</a><span class="arrow-main"></span></li>
            <li data-sub="submenu4"><a href="/contact" title="Contact">Contact</a></li>
        </ul>
    </div>

    <div class="nav-top-mobile">
        <div class="select-box form">

            <ul class="inline-block-md mb-none top-nav">
                <li>

                </li>
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/innodb-enabling-encryption/+source/"> Login</a>
                    </li>
                
            </ul>



        </div>
        <p class="text-center copyright">Copyright &copy; 2025 MariaDB. All rights reserved.</p>
    </div>
</div>
<div class="violator-wrap d-none" id="top_violator">
    <div class="container">
        <div class="row">
            <div class="col-xs-12 col-sm-12">
                <div class="violator-outer">
                    <div class="violator-inner">
                        <div class="row">
                            <div class="col-xs-12 col-sm-9 col-lg-7 col-lg-offset-2" id="top_violator_content">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="content-link" target="_blank" rel="nofollow noreferrer">
                                    <span>The Ultimate Guide to High Availability with MariaDB</span>
                                </a>
                            </div>
                            <div class="col-xs-12 col-sm-3" id="top_violator_cta">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="btn btn-mariadb" target="_blank" rel="nofollow noreferrer">Download Now</a>
                            </div>
                        </div>
                    </div>
                    <button type="button" class="btn btn-link close-btn">
                        <svg xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 24 24" width="15px" height="15px"><path d="M 4.9902344 3.9902344 A 1.0001 1.0001 0 0 0 4.2929688 5.7070312 L 10.585938 12 L 4.2929688 18.292969 A 1.0001 1.0001 0 1 0 5.7070312 19.707031 L 12 13.414062 L 18.292969 19.707031 A 1.0001 1.0001 0 1 0 19.707031 18.292969 L 13.414062 12 L 19.707031 5.7070312 A 1.0001 1.0001 0 0 0 18.980469 3.9902344 A 1.0001 1.0001 0 0 0 18.292969 4.2929688 L 12 10.585938 L 5.7070312 4.2929688 A 1.0001 1.0001 0 0 0 4.9902344 3.9902344 z"/></svg>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="wrapper">
<div id="top-nav">
    <div class="container">
        <ul class="hidden-sm hidden-xs" >
            <li><a href="https://mariadb.com/kb/">Knowledge Base</a></li>
            <li><a href="https://mariadb.com/contact/">Contact</a></li>
            
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/innodb-enabling-encryption/+source/" rel="nofollow">Login</a>
                    </li>
                
            
            
            <li id="search-form">
                <form action="/kb/en/+search/" method="get" id="search-block-form" accept-charset="UTF-8">
                    <input id="search" title="Enter the terms you wish to search for."
                           placeholder="Search . . ." type="text"
                           name="q" value="" size="15" maxlength="128" class="form-text"
                           data-autocomplete-url="/kb/en/+search/autocomplete/">
                    <input type="hidden" name="quick" value="1" />
                    <input type="hidden" name="source" value="kb" />
                </form>
            </li>
            <li><a id="search-toggler" href="/kb/search/">Search</a></li>
            
        </ul>
    </div>
</div>
<div id="navbar-bottom" class="navbar">
    <div class="container">
        
        
        
        
        <div class="row">
            <div class="col-md-3 col-sm-9 col-xs-9">
                <a class="brand" href="/" title="MariaDB">
                    <img src="/kb/static/images/logo-2018-black.95f5978ae14d.png">
                </a>
            </div>
            <div class="col-md-9 hidden-sm hidden-xs">
                <div class="main-menu">
                    <ul id="main-menu" class="nav navbar-nav inline-block-sm">
    <li class="has-sub full-menu">
        <a href="/products" title="Products">Products</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/solutions" title="Solutions">Solutions</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/resources" title="Resources">Resources</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/about-us" title="Company">Company</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/pricing" title="Pricing">Pricing</a>
    </li>
    
    <li class="">
        <a class="button electric-eel small top-bar-right-download" href="/downloads/">Download</a>
    </li>
</ul>
                </div>
            </div>
            <div class="col-md-3 visible-sm visible-xs col-sm-3 col-xs-3 ps-rv">
                <div class="navbar-header text-right pull-right">
                    <button type="button" class="menu-control toggle-menu" id="open-menu">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="main">
    <div class="container">
        

        <div id="subheader1" class="clearfix">
            <div class="pull-left">
                
                <div id="breadcrumbs" class="breadcrumb">
                    <a href="/kb/en/">Knowledge Base</a>
                    


    
    » <a class="crumb" href="/kb/en/documentation/">MariaDB Server Documentation</a>
    

    
    » <a class="crumb" href="/kb/en/mariadb-administration/">MariaDB Administration</a>
    

    
    » <a class="crumb" href="/kb/en/user-server-security/">User &amp; Server Security</a>
    

    
    » <a class="crumb" href="/kb/en/securing-mariadb/">Securing MariaDB</a>
    

    
    » <a class="crumb" href="/kb/en/securing-mariadb-encryption/">Encryption</a>
    

    
    » <a class="crumb" href="/kb/en/encryption-data-at-rest-encryption/">Data-at-Rest Encryption</a>
    

    
    » <a class="crumb" href="/kb/en/innodb-encryption/">InnoDB Encryption</a>
    


    » <a class="node_link crumb" href="/kb/en/innodb-enabling-encryption/">Enabling InnoDB Encryption</a>


                </div>
                
            </div>
        </div>
    </div>
    <div class="container" id="container-main">
        <div class="row">
            
            
                
                <aside id="sidebar-first" class="sidebar col-md-2 hidden-xs hidden-sm hidden-print">
                    
                        
                        <ul id="category_menu" class="nav nav-pills nav-stacked">
                            <li><a href="/kb/en/">Home</a></li>
                            
                                
                                    <li><a href="/kb/en/+questions/">Open Questions</a></li>
                                
                                <li><a href="/kb/en/documentation/">MariaDB Server</a></li>
                                <li><a href="/kb/en/maxscale/">MariaDB MaxScale</a></li>
                                <li><a href="/kb/en/mariadb-columnstore/">MariaDB ColumnStore</a></li>
                                <li><a href="/kb/en/connectors/">Connectors</a></li>
                            

                        </ul>
                    

                    
                        <div>
    

<div class="well well-small box actions"><div>

        <a class="btn btn-block btn-small" href="/kb/en/innodb-enabling-encryption/">Return to article</a>
    
</div>
</div>

</div>
                    

                    

































                </aside>
            
            
            
                
            
            
            <section id="content" class="limited_width col-md-10 clearfix">
                
                    <h1>Enabling InnoDB Encryption - Source</h1>
                

                



                <div>
                    

    

    
    <div class="revision_info">
        <dl class="table">
            <dt>Revision</dt>
            <dd><a href="/kb/en/innodb-enabling-encryption/+r/115747/">115747</a></dd>
            <dt>User</dt>
            <dd>
<span class="user" id="user-5454">
<a href="/kb/user/id/5454" title="Kenneth Dyer">Kenneth Dyer</a>
</span></dd>
            <dt>Date</dt>
            <dd>

<span class="datetime" title="2022-05-02 12:10">2022-05-02 12:10</span></dd>
        </dl>
    </div>
    


    

    
        
        <textarea id="answer_source" class="creole_source autogrow">&lt;&lt;toc&gt;&gt;

In order to enable data-at-rest encryption for tables using the InnoDB storage engines, you first need to configure the Server to use an [[encryption-key-management|Encryption Key Management]] plugin.  Once this is done, you can enable encryption by setting the [[innodb-system-variables#innodb_encrypt_tables|innodb_encrypt_tables]] system variable to encrypt the InnoDB [[innodb-system-tablespaces|system]] and [[innodb-file-per-table-tablespaces|file]] tablespaces and setting the [[innodb-system-variables#innodb_encrypt_log|innodb_encrypt_log]] system variable to encrypt the InnoDB [[innodb-redo-log|Redo Log]]. 


Setting these system variables enables the encryption feature for InnoDB tables on your server.  To use the feature, you need to use the [[create-table#encryption_key_id|ENCRYPTION_KEY_ID]] table option to set what encryption key you want to use and set the [[create-table#encrypted|ENCRYPTED]] table option to enable encryption.

&lt;&lt;style class=&#34;greenbox&#34;&gt;&gt;
When encrypting any InnoDB tables, the best practice is also enable encryption for the Redo Log.  If you have encrypted InnoDB tables and have not encrypted the Redo Log, data written to an encrypted table may be found unencrypted in the Redo Log. 
&lt;&lt;/style&gt;&gt;

=== Enabling Encryption for Automatically Encrypted Tablespaces

The [[innodb-system-variables#innodb_encrypt_tables|innodb_encrypt_tables]] system variable controls the configuration of automatic encryption of InnoDB tables. It has the following possible values:

&lt;&lt;style class=&#34;darkheader-nospace-borders centered&#34;&gt;&gt;
|= Option |= Description 
| ##OFF## | Disables table encryption.
| ##ON## | Enables table encryption, but allows unencrypted tables to be created.
| ##FORCE## | Enables table encryption, and doesn&#39;t allow unencrypted tables to be created. Added in MariaDB 10.1.4.
&lt;&lt;/style&gt;&gt;

When [[innodb-system-variables/#innodb_encrypt_tables|innodb_encrypt_tables]] is set to ##ON##, InnoDB tables are automatically encrypted by default. For example, the following statements create an encrypted table and confirm that it is encrypted:

&lt;&lt;sql&gt;&gt;
SET GLOBAL innodb_encryption_threads=4;

SET GLOBAL innodb_encrypt_tables=ON;

SET SESSION innodb_default_encryption_key_id=100;

CREATE TABLE tab1 (
   id int PRIMARY KEY,
   str varchar(50)
);

SELECT NAME, ENCRYPTION_SCHEME, CURRENT_KEY_ID
FROM information_schema.INNODB_TABLESPACES_ENCRYPTION
WHERE NAME=&#39;db1/tab1&#39;;
+----------+-------------------+----------------+
| NAME     | ENCRYPTION_SCHEME | CURRENT_KEY_ID |
+----------+-------------------+----------------+
| db1/tab1 |                 1 |            100 |
+----------+-------------------+----------------+
&lt;&lt;/sql&gt;&gt;

When [[innodb-system-variables/#innodb_encrypt_tables|innodb_encrypt_tables]] is set to ##ON##, an unencrypted InnoDB table can be created by setting the [[create-table/#encrypted|ENCRYPTED]] table option to ##NO## for the table. For example, the following statements create an unencrypted table and confirm that it is not encrypted:

&lt;&lt;sql&gt;&gt;
SET GLOBAL innodb_encryption_threads=4;

SET GLOBAL innodb_encrypt_tables=ON;

SET SESSION innodb_default_encryption_key_id=100;

CREATE TABLE tab1 (
   id int PRIMARY KEY,
   str varchar(50)
) ENCRYPTED=NO;

SELECT NAME, ENCRYPTION_SCHEME, CURRENT_KEY_ID
FROM information_schema.INNODB_TABLESPACES_ENCRYPTION
WHERE NAME=&#39;db1/tab1&#39;;
+----------+-------------------+----------------+
| NAME     | ENCRYPTION_SCHEME | CURRENT_KEY_ID |
+----------+-------------------+----------------+
| db1/tab1 |                 0 |            100 |
+----------+-------------------+----------------+
&lt;&lt;/sql&gt;&gt;

When [[innodb-system-variables/#innodb_encrypt_tables|innodb_encrypt_tables]] is set to ##FORCE##, InnoDB tables are automatically encrypted by default, and unencrypted InnoDB tables can **not** be created. In this scenario, if you set the [[create-table/#encrypted|ENCRYPTED]] table option to ##NO## for a table, then you will encounter an error. For example:

&lt;&lt;sql&gt;&gt;
SET GLOBAL innodb_encryption_threads=4;

SET GLOBAL innodb_encrypt_tables=&#39;FORCE&#39;;

SET SESSION innodb_default_encryption_key_id=100;

CREATE TABLE tab1 (
   id int PRIMARY KEY,
   str varchar(50)
) ENCRYPTED=NO;
ERROR 1005 (HY000): Can&#39;t create table `db1`.`tab1` (errno: 140 &#34;Wrong create options&#34;)

SHOW WARNINGS;
+---------+------+----------------------------------------------------------------------+
| Level   | Code | Message                                                              |
+---------+------+----------------------------------------------------------------------+
| Warning |  140 | InnoDB: ENCRYPTED=NO implies ENCRYPTION_KEY_ID=1                     |
| Warning |  140 | InnoDB: ENCRYPTED=NO cannot be used with innodb_encrypt_tables=FORCE |
| Error   | 1005 | Can&#39;t create table `db1`.`tab1` (errno: 140 &#34;Wrong create options&#34;)  |
| Warning | 1030 | Got error 140 &#34;Wrong create options&#34; from storage engine InnoDB      |
+---------+------+----------------------------------------------------------------------+
4 rows in set (0.00 sec)
&lt;&lt;/sql&gt;&gt;

&lt;&lt;style class=&#34;greenbox&#34;&gt;&gt;
When [[innodb-system-variables/#innodb_encrypt_tables|innodb_encrypt_tables]] is set to ##ON## or ##FORCE##, then you must ensure that [[innodb-system-variables#innodb_encryption_threads|innodb_encryption_threads]] is set to a non-zero value, so that InnoDB can perform any necessary encryption operations in the background. See [[innodb-background-encryption-threads#background-operations|background operations]] for more information about that. [[innodb-system-variables#innodb_encryption_rotate_key_age|innodb_encryption_rotate_key_age]] must also be set to a non-zero value for the initial encryption operations to happen in the background. See [[innodb-background-encryption-threads#disabling-background-key-rotation-operations|disabling key rotations]] for more information about that.
&lt;&lt;/style&gt;&gt;

=== Enabling Encryption for Manually Encrypted Tablespaces

If you do not want to automatically encrypt every InnoDB table, then it is possible to manually enable encryption for just the subset of InnoDB tables that you would like to encrypt. MariaDB provides the [[create-table/#encrypted|ENCRYPTED]] and [[create-table/#encryption_key_id|ENCRYPTION_KEY_ID]] table options that can be used to manually enable encryption for specific InnoDB tables. These table options can be used with [[create-table|CREATE TABLE]] and [[alter-table|ALTER TABLE]] statements.  These table options can only be used with InnoDB tables that have their own [[innodb-file-per-table-tablespaces|InnoDB&#39;s file-per-table tablespaces]], meaning that tables that were created with [[innodb-system-variables#innodb_file_per_table|innodb_file_per_table=ON]] set.

&lt;&lt;style class=&#34;darkheader-nospace-borders centered&#34;&gt;&gt;
|= Table Option |= Value |= Description 
| ##ENCRYPTED## | Boolean | Defines whether to encrypt the table
| ##ENCRYPTION_KEY_ID## | 32-bit integer | Defines the identifier for the encryption key to use
&lt;&lt;/style&gt;&gt;

You can manually enable or disable encryption for a table by using the [[create-table/#encrypted|ENCRYPTED]] table option. If you only need to protect a subset of InnoDB tables with encryption, then it can be a good idea to manually encrypt each table that needs the extra protection, rather than encrypting all InnoDB tables globally with [[innodb-system-variables#innodb_encrypt_tables|innodb_encrypt_tables]]. This allows you to balance security with speed, as it means the encryption and decryption performance overhead only applies to those tables that require the additional security.

&lt;&lt;style class=&#34;greenbox&#34;&gt;&gt;
If a manually encrypted InnoDB table contains a [[full-text-indexes|FULLTEXT INDEX]], then the internal table for the full-text index will not also be manually encrypted. To encrypt internal tables for InnoDB full-text indexes, you must [[#enabling-encryption-for-automatically-encrypted-tablespaces|enable automatic InnoDB encryption]] by setting [[innodb-system-variables/#innodb_encrypt_tables|innodb_encrypt_tables]] to ##ON## or ##FORCE##.
&lt;&lt;/style&gt;&gt;

You can also manually specify a [[encrypting-data-for-innodb-xtradb/#encryption-keys|encryption key]] for a table by using the [[create-table/#encryption_key_id|ENCRYPTION_KEY_ID]] table option. This allows you to use different encryption keys for different tables. For example, you might create a table using a statement like this:

&lt;&lt;sql&gt;&gt;
CREATE TABLE tab1 (
   id int PRIMARY KEY,
   str varchar(50)
) ENCRYPTED=YES ENCRYPTION_KEY_ID=100;

SELECT NAME, ENCRYPTION_SCHEME, CURRENT_KEY_ID
FROM information_schema.INNODB_TABLESPACES_ENCRYPTION
WHERE NAME=&#39;db1/tab1&#39;;
+----------+-------------------+----------------+
| NAME     | ENCRYPTION_SCHEME | CURRENT_KEY_ID |
+----------+-------------------+----------------+
| db1/tab1 |                 1 |            100 |
+----------+-------------------+----------------+
&lt;&lt;/sql&gt;&gt;

If the [[create-table/#encryption_key_id|ENCRYPTION_KEY_ID]] table option is not specified, then the table will be encrypted with the key identified by the [[innodb-system-variables#innodb_default_encryption_key_id|innodb_default_encryption_key_id]] system variable. For example, you might create a table using a statement like this:

&lt;&lt;sql&gt;&gt;
SET SESSION innodb_default_encryption_key_id=100;

CREATE TABLE tab1 (
   id int PRIMARY KEY,
   str varchar(50)
) ENCRYPTED=YES;

SELECT NAME, ENCRYPTION_SCHEME, CURRENT_KEY_ID
FROM information_schema.INNODB_TABLESPACES_ENCRYPTION
WHERE NAME=&#39;db1/tab1&#39;;
+----------+-------------------+----------------+
| NAME     | ENCRYPTION_SCHEME | CURRENT_KEY_ID |
+----------+-------------------+----------------+
| db1/tab1 |                 1 |            100 |
+----------+-------------------+----------------+
&lt;&lt;/sql&gt;&gt;

In the event that you have an existing table and you want to manually enable encryption for that table, then you can do the same with an [[alter-table|ALTER TABLE]] statement. For example:

&lt;&lt;sql&gt;&gt;
CREATE TABLE tab1 (
   id int PRIMARY KEY,
   str varchar(50)
) ENCRYPTED=NO;

SELECT NAME, ENCRYPTION_SCHEME, CURRENT_KEY_ID
FROM information_schema.INNODB_TABLESPACES_ENCRYPTION
WHERE NAME=&#39;db1/tab1&#39;;
+----------+-------------------+----------------+
| NAME     | ENCRYPTION_SCHEME | CURRENT_KEY_ID |
+----------+-------------------+----------------+
| db1/tab1 |                 0 |            100 |
+----------+-------------------+----------------+

ALTER TABLE tab1
   ENCRYPTED=YES ENCRYPTION_KEY_ID=100;

SELECT NAME, ENCRYPTION_SCHEME, CURRENT_KEY_ID
FROM information_schema.INNODB_TABLESPACES_ENCRYPTION
WHERE NAME=&#39;db1/tab1&#39;;
+----------+-------------------+----------------+
| NAME     | ENCRYPTION_SCHEME | CURRENT_KEY_ID |
+----------+-------------------+----------------+
| db1/tab1 |                 1 |            100 |
+----------+-------------------+----------------+
&lt;&lt;/sql&gt;&gt;

&lt;&lt;style class=&#34;greenbox&#34;&gt;&gt;
InnoDB does not permit manual encryption changes to tables in the [[innodb-system-tablespaces|system]] tablespace using [[alter-table|ALTER TABLE]]. Encryption of the [[innodb-system-tablespaces|system]] tablespace can only be configured by setting the value of the [[innodb-system-variables#innodb_encrypt_tables|innodb_encrypt_tables]] system variable. This means that when you want to encrypt or decrypt the [[innodb-system-tablespaces|system]] tablespace, you must also set a non-zero value for the [[innodb-system-variables#innodb_encryption_threads|innodb_encryption_threads]] system variable, and you must also set the [[innodb-system-variables#innodb_encryption_rotate_key_age|innodb_system_rotate_key_age]] system variable to ##1## to ensure that the system tablespace is properly encrypted or decrypted by the background threads. See MDEV-14398 for more information.
&lt;&lt;/style&gt;&gt;

=== Enabling Encryption for Temporary Tablespaces

The [[innodb-system-variables#innodb_encrypt_temporary_tables|innodb_encrypt_temporary_tables]] system variable controls the configuration of encryption for the [[innodb-temporary-tablespaces|temporary tablespace]]. It has the following possible values:

&lt;&lt;style class=&#34;darkheader-nospace-borders centered&#34;&gt;&gt;
|= Option |= Description 
| ##OFF## | Disables temporary table encryption.
| ##ON## | Enables temporary table encryption.
&lt;&lt;/style&gt;&gt;

This system variable can be specified as a command-line argument to [[mysqld-options|mysqld]] or it can be specified in a relevant server [[configuring-mariadb-with-option-files/#option-groups|option group]] in an [[configuring-mariadb-with-option-files|option file]]. For example:

&lt;&lt;code&gt;&gt;
[mariadb]
...
innodb_encrypt_temporary_tables=ON
&lt;&lt;/code&gt;&gt;

=== Enabling Encryption for the Redo Log

InnoDB uses the [[innodb-redo-log|Redo Log]] in crash recovery.  By default, these events are written to file in an unencrypted state.  In configuring MariaDB for data-at-rest encryption, ensure that you also enable encryption for the Redo Log.

To encrypt the Redo Log, first [[starting-and-stopping-mariadb-automatically|stop]] the server process.  Then, set the [[innodb-system-variables#innodb_encrypt_log|innodb_encrypt_log]] to ##ON## in a relevant server [[configuring-mariadb-with-option-files/#option-groups|option group]] in an [[configuring-mariadb-with-option-files|option file]]. For example:

&lt;&lt;code&gt;&gt;
[mariadb]
...
innodb_encrypt_log = ON
&lt;&lt;/code&gt;&gt;

Then, start MariaDB.  When the server starts back up, it checks to recover InnoDB in the event of a crash.  Once it is back online, it begins writing encrypted data to the Redo Log.

&lt;&lt;style class=&#34;greenbox&#34;&gt;&gt;
In MariaDB 10.3 and before, InnoDB does not support key rotation for the Redo Log. Key rotation for the Redo Log is supported in MariaDB 10.4 and later. See [[innodb-xtradb-encryption-keys/#key-rotation|InnoDB Encryption Keys: Key Rotation]] for more information.
&lt;&lt;/style&gt;&gt;

=== See Also
* [[disabling-innodb-encryption|Disabling InnoDB encryption]]</textarea>
    


                    <div id="content_disclaimer" class="graybox">
                        Content reproduced on this site is the property of its respective owners,
                        and this content is not reviewed in advance by MariaDB. The views, information and opinions
                        expressed by this content do not necessarily represent those of MariaDB or any other party.
                    </div>
                </div>
            </section>

            
        </div>
    </div>
</div>

<!-- Footer -->
<footer id="footer">
    <div class="footer">
        <div class="container">
            <div class="row">
                <div class="col-xs-12">
                    <ul class="list-inline text-center footer-nav">
                        <li>
                            <h5>
                                <a href="https://mariadb.com/products" title="Products">Products</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/solutions" title="Solutions">Solutions</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/resources" title="Resources">Resources</a>
                            </h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/about-us" title="About MariaDB">Company</a></h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/pricing" title="Pricing">Pricing</a>
                            </h5>
                        </li>
                        
                        
                        <li>
                            <h5><a href="https://mariadb.com/downloads" title="Download">Download MariaDB</a></h5>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="row row-10">
                
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div id="block-footerformcontact" class="block block-block-content block-block-contentd754ee1b-3cc9-40e7-9ef4-f504f1197fb1">
                        
                            <h5 style="font-weight: 400;">Subscribe to our newsletter!</h5>
                            <script src="//app-sj15.marketo.com/js/forms2/js/forms2.min.js"></script><form id="mktoForm_1498"></form>
                            <script>
                                <!--//--><![CDATA[// ><!--
                                MktoForms2.loadForm("//app-sj15.marketo.com", "573-PXI-984", 1498);
                                //--><!]]]]><![CDATA[>
                                //--><!]]>
                            </script>
                        
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div class="footer-copyright">
                        <div class="text-center">
                            <ul class="list-inline no-margin">
                                <li>
                                    <a href="/legal" title="Legal">Legal</a>
                                </li>
                                <li>
                                    <a href="/privacy-policy" title="Privacy Policy">Privacy Policy</a>
                                </li>
                                <li>
                                    <a href="/cookie-policy/" title="Cookies">Cookie Policy</a>
                                </li>
                            </ul>
                            <p>Copyright &copy; 2025 MariaDB. All rights reserved.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
</footer>
</div>

<div id="ajax_loading">
    <img src="/kb/static/images/ajax-loader.a51c5608d01a.gif" />
</div>

    <!-- Google Tag Manager -->
    <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-MK2847"
                      height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
            '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MK2847');</script>
    <!-- End Google Tag Manager -->

</body>

<script type="text/javascript" src="/kb/static/js/main.1587e3a666fc.js" charset="utf-8"></script>

</html>