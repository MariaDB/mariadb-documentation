<!DOCTYPE html>
<html>
<head data-cookie-domain=""
      data-cookie-path="/">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="apple-touch-icon" sizes="180x180" href="/kb/static/images/favicons/apple-touch-icon.159e713979be.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/kb/static/images/favicons/favicon-32x32.bc0ac1d5d11e.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/kb/static/images/favicons/favicon-16x16.5801f8f0f34e.png">
    <link rel="shortcut icon" href="/kb/static/images/favicons/favicon.d122d305dee4.ico" type="image/x-icon" />

    <title>Optimizer Hints - Source - MariaDB Knowledge Base</title>

    <link href="/kb/static/css/main.f7633538c846.css" rel="stylesheet" type="text/css" />

    
        <meta name="robots" content="noindex, nofollow">
    

    

    <!-- FB Open Graph tags -->
    <meta property="og:title" content="Optimizer Hints - Source" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://mariadb.com/kb/en/optimizer-hints/+source/" />
    <meta property="og:image" content="http://mariadb.comaskmonty-logo.png" />
    <meta property="og:site_name" content="MariaDB KnowledgeBase" />
    <meta property="fb:admins" content="514852603" />
    <meta property="og:description" content="" />

    <meta name="description" content="" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="//fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet"/>
    
</head>
<body class="mpkb nodes autoresize nodes_source jqui" id="nodes_source">





<div id="menu-mobile" class="visible-sm visible-xs">

    <div>
        <div id="mobile-close-menu" class="text-right">
            <a href="javascript:void(0)" title="Close Menu" id="back-main" class="toggle-menu">X<span></span></a>
        </div>
    </div>
    <div class="mainmenu-mobile">
        <ul class="ls-none ul-menu">
            <li data-sub="submenu5"><a class="open-form-search" href="/kb/search/" title="Search">Search </a></li>
            <li data-sub="submenu0"><a href="/products" title="Products">Products</a><span class="arrow-main"></span></li>
            <li data-sub="submenu1"><a href="/services" title="Services">Services</a><span class="arrow-main"></span></li>
            <li data-sub="submenu2"><a href="/resources" title="Resources">Resources</a><span class="arrow-main"></span></li>
            <li data-sub="submenu3"><a href="/about-us" title="About">About</a><span class="arrow-main"></span></li>
            <li data-sub="submenu4"><a href="/contact" title="Contact">Contact</a></li>
        </ul>
    </div>

    <div class="nav-top-mobile">
        <div class="select-box form">

            <ul class="inline-block-md mb-none top-nav">
                <li>

                </li>
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/optimizer-hints/+source/"> Login</a>
                    </li>
                
            </ul>



        </div>
        <p class="text-center copyright">Copyright &copy; 2025 MariaDB. All rights reserved.</p>
    </div>
</div>
<div class="violator-wrap d-none" id="top_violator">
    <div class="container">
        <div class="row">
            <div class="col-xs-12 col-sm-12">
                <div class="violator-outer">
                    <div class="violator-inner">
                        <div class="row">
                            <div class="col-xs-12 col-sm-9 col-lg-7 col-lg-offset-2" id="top_violator_content">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="content-link" target="_blank" rel="nofollow noreferrer">
                                    <span>The Ultimate Guide to High Availability with MariaDB</span>
                                </a>
                            </div>
                            <div class="col-xs-12 col-sm-3" id="top_violator_cta">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="btn btn-mariadb" target="_blank" rel="nofollow noreferrer">Download Now</a>
                            </div>
                        </div>
                    </div>
                    <button type="button" class="btn btn-link close-btn">
                        <svg xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 24 24" width="15px" height="15px"><path d="M 4.9902344 3.9902344 A 1.0001 1.0001 0 0 0 4.2929688 5.7070312 L 10.585938 12 L 4.2929688 18.292969 A 1.0001 1.0001 0 1 0 5.7070312 19.707031 L 12 13.414062 L 18.292969 19.707031 A 1.0001 1.0001 0 1 0 19.707031 18.292969 L 13.414062 12 L 19.707031 5.7070312 A 1.0001 1.0001 0 0 0 18.980469 3.9902344 A 1.0001 1.0001 0 0 0 18.292969 4.2929688 L 12 10.585938 L 5.7070312 4.2929688 A 1.0001 1.0001 0 0 0 4.9902344 3.9902344 z"/></svg>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="wrapper">
<div id="top-nav">
    <div class="container">
        <ul class="hidden-sm hidden-xs" >
            <li><a href="https://mariadb.com/kb/">Knowledge Base</a></li>
            <li><a href="https://mariadb.com/contact/">Contact</a></li>
            
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/optimizer-hints/+source/" rel="nofollow">Login</a>
                    </li>
                
            
            
            <li id="search-form">
                <form action="/kb/en/+search/" method="get" id="search-block-form" accept-charset="UTF-8">
                    <input id="search" title="Enter the terms you wish to search for."
                           placeholder="Search . . ." type="text"
                           name="q" value="" size="15" maxlength="128" class="form-text"
                           data-autocomplete-url="/kb/en/+search/autocomplete/">
                    <input type="hidden" name="quick" value="1" />
                    <input type="hidden" name="source" value="kb" />
                </form>
            </li>
            <li><a id="search-toggler" href="/kb/search/">Search</a></li>
            
        </ul>
    </div>
</div>
<div id="navbar-bottom" class="navbar">
    <div class="container">
        
        
        
        
        <div class="row">
            <div class="col-md-3 col-sm-9 col-xs-9">
                <a class="brand" href="/" title="MariaDB">
                    <img src="/kb/static/images/logo-2018-black.95f5978ae14d.png">
                </a>
            </div>
            <div class="col-md-9 hidden-sm hidden-xs">
                <div class="main-menu">
                    <ul id="main-menu" class="nav navbar-nav inline-block-sm">
    <li class="has-sub full-menu">
        <a href="/products" title="Products">Products</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/services" title="Services">Services</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/pricing" title="Pricing">Pricing</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/resources" title="Resources">Resources</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/about-us" title="About Us">About Us</a>
    </li>
    <li class="">
        <a class="button electric-eel small top-bar-right-download" href="/downloads/">Download</a>
    </li>
</ul>
                </div>
            </div>
            <div class="col-md-3 visible-sm visible-xs col-sm-3 col-xs-3 ps-rv">
                <div class="navbar-header text-right pull-right">
                    <button type="button" class="menu-control toggle-menu" id="open-menu">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="main">
    <div class="container">
        

        <div id="subheader1" class="clearfix">
            <div class="pull-left">
                
                <div id="breadcrumbs" class="breadcrumb">
                    <a href="/kb/en/">Knowledge Base</a>
                    


    
    » <a class="crumb" href="/kb/en/documentation/">MariaDB Server Documentation</a>
    

    
    » <a class="crumb" href="/kb/en/using-mariadb-server/">Using MariaDB Server</a>
    

    
    » <a class="crumb" href="/kb/en/sql-statements-structure/">SQL Statements &amp; Structure</a>
    

    
    » <a class="crumb" href="/kb/en/sql-statements/">SQL Statements</a>
    

    
    » <a class="crumb" href="/kb/en/data-manipulation/">Data Manipulation</a>
    

    
    » <a class="crumb" href="/kb/en/selecting-data/">Selecting Data</a>
    


    » <a class="node_link crumb" href="/kb/en/optimizer-hints/">Optimizer Hints</a>


                </div>
                
            </div>
        </div>
    </div>
    <div class="container" id="container-main">
        <div class="row">
            
            
                
                <aside id="sidebar-first" class="sidebar col-md-2 hidden-xs hidden-sm hidden-print">
                    
                        
                        <ul id="category_menu" class="nav nav-pills nav-stacked">
                            <li><a href="/kb/en/">Home</a></li>
                            
                                
                                    <li><a href="/kb/en/+questions/">Open Questions</a></li>
                                
                                <li><a href="/kb/en/documentation/">MariaDB Server</a></li>
                                <li><a href="/kb/en/maxscale/">MariaDB MaxScale</a></li>
                                <li><a href="/kb/en/mariadb-columnstore/">MariaDB ColumnStore</a></li>
                                <li><a href="/kb/en/connectors/">Connectors</a></li>
                            

                        </ul>
                    

                    
                        <div>
    

<div class="well well-small box actions"><div>

        <a class="btn btn-block btn-small" href="/kb/en/optimizer-hints/">Return to article</a>
    
</div>
</div>

</div>
                    

                    

































                </aside>
            
            
            
                
            
            
            <section id="content" class="limited_width col-md-10 clearfix">
                
                    <h1>Optimizer Hints - Source</h1>
                

                



                <div>
                    

    

    
    <div class="revision_info">
        <dl class="table">
            <dt>Revision</dt>
            <dd><a href="/kb/en/optimizer-hints/+r/147079/">147079</a></dd>
            <dt>User</dt>
            <dd>
<span class="user" id="user-4254">
<a href="/kb/user/id/4254" title="Russell Dyer">Russell Dyer</a>
</span></dd>
            <dt>Date</dt>
            <dd>

<span class="datetime" title="2025-02-10 07:48">2025-02-10 07:48</span></dd>
        </dl>
    </div>
    


    

    
        
        <textarea id="answer_source" class="creole_source autogrow">&lt;&lt;toc&gt;&gt;
Optimizer hints are options available that affect the execution plan.

== SELECT Modifiers

=== HIGH PRIORITY
##HIGH_PRIORITY## gives the statement a higher priority. If the table is locked, high priority ##SELECT##s will be executed as soon as the lock is released, even if other statements are queued. ##HIGH_PRIORITY## applies only if the storage engine only supports table-level locking (##MyISAM##, ##MEMORY##, ##MERGE##). See [[high_priority-and-low_priority-clauses|HIGH_PRIORITY and LOW_PRIORITY clauses]] for details.

=== SQL_CACHE / SQL_NO_CACHE
If the [[server-system-variables#query_cache_type|query_cache_type]] system variable is set to 2 or ##DEMAND##, and the current statement is cacheable, ##SQL_CACHE## causes the query to be cached and ##SQL_NO_CACHE## causes the query not to be cached. For ##UNION##s, ##SQL_CACHE## or ##SQL_NO_CACHE## should be specified for the first query. See also [[the-query-cache|The Query Cache]] for more detail and a list of the types of statements that aren&#39;t cacheable.

=== SQL_BUFFER_RESULT
##SQL_BUFFER_RESULT## forces the optimizer to use a temporary table to process the result. This is useful to free locks as soon as possible.

=== SQL_SMALL_RESULT / SQL_BIG_RESULT
##SQL_SMALL_RESULT## and ##SQL_BIG_RESULT## tell the optimizer whether the result is very big or not. Usually, ##GROUP BY## and ##DISTINCT## operations are performed using a temporary table. Only if the result is very big, using a temporary table is not convenient. The optimizer automatically knows if the result is too big, but you can force the optimizer to use a temporary table with ##SQL_SMALL_RESULT##, or avoid the temporary table using ##SQL_BIG_RESULT##.

=== STRAIGHT_JOIN
##STRAIGHT_JOIN## applies to the [[JOIN]] queries, and tells the optimizer that the tables must be read in the order they appear in the ##SELECT##. For ##const## and ##system## table this options is sometimes ignored.

=== SQL_CALC_FOUND_ROWS
##SQL_CALC_FOUND_ROWS## is only applied when using the ##LIMIT## clause. If this option is used, MariaDB will count how many rows would match the query, without the ##LIMIT## clause. That number can be retrieved in the next query, using [[found_rows|FOUND_ROWS()]].

=== USE/FORCE/IGNORE INDEX
##USE INDEX##, ##FORCE INDEX## and ##IGNORE INDEX## constrain the query planning to a specific index.

For further information about some of these options, see [[how-to-force-query-plans|How to force query plans]].

&lt;&lt;product MariaDB from=12.0&gt;&gt;
== Expanded Optimizer Hints
MariaDB 12.0 features an extensive expansion of optimizer hints.

===Syntax
1. Hint syntax
Hints are placed after the main statement verb

&lt;&lt;sql&gt;&gt;
UPDATE /*+ hints */ table ...;
DELETE /*+ hints */ FROM table... ;
SELECT /*+ hints */  ...
&lt;&lt;/sql&gt;&gt;

or after the SELECT keyword in any subquery:
&lt;&lt;sql&gt;&gt;
SELECT * FROM t1 WHERE a IN (SELECT /*+ hints */ ...) 
&lt;&lt;/sql&gt;&gt;
There can be one or more hints separated with space

&lt;&lt;code&gt;&gt;
  hints:  hint hint ...
&lt;&lt;/code&gt;&gt;

=== Description
Each individual hint is hint name and arguments. In case there are no arguments,
the () brackets are still present:
&lt;&lt;code&gt;&gt;
hint:  hint_name([arguments])
&lt;&lt;/code&gt;&gt;
Incorrect hints produce warnings (a setting to make them errors is not implemented yet).

Hints that are not ignored are kept in the query text (you can see them in SHOW PROCESSLIST, Slow Query Log, EXPLAIN EXTENDED)
Hints that were incorrect and were ignored are removed from there.

==== Hint Hierarchy

Hints can be

* global - applies to whole query
* table-level - applies to a table
* index-level - applies to an index in a table

===== Table-Level Hints
&lt;&lt;code&gt;&gt;
hint_name([table_name [table_name [,...]] )
&lt;&lt;/code&gt;&gt;

===== Index-Level Hints
Index-level hints apply to index(es).

Possible syntax variants:

&lt;&lt;code&gt;&gt;
hint_name(table_name [index_name [, index_name] ...])

hint_name(table_name@query_block [index_name [, index_name] ...])

hint_name(@query_block  table_name [index_name [, index_name] ...])
&lt;&lt;/code&gt;&gt;

==== Query Block Naming

The ##QB_NAME## hint is used to assign a name to the query block the hint is in. The Query Block is either a SELECT or a top-level construct of UPDATE or DELETE statement.

&lt;&lt;sql&gt;&gt;
SELECT /*+ QB_NAME(foo) */ select_list FROM ...
&lt;&lt;/sql&gt;&gt;

The name can then can be used
* to refer to the query block
* to refer to a table in the query block as table_name@query_block_name.

Query block scope is the whole statement. It is invalid to use the same name for multiple query blocks.
One can refer to the query block &#34;down into subquery&#34;, &#34;down into derived table&#34;, &#34;up to the parent&#34; and &#34;to a right sibling in the UNION&#34;. One cannot refer &#34;to a left sibling in a UNION&#34;.

Hints inside VIEWs are not supported, yet. One can neither use hints in VIEW definitions, nor control query plans inside non-merged VIEWs (This is because QB_NAME binding is done &#34;early&#34;, before we know that some tables are VIEWs)

===== SELECT#N NAMES

Besides the given name, any query block is given a name select#n. It is printed in EXPLAIN EXTENDED output:

Warnings:

Note	1003	select /*+ NO_RANGE_OPTIMIZATION(`t3`@`select#1` `PRIMARY`) */ ...

At the moment it is NOT yet possible to use it in the hint text:
&lt;&lt;sql&gt;&gt;
SELECT /*+ BKA(tbl1@`select#1`) */ 1 FROM tbl1 ...;
&lt;&lt;/sql&gt;&gt;


===== QB_NAME in CTEs

Hints that control @name will control the first use of the CTE.

=== Effect of Optimizer Hints

The optimizer can be controlled by
# Server variables - optimizer_switch, join_cache_level, etc, etc
# Old-style hints
# New-style hints

Old-style hints did not overlap with server variable settings.

New-style hints are more specific than server variable settings, so they override the server variable settings.

Hints are &#34;narrowly interpreted&#34; and &#34;best effort&#34; - if a hint dictates to do something, like

&lt;&lt;sql&gt;&gt;
SELECT  /*+ MRR(t1 t1_index1) */  ... FROM t1 ... 
&lt;&lt;/sql&gt;&gt;
that means:

    When considering a query plan that involves using t1_index1 in a way that one can use MRR, use MRR.

if the query planning is such that use of t1_index1 doesn&#39;t allow to use MRR, it won&#39;t be used.
The optimizer may also consider using t1_index2 and pick that over using t1_index1.
In such cases the hint is effectively ignored and no warning is given.


===  List of Hints

====NO_RANGE_OPTIMIZATION

An index-level hint that disables range optimization for certain index(es):
&lt;&lt;sql&gt;&gt;
SELECT /*+ NO_RANGE_OPTIMIZATION(tbl index1 index2) */  * FROM tbl ... 
&lt;&lt;/sql&gt;&gt;

==== NO_ICP

Sn index-level hint that disables Index Condition Pushdown for the indexes. ICP+BKA is disabled as well.
&lt;&lt;sql&gt;&gt;
SELECT /*+ NO_ICP(tbl index1 index2) */  * FROM tbl ... 
&lt;&lt;/sql&gt;&gt;

==== MRR and NO_MRR

Index-level hints to force or disable use of MRR.
&lt;&lt;sql&gt;&gt;
SELECT /*+ MRR(tbl index1 index2) */  * FROM tbl ... 

SELECT /*+ NO_MRR(tbl index1 index2) */  * FROM tbl ... 
&lt;&lt;/sql&gt;&gt;
This controls:
*    MRR optimization for range access ( mdev35483-mrr-is-narrow.sql )
*    BKA mdev35483-mrr-controls-bka-partially.sql

==== BKA() and NO_BKA()

Query block or table-level hints.

BKA() also enables MRR to make BKA possible. (This is different from session variables, where one needs to enable MRR separately).

This also enables BKAH.

==== BNL() and NO_BNL()

Controls BNL-H.

The implementation is &#34;BNL() hint effectively increases join_cache_level up to 4 &#34; .. for the table(s) it applies to.

==== MAX_EXECUTION_TIME()

Global-level hint to limit query execution time

&lt;&lt;sql&gt;&gt;
SELECT /*+ MAX_EXECUTION_TIME(milliseconds) */ ...  ;
&lt;&lt;/sql&gt;&gt;
A query that doesn&#39;t finish in the time specified will be aborted with an error.

If @@max_statement_time is set, the hint will be ignored and a warning produced. Note that this contradicts the stated principle that &#34;New-style hints are more specific than server variable settings, so they override the server variable settings&#34;.

=== Subquery Hints

====SUBQUERY Hint

Query block-level hint.

&lt;&lt;sql&gt;&gt;
SUBQUERY([@query_block_name] MATERIALIZATION)

SUBQUERY([@query_block_name] INTOEXISTS)
&lt;&lt;/sql&gt;&gt;

This controls non-semi-join subqueries. The parameter specifies which subquery to use. Use of this hint disables conversion of subquery into semi-join.

==== SEMIJOIN and NO_SEMIJOIN

Query block-level hints.
This controls the conversion of subqueries to semi-joins and which semi-join strategies are allowed.

&lt;&lt;sql&gt;&gt;
[NO_]SEMIJOIN([@query_block_name] [strategy [, strategy] ...])
&lt;&lt;/sql&gt;&gt;

where the strategy is one of DUPSWEEDOUT, FIRSTMATCH, LOOSESCAN, MATERIALIZATION.

&lt;&lt;/product&gt;&gt;

== See Also

* [[optimizer-switch|Use optimizer_switch to enable/disable specific optimizations]]</textarea>
    


                    <div id="content_disclaimer" class="graybox">
                        Content reproduced on this site is the property of its respective owners,
                        and this content is not reviewed in advance by MariaDB. The views, information and opinions
                        expressed by this content do not necessarily represent those of MariaDB or any other party.
                    </div>
                </div>
            </section>

            
        </div>
    </div>
</div>

<!-- Footer -->
<footer id="footer">
    <div class="footer">
        <div class="container">
            <div class="row">
                <div class="col-xs-12">
                    <ul class="list-inline text-center footer-nav">
                        <li>
                            <h5>
                                <a href="https://mariadb.com/products" title="Products">Products</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/services" title="Services">Services</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/pricing" title="Pricing">Pricing</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/resources" title="Resources">Resources</a>
                            </h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/about-us" title="About MariaDB">About Us</a></h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/download" title="Download">Download MariaDB</a></h5>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="row row-10">
                
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div id="block-footerformcontact" class="block block-block-content block-block-contentd754ee1b-3cc9-40e7-9ef4-f504f1197fb1">
                        
                            <h5 style="font-weight: 400;">Subscribe to our newsletter!</h5>
                            <script src="//app-sj15.marketo.com/js/forms2/js/forms2.min.js"></script><form id="mktoForm_1498"></form>
                            <script>
                                <!--//--><![CDATA[// ><!--
                                MktoForms2.loadForm("//app-sj15.marketo.com", "573-PXI-984", 1498);
                                //--><!]]]]><![CDATA[>
                                //--><!]]>
                            </script>
                        
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div class="footer-copyright">
                        <div class="text-center">
                            <ul class="list-inline no-margin">
                                <li>
                                    <a href="/legal" title="Legal">Legal</a>
                                </li>
                                <li>
                                    <a href="/privacy-policy" title="Privacy Policy">Privacy Policy</a>
                                </li>
                                <li>
                                    <a href="/cookie-policy/" title="Cookies">Cookie Policy</a>
                                </li>
                            </ul>
                            <p>Copyright &copy; 2025 MariaDB. All rights reserved.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
</footer>
</div>

<div id="ajax_loading">
    <img src="/kb/static/images/ajax-loader.a51c5608d01a.gif" />
</div>

    <!-- Google Tag Manager -->
    <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-MK2847"
                      height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
            '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MK2847');</script>
    <!-- End Google Tag Manager -->

</body>

<script type="text/javascript" src="/kb/static/js/main.1587e3a666fc.js" charset="utf-8"></script>

</html>