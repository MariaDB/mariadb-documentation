<!DOCTYPE html>
<html>
<head data-cookie-domain=""
      data-cookie-path="/">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="apple-touch-icon" sizes="180x180" href="/kb/static/images/favicons/apple-touch-icon.159e713979be.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/kb/static/images/favicons/favicon-32x32.bc0ac1d5d11e.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/kb/static/images/favicons/favicon-16x16.5801f8f0f34e.png">
    <link rel="shortcut icon" href="/kb/static/images/favicons/favicon.d122d305dee4.ico" type="image/x-icon" />

    <title>Optimizer Hints - MariaDB Knowledge Base</title>

    <link href="/kb/static/css/main.f7633538c846.css" rel="stylesheet" type="text/css" />

    

    

    <!-- FB Open Graph tags -->
    <meta property="og:title" content="Optimizer Hints" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://mariadb.com/kb/en/optimizer-hints/" />
    <meta property="og:image" content="http://mariadb.comaskmonty-logo.png" />
    <meta property="og:site_name" content="MariaDB KnowledgeBase" />
    <meta property="fb:admins" content="514852603" />
    <meta property="og:description" content="Optimizer hints are options available that affect the execution plan." />

    <meta name="description" content="Optimizer hints are options available that affect the execution plan." />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="//fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet"/>
    
</head>
<body class="mpkb nodes products nodes_view jqui" id="nodes_view">





<div id="menu-mobile" class="visible-sm visible-xs">

    <div>
        <div id="mobile-close-menu" class="text-right">
            <a href="javascript:void(0)" title="Close Menu" id="back-main" class="toggle-menu">X<span></span></a>
        </div>
    </div>
    <div class="mainmenu-mobile">
        <ul class="ls-none ul-menu">
            <li data-sub="submenu5"><a class="open-form-search" href="/kb/search/" title="Search">Search </a></li>
            <li data-sub="submenu0"><a href="/products" title="Products">Products</a><span class="arrow-main"></span></li>
            <li data-sub="submenu1"><a href="/services" title="Services">Services</a><span class="arrow-main"></span></li>
            <li data-sub="submenu2"><a href="/resources" title="Resources">Resources</a><span class="arrow-main"></span></li>
            <li data-sub="submenu3"><a href="/about-us" title="About">About</a><span class="arrow-main"></span></li>
            <li data-sub="submenu4"><a href="/contact" title="Contact">Contact</a></li>
        </ul>
    </div>

    <div class="nav-top-mobile">
        <div class="select-box form">

            <ul class="inline-block-md mb-none top-nav">
                <li>

                </li>
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/optimizer-hints/"> Login</a>
                    </li>
                
            </ul>



        </div>
        <p class="text-center copyright">Copyright &copy; 2025 MariaDB. All rights reserved.</p>
    </div>
</div>
<div class="violator-wrap d-none" id="top_violator">
    <div class="container">
        <div class="row">
            <div class="col-xs-12 col-sm-12">
                <div class="violator-outer">
                    <div class="violator-inner">
                        <div class="row">
                            <div class="col-xs-12 col-sm-9 col-lg-7 col-lg-offset-2" id="top_violator_content">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="content-link" target="_blank" rel="nofollow noreferrer">
                                    <span>The Ultimate Guide to High Availability with MariaDB</span>
                                </a>
                            </div>
                            <div class="col-xs-12 col-sm-3" id="top_violator_cta">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="btn btn-mariadb" target="_blank" rel="nofollow noreferrer">Download Now</a>
                            </div>
                        </div>
                    </div>
                    <button type="button" class="btn btn-link close-btn">
                        <svg xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 24 24" width="15px" height="15px"><path d="M 4.9902344 3.9902344 A 1.0001 1.0001 0 0 0 4.2929688 5.7070312 L 10.585938 12 L 4.2929688 18.292969 A 1.0001 1.0001 0 1 0 5.7070312 19.707031 L 12 13.414062 L 18.292969 19.707031 A 1.0001 1.0001 0 1 0 19.707031 18.292969 L 13.414062 12 L 19.707031 5.7070312 A 1.0001 1.0001 0 0 0 18.980469 3.9902344 A 1.0001 1.0001 0 0 0 18.292969 4.2929688 L 12 10.585938 L 5.7070312 4.2929688 A 1.0001 1.0001 0 0 0 4.9902344 3.9902344 z"/></svg>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="wrapper">
<div id="top-nav">
    <div class="container">
        <ul class="hidden-sm hidden-xs" >
            <li><a href="https://mariadb.com/kb/">Knowledge Base</a></li>
            <li><a href="https://mariadb.com/contact/">Contact</a></li>
            
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/optimizer-hints/" rel="nofollow">Login</a>
                    </li>
                
            
            
            <li id="search-form">
                <form action="/kb/en/+search/" method="get" id="search-block-form" accept-charset="UTF-8">
                    <input id="search" title="Enter the terms you wish to search for."
                           placeholder="Search . . ." type="text"
                           name="q" value="" size="15" maxlength="128" class="form-text"
                           data-autocomplete-url="/kb/en/+search/autocomplete/">
                    <input type="hidden" name="quick" value="1" />
                    <input type="hidden" name="source" value="kb" />
                </form>
            </li>
            <li><a id="search-toggler" href="/kb/search/">Search</a></li>
            
        </ul>
    </div>
</div>
<div id="navbar-bottom" class="navbar">
    <div class="container">
        
        
        
        
        <div class="row">
            <div class="col-md-3 col-sm-9 col-xs-9">
                <a class="brand" href="/" title="MariaDB">
                    <img src="/kb/static/images/logo-2018-black.95f5978ae14d.png">
                </a>
            </div>
            <div class="col-md-9 hidden-sm hidden-xs">
                <div class="main-menu">
                    <ul id="main-menu" class="nav navbar-nav inline-block-sm">
    <li class="has-sub full-menu">
        <a href="/products" title="Products">Products</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/solutions" title="Solutions">Solutions</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/resources" title="Resources">Resources</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/about-us" title="Company">Company</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/pricing" title="Pricing">Pricing</a>
    </li>
    
    <li class="">
        <a class="button electric-eel small top-bar-right-download" href="/downloads/">Download</a>
    </li>
</ul>
                </div>
            </div>
            <div class="col-md-3 visible-sm visible-xs col-sm-3 col-xs-3 ps-rv">
                <div class="navbar-header text-right pull-right">
                    <button type="button" class="menu-control toggle-menu" id="open-menu">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="main">
    <div class="container">
        

        <div id="subheader1" class="clearfix">
            <div class="pull-left">
                
                <div id="breadcrumbs" class="breadcrumb">
                    <a href="/kb/en/">Knowledge Base</a>
                    


    
    » <a class="crumb" href="/kb/en/documentation/">MariaDB Server Documentation</a>
    

    
    » <a class="crumb" href="/kb/en/using-mariadb-server/">Using MariaDB Server</a>
    

    
    » <a class="crumb" href="/kb/en/sql-statements-structure/">SQL Statements &amp; Structure</a>
    

    
    » <a class="crumb" href="/kb/en/sql-statements/">SQL Statements</a>
    

    
    » <a class="crumb" href="/kb/en/data-manipulation/">Data Manipulation</a>
    

    
    » <a class="crumb" href="/kb/en/selecting-data/">Selecting Data</a>
    


    » <a class="node_link crumb" href="/kb/en/optimizer-hints/">Optimizer Hints</a>


                </div>
                
            </div>
        </div>
    </div>
    <div class="container" id="container-main">
        <div class="row">
            
            
                
                <aside id="sidebar-first" class="sidebar col-md-2 hidden-xs hidden-sm hidden-print">
                    
                        
                        <ul id="category_menu" class="nav nav-pills nav-stacked">
                            <li><a href="/kb/en/">Home</a></li>
                            
                                
                                    <li><a href="/kb/en/+questions/">Open Questions</a></li>
                                
                                <li><a href="/kb/en/documentation/">MariaDB Server</a></li>
                                <li><a href="/kb/en/maxscale/">MariaDB MaxScale</a></li>
                                <li><a href="/kb/en/mariadb-columnstore/">MariaDB ColumnStore</a></li>
                                <li><a href="/kb/en/connectors/">Connectors</a></li>
                            

                        </ul>
                    

                    
<div>



<div class="well well-small box actions"><div>

        <a class="btn btn-block btn-blue btn-sm" href="/kb/en/optimizer-hints/+history" rel="nofollow">History</a>
        
        
        
        <a class="btn btn-block btn-blue btn-sm" href="/kb/en/optimizer-hints/+source/">Source</a>
        
        <a class="btn btn-block btn-blue btn-sm flag" href="/kb/en/optimizer-hints/+flag"
                data-flag-url="/kb/en/optimizer-hints/+flag" rel="nofollow">
                Flag as Spam / Inappropriate</a>
        
        <a class="btn btn-block btn-blue btn-sm" href="/kb/en/optimizer-hints/+translate/">
                Translate</a>
        

</div>
</div>





<div class="well well-small box node_info"><div>

    <dl>
        <dt>Created</dt>
        <dd>

<span class="datetime" title="2017-08-30 14:46">7 years, 8 months ago</span></dd>

        <dt>Modified</dt>
        <dd>

<span class="datetime" title="2025-05-05 09:04">14 hours, 57 minutes ago</span></dd>

        <dt>Type</dt>
        <dd>article</dd>

        <dt>Status</dt>
        <dd>active</dd>

        <dt>License</dt>
        <dd>
            
                <a href="/kb/en/optimizer-hints/+license/">CC BY-SA / Gnu FDL</a>
            
        </dd>

        
    </dl>

    
    <ul class="rss_feeds">
        <li><a href="/kb/en/optimizer-hints/+history/feed/">
            History</a>
        </li>
        <li><a href="/kb/en/optimizer-hints/+comments/feed/">
            Comments</a>
        </li>
    </ul>
    

</div>
</div>





    
    
    

<div class="well well-small box attachments"><div><div class="edit_link pull-right"><a href="/kb/en/optimizer-hints/+edit/attachments/">Edit</a></div><h5>Attachments</h5></div><div>

        
            <div class="no_data">No attachments exist</div>
        
    
</div>
</div>

    



    
    



    
    

<div class="well well-small box"><div><h5>Product Versions</h5></div><div>

        <ul id="product_chooser">
            
                <li class="mariadb_from_12_0">
                    <label><input type="checkbox" data-product-class="mariadb_from_12_0"
                            >MariaDB starting with 12.0</label>
                </li>
            
                <li class="mariadb_from_12_0">
                    <label><input type="checkbox" data-product-class="mariadb_from_12_0"
                            >MariaDB starting with 12.0</label>
                </li>
            
        </ul>
    
</div>
</div>






</div>


                    

































                </aside>
            
            
            
                
            
            
                
            
            <section id="content" class="limited_width col-md-8 clearfix">
                
                    <h1>Optimizer Hints</h1>
                

                



                <div>
                    
    

    
    
    

    <div class="node creole">
        
        
        


    
    <div class="answer formatted">
        <div class="table_of_contents well well-small">
<h3>Contents</h3>
 <ol class="toc">

    <li class="mariadb_from_12_0"><a href="#select-modifiers" title="SELECT Modifiers">SELECT Modifiers</a>    <ol class="toc">

        <li class="mariadb_from_12_0"><a href="#high-priority" title="HIGH PRIORITY">HIGH PRIORITY</a></li>

        <li class="mariadb_from_12_0"><a href="#sql_cache-sql_no_cache" title="SQL_CACHE / SQL_NO_CACHE">SQL_CACHE / SQL_NO_CACHE</a></li>

        <li class="mariadb_from_12_0"><a href="#sql_buffer_result" title="SQL_BUFFER_RESULT">SQL_BUFFER_RESULT</a></li>

        <li class="mariadb_from_12_0"><a href="#sql_small_result-sql_big_result" title="SQL_SMALL_RESULT / SQL_BIG_RESULT">SQL_SMALL_RESULT / SQL_BIG_RESULT</a></li>

        <li class="mariadb_from_12_0"><a href="#straight_join" title="STRAIGHT_JOIN">STRAIGHT_JOIN</a></li>

        <li class="mariadb_from_12_0"><a href="#sql_calc_found_rows" title="SQL_CALC_FOUND_ROWS">SQL_CALC_FOUND_ROWS</a></li>

        <li class="mariadb_from_12_0"><a href="#useforceignore-index" title="USE/FORCE/IGNORE INDEX">USE/FORCE/IGNORE INDEX</a>    </ol>
</li>

    <li class="mariadb_from_12_0"><a href="#expanded-optimizer-hints" title="Expanded Optimizer Hints">Expanded Optimizer Hints</a>    <ol class="toc">

        <li class="mariadb_from_12_0"><a href="#syntax" title="Syntax">Syntax</a></li>

        <li class="mariadb_from_12_0"><a href="#description" title="Description">Description</a>        <ol class="toc">

            <li class="mariadb_from_12_0"><a href="#hint-hierarchy" title="Hint Hierarchy">Hint Hierarchy</a>            <ol class="toc">

                <li class="mariadb_from_12_0"><a href="#table-level-hints" title="Table-Level Hints">Table-Level Hints</a></li>

                <li class="mariadb_from_12_0"><a href="#index-level-hints" title="Index-Level Hints">Index-Level Hints</a>            </ol>
</li>

            <li class="mariadb_from_12_0"><a href="#query-block-naming" title="Query Block Naming">Query Block Naming</a>            <ol class="toc">

                <li class="mariadb_from_12_0"><a href="#selectn-names" title="SELECT#N NAMES">SELECT#N NAMES</a></li>

                <li class="mariadb_from_12_0"><a href="#qb_name-in-ctes" title="QB_NAME in CTEs">QB_NAME in CTEs</a>            </ol>
        </ol>
</li>

        <li class="mariadb_from_12_0"><a href="#effect-of-optimizer-hints" title="Effect of Optimizer Hints">Effect of Optimizer Hints</a></li>

        <li class="mariadb_from_12_0"><a href="#list-of-hints" title="List of Hints">List of Hints</a>        <ol class="toc">

            <li class="mariadb_from_12_0"><a href="#no_range_optimization" title="NO_RANGE_OPTIMIZATION">NO_RANGE_OPTIMIZATION</a></li>

            <li class="mariadb_from_12_0"><a href="#no_icp" title="NO_ICP">NO_ICP</a></li>

            <li class="mariadb_from_12_0"><a href="#mrr-and-no_mrr" title="MRR and NO_MRR">MRR and NO_MRR</a></li>

            <li class="mariadb_from_12_0"><a href="#bka-and-no_bka" title="BKA() and NO_BKA()">BKA() and NO_BKA()</a></li>

            <li class="mariadb_from_12_0"><a href="#bnl-and-no_bnl" title="BNL() and NO_BNL()">BNL() and NO_BNL()</a></li>

            <li class="mariadb_from_12_0"><a href="#max_execution_time" title="MAX_EXECUTION_TIME()">MAX_EXECUTION_TIME()</a>        </ol>
</li>

        <li class="mariadb_from_12_0"><a href="#subquery-hints" title="Subquery Hints">Subquery Hints</a>        <ol class="toc">

            <li class="mariadb_from_12_0"><a href="#subquery-hint" title="SUBQUERY Hint">SUBQUERY Hint</a></li>

            <li class="mariadb_from_12_0"><a href="#semijoin-and-no_semijoin" title="SEMIJOIN and NO_SEMIJOIN">SEMIJOIN and NO_SEMIJOIN</a>        </ol>
    </ol>
</li>

    <li class="mariadb_from_12_0"><a href="#see-also" title="See Also">See Also</a> </ol>
</li>
</div><p>
Optimizer hints are options available that affect the execution plan.</p>
<h2 class="anchored_heading" id="select-modifiers">SELECT Modifiers</h2>
<h3 class="anchored_heading" id="high-priority">HIGH PRIORITY</h3>
<p><code>HIGH_PRIORITY</code> gives the statement a higher priority. If the table is locked, high priority <code>SELECT</code>s will be executed as soon as the lock is released, even if other statements are queued. <code>HIGH_PRIORITY</code> applies only if the storage engine only supports table-level locking (<code>MyISAM</code>, <code>MEMORY</code>, <code>MERGE</code>). See <a href="/kb/en/high_priority-and-low_priority-clauses/">HIGH_PRIORITY and LOW_PRIORITY clauses</a> for details.</p>
<h3 class="anchored_heading" id="sql_cache-sql_no_cache">SQL_CACHE / SQL_NO_CACHE</h3>
<p>If the <a href="/kb/en/server-system-variables/#query_cache_type">query_cache_type</a> system variable is set to 2 or <code>DEMAND</code>, and the current statement is cacheable, <code>SQL_CACHE</code> causes the query to be cached and <code>SQL_NO_CACHE</code> causes the query not to be cached. For <code>UNION</code>s, <code>SQL_CACHE</code> or <code>SQL_NO_CACHE</code> should be specified for the first query. See also <a href="/kb/en/the-query-cache/">The Query Cache</a> for more detail and a list of the types of statements that aren't cacheable.</p>
<h3 class="anchored_heading" id="sql_buffer_result">SQL_BUFFER_RESULT</h3>
<p><code>SQL_BUFFER_RESULT</code> forces the optimizer to use a temporary table to process the result. This is useful to free locks as soon as possible.</p>
<h3 class="anchored_heading" id="sql_small_result-sql_big_result">SQL_SMALL_RESULT / SQL_BIG_RESULT</h3>
<p><code>SQL_SMALL_RESULT</code> and <code>SQL_BIG_RESULT</code> tell the optimizer whether the result is very big or not. Usually, <code>GROUP BY</code> and <code>DISTINCT</code> operations are performed using a temporary table. Only if the result is very big, using a temporary table is not convenient. The optimizer automatically knows if the result is too big, but you can force the optimizer to use a temporary table with <code>SQL_SMALL_RESULT</code>, or avoid the temporary table using <code>SQL_BIG_RESULT</code>.</p>
<h3 class="anchored_heading" id="straight_join">STRAIGHT_JOIN</h3>
<p><code>STRAIGHT_JOIN</code> applies to the <a href="/kb/en/join/">JOIN</a> queries, and tells the optimizer that the tables must be read in the order they appear in the <code>SELECT</code>. For <code>const</code> and <code>system</code> table this options is sometimes ignored.</p>
<h3 class="anchored_heading" id="sql_calc_found_rows">SQL_CALC_FOUND_ROWS</h3>
<p><code>SQL_CALC_FOUND_ROWS</code> is only applied when using the <code>LIMIT</code> clause. If this option is used, MariaDB will count how many rows would match the query, without the <code>LIMIT</code> clause. That number can be retrieved in the next query, using <a href="/kb/en/found_rows/">FOUND_ROWS()</a>.</p>
<h3 class="anchored_heading" id="useforceignore-index">USE/FORCE/IGNORE INDEX</h3>
<p><code>USE INDEX</code>, <code>FORCE INDEX</code> and <code>IGNORE INDEX</code> constrain the query planning to a specific index.</p>
<p>For further information about some of these options, see <a href="/kb/en/how-to-force-query-plans/">How to force query plans</a>.</p>
<div class="mariadb_from_12_0 mariadb from_12_0 product"><h5 class="product_title">MariaDB starting with <a href="/kb/en/what-is-mariadb-120/">12.0</a></h5><h2 class="anchored_heading" id="expanded-optimizer-hints">Expanded Optimizer Hints</h2>
<p><a href="/kb/en/what-is-mariadb-120/">MariaDB 12.0</a> features an extensive expansion of optimizer hints.</p>
<h3 class="anchored_heading" id="syntax">Syntax</h3>
<p>1. Hint syntax
Hints are placed after the main statement verb</p>
<pre class="fixed"><span class="k">UPDATE</span> <span class="cm">/*+ hints */</span> <span class="k">table</span> <span class="p">...;</span>
<span class="k">DELETE</span> <span class="cm">/*+ hints */</span> <span class="k">FROM</span> <span class="k">table</span><span class="p">...</span> <span class="p">;</span>
<span class="k">SELECT</span> <span class="cm">/*+ hints */</span>  <span class="p">...</span>
</pre><p>or after the SELECT keyword in any subquery:</p>
<pre class="fixed"><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">t1</span> <span class="k">WHERE</span> <span class="n">a</span> <span class="k">IN</span> <span class="p">(</span><span class="k">SELECT</span> <span class="cm">/*+ hints */</span> <span class="p">...)</span> 
</pre><p>There can be one or more hints separated with space</p>
<pre class="fixed">  hints:  hint hint ...
</pre><h3 class="anchored_heading" id="description">Description</h3>
<p>Each individual hint is hint name and arguments. In case there are no arguments,
the () brackets are still present:</p>
<pre class="fixed">hint:  hint_name([arguments])
</pre><p>Incorrect hints produce warnings (a setting to make them errors is not implemented yet).</p>
<p>Hints that are not ignored are kept in the query text (you can see them in SHOW PROCESSLIST, Slow Query Log, EXPLAIN EXTENDED)
Hints that were incorrect and were ignored are removed from there.</p>
<h4 class="anchored_heading" id="hint-hierarchy">Hint Hierarchy</h4>
<p>Hints can be</p>
<ul start="1"><li>global - applies to whole query
</li><li>table-level - applies to a table
</li><li>index-level - applies to an index in a table
</li></ul>
<h5 class="anchored_heading" id="table-level-hints">Table-Level Hints</h5>
<pre class="fixed">hint_name([table_name [table_name [,...]] )
</pre><h5 class="anchored_heading" id="index-level-hints">Index-Level Hints</h5>
<p>Index-level hints apply to index(es).</p>
<p>Possible syntax variants:</p>
<pre class="fixed">hint_name(table_name [index_name [, index_name] ...])

hint_name(table_name@query_block [index_name [, index_name] ...])

hint_name(@query_block  table_name [index_name [, index_name] ...])
</pre><h4 class="anchored_heading" id="query-block-naming">Query Block Naming</h4>
<p>The <code>QB_NAME</code> hint is used to assign a name to the query block the hint is in. The Query Block is either a SELECT or a top-level construct of UPDATE or DELETE statement.</p>
<pre class="fixed"><span class="k">SELECT</span> <span class="cm">/*+ QB_NAME(foo) */</span> <span class="n">select_list</span> <span class="k">FROM</span> <span class="p">...</span>
</pre><p>The name can then can be used</p>
<ul start="1"><li>to refer to the query block
</li><li>to refer to a table in the query block as table_name@query_block_name.
</li></ul>
<p>Query block scope is the whole statement. It is invalid to use the same name for multiple query blocks.
One can refer to the query block "down into subquery", "down into derived table", "up to the parent" and "to a right sibling in the UNION". One cannot refer "to a left sibling in a UNION".</p>
<p>Hints inside VIEWs are not supported, yet. One can neither use hints in VIEW definitions, nor control query plans inside non-merged VIEWs (This is because QB_NAME binding is done "early", before we know that some tables are VIEWs)</p>
<h5 class="anchored_heading" id="selectn-names">SELECT#N NAMES</h5>
<p>Besides the given name, any query block is given a name select#n. It is printed in EXPLAIN EXTENDED output:</p>
<p>Warnings:</p>
<p>Note	1003	select /*+ NO_RANGE_OPTIMIZATION(`t3`@`select#1` `PRIMARY`) */ ...</p>
<p>At the moment it is NOT yet possible to use it in the hint text:</p>
<pre class="fixed"><span class="k">SELECT</span> <span class="cm">/*+ BKA(tbl1@`select#1`) */</span> <span class="mi">1</span> <span class="k">FROM</span> <span class="n">tbl1</span> <span class="p">...;</span>
</pre><h5 class="anchored_heading" id="qb_name-in-ctes">QB_NAME in CTEs</h5>
<p>Hints that control @name will control the first use of the CTE.</p>
<h3 class="anchored_heading" id="effect-of-optimizer-hints">Effect of Optimizer Hints</h3>
<p>The optimizer can be controlled by</p>
<ol start="1"><li>Server variables - optimizer_switch, join_cache_level, etc, etc
</li><li>Old-style hints
</li><li>New-style hints
</li></ol>
<p>Old-style hints did not overlap with server variable settings.</p>
<p>New-style hints are more specific than server variable settings, so they override the server variable settings.</p>
<p>Hints are "narrowly interpreted" and "best effort" - if a hint dictates to do something, like</p>
<pre class="fixed"><span class="k">SELECT</span>  <span class="cm">/*+ MRR(t1 t1_index1) */</span>  <span class="p">...</span> <span class="k">FROM</span> <span class="n">t1</span> <span class="p">...</span> 
</pre><p>that means:</p>
<p>    When considering a query plan that involves using t1_index1 in a way that one can use MRR, use MRR.</p>
<p>if the query planning is such that use of t1_index1 doesn't allow to use MRR, it won't be used.
The optimizer may also consider using t1_index2 and pick that over using t1_index1.
In such cases the hint is effectively ignored and no warning is given.</p>
<h3 class="anchored_heading" id="list-of-hints">List of Hints</h3>
<h4 class="anchored_heading" id="no_range_optimization">NO_RANGE_OPTIMIZATION</h4>
<p>An index-level hint that disables range optimization for certain index(es):</p>
<pre class="fixed"><span class="k">SELECT</span> <span class="cm">/*+ NO_RANGE_OPTIMIZATION(tbl index1 index2) */</span>  <span class="o">*</span> <span class="k">FROM</span> <span class="n">tbl</span> <span class="p">...</span> 
</pre><h4 class="anchored_heading" id="no_icp">NO_ICP</h4>
<p>An index-level hint that disables Index Condition Pushdown for the indexes. ICP+BKA is disabled as well.</p>
<pre class="fixed"><span class="k">SELECT</span> <span class="cm">/*+ NO_ICP(tbl index1 index2) */</span>  <span class="o">*</span> <span class="k">FROM</span> <span class="n">tbl</span> <span class="p">...</span> 
</pre><h4 class="anchored_heading" id="mrr-and-no_mrr">MRR and NO_MRR</h4>
<p>Index-level hints to force or disable use of MRR.</p>
<pre class="fixed"><span class="k">SELECT</span> <span class="cm">/*+ MRR(tbl index1 index2) */</span>  <span class="o">*</span> <span class="k">FROM</span> <span class="n">tbl</span> <span class="p">...</span> 

<span class="k">SELECT</span> <span class="cm">/*+ NO_MRR(tbl index1 index2) */</span>  <span class="o">*</span> <span class="k">FROM</span> <span class="n">tbl</span> <span class="p">...</span> 
</pre><p>This controls:</p>
<ul start="1"><li>MRR optimization for range access ( mdev35483-mrr-is-narrow.sql )
</li><li>BKA mdev35483-mrr-controls-bka-partially.sql
</li></ul>
<h4 class="anchored_heading" id="bka-and-no_bka">BKA() and NO_BKA()</h4>
<p>Query block or table-level hints.</p>
<p>BKA() also enables MRR to make BKA possible. (This is different from session variables, where one needs to enable MRR separately).</p>
<p>This also enables BKAH.</p>
<h4 class="anchored_heading" id="bnl-and-no_bnl">BNL() and NO_BNL()</h4>
<p>Controls BNL-H.</p>
<p>The implementation is "BNL() hint effectively increases join_cache_level up to 4 " .. for the table(s) it applies to.</p>
<h4 class="anchored_heading" id="max_execution_time">MAX_EXECUTION_TIME()</h4>
<p>Global-level hint to limit query execution time</p>
<pre class="fixed"><span class="k">SELECT</span> <span class="cm">/*+ MAX_EXECUTION_TIME(milliseconds) */</span> <span class="p">...</span>  <span class="p">;</span>
</pre><p>A query that doesn't finish in the time specified will be aborted with an error.</p>
<p>If @@max_statement_time is set, the hint will be ignored and a warning produced. Note that this contradicts the stated principle that "New-style hints are more specific than server variable settings, so they override the server variable settings".</p>
<h3 class="anchored_heading" id="subquery-hints">Subquery Hints</h3>
<h4 class="anchored_heading" id="subquery-hint">SUBQUERY Hint</h4>
<p>Query block-level hint.</p>
<pre class="fixed"><span class="n">SUBQUERY</span><span class="p">([</span><span class="o">@</span><span class="n">query_block_name</span><span class="p">]</span> <span class="n">MATERIALIZATION</span><span class="p">)</span>

<span class="n">SUBQUERY</span><span class="p">([</span><span class="o">@</span><span class="n">query_block_name</span><span class="p">]</span> <span class="n">INTOEXISTS</span><span class="p">)</span>
</pre><p>This controls non-semi-join subqueries. The parameter specifies which subquery to use. Use of this hint disables conversion of subquery into semi-join.</p>
<h4 class="anchored_heading" id="semijoin-and-no_semijoin">SEMIJOIN and NO_SEMIJOIN</h4>
<p>Query block-level hints.
This controls the conversion of subqueries to semi-joins and which semi-join strategies are allowed.</p>
<pre class="fixed"><span class="p">[</span><span class="n">NO_</span><span class="p">]</span><span class="n">SEMIJOIN</span><span class="p">([</span><span class="o">@</span><span class="n">query_block_name</span><span class="p">]</span> <span class="p">[</span><span class="n">strategy</span> <span class="p">[,</span> <span class="n">strategy</span><span class="p">]</span> <span class="p">...])</span>
</pre><p>where the strategy is one of DUPSWEEDOUT, FIRSTMATCH, LOOSESCAN, MATERIALIZATION.</p>
</div><h2 class="anchored_heading" id="see-also">See Also</h2>
<ul start="1"><li><a href="/kb/en/optimizer-switch/">Use optimizer_switch to enable/disable specific optimizations</a></li></ul>

    </div>


        
            <div id="subscribe" class="well well-small hide hidden-print"
                 data-subscribe-url="/kb/en/optimizer-hints/+subscriptions/add"
                 data-unsubscribe-url="/kb/en/optimizer-hints/+subscriptions/remove">
            </div>
        

        
        
    
        <div class="simple_section_nav">
            <ul class="nav nav-pills">
                
                    <li><a href="/kb/en/lock-in-share-mode/">
                        ← LOCK IN SHARE MODE
                    </a>
                    </li>
                
                
                    <li><a href="/kb/en/selecting-data/">
                        ↑ Selecting Data ↑
                    </a>
                    </li>
                
                
                    <li class="pull-right"><a href="/kb/en/procedure/">
                        PROCEDURE →
                    </a>
                    </li>
                
            </ul>
        </div>
    

        

        
        <h2>Comments</h2>
        
    
    <div id="comments" data-node-id="6980" data-comments-url="/kb/en/optimizer-hints/+comments"
         data-reply-url="/kb/en/optimizer-hints/comments/post/">
        Comments loading...
    </div>

        

    </div>


                    <div id="content_disclaimer" class="graybox">
                        Content reproduced on this site is the property of its respective owners,
                        and this content is not reviewed in advance by MariaDB. The views, information and opinions
                        expressed by this content do not necessarily represent those of MariaDB or any other party.
                    </div>
                </div>
            </section>

            
                <div id="right_bar" class="col-md-2">
                    
    
        
        <ul class="section_navigation well well-small hidden-xs hidden-sm">
            
                <li class="parent"><a href="/kb/en/selecting-data/">
                    ↑ Selecting Data ↑
                </a>
                </li>
            
            
                
                    <li>
                        <a href="/kb/en/select/">
                            
                            SELECT
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/joins-subqueries/">
                            
                            Joins &amp; Subqueries
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/limit/">
                            
                            LIMIT
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/order-by/">
                            
                            ORDER BY
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/group-by/">
                            
                            GROUP BY
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/common-table-expressions/">
                            
                            Common Table Expressions
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/select-with-rollup/">
                            
                            SELECT WITH ROLLUP
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/select-into-outfile/">
                            
                            SELECT INTO OUTFILE
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/select-into-dumpfile/">
                            
                            SELECT INTO DUMPFILE
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/for-update/">
                            
                            FOR UPDATE
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/lock-in-share-mode/">
                            
                            LOCK IN SHARE MODE
                        </a>
                    </li>
                
            
                
                    <li class="active">
                        <span>Optimizer Hints</span>
                        
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/procedure/">
                            
                            PROCEDURE
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/handler/">
                            <span class="pull-right not_primary"></span>
                            HANDLER
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/dual/">
                            
                            DUAL
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/select-offset-fetch/">
                            
                            SELECT ... OFFSET ... FETCH
                        </a>
                    </li>
                
            
        </ul>
    
    

                </div>
            
        </div>
    </div>
</div>

<!-- Footer -->
<footer id="footer">
    <div class="footer">
        <div class="container">
            <div class="row">
                <div class="col-xs-12">
                    <ul class="list-inline text-center footer-nav">
                        <li>
                            <h5>
                                <a href="https://mariadb.com/products" title="Products">Products</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/solutions" title="Solutions">Solutions</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/resources" title="Resources">Resources</a>
                            </h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/about-us" title="About MariaDB">Company</a></h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/pricing" title="Pricing">Pricing</a>
                            </h5>
                        </li>
                        
                        
                        <li>
                            <h5><a href="https://mariadb.com/downloads" title="Download">Download MariaDB</a></h5>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="row row-10">
                
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div id="block-footerformcontact" class="block block-block-content block-block-contentd754ee1b-3cc9-40e7-9ef4-f504f1197fb1">
                        
                            <h5 style="font-weight: 400;">Subscribe to our newsletter!</h5>
                            <script src="//app-sj15.marketo.com/js/forms2/js/forms2.min.js"></script><form id="mktoForm_1498"></form>
                            <script>
                                <!--//--><![CDATA[// ><!--
                                MktoForms2.loadForm("//app-sj15.marketo.com", "573-PXI-984", 1498);
                                //--><!]]]]><![CDATA[>
                                //--><!]]>
                            </script>
                        
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div class="footer-copyright">
                        <div class="text-center">
                            <ul class="list-inline no-margin">
                                <li>
                                    <a href="/legal" title="Legal">Legal</a>
                                </li>
                                <li>
                                    <a href="/privacy-policy" title="Privacy Policy">Privacy Policy</a>
                                </li>
                                <li>
                                    <a href="/cookie-policy/" title="Cookies">Cookie Policy</a>
                                </li>
                            </ul>
                            <p>Copyright &copy; 2025 MariaDB. All rights reserved.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
</footer>
</div>

<div id="ajax_loading">
    <img src="/kb/static/images/ajax-loader.a51c5608d01a.gif" />
</div>

    <!-- Google Tag Manager -->
    <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-MK2847"
                      height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
            '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MK2847');</script>
    <!-- End Google Tag Manager -->

</body>

<script type="text/javascript" src="/kb/static/js/main.1587e3a666fc.js" charset="utf-8"></script>

</html>