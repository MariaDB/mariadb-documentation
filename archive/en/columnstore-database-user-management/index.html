<!DOCTYPE html>
<html>
<head data-cookie-domain=""
      data-cookie-path="/">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="apple-touch-icon" sizes="180x180" href="/kb/static/images/favicons/apple-touch-icon.159e713979be.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/kb/static/images/favicons/favicon-32x32.bc0ac1d5d11e.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/kb/static/images/favicons/favicon-16x16.5801f8f0f34e.png">
    <link rel="shortcut icon" href="/kb/static/images/favicons/favicon.d122d305dee4.ico" type="image/x-icon" />

    <title>ColumnStore Database User Management - MariaDB Knowledge Base</title>

    <link href="/kb/static/css/main.f7633538c846.css" rel="stylesheet" type="text/css" />

    

    

    <!-- FB Open Graph tags -->
    <meta property="og:title" content="ColumnStore Database User Management" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://mariadb.com/kb/en/columnstore-database-user-management/" />
    <meta property="og:image" content="http://mariadb.comaskmonty-logo.png" />
    <meta property="og:site_name" content="MariaDB KnowledgeBase" />
    <meta property="fb:admins" content="514852603" />
    <meta property="og:description" content="MariaDB ColumnStore database user management" />

    <meta name="description" content="MariaDB ColumnStore database user management" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="//fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet"/>
    
</head>
<body class="mpkb nodes products nodes_view jqui" id="nodes_view">





<div id="menu-mobile" class="visible-sm visible-xs">

    <div>
        <div id="mobile-close-menu" class="text-right">
            <a href="javascript:void(0)" title="Close Menu" id="back-main" class="toggle-menu">X<span></span></a>
        </div>
    </div>
    <div class="mainmenu-mobile">
        <ul class="ls-none ul-menu">
            <li data-sub="submenu5"><a class="open-form-search" href="/kb/search/" title="Search">Search </a></li>
            <li data-sub="submenu0"><a href="/products" title="Products">Products</a><span class="arrow-main"></span></li>
            <li data-sub="submenu1"><a href="/services" title="Services">Services</a><span class="arrow-main"></span></li>
            <li data-sub="submenu2"><a href="/resources" title="Resources">Resources</a><span class="arrow-main"></span></li>
            <li data-sub="submenu3"><a href="/about-us" title="About">About</a><span class="arrow-main"></span></li>
            <li data-sub="submenu4"><a href="/contact" title="Contact">Contact</a></li>
        </ul>
    </div>

    <div class="nav-top-mobile">
        <div class="select-box form">

            <ul class="inline-block-md mb-none top-nav">
                <li>

                </li>
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/columnstore-database-user-management/"> Login</a>
                    </li>
                
            </ul>



        </div>
        <p class="text-center copyright">Copyright &copy; 2024 MariaDB. All rights reserved.</p>
    </div>
</div>
<div class="violator-wrap d-none" id="top_violator">
    <div class="container">
        <div class="row">
            <div class="col-xs-12 col-sm-12">
                <div class="violator-outer">
                    <div class="violator-inner">
                        <div class="row">
                            <div class="col-xs-12 col-sm-9 col-lg-7 col-lg-offset-2" id="top_violator_content">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="content-link" target="_blank" rel="nofollow noreferrer">
                                    <span>The Ultimate Guide to High Availability with MariaDB</span>
                                </a>
                            </div>
                            <div class="col-xs-12 col-sm-3" id="top_violator_cta">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="btn btn-mariadb" target="_blank" rel="nofollow noreferrer">Download Now</a>
                            </div>
                        </div>
                    </div>
                    <button type="button" class="btn btn-link close-btn">
                        <svg xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 24 24" width="15px" height="15px"><path d="M 4.9902344 3.9902344 A 1.0001 1.0001 0 0 0 4.2929688 5.7070312 L 10.585938 12 L 4.2929688 18.292969 A 1.0001 1.0001 0 1 0 5.7070312 19.707031 L 12 13.414062 L 18.292969 19.707031 A 1.0001 1.0001 0 1 0 19.707031 18.292969 L 13.414062 12 L 19.707031 5.7070312 A 1.0001 1.0001 0 0 0 18.980469 3.9902344 A 1.0001 1.0001 0 0 0 18.292969 4.2929688 L 12 10.585938 L 5.7070312 4.2929688 A 1.0001 1.0001 0 0 0 4.9902344 3.9902344 z"/></svg>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="wrapper">
<div id="top-nav">
    <div class="container">
        <ul class="hidden-sm hidden-xs" >
            <li><a href="https://mariadb.com/kb/">Knowledge Base</a></li>
            <li><a href="https://mariadb.com/contact/">Contact</a></li>
            
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/columnstore-database-user-management/" rel="nofollow">Login</a>
                    </li>
                
            
            
            <li id="search-form">
                <form action="/kb/en/+search/" method="get" id="search-block-form" accept-charset="UTF-8">
                    <input id="search" title="Enter the terms you wish to search for."
                           placeholder="Search . . ." type="text"
                           name="q" value="" size="15" maxlength="128" class="form-text"
                           data-autocomplete-url="/kb/en/+search/autocomplete/">
                    <input type="hidden" name="quick" value="1" />
                    <input type="hidden" name="source" value="kb" />
                </form>
            </li>
            <li><a id="search-toggler" href="/kb/search/">Search</a></li>
            
        </ul>
    </div>
</div>
<div id="navbar-bottom" class="navbar">
    <div class="container">
        
        
        
        
        <div class="row">
            <div class="col-md-3 col-sm-9 col-xs-9">
                <a class="brand" href="/" title="MariaDB">
                    <img src="/kb/static/images/logo-2018-black.95f5978ae14d.png">
                </a>
            </div>
            <div class="col-md-9 hidden-sm hidden-xs">
                <div class="main-menu">
                    <ul id="main-menu" class="nav navbar-nav inline-block-sm">
    <li class="has-sub full-menu">
        <a href="/products" title="Products">Products</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/services" title="Services">Services</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/pricing" title="Pricing">Pricing</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/resources" title="Resources">Resources</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/about-us" title="About Us">About Us</a>
    </li>
    <li class="">
        <a class="button electric-eel small top-bar-right-download" href="/downloads/">Download</a>
    </li>
</ul>
                </div>
            </div>
            <div class="col-md-3 visible-sm visible-xs col-sm-3 col-xs-3 ps-rv">
                <div class="navbar-header text-right pull-right">
                    <button type="button" class="menu-control toggle-menu" id="open-menu">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="main">
    <div class="container">
        

        <div id="subheader1" class="clearfix">
            <div class="pull-left">
                
                <div id="breadcrumbs" class="breadcrumb">
                    <a href="/kb/en/">Knowledge Base</a>
                    


    
    » <a class="crumb" href="/kb/en/documentation/">MariaDB Server Documentation</a>
    

    
    » <a class="crumb" href="/kb/en/columns-storage-engines-and-plugins/">Columns, Storage Engines, and Plugins</a>
    

    
    » <a class="crumb" href="/kb/en/storage-engines/">Storage Engines</a>
    

    
    » <a class="crumb" href="/kb/en/mariadb-columnstore/">MariaDB ColumnStore</a>
    

    
    » <a class="crumb" href="/kb/en/managing-columnstore/">Managing ColumnStore</a>
    

    
    » <a class="crumb" href="/kb/en/managing-columnstore-database-environment/">Managing ColumnStore Database Environment</a>
    


    » <a class="node_link crumb" href="/kb/en/columnstore-database-user-management/">ColumnStore Database User Management</a>


                </div>
                
            </div>
        </div>
    </div>
    <div class="container" id="container-main">
        <div class="row">
            
            
                
                <aside id="sidebar-first" class="sidebar col-md-2 hidden-xs hidden-sm hidden-print">
                    
                        
                        <ul id="category_menu" class="nav nav-pills nav-stacked">
                            <li><a href="/kb/en/">Home</a></li>
                            
                                
                                    <li><a href="/kb/en/+questions/">Open Questions</a></li>
                                
                                <li><a href="/kb/en/documentation/">MariaDB Server</a></li>
                                <li><a href="/kb/en/maxscale/">MariaDB MaxScale</a></li>
                                <li><a href="/kb/en/mariadb-columnstore/">MariaDB ColumnStore</a></li>
                                <li><a href="/kb/en/connectors/">Connectors</a></li>
                            

                        </ul>
                    

                    
<div>



<div class="well well-small box actions"><div>

        <a class="btn btn-block btn-blue btn-sm" href="/kb/en/columnstore-database-user-management/+history" rel="nofollow">History</a>
        
        
        
        <a class="btn btn-block btn-blue btn-sm" href="/kb/en/columnstore-database-user-management/+source/">Source</a>
        
        <a class="btn btn-block btn-blue btn-sm flag" href="/kb/en/columnstore-database-user-management/+flag"
                data-flag-url="/kb/en/columnstore-database-user-management/+flag" rel="nofollow">
                Flag as Spam / Inappropriate</a>
        
        <a class="btn btn-block btn-blue btn-sm" href="/kb/en/columnstore-database-user-management/+translate/">
                Translate</a>
        

</div>
</div>





<div class="well well-small box node_info"><div>

    <dl>
        <dt>Created</dt>
        <dd>

<span class="datetime" title="2016-06-11 10:50">8 years, 3 months ago</span></dd>

        <dt>Modified</dt>
        <dd>

<span class="datetime" title="2018-10-05 10:37">5 years, 11 months ago</span></dd>

        <dt>Type</dt>
        <dd>article</dd>

        <dt>Status</dt>
        <dd>active</dd>

        <dt>License</dt>
        <dd>
            
                <a href="/kb/en/columnstore-database-user-management/+license/">CC BY-SA / Gnu FDL</a>
            
        </dd>

        
    </dl>

    
    <ul class="rss_feeds">
        <li><a href="/kb/en/columnstore-database-user-management/+history/feed/">
            History</a>
        </li>
        <li><a href="/kb/en/columnstore-database-user-management/+comments/feed/">
            Comments</a>
        </li>
    </ul>
    

</div>
</div>





    
    
    

<div class="well well-small box attachments"><div><div class="edit_link pull-right"><a href="/kb/en/columnstore-database-user-management/+edit/attachments/">Edit</a></div><h5>Attachments</h5></div><div>

        
            <div class="no_data">No attachments exist</div>
        
    
</div>
</div>

    



    
    
        

<div class="well well-small box"><div><h5>Localized Versions</h5></div><div>

        <ul>
            
            <li><a href="/kb/ja/columnstore-database-user-management/">ColumnStoreデータベースのユーザー管理</a> [ja]</li>
            
        </ul>
        
</div>
</div>

    






</div>


                    

































                </aside>
            
            
            
                
            
            
                
            
            <section id="content" class="limited_width col-md-8 clearfix">
                
                    <h1>ColumnStore Database User Management</h1>
                

                



                <div>
                    
    

    
    
    

    <div class="node creole">
        
        
        


    
    <div class="answer formatted">
        <div class="table_of_contents standalone"> <ol class="toc">

 <li class=""><a href="#basic-user-management" title="Basic user management">Basic user management</a></li>

 <li class=""><a href="#pam-unix-authentication" title="PAM Unix authentication">PAM Unix authentication</a></li>

 <li class=""><a href="#pam-ldap-authentication" title="PAM LDAP authentication">PAM LDAP authentication</a></li>

 <li class=""><a href="#pam-ldap-group-authentication" title="PAM LDAP group authentication">PAM LDAP group authentication</a></li>

 <li class=""><a href="#user-resource-allocation" title="User Resource Allocation">User Resource Allocation</a> <ol class="toc">

    <li class=""><a href="#user-priority-management" title="User Priority Management">User Priority Management</a>    <ol class="toc">

        <li class=""><a href="#enabling-user-priority" title="Enabling User Priority">Enabling User Priority</a>    </ol>
</li>

    <li class=""><a href="#user-priority-processing" title="User Priority Processing">User Priority Processing</a> </ol>
</li>
</div>
<h1 class="anchored_heading" id="basic-user-management">Basic user management</h1>
<p>MariaDB ColumnStore allows permissions to be set for user accounts. The syntax of these grants follows the standard MariaDB syntax (see <a href="/kb/en/grant/">GRANT</a>). </p>
<p>For the root user, ColumnStore comes with full privileges. In order to set/restrict user accounts, privileges must be given/restricted. ColumnStore uses a dedicated schema called <em>infinidb_vtable</em> for creation of all temporary tables used for ColumnStore query processing. The root user account has been given permission to this account by default, but full permission MUST be given for all user accounts to this schema:</p>
<pre class="fixed">GRANT CREATE TEMPORARY TABLES ON infinidb_vtable.* TO user_account; 
</pre><p>where user_account = user login, server and password characteristics</p>
<p>Further permissions/restrictions can now be placed on any existing objects (tables, functions, procedures, views) for any access/limitations wanting to be placed on users:
Example to give a user that has a password full access to all tables for a database (after the above grant has been given):</p>
<pre class="fixed">USE mysql;
GRANT ALL ON my_schema.* TO ‘someuser’@’somehost’
IDENTIFIED BY ‘somepassword’;
FLUSH PRIVILEGES;
</pre><p>Example to give a user that has a password read-only access to only 1 table (after the above grant has been given):</p>
<pre class="fixed">USE mysql;
GRANT SELECT ON my_schema.table1 TO ‘someuser’@’somehost’
IDENTIFIED BY ‘somepassword’;
FLUSH PRIVILEGES;
</pre><h1 class="anchored_heading" id="pam-unix-authentication">PAM Unix authentication</h1>
<p>Starting with ColumnStore 1.0.8, ColumnStore includes the necessary authentication plugin for PAM support. For general details see <a href="/kb/en/pam-authentication-plugin/">pam-authentication-plugin</a> but here we will outline the steps necessary to configure this for os authentication specific to a ColumnStore installation.</p>
<p>First ensure that the mysql user has read access to the /etc/shadow file, in this example a group is used to facilitate this:</p>
<pre class="fixed">$ sudo groupadd shadow 
$ sudo usermod -a -G shadow mysql 
$ sudo chown root:shadow /etc/shadow 
$ sudo chmod g+r /etc/shadow
</pre><p>Create a pam.d entry to configure unix password authentication:</p>
<pre class="fixed">$ vi /etc/pam.d/mysql
auth required pam_unix.so
account required pam_unix.so
</pre><p>Load the auth_pam.so plugin and create a user:</p>
<pre class="fixed">$ mcsmysql
&gt; INSTALL SONAME 'auth_pam';
&gt; GRANT SELECT ON test.* TO david IDENTIFIED VIA pam;
&gt; GRANT CREATE TEMPORARY TABLE ON infinidb_vtable.* TO david;
</pre><p>Restart ColumnStore so that the mariadb server process picks up the auth plugin and group changes:</p>
<pre class="fixed">$ sudo su - 
$ mcsadmin restartSystem
</pre><p>Now attempt to login to verify correct setup, entering the unix password for the account david when prompted:</p>
<pre class="fixed">$ mcsmysql -u david -p
</pre><p>If this still fails, try restartSystem once more and try logging in again as this seems to resolve the issue.</p>
<h1 class="anchored_heading" id="pam-ldap-authentication">PAM LDAP authentication</h1>
<p>Follow the instructions above for Pam UNIX authentication with the exception of the pam.d mysql file:</p>
<pre class="fixed">$ vi /etc/pam.d/mysql
auth required pam_ldap.so
account required pam_ldap.so
</pre><h1 class="anchored_heading" id="pam-ldap-group-authentication">PAM LDAP group authentication</h1>
<p>The PAM plugin can also be utilized for LDAP group authentication. A good reference written by a MariaDB support engineer on setting up OpenLDAP can be found <a href="http://www.geoffmontee.com/configuring-ldap-authentication-and-group-mapping-with-mariadb/">here</a>. Some additional notes that may be of help:</p>
<ul start="1"><li>if you get an error with the directory manager script, there are a couple of lines that may be wrapped if you cut and paste. Each line in the script must start with a command then a colon then a space.
</li><li>'authconfig --disableldapauth --disableldap --enableshadow --updateall' can be run to remove the ldap auth should you want to do this or if you made a mistake in the configuration values that you want to correct by re-running the command.
</li></ul>
<p>This example assumes you have followed the initial instructions in that article and setup an LDAP user 'geoff' in group 'mysql-admins' in domain ' dc=support,dc=mariadb'. The following instructions are adapted to reflect ColumnStore and should replace the latter MariaDB setup of the blog.</p>
<p>The PAM user mapping library must be built and installed locally:</p>
<pre class="fixed">wget https://raw.githubusercontent.com/MariaDB/server/10.1/plugin/auth_pam/mapper/pam_user_map.c
gcc pam_user_map.c -shared -lpam -fPIC -o pam_user_map.so
sudo install --mode=0755 pam_user_map.so /lib64/security/
</pre><p>Ensure that the 'mysql' user has read access to the /etc/shadow file, in this example a group is used to facilitate this:</p>
<pre class="fixed">$ sudo groupadd shadow 
$ sudo usermod -a -G shadow mysql 
$ sudo chown root:shadow /etc/shadow 
$ sudo chmod g+r /etc/shadow
</pre><p>Create a pam.d entry to configure ldap password authentication:</p>
<pre class="fixed">$ sudo vi /etc/pam.d/mysql
#%PAM-1.0
auth sufficient pam_ldap.so use_first_pass
auth sufficient pam_unix.so nullok try_first_pass
auth required pam_user_map.so

account [default=bad success=ok user_unknown=ignore] pam_ldap.so
account required pam_unix.so broken_shadow
</pre><p>Next the user mapping must be configured, this will map members of the ldap group 'mysql-admins' to the local 'dba' account (the @ character indicates that mysql-admins is a group):</p>
<pre class="fixed">$ sudo vi /etc/security/user_map.conf
@mysql-admins: dba
</pre><p>As an alternative, specific accounts can be referenced as follows.</p>
<pre class="fixed">$ sudo vi /etc/security/user_map.conf
geoff: dba
</pre><p>Due to the way that PAM works, a local 'dba' account must exist:</p>
<pre class="fixed">sudo useradd dba
</pre><p>Next, the pam plugin and mariadb accounts can be configured:</p>
<pre class="fixed">$ mcsmysql
-- Install the plugin
INSTALL SONAME 'auth_pam';

-- remove standard anonymous users if existing
DELETE FROM mysql.user WHERE User='';
FLUSH PRIVILEGES;

-- Create the &#34;dba&#34; user
CREATE USER 'dba'@'localhost' IDENTIFIED BY 'strongpassword';
GRANT ALL PRIVILEGES ON *.* TO 'dba'@'localhost';

-- Create an anonymous catch-all user that will use the PAM plugin and the mysql PAM policy
CREATE USER ''@'localhost' IDENTIFIED VIA pam USING 'mysql';

-- Allow the anonymous user to proxy as the dba user
GRANT PROXY ON 'dba'@'localhost' TO ''@'localhost';

-- columnstore temp table permission grant
GRANT CREATE TEMPORARY TABLE ON infinidb_vtable.* TO ''@'localhost' IDENTIFIED VIA pam;
</pre><p>Now restart columnstore since the user group permissions of mysql have changed and need to be picked up by the mysqld process:</p>
<pre class="fixed">mcsadmin restartSystem 
</pre><p>Test that an ldap account can now authenticate:</p>
<pre class="fixed">$ mcsmysql -u geoff -h localhost
[mariadb] Password:
Welcome to the MariaDB monitor.  Commands end with ; or \g.
Your MariaDB connection id is 10
Server version: 10.1.23-MariaDB Columnstore 1.0.x-1

Copyright (c) 2000, 2017, Oracle, MariaDB Corporation Ab and others.

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

MariaDB [(none)]&gt; SELECT USER(), CURRENT_USER();
+-----------------+----------------+
| USER()          | CURRENT_USER() |
+-----------------+----------------+
| geoff@localhost | dba@localhost  |
+-----------------+----------------+
1 row in set (0.00 sec)

MariaDB [(none)]&gt; select c1 from test.test_cs;
+------+
| c1   |
+------+
|    1 |
+------+
1 row in set (0.03 sec)
</pre><p>The first query shows that the authenticated user is 'geoff@localhost' while current user is 'dba@localhost'. This shows that the session authenticated as geoff and proxied to dba correctly.  </p>
<p>The second query just tests that a columnstore table can be queried correctly and should be updated for your local schema as appropriate.</p>
<h1 class="anchored_heading" id="user-resource-allocation">User Resource Allocation</h1>
<p>MariaDB ColumnStore supports the ability to give priority to resources allocated (CPU) based on a user. Users are allocated at least the % of CPU that they are assigned to by priority setting.
Effectively a particular user or a set of users can be guaranteed a set amount of resources. E.g:</p>
<ul start="1"><li>User 1 gets a minimum of 40% CPU Resources
</li><li>User 2 gets a minimum of 30% CPU Resources
</li><li>If any user logs in for a query while User 1 and User 2 are running queries, these new users (i.e., User 3,4 and 5) get only the remaining 30% of the CPU Resources."
</li></ul>
<h2 class="anchored_heading" id="user-priority-management">User Priority Management</h2>
<p>Three stored procedures were created in the <em>infinidb_querystats</em> schema for the user to set, remove and view user priorities. The priority table associates a user with a priority level. A user that does not have an entry is given the low priority level by default.</p>
<pre class="fixed">CalSetUserPriority (host varchar, user varchar, priority varchar)
</pre><ul start="1"><li>Assigns a priority level to user@host.
</li><li>Priority is case insensitive 'high', 'medium' or 'low'.
</li><li>Host and user will be validated to exist in MariaDB
</li></ul>
<pre class="fixed">CalRemoveUserPriority(host varchar, user varchar)
</pre><ul start="1"><li>Removes the user entry, effectively restoring the default of 'low'.
</li><li>User existence will not be validated.
</li></ul>
<pre class="fixed">CalShowProcessList()
</pre><ul start="1"><li>Prints a combination of mariadb 'show processlist' and user priority
</li></ul>
<p>The MariaDB user needs to be granted the execute privileges for these procedures and the select privileges for the tables in the <em>infinidb_querystats</em> schema. Or, chances are, the following should just work for a super user:</p>
<pre class="fixed">GRANT ALL ON infinidb_querystats.* TO 'user'@'host'; // user will now have the privilege to use the priority procedures and view query stats.
</pre><h3 class="anchored_heading" id="enabling-user-priority">Enabling User Priority</h3>
<p>To enable this feature, the &lt;UserPriority&gt;&lt;Enabled&gt; element in the MariaDB ColumnStore configuration file  should be set to Y (default is N).</p>
<pre class="fixed">&lt;UserPriority&gt;
     &lt;Enabled&gt;Y&lt;/Enabled&gt;
&lt;/UserPriority&gt;
</pre><p>Cross Engine Support must also be enabled. See the ”Cross-Engine Table Access” section in this guide.</p>
<h2 class="anchored_heading" id="user-priority-processing">User Priority Processing</h2>
<p>The PrimProc process has one job queue for each priority level and thread assigned to each queue. The number of threads assigned to each queue is configurable using the following elements in the configuration file:</p>
<pre class="fixed">&lt;PrimitiveServer&gt;&lt;HighPriorityPercentage&gt;
&lt;PrimitiveServer&gt;&lt;MediumPriorityPercentage&gt;
&lt;PrimitiveServer&gt;&lt;LowPriorityPercentage&gt;
</pre><p>The defaults are 60, 30, and 10 respectively. Each queue is given at least 1 thread so there is neither 'idle' priority configuration possible nor starvation. The number of threads started is normalized such that 100% = 2 * (the number of cores on the machine). The user can overbook or underbook their CPUs however they want.
This is an example of how threads are assigned on an 8-core system using the defaults.</p>
<ul start="1"><li>10% of 16 = 1.6, rounds down to 1 thread for the low priority queue.
</li><li>30% of 16 = 4.8, rounds down to 4 threads for the medium priority queue.
</li><li>The high priority queue gets the remaining 11 threads.
</li></ul>
<p>Each thread is given a preferred queue to get work from. If a thread's preferred queue is empty, it will choose jobs from the high, then medium, then low priority queues. If there are only low priority jobs running, on an 8-core system all 16 threads will process jobs from the low priority queue. If a medium priority query starts, using the defaults, the 15 threads assigned to the high and medium queues will process the medium queue, leaving the 1 assigned to the low queue to process the low priority jobs. Then, if a high priority query starts, the 11 threads assigned to the high priority queue will begin processing the high priority jobs, the 4 assigned to the medium queue will process those jobs, and the 1 assigned to the low queue will process those jobs. <br>
Given this algorithm, the configuration parameters could be thought of as minimum levels for each priority.
<br>
Note that this implementation only affects the processing done by PrimProc. Depending on the work distribution of a given query, a user may or may not observe overall performance proportional to their priority level.</p>

    </div>


        
            <div id="subscribe" class="well well-small hide hidden-print"
                 data-subscribe-url="/kb/en/columnstore-database-user-management/+subscriptions/add"
                 data-unsubscribe-url="/kb/en/columnstore-database-user-management/+subscriptions/remove">
            </div>
        

        
        
    
        <div class="simple_section_nav">
            <ul class="nav nav-pills">
                
                
                    <li><a href="/kb/en/managing-columnstore-database-environment/">
                        ↑ Managing ColumnStore Database Environment ↑
                    </a>
                    </li>
                
                
                    <li class="pull-right"><a href="/kb/en/columnstore-partition-management/">
                        ColumnStore Partition Management →
                    </a>
                    </li>
                
            </ul>
        </div>
    

        

        
        <h2>Comments</h2>
        
    
    <div id="comments" data-node-id="5709" data-comments-url="/kb/en/columnstore-database-user-management/+comments"
         data-reply-url="/kb/en/columnstore-database-user-management/comments/post/">
        Comments loading...
    </div>

        

    </div>


                    <div id="content_disclaimer" class="graybox">
                        Content reproduced on this site is the property of its respective owners,
                        and this content is not reviewed in advance by MariaDB. The views, information and opinions
                        expressed by this content do not necessarily represent those of MariaDB or any other party.
                    </div>
                </div>
            </section>

            
                <div id="right_bar" class="col-md-2">
                    
    
        
        <ul class="section_navigation well well-small hidden-xs hidden-sm">
            
                <li class="parent"><a href="/kb/en/managing-columnstore-database-environment/">
                    ↑ Managing ColumnStore Database Environment ↑
                </a>
                </li>
            
            
                
                    <li class="active">
                        <span>ColumnStore Database User Management</span>
                        
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/columnstore-partition-management/">
                            
                            ColumnStore Partition Management
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/columnstore-system-variables/">
                            <span class="pull-right not_primary"></span>
                            ColumnStore System Variables
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/configuring-columnstore-cross-engine-joins/">
                            
                            Configuring ColumnStore Cross-Engine Joins
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/configuring-columnstore-local-pm-query-mode/">
                            
                            Configuring ColumnStore Local PM Query Mode
                        </a>
                    </li>
                
            
        </ul>
    
    

                </div>
            
        </div>
    </div>
</div>

<!-- Footer -->
<footer id="footer">
    <div class="footer">
        <div class="container">
            <div class="row">
                <div class="col-xs-12">
                    <ul class="list-inline text-center footer-nav">
                        <li>
                            <h5>
                                <a href="https://mariadb.com/products" title="Products">Products</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/services" title="Services">Services</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/pricing" title="Pricing">Pricing</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/resources" title="Resources">Resources</a>
                            </h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/about-us" title="About MariaDB">About Us</a></h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/download" title="Download">Download MariaDB</a></h5>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="row row-10">
                
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div id="block-footerformcontact" class="block block-block-content block-block-contentd754ee1b-3cc9-40e7-9ef4-f504f1197fb1">
                        
                            <h5 style="font-weight: 400;">Subscribe to our newsletter!</h5>
                            <script src="//app-sj15.marketo.com/js/forms2/js/forms2.min.js"></script><form id="mktoForm_1498"></form>
                            <script>
                                <!--//--><![CDATA[// ><!--
                                MktoForms2.loadForm("//app-sj15.marketo.com", "573-PXI-984", 1498);
                                //--><!]]]]><![CDATA[>
                                //--><!]]>
                            </script>
                        
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div class="footer-copyright">
                        <div class="text-center">
                            <ul class="list-inline no-margin">
                                <li>
                                    <a href="/legal" title="Legal">Legal</a>
                                </li>
                                <li>
                                    <a href="/privacy-policy" title="Privacy Policy">Privacy Policy</a>
                                </li>
                                <li>
                                    <a href="/cookie-policy/" title="Cookies">Cookie Policy</a>
                                </li>
                            </ul>
                            <p>Copyright &copy; 2024 MariaDB. All rights reserved.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
</footer>
</div>

<div id="ajax_loading">
    <img src="/kb/static/images/ajax-loader.a51c5608d01a.gif" />
</div>

    <!-- Google Tag Manager -->
    <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-MK2847"
                      height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
            '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MK2847');</script>
    <!-- End Google Tag Manager -->

</body>

<script type="text/javascript" src="/kb/static/js/main.1587e3a666fc.js" charset="utf-8"></script>

</html>