<?xml version="1.0" encoding="utf-8"?>
<rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title>MariaDB Knowledge Base Comments for: Node Joining Failure When wsrep_sst_method=mariabackup</title><link>https://mariadb.com/kb/en/node-joining-failure-when-wsrep_sst_methodmariabackup/+comments/feed/</link><description></description><atom:link href="https://mariadb.com/kb/en/node-joining-failure-when-wsrep_sst_methodmariabackup/+comments/feed/" rel="self"></atom:link><language>en-us</language><lastBuildDate>Tue, 13 Feb 2024 02:02:46 +0000</lastBuildDate><item><title>Re: Node Joining Failure When wsrep_sst_method=mariabackup</title><link>https://mariadb.com/kb/en/node-joining-failure-when-wsrep_sst_methodmariabackup/+comments/3969</link><description>&lt;div class="cstm-style graybox"&gt;&lt;p&gt;First, setting the SST user's GRANT line to include the IP addresses instead of localhost. Previously, I was using 'sst'@'localhost' as is the normal/basic setup. However, MariaBackup seems to require an IP address for each node (e.g. Node1 needs a grant for 'sst'@'node2', 'sst'@'node3', etc). As the current setup has a private RFC1918 /24 subnet available, I used 'sst'@'10.20.30.%' for the GRANT.&lt;/p&gt;
&lt;/div&gt;&lt;p&gt;This is not correct. The 'sst'@'localhost' user account on the donor node is sufficient. If this were a privilege issue, then your SST would have failed on the donor node--not the joiner node. See here:&lt;/p&gt;
&lt;p&gt;&lt;a href="https://mariadb.com/kb/en/library/mariabackup-sst-method/#authentication-and-privileges"&gt;https://mariadb.com/kb/en/library/mariabackup-sst-method/#authentication-and-privileges&lt;/a&gt;&lt;/p&gt;
&lt;div class="cstm-style graybox"&gt;&lt;p&gt;Finally, the 'datadir' entry under [mysqld] MUST exist or MariaBackup will make a mess of itself.&lt;/p&gt;
&lt;/div&gt;&lt;p&gt;This is most likely what caused your problems. However, keep in mind that this bug has been fixed in &lt;a href="/kb/en/mariadb-10310-release-notes/"&gt;MariaDB 10.3.10&lt;/a&gt; and later. See here:&lt;/p&gt;
&lt;p&gt;&lt;a href="https://mariadb.com/kb/en/library/mariabackup-overview/#no-default-datadir"&gt;https://mariadb.com/kb/en/library/mariabackup-overview/#no-default-datadir&lt;/a&gt;&lt;/p&gt;
&lt;div class="cstm-style graybox"&gt;&lt;p&gt;No [ERROR] lines on the first MariaDB server at all.&lt;/p&gt;
&lt;/div&gt;&lt;p&gt;In the future, remember to check the SST logs on the donor node &lt;strong&gt;and&lt;/strong&gt; the joiner node! See here:&lt;/p&gt;
&lt;p&gt;&lt;a href="https://mariadb.com/kb/en/library/mariabackup-sst-method/#logs"&gt;https://mariadb.com/kb/en/library/mariabackup-sst-method/#logs&lt;/a&gt;&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Geoff Montee</dc:creator><guid>https://mariadb.com/kb/en/node-joining-failure-when-wsrep_sst_methodmariabackup/+comments/3969</guid></item><item><title>Re: Node Joining Failure When wsrep_sst_method=mariabackup</title><link>https://mariadb.com/kb/en/node-joining-failure-when-wsrep_sst_methodmariabackup/+comments/3607</link><description>&lt;p&gt;Hello!&lt;/p&gt;
&lt;p&gt;I just resolved this with two configuration changes.&lt;/p&gt;
&lt;p&gt;First, setting the SST user's GRANT line to include the IP addresses instead of localhost. Previously, I was using 'sst'@'localhost' as is the normal/basic setup. However, MariaBackup seems to require an IP address for each node (e.g. Node1 needs a grant for 'sst'@'node2', 'sst'@'node3', etc). As the current setup has a private RFC1918 /24 subnet available, I used 'sst'@'10.20.30.%' for the GRANT. &lt;/p&gt;
&lt;p&gt;Finally, the 'datadir' entry under [mysqld]  &lt;strong&gt;MUST&lt;/strong&gt; exist or MariaBackup will make a mess of itself. &lt;/p&gt;
&lt;p&gt;I hope this helps!&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/"> </dc:creator><guid>https://mariadb.com/kb/en/node-joining-failure-when-wsrep_sst_methodmariabackup/+comments/3607</guid></item></channel></rss>