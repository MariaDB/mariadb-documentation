<!DOCTYPE html>
<html>
<head data-cookie-domain=""
      data-cookie-path="/">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="apple-touch-icon" sizes="180x180" href="/kb/static/images/favicons/apple-touch-icon.159e713979be.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/kb/static/images/favicons/favicon-32x32.bc0ac1d5d11e.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/kb/static/images/favicons/favicon-16x16.5801f8f0f34e.png">
    <link rel="shortcut icon" href="/kb/static/images/favicons/favicon.d122d305dee4.ico" type="image/x-icon" />

    <title>InnoDB Redo Log - MariaDB Knowledge Base</title>

    <link href="/kb/static/css/main.f7633538c846.css" rel="stylesheet" type="text/css" />

    

    

    <!-- FB Open Graph tags -->
    <meta property="og:title" content="InnoDB Redo Log" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://mariadb.com/kb/en/innodb-redo-log/" />
    <meta property="og:image" content="http://mariadb.comaskmonty-logo.png" />
    <meta property="og:site_name" content="MariaDB KnowledgeBase" />
    <meta property="fb:admins" content="514852603" />
    <meta property="og:description" content="The redo log is used by InnoDB during crash recovery." />

    <meta name="description" content="The redo log is used by InnoDB during crash recovery." />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="//fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet"/>
    
</head>
<body class="mpkb nodes products nodes_view jqui" id="nodes_view">





<div id="menu-mobile" class="visible-sm visible-xs">

    <div>
        <div id="mobile-close-menu" class="text-right">
            <a href="javascript:void(0)" title="Close Menu" id="back-main" class="toggle-menu">X<span></span></a>
        </div>
    </div>
    <div class="mainmenu-mobile">
        <ul class="ls-none ul-menu">
            <li data-sub="submenu5"><a class="open-form-search" href="/kb/search/" title="Search">Search </a></li>
            <li data-sub="submenu0"><a href="/products" title="Products">Products</a><span class="arrow-main"></span></li>
            <li data-sub="submenu1"><a href="/services" title="Services">Services</a><span class="arrow-main"></span></li>
            <li data-sub="submenu2"><a href="/resources" title="Resources">Resources</a><span class="arrow-main"></span></li>
            <li data-sub="submenu3"><a href="/about-us" title="About">About</a><span class="arrow-main"></span></li>
            <li data-sub="submenu4"><a href="/contact" title="Contact">Contact</a></li>
        </ul>
    </div>

    <div class="nav-top-mobile">
        <div class="select-box form">

            <ul class="inline-block-md mb-none top-nav">
                <li>

                </li>
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/innodb-redo-log/"> Login</a>
                    </li>
                
            </ul>



        </div>
        <p class="text-center copyright">Copyright &copy; 2024 MariaDB. All rights reserved.</p>
    </div>
</div>
<div class="violator-wrap d-none" id="top_violator">
    <div class="container">
        <div class="row">
            <div class="col-xs-12 col-sm-12">
                <div class="violator-outer">
                    <div class="violator-inner">
                        <div class="row">
                            <div class="col-xs-12 col-sm-9 col-lg-7 col-lg-offset-2" id="top_violator_content">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="content-link" target="_blank" rel="nofollow noreferrer">
                                    <span>The Ultimate Guide to High Availability with MariaDB</span>
                                </a>
                            </div>
                            <div class="col-xs-12 col-sm-3" id="top_violator_cta">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="btn btn-mariadb" target="_blank" rel="nofollow noreferrer">Download Now</a>
                            </div>
                        </div>
                    </div>
                    <button type="button" class="btn btn-link close-btn">
                        <svg xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 24 24" width="15px" height="15px"><path d="M 4.9902344 3.9902344 A 1.0001 1.0001 0 0 0 4.2929688 5.7070312 L 10.585938 12 L 4.2929688 18.292969 A 1.0001 1.0001 0 1 0 5.7070312 19.707031 L 12 13.414062 L 18.292969 19.707031 A 1.0001 1.0001 0 1 0 19.707031 18.292969 L 13.414062 12 L 19.707031 5.7070312 A 1.0001 1.0001 0 0 0 18.980469 3.9902344 A 1.0001 1.0001 0 0 0 18.292969 4.2929688 L 12 10.585938 L 5.7070312 4.2929688 A 1.0001 1.0001 0 0 0 4.9902344 3.9902344 z"/></svg>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="wrapper">
<div id="top-nav">
    <div class="container">
        <ul class="hidden-sm hidden-xs" >
            <li><a href="https://mariadb.com/kb/">Knowledge Base</a></li>
            <li><a href="https://mariadb.com/contact/">Contact</a></li>
            
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/innodb-redo-log/" rel="nofollow">Login</a>
                    </li>
                
            
            
            <li id="search-form">
                <form action="/kb/en/+search/" method="get" id="search-block-form" accept-charset="UTF-8">
                    <input id="search" title="Enter the terms you wish to search for."
                           placeholder="Search . . ." type="text"
                           name="q" value="" size="15" maxlength="128" class="form-text"
                           data-autocomplete-url="/kb/en/+search/autocomplete/">
                    <input type="hidden" name="quick" value="1" />
                    <input type="hidden" name="source" value="kb" />
                </form>
            </li>
            <li><a id="search-toggler" href="/kb/search/">Search</a></li>
            
        </ul>
    </div>
</div>
<div id="navbar-bottom" class="navbar">
    <div class="container">
        
        
        
        
        <div class="row">
            <div class="col-md-3 col-sm-9 col-xs-9">
                <a class="brand" href="/" title="MariaDB">
                    <img src="/kb/static/images/logo-2018-black.95f5978ae14d.png">
                </a>
            </div>
            <div class="col-md-9 hidden-sm hidden-xs">
                <div class="main-menu">
                    <ul id="main-menu" class="nav navbar-nav inline-block-sm">
    <li class="has-sub full-menu">
        <a href="/products" title="Products">Products</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/services" title="Services">Services</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/pricing" title="Pricing">Pricing</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/resources" title="Resources">Resources</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/about-us" title="About Us">About Us</a>
    </li>
    <li class="">
        <a class="button electric-eel small top-bar-right-download" href="/downloads/">Download</a>
    </li>
</ul>
                </div>
            </div>
            <div class="col-md-3 visible-sm visible-xs col-sm-3 col-xs-3 ps-rv">
                <div class="navbar-header text-right pull-right">
                    <button type="button" class="menu-control toggle-menu" id="open-menu">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="main">
    <div class="container">
        

        <div id="subheader1" class="clearfix">
            <div class="pull-left">
                
                <div id="breadcrumbs" class="breadcrumb">
                    <a href="/kb/en/">Knowledge Base</a>
                    


    
    » <a class="crumb" href="/kb/en/documentation/">MariaDB Server Documentation</a>
    

    
    » <a class="crumb" href="/kb/en/columns-storage-engines-and-plugins/">Columns, Storage Engines, and Plugins</a>
    

    
    » <a class="crumb" href="/kb/en/storage-engines/">Storage Engines</a>
    

    
    » <a class="crumb" href="/kb/en/innodb/">InnoDB</a>
    


    » <a class="node_link crumb" href="/kb/en/innodb-redo-log/">InnoDB Redo Log</a>


                </div>
                
            </div>
        </div>
    </div>
    <div class="container" id="container-main">
        <div class="row">
            
            
                
                <aside id="sidebar-first" class="sidebar col-md-2 hidden-xs hidden-sm hidden-print">
                    
                        
                        <ul id="category_menu" class="nav nav-pills nav-stacked">
                            <li><a href="/kb/en/">Home</a></li>
                            
                                
                                    <li><a href="/kb/en/+questions/">Open Questions</a></li>
                                
                                <li><a href="/kb/en/documentation/">MariaDB Server</a></li>
                                <li><a href="/kb/en/maxscale/">MariaDB MaxScale</a></li>
                                <li><a href="/kb/en/mariadb-columnstore/">MariaDB ColumnStore</a></li>
                                <li><a href="/kb/en/connectors/">Connectors</a></li>
                            

                        </ul>
                    

                    
<div>



<div class="well well-small box actions"><div>

        <a class="btn btn-block btn-blue btn-sm" href="/kb/en/innodb-redo-log/+history" rel="nofollow">History</a>
        
        
        
        <a class="btn btn-block btn-blue btn-sm" href="/kb/en/innodb-redo-log/+source/">Source</a>
        
        <a class="btn btn-block btn-blue btn-sm flag" href="/kb/en/innodb-redo-log/+flag"
                data-flag-url="/kb/en/innodb-redo-log/+flag" rel="nofollow">
                Flag as Spam / Inappropriate</a>
        
        <a class="btn btn-block btn-blue btn-sm" href="/kb/en/innodb-redo-log/+translate/">
                Translate</a>
        

</div>
</div>





<div class="well well-small box node_info"><div>

    <dl>
        <dt>Created</dt>
        <dd>

<span class="datetime" title="2018-12-17 21:25">5 years, 12 months ago</span></dd>

        <dt>Modified</dt>
        <dd>

<span class="datetime" title="2024-01-30 22:14">10 months, 2 weeks ago</span></dd>

        <dt>Type</dt>
        <dd>article</dd>

        <dt>Status</dt>
        <dd>active</dd>

        <dt>License</dt>
        <dd>
            
                <a href="/kb/en/innodb-redo-log/+license/">CC BY-SA / Gnu FDL</a>
            
        </dd>

        
    </dl>

    
    <ul class="rss_feeds">
        <li><a href="/kb/en/innodb-redo-log/+history/feed/">
            History</a>
        </li>
        <li><a href="/kb/en/innodb-redo-log/+comments/feed/">
            Comments</a>
        </li>
    </ul>
    

</div>
</div>





    
    
    

<div class="well well-small box attachments"><div><div class="edit_link pull-right"><a href="/kb/en/innodb-redo-log/+edit/attachments/">Edit</a></div><h5>Attachments</h5></div><div>

        
            <div class="no_data">No attachments exist</div>
        
    
</div>
</div>

    



    
    



    
    

<div class="well well-small box"><div><h5>Product Versions</h5></div><div>

        <ul id="product_chooser">
            
                <li class="mariadb_from_10_5">
                    <label><input type="checkbox" data-product-class="mariadb_from_10_5"
                            >MariaDB starting with 10.5</label>
                </li>
            
                <li class="mariadb_from_10_5">
                    <label><input type="checkbox" data-product-class="mariadb_from_10_5"
                            >MariaDB starting with 10.5</label>
                </li>
            
        </ul>
    
</div>
</div>





    

<div class="well well-small box"><div><h5>Parents</h5></div><div>

        <ul>
            
                <li><a href="/kb/en/innodb-and-xtradb/">InnoDB</a></li>
            
                <li><a href="/kb/en/server-monitoring-logs/">Server Monitoring &amp; Logs</a></li>
            
        </ul>
    
</div>
</div>



</div>


                    

































                </aside>
            
            
            
                
            
            
                
            
            <section id="content" class="limited_width col-md-8 clearfix">
                
                    <h1>InnoDB Redo Log</h1>
                

                



                <div>
                    
    

    
    
    

    <div class="node creole">
        
        
        


    
    <div class="answer formatted">
        <div class="table_of_contents well well-small">
<h3>Contents</h3>
 <ol class="toc">

    <li class=""><a href="#overview" title="Overview">Overview</a></li>

    <li class=""><a href="#flushing-effects-on-performance-and-consistency" title="Flushing Effects on Performance and Consistency">Flushing Effects on Performance and Consistency</a>    <ol class="toc">

        <li class=""><a href="#binary-log-group-commit-and-redo-log-flushing" title="Binary Log Group Commit and Redo Log Flushing">Binary Log Group Commit and Redo Log Flushing</a>    </ol>
</li>

    <li class=""><a href="#redo-log-group-capacity" title="Redo Log Group Capacity">Redo Log Group Capacity</a>    <ol class="toc">

        <li class=""><a href="#changing-the-redo-log-group-capacity" title="Changing the Redo Log Group Capacity">Changing the Redo Log Group Capacity</a>    </ol>
</li>

    <li class=""><a href="#log-sequence-number-lsn" title="Log Sequence Number (LSN)">Log Sequence Number (LSN)</a></li>

    <li class=""><a href="#checkpoints" title="Checkpoints">Checkpoints</a>    <ol class="toc">

        <li class=""><a href="#determining-the-checkpoint-age" title="Determining the Checkpoint Age">Determining the Checkpoint Age</a>        <ol class="toc">

            <li class=""><a href="#determining-the-checkpoint-age-in-innodb" title="Determining the Checkpoint Age in InnoDB">Determining the Checkpoint Age in InnoDB</a>        </ol>
    </ol>
</li>

    <li class=""><a href="#determining-the-redo-log-occupancy" title="Determining the Redo Log Occupancy">Determining the Redo Log Occupancy</a></li>

    <li class=""><a href="#mariadb-108-updates" title="MariaDB 10.8 Updates">MariaDB 10.8 Updates</a> </ol>
</li>
</div>
<div class="cstm-style redbox"><p>Directly editing or moving the redo logs can cause corruption, and should never normally be attempted.</p>
</div><h2 class="anchored_heading" id="overview">Overview</h2>
<p>The redo log is used by <a href="/kb/en/innodb/">InnoDB</a> during crash recovery and background flushing of transactions to the tablespaces. The redo log files have names like <code>ib_logfileN</code>, where <code>N</code> is an integer. From <a href="/kb/en/what-is-mariadb-105/">MariaDB 10.5</a>, there is only one redo log, so the file will always be named <code>ib_logfile0</code>. If the <a href="/kb/en/innodb-system-variables/#innodb_log_group_home_dir">innodb_log_group_home_dir</a> system variable is configured, then the redo log files will be created in that directory. Otherwise, they will be created in the directory defined by the <a href="/kb/en/server-system-variables/#datadir">datadir</a> system variable.</p>
<h2 class="anchored_heading" id="flushing-effects-on-performance-and-consistency">Flushing Effects on Performance and Consistency</h2>
<p>The <a href="/kb/en/innodb-system-variables/#innodb_flush_log_at_trx_commit">innodb_flush_log_at_trx_commit</a> system variable determines how often the transactions are flushed to the redo log, and it is important to achieve a good balance between speed and reliability.</p>
<h3 class="anchored_heading" id="binary-log-group-commit-and-redo-log-flushing">Binary Log Group Commit and Redo Log Flushing</h3>
<p>In <a href="/kb/en/what-is-mariadb-100/">MariaDB 10.0</a> and above, when both <a href="/kb/en/innodb-system-variables/#innodb_flush_log_at_trx_commit">innodb_flush_log_at_trx_commit=1</a> (the default) is set and the <a href="/kb/en/binary-log/">binary log</a> is enabled, there is now one less sync to disk inside InnoDB during commit (2 syncs shared between a group of transactions instead of 3). See <a href="/kb/en/binary-log-group-commit-and-innodb-flushing-performance/">Binary Log Group Commit and InnoDB Flushing Performance</a> for more information.</p>
<h2 class="anchored_heading" id="redo-log-group-capacity">Redo Log Group Capacity</h2>
<p>The redo log group capacity is the total combined size of all InnoDB redo logs. The relevant factors are:</p>
<ul start="1"><li>From <a href="/kb/en/what-is-mariadb-105/">MariaDB 10.5</a>, there is 1 redo log. For <a href="/kb/en/what-is-mariadb-104/">MariaDB 10.4</a> and before, the number of redo log files is configured by the <a href="/kb/en/innodb-system-variables/#innodb_log_files_in_group">innodb_log_files_in_group</a> system variable.
</li><li>The size of each redo log file is configured by the <a href="/kb/en/innodb-system-variables/#innodb_log_file_size">innodb_log_file_size</a> system variable. This can safely be set to a much higher value from <a href="/kb/en/what-is-mariadb-105/">MariaDB 10.5</a>. Before <a href="/kb/en/what-is-mariadb-109/">MariaDB 10.9</a>, resizing required the server to be restarted. From <a href="/kb/en/what-is-mariadb-109/">MariaDB 10.9</a> the variable can be set dynamically.
</li></ul>
<p>The redo log group capacity is determined by the following calculation:</p>
<p><code>innodb_log_group_capacity</code> =  <code><a href="/kb/en/innodb-system-variables/#innodb_log_file_size">innodb_log_file_size</a></code> * <code><a href="/kb/en/innodb-system-variables/#innodb_log_files_in_group">innodb_log_files_in_group</a></code></p>
<p>For example, if <a href="/kb/en/innodb-system-variables/#innodb_log_file_size">innodb_log_file_size</a> is set to <code>2G</code> and <a href="/kb/en/innodb-system-variables/#innodb_log_files_in_group">innodb_log_files_in_group</a> is set to <code>2</code>, then we would have the following:</p>
<ul start="1"><li><code>innodb_log_group_capacity</code> =  <code><a href="/kb/en/innodb-system-variables/#innodb_log_file_size">innodb_log_file_size</a></code> * <code><a href="/kb/en/innodb-system-variables/#innodb_log_files_in_group">innodb_log_files_in_group</a></code>
</li><li>= <code>2G</code> * <code>2</code>
</li><li>= <code>4G</code>
</li></ul>
<h3 class="anchored_heading" id="changing-the-redo-log-group-capacity">Changing the Redo Log Group Capacity</h3>
<p>The number (until <a href="/kb/en/what-is-mariadb-104/">MariaDB 10.4</a> only - from <a href="/kb/en/what-is-mariadb-105/">MariaDB 10.5</a> there is only 1 redo log) or size of redo log files can be changed with the following process:</p>
<ul start="1"><li>Stop the server.
</li><li>To change the log file size, configure <a href="/kb/en/innodb-system-variables/#innodb_log_file_size">innodb_log_file_size</a>. To increase the number of log files (until <a href="/kb/en/what-is-mariadb-104/">MariaDB 10.4</a> only), configure <a href="/kb/en/innodb-system-variables/#innodb_log_files_in_group">innodb_log_files_in_group</a>.
</li><li>Start the server.
</li></ul>
<h2 class="anchored_heading" id="log-sequence-number-lsn">Log Sequence Number (LSN)</h2>
<p>Records within the InnoDB redo log are identified via a log sequence number (LSN).</p>
<h2 class="anchored_heading" id="checkpoints">Checkpoints</h2>
<p>When InnoDB performs a checkpoint, it writes the LSN of the oldest dirty page in the <a href="/kb/en/innodb-buffer-pool/">InnoDB buffer pool</a> to the InnoDB redo log. If a page is the oldest dirty page in the  <a href="/kb/en/innodb-buffer-pool/">InnoDB buffer pool</a>, then that means that all pages with lower LSNs have been flushed to the physical InnoDB tablespace files. If the server were to crash, then InnoDB would perform crash recovery by only applying log records with LSNs that are greater than or equal to the LSN of the oldest dirty page written in the last checkpoint.</p>
<p>Checkpoints are one of the tasks performed by the InnoDB master background thread. This thread schedules checkpoints 7 seconds apart when the server is very active, but checkpoints can happen more frequently when the server is less active.</p>
<p>Dirty pages are not actually flushed from the buffer pool to the physical InnoDB tablespace files during a checkpoint. That process happens asynchronously on a continuous basis by InnoDB's write I/O background threads configured by the <a href="/kb/en/innodb-system-variables/#innodb_write_io_threads">innodb_write_io_threads</a> system variable. If you want to make this process more aggressive, then you can decrease the value of the <a href="/kb/en/innodb-system-variables/#innodb_max_dirty_pages_pct">innodb_max_dirty_pages_pct</a> system variable. You may also need to better tune InnoDB's I/O capacity on your system by setting the <a href="/kb/en/innodb-system-variables/#innodb_io_capacity">innodb_io_capacity</a> system variable.</p>
<h3 class="anchored_heading" id="determining-the-checkpoint-age">Determining the Checkpoint Age</h3>
<p>The checkpoint age is the amount of data written to the InnoDB redo log since the last checkpoint.</p>
<h4 class="anchored_heading" id="determining-the-checkpoint-age-in-innodb">Determining the Checkpoint Age in InnoDB</h4>
<div class="mariadb_from_10_5 mariadb from_10_5 product"><h5 class="product_title">MariaDB starting with <a href="/kb/en/what-is-mariadb-105/">10.5</a></h5><p><a href="/kb/en/what-is-mariadb-105/">MariaDB 10.5</a> reintroduced the <a href="/kb/en/innodb-status-variables/#innodb_checkpoint_age">Innodb_checkpoint_age</a> status variable (available in XtraDB until <a href="/kb/en/what-is-mariadb-101/">MariaDB 10.1</a>) for determining the checkpoint age.</p>
</div><p>The checkpoint age can also be determined by the process shown below.</p>
<p>To determine the InnoDB checkpoint age, do the following:</p>
<ul start="1"><li>Query <a href="/kb/en/show-engine-innodb-status/">SHOW ENGINE INNODB STATUS</a>.
</li><li>Find the <code>LOG</code> section. For example:
</li></ul>
<pre class="fixed">---
LOG
---
Log sequence number 252794398789379
Log flushed up to 252794398789379
Pages flushed up to 252792767756840
Last checkpoint at 252792767756840
0 pending log flushes, 0 pending chkp writes
23930412 log i/o's done, 2.03 log i/o's/second
</pre><ul start="1"><li>Perform the following calculation:
</li></ul>
<p><code>innodb_checkpoint_age</code> = <code>Log sequence number</code> - <code>Last checkpoint at</code></p>
<p>In the example above, that would be:</p>
<ul start="1"><li><code>innodb_checkpoint_age</code> = <code>Log sequence number</code> - <code>Last checkpoint at</code> 
</li><li>= 252794398789379 - 252792767756840 
</li><li>= 1631032539 bytes 
</li><li>= 1631032539 byes / (1024 * 1024 * 1024) (GB/bytes) 
</li><li>= 1.5 GB of redo log written since last checkpoint
</li></ul>
<h2 class="anchored_heading" id="determining-the-redo-log-occupancy">Determining the Redo Log Occupancy</h2>
<p>The redo log occupancy is the percentage of the InnoDB redo log capacity that is taken up by dirty pages that have not yet been flushed to the physical InnoDB tablespace files in a checkpoint. Therefore, it's determined by the following calculation:</p>
<p><code>innodb_log_occupancy</code> = <code><a href="#determining-the-checkpoint-age">innodb_checkpoint_age</a></code> / <code><a href="#redo-log-group-capacity">innodb_log_group_capacity</a></code></p>
<p>For example, if <code><a href="#determining-the-checkpoint-age">innodb_checkpoint_age</a></code> is <code>1.5G</code> and <code><a href="#redo-log-group-capacity">innodb_log_group_capacity</a></code> is <code>4G</code>, then we would have the following:</p>
<ul start="1"><li><code>innodb_log_occupancy</code> = <code><a href="#determining-the-checkpoint-age">innodb_checkpoint_age</a></code> / <code><a href="#redo-log-group-capacity">innodb_log_group_capacity</a></code>
</li><li>= <code>1.5G</code> / <code>4G</code>
</li><li>= <code>0.375</code>
</li></ul>
<p>If the calculated value for redo log occupancy is too close to <code>1.0</code>, then the InnoDB redo log capacity may be too small for the current workload.</p>
<h2 class="anchored_heading" id="mariadb-108-updates"><a href="/kb/en/what-is-mariadb-108/">MariaDB 10.8</a> Updates</h2>
<p>A number of redo log improvements were made in <a href="/kb/en/what-is-mariadb-108/">MariaDB 10.8</a>:</p>
<ul start="1"><li>Autosize innodb_buffer_pool_chunk_size (<a href="https://jira.mariadb.org/browse/MDEV-25342">MDEV-25342</a>).
</li><li>Improve the redo log for concurrency (<a href="https://jira.mariadb.org/browse/MDEV-14425">MDEV-14425</a>).
</li><li>Remove FIL_PAGE_FILE_FLUSH_LSN (<a href="https://jira.mariadb.org/browse/MDEV-27199">MDEV-27199</a>). 
</li></ul>
<p>Before <a href="/kb/en/mariadb-1081-release-notes/">MariaDB 10.8.1</a>, <a href="/kb/en/mariabackup-options/#-prepare">mariadb-backup --prepare</a> created a zero-length ib_logfile0 as a dummy placeholder. From <a href="/kb/en/mariadb-1081-release-notes/">MariaDB 10.8.1</a> (<a href="https://jira.mariadb.org/browse/MDEV-14425">MDEV-14425</a>), the size of that dummy file was increased to 12304 (0x3010) bytes, and all updates of FIL_PAGE_FILE_FLUSH_LSN in the first page of the system tablespace are removed.</p>
<p>From <a href="/kb/en/mariadb-1081-release-notes/">MariaDB 10.8.1</a>, if the server is started up with a zero-sized ib_logfile0, it is assumed that an upgrade is being performed after a backup had been prepared. The start LSN will then be read from FIL_PAGE_FILE_FLUSH_LSN, and a new log file will be created starting from exactly that LSN.</p>
<p>Manually creating a zero-sized ib_logfile0 without manually updating the FIL_PAGE_FILE_FLUSH_LSN in the system tablespace to a recent enough LSN may result in error messages such as "page LSN is in the future". If a log was discarded while some changes had already been written to data pages, all sort of corruption may occur.</p>
<p>If the database was initialized with a server that never updates the FIL_PAGE_FILE_FLUSH_LSN field, then any server startup attempts with a zero-size ib_logfile0 will be refused because of an invalid LSN. If that field was ever updated with a valid LSN by an older server, this safety mechanism cannot work, and the server may "rewind" to an earlier LSN.</p>

    </div>


        
            <div id="subscribe" class="well well-small hide hidden-print"
                 data-subscribe-url="/kb/en/innodb-redo-log/+subscriptions/add"
                 data-unsubscribe-url="/kb/en/innodb-redo-log/+subscriptions/remove">
            </div>
        

        
        
    
        <div class="simple_section_nav">
            <ul class="nav nav-pills">
                
                    <li><a href="/kb/en/innodb-strict-mode/">
                        ← InnoDB Strict Mode
                    </a>
                    </li>
                
                
                    <li><a href="/kb/en/innodb-and-xtradb/">
                        ↑ InnoDB ↑
                    </a>
                    </li>
                
                
                    <li class="pull-right"><a href="/kb/en/innodb-undo-log/">
                        InnoDB Undo Log →
                    </a>
                    </li>
                
            </ul>
        </div>
    

        

        
        <h2>Comments</h2>
        
    
    <div id="comments" data-node-id="8274" data-comments-url="/kb/en/innodb-redo-log/+comments"
         data-reply-url="/kb/en/innodb-redo-log/comments/post/">
        Comments loading...
    </div>

        

    </div>


                    <div id="content_disclaimer" class="graybox">
                        Content reproduced on this site is the property of its respective owners,
                        and this content is not reviewed in advance by MariaDB. The views, information and opinions
                        expressed by this content do not necessarily represent those of MariaDB or any other party.
                    </div>
                </div>
            </section>

            
                <div id="right_bar" class="col-md-2">
                    
    
        
        <ul class="section_navigation well well-small hidden-xs hidden-sm">
            
                <li class="parent"><a href="/kb/en/innodb-and-xtradb/">
                    ↑ InnoDB ↑
                </a>
                </li>
            
            
                
                    <li>
                        <a href="/kb/en/innodb-versions/">
                            
                            InnoDB Versions
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/innodb-limitations/">
                            
                            InnoDB Limitations
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/innodb-troubleshooting/">
                            
                            InnoDB Troubleshooting
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/innodb-system-variables/">
                            
                            InnoDB System Variables
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/innodb-status-variables/">
                            <span class="pull-right not_primary"></span>
                            InnoDB Server Status Variables
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/auto_increment-handling-in-innodb/">
                            
                            AUTO_INCREMENT Handling in InnoDB
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/innodb-buffer-pool/">
                            
                            InnoDB Buffer Pool
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/innodb-change-buffering/">
                            
                            InnoDB Change Buffering
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/innodb-doublewrite-buffer/">
                            
                            InnoDB Doublewrite Buffer
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/innodb-tablespaces/">
                            
                            InnoDB Tablespaces
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/innodb-file-format/">
                            
                            InnoDB File Format
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/innodb-row-formats/">
                            
                            InnoDB Row Formats
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/innodb-strict-mode/">
                            
                            InnoDB Strict Mode
                        </a>
                    </li>
                
            
                
                    <li class="active">
                        <span>InnoDB Redo Log</span>
                        
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/innodb-undo-log/">
                            
                            InnoDB Undo Log
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/innodb-page-flushing/">
                            
                            InnoDB Page Flushing
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/innodb-purge/">
                            
                            InnoDB Purge
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/information-schema-innodb-tables/">
                            <span class="pull-right not_primary"></span>
                            Information Schema InnoDB Tables
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/innodb-online-ddl/">
                            
                            InnoDB Online DDL
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/binary-log-group-commit-and-innodb-flushing-performance/">
                            
                            Binary Log Group Commit and InnoDB Flushing Performance
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/innodb-page-compression/">
                            
                            InnoDB Page Compression
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/innodb-data-scrubbing/">
                            
                            InnoDB Data Scrubbing
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/innodb-lock-modes/">
                            
                            InnoDB Lock Modes
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/innodb-monitors/">
                            
                            InnoDB Monitors
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/innodb-encryption-overview/">
                            <span class="pull-right not_primary"></span>
                            InnoDB Encryption Overview
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/innodb-unmaintained/">
                            
                            InnoDB - Unmaintained
                        </a>
                    </li>
                
            
        </ul>
    
    

                </div>
            
        </div>
    </div>
</div>

<!-- Footer -->
<footer id="footer">
    <div class="footer">
        <div class="container">
            <div class="row">
                <div class="col-xs-12">
                    <ul class="list-inline text-center footer-nav">
                        <li>
                            <h5>
                                <a href="https://mariadb.com/products" title="Products">Products</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/services" title="Services">Services</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/pricing" title="Pricing">Pricing</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/resources" title="Resources">Resources</a>
                            </h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/about-us" title="About MariaDB">About Us</a></h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/download" title="Download">Download MariaDB</a></h5>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="row row-10">
                
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div id="block-footerformcontact" class="block block-block-content block-block-contentd754ee1b-3cc9-40e7-9ef4-f504f1197fb1">
                        
                            <h5 style="font-weight: 400;">Subscribe to our newsletter!</h5>
                            <script src="//app-sj15.marketo.com/js/forms2/js/forms2.min.js"></script><form id="mktoForm_1498"></form>
                            <script>
                                <!--//--><![CDATA[// ><!--
                                MktoForms2.loadForm("//app-sj15.marketo.com", "573-PXI-984", 1498);
                                //--><!]]]]><![CDATA[>
                                //--><!]]>
                            </script>
                        
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div class="footer-copyright">
                        <div class="text-center">
                            <ul class="list-inline no-margin">
                                <li>
                                    <a href="/legal" title="Legal">Legal</a>
                                </li>
                                <li>
                                    <a href="/privacy-policy" title="Privacy Policy">Privacy Policy</a>
                                </li>
                                <li>
                                    <a href="/cookie-policy/" title="Cookies">Cookie Policy</a>
                                </li>
                            </ul>
                            <p>Copyright &copy; 2024 MariaDB. All rights reserved.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
</footer>
</div>

<div id="ajax_loading">
    <img src="/kb/static/images/ajax-loader.a51c5608d01a.gif" />
</div>

    <!-- Google Tag Manager -->
    <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-MK2847"
                      height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
            '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MK2847');</script>
    <!-- End Google Tag Manager -->

</body>

<script type="text/javascript" src="/kb/static/js/main.1587e3a666fc.js" charset="utf-8"></script>

</html>