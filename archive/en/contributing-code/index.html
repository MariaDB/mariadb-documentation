<!DOCTYPE html>
<html>
<head data-cookie-domain=""
      data-cookie-path="/">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="apple-touch-icon" sizes="180x180" href="/kb/static/images/favicons/apple-touch-icon.159e713979be.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/kb/static/images/favicons/favicon-32x32.bc0ac1d5d11e.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/kb/static/images/favicons/favicon-16x16.5801f8f0f34e.png">
    <link rel="shortcut icon" href="/kb/static/images/favicons/favicon.d122d305dee4.ico" type="image/x-icon" />

    <title>Contributing Code - MariaDB Knowledge Base</title>

    <link href="/kb/static/css/main.f7633538c846.css" rel="stylesheet" type="text/css" />

    

    

    <!-- FB Open Graph tags -->
    <meta property="og:title" content="Contributing Code" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://mariadb.com/kb/en/contributing-code/" />
    <meta property="og:image" content="http://mariadb.comaskmonty-logo.png" />
    <meta property="og:site_name" content="MariaDB KnowledgeBase" />
    <meta property="fb:admins" content="514852603" />
    <meta property="og:description" content="Guidelines and procedures for contributing code to MariaDB." />

    <meta name="description" content="Guidelines and procedures for contributing code to MariaDB." />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="//fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet"/>
    
</head>
<body class="mpkb nodes products nodes_view jqui" id="nodes_view">





<div id="menu-mobile" class="visible-sm visible-xs">

    <div>
        <div id="mobile-close-menu" class="text-right">
            <a href="javascript:void(0)" title="Close Menu" id="back-main" class="toggle-menu">X<span></span></a>
        </div>
    </div>
    <div class="mainmenu-mobile">
        <ul class="ls-none ul-menu">
            <li data-sub="submenu5"><a class="open-form-search" href="/kb/search/" title="Search">Search </a></li>
            <li data-sub="submenu0"><a href="/products" title="Products">Products</a><span class="arrow-main"></span></li>
            <li data-sub="submenu1"><a href="/services" title="Services">Services</a><span class="arrow-main"></span></li>
            <li data-sub="submenu2"><a href="/resources" title="Resources">Resources</a><span class="arrow-main"></span></li>
            <li data-sub="submenu3"><a href="/about-us" title="About">About</a><span class="arrow-main"></span></li>
            <li data-sub="submenu4"><a href="/contact" title="Contact">Contact</a></li>
        </ul>
    </div>

    <div class="nav-top-mobile">
        <div class="select-box form">

            <ul class="inline-block-md mb-none top-nav">
                <li>

                </li>
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/contributing-code/"> Login</a>
                    </li>
                
            </ul>



        </div>
        <p class="text-center copyright">Copyright &copy; 2024 MariaDB. All rights reserved.</p>
    </div>
</div>
<div class="violator-wrap d-none" id="top_violator">
    <div class="container">
        <div class="row">
            <div class="col-xs-12 col-sm-12">
                <div class="violator-outer">
                    <div class="violator-inner">
                        <div class="row">
                            <div class="col-xs-12 col-sm-9 col-lg-7 col-lg-offset-2" id="top_violator_content">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="content-link" target="_blank" rel="nofollow noreferrer">
                                    <span>The Ultimate Guide to High Availability with MariaDB</span>
                                </a>
                            </div>
                            <div class="col-xs-12 col-sm-3" id="top_violator_cta">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="btn btn-mariadb" target="_blank" rel="nofollow noreferrer">Download Now</a>
                            </div>
                        </div>
                    </div>
                    <button type="button" class="btn btn-link close-btn">
                        <svg xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 24 24" width="15px" height="15px"><path d="M 4.9902344 3.9902344 A 1.0001 1.0001 0 0 0 4.2929688 5.7070312 L 10.585938 12 L 4.2929688 18.292969 A 1.0001 1.0001 0 1 0 5.7070312 19.707031 L 12 13.414062 L 18.292969 19.707031 A 1.0001 1.0001 0 1 0 19.707031 18.292969 L 13.414062 12 L 19.707031 5.7070312 A 1.0001 1.0001 0 0 0 18.980469 3.9902344 A 1.0001 1.0001 0 0 0 18.292969 4.2929688 L 12 10.585938 L 5.7070312 4.2929688 A 1.0001 1.0001 0 0 0 4.9902344 3.9902344 z"/></svg>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="wrapper">
<div id="top-nav">
    <div class="container">
        <ul class="hidden-sm hidden-xs" >
            <li><a href="https://mariadb.com/kb/">Knowledge Base</a></li>
            <li><a href="https://mariadb.com/contact/">Contact</a></li>
            
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/contributing-code/" rel="nofollow">Login</a>
                    </li>
                
            
            
            <li id="search-form">
                <form action="/kb/en/+search/" method="get" id="search-block-form" accept-charset="UTF-8">
                    <input id="search" title="Enter the terms you wish to search for."
                           placeholder="Search . . ." type="text"
                           name="q" value="" size="15" maxlength="128" class="form-text"
                           data-autocomplete-url="/kb/en/+search/autocomplete/">
                    <input type="hidden" name="quick" value="1" />
                    <input type="hidden" name="source" value="kb" />
                </form>
            </li>
            <li><a id="search-toggler" href="/kb/search/">Search</a></li>
            
        </ul>
    </div>
</div>
<div id="navbar-bottom" class="navbar">
    <div class="container">
        
        
        
        
        <div class="row">
            <div class="col-md-3 col-sm-9 col-xs-9">
                <a class="brand" href="/" title="MariaDB">
                    <img src="/kb/static/images/logo-2018-black.95f5978ae14d.png">
                </a>
            </div>
            <div class="col-md-9 hidden-sm hidden-xs">
                <div class="main-menu">
                    <ul id="main-menu" class="nav navbar-nav inline-block-sm">
    <li class="has-sub full-menu">
        <a href="/products" title="Products">Products</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/services" title="Services">Services</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/pricing" title="Pricing">Pricing</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/resources" title="Resources">Resources</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/about-us" title="About Us">About Us</a>
    </li>
    <li class="">
        <a class="button electric-eel small top-bar-right-download" href="/downloads/">Download</a>
    </li>
</ul>
                </div>
            </div>
            <div class="col-md-3 visible-sm visible-xs col-sm-3 col-xs-3 ps-rv">
                <div class="navbar-header text-right pull-right">
                    <button type="button" class="menu-control toggle-menu" id="open-menu">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="main">
    <div class="container">
        

        <div id="subheader1" class="clearfix">
            <div class="pull-left">
                
                <div id="breadcrumbs" class="breadcrumb">
                    <a href="/kb/en/">Knowledge Base</a>
                    


    
    » <a class="crumb" href="/kb/en/community/">The Community</a>
    

    
    » <a class="crumb" href="/kb/en/contributing-participating/">Contributing &amp; Participating</a>
    


    » <a class="node_link crumb" href="/kb/en/contributing-code/">Contributing Code</a>


                </div>
                
            </div>
        </div>
    </div>
    <div class="container" id="container-main">
        <div class="row">
            
            
                
                <aside id="sidebar-first" class="sidebar col-md-2 hidden-xs hidden-sm hidden-print">
                    
                        
                        <ul id="category_menu" class="nav nav-pills nav-stacked">
                            <li><a href="/kb/en/">Home</a></li>
                            
                                
                                    <li><a href="/kb/en/+questions/">Open Questions</a></li>
                                
                                <li><a href="/kb/en/documentation/">MariaDB Server</a></li>
                                <li><a href="/kb/en/maxscale/">MariaDB MaxScale</a></li>
                                <li><a href="/kb/en/mariadb-columnstore/">MariaDB ColumnStore</a></li>
                                <li><a href="/kb/en/connectors/">Connectors</a></li>
                            

                        </ul>
                    

                    
<div>



<div class="well well-small box actions"><div>

        <a class="btn btn-block btn-blue btn-sm" href="/kb/en/contributing-code/+history" rel="nofollow">History</a>
        
        
        
        <a class="btn btn-block btn-blue btn-sm" href="/kb/en/contributing-code/+source/">Source</a>
        
        <a class="btn btn-block btn-blue btn-sm flag" href="/kb/en/contributing-code/+flag"
                data-flag-url="/kb/en/contributing-code/+flag" rel="nofollow">
                Flag as Spam / Inappropriate</a>
        
        <a class="btn btn-block btn-blue btn-sm" href="/kb/en/contributing-code/+translate/">
                Translate</a>
        

</div>
</div>





<div class="well well-small box node_info"><div>

    <dl>
        <dt>Created</dt>
        <dd>

<span class="datetime" title="2010-06-16 17:07">14 years, 5 months ago</span></dd>

        <dt>Modified</dt>
        <dd>

<span class="datetime" title="2023-08-07 16:13">1 year, 4 months ago</span></dd>

        <dt>Type</dt>
        <dd>article</dd>

        <dt>Status</dt>
        <dd>active</dd>

        <dt>License</dt>
        <dd>
            
                <a href="/kb/en/contributing-code/+license/">CC BY-SA / Gnu FDL</a>
            
        </dd>

        
    </dl>

    
    <ul class="rss_feeds">
        <li><a href="/kb/en/contributing-code/+history/feed/">
            History</a>
        </li>
        <li><a href="/kb/en/contributing-code/+comments/feed/">
            Comments</a>
        </li>
    </ul>
    

</div>
</div>





    
    
    

<div class="well well-small box attachments"><div><div class="edit_link pull-right"><a href="/kb/en/contributing-code/+edit/attachments/">Edit</a></div><h5>Attachments</h5></div><div>

        
            <div class="no_data">No attachments exist</div>
        
    
</div>
</div>

    



    
    
        

<div class="well well-small box"><div><h5>Localized Versions</h5></div><div>

        <ul>
            
            <li><a href="/kb/it/contributing-code/">Aiutare con il codice</a> [it]</li>
            
            <li><a href="/kb/zh-cn/contributing-code/">贡献代码</a> [zh-cn]</li>
            
            <li><a href="/kb/ru/contributing-code/">Внесение изменений в код</a> [ru]</li>
            
        </ul>
        
</div>
</div>

    





    

<div class="well well-small box"><div><h5>Parents</h5></div><div>

        <ul>
            
                <li><a href="/kb/en/contributing-participating/">Contributing &amp; Participating</a></li>
            
                <li><a href="/kb/en/mariadb-internals-documentation/">MariaDB Internals Documentation</a></li>
            
        </ul>
    
</div>
</div>



</div>


                    

































                </aside>
            
            
            
                
            
            
                
            
            <section id="content" class="limited_width col-md-8 clearfix">
                
                    <h1>Contributing Code</h1>
                

                



                <div>
                    
    

    
    
    

    <div class="node creole">
        
        
        


    
    <div class="answer formatted">
        <div class="table_of_contents well well-small">
<h3>Contents</h3>
 <ol class="toc">

    <li class=""><a href="#finding-development-projects-to-work-on" title="Finding Development Projects to Work on">Finding Development Projects to Work on</a></li>

    <li class=""><a href="#what-to-expect-from-a-mariadb-server-developer" title="What to Expect From a MariaDB Server Developer">What to Expect From a MariaDB Server Developer</a>    <ol class="toc">

        <li class=""><a href="#the-basics" title="The Basics">The Basics</a></li>

        <li class=""><a href="#what-to-have-in-a-commit-comment" title="What to Have in a Commit Comment">What to Have in a Commit Comment</a></li>

        <li class=""><a href="#testing" title="Testing">Testing</a></li>

        <li class=""><a href="#getting-your-code-into-the-main-mariadb-tree" title="Getting Your Code into the Main MariaDB Tree">Getting Your Code into the Main MariaDB Tree</a></li>

        <li class=""><a href="#before-pushing-code-to-a-stable-branch" title="Before Pushing Code to a Stable Branch">Before Pushing Code to a Stable Branch</a></li>

        <li class=""><a href="#working-on-a-new-project" title="Working on a New Project">Working on a New Project</a></li>

        <li class=""><a href="#working-on-a-bug-fix" title="Working on a Bug Fix">Working on a Bug Fix</a></li>

        <li class=""><a href="#making-things-easier-for-reviewers" title="Making Things Easier for Reviewers">Making Things Easier for Reviewers</a></li>

        <li class=""><a href="#when-reviewing-code" title="When Reviewing Code">When Reviewing Code</a>    </ol>
</li>

    <li class=""><a href="#see-also" title="See Also">See Also</a> </ol>
</li>
</div><p>
This page contains general guidelines and procedures for contributing code. If
you have any questions we invite you to ask on the
<a href="https://lists.mariadb.org/postorius/lists/developers.lists.mariadb.org/">maria-developers</a> mailing list, on our Zulip instance at <a href="https://mariadb.zulipchat.com">https://mariadb.zulipchat.com</a>, or on the #maria <a href="/kb/en/irc/">IRC</a> channel on <a href="https://libera.chat/">https://libera.chat/</a>. Other email lists and places to find MariaDB can be found
<a href="/kb/en/where-are-other-users-and-developers-of-mariadb/">here</a>.</p>
<p>General information about contributing to MariaDB (for developers and
non-developers) is found on the
<a href="/kb/en/contributing-to-the-mariadb-project/">Contributing to the MariaDB Project</a>
page.</p>
<h2 class="anchored_heading" id="finding-development-projects-to-work-on">Finding Development Projects to Work on</h2>
<p>There are many open development projects for MariaDB which you can contribute
to (in addition to any ideas you may have yourself).</p>
<ul start="1"><li>We are using <a href="/kb/en/jira/">JIRA</a> to manage the MariaDB project. Go to
  <a href="https://jira.mariadb.org">https://jira.mariadb.org</a> and click on "Projects" to get to the MariaDB project.
  Browse around the
  <a href="https://jira.mariadb.org/secure/IssueNavigator.jspa?reset=true&amp;jqlQuery=project+%3D+MDEV+AND+resolution+%3D+Unresolved+AND+assignee+is+EMPTY+ORDER+BY+priority+DESC&amp;mode=hide">unresolved and unassigned</a>
  issues to see if there is something that interests you. Some issues have
  sponsors and you can be paid for doing them!
</li></ul>
<ul start="1"><li>A list of <a href="https://jira.mariadb.org/issues/?jql=resolution%20%3D%20Unresolved%20AND%20labels%20%3D%20beginner-friendly%20ORDER%20BY%20updated%20DESC">beginner friendly</a> tasks is also available.
</li></ul>
<ul start="1"><li>Check the <a href="/kb/en/development-plans/">development plans</a> for the next MariaDB
  version.
</li></ul>
<ul start="1"><li>Join <a href="https://lists.mariadb.org/postorius/lists/developers.lists.mariadb.org/">maria-developers</a> and ask for suggestions of tasks you could do. Please include your programming experience and your knowledge of the MariaDB source and how much you know about using MySQL/MariaDB with the email so that we know which tasks we can suggest to you.
</li></ul>
<ul start="1"><li>If this is your first project, check out the
  <a href="/kb/en/suggested-development/">Suggested Development</a> page. It lists 
  projects that will make a good start.
</li></ul>
<ul start="1"><li>Join MariaDB's Zulip instance at <a href="https://mariadb.zulipchat.com">https://mariadb.zulipchat.com</a> and ask for suggestions.
</li></ul>
<ul start="1"><li>Join #/maria on <a href="https://libera.chat/">https://libera.chat/</a> <a href="/kb/en/irc/">IRC</a> and ask for suggestions.
</li></ul>
<p>If you have your own ideas, please submit them to <a href="/kb/en/jira/">JIRA</a> so other
MariaDB developers can comment on them and suggest how to implement them. You
can of course also use the
<a href="https://lists.mariadb.org/postorius/lists/developers.lists.mariadb.org/">maria-developers</a> list for this.</p>
<h2 class="anchored_heading" id="what-to-expect-from-a-mariadb-server-developer">What to Expect From a MariaDB Server Developer</h2>
<p>This section is mainly directed to developers with commit rights to the MariaDB git repository. However, we hope it’s also useful for anyone wanting to contribute code to MariaDB to know what a reviewer will expect from them.</p>
<p>This is not about coding style or if one should prefer C instead of C++. That would be a separate topic that should be created sooner or later.</p>
<h3 class="anchored_heading" id="the-basics">The Basics</h3>
<p>When coding, try to create code that 'never has to be changed again'. Try to make the code as performant as possible. In general it is acceptable to spend 50% more time to make the code 15% faster than what you originally intended. Take that into account when you plan your time estimates! That said, don't try to add classes or functionality that is not yet used.</p>
<p>The code should be easy to read and follow the coding standards of the project. Patches that are smaller and simpler are often better than complex solutions. Don't make the server depend on new external libraries without first checking with Sergei or Monty!</p>
<p>Add code comments for anything that is not obvious. When possible, use assertions within the code to document expectations of arguments etc. In general, if the code requires complex comments, think if there is a better way to structure the logic. Simpler is often better and with fewer bugs.</p>
<h3 class="anchored_heading" id="what-to-have-in-a-commit-comment">What to Have in a Commit Comment</h3>
<ul start="1"><li>Jira issue number and summary ex:
<a href="https://jira.mariadb.org/browse/MDEV-23839">MDEV-23839</a> innodb_fast_shutdown=0 hang on change buffer merge
</li><li>An empty line
</li><li>A short description of the problem
</li><li>A description of the solution
</li><li>Any extra information needed to understand the patch
</li><li>The commit message should be self contained and the reviewer shouldn't preferably have to look at the Jira at all to understand the commit. This doesn’t mean that the commit message should include all background and different design options considered, as the Jira should contain.
</li><li>Name of all reviewers and authors should be clear from the commit message. The preferred way would be (one line per person)
<ul start="1"><li>Reviewed-by: email
</li><li>Co-authored-by: email
</li><li>See <a href="https://docs.github.com/en/free-pro-team@latest/github/committing-changes-to-your-project/creating-a-commit-with-multiple-authors">https://docs.github.com/en/free-pro-team@latest/github/committing-changes-to-your-project/creating-a-commit-with-multiple-authors</a> for details
</li></ul>
</li><li>The default is that all code should be reviewed. Only in really extraordinary cases, like merge (where the original code was already reviewed) then it can be self-reviewed, which should clear from the commit. In this case the code should of course be tested extra carefully both locally and in buildbot before pushing.
</li></ul>
<h3 class="anchored_heading" id="testing">Testing</h3>
<ul start="1"><li>All code should have a test case that shows that the new code works or, in case of a bug fix, that the problem is fixed! It should fail with an unpatched server and work with the new version. In the extreme case that a test case is practically impossible to do, there needs to be documentation (in the commit message, optionally also in Jira) how the code was tested.
</li><li>The test case should have a reference to the Jira issue, if such one exists.
</li><li>Patches related to performance should be tested either by the developer (for simple commits) or by performance testers. The result should be put in Jira with a summary in the commit.
</li><li>Complex patches and should be tested by QA in a bb- branch before pushing. The Jira entry should include information that this has been done and what kind of test has been run.
</li><li>For anything not trivial, one should run either Valgrind or ASAN/MSAN on the new code. (Buildbot will do this for you if you can’t get valgrind or ASAN to work). At least the test case added should be tested by either. If the developer cannot do that for some reason, he should check the buildbot builders that do this and ensure that at least his test case doesn’t give any warnings about using not initialized memory or other failures.
</li><li>For complex code the developer should preferably use gcov or some similar tool to ensure that at least not all not-error branches are executed. “mtr --gcov” or “dgcov.pl” can help you with this.
</li></ul>
<h3 class="anchored_heading" id="getting-your-code-into-the-main-mariadb-tree">Getting Your Code into the Main MariaDB Tree</h3>
<p>All code in MariaDB comes from one of the following sources:</p>
<ul start="1"><li>MySQL
</li><li>Code developed by people employed by the <a href="http://mariadb.org">MariaDB Foundation</a>.
</li><li>Code developed by people employed by <a href="http://mariadb.com">MariaDB Corporation</a>.
</li><li>Code shared with the MariaDB Foundation under the <a href="/kb/en/mca/">MCA</a>.
</li><li>Code with a known origin that is under a permissive license (BSD or public domain).
</li></ul>
<p>If you want the code to be part of the main <a href="/kb/en/mariadb/">MariaDB</a> tree, you also have to
give the MariaDB Foundation a shared copyright to your code. This is needed so
that the foundation can offer the code to other projects (like MySQL).</p>
<p>You do this by either:</p>
<ol start="1"><li>Signing the MariaDB Contributor Agreement
  (<a href="/kb/en/mca/">MCA</a>) and then scanning and sending it to the foundation.
</li><li>Sending an email to
  <a href="http://launchpad.net/~maria-developers">maria-developers</a> where you say
  that your patch and all fixes to it are provided to the MariaDB Foundation under
  the <a href="/kb/en/mca/">MCA</a>.
</li><li>Licensing your code using the
  <a href="http://opensource.org/licenses/bsd-license.html">BSD license</a>.
</li></ol>
<p>We need shared copyright for the following reasons:</p>
<ol start="1"><li>to defend the copyright or GPL if someone breaks it (this is the same reason
  why the Free Software Foundation also
  <a href="https://www.gnu.org/licenses/why-assign.html">requires copyright assignment</a>
  for its code)
</li><li>to be able to donate code to MySQL (for example to fix security bugs or new
  features)
</li><li>to allow people who have a non-free license to the MySQL code to also use
  MariaDB (the MCA/BSD allows us to give those companies the rights to all
  changes between MySQL and MariaDB so they can use MariaDB instead of MySQL)
</li></ol>
<p>More information about the MCA can be found on the
<a href="/kb/en/mca-faq/">MCA FAQ</a> page.</p>
<h3 class="anchored_heading" id="before-pushing-code-to-a-stable-branch">Before Pushing Code to a Stable Branch</h3>
<ul start="1"><li>Ensure that you have compiled everything for your new code, in a debug server (configured with cmake -DCMAKE_BUILD_TYPE=Debug ) including embedded and all plugins that may be affected by your code change..
</li><li>Run the mysql-test-run (mtr) test suite locally with your debug server.
</li><li>For anything complex the full test suite should be run.
</li><li>For something absolutely trivial, at least the main suite must be run.
</li><li>Always push first to a bb- branch to test the code. When the bb- branch is green in buildbot you can push to the main branch. Take care of checking that Windows builds compiles (take extra care of checking this as this often fails) and that valgrind and msan builds doesn’t show any problems with your new test cases.
</li><li>If you have to do a rebase before pushing, you have to start from the beginning again.
</li><li>When porting code from third parties (such as MySQL), make sure to attribute copyright to the right owner, in the header of each modified file.
</li><li>For example:
Copyright <span>&copy;</span> 2000, 2018, Oracle and/or its affiliates.
Copyright <span>&copy;</span> 2009, 2020, MariaDB
</li><li>The only exception is that if the changes are trivial and the rebase was trivial and the local mysql-test-run worked, then you can push directly to the main branch. Only do this if you are 99% sure there are no issues! * Please don't make us regret that we have made this one exception! 
When we have protected git branches, then the above rule will be enforced automatically as the protection will take care of this.
</li></ul>
<h3 class="anchored_heading" id="working-on-a-new-project">Working on a New Project</h3>
<ul start="1"><li>First create a Jira entry that explains the problems and the different solutions that can be used to solve the problem. If there is a new syntax include examples of queries and results.
</li><li>After getting an agreement of the to-be-used solution, update the Jira entry with the detailed architecture of the suggested solution.
</li><li>When the architecture is reviewed, the assigned developer can start coding.
</li><li>When the code is ready, the Jira entry should be updated with the reviewer.
</li><li>The reviewer checks the code and either approves it to be pushed or gives comments to the developers that should be fixed. In the later case the developer updates the code and gives it back to the reviewer. This continues until the code is approved.
</li><li>If the design changes during the project, the design in Jira needs to be updated.
</li></ul>
<h3 class="anchored_heading" id="working-on-a-bug-fix">Working on a Bug Fix</h3>
<ul start="1"><li>Ensure that the Jira issue is up to date.
</li><li>For complex bugs that require redesign, follow the process in "Working on a new project"
</li><li>For simpler bugs, one can skip the listing of different solutions and architecture. However one should still document the reason for the bug and how it's fixed or to-be-fixed, in a JIRA comment.
</li></ul>
<h3 class="anchored_heading" id="making-things-easier-for-reviewers">Making Things Easier for Reviewers</h3>
<ul start="1"><li>Ensure that code compiles, all MTR test works before asking for a review
</li><li>Try to split a bigger project into smaller, self-contained change sets.
</li><li>Automatic things, like renames of classes, variables, functions etc is better to be done in a separate commit.
</li></ul>
<h3 class="anchored_heading" id="when-reviewing-code">When Reviewing Code</h3>
<p>Remember that the stability and security of any project hangs a lot on the reviewers. If there is something wrong with an accepted patch, it's usually the reviewer who is to be blamed for it, as the reviewer was the one who allowed it to go in!</p>
<ul start="1"><li>Ensure that the code is licensed under New BSD or another approved license for MariaDB (basically any open source license not conflicting with GPL) or that the contributor has signed the MCA.
</li><li>GPL is only allowed for code from MySQL (as MariaDB is already depending on MySQL code).
</li><li>Ensure that commits are not too large. If the code is very large, give suggestions how to split it into smaller pieces. Merge commits, when rebasing is possible, are not allowed, to keep history linear.
</li><li>Check that the commits message describes the commit properly. For code that improves performance, ensure that Jira and the commit message contains information about the improvements.
</li><li>Check that there are no unexplained changes in old tests.
</li><li>Check the quality of the code (no obvious bugs, right algorithms used)
</li><li>Check if any code can be simplified or optimized. Using already existing functions, are loops optimal, are mutexes used correctly etc.
</li><li>Check that there is an appropriate test case for the code. See ‘testing’ for what is required!
</li><li>Ensuring the code follows the coding standard for MariaDB.  This document should be created shortly, but in the meantime ask an old MySQL/MariaDB developer if you are unsure.
</li><li>Ensuring that the code follows the architecture agreed for in Jira (if it's in Jira).
</li><li>Code should be easy to understand (good code comments, good function and
variable names etc).
</li><li>Ensure you understand every single line of code that is reviewed. If not, ask the developer to add more comments to get things clear or ask help from another reviewer.
</li><li>No performance degradations for all common cases.
</li><li>Any code that touches any sensitive area (files, communication, login, encryption or security) needs to have another reviewer that is an expert in this area.
</li></ul>
<h2 class="anchored_heading" id="see-also">See Also</h2>
<ul start="1"><li><a href="https://mariadb.org/get-involved/getting-started-for-developers/">Getting Started For Developers</a> (mariadb.org)
</li><li><a href="https://mariadb.org/get-involved/getting-started-for-developers/get-code-build-test/">Get the Code, Build It, Test It</a> (mariadb.org)
</li><li><a href="https://mariadb.org/get-involved/getting-started-for-developers/writing-good-test-cases-mariadb-server/">Writing Good Test Cases for MariaDB Server</a> (mariadb.org)
</li><li><a href="https://mariadb.org/get-involved/getting-started-for-developers/submitting-pull-request/">Submitting a Pull Request</a> (mariadb.org)
</li><li><a href="/kb/en/contributing-to-the-mariadb-project/">Contributing to the MariaDB Project</a> (for non-developers)
</li></ul>
<div class="cstm-style hidden"><pre class="unknown_macro">&lt;&lt;<span class="macro_name">nowiki</span><span class="macro_arg_string"></span>&gt;&gt;
<span class="macro_body">&lt;&lt;style class="redbox centered"&gt;&gt;
**The MariaDB source is now hosted on Github:  https://github.com/MariaDB/server. \\See [[using-git|Using Git]]. The information below is outdated and will be rewritten at some point.**
&lt;&lt;/style&gt;&gt;

== Prerequisites

You need [[http://bazaar-vcs.org|Bazaar]] for revision control.

= = = bzr Login Setup

* Get a launchpad account at https://launchpad.net/+login
* When logged in, setup your SSH keys
**  Click your name (top right corner)
**  Click Change Details link (upper right)
**  Click SSH Keys button (middle of page)
**  Upload your public SSH key
([[https://help.launchpad.net/YourAccount/CreatingAnSSHKeyPair|How do I get a public key?]])
* Register yourself with launchpad from your local commandline: &lt;&lt;fixed&gt;&gt;bzr launchpad-login [yourloginid]&lt;&lt;/fixed&gt;&gt;

=== Getting the MariaDB Code

# First, [[getting-the-mariadb-source-code|get a clean copy of the MariaDB code]]
(for some, the fastest way to get up and running is to follow the
instructions in the "Source Tree Tarball" section).

#decimal.2 Once you have a clean copy of the source, create a working copy for
  your changes:
&lt;&lt;code lang=sh inline=false indent=1&gt;&gt;
cd $maria-repo # ex: ~/repos/maria
bzr branch trunk maria-fix-bugNNNNNN
cd maria-fix-bugNNNNNN
&lt;&lt;/code&gt;&gt;

&lt;&lt;style class="bluebox"&gt;&gt;
**Tip:** //Use descriptive names such as maria-fix-bugNNNNNN (where NNNNNN is the bug # of course).//
&lt;&lt;/style&gt;&gt;

#decimal.3 You should now be ready to [[generic-build-instructions|Compile MariaDB]]. It's
a good idea to compile at this stage to confirm the source tree you are going
to be hacking on works . . . before you make any changes.

The following pages will help you get up and running with the MariaDB source
code:

* [[getting-the-mariadb-source-code|Getting the MariaDB Source Code]]
* Setup your build environment:
** [[build-environment-setup-for-linux|Linux]]
** [[build-environment-setup-for-mac|Mac]]
** [[building-mariadb-on-windows|Windows]]
* [[compiling-mariadb-from-source|Building MariaDB]]

== Setting up tests

The Maria test suite is contained in the &lt;&lt;code&gt;&gt;./mysql-test/&lt;&lt;/code&gt;&gt;
subdirectory of the source tree. The mysql-test directory has two
subdirectories of utmost concern to you, the bug fixer: the &lt;&lt;code&gt;&gt;t/&lt;&lt;/code&gt;&gt;
directory and the &lt;&lt;code&gt;&gt;r/&lt;&lt;/code&gt;&gt; directory (for "tests" and "results"
respectively). Be sure to check and see if your bug already has a test too.

All the tests are found in the &lt;&lt;code&gt;&gt;t/&lt;&lt;/code&gt;&gt; directory. Open up the file
that corresponds to the functionality you are changing (or add a new file) and
add the commands that will reproduce the bug or validate the new functionality.

For example, the test below creates a new test table "t1"; shows us the result
of that CREATE TABLE statement; and lastly, we cleanup the test by dropping the
test table:

&lt;&lt;sql&gt;&gt;
#
# Bug #XXXXXX: INET_ATON() returns signed, not unsigned
#
create table t1 select INET_ATON('255.255.0.1') as `a`;
show create table t1;
drop table t1;
&lt;&lt;/sql&gt;&gt;

By adding your test first, it will remind you to re-record the test output file
later (and inform future efforts about your expected output, of course). Now
it's time to make your changes.

Examine existing tests to get a better idea of how you should write your test.

We are always on the lookout for better tests, so if you create new test or
improve an existing test, please upload it to the "private" folder on our
[[FTP]] server and then ping us on [[IRC]] or send a note to the
Maria-Developers mailing list to let us know about it.

== Editing and Adding to Your Contribution

With a working version, you can commence making changes in your new branch,
committing code regularly to your local working copy; feel free to commit early
and often as you will formalize your contribution later with a push and
proposal.
 
&lt;&lt;code lang=sh&gt;&gt;
cd $maria-repo/maria-fix-bugNNNNNN
# Make Changes
bzr commit -m "Merge comment"
&lt;&lt;/code&gt;&gt;

Prior to publishing your completed work, you need to confirm that your branch
works as expected and update the test runs.

To allow others to see your commits, you should configure
[[setting-up-and-using-bazaar-bzr-with-mariadb|bzr]] to send its commit emails
to
[[http://lists.askmonty.org/cgi-bin/mailman/listinfo/commits|commits 'at' mariadb 'dot' org]]
email list.

== Testing Your Branch

Make sure you have at least libtool 1.5.22
([[http://www.gnu.org/software/libiconv/|found here]]).

First, check to see that all the tests pass (remember the test you set up
earlier? It should fail. That's ok, you will re-record it momentarily):

&lt;&lt;code lang=sh&gt;&gt;
cd $maria-repo/mysql-test
./mysql-test-run
&lt;&lt;/code&gt;&gt;

Any that fail will need to be re-recorded.

&lt;&lt;code lang=sh&gt;&gt;
cd $maria-repo/mysql-test
./mysql-test-run --record $test # where $test is the name of the test that failed 
&lt;&lt;/code&gt;&gt;

You are now ready to merge into trunk.

== Merging Recent Changes

It is important to merge any changes from trunk into your branch before pushing
or publishing.

Update your local trunk.

&lt;&lt;code lang=sh&gt;&gt;
cd $maria-repo 
cd trunk
bzr pull   
&lt;&lt;/code&gt;&gt;

Updating your local branch.

&lt;&lt;code lang=sh&gt;&gt;
cd $maria-repo
cd maria-fix-bugNNNNNN
bzr merge ../trunk
bzr commit -m "Merged from trunk"
&lt;&lt;/code&gt;&gt;

Conflicts can be resolved in bazaar via:

&lt;&lt;code lang=sh&gt;&gt;
bzr resolve $filename
&lt;&lt;/code&gt;&gt;

To revert to your last commit on your branch use:

&lt;&lt;code lang=sh&gt;&gt;
bzr revert $filename
&lt;&lt;/code&gt;&gt;

(Note you will need to remerge with trunk before pushing)

Verify differences carefully

&lt;&lt;code lang=sh&gt;&gt;
bzr diff
&lt;&lt;/code&gt;&gt;

== Publish Your Branch

When all changes are merged and your changes are all consistent you can push
your branch to LaunchPad

&lt;&lt;code lang=sh inline=false&gt;&gt;
cd $maria-repos/$your-branch # where $your-branch is the branch you want to push (ex: maria-bugNNNN)
bzr push lp:~[yourloginid]/maria/$your-branch
&lt;&lt;/code&gt;&gt;

If you find that this takes a very long time (eg. &gt;30 minutes), you may want to
try using '&lt;&lt;code&gt;&gt;bzr init-repo --format=1.9&lt;&lt;/code&gt;&gt;' to initialize a new
repo and merge your work into it, then push again.

== How to Propose Branch for Merging
 
On your Launchpad Code page
{{{https://code.launchpad.net/~{yourloginid}/maria/{branch-name} }}} click the
**Propose for merging into another branch** link to propose branch to the
maintainers to be merged into the main trunk.

== Fix Branch (if needed)

If fixes are needed on your branch you will need to: make the changes, re-merge
any new changes to trunk, commit and re-push; you do not need to re-propose.
After the push, LaunchPad will pick up the changes automagically.

Please be aware that changes can take a few minutes for LaunchPad to merge your
new changes into your proposal.

== How to Re-Submit a Proposal

At the moment, this is a tricky process, and none of the "Request another
review" links on Launchpad work.

To resubmit a merge proposal, follow these steps:
# On the main page of the merge proposal, the top line will be something like
  "Status: Needs Review". Just to the right of this is a small button; click on
  this to change the status.
# Select "Resubmit" from the drop down menu and click "Change Status".
# The next page should prompt you to resubmit the merge proposal and inform you
  that the new proposal will supersede the old one
# Click "Resubmit" to finish.

A couple of easy ways to get attention to your proposed merge are:

* Join the #maria [[IRC]] channel on [[https://libera.chat/]] ask people to review/discuss your
  merge.
* Subscribe to and send an email to the
  [[http://launchpad.net/~maria-developers|maria-developers]] group on
  Launchpad.
</span>&lt;&lt;/nowiki&gt;&gt;</pre></div>
    </div>


        
            <div id="subscribe" class="well well-small hide hidden-print"
                 data-subscribe-url="/kb/en/contributing-code/+subscriptions/add"
                 data-unsubscribe-url="/kb/en/contributing-code/+subscriptions/remove">
            </div>
        

        
        
    
        <div class="simple_section_nav">
            <ul class="nav nav-pills">
                
                    <li><a href="/kb/en/contributing-to-the-mariadb-project/">
                        ← Contributing to the MariaDB Project
                    </a>
                    </li>
                
                
                    <li><a href="/kb/en/contributing-participating/">
                        ↑ Contributing &amp; Participating ↑
                    </a>
                    </li>
                
                
                    <li class="pull-right"><a href="/kb/en/project-suggestions/">
                        Project Suggestions →
                    </a>
                    </li>
                
            </ul>
        </div>
    

        

        
        <h2>Comments</h2>
        
    
    <div id="comments" data-node-id="520" data-comments-url="/kb/en/contributing-code/+comments"
         data-reply-url="/kb/en/contributing-code/comments/post/">
        Comments loading...
    </div>

        

    </div>


                    <div id="content_disclaimer" class="graybox">
                        Content reproduced on this site is the property of its respective owners,
                        and this content is not reviewed in advance by MariaDB. The views, information and opinions
                        expressed by this content do not necessarily represent those of MariaDB or any other party.
                    </div>
                </div>
            </section>

            
                <div id="right_bar" class="col-md-2">
                    
    
        
        <ul class="section_navigation well well-small hidden-xs hidden-sm">
            
                <li class="parent"><a href="/kb/en/contributing-participating/">
                    ↑ Contributing &amp; Participating ↑
                </a>
                </li>
            
            
                
                    <li>
                        <a href="/kb/en/getting-help-with-mariadb/">
                            <span class="pull-right not_primary"></span>
                            Getting Help With MariaDB
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/reporting-documentation-bugs/">
                            <span class="pull-right not_primary"></span>
                            Reporting Documentation Bugs
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/reporting-bugs/">
                            <span class="pull-right not_primary"></span>
                            MariaDB Community Bug Reports and Feature Requests
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/contributing-to-the-mariadb-project/">
                            
                            Contributing to the MariaDB Project
                        </a>
                    </li>
                
            
                
                    <li class="active">
                        <span>Contributing Code</span>
                        
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/project-suggestions/">
                            
                            Project Suggestions
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/log-of-mariadb-contributions/">
                            
                            Log of MariaDB Contributions
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/donate-to-the-foundation/">
                            
                            Donate to the Foundation
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/sponsoring-the-mariadb-project/">
                            
                            Sponsoring the MariaDB Project
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/web-hosting-providers-offering-mariadb/">
                            
                            Web Hosting Providers Offering MariaDB
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/using-git-with-mariadb/">
                            <span class="pull-right not_primary"></span>
                            Using Git with MariaDB
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/google-summers-of-code/">
                            
                            Google Summers of Code
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/google-season-of-docs/">
                            
                            Google Season of Docs
                        </a>
                    </li>
                
            
        </ul>
    
    

                </div>
            
        </div>
    </div>
</div>

<!-- Footer -->
<footer id="footer">
    <div class="footer">
        <div class="container">
            <div class="row">
                <div class="col-xs-12">
                    <ul class="list-inline text-center footer-nav">
                        <li>
                            <h5>
                                <a href="https://mariadb.com/products" title="Products">Products</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/services" title="Services">Services</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/pricing" title="Pricing">Pricing</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/resources" title="Resources">Resources</a>
                            </h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/about-us" title="About MariaDB">About Us</a></h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/download" title="Download">Download MariaDB</a></h5>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="row row-10">
                
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div id="block-footerformcontact" class="block block-block-content block-block-contentd754ee1b-3cc9-40e7-9ef4-f504f1197fb1">
                        
                            <h5 style="font-weight: 400;">Subscribe to our newsletter!</h5>
                            <script src="//app-sj15.marketo.com/js/forms2/js/forms2.min.js"></script><form id="mktoForm_1498"></form>
                            <script>
                                <!--//--><![CDATA[// ><!--
                                MktoForms2.loadForm("//app-sj15.marketo.com", "573-PXI-984", 1498);
                                //--><!]]]]><![CDATA[>
                                //--><!]]>
                            </script>
                        
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div class="footer-copyright">
                        <div class="text-center">
                            <ul class="list-inline no-margin">
                                <li>
                                    <a href="/legal" title="Legal">Legal</a>
                                </li>
                                <li>
                                    <a href="/privacy-policy" title="Privacy Policy">Privacy Policy</a>
                                </li>
                                <li>
                                    <a href="/cookie-policy/" title="Cookies">Cookie Policy</a>
                                </li>
                            </ul>
                            <p>Copyright &copy; 2024 MariaDB. All rights reserved.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
</footer>
</div>

<div id="ajax_loading">
    <img src="/kb/static/images/ajax-loader.a51c5608d01a.gif" />
</div>

    <!-- Google Tag Manager -->
    <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-MK2847"
                      height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
            '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MK2847');</script>
    <!-- End Google Tag Manager -->

</body>

<script type="text/javascript" src="/kb/static/js/main.1587e3a666fc.js" charset="utf-8"></script>

</html>