<?xml version="1.0" encoding="utf-8"?>
<rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title>MariaDB Knowledge Base Comments for: Changing a Replica to Become the Primary</title><link>https://mariadb.com/kb/en/changing-a-replica-to-become-the-primary/+comments/feed/</link><description></description><atom:link href="https://mariadb.com/kb/en/changing-a-replica-to-become-the-primary/+comments/feed/" rel="self"></atom:link><language>en-us</language><lastBuildDate>Mon, 03 Mar 2025 04:19:46 +0000</lastBuildDate><item><title>Re: Changing a Replica to Become the Primary</title><link>https://mariadb.com/kb/en/changing-a-replica-to-become-the-primary/+comments/6850</link><description>&lt;p&gt;I think a 10.6 demoted primary must receive this query before it can be restarted as a replica: set global gtid_slave_pos = @@gtid_binlog_pos;
Or is there cases where this is not a good idea?&lt;/p&gt;
&lt;p&gt;And MariaDB 11.x offers `CHANGE MASTER TO MASTER_DEMOTE_TO_SLAVE`.&lt;/p&gt;
&lt;p&gt;An update to this guild would be very appreciated.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Laurent Indermühle</dc:creator><guid>https://mariadb.com/kb/en/changing-a-replica-to-become-the-primary/+comments/6850</guid></item><item><title>Re: Changing a Slave to Become the Master</title><link>https://mariadb.com/kb/en/changing-a-replica-to-become-the-primary/+comments/5056</link><description>&lt;p&gt;Is `FLUSH TABLES WITH READ LOCK;`  the best way to lock the primary from receiving new queries?
I had replications fails to restart after switchover many times. Then, I started using Orchestrator and never had an issue again.
Turns out, Orchestrator [1] only set `SET GLOBAL read_only = ON;` on the primary before switchover.
Then I read this answer &lt;a href="https://dba.stackexchange.com/questions/74670/revoke-write-privileges-vs-setting-database-to-readonly"&gt;https://dba.stackexchange.com/questions/74670/revoke-write-privileges-vs-setting-database-to-readonly&lt;/a&gt; which explain the advantages of read_only over FTWRL.&lt;/p&gt;
&lt;p&gt;Other thing, in last chapter, "Now you can upgrade the new master to a newer version" should be "Now you can upgrade the &lt;strong&gt;OLD&lt;/strong&gt; master to a newer version"&lt;/p&gt;
&lt;p&gt;Thanks for your great documentation, Laurent Indermühle&lt;/p&gt;
&lt;p&gt;[1] &lt;a href="https://github.com/openark/orchestrator/blob/master/docs/topology-recovery.md#graceful-master-promotion"&gt;https://github.com/openark/orchestrator/blob/master/docs/topology-recovery.md#graceful-master-promotion&lt;/a&gt;&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Laurent Indermühle</dc:creator><guid>https://mariadb.com/kb/en/changing-a-replica-to-become-the-primary/+comments/5056</guid></item></channel></rss>