<!DOCTYPE html>
<html>
<head data-cookie-domain=""
      data-cookie-path="/">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="apple-touch-icon" sizes="180x180" href="/kb/static/images/favicons/apple-touch-icon.159e713979be.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/kb/static/images/favicons/favicon-32x32.bc0ac1d5d11e.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/kb/static/images/favicons/favicon-16x16.5801f8f0f34e.png">
    <link rel="shortcut icon" href="/kb/static/images/favicons/favicon.d122d305dee4.ico" type="image/x-icon" />

    <title>InnoDB Strict Mode - Source - MariaDB Knowledge Base</title>

    <link href="/kb/static/css/main.f7633538c846.css" rel="stylesheet" type="text/css" />

    
        <meta name="robots" content="noindex, nofollow">
    

    

    <!-- FB Open Graph tags -->
    <meta property="og:title" content="InnoDB Strict Mode - Source" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://mariadb.com/kb/en/innodb-strict-mode/+source/" />
    <meta property="og:image" content="http://mariadb.comaskmonty-logo.png" />
    <meta property="og:site_name" content="MariaDB KnowledgeBase" />
    <meta property="fb:admins" content="514852603" />
    <meta property="og:description" content="" />

    <meta name="description" content="" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="//fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet"/>
    
</head>
<body class="mpkb nodes autoresize nodes_source jqui" id="nodes_source">





<div id="menu-mobile" class="visible-sm visible-xs">

    <div>
        <div id="mobile-close-menu" class="text-right">
            <a href="javascript:void(0)" title="Close Menu" id="back-main" class="toggle-menu">X<span></span></a>
        </div>
    </div>
    <div class="mainmenu-mobile">
        <ul class="ls-none ul-menu">
            <li data-sub="submenu5"><a class="open-form-search" href="/kb/search/" title="Search">Search </a></li>
            <li data-sub="submenu0"><a href="/products" title="Products">Products</a><span class="arrow-main"></span></li>
            <li data-sub="submenu1"><a href="/services" title="Services">Services</a><span class="arrow-main"></span></li>
            <li data-sub="submenu2"><a href="/resources" title="Resources">Resources</a><span class="arrow-main"></span></li>
            <li data-sub="submenu3"><a href="/about-us" title="About">About</a><span class="arrow-main"></span></li>
            <li data-sub="submenu4"><a href="/contact" title="Contact">Contact</a></li>
        </ul>
    </div>

    <div class="nav-top-mobile">
        <div class="select-box form">

            <ul class="inline-block-md mb-none top-nav">
                <li>

                </li>
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/innodb-strict-mode/+source/"> Login</a>
                    </li>
                
            </ul>



        </div>
        <p class="text-center copyright">Copyright &copy; 2024 MariaDB. All rights reserved.</p>
    </div>
</div>
<div class="violator-wrap d-none" id="top_violator">
    <div class="container">
        <div class="row">
            <div class="col-xs-12 col-sm-12">
                <div class="violator-outer">
                    <div class="violator-inner">
                        <div class="row">
                            <div class="col-xs-12 col-sm-9 col-lg-7 col-lg-offset-2" id="top_violator_content">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="content-link" target="_blank" rel="nofollow noreferrer">
                                    <span>The Ultimate Guide to High Availability with MariaDB</span>
                                </a>
                            </div>
                            <div class="col-xs-12 col-sm-3" id="top_violator_cta">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="btn btn-mariadb" target="_blank" rel="nofollow noreferrer">Download Now</a>
                            </div>
                        </div>
                    </div>
                    <button type="button" class="btn btn-link close-btn">
                        <svg xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 24 24" width="15px" height="15px"><path d="M 4.9902344 3.9902344 A 1.0001 1.0001 0 0 0 4.2929688 5.7070312 L 10.585938 12 L 4.2929688 18.292969 A 1.0001 1.0001 0 1 0 5.7070312 19.707031 L 12 13.414062 L 18.292969 19.707031 A 1.0001 1.0001 0 1 0 19.707031 18.292969 L 13.414062 12 L 19.707031 5.7070312 A 1.0001 1.0001 0 0 0 18.980469 3.9902344 A 1.0001 1.0001 0 0 0 18.292969 4.2929688 L 12 10.585938 L 5.7070312 4.2929688 A 1.0001 1.0001 0 0 0 4.9902344 3.9902344 z"/></svg>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="wrapper">
<div id="top-nav">
    <div class="container">
        <ul class="hidden-sm hidden-xs" >
            <li><a href="https://mariadb.com/kb/">Knowledge Base</a></li>
            <li><a href="https://mariadb.com/contact/">Contact</a></li>
            
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/innodb-strict-mode/+source/" rel="nofollow">Login</a>
                    </li>
                
            
            
            <li id="search-form">
                <form action="/kb/en/+search/" method="get" id="search-block-form" accept-charset="UTF-8">
                    <input id="search" title="Enter the terms you wish to search for."
                           placeholder="Search . . ." type="text"
                           name="q" value="" size="15" maxlength="128" class="form-text"
                           data-autocomplete-url="/kb/en/+search/autocomplete/">
                    <input type="hidden" name="quick" value="1" />
                    <input type="hidden" name="source" value="kb" />
                </form>
            </li>
            <li><a id="search-toggler" href="/kb/search/">Search</a></li>
            
        </ul>
    </div>
</div>
<div id="navbar-bottom" class="navbar">
    <div class="container">
        
        
        
        
        <div class="row">
            <div class="col-md-3 col-sm-9 col-xs-9">
                <a class="brand" href="/" title="MariaDB">
                    <img src="/kb/static/images/logo-2018-black.95f5978ae14d.png">
                </a>
            </div>
            <div class="col-md-9 hidden-sm hidden-xs">
                <div class="main-menu">
                    <ul id="main-menu" class="nav navbar-nav inline-block-sm">
    <li class="has-sub full-menu">
        <a href="/products" title="Products">Products</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/services" title="Services">Services</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/pricing" title="Pricing">Pricing</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/resources" title="Resources">Resources</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/about-us" title="About Us">About Us</a>
    </li>
    <li class="">
        <a class="button electric-eel small top-bar-right-download" href="/downloads/">Download</a>
    </li>
</ul>
                </div>
            </div>
            <div class="col-md-3 visible-sm visible-xs col-sm-3 col-xs-3 ps-rv">
                <div class="navbar-header text-right pull-right">
                    <button type="button" class="menu-control toggle-menu" id="open-menu">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="main">
    <div class="container">
        

        <div id="subheader1" class="clearfix">
            <div class="pull-left">
                
                <div id="breadcrumbs" class="breadcrumb">
                    <a href="/kb/en/">Knowledge Base</a>
                    


    
    » <a class="crumb" href="/kb/en/documentation/">MariaDB Server Documentation</a>
    

    
    » <a class="crumb" href="/kb/en/columns-storage-engines-and-plugins/">Columns, Storage Engines, and Plugins</a>
    

    
    » <a class="crumb" href="/kb/en/storage-engines/">Storage Engines</a>
    

    
    » <a class="crumb" href="/kb/en/innodb/">InnoDB</a>
    


    » <a class="node_link crumb" href="/kb/en/innodb-strict-mode/">InnoDB Strict Mode</a>


                </div>
                
            </div>
        </div>
    </div>
    <div class="container" id="container-main">
        <div class="row">
            
            
                
                <aside id="sidebar-first" class="sidebar col-md-2 hidden-xs hidden-sm hidden-print">
                    
                        
                        <ul id="category_menu" class="nav nav-pills nav-stacked">
                            <li><a href="/kb/en/">Home</a></li>
                            
                                
                                    <li><a href="/kb/en/+questions/">Open Questions</a></li>
                                
                                <li><a href="/kb/en/documentation/">MariaDB Server</a></li>
                                <li><a href="/kb/en/maxscale/">MariaDB MaxScale</a></li>
                                <li><a href="/kb/en/mariadb-columnstore/">MariaDB ColumnStore</a></li>
                                <li><a href="/kb/en/connectors/">Connectors</a></li>
                            

                        </ul>
                    

                    
                        <div>
    

<div class="well well-small box actions"><div>

        <a class="btn btn-block btn-small" href="/kb/en/innodb-strict-mode/">Return to article</a>
    
</div>
</div>

</div>
                    

                    

































                </aside>
            
            
            
                
            
            
            <section id="content" class="limited_width col-md-10 clearfix">
                
                    <h1>InnoDB Strict Mode - Source</h1>
                

                



                <div>
                    

    

    
    <div class="revision_info">
        <dl class="table">
            <dt>Revision</dt>
            <dd><a href="/kb/en/innodb-strict-mode/+r/119884/">119884</a></dd>
            <dt>User</dt>
            <dd>
<span class="user" id="user-1368">
<a href="/kb/user/id/1368" title="Ian Gilfillan">Ian Gilfillan</a>
</span></dd>
            <dt>Date</dt>
            <dd>

<span class="datetime" title="2022-10-18 10:54">2022-10-18 10:54</span></dd>
        </dl>
    </div>
    


    

    
        
        <textarea id="answer_source" class="creole_source autogrow">&lt;&lt;toc&gt;&gt;

[[innodb|InnoDB]] strict mode is similar to [[sql-mode#strict-mode|SQL strict mode]]. When it is enabled, certain InnoDB warnings become errors instead.

== Configuring InnoDB Strict Mode

InnoDB strict mode is enabled by default.

InnoDB strict mode can be enabled or disabled by configuring the [[xtradbinnodb-server-system-variables#innodb_strict_mode|innodb_strict_mode]] server system variable.

Its global value can be changed dynamically with [[set/#global-session|SET GLOBAL]]. For example:

&lt;&lt;code&gt;&gt;
SET GLOBAL innodb_strict_mode=ON;
&lt;&lt;/code&gt;&gt;

Its value for the current session can also be changed dynamically with [[set/#global-session|SET SESSION]]. For example:

&lt;&lt;code&gt;&gt;
SET SESSION innodb_strict_mode=ON;
&lt;&lt;/code&gt;&gt;

It can also be set in a server [[configuring-mariadb-with-option-files/#option-groups|option group]] in an [[configuring-mariadb-with-option-files|option file]] prior to starting up the server. For example:

&lt;&lt;code&gt;&gt;
[mariadb]
...
innodb_strict_mode=ON
&lt;&lt;/code&gt;&gt;

== InnoDB Strict Mode Errors

=== Wrong Create Options

If InnoDB strict mode is enabled, and if a DDL statement is executed and invalid or conflicting [[create-table/#table-options|table options]] are specified, then an error is raised. The error will only be a generic error that says the following:

&lt;&lt;code&gt;&gt;
ERROR 1005 (HY000): Can&#39;t create table `db1`.`tab` (errno: 140 &#34;Wrong create options&#34;)
&lt;&lt;/code&gt;&gt;

However, more details about the error can be found by executing [[show-warnings|SHOW WARNINGS]].

For example, the error is raised in the following cases:

* The [[create-table/#key_block_size|KEY_BLOCK_SIZE]] table option is set to a non-zero value, but the [[create-table/#row_format|ROW_FORMAT]] table option is set to some row format other than the [[innodb-compressed-row-format|COMPRESSED]] row format. For example:

&lt;&lt;sql&gt;&gt;
SET SESSION innodb_strict_mode=ON;

CREATE OR REPLACE TABLE tab (
   id int PRIMARY KEY,
   str varchar(50)
)
KEY_BLOCK_SIZE=4
ROW_FORMAT=DYNAMIC;
ERROR 1005 (HY000): Can&#39;t create table `db1`.`tab` (errno: 140 &#34;Wrong create options&#34;)

SHOW WARNINGS;
+---------+------+--------------------------------------------------------------------+
| Level   | Code | Message                                                            |
+---------+------+--------------------------------------------------------------------+
| Warning | 1478 | InnoDB: cannot specify ROW_FORMAT = DYNAMIC with KEY_BLOCK_SIZE.   |
| Error   | 1005 | Can&#39;t create table `db1`.`tab` (errno: 140 &#34;Wrong create options&#34;) |
| Warning | 1030 | Got error 140 &#34;Wrong create options&#34; from storage engine InnoDB    |
+---------+------+--------------------------------------------------------------------+
3 rows in set (0.000 sec)
&lt;&lt;/sql&gt;&gt;

* The [[create-table/#key_block_size|KEY_BLOCK_SIZE]] table option is set to a non-zero value, but the configured value is larger than either ##16## or the value of the [[innodb-system-variables/#innodb_page_size|innodb_page_size]] system variable, whichever is smaller.

&lt;&lt;sql&gt;&gt;
SET SESSION innodb_strict_mode=ON;

CREATE OR REPLACE TABLE tab (
   id int PRIMARY KEY,
   str varchar(50)
)
KEY_BLOCK_SIZE=16;
ERROR 1005 (HY000): Can&#39;t create table `db1`.`tab` (errno: 140 &#34;Wrong create options&#34;)

SHOW WARNINGS;
+---------+------+--------------------------------------------------------------------+
| Level   | Code | Message                                                            |
+---------+------+--------------------------------------------------------------------+
| Warning | 1478 | InnoDB: KEY_BLOCK_SIZE=16 cannot be larger than 8.                 |
| Error   | 1005 | Can&#39;t create table `db1`.`tab` (errno: 140 &#34;Wrong create options&#34;) |
| Warning | 1030 | Got error 140 &#34;Wrong create options&#34; from storage engine InnoDB    |
+---------+------+--------------------------------------------------------------------+
3 rows in set (0.000 sec)
&lt;&lt;/sql&gt;&gt;

* The [[create-table/#key_block_size|KEY_BLOCK_SIZE]] table option is set to a non-zero value, but the [[innodb-system-variables/#innodb_file_per_table|innodb_file_per_table]] system variable is not set to ##ON##.

&lt;&lt;sql&gt;&gt;
SET GLOBAL innodb_file_per_table=OFF;
SET SESSION innodb_strict_mode=ON;

CREATE OR REPLACE TABLE tab (
   id int PRIMARY KEY,
   str varchar(50)
)
KEY_BLOCK_SIZE=4;
ERROR 1005 (HY000): Can&#39;t create table `db1`.`tab` (errno: 140 &#34;Wrong create options&#34;)

SHOW WARNINGS;
+---------+------+--------------------------------------------------------------------+
| Level   | Code | Message                                                            |
+---------+------+--------------------------------------------------------------------+
| Warning | 1478 | InnoDB: KEY_BLOCK_SIZE requires innodb_file_per_table.             |
| Error   | 1005 | Can&#39;t create table `db1`.`tab` (errno: 140 &#34;Wrong create options&#34;) |
| Warning | 1030 | Got error 140 &#34;Wrong create options&#34; from storage engine InnoDB    |
+---------+------+--------------------------------------------------------------------+
3 rows in set (0.000 sec)
&lt;&lt;/sql&gt;&gt;

* The [[create-table/#key_block_size|KEY_BLOCK_SIZE]] table option is set to a non-zero value, but it is not set to one of the supported values: [1, 2, 4, 8, 16].

&lt;&lt;sql&gt;&gt;
SET SESSION innodb_strict_mode=ON;

CREATE OR REPLACE TABLE tab (
   id int PRIMARY KEY,
   str varchar(50)
)
KEY_BLOCK_SIZE=5;
ERROR 1005 (HY000): Can&#39;t create table `db1`.`tab` (errno: 140 &#34;Wrong create options&#34;)

SHOW WARNINGS;
+---------+------+-----------------------------------------------------------------------+
| Level   | Code | Message                                                               |
+---------+------+-----------------------------------------------------------------------+
| Warning | 1478 | InnoDB: invalid KEY_BLOCK_SIZE = 5. Valid values are [1, 2, 4, 8, 16] |
| Error   | 1005 | Can&#39;t create table `db1`.`tab` (errno: 140 &#34;Wrong create options&#34;)    |
| Warning | 1030 | Got error 140 &#34;Wrong create options&#34; from storage engine InnoDB       |
+---------+------+-----------------------------------------------------------------------+
3 rows in set (0.000 sec)
&lt;&lt;/sql&gt;&gt;

* The [[create-table/#row_format|ROW_FORMAT]] table option is set to the [[innodb-compressed-row-format|COMPRESSED]] row format, but the [[innodb-system-variables/#innodb_file_per_table|innodb_file_per_table]] system variable is not set to ##ON##.

&lt;&lt;sql&gt;&gt;
SET GLOBAL innodb_file_per_table=OFF;
SET SESSION innodb_strict_mode=ON;

CREATE OR REPLACE TABLE tab (
   id int PRIMARY KEY,
   str varchar(50)
)
ROW_FORMAT=COMPRESSED;
ERROR 1005 (HY000): Can&#39;t create table `db1`.`tab` (errno: 140 &#34;Wrong create options&#34;)

SHOW WARNINGS;
+---------+------+--------------------------------------------------------------------+
| Level   | Code | Message                                                            |
+---------+------+--------------------------------------------------------------------+
| Warning | 1478 | InnoDB: ROW_FORMAT=COMPRESSED requires innodb_file_per_table.      |
| Error   | 1005 | Can&#39;t create table `db1`.`tab` (errno: 140 &#34;Wrong create options&#34;) |
| Warning | 1030 | Got error 140 &#34;Wrong create options&#34; from storage engine InnoDB    |
+---------+------+--------------------------------------------------------------------+
3 rows in set (0.000 sec)
&lt;&lt;/sql&gt;&gt;

* The [[create-table/#row_format|ROW_FORMAT]] table option is set to a value, but it is not set to one of the values supported by InnoDB: [[innodb-redundant-row-format|REDUNDANT]], [[innodb-compact-row-format|COMPACT]], [[innodb-dynamic-row-format|DYNAMIC]], and [[innodb-compressed-row-format|COMPRESSED]].

&lt;&lt;sql&gt;&gt;
SET SESSION innodb_strict_mode=ON;

CREATE OR REPLACE TABLE tab (
   id int PRIMARY KEY,
   str varchar(50)
)
ROW_FORMAT=PAGE;
ERROR 1005 (HY000): Can&#39;t create table `db1`.`tab` (errno: 140 &#34;Wrong create options&#34;)

SHOW WARNINGS;
+---------+------+--------------------------------------------------------------------+
| Level   | Code | Message                                                            |
+---------+------+--------------------------------------------------------------------+
| Warning | 1478 | InnoDB: invalid ROW_FORMAT specifier.                              |
| Error   | 1005 | Can&#39;t create table `db1`.`tab` (errno: 140 &#34;Wrong create options&#34;) |
| Warning | 1030 | Got error 140 &#34;Wrong create options&#34; from storage engine InnoDB    |
+---------+------+--------------------------------------------------------------------+
3 rows in set (0.000 sec)
&lt;&lt;/sql&gt;&gt;

* Either the [[create-table/#key_block_size|KEY_BLOCK_SIZE]] table option is set to a non-zero value or the [[create-table/#row_format|ROW_FORMAT]] table option is set to the [[innodb-compressed-row-format|COMPRESSED]] row format, but the [[innodb-system-variables/#innodb_page_size|innodb_page_size]] system variable is set to a value greater than ##16k##.

&lt;&lt;sql&gt;&gt;
SET SESSION innodb_strict_mode=ON;

CREATE OR REPLACE TABLE tab (
   id int PRIMARY KEY,
   str varchar(50)
)
ROW_FORMAT=COMPRESSED;
ERROR 1005 (HY000): Can&#39;t create table `db1`.`tab` (errno: 140 &#34;Wrong create options&#34;)

SHOW WARNINGS;
+---------+------+-----------------------------------------------------------------------+
| Level   | Code | Message                                                               |
+---------+------+-----------------------------------------------------------------------+
| Warning | 1478 | InnoDB: Cannot create a COMPRESSED table when innodb_page_size &gt; 16k. |
| Error   | 1005 | Can&#39;t create table `db1`.`tab` (errno: 140 &#34;Wrong create options&#34;)    |
| Warning | 1030 | Got error 140 &#34;Wrong create options&#34; from storage engine InnoDB       |
+---------+------+-----------------------------------------------------------------------+
3 rows in set (0.00 sec)
&lt;&lt;/sql&gt;&gt;

* The [[create-table/#data-directoryindex-directory|DATA DIRECTORY]] table option is set, but the [[innodb-system-variables/#innodb_file_per_table|innodb_file_per_table]] system variable is not set to ##ON##.

&lt;&lt;sql&gt;&gt;
SET GLOBAL innodb_file_per_table=OFF;
SET SESSION innodb_strict_mode=ON;

CREATE OR REPLACE TABLE tab (
   id int PRIMARY KEY,
   str varchar(50)
)
DATA DIRECTORY=&#39;/mariadb&#39;;
ERROR 1005 (HY000): Can&#39;t create table `db1`.`tab` (errno: 140 &#34;Wrong create options&#34;)

SHOW WARNINGS;
+---------+------+--------------------------------------------------------------------+
| Level   | Code | Message                                                            |
+---------+------+--------------------------------------------------------------------+
| Warning | 1478 | InnoDB: DATA DIRECTORY requires innodb_file_per_table.             |
| Error   | 1005 | Can&#39;t create table `db1`.`tab` (errno: 140 &#34;Wrong create options&#34;) |
| Warning | 1030 | Got error 140 &#34;Wrong create options&#34; from storage engine InnoDB    |
+---------+------+--------------------------------------------------------------------+
3 rows in set (0.000 sec)
&lt;&lt;/sql&gt;&gt;

* The [[create-table/#data-directoryindex-directory|DATA DIRECTORY]] table option is set, but the table is a [[create-table/#create-temporary-table|temporary table]].

&lt;&lt;sql&gt;&gt;
SET SESSION innodb_strict_mode=ON;

CREATE OR REPLACE TEMPORARY TABLE tab (
   id int PRIMARY KEY,
   str varchar(50)
)
DATA DIRECTORY=&#39;/mariadb&#39;;
ERROR 1005 (HY000): Can&#39;t create table `db1`.`tab` (errno: 140 &#34;Wrong create options&#34;)

SHOW WARNINGS;
+---------+------+--------------------------------------------------------------------+
| Level   | Code | Message                                                            |
+---------+------+--------------------------------------------------------------------+
| Warning | 1478 | InnoDB: DATA DIRECTORY cannot be used for TEMPORARY tables.        |
| Error   | 1005 | Can&#39;t create table `db1`.`tab` (errno: 140 &#34;Wrong create options&#34;) |
| Warning | 1030 | Got error 140 &#34;Wrong create options&#34; from storage engine InnoDB    |
+---------+------+--------------------------------------------------------------------+
3 rows in set (0.000 sec)
&lt;&lt;/sql&gt;&gt;

* The [[create-table/#data-directoryindex-directory|INDEX DIRECTORY]] table option is set.

&lt;&lt;code&gt;&gt;
SET SESSION innodb_strict_mode=ON;

CREATE OR REPLACE TABLE tab (
   id int PRIMARY KEY,
   str varchar(50)
)
INDEX DIRECTORY=&#39;/mariadb&#39;;
ERROR 1005 (HY000): Can&#39;t create table `db1`.`tab` (errno: 140 &#34;Wrong create options&#34;)

SHOW WARNINGS;
+---------+------+--------------------------------------------------------------------+
| Level   | Code | Message                                                            |
+---------+------+--------------------------------------------------------------------+
| Warning | 1478 | InnoDB: INDEX DIRECTORY is not supported                           |
| Error   | 1005 | Can&#39;t create table `db1`.`tab` (errno: 140 &#34;Wrong create options&#34;) |
| Warning | 1030 | Got error 140 &#34;Wrong create options&#34; from storage engine InnoDB    |
+---------+------+--------------------------------------------------------------------+
3 rows in set (0.000 sec)
&lt;&lt;/code&gt;&gt;

* The [[#page_compressed|PAGE_COMPRESSED]] table option is set to ##1##, so [[compression|InnoDB page compression]] is enabled, but the [[create-table/#row_format|ROW_FORMAT]] table option is set to some row format other than the [[innodb-compact-row-format|COMPACT]] or [[innodb-dynamic-row-format|DYNAMIC]] row formats.

&lt;&lt;code&gt;&gt;
SET SESSION innodb_strict_mode=ON;

CREATE OR REPLACE TABLE tab (
   id int PRIMARY KEY,
   str varchar(50)
)
PAGE_COMPRESSED=1
ROW_FORMAT=COMPRESSED;
ERROR 1005 (HY000): Can&#39;t create table `db1`.`tab` (errno: 140 &#34;Wrong create options&#34;)

SHOW WARNINGS;
+---------+------+--------------------------------------------------------------------+
| Level   | Code | Message                                                            |
+---------+------+--------------------------------------------------------------------+
| Warning |  140 | InnoDB: PAGE_COMPRESSED table can&#39;t have ROW_TYPE=COMPRESSED       |
| Error   | 1005 | Can&#39;t create table `db1`.`tab` (errno: 140 &#34;Wrong create options&#34;) |
| Warning | 1030 | Got error 140 &#34;Wrong create options&#34; from storage engine InnoDB    |
+---------+------+--------------------------------------------------------------------+
3 rows in set (0.000 sec)
&lt;&lt;/code&gt;&gt;

* The [[#page_compressed|PAGE_COMPRESSED]] table option is set to ##1##, so [[compression|InnoDB page compression]] is enabled, but the [[innodb-system-variables/#innodb_file_per_table|innodb_file_per_table]] system variable is not set to ##ON##.

&lt;&lt;sql&gt;&gt;
SET GLOBAL innodb_file_per_table=OFF;
SET SESSION innodb_strict_mode=ON;

CREATE OR REPLACE TABLE tab (
   id int PRIMARY KEY,
   str varchar(50)
)
PAGE_COMPRESSED=1;
ERROR 1005 (HY000): Can&#39;t create table `db1`.`tab` (errno: 140 &#34;Wrong create options&#34;)

SHOW WARNINGS;
+---------+------+--------------------------------------------------------------------+
| Level   | Code | Message                                                            |
+---------+------+--------------------------------------------------------------------+
| Warning |  140 | InnoDB: PAGE_COMPRESSED requires innodb_file_per_table.            |
| Error   | 1005 | Can&#39;t create table `db1`.`tab` (errno: 140 &#34;Wrong create options&#34;) |
| Warning | 1030 | Got error 140 &#34;Wrong create options&#34; from storage engine InnoDB    |
+---------+------+--------------------------------------------------------------------+
3 rows in set (0.000 sec)
&lt;&lt;/sql&gt;&gt;

* The [[#page_compressed|PAGE_COMPRESSED]] table option is set to ##1##, so [[compression|InnoDB page compression]] is enabled, but the [[create-table/#key_block_size|KEY_BLOCK_SIZE]] table option is also specified.

&lt;&lt;code&gt;&gt;
SET SESSION innodb_strict_mode=ON;

CREATE OR REPLACE TABLE tab (
   id int PRIMARY KEY,
   str varchar(50)
)
PAGE_COMPRESSED=1
KEY_BLOCK_SIZE=4;
ERROR 1005 (HY000): Can&#39;t create table `db1`.`tab` (errno: 140 &#34;Wrong create options&#34;)

SHOW WARNINGS;
+---------+------+--------------------------------------------------------------------+
| Level   | Code | Message                                                            |
+---------+------+--------------------------------------------------------------------+
| Warning |  140 | InnoDB: PAGE_COMPRESSED table can&#39;t have key_block_size            |
| Error   | 1005 | Can&#39;t create table `db1`.`tab` (errno: 140 &#34;Wrong create options&#34;) |
| Warning | 1030 | Got error 140 &#34;Wrong create options&#34; from storage engine InnoDB    |
+---------+------+--------------------------------------------------------------------+
3 rows in set (0.000 sec)
&lt;&lt;/code&gt;&gt;

* The [[create-table/#page_compression_level|PAGE_COMPRESSION_LEVEL]] table option is set, but 
 the [[#page_compressed|PAGE_COMPRESSED]] table option is set to ##0##, so [[compression|InnoDB page compression]] is disabled.

&lt;&lt;sql&gt;&gt;
SET SESSION innodb_strict_mode=ON;

CREATE OR REPLACE TABLE tab (
   id int PRIMARY KEY,
   str varchar(50)
)
PAGE_COMPRESSED=0
PAGE_COMPRESSION_LEVEL=9;
ERROR 1005 (HY000): Can&#39;t create table `db1`.`tab` (errno: 140 &#34;Wrong create options&#34;)

SHOW WARNINGS;
+---------+------+--------------------------------------------------------------------+
| Level   | Code | Message                                                            |
+---------+------+--------------------------------------------------------------------+
| Warning |  140 | InnoDB: PAGE_COMPRESSION_LEVEL requires PAGE_COMPRESSED            |
| Error   | 1005 | Can&#39;t create table `db1`.`tab` (errno: 140 &#34;Wrong create options&#34;) |
| Warning | 1030 | Got error 140 &#34;Wrong create options&#34; from storage engine InnoDB    |
+---------+------+--------------------------------------------------------------------+
3 rows in set (0.000 sec)
&lt;&lt;/sql&gt;&gt;

&lt;&lt;product mariadb to=10.2&gt;&gt;
In MariaDB 10.2 and before, the error is raised in the following additional cases:

* The [[create-table/#key_block_size|KEY_BLOCK_SIZE]] table option is set to a non-zero value, but the [[innodb-system-variables/#innodb_file_format|innodb_file_format]] system variable is not set to ##Barracuda##.

&lt;&lt;sql&gt;&gt;
SET GLOBAL innodb_file_format=&#39;Antelope&#39;;
SET SESSION innodb_strict_mode=ON;

CREATE OR REPLACE TABLE tab (
   id int PRIMARY KEY,
   str varchar(50)
)
KEY_BLOCK_SIZE=4;
ERROR 1005 (HY000): Can&#39;t create table `db1`.`tab` (errno: 140 &#34;Wrong create options&#34;)

SHOW WARNINGS;
+---------+------+--------------------------------------------------------------------+
| Level   | Code | Message                                                            |
+---------+------+--------------------------------------------------------------------+
| Warning | 1478 | InnoDB: KEY_BLOCK_SIZE requires innodb_file_format &gt; Antelope.     |
| Error   | 1005 | Can&#39;t create table `db1`.`tab` (errno: 140 &#34;Wrong create options&#34;) |
| Warning | 1030 | Got error 140 &#34;Wrong create options&#34; from storage engine InnoDB    |
+---------+------+--------------------------------------------------------------------+
3 rows in set (0.00 sec)
&lt;&lt;/sql&gt;&gt;

* The [[create-table/#row_format|ROW_FORMAT]] table option is set to either the [[innodb-compressed-row-format|COMPRESSED]] or the [[innodb-dynamic-row-format|DYNAMIC]] row format, but the [[innodb-system-variables/#innodb_file_format|innodb_file_format]] system variable is not set to ##Barracuda##.

&lt;&lt;sql&gt;&gt;
SET GLOBAL innodb_file_format=&#39;Antelope&#39;;
SET SESSION innodb_strict_mode=ON;

CREATE OR REPLACE TABLE tab (
   id int PRIMARY KEY,
   str varchar(50)
)
ROW_FORMAT=COMPRESSED;
ERROR 1005 (HY000): Can&#39;t create table `db1`.`tab` (errno: 140 &#34;Wrong create options&#34;)

SHOW WARNINGS;
+---------+------+-----------------------------------------------------------------------+
| Level   | Code | Message                                                               |
+---------+------+-----------------------------------------------------------------------+
| Warning | 1478 | InnoDB: ROW_FORMAT=COMPRESSED requires innodb_file_format &gt; Antelope. |
| Error   | 1005 | Can&#39;t create table `db1`.`tab` (errno: 140 &#34;Wrong create options&#34;)    |
| Warning | 1030 | Got error 140 &#34;Wrong create options&#34; from storage engine InnoDB       |
+---------+------+-----------------------------------------------------------------------+
3 rows in set (0.00 sec)
&lt;&lt;/sql&gt;&gt;

* The [[#page_compressed|PAGE_COMPRESSED]] table option is set to ##1##, so [[compression|InnoDB page compression]] is enabled, but the [[innodb-system-variables/#innodb_file_format|innodb_file_format]] system variable is not set to ##Barracuda##.

&lt;&lt;sql&gt;&gt;
SET GLOBAL innodb_file_format=&#39;Antelope&#39;;
SET SESSION innodb_strict_mode=ON;

CREATE OR REPLACE TABLE tab (
   id int PRIMARY KEY,
   str varchar(50)
)
PAGE_COMPRESSED=1;
SHOW WARNINGS;
ERROR 1005 (HY000): Can&#39;t create table `db1`.`tab` (errno: 140 &#34;Wrong create options&#34;)

SHOW WARNINGS;
+---------+------+--------------------------------------------------------------------+
| Level   | Code | Message                                                            |
+---------+------+--------------------------------------------------------------------+
| Warning |  140 | InnoDB: PAGE_COMPRESSED requires innodb_file_format &gt; Antelope.    |
| Error   | 1005 | Can&#39;t create table `db1`.`tab` (errno: 140 &#34;Wrong create options&#34;) |
| Warning | 1030 | Got error 140 &#34;Wrong create options&#34; from storage engine InnoDB    |
+---------+------+--------------------------------------------------------------------+
3 rows in set (0.00 sec)
&lt;&lt;/sql&gt;&gt;
&lt;&lt;/product&gt;&gt;

=== COMPRESSED Row Format

If InnoDB strict mode is enabled, and if a table uses the [[innodb-compressed-row-format|COMPRESSED]] row format, and if the table&#39;s [[create-table/#key_block_size|KEY_BLOCK_SIZE]] is too small to contain a row, then an error is returned by the statement.

=== Row Size Too Large

If InnoDB strict mode is enabled, and if a table exceeds its row format&#39;s [[innodb-row-formats-overview/#maximum-row-size|maximum row size]], then InnoDB will return an error.

&lt;&lt;code&gt;&gt;
ERROR 1118 (42000): Row size too large (&gt; 8126). Changing some columns to 
TEXT or BLOB may help. In current row format, BLOB prefix of 0 bytes is stored inline.
&lt;&lt;/code&gt;&gt;

See [[troubleshooting-row-size-too-large-errors-with-innodb|Troubleshooting Row Size Too Large Errors with InnoDB]] for more information.</textarea>
    


                    <div id="content_disclaimer" class="graybox">
                        Content reproduced on this site is the property of its respective owners,
                        and this content is not reviewed in advance by MariaDB. The views, information and opinions
                        expressed by this content do not necessarily represent those of MariaDB or any other party.
                    </div>
                </div>
            </section>

            
        </div>
    </div>
</div>

<!-- Footer -->
<footer id="footer">
    <div class="footer">
        <div class="container">
            <div class="row">
                <div class="col-xs-12">
                    <ul class="list-inline text-center footer-nav">
                        <li>
                            <h5>
                                <a href="https://mariadb.com/products" title="Products">Products</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/services" title="Services">Services</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/pricing" title="Pricing">Pricing</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/resources" title="Resources">Resources</a>
                            </h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/about-us" title="About MariaDB">About Us</a></h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/download" title="Download">Download MariaDB</a></h5>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="row row-10">
                
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div id="block-footerformcontact" class="block block-block-content block-block-contentd754ee1b-3cc9-40e7-9ef4-f504f1197fb1">
                        
                            <h5 style="font-weight: 400;">Subscribe to our newsletter!</h5>
                            <script src="//app-sj15.marketo.com/js/forms2/js/forms2.min.js"></script><form id="mktoForm_1498"></form>
                            <script>
                                <!--//--><![CDATA[// ><!--
                                MktoForms2.loadForm("//app-sj15.marketo.com", "573-PXI-984", 1498);
                                //--><!]]]]><![CDATA[>
                                //--><!]]>
                            </script>
                        
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div class="footer-copyright">
                        <div class="text-center">
                            <ul class="list-inline no-margin">
                                <li>
                                    <a href="/legal" title="Legal">Legal</a>
                                </li>
                                <li>
                                    <a href="/privacy-policy" title="Privacy Policy">Privacy Policy</a>
                                </li>
                                <li>
                                    <a href="/cookie-policy/" title="Cookies">Cookie Policy</a>
                                </li>
                            </ul>
                            <p>Copyright &copy; 2024 MariaDB. All rights reserved.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
</footer>
</div>

<div id="ajax_loading">
    <img src="/kb/static/images/ajax-loader.a51c5608d01a.gif" />
</div>

    <!-- Google Tag Manager -->
    <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-MK2847"
                      height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
            '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MK2847');</script>
    <!-- End Google Tag Manager -->

</body>

<script type="text/javascript" src="/kb/static/js/main.1587e3a666fc.js" charset="utf-8"></script>

</html>