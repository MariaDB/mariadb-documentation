<?xml version="1.0" encoding="utf-8"?>
<rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title>MariaDB Knowledge Base Comments for: Historical data, nightly snapshots</title><link>https://mariadb.com/kb/en/historical-data-nightly-snapshots/+comments/feed/</link><description></description><atom:link href="https://mariadb.com/kb/en/historical-data-nightly-snapshots/+comments/feed/" rel="self"></atom:link><language>en-us</language><lastBuildDate>Mon, 20 Jan 2025 12:20:20 +0000</lastBuildDate><item><title>Re: Historical data, nightly snapshots</title><link>https://mariadb.com/kb/en/historical-data-nightly-snapshots/+comments/1346</link><description>&lt;p&gt;Cool thx.  So, can I create a table of the exact same structure with the help of the .cfg file?  I can imagine a scenario where I have a bunch of existing snapshots that I'd like to make available to read (let's say I was careful about doing the FLUSH TABLES FOR EXPORT before taking each snapshot), but of course table structure can change over time.  Is there a way to work up a CREATE statement based on the .cfg file?&lt;/p&gt;
&lt;p&gt;Thanks!&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">BJ Quinn</dc:creator><guid>https://mariadb.com/kb/en/historical-data-nightly-snapshots/+comments/1346</guid></item><item><title>Re: Historical data, nightly snapshots</title><link>https://mariadb.com/kb/en/historical-data-nightly-snapshots/+comments/1345</link><description>&lt;p&gt;We've got the import process from MySQL and haven't fixed it yet. It's a bit cumbersome.  It involves creating a table with exactly the same structure, and then two &lt;code&gt;ALTER TABLE&lt;/code&gt; statements. See &lt;a href="http://dev.mysql.com/doc/refman/5.6/en/tablespace-copying.html"&gt;http://dev.mysql.com/doc/refman/5.6/en/tablespace-copying.html&lt;/a&gt; for details.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Sergei Golubchik</dc:creator><guid>https://mariadb.com/kb/en/historical-data-nightly-snapshots/+comments/1345</guid></item><item><title>Re: Historical data, nightly snapshots</title><link>https://mariadb.com/kb/en/historical-data-nightly-snapshots/+comments/1344</link><description>&lt;p&gt;Thanks!  I could probably do a flush tables for export before taking the snapshot and then the snapshot ought to be clean, I would think.  So now I have a snapshot full of (hopefully clean) tables that I need to add to MariaDB -- how do I actually do the import?  Can I create the empty table structures based only off the .cfg files and then discard the tablespace and then link in the ibd files from the snapshot?  And the snapshots would be read only, can I point to an innodb table that's read only as long as I don't intend to make any changes to it?&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">BJ Quinn</dc:creator><guid>https://mariadb.com/kb/en/historical-data-nightly-snapshots/+comments/1344</guid></item><item><title>Re: Historical data, nightly snapshots</title><link>https://mariadb.com/kb/en/historical-data-nightly-snapshots/+comments/1335</link><description>&lt;p&gt;If you have a snapshot of innodb tablespaces, they weren't properly closed, so
they look like they were a result of a crash. The first time you start innodb
on these files, it will perform a crash recovery, then the tables will be
usable.&lt;/p&gt;
&lt;p&gt;So, you can do the following:&lt;/p&gt;
&lt;ul start="1"&gt;&lt;li&gt;start another mariadb on your snapshot, let innodb do its crash recovery.
&lt;/li&gt;&lt;li&gt;export tablespaces using &lt;a href="/kb/en/flush-tables-for-export/"&gt;FLUSH TABLES FOR EXPORT&lt;/a&gt;.
&lt;/li&gt;&lt;li&gt;copy them into your running mariadb and import them there.
&lt;/li&gt;&lt;/ul&gt;
&lt;p&gt;after that you can use these tables in the running mariadb instance&lt;/p&gt;
&lt;p&gt;And, of course, you don't really need to copy multi-GB files, you can just move or hard-link them in place.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Sergei Golubchik</dc:creator><guid>https://mariadb.com/kb/en/historical-data-nightly-snapshots/+comments/1335</guid></item></channel></rss>