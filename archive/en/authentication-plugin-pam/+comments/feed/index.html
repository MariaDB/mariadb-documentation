<?xml version="1.0" encoding="utf-8"?>
<rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title>MariaDB Knowledge Base Comments for: Authentication Plugin - PAM</title><link>https://mariadb.com/kb/en/authentication-plugin-pam/+comments/feed/</link><description></description><atom:link href="https://mariadb.com/kb/en/authentication-plugin-pam/+comments/feed/" rel="self"></atom:link><language>en-us</language><lastBuildDate>Mon, 25 Sep 2023 18:47:42 +0000</lastBuildDate><item><title>Re: PAM Authentication Plugin</title><link>https://mariadb.com/kb/en/authentication-plugin-pam/+comments/2069</link><description>&lt;p&gt;&lt;code&gt;INSTALL SONAME&lt;/code&gt; is MariaDB feature, in MySQL you should use &lt;code&gt;INSTALL PLUGIN&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;PAM plugin might not work even if you will use the correct statement. Try to compile it for 5.7. And even that might not help.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Sergei Golubchik</dc:creator><guid>https://mariadb.com/kb/en/authentication-plugin-pam/+comments/2069</guid></item><item><title>Re: PAM Authentication Plugin</title><link>https://mariadb.com/kb/en/authentication-plugin-pam/+comments/2067</link><description>&lt;p&gt;I am attempting to install PAM plugin for MySQL 5.7 Community server however when I invoke the command INSTALL SONAME 'auth_pam', I get the following error:&lt;/p&gt;
&lt;p&gt;mysql&amp;gt; INSTALL SONAME 'auth_pam';
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'SONAME 'auth_pam'' at line 1&lt;/p&gt;
&lt;p&gt;The auth_pam.so was already copied to plugin_dir location. I even tried adding the variable plugin_load to mysqld section in my.cnf. However when I do show plugin, I don't see this plugin getting listed.&lt;/p&gt;
&lt;p&gt;Do I need to do anything additional besides the above step? &lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Sanjay Kumar Raghavendra</dc:creator><guid>https://mariadb.com/kb/en/authentication-plugin-pam/+comments/2067</guid></item><item><title>Re: PAM Authentication Plugin</title><link>https://mariadb.com/kb/en/authentication-plugin-pam/+comments/2060</link><description>&lt;p&gt;This has been the case since 2011, however see &lt;a href="https://jira.mariadb.org/browse/MDEV-7032"&gt;MDEV-7032&lt;/a&gt;.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Ian Gilfillan</dc:creator><guid>https://mariadb.com/kb/en/authentication-plugin-pam/+comments/2060</guid></item><item><title>Re: PAM Authentication Plugin</title><link>https://mariadb.com/kb/en/authentication-plugin-pam/+comments/2057</link><description>&lt;p&gt;Hi,
I want to use pam_unix.so not run as root .
Which version of MariaDB Server can do it ?&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Jerry Lin</dc:creator><guid>https://mariadb.com/kb/en/authentication-plugin-pam/+comments/2057</guid></item><item><title>Re: PAM Authentication Plugin</title><link>https://mariadb.com/kb/en/authentication-plugin-pam/+comments/2054</link><description>&lt;p&gt;Together with the newer version of MariaDB Server&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Sergei Golubchik</dc:creator><guid>https://mariadb.com/kb/en/authentication-plugin-pam/+comments/2054</guid></item><item><title>Re: PAM Authentication Plugin</title><link>https://mariadb.com/kb/en/authentication-plugin-pam/+comments/2053</link><description>&lt;p&gt;Hi,
Where could I download the newer version of PAM plugin?&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Jerry Lin</dc:creator><guid>https://mariadb.com/kb/en/authentication-plugin-pam/+comments/2053</guid></item><item><title>Re: PAM Authentication Plugin</title><link>https://mariadb.com/kb/en/authentication-plugin-pam/+comments/1608</link><description>&lt;p&gt;You can call it anything you want. But you need to specify the name of the file (in PAM language it's called the &lt;em&gt;service&lt;/em&gt;) with the &lt;code&gt;USING&lt;/code&gt; clause. By default the &lt;code&gt;mysql&lt;/code&gt; file is used. It's explained above, read from “Optionally, you can specify a PAM service name…”&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Sergei Golubchik</dc:creator><guid>https://mariadb.com/kb/en/authentication-plugin-pam/+comments/1608</guid></item><item><title>Re: PAM Authentication Plugin</title><link>https://mariadb.com/kb/en/authentication-plugin-pam/+comments/1602</link><description>&lt;p&gt;With the MariaDB included with RHEL 7, I could not get it working, unless I called the pam file /etc/pam.d/mysql (and not /etc/pam.d/mariadb).&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Troels Arvin</dc:creator><guid>https://mariadb.com/kb/en/authentication-plugin-pam/+comments/1602</guid></item><item><title>Re: PAM Authentication Plugin</title><link>https://mariadb.com/kb/en/authentication-plugin-pam/+comments/1516</link><description>&lt;p&gt;This worked with Centrify using this configuration for /etc/pam.d/mysql:&lt;/p&gt;
&lt;pre&gt;
auth include system-auth 
account required pam_nologin.so 
account include system-auth 
password include system-auth 
session optional pam_keyinit.so force revoke 
session include system-auth 
session required pam_loginuid.so 
&lt;/pre&gt;
&lt;p&gt;Thanks to &lt;a href="http://forums.mysql.com/read.php?30,604795,606085#msg-606085"&gt;http://forums.mysql.com/read.php?30,604795,606085#msg-606085&lt;/a&gt; for the solution&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">M G</dc:creator><guid>https://mariadb.com/kb/en/authentication-plugin-pam/+comments/1516</guid></item><item><title>Re: PAM Authentication Plugin</title><link>https://mariadb.com/kb/en/authentication-plugin-pam/+comments/1514</link><description>&lt;p&gt;Thank you. I’m trying to configure the LDAP authentication for MariaDB on SUSE 11 SP1, but somewhat not able to connect; even it does not give much logging both in Mysql n linux log/message; it would be great if someone put me into the right info how to configure the ldap auth for MariaDB or how to debug or correct me w/ the right set of config.&lt;/p&gt;
&lt;p&gt;Below are the client n db server version
mysql  Ver 15.1 Distrib 10.0.13-MariaDB, for Linux (x86_64) using readline 5.1
MariaDB Server version          10.0.13-MariaDB  with Protocol version        10&lt;/p&gt;
&lt;p&gt;I follow the below pattern for PAM n LDAP config…&lt;/p&gt;
&lt;p&gt;plugin-load=auth_pam.so
...
/etc/pam.d/mysql:
auth required pam_ldap.so config=/etc/ldap_mysql.conf debug
account required pam_ldap.so config=/etc/ldap_mysql.conf debug
/etc/ldap_mysql.conf:&lt;/p&gt;
&lt;p&gt;host &amp;gt;hostname&amp;lt;
Port &amp;lt;&amp;gt;
Base
Bindn
bindpw&lt;/p&gt;
&lt;p&gt;with the above configuration I’m able to get the required AD attributes using ldapsearch&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Jayakumar Athinarayanasamy</dc:creator><guid>https://mariadb.com/kb/en/authentication-plugin-pam/+comments/1514</guid></item><item><title>Re: PAM authentication plugin</title><link>https://mariadb.com/kb/en/authentication-plugin-pam/+comments/1361</link><description>&lt;p&gt;unix_chkpwd does throttle on wrong credentials being passed in, but that only helps if it is part of a service toolchain as it is with pam_unix&lt;/p&gt;
&lt;p&gt;when called directly an attacker doesn't have to wait for the 10s penalty after giving a wrong password but can just start new unix_chkpwd processes without anything putting artificial limits on the number of checks per time unit ...&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Hartmut Holzgraefe</dc:creator><guid>https://mariadb.com/kb/en/authentication-plugin-pam/+comments/1361</guid></item><item><title>Re: PAM authentication plugin</title><link>https://mariadb.com/kb/en/authentication-plugin-pam/+comments/1360</link><description>&lt;p&gt;Well, the "can only check the users own password unless invoked by root" limitation is there for a reason:&lt;/p&gt;
&lt;p&gt;as unix_chkpwd is a local binary and not a service it can be used to perform brute force dictionary attacks against /etc/shadow without a need to have read access to the shadow file otherwise ...&lt;/p&gt;
&lt;p&gt;Restricting access to this for root isn't necessary as root can read the shadow file (and other things like changing user passwords) anyway ...&lt;/p&gt;
&lt;p&gt;But for any other user starting unix_chkpwd extra care is taken that only the password of this single user can be cracked this way (again not that much harm with this as an attacker must somehow gained access to that user account already anyway)&lt;/p&gt;
&lt;p&gt;Any shadow entry for other users are still hidden by the inner working of unix_chkpwd &lt;/p&gt;
&lt;p&gt;(adding some comments on &lt;a href="https://jira.mariadb.org/browse/MDEV-7032"&gt;MDEV-7032&lt;/a&gt;, too ..)&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Hartmut Holzgraefe</dc:creator><guid>https://mariadb.com/kb/en/authentication-plugin-pam/+comments/1360</guid></item><item><title>Re: PAM authentication plugin</title><link>https://mariadb.com/kb/en/authentication-plugin-pam/+comments/1359</link><description>&lt;p&gt;I'm thinking of a solution to this (and other similar problems): &lt;a href="https://jira.mariadb.org/browse/MDEV-7032"&gt;MDEV-7032&lt;/a&gt;&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Sergei Golubchik</dc:creator><guid>https://mariadb.com/kb/en/authentication-plugin-pam/+comments/1359</guid></item><item><title>Re: PAM authentication plugin</title><link>https://mariadb.com/kb/en/authentication-plugin-pam/+comments/1357</link><description>&lt;p&gt;Doesn't work for me (Ubuntu 14.10, Ubuntu distribution MariaDB packages)&lt;/p&gt;
&lt;p&gt;"Problem" is that unix_chkpwd explicitly checks that its UID matches the username given as cmdline argument, *unless* the UID is 0 (root). As it checks UID, not EUID, suid chmod magic doesn't make a difference here.&lt;/p&gt;
&lt;p&gt;The related check code in unix_chkpwd.c is at &lt;a href="https://git.fedorahosted.org/cgit/linux-pam.git/tree/modules/pam_unix/unix_chkpwd.c#n129"&gt;https://git.fedorahosted.org/cgit/linux-pam.git/tree/modules/pam_unix/unix_chkpwd.c#n129&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;	if (getuid() == 0) {
	  user=argv[1];
	}
	else {
	  user = getuidname(getuid());
	  /* if the caller specifies the username, verify that user
	     matches it */
	  if (strcmp(user, argv[1])) {
	    user = argv[1];
	    /* no match -&amp;gt; permanently change to the real user and proceed */
	    if (setuid(getuid()) != 0)
		return PAM_AUTH_ERR;
	  }
	}&lt;/p&gt;
&lt;p&gt;So unless mysqld is running as root the "does the given user name match my UID?" check will only succeed if the mysql user name matches the system user name, e.g. usually pam_unix will work for mysql users "mysql@..." if mysqld is running as unix user "mysql"&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Hartmut Holzgraefe</dc:creator><guid>https://mariadb.com/kb/en/authentication-plugin-pam/+comments/1357</guid></item><item><title>Re: PAM authentication plugin</title><link>https://mariadb.com/kb/en/authentication-plugin-pam/+comments/1121</link><description>&lt;p&gt;mysql_native_password plugin.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Federico Razzoli</dc:creator><guid>https://mariadb.com/kb/en/authentication-plugin-pam/+comments/1121</guid></item><item><title>Re: PAM authentication plugin</title><link>https://mariadb.com/kb/en/authentication-plugin-pam/+comments/1120</link><description>&lt;p&gt;Details on how to revert back to normal authentication would be very handy&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Stephanie Locke</dc:creator><guid>https://mariadb.com/kb/en/authentication-plugin-pam/+comments/1120</guid></item><item><title>Re: PAM authentication plugin</title><link>https://mariadb.com/kb/en/authentication-plugin-pam/+comments/876</link><description>&lt;p&gt;Could it be a MariaDB version issue, as the system I'm testing this on is only at 5.2.14?  I also ran into the fact that PHP (which was rebuilt after MariaDB was installed) doesn't seem to know how to talk to the dialog plugin via mysqli, so I'm likely going to have to upgrade MariaDB anyway.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Shane Williams</dc:creator><guid>https://mariadb.com/kb/en/authentication-plugin-pam/+comments/876</guid></item><item><title>Re: PAM authentication plugin</title><link>https://mariadb.com/kb/en/authentication-plugin-pam/+comments/875</link><description>&lt;p&gt;&lt;a href="https://mariadb.atlassian.net/browse/MDEV-5090"&gt;https://mariadb.atlassian.net/browse/MDEV-5090&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;thanx! done!&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Dmitry Bakshaev</dc:creator><guid>https://mariadb.com/kb/en/authentication-plugin-pam/+comments/875</guid></item><item><title>Re: PAM authentication plugin</title><link>https://mariadb.com/kb/en/authentication-plugin-pam/+comments/874</link><description>&lt;p&gt;details:&lt;/p&gt;
&lt;p&gt;/etc/mysql/my.cnf:&lt;br&gt;
...&lt;br&gt;
[mysqld]&lt;br&gt;
plugin-load=auth_pam.so&lt;br&gt;
...&lt;br&gt;&lt;/p&gt;
&lt;p&gt;/etc/pam.d/mysql:&lt;br&gt;
auth            required        pam_ldap.so config=/etc/ldap_mysql.conf debug&lt;br&gt;
account         required        pam_ldap.so config=/etc/ldap_mysql.conf debug&lt;br&gt;&lt;/p&gt;
&lt;p&gt;/etc/ldap_mysql.conf:&lt;br&gt;
uri ldaps:&lt;em&gt;ldap.xxx ldaps:&lt;/em&gt;ldap2.xxx&lt;br&gt;
ssl on&lt;br&gt;
scope sub&lt;br&gt;&lt;/p&gt;
&lt;p&gt;software versions:&lt;br&gt;
dev-db/&lt;a href="/kb/en/mariadb-5531-release-notes/"&gt;mariadb 5.5.31&lt;/a&gt;&lt;br&gt;
sys-auth/pam_ldap 186&lt;br&gt;
net-nds/openldap 2.4.35&lt;br&gt;
sys-libs/pam 1.1.6&lt;br&gt;&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Dmitry Bakshaev</dc:creator><guid>https://mariadb.com/kb/en/authentication-plugin-pam/+comments/874</guid></item><item><title>Re: PAM authentication plugin</title><link>https://mariadb.com/kb/en/authentication-plugin-pam/+comments/873</link><description>&lt;p&gt;Please submit a bug report on &lt;a href="http://mariadb.org/jira"&gt;http://mariadb.org/jira&lt;/a&gt;&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Sergei Golubchik</dc:creator><guid>https://mariadb.com/kb/en/authentication-plugin-pam/+comments/873</guid></item><item><title>Re: PAM authentication plugin</title><link>https://mariadb.com/kb/en/authentication-plugin-pam/+comments/872</link><description>&lt;p&gt;we have troubles on smp/multicore systems with mariadb+pam+ldap+openssl on gentoo linux:&lt;/p&gt;
&lt;p&gt;Version: '5.5.31-MariaDB'  socket: '/var/run/mysqld/mysqld.sock'  port: 3306  Source distribution
&lt;strong&gt;* glibc detected &lt;/strong&gt;* /usr/sbin/mysqld: corrupted double-linked list: 0x00007f2088006a80 &lt;strong&gt;*&lt;/strong&gt;&lt;/p&gt;
&lt;h6 class="anchored_heading" id="backtrace"&gt;= Backtrace:&lt;/h6&gt;
&lt;p&gt;/lib64/libc.so.6(+0x793d6)[0x7f20ed3063d6]
/lib64/libc.so.6(+0x79789)[0x7f20ed306789]
/lib64/libc.so.6(+0x7a035)[0x7f20ed307035]
/usr/lib64/libcrypto.so.1.0.0(CRYPTO_free+0x1d)[0x7f2091d65254]
/usr/lib64/libssl.so.1.0.0(SSL_CTX_free+0x180)[0x7f2092034928]
/usr/lib64/libldap-2.4.so.2(ldap_int_tls_destroy+0x15)[0x7f20926ae936]
/lib64/ld-linux-x86-64.so.2(+0x12966)[0x7f20eeabb966]
/lib64/ld-linux-x86-64.so.2(+0x13423)[0x7f20eeabc423]
/lib64/ld-linux-x86-64.so.2(+0xde3f)[0x7f20eeab6e3f]
/lib64/libdl.so.2(+0x15cf)[0x7f20ede345cf]
/lib64/libdl.so.2(dlclose+0x1f)[0x7f20ede3416f]
/lib64/libpam.so.0(+0x59d6)[0x7f20932009d6]
/lib64/libpam.so.0(pam_end+0x33)[0x7f20931fe503]
/usr/lib64/mysql/plugin/auth_pam.so(+0xb6c)[0x7f2093408b6c]
/usr/sbin/mysqld[0x54bfc5]
/usr/sbin/mysqld(_Z16acl_authenticateP3THDjj+0x895)[0x55edd3]
/usr/sbin/mysqld[0x634615]
/usr/sbin/mysqld(_Z16login_connectionP3THD+0x38)[0x63562c]
/usr/sbin/mysqld(_Z22thd_prepare_connectionP3THD+0x21)[0x635c20]
/usr/sbin/mysqld(_Z24do_handle_one_connectionP3THD+0x136)[0x635fa8]
/usr/sbin/mysqld(handle_one_connection+0x42)[0x636095]
/lib64/libpthread.so.0(+0x8bbe)[0x7f20ee895bbe]
/lib64/libc.so.6(clone+0x6d)[0x7f20ed36ec9d]&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Dmitry Bakshaev</dc:creator><guid>https://mariadb.com/kb/en/authentication-plugin-pam/+comments/872</guid></item><item><title>Re: PAM authentication plugin</title><link>https://mariadb.com/kb/en/authentication-plugin-pam/+comments/871</link><description>&lt;p&gt;Very interesting. I'm using sys-libs/pam-1.1.6-r2 on Gentoo. And I don't have a shadow group. Still, I don't need hartmut's workaround, pam module works for me just fine.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Sergei Golubchik</dc:creator><guid>https://mariadb.com/kb/en/authentication-plugin-pam/+comments/871</guid></item><item><title>Re: PAM authentication plugin</title><link>https://mariadb.com/kb/en/authentication-plugin-pam/+comments/870</link><description>&lt;p&gt;Alternately, what seems to work is the following:&lt;br&gt;
Add a shadow group;&lt;br&gt;
Chgrp /etc/shadow to shadow &amp;amp; chmod to 640;&lt;br&gt;
Chgrp on /sbin/unix_chkpwd to shadow &amp;amp; chmod so that it's -rwsr-sr-x;&lt;br&gt;&lt;/p&gt;
&lt;p&gt;Whether this is more or less secure than adding the mysql user to the shadow group, I'm not entirely sure.&lt;/p&gt;
&lt;p&gt;Note that this scheme is borrowed from Ubuntu 12.04 LTS.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Shane Williams</dc:creator><guid>https://mariadb.com/kb/en/authentication-plugin-pam/+comments/870</guid></item><item><title>Re: PAM authentication plugin</title><link>https://mariadb.com/kb/en/authentication-plugin-pam/+comments/869</link><description>&lt;p&gt;This is the standard 1.1.6 (r2) ebuild on Gentoo.  /sbin/unix_chkpwd is 711 with setuid, as expected.  The relevant log entries are:&lt;/p&gt;
&lt;p&gt;Sep 30 14:51:04 hostname mysqld: pam_warn(mysql:auth): function=[pam_sm_authenticate] service=[mysql] terminal=[&amp;lt;unknown&amp;gt;] user=[shanew] ruser=[&amp;lt;unknown&amp;gt;] rhost=[&amp;lt;unknown&amp;gt;]&lt;br&gt;
Sep 30 14:51:04 hostname unix_chkpwd[3430]: check pass; user unknown&lt;br&gt;
Sep 30 14:51:04 hostname unix_chkpwd[3430]: password check failed for user (shanew)&lt;br&gt;
Sep 30 14:51:04 hostname mysqld: pam_unix(mysql:auth): authentication failure; logname=root uid=60 euid=60 tty= ruser= rhost=  user=shanew&lt;br&gt;&lt;/p&gt;
&lt;p&gt;Gentoo doesn't have a shadow group by default, so I had to create one, add mysql to it, and then alter ownership/perms on /etc/shadow accordingly.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Shane Williams</dc:creator><guid>https://mariadb.com/kb/en/authentication-plugin-pam/+comments/869</guid></item><item><title>Re: PAM authentication plugin</title><link>https://mariadb.com/kb/en/authentication-plugin-pam/+comments/868</link><description>&lt;p&gt;Interesting. What distribution are you using? Is it stock unmodified pam as it comes with your distribution?&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Sergei Golubchik</dc:creator><guid>https://mariadb.com/kb/en/authentication-plugin-pam/+comments/868</guid></item><item><title>Re: PAM authentication plugin</title><link>https://mariadb.com/kb/en/authentication-plugin-pam/+comments/867</link><description>&lt;p&gt;Can someone clarify "new" vs. "old" PAM?&lt;/p&gt;
&lt;p&gt;I'm running 1.1.6, and I had to do the same as hartmut-php to make this work.  It's better than running Maria as root, but still doesn't seem like it should be necessary to use pam_unix.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Shane Williams</dc:creator><guid>https://mariadb.com/kb/en/authentication-plugin-pam/+comments/867</guid></item><item><title>Re: PAM authentication plugin</title><link>https://mariadb.com/kb/en/authentication-plugin-pam/+comments/866</link><description>&lt;p&gt;Some caveats I came across:&lt;/p&gt;
&lt;p&gt;If you are using a non-default PATH and LD_LIBRARY_PATH for your MySQL/MariaDB command line clients, you must specify the plugin-dir variable either in your connection string, or in your /.my.cnf i.e:&lt;/p&gt;
&lt;p&gt;[client]&lt;/p&gt;
&lt;p&gt;plugin-dir = /path/to/basedir/lib/plugin&lt;/p&gt;
&lt;p&gt;JDBC requries you to use the cleartext method insteadof dialog, which in turn requires SSL connections, more can be found here:&lt;/p&gt;
&lt;p&gt;&lt;a href="http://dev.mysql.com/doc/refman/5.5/en/connector-j-using-pam.html"&gt;http://dev.mysql.com/doc/refman/5.5/en/connector-j-using-pam.html&lt;/a&gt;&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Richard Bensley</dc:creator><guid>https://mariadb.com/kb/en/authentication-plugin-pam/+comments/866</guid></item><item><title>Re: PAM authentication plugin</title><link>https://mariadb.com/kb/en/authentication-plugin-pam/+comments/714</link><description>&lt;p&gt;This happens if you have old PAM installation, newer ones have a suid utility unix_chkpwd, and don't require the client application to be able to read /etc/shadow&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Sergei Golubchik</dc:creator><guid>https://mariadb.com/kb/en/authentication-plugin-pam/+comments/714</guid></item><item><title>Re: PAM authentication plugin</title><link>https://mariadb.com/kb/en/authentication-plugin-pam/+comments/544</link><description>&lt;p&gt;there's a link in the beginning of the article. at the moment only HeidiSQL supports dialog client plugin (which is needed for the PAM server plugin).&lt;/p&gt;
&lt;p&gt;You can ask the corresponding vendors to add support for "dialog" plugin to Mysql Workbench or Sequel Pro.&lt;/p&gt;
&lt;p&gt;Alternatively, if your PAM configuration only asks for a password, then no special GUI support is required, it should work with any client, as far as I remember.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Sergei Golubchik</dc:creator><guid>https://mariadb.com/kb/en/authentication-plugin-pam/+comments/544</guid></item><item><title>Re: PAM authentication plugin</title><link>https://mariadb.com/kb/en/authentication-plugin-pam/+comments/543</link><description>&lt;p&gt;I cannot get any GUI clients to work with the auth_pam plugin.  Neither Mysql Workbench nor Sequel Pro.  Are there any that do work?  And are there known fixes for the two above i mention?&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Fred Faloona</dc:creator><guid>https://mariadb.com/kb/en/authentication-plugin-pam/+comments/543</guid></item><item><title>Re: PAM authentication plugin</title><link>https://mariadb.com/kb/en/authentication-plugin-pam/+comments/334</link><description>&lt;p&gt;I needed to add the "mysql" user to the "shadow" group in /etc/group to make simple pam_unix based authentication work, without that i just got this in /var/log/auth.log :&lt;/p&gt;
&lt;p&gt;Jul  4 12:16:45 hartmut-laptop2 unix_chkpwd[7446]: check pass; user unknown
Jul  4 12:16:45 hartmut-laptop2 unix_chkpwd[7446]: password check failed for user (hartmut)&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Hartmut Holzgraefe</dc:creator><guid>https://mariadb.com/kb/en/authentication-plugin-pam/+comments/334</guid></item></channel></rss>