



<!DOCTYPE html>
<html>
<head data-cookie-domain=""
      data-cookie-path="/">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="apple-touch-icon" sizes="180x180" href="/kb/static/images/favicons/apple-touch-icon.159e713979be.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/kb/static/images/favicons/favicon-32x32.bc0ac1d5d11e.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/kb/static/images/favicons/favicon-16x16.5801f8f0f34e.png">
    <link rel="shortcut icon" href="/kb/static/images/favicons/favicon.d122d305dee4.ico" type="image/x-icon" />

    <title>
Comments - Authentication Plugin - PAM
 - MariaDB Knowledge Base</title>

    <link href="/kb/static/css/main.f7633538c846.css" rel="stylesheet" type="text/css" />

    

    
        <meta name="robots" content="noindex, nofollow" />
    

    <!-- FB Open Graph tags -->
    <meta property="og:title" content="
Comments - Authentication Plugin - PAM
" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://mariadb.com/kb/en/authentication-plugin-pam/+comments" />
    <meta property="og:image" content="http://mariadb.comaskmonty-logo.png" />
    <meta property="og:site_name" content="MariaDB KnowledgeBase" />
    <meta property="fb:admins" content="514852603" />
    <meta property="og:description" content="" />

    <meta name="description" content="" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="//fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet"/>
    
</head>
<body class="mpkb nodes node_comments jqui" id="node_comments">





<div id="menu-mobile" class="visible-sm visible-xs">

    <div>
        <div id="mobile-close-menu" class="text-right">
            <a href="javascript:void(0)" title="Close Menu" id="back-main" class="toggle-menu">X<span></span></a>
        </div>
    </div>
    <div class="mainmenu-mobile">
        <ul class="ls-none ul-menu">
            <li data-sub="submenu5"><a class="open-form-search" href="/kb/search/" title="Search">Search </a></li>
            <li data-sub="submenu0"><a href="/products" title="Products">Products</a><span class="arrow-main"></span></li>
            <li data-sub="submenu1"><a href="/services" title="Services">Services</a><span class="arrow-main"></span></li>
            <li data-sub="submenu2"><a href="/resources" title="Resources">Resources</a><span class="arrow-main"></span></li>
            <li data-sub="submenu3"><a href="/about-us" title="About">About</a><span class="arrow-main"></span></li>
            <li data-sub="submenu4"><a href="/contact" title="Contact">Contact</a></li>
        </ul>
    </div>

    <div class="nav-top-mobile">
        <div class="select-box form">

            <ul class="inline-block-md mb-none top-nav">
                <li>

                </li>
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/authentication-plugin-pam/+comments"> Login</a>
                    </li>
                
            </ul>



        </div>
        <p class="text-center copyright">Copyright &copy; 2025 MariaDB. All rights reserved.</p>
    </div>
</div>
<div class="violator-wrap d-none" id="top_violator">
    <div class="container">
        <div class="row">
            <div class="col-xs-12 col-sm-12">
                <div class="violator-outer">
                    <div class="violator-inner">
                        <div class="row">
                            <div class="col-xs-12 col-sm-9 col-lg-7 col-lg-offset-2" id="top_violator_content">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="content-link" target="_blank" rel="nofollow noreferrer">
                                    <span>The Ultimate Guide to High Availability with MariaDB</span>
                                </a>
                            </div>
                            <div class="col-xs-12 col-sm-3" id="top_violator_cta">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="btn btn-mariadb" target="_blank" rel="nofollow noreferrer">Download Now</a>
                            </div>
                        </div>
                    </div>
                    <button type="button" class="btn btn-link close-btn">
                        <svg xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 24 24" width="15px" height="15px"><path d="M 4.9902344 3.9902344 A 1.0001 1.0001 0 0 0 4.2929688 5.7070312 L 10.585938 12 L 4.2929688 18.292969 A 1.0001 1.0001 0 1 0 5.7070312 19.707031 L 12 13.414062 L 18.292969 19.707031 A 1.0001 1.0001 0 1 0 19.707031 18.292969 L 13.414062 12 L 19.707031 5.7070312 A 1.0001 1.0001 0 0 0 18.980469 3.9902344 A 1.0001 1.0001 0 0 0 18.292969 4.2929688 L 12 10.585938 L 5.7070312 4.2929688 A 1.0001 1.0001 0 0 0 4.9902344 3.9902344 z"/></svg>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="wrapper">
<div id="top-nav">
    <div class="container">
        <ul class="hidden-sm hidden-xs" >
            <li><a href="https://mariadb.com/kb/">Knowledge Base</a></li>
            <li><a href="https://mariadb.com/contact/">Contact</a></li>
            
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/authentication-plugin-pam/+comments" rel="nofollow">Login</a>
                    </li>
                
            
            
            <li id="search-form">
                <form action="/kb/en/+search/" method="get" id="search-block-form" accept-charset="UTF-8">
                    <input id="search" title="Enter the terms you wish to search for."
                           placeholder="Search . . ." type="text"
                           name="q" value="" size="15" maxlength="128" class="form-text"
                           data-autocomplete-url="/kb/en/+search/autocomplete/">
                    <input type="hidden" name="quick" value="1" />
                    <input type="hidden" name="source" value="kb" />
                </form>
            </li>
            <li><a id="search-toggler" href="/kb/search/">Search</a></li>
            
        </ul>
    </div>
</div>
<div id="navbar-bottom" class="navbar">
    <div class="container">
        
        
        
        
        <div class="row">
            <div class="col-md-3 col-sm-9 col-xs-9">
                <a class="brand" href="/" title="MariaDB">
                    <img src="/kb/static/images/logo-2018-black.95f5978ae14d.png">
                </a>
            </div>
            <div class="col-md-9 hidden-sm hidden-xs">
                <div class="main-menu">
                    <ul id="main-menu" class="nav navbar-nav inline-block-sm">
    <li class="has-sub full-menu">
        <a href="/products" title="Products">Products</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/services" title="Services">Services</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/pricing" title="Pricing">Pricing</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/resources" title="Resources">Resources</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/about-us" title="About Us">About Us</a>
    </li>
    <li class="">
        <a class="button electric-eel small top-bar-right-download" href="/downloads/">Download</a>
    </li>
</ul>
                </div>
            </div>
            <div class="col-md-3 visible-sm visible-xs col-sm-3 col-xs-3 ps-rv">
                <div class="navbar-header text-right pull-right">
                    <button type="button" class="menu-control toggle-menu" id="open-menu">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="main">
    <div class="container">
        

        <div id="subheader1" class="clearfix">
            <div class="pull-left">
                
                <div id="breadcrumbs" class="breadcrumb">
                    <a href="/kb/en/">Knowledge Base</a>
                    


    
    » <a class="crumb" href="/kb/en/documentation/">MariaDB Server Documentation</a>
    

    
    » <a class="crumb" href="/kb/en/columns-storage-engines-and-plugins/">Columns, Storage Engines, and Plugins</a>
    

    
    » <a class="crumb" href="/kb/en/plugins/">Plugins</a>
    

    
    » <a class="crumb" href="/kb/en/authentication-plugins/">Authentication Plugins</a>
    

    
    » <a class="crumb" href="/kb/en/authentication-with-pluggable-authentication-modules-pam/">Authentication with Pluggable Authentication Modules (PAM)</a>
    


    » <a class="node_link crumb" href="/kb/en/authentication-plugin-pam/">Authentication Plugin - PAM</a>


                </div>
                
            </div>
        </div>
    </div>
    <div class="container" id="container-main">
        <div class="row">
            
            
            
            
            
            <section id="content" class="limited_width col-md-12 clearfix">
                
                    <h1>
Comments - Authentication Plugin - PAM
</h1>
                

                



                <div>
                    
<div id="comments" data-node-id="1894" data-comments-url="/kb/en/authentication-plugin-pam/+comments"
        data-reply-url="/kb/en/authentication-plugin-pam/comments/post/">
<div class="comment_top_menu hidden-print">&nbsp;
            <div class="pull-right">
                <label>
                    Include Archived
                    <input id="include_archived" type="checkbox" name="include_archived" value="1"
                           />
                </label>
            </div>
        </div>
        <a name="comment_2067"></a>
        <div class="comment approved" style="margin-left: 0px">
            <div class="info">
                

<span class="datetime" title="2016-03-01 21:07">8 years, 11 months ago</span>
                
<span class="user" id="user-3676">
<a href="/kb/user/id/3676" title="Sanjay Kumar Raghavendra">Sanjay Kumar Raghavendra</a>
</span>
            </div>
            <div class="title">
                <a href="#comment_2067">Re: PAM Authentication Plugin</a>
                
            </div><div class="comment_text">
                <p>I am attempting to install PAM plugin for MySQL 5.7 Community server however when I invoke the command INSTALL SONAME 'auth_pam', I get the following error:</p>
<p>mysql&gt; INSTALL SONAME 'auth_pam';
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'SONAME 'auth_pam'' at line 1</p>
<p>The auth_pam.so was already copied to plugin_dir location. I even tried adding the variable plugin_load to mysqld section in my.cnf. However when I do show plugin, I don't see this plugin getting listed.</p>
<p>Do I need to do anything additional besides the above step? </p>

            </div>
            <div class="comment_actions hidden-print">
                
                
                &nbsp;

                <div class="pull-right">
                    
                    <a class="flag btn btn-mini" href="/kb/en/authentication-plugin-pam/+comments/2067/flag"
                       data-flag-url="/kb/en/authentication-plugin-pam/+comments/2067/flag"
                            title="Flag as Spam/Inappropriate">
                        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                        </a>
                    
                    
                    
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
        <a name="comment_2069"></a>
        <div class="comment approved" style="margin-left: 10px">
            <div class="info">
                

<span class="datetime" title="2016-03-02 06:56">8 years, 11 months ago</span>
                
<span class="user" id="user-27">
<a href="/kb/user/id/27" title="Sergei Golubchik">Sergei Golubchik</a>
</span>
            </div>
            <div class="title">
                <a href="#comment_2069">Re: PAM Authentication Plugin</a>
                
            </div><div class="comment_text">
                <p><code>INSTALL SONAME</code> is MariaDB feature, in MySQL you should use <code>INSTALL PLUGIN</code>.</p>
<p>PAM plugin might not work even if you will use the correct statement. Try to compile it for 5.7. And even that might not help.</p>

            </div>
            <div class="comment_actions hidden-print">
                
                
                &nbsp;

                <div class="pull-right">
                    
                    <a class="flag btn btn-mini" href="/kb/en/authentication-plugin-pam/+comments/2069/flag"
                       data-flag-url="/kb/en/authentication-plugin-pam/+comments/2069/flag"
                            title="Flag as Spam/Inappropriate">
                        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                        </a>
                    
                    
                    
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
        
    

    

    
        <a name="comment_2053"></a>
        <div class="comment approved" style="margin-left: 0px">
            <div class="info">
                

<span class="datetime" title="2016-02-26 15:30">8 years, 11 months ago</span>
                
<span class="user" id="user-3241">
<a href="/kb/user/id/3241" title="Jerry Lin">Jerry Lin</a>
</span>
            </div>
            <div class="title">
                <a href="#comment_2053">Re: PAM Authentication Plugin</a>
                
            </div><div class="comment_text">
                <p>Hi,
Where could I download the newer version of PAM plugin?</p>

            </div>
            <div class="comment_actions hidden-print">
                
                
                &nbsp;

                <div class="pull-right">
                    
                    <a class="flag btn btn-mini" href="/kb/en/authentication-plugin-pam/+comments/2053/flag"
                       data-flag-url="/kb/en/authentication-plugin-pam/+comments/2053/flag"
                            title="Flag as Spam/Inappropriate">
                        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                        </a>
                    
                    
                    
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
        <a name="comment_2054"></a>
        <div class="comment approved" style="margin-left: 10px">
            <div class="info">
                

<span class="datetime" title="2016-02-26 15:58">8 years, 11 months ago</span>
                
<span class="user" id="user-27">
<a href="/kb/user/id/27" title="Sergei Golubchik">Sergei Golubchik</a>
</span>
            </div>
            <div class="title">
                <a href="#comment_2054">Re: PAM Authentication Plugin</a>
                
            </div><div class="comment_text">
                <p>Together with the newer version of MariaDB Server</p>

            </div>
            <div class="comment_actions hidden-print">
                
                
                &nbsp;

                <div class="pull-right">
                    
                    <a class="flag btn btn-mini" href="/kb/en/authentication-plugin-pam/+comments/2054/flag"
                       data-flag-url="/kb/en/authentication-plugin-pam/+comments/2054/flag"
                            title="Flag as Spam/Inappropriate">
                        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                        </a>
                    
                    
                    
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
        <a name="comment_2057"></a>
        <div class="comment approved" style="margin-left: 20px">
            <div class="info">
                

<span class="datetime" title="2016-02-27 09:50">8 years, 11 months ago</span>
                
<span class="user" id="user-3241">
<a href="/kb/user/id/3241" title="Jerry Lin">Jerry Lin</a>
</span>
            </div>
            <div class="title">
                <a href="#comment_2057">Re: PAM Authentication Plugin</a>
                
            </div><div class="comment_text">
                <p>Hi,
I want to use pam_unix.so not run as root .
Which version of MariaDB Server can do it ?</p>

            </div>
            <div class="comment_actions hidden-print">
                
                
                &nbsp;

                <div class="pull-right">
                    
                    <a class="flag btn btn-mini" href="/kb/en/authentication-plugin-pam/+comments/2057/flag"
                       data-flag-url="/kb/en/authentication-plugin-pam/+comments/2057/flag"
                            title="Flag as Spam/Inappropriate">
                        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                        </a>
                    
                    
                    
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
        <a name="comment_2060"></a>
        <div class="comment approved" style="margin-left: 30px">
            <div class="info">
                

<span class="datetime" title="2016-02-27 11:09">8 years, 11 months ago</span>
                
<span class="user" id="user-1368">
<a href="/kb/user/id/1368" title="Ian Gilfillan">Ian Gilfillan</a>
</span>
            </div>
            <div class="title">
                <a href="#comment_2060">Re: PAM Authentication Plugin</a>
                
            </div><div class="comment_text">
                <p>This has been the case since 2011, however see <a href="https://jira.mariadb.org/browse/MDEV-7032">MDEV-7032</a>.</p>

            </div>
            <div class="comment_actions hidden-print">
                
                
                &nbsp;

                <div class="pull-right">
                    
                    <a class="flag btn btn-mini" href="/kb/en/authentication-plugin-pam/+comments/2060/flag"
                       data-flag-url="/kb/en/authentication-plugin-pam/+comments/2060/flag"
                            title="Flag as Spam/Inappropriate">
                        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                        </a>
                    
                    
                    
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
        
    

    

    

    

    
        <a name="comment_1602"></a>
        <div class="comment approved" style="margin-left: 0px">
            <div class="info">
                

<span class="datetime" title="2015-07-02 22:32">9 years, 6 months ago</span>
                
<span class="user" id="user-2771">
<a href="/kb/user/id/2771" title="Troels Arvin">Troels Arvin</a>
</span>
            </div>
            <div class="title">
                <a href="#comment_1602">Re: PAM Authentication Plugin</a>
                
            </div><div class="comment_text">
                <p>With the MariaDB included with RHEL 7, I could not get it working, unless I called the pam file /etc/pam.d/mysql (and not /etc/pam.d/mariadb).</p>

            </div>
            <div class="comment_actions hidden-print">
                
                
                &nbsp;

                <div class="pull-right">
                    
                    <a class="flag btn btn-mini" href="/kb/en/authentication-plugin-pam/+comments/1602/flag"
                       data-flag-url="/kb/en/authentication-plugin-pam/+comments/1602/flag"
                            title="Flag as Spam/Inappropriate">
                        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                        </a>
                    
                    
                    
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
        <a name="comment_1608"></a>
        <div class="comment approved" style="margin-left: 10px">
            <div class="info">
                

<span class="datetime" title="2015-07-15 15:09">9 years, 6 months ago</span>
                
<span class="user" id="user-27">
<a href="/kb/user/id/27" title="Sergei Golubchik">Sergei Golubchik</a>
</span>
            </div>
            <div class="title">
                <a href="#comment_1608">Re: PAM Authentication Plugin</a>
                
            </div><div class="comment_text">
                <p>You can call it anything you want. But you need to specify the name of the file (in PAM language it's called the <em>service</em>) with the <code>USING</code> clause. By default the <code>mysql</code> file is used. It's explained above, read from “Optionally, you can specify a PAM service name…”</p>

            </div>
            <div class="comment_actions hidden-print">
                
                
                &nbsp;

                <div class="pull-right">
                    
                    <a class="flag btn btn-mini" href="/kb/en/authentication-plugin-pam/+comments/1608/flag"
                       data-flag-url="/kb/en/authentication-plugin-pam/+comments/1608/flag"
                            title="Flag as Spam/Inappropriate">
                        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                        </a>
                    
                    
                    
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
        
    

    

    
        <a name="comment_1516"></a>
        <div class="comment approved" style="margin-left: 0px">
            <div class="info">
                

<span class="datetime" title="2015-04-07 20:06">9 years, 9 months ago</span>
                
<span class="user" id="user-2655">
<a href="/kb/user/id/2655" title="M G">M G</a>
</span>
            </div>
            <div class="title">
                <a href="#comment_1516">Re: PAM Authentication Plugin</a>
                
            </div><div class="comment_text">
                <p>This worked with Centrify using this configuration for /etc/pam.d/mysql:</p>
<pre>
auth include system-auth 
account required pam_nologin.so 
account include system-auth 
password include system-auth 
session optional pam_keyinit.so force revoke 
session include system-auth 
session required pam_loginuid.so 
</pre>
<p>Thanks to <a href="http://forums.mysql.com/read.php?30,604795,606085#msg-606085">http://forums.mysql.com/read.php?30,604795,606085#msg-606085</a> for the solution</p>

            </div>
            <div class="comment_actions hidden-print">
                
                
                &nbsp;

                <div class="pull-right">
                    
                    <a class="flag btn btn-mini" href="/kb/en/authentication-plugin-pam/+comments/1516/flag"
                       data-flag-url="/kb/en/authentication-plugin-pam/+comments/1516/flag"
                            title="Flag as Spam/Inappropriate">
                        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                        </a>
                    
                    
                    
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
        
    

    
        <a name="comment_1514"></a>
        <div class="comment approved" style="margin-left: 0px">
            <div class="info">
                

<span class="datetime" title="2015-04-06 10:51">9 years, 9 months ago</span>
                
<span class="user" id="user-2373">
<a href="/kb/user/id/2373" title="Jayakumar Athinarayanasamy">Jayakumar Athinarayanasamy</a>
</span>
            </div>
            <div class="title">
                <a href="#comment_1514">Re: PAM Authentication Plugin</a>
                
            </div><div class="comment_text">
                <p>Thank you. I’m trying to configure the LDAP authentication for MariaDB on SUSE 11 SP1, but somewhat not able to connect; even it does not give much logging both in Mysql n linux log/message; it would be great if someone put me into the right info how to configure the ldap auth for MariaDB or how to debug or correct me w/ the right set of config.</p>
<p>Below are the client n db server version
mysql  Ver 15.1 Distrib 10.0.13-MariaDB, for Linux (x86_64) using readline 5.1
MariaDB Server version          10.0.13-MariaDB  with Protocol version        10</p>
<p>I follow the below pattern for PAM n LDAP config…</p>
<p>plugin-load=auth_pam.so
...
/etc/pam.d/mysql:
auth required pam_ldap.so config=/etc/ldap_mysql.conf debug
account required pam_ldap.so config=/etc/ldap_mysql.conf debug
/etc/ldap_mysql.conf:</p>
<p>host &gt;hostname&lt;
Port &lt;&gt;
Base
Bindn
bindpw</p>
<p>with the above configuration I’m able to get the required AD attributes using ldapsearch</p>

            </div>
            <div class="comment_actions hidden-print">
                
                
                &nbsp;

                <div class="pull-right">
                    
                    <a class="flag btn btn-mini" href="/kb/en/authentication-plugin-pam/+comments/1514/flag"
                       data-flag-url="/kb/en/authentication-plugin-pam/+comments/1514/flag"
                            title="Flag as Spam/Inappropriate">
                        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                        </a>
                    
                    
                    
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
        
    

    
        <a name="comment_1120"></a>
        <div class="comment approved" style="margin-left: 0px">
            <div class="info">
                

<span class="datetime" title="2014-03-17 11:54">10 years, 10 months ago</span>
                
<span class="user" id="user-2166">
<a href="/kb/user/id/2166" title="Stephanie Locke">Stephanie Locke</a>
</span>
            </div>
            <div class="title">
                <a href="#comment_1120">Re: PAM authentication plugin</a>
                
            </div><div class="comment_text">
                <p>Details on how to revert back to normal authentication would be very handy</p>

            </div>
            <div class="comment_actions hidden-print">
                
                
                &nbsp;

                <div class="pull-right">
                    
                    <a class="flag btn btn-mini" href="/kb/en/authentication-plugin-pam/+comments/1120/flag"
                       data-flag-url="/kb/en/authentication-plugin-pam/+comments/1120/flag"
                            title="Flag as Spam/Inappropriate">
                        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                        </a>
                    
                    
                    
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
        <a name="comment_1121"></a>
        <div class="comment approved" style="margin-left: 10px">
            <div class="info">
                

<span class="datetime" title="2014-03-17 12:08">10 years, 10 months ago</span>
                
<span class="user" id="user-982">
<a href="/kb/user/id/982" title="Federico Razzoli">Federico Razzoli</a>
</span>
            </div>
            <div class="title">
                <a href="#comment_1121">Re: PAM authentication plugin</a>
                
            </div><div class="comment_text">
                <p>mysql_native_password plugin.</p>

            </div>
            <div class="comment_actions hidden-print">
                
                
                &nbsp;

                <div class="pull-right">
                    
                    <a class="flag btn btn-mini" href="/kb/en/authentication-plugin-pam/+comments/1121/flag"
                       data-flag-url="/kb/en/authentication-plugin-pam/+comments/1121/flag"
                            title="Flag as Spam/Inappropriate">
                        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                        </a>
                    
                    
                    
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
        
    

    

    
        <a name="comment_872"></a>
        <div class="comment approved" style="margin-left: 0px">
            <div class="info">
                

<span class="datetime" title="2013-10-01 16:22">11 years, 3 months ago</span>
                
<span class="user" id="user-1845">
<a href="/kb/user/id/1845" title="Dmitry Bakshaev">Dmitry Bakshaev</a>
</span>
            </div>
            <div class="title">
                <a href="#comment_872">Re: PAM authentication plugin</a>
                
            </div><div class="comment_text">
                <p>we have troubles on smp/multicore systems with mariadb+pam+ldap+openssl on gentoo linux:</p>
<p>Version: '5.5.31-MariaDB'  socket: '/var/run/mysqld/mysqld.sock'  port: 3306  Source distribution
<strong>* glibc detected </strong>* /usr/sbin/mysqld: corrupted double-linked list: 0x00007f2088006a80 <strong>*</strong></p>
<h6 class="anchored_heading" id="backtrace">= Backtrace:</h6>
<p>/lib64/libc.so.6(+0x793d6)[0x7f20ed3063d6]
/lib64/libc.so.6(+0x79789)[0x7f20ed306789]
/lib64/libc.so.6(+0x7a035)[0x7f20ed307035]
/usr/lib64/libcrypto.so.1.0.0(CRYPTO_free+0x1d)[0x7f2091d65254]
/usr/lib64/libssl.so.1.0.0(SSL_CTX_free+0x180)[0x7f2092034928]
/usr/lib64/libldap-2.4.so.2(ldap_int_tls_destroy+0x15)[0x7f20926ae936]
/lib64/ld-linux-x86-64.so.2(+0x12966)[0x7f20eeabb966]
/lib64/ld-linux-x86-64.so.2(+0x13423)[0x7f20eeabc423]
/lib64/ld-linux-x86-64.so.2(+0xde3f)[0x7f20eeab6e3f]
/lib64/libdl.so.2(+0x15cf)[0x7f20ede345cf]
/lib64/libdl.so.2(dlclose+0x1f)[0x7f20ede3416f]
/lib64/libpam.so.0(+0x59d6)[0x7f20932009d6]
/lib64/libpam.so.0(pam_end+0x33)[0x7f20931fe503]
/usr/lib64/mysql/plugin/auth_pam.so(+0xb6c)[0x7f2093408b6c]
/usr/sbin/mysqld[0x54bfc5]
/usr/sbin/mysqld(_Z16acl_authenticateP3THDjj+0x895)[0x55edd3]
/usr/sbin/mysqld[0x634615]
/usr/sbin/mysqld(_Z16login_connectionP3THD+0x38)[0x63562c]
/usr/sbin/mysqld(_Z22thd_prepare_connectionP3THD+0x21)[0x635c20]
/usr/sbin/mysqld(_Z24do_handle_one_connectionP3THD+0x136)[0x635fa8]
/usr/sbin/mysqld(handle_one_connection+0x42)[0x636095]
/lib64/libpthread.so.0(+0x8bbe)[0x7f20ee895bbe]
/lib64/libc.so.6(clone+0x6d)[0x7f20ed36ec9d]</p>

            </div>
            <div class="comment_actions hidden-print">
                
                
                &nbsp;

                <div class="pull-right">
                    
                    <a class="flag btn btn-mini" href="/kb/en/authentication-plugin-pam/+comments/872/flag"
                       data-flag-url="/kb/en/authentication-plugin-pam/+comments/872/flag"
                            title="Flag as Spam/Inappropriate">
                        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                        </a>
                    
                    
                    
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
        <a name="comment_874"></a>
        <div class="comment approved" style="margin-left: 10px">
            <div class="info">
                

<span class="datetime" title="2013-10-01 16:35">11 years, 3 months ago</span>
                
<span class="user" id="user-1845">
<a href="/kb/user/id/1845" title="Dmitry Bakshaev">Dmitry Bakshaev</a>
</span>
            </div>
            <div class="title">
                <a href="#comment_874">Re: PAM authentication plugin</a>
                
            </div><div class="comment_text">
                <p>details:</p>
<p>/etc/mysql/my.cnf:<br>
...<br>
[mysqld]<br>
plugin-load=auth_pam.so<br>
...<br></p>
<p>/etc/pam.d/mysql:<br>
auth            required        pam_ldap.so config=/etc/ldap_mysql.conf debug<br>
account         required        pam_ldap.so config=/etc/ldap_mysql.conf debug<br></p>
<p>/etc/ldap_mysql.conf:<br>
uri ldaps:<em>ldap.xxx ldaps:</em>ldap2.xxx<br>
ssl on<br>
scope sub<br></p>
<p>software versions:<br>
dev-db/<a href="/kb/en/mariadb-5531-release-notes/">mariadb 5.5.31</a><br>
sys-auth/pam_ldap 186<br>
net-nds/openldap 2.4.35<br>
sys-libs/pam 1.1.6<br></p>

            </div>
            <div class="comment_actions hidden-print">
                
                
                &nbsp;

                <div class="pull-right">
                    
                    <a class="flag btn btn-mini" href="/kb/en/authentication-plugin-pam/+comments/874/flag"
                       data-flag-url="/kb/en/authentication-plugin-pam/+comments/874/flag"
                            title="Flag as Spam/Inappropriate">
                        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                        </a>
                    
                    
                    
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
        
    

    
        <a name="comment_873"></a>
        <div class="comment approved" style="margin-left: 10px">
            <div class="info">
                

<span class="datetime" title="2013-10-01 16:29">11 years, 3 months ago</span>
                
<span class="user" id="user-27">
<a href="/kb/user/id/27" title="Sergei Golubchik">Sergei Golubchik</a>
</span>
            </div>
            <div class="title">
                <a href="#comment_873">Re: PAM authentication plugin</a>
                
            </div><div class="comment_text">
                <p>Please submit a bug report on <a href="http://mariadb.org/jira">http://mariadb.org/jira</a></p>

            </div>
            <div class="comment_actions hidden-print">
                
                
                &nbsp;

                <div class="pull-right">
                    
                    <a class="flag btn btn-mini" href="/kb/en/authentication-plugin-pam/+comments/873/flag"
                       data-flag-url="/kb/en/authentication-plugin-pam/+comments/873/flag"
                            title="Flag as Spam/Inappropriate">
                        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                        </a>
                    
                    
                    
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
        <a name="comment_875"></a>
        <div class="comment approved" style="margin-left: 20px">
            <div class="info">
                

<span class="datetime" title="2013-10-01 16:47">11 years, 3 months ago</span>
                
<span class="user" id="user-1845">
<a href="/kb/user/id/1845" title="Dmitry Bakshaev">Dmitry Bakshaev</a>
</span>
            </div>
            <div class="title">
                <a href="#comment_875">Re: PAM authentication plugin</a>
                
            </div><div class="comment_text">
                <p><a href="https://mariadb.atlassian.net/browse/MDEV-5090">https://mariadb.atlassian.net/browse/MDEV-5090</a></p>
<p>thanx! done!</p>

            </div>
            <div class="comment_actions hidden-print">
                
                
                &nbsp;

                <div class="pull-right">
                    
                    <a class="flag btn btn-mini" href="/kb/en/authentication-plugin-pam/+comments/875/flag"
                       data-flag-url="/kb/en/authentication-plugin-pam/+comments/875/flag"
                            title="Flag as Spam/Inappropriate">
                        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                        </a>
                    
                    
                    
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
        
    

    

    

    
        <a name="comment_866"></a>
        <div class="comment approved" style="margin-left: 0px">
            <div class="info">
                

<span class="datetime" title="2013-09-30 15:55">11 years, 3 months ago</span>
                
<span class="user" id="user-1838">
<a href="/kb/user/id/1838" title="Richard Bensley">Richard Bensley</a>
</span>
            </div>
            <div class="title">
                <a href="#comment_866">Re: PAM authentication plugin</a>
                
            </div><div class="comment_text">
                <p>Some caveats I came across:</p>
<p>If you are using a non-default PATH and LD_LIBRARY_PATH for your MySQL/MariaDB command line clients, you must specify the plugin-dir variable either in your connection string, or in your /.my.cnf i.e:</p>
<p>[client]</p>
<p>plugin-dir = /path/to/basedir/lib/plugin</p>
<p>JDBC requries you to use the cleartext method insteadof dialog, which in turn requires SSL connections, more can be found here:</p>
<p><a href="http://dev.mysql.com/doc/refman/5.5/en/connector-j-using-pam.html">http://dev.mysql.com/doc/refman/5.5/en/connector-j-using-pam.html</a></p>

            </div>
            <div class="comment_actions hidden-print">
                
                
                &nbsp;

                <div class="pull-right">
                    
                    <a class="flag btn btn-mini" href="/kb/en/authentication-plugin-pam/+comments/866/flag"
                       data-flag-url="/kb/en/authentication-plugin-pam/+comments/866/flag"
                            title="Flag as Spam/Inappropriate">
                        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                        </a>
                    
                    
                    
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
        
    

    
        <a name="comment_543"></a>
        <div class="comment approved" style="margin-left: 0px">
            <div class="info">
                

<span class="datetime" title="2013-04-29 22:31">11 years, 9 months ago</span>
                
<span class="user" id="user-1492">
<a href="/kb/user/id/1492" title="Fred Faloona">Fred Faloona</a>
</span>
            </div>
            <div class="title">
                <a href="#comment_543">Re: PAM authentication plugin</a>
                
            </div><div class="comment_text">
                <p>I cannot get any GUI clients to work with the auth_pam plugin.  Neither Mysql Workbench nor Sequel Pro.  Are there any that do work?  And are there known fixes for the two above i mention?</p>

            </div>
            <div class="comment_actions hidden-print">
                
                
                &nbsp;

                <div class="pull-right">
                    
                    <a class="flag btn btn-mini" href="/kb/en/authentication-plugin-pam/+comments/543/flag"
                       data-flag-url="/kb/en/authentication-plugin-pam/+comments/543/flag"
                            title="Flag as Spam/Inappropriate">
                        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                        </a>
                    
                    
                    
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
        <a name="comment_544"></a>
        <div class="comment approved" style="margin-left: 10px">
            <div class="info">
                

<span class="datetime" title="2013-04-30 18:07">11 years, 9 months ago</span>
                
<span class="user" id="user-27">
<a href="/kb/user/id/27" title="Sergei Golubchik">Sergei Golubchik</a>
</span>
            </div>
            <div class="title">
                <a href="#comment_544">Re: PAM authentication plugin</a>
                
            </div><div class="comment_text">
                <p>there's a link in the beginning of the article. at the moment only HeidiSQL supports dialog client plugin (which is needed for the PAM server plugin).</p>
<p>You can ask the corresponding vendors to add support for "dialog" plugin to Mysql Workbench or Sequel Pro.</p>
<p>Alternatively, if your PAM configuration only asks for a password, then no special GUI support is required, it should work with any client, as far as I remember.</p>

            </div>
            <div class="comment_actions hidden-print">
                
                
                &nbsp;

                <div class="pull-right">
                    
                    <a class="flag btn btn-mini" href="/kb/en/authentication-plugin-pam/+comments/544/flag"
                       data-flag-url="/kb/en/authentication-plugin-pam/+comments/544/flag"
                            title="Flag as Spam/Inappropriate">
                        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                        </a>
                    
                    
                    
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
        
    

    

    
        <a name="comment_334"></a>
        <div class="comment approved" style="margin-left: 0px">
            <div class="info">
                

<span class="datetime" title="2012-07-04 10:29">12 years, 6 months ago</span>
                
<span class="user" id="user-903">
<a href="/kb/user/id/903" title="Hartmut Holzgraefe">Hartmut Holzgraefe</a>
</span>
            </div>
            <div class="title">
                <a href="#comment_334">Re: PAM authentication plugin</a>
                
            </div><div class="comment_text">
                <p>I needed to add the "mysql" user to the "shadow" group in /etc/group to make simple pam_unix based authentication work, without that i just got this in /var/log/auth.log :</p>
<p>Jul  4 12:16:45 hartmut-laptop2 unix_chkpwd[7446]: check pass; user unknown
Jul  4 12:16:45 hartmut-laptop2 unix_chkpwd[7446]: password check failed for user (hartmut)</p>

            </div>
            <div class="comment_actions hidden-print">
                
                
                &nbsp;

                <div class="pull-right">
                    
                    <a class="flag btn btn-mini" href="/kb/en/authentication-plugin-pam/+comments/334/flag"
                       data-flag-url="/kb/en/authentication-plugin-pam/+comments/334/flag"
                            title="Flag as Spam/Inappropriate">
                        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                        </a>
                    
                    
                    
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
        <a name="comment_714"></a>
        <div class="comment approved" style="margin-left: 10px">
            <div class="info">
                

<span class="datetime" title="2013-07-17 10:23">11 years, 6 months ago</span>
                
<span class="user" id="user-27">
<a href="/kb/user/id/27" title="Sergei Golubchik">Sergei Golubchik</a>
</span>
            </div>
            <div class="title">
                <a href="#comment_714">Re: PAM authentication plugin</a>
                
            </div><div class="comment_text">
                <p>This happens if you have old PAM installation, newer ones have a suid utility unix_chkpwd, and don't require the client application to be able to read /etc/shadow</p>

            </div>
            <div class="comment_actions hidden-print">
                
                
                &nbsp;

                <div class="pull-right">
                    
                    <a class="flag btn btn-mini" href="/kb/en/authentication-plugin-pam/+comments/714/flag"
                       data-flag-url="/kb/en/authentication-plugin-pam/+comments/714/flag"
                            title="Flag as Spam/Inappropriate">
                        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                        </a>
                    
                    
                    
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
        <a name="comment_867"></a>
        <div class="comment approved" style="margin-left: 20px">
            <div class="info">
                

<span class="datetime" title="2013-09-30 20:20">11 years, 3 months ago</span>
                
<span class="user" id="user-1839">
<a href="/kb/user/id/1839" title="Shane Williams">Shane Williams</a>
</span>
            </div>
            <div class="title">
                <a href="#comment_867">Re: PAM authentication plugin</a>
                
            </div><div class="comment_text">
                <p>Can someone clarify "new" vs. "old" PAM?</p>
<p>I'm running 1.1.6, and I had to do the same as hartmut-php to make this work.  It's better than running Maria as root, but still doesn't seem like it should be necessary to use pam_unix.</p>

            </div>
            <div class="comment_actions hidden-print">
                
                
                &nbsp;

                <div class="pull-right">
                    
                    <a class="flag btn btn-mini" href="/kb/en/authentication-plugin-pam/+comments/867/flag"
                       data-flag-url="/kb/en/authentication-plugin-pam/+comments/867/flag"
                            title="Flag as Spam/Inappropriate">
                        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                        </a>
                    
                    
                    
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
        <a name="comment_868"></a>
        <div class="comment approved" style="margin-left: 30px">
            <div class="info">
                

<span class="datetime" title="2013-09-30 21:32">11 years, 3 months ago</span>
                
<span class="user" id="user-27">
<a href="/kb/user/id/27" title="Sergei Golubchik">Sergei Golubchik</a>
</span>
            </div>
            <div class="title">
                <a href="#comment_868">Re: PAM authentication plugin</a>
                
            </div><div class="comment_text">
                <p>Interesting. What distribution are you using? Is it stock unmodified pam as it comes with your distribution?</p>

            </div>
            <div class="comment_actions hidden-print">
                
                
                &nbsp;

                <div class="pull-right">
                    
                    <a class="flag btn btn-mini" href="/kb/en/authentication-plugin-pam/+comments/868/flag"
                       data-flag-url="/kb/en/authentication-plugin-pam/+comments/868/flag"
                            title="Flag as Spam/Inappropriate">
                        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                        </a>
                    
                    
                    
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
        <a name="comment_869"></a>
        <div class="comment approved" style="margin-left: 40px">
            <div class="info">
                

<span class="datetime" title="2013-09-30 22:04">11 years, 3 months ago</span>
                
<span class="user" id="user-1839">
<a href="/kb/user/id/1839" title="Shane Williams">Shane Williams</a>
</span>
            </div>
            <div class="title">
                <a href="#comment_869">Re: PAM authentication plugin</a>
                
            </div><div class="comment_text">
                <p>This is the standard 1.1.6 (r2) ebuild on Gentoo.  /sbin/unix_chkpwd is 711 with setuid, as expected.  The relevant log entries are:</p>
<p>Sep 30 14:51:04 hostname mysqld: pam_warn(mysql:auth): function=[pam_sm_authenticate] service=[mysql] terminal=[&lt;unknown&gt;] user=[shanew] ruser=[&lt;unknown&gt;] rhost=[&lt;unknown&gt;]<br>
Sep 30 14:51:04 hostname unix_chkpwd[3430]: check pass; user unknown<br>
Sep 30 14:51:04 hostname unix_chkpwd[3430]: password check failed for user (shanew)<br>
Sep 30 14:51:04 hostname mysqld: pam_unix(mysql:auth): authentication failure; logname=root uid=60 euid=60 tty= ruser= rhost=  user=shanew<br></p>
<p>Gentoo doesn't have a shadow group by default, so I had to create one, add mysql to it, and then alter ownership/perms on /etc/shadow accordingly.</p>

            </div>
            <div class="comment_actions hidden-print">
                
                
                &nbsp;

                <div class="pull-right">
                    
                    <a class="flag btn btn-mini" href="/kb/en/authentication-plugin-pam/+comments/869/flag"
                       data-flag-url="/kb/en/authentication-plugin-pam/+comments/869/flag"
                            title="Flag as Spam/Inappropriate">
                        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                        </a>
                    
                    
                    
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
        <a name="comment_871"></a>
        <div class="comment approved" style="margin-left: 50px">
            <div class="info">
                

<span class="datetime" title="2013-09-30 23:39">11 years, 3 months ago</span>
                
<span class="user" id="user-27">
<a href="/kb/user/id/27" title="Sergei Golubchik">Sergei Golubchik</a>
</span>
            </div>
            <div class="title">
                <a href="#comment_871">Re: PAM authentication plugin</a>
                
            </div><div class="comment_text">
                <p>Very interesting. I'm using sys-libs/pam-1.1.6-r2 on Gentoo. And I don't have a shadow group. Still, I don't need hartmut's workaround, pam module works for me just fine.</p>

            </div>
            <div class="comment_actions hidden-print">
                
                
                &nbsp;

                <div class="pull-right">
                    
                    <a class="flag btn btn-mini" href="/kb/en/authentication-plugin-pam/+comments/871/flag"
                       data-flag-url="/kb/en/authentication-plugin-pam/+comments/871/flag"
                            title="Flag as Spam/Inappropriate">
                        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                        </a>
                    
                    
                    
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
        <a name="comment_876"></a>
        <div class="comment approved" style="margin-left: 60px">
            <div class="info">
                

<span class="datetime" title="2013-10-01 21:16">11 years, 3 months ago</span>
                
<span class="user" id="user-1839">
<a href="/kb/user/id/1839" title="Shane Williams">Shane Williams</a>
</span>
            </div>
            <div class="title">
                <a href="#comment_876">Re: PAM authentication plugin</a>
                
            </div><div class="comment_text">
                <p>Could it be a MariaDB version issue, as the system I'm testing this on is only at 5.2.14?  I also ran into the fact that PHP (which was rebuilt after MariaDB was installed) doesn't seem to know how to talk to the dialog plugin via mysqli, so I'm likely going to have to upgrade MariaDB anyway.</p>

            </div>
            <div class="comment_actions hidden-print">
                
                
                &nbsp;

                <div class="pull-right">
                    
                    <a class="flag btn btn-mini" href="/kb/en/authentication-plugin-pam/+comments/876/flag"
                       data-flag-url="/kb/en/authentication-plugin-pam/+comments/876/flag"
                            title="Flag as Spam/Inappropriate">
                        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                        </a>
                    
                    
                    
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
        
    

    

    
        <a name="comment_870"></a>
        <div class="comment approved" style="margin-left: 50px">
            <div class="info">
                

<span class="datetime" title="2013-09-30 23:13">11 years, 3 months ago</span>
                
<span class="user" id="user-1839">
<a href="/kb/user/id/1839" title="Shane Williams">Shane Williams</a>
</span>
            </div>
            <div class="title">
                <a href="#comment_870">Re: PAM authentication plugin</a>
                
            </div><div class="comment_text">
                <p>Alternately, what seems to work is the following:<br>
Add a shadow group;<br>
Chgrp /etc/shadow to shadow &amp; chmod to 640;<br>
Chgrp on /sbin/unix_chkpwd to shadow &amp; chmod so that it's -rwsr-sr-x;<br></p>
<p>Whether this is more or less secure than adding the mysql user to the shadow group, I'm not entirely sure.</p>
<p>Note that this scheme is borrowed from Ubuntu 12.04 LTS.</p>

            </div>
            <div class="comment_actions hidden-print">
                
                
                &nbsp;

                <div class="pull-right">
                    
                    <a class="flag btn btn-mini" href="/kb/en/authentication-plugin-pam/+comments/870/flag"
                       data-flag-url="/kb/en/authentication-plugin-pam/+comments/870/flag"
                            title="Flag as Spam/Inappropriate">
                        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                        </a>
                    
                    
                    
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
        <a name="comment_1357"></a>
        <div class="comment approved" style="margin-left: 60px">
            <div class="info">
                

<span class="datetime" title="2014-11-06 09:19">10 years, 2 months ago</span>
                
<span class="user" id="user-903">
<a href="/kb/user/id/903" title="Hartmut Holzgraefe">Hartmut Holzgraefe</a>
</span>
            </div>
            <div class="title">
                <a href="#comment_1357">Re: PAM authentication plugin</a>
                
            </div><div class="comment_text">
                <p>Doesn't work for me (Ubuntu 14.10, Ubuntu distribution MariaDB packages)</p>
<p>"Problem" is that unix_chkpwd explicitly checks that its UID matches the username given as cmdline argument, *unless* the UID is 0 (root). As it checks UID, not EUID, suid chmod magic doesn't make a difference here.</p>
<p>The related check code in unix_chkpwd.c is at <a href="https://git.fedorahosted.org/cgit/linux-pam.git/tree/modules/pam_unix/unix_chkpwd.c#n129">https://git.fedorahosted.org/cgit/linux-pam.git/tree/modules/pam_unix/unix_chkpwd.c#n129</a></p>
<p>	if (getuid() == 0) {
	  user=argv[1];
	}
	else {
	  user = getuidname(getuid());
	  /* if the caller specifies the username, verify that user
	     matches it */
	  if (strcmp(user, argv[1])) {
	    user = argv[1];
	    /* no match -&gt; permanently change to the real user and proceed */
	    if (setuid(getuid()) != 0)
		return PAM_AUTH_ERR;
	  }
	}</p>
<p>So unless mysqld is running as root the "does the given user name match my UID?" check will only succeed if the mysql user name matches the system user name, e.g. usually pam_unix will work for mysql users "mysql@..." if mysqld is running as unix user "mysql"</p>

            </div>
            <div class="comment_actions hidden-print">
                
                
                &nbsp;

                <div class="pull-right">
                    
                    <a class="flag btn btn-mini" href="/kb/en/authentication-plugin-pam/+comments/1357/flag"
                       data-flag-url="/kb/en/authentication-plugin-pam/+comments/1357/flag"
                            title="Flag as Spam/Inappropriate">
                        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                        </a>
                    
                    
                    
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
        <a name="comment_1359"></a>
        <div class="comment approved" style="margin-left: 70px">
            <div class="info">
                

<span class="datetime" title="2014-11-06 10:26">10 years, 2 months ago</span>
                
<span class="user" id="user-27">
<a href="/kb/user/id/27" title="Sergei Golubchik">Sergei Golubchik</a>
</span>
            </div>
            <div class="title">
                <a href="#comment_1359">Re: PAM authentication plugin</a>
                
            </div><div class="comment_text">
                <p>I'm thinking of a solution to this (and other similar problems): <a href="https://jira.mariadb.org/browse/MDEV-7032">MDEV-7032</a></p>

            </div>
            <div class="comment_actions hidden-print">
                
                
                &nbsp;

                <div class="pull-right">
                    
                    <a class="flag btn btn-mini" href="/kb/en/authentication-plugin-pam/+comments/1359/flag"
                       data-flag-url="/kb/en/authentication-plugin-pam/+comments/1359/flag"
                            title="Flag as Spam/Inappropriate">
                        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                        </a>
                    
                    
                    
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
        <a name="comment_1360"></a>
        <div class="comment approved" style="margin-left: 80px">
            <div class="info">
                

<span class="datetime" title="2014-11-06 11:13">10 years, 2 months ago</span>
                
<span class="user" id="user-903">
<a href="/kb/user/id/903" title="Hartmut Holzgraefe">Hartmut Holzgraefe</a>
</span>
            </div>
            <div class="title">
                <a href="#comment_1360">Re: PAM authentication plugin</a>
                
            </div><div class="comment_text">
                <p>Well, the "can only check the users own password unless invoked by root" limitation is there for a reason:</p>
<p>as unix_chkpwd is a local binary and not a service it can be used to perform brute force dictionary attacks against /etc/shadow without a need to have read access to the shadow file otherwise ...</p>
<p>Restricting access to this for root isn't necessary as root can read the shadow file (and other things like changing user passwords) anyway ...</p>
<p>But for any other user starting unix_chkpwd extra care is taken that only the password of this single user can be cracked this way (again not that much harm with this as an attacker must somehow gained access to that user account already anyway)</p>
<p>Any shadow entry for other users are still hidden by the inner working of unix_chkpwd </p>
<p>(adding some comments on <a href="https://jira.mariadb.org/browse/MDEV-7032">MDEV-7032</a>, too ..)</p>

            </div>
            <div class="comment_actions hidden-print">
                
                
                &nbsp;

                <div class="pull-right">
                    
                    <a class="flag btn btn-mini" href="/kb/en/authentication-plugin-pam/+comments/1360/flag"
                       data-flag-url="/kb/en/authentication-plugin-pam/+comments/1360/flag"
                            title="Flag as Spam/Inappropriate">
                        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                        </a>
                    
                    
                    
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
        <a name="comment_1361"></a>
        <div class="comment approved" style="margin-left: 90px">
            <div class="info">
                

<span class="datetime" title="2014-11-06 11:16">10 years, 2 months ago</span>
                
<span class="user" id="user-903">
<a href="/kb/user/id/903" title="Hartmut Holzgraefe">Hartmut Holzgraefe</a>
</span>
            </div>
            <div class="title">
                <a href="#comment_1361">Re: PAM authentication plugin</a>
                
            </div><div class="comment_text">
                <p>unix_chkpwd does throttle on wrong credentials being passed in, but that only helps if it is part of a service toolchain as it is with pam_unix</p>
<p>when called directly an attacker doesn't have to wait for the 10s penalty after giving a wrong password but can just start new unix_chkpwd processes without anything putting artificial limits on the number of checks per time unit ...</p>

            </div>
            <div class="comment_actions hidden-print">
                
                
                &nbsp;

                <div class="pull-right">
                    
                    <a class="flag btn btn-mini" href="/kb/en/authentication-plugin-pam/+comments/1361/flag"
                       data-flag-url="/kb/en/authentication-plugin-pam/+comments/1361/flag"
                            title="Flag as Spam/Inappropriate">
                        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                        </a>
                    
                    
                    
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
        
    

    

    

    

    

    

    

    

    

    

    

</div>


                    <div id="content_disclaimer" class="graybox">
                        Content reproduced on this site is the property of its respective owners,
                        and this content is not reviewed in advance by MariaDB. The views, information and opinions
                        expressed by this content do not necessarily represent those of MariaDB or any other party.
                    </div>
                </div>
            </section>

            
        </div>
    </div>
</div>

<!-- Footer -->
<footer id="footer">
    <div class="footer">
        <div class="container">
            <div class="row">
                <div class="col-xs-12">
                    <ul class="list-inline text-center footer-nav">
                        <li>
                            <h5>
                                <a href="https://mariadb.com/products" title="Products">Products</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/services" title="Services">Services</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/pricing" title="Pricing">Pricing</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/resources" title="Resources">Resources</a>
                            </h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/about-us" title="About MariaDB">About Us</a></h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/download" title="Download">Download MariaDB</a></h5>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="row row-10">
                
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div id="block-footerformcontact" class="block block-block-content block-block-contentd754ee1b-3cc9-40e7-9ef4-f504f1197fb1">
                        
                            <h5 style="font-weight: 400;">Subscribe to our newsletter!</h5>
                            <script src="//app-sj15.marketo.com/js/forms2/js/forms2.min.js"></script><form id="mktoForm_1498"></form>
                            <script>
                                <!--//--><![CDATA[// ><!--
                                MktoForms2.loadForm("//app-sj15.marketo.com", "573-PXI-984", 1498);
                                //--><!]]]]><![CDATA[>
                                //--><!]]>
                            </script>
                        
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div class="footer-copyright">
                        <div class="text-center">
                            <ul class="list-inline no-margin">
                                <li>
                                    <a href="/legal" title="Legal">Legal</a>
                                </li>
                                <li>
                                    <a href="/privacy-policy" title="Privacy Policy">Privacy Policy</a>
                                </li>
                                <li>
                                    <a href="/cookie-policy/" title="Cookies">Cookie Policy</a>
                                </li>
                            </ul>
                            <p>Copyright &copy; 2025 MariaDB. All rights reserved.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
</footer>
</div>

<div id="ajax_loading">
    <img src="/kb/static/images/ajax-loader.a51c5608d01a.gif" />
</div>

    <!-- Google Tag Manager -->
    <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-MK2847"
                      height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
            '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MK2847');</script>
    <!-- End Google Tag Manager -->

</body>

<script type="text/javascript" src="/kb/static/js/main.1587e3a666fc.js" charset="utf-8"></script>

</html>