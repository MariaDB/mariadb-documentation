<!DOCTYPE html>
<html>
<head data-cookie-domain=""
      data-cookie-path="/">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="apple-touch-icon" sizes="180x180" href="/kb/static/images/favicons/apple-touch-icon.159e713979be.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/kb/static/images/favicons/favicon-32x32.bc0ac1d5d11e.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/kb/static/images/favicons/favicon-16x16.5801f8f0f34e.png">
    <link rel="shortcut icon" href="/kb/static/images/favicons/favicon.d122d305dee4.ico" type="image/x-icon" />

    <title>Buildbot ToDo - Source - MariaDB Knowledge Base</title>

    <link href="/kb/static/css/main.f7633538c846.css" rel="stylesheet" type="text/css" />

    
        <meta name="robots" content="noindex, nofollow">
    

    

    <!-- FB Open Graph tags -->
    <meta property="og:title" content="Buildbot ToDo - Source" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://mariadb.com/kb/en/buildbot-todo/+source/" />
    <meta property="og:image" content="http://mariadb.comaskmonty-logo.png" />
    <meta property="og:site_name" content="MariaDB KnowledgeBase" />
    <meta property="fb:admins" content="514852603" />
    <meta property="og:description" content="" />

    <meta name="description" content="" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="//fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet"/>
    
</head>
<body class="mpkb nodes autoresize nodes_source jqui" id="nodes_source">





<div id="menu-mobile" class="visible-sm visible-xs">

    <div>
        <div id="mobile-close-menu" class="text-right">
            <a href="javascript:void(0)" title="Close Menu" id="back-main" class="toggle-menu">X<span></span></a>
        </div>
    </div>
    <div class="mainmenu-mobile">
        <ul class="ls-none ul-menu">
            <li data-sub="submenu5"><a class="open-form-search" href="/kb/search/" title="Search">Search </a></li>
            <li data-sub="submenu0"><a href="/products" title="Products">Products</a><span class="arrow-main"></span></li>
            <li data-sub="submenu1"><a href="/services" title="Services">Services</a><span class="arrow-main"></span></li>
            <li data-sub="submenu2"><a href="/resources" title="Resources">Resources</a><span class="arrow-main"></span></li>
            <li data-sub="submenu3"><a href="/about-us" title="About">About</a><span class="arrow-main"></span></li>
            <li data-sub="submenu4"><a href="/contact" title="Contact">Contact</a></li>
        </ul>
    </div>

    <div class="nav-top-mobile">
        <div class="select-box form">

            <ul class="inline-block-md mb-none top-nav">
                <li>

                </li>
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/buildbot-todo/+source/"> Login</a>
                    </li>
                
            </ul>



        </div>
        <p class="text-center copyright">Copyright &copy; 2025 MariaDB. All rights reserved.</p>
    </div>
</div>
<div class="violator-wrap d-none" id="top_violator">
    <div class="container">
        <div class="row">
            <div class="col-xs-12 col-sm-12">
                <div class="violator-outer">
                    <div class="violator-inner">
                        <div class="row">
                            <div class="col-xs-12 col-sm-9 col-lg-7 col-lg-offset-2" id="top_violator_content">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="content-link" target="_blank" rel="nofollow noreferrer">
                                    <span>The Ultimate Guide to High Availability with MariaDB</span>
                                </a>
                            </div>
                            <div class="col-xs-12 col-sm-3" id="top_violator_cta">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="btn btn-mariadb" target="_blank" rel="nofollow noreferrer">Download Now</a>
                            </div>
                        </div>
                    </div>
                    <button type="button" class="btn btn-link close-btn">
                        <svg xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 24 24" width="15px" height="15px"><path d="M 4.9902344 3.9902344 A 1.0001 1.0001 0 0 0 4.2929688 5.7070312 L 10.585938 12 L 4.2929688 18.292969 A 1.0001 1.0001 0 1 0 5.7070312 19.707031 L 12 13.414062 L 18.292969 19.707031 A 1.0001 1.0001 0 1 0 19.707031 18.292969 L 13.414062 12 L 19.707031 5.7070312 A 1.0001 1.0001 0 0 0 18.980469 3.9902344 A 1.0001 1.0001 0 0 0 18.292969 4.2929688 L 12 10.585938 L 5.7070312 4.2929688 A 1.0001 1.0001 0 0 0 4.9902344 3.9902344 z"/></svg>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="wrapper">
<div id="top-nav">
    <div class="container">
        <ul class="hidden-sm hidden-xs" >
            <li><a href="https://mariadb.com/kb/">Knowledge Base</a></li>
            <li><a href="https://mariadb.com/contact/">Contact</a></li>
            
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/buildbot-todo/+source/" rel="nofollow">Login</a>
                    </li>
                
            
            
            <li id="search-form">
                <form action="/kb/en/+search/" method="get" id="search-block-form" accept-charset="UTF-8">
                    <input id="search" title="Enter the terms you wish to search for."
                           placeholder="Search . . ." type="text"
                           name="q" value="" size="15" maxlength="128" class="form-text"
                           data-autocomplete-url="/kb/en/+search/autocomplete/">
                    <input type="hidden" name="quick" value="1" />
                    <input type="hidden" name="source" value="kb" />
                </form>
            </li>
            <li><a id="search-toggler" href="/kb/search/">Search</a></li>
            
        </ul>
    </div>
</div>
<div id="navbar-bottom" class="navbar">
    <div class="container">
        
        
        
        
        <div class="row">
            <div class="col-md-3 col-sm-9 col-xs-9">
                <a class="brand" href="/" title="MariaDB">
                    <img src="/kb/static/images/logo-2018-black.95f5978ae14d.png">
                </a>
            </div>
            <div class="col-md-9 hidden-sm hidden-xs">
                <div class="main-menu">
                    <ul id="main-menu" class="nav navbar-nav inline-block-sm">
    <li class="has-sub full-menu">
        <a href="/products" title="Products">Products</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/solutions" title="Solutions">Solutions</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/resources" title="Resources">Resources</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/about-us" title="Company">Company</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/pricing" title="Pricing">Pricing</a>
    </li>
    
    <li class="">
        <a class="button electric-eel small top-bar-right-download" href="/downloads/">Download</a>
    </li>
</ul>
                </div>
            </div>
            <div class="col-md-3 visible-sm visible-xs col-sm-3 col-xs-3 ps-rv">
                <div class="navbar-header text-right pull-right">
                    <button type="button" class="menu-control toggle-menu" id="open-menu">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="main">
    <div class="container">
        

        <div id="subheader1" class="clearfix">
            <div class="pull-left">
                
                <div id="breadcrumbs" class="breadcrumb">
                    <a href="/kb/en/">Knowledge Base</a>
                    


    
    » <a class="crumb" href="/kb/en/training-tutorials/">Training &amp; Tutorials</a>
    

    
    » <a class="crumb" href="/kb/en/advanced-mariadb-articles/">Advanced MariaDB Articles</a>
    

    
    » <a class="crumb" href="/kb/en/development-articles/">Development Articles</a>
    

    
    » <a class="crumb" href="/kb/en/tools/">MariaDB Development Tools</a>
    

    
    » <a class="crumb" href="/kb/en/buildbot/">Buildbot</a>
    


    » <a class="node_link crumb" href="/kb/en/buildbot-todo/">Buildbot ToDo</a>


                </div>
                
            </div>
        </div>
    </div>
    <div class="container" id="container-main">
        <div class="row">
            
            
                
                <aside id="sidebar-first" class="sidebar col-md-2 hidden-xs hidden-sm hidden-print">
                    
                        
                        <ul id="category_menu" class="nav nav-pills nav-stacked">
                            <li><a href="/kb/en/">Home</a></li>
                            
                                
                                    <li><a href="/kb/en/+questions/">Open Questions</a></li>
                                
                                <li><a href="/kb/en/documentation/">MariaDB Server</a></li>
                                <li><a href="/kb/en/maxscale/">MariaDB MaxScale</a></li>
                                <li><a href="/kb/en/mariadb-columnstore/">MariaDB ColumnStore</a></li>
                                <li><a href="/kb/en/connectors/">Connectors</a></li>
                            

                        </ul>
                    

                    
                        <div>
    

<div class="well well-small box actions"><div>

        <a class="btn btn-block btn-small" href="/kb/en/buildbot-todo/">Return to article</a>
    
</div>
</div>

</div>
                    

                    

































                </aside>
            
            
            
                
            
            
            <section id="content" class="limited_width col-md-10 clearfix">
                
                    <h1>Buildbot ToDo - Source</h1>
                

                



                <div>
                    

    

    
    <div class="revision_info">
        <dl class="table">
            <dt>Revision</dt>
            <dd><a href="/kb/en/buildbot-todo/+r/44019/">44019</a></dd>
            <dt>User</dt>
            <dd>
<span class="user" id="user-2">
<a href="/kb/user/id/2" title="Daniel Bartholomew">Daniel Bartholomew</a>
</span></dd>
            <dt>Date</dt>
            <dd>

<span class="datetime" title="2016-03-31 16:18">2016-03-31 16:18</span></dd>
        </dl>
    </div>
    


    

    
        
        <textarea id="answer_source" class="creole_source autogrow">== High-priority, High-ROI items

* Ability on the web pages to mark certain builds of high priority, so they
  will be processed before others as build slaves become available. It must be
  possible to mark pending builds so not only individually, but also by branch,
  as well as by (branch,revision). The feature should probably interact in a
  meaningful way with the existing &#34;nextBuild&#34; ability to prioritise builds
  (http://buildbot.net/buildbot/docs/0.8.4/full.html#Prioritizing-Builds). Eg.
  it could set appropriate properties somewhere that would be available to the
  nextBuild function.
* We need a way to kill all running builds, and remove all pending builds, for
  a given combination of branch and revision. It is possible to manually cancel
  a pending or running build, but this becomes extremely inconvenient when
  there are many builders.
** Comments from buildbot mailing list: &#34;There is already a button (hidden on
   the change page) for stopping all builds associated to a change.
   Unfortunately, the only way to get to this page seems to be through the
   waterfall.&#34;   &#34;Note that currently, the button on the change page only
   cancels still-pending builds, it does not stop builds in progress.&#34;
* Fix problem when pushing multiple bzr revisions at one time:
** Buildbot should wait a few moments before starting a build, and then start
   building the latest (currently it seems to build the first revision
   immedeately, and even often seems to not build the latest revision at all,
   getting confused about the order)
** When pushing a change that changes revision numbers, the grid display can
   get really confused, would be nice to fix this somehow.
* Any failure other than compile/test failure should mean a re-run. Failures
  like buildslave reboot or loss of connection or timeout of bazaar operation
  should be interpreted as if the build has never happened, and the system
  should re-try building.
* In the bzr source step, retry the checkout a couple of times if it fails (to
  be more robust against temporary Launchpad problems, which we see a number
  of). Could maybe be done as a general Buildbot optional feature for all
  revision control systems supported, or maybe specific for the bzr depending
  on what can work.
* Get PBXT test suite fixed in &lt;&lt;code&gt;&gt;--valgrind&lt;&lt;/code&gt;&gt;; once that is done
  include it in the list of main suites so that it is tested on all platforms
  (and remove the special extra pbxt test steps in some Buildbot builds, as
  they will no longer be needed).
* Load statistics. We need it to be able to see if adding another tree will
  starve the buildbot:
** Percentage of busy time for available slaves
** Median/Max response time (How much time do I have to wait after I&#39;ve pushed
   for test run to complete)
* Fix that mysql-test-run uses &lt;&lt;code&gt;&gt;--skip-ssl&lt;&lt;/code&gt;&gt; by default.
* Fix that &lt;&lt;code&gt;&gt;mysql-test-run.pl --mem&lt;&lt;/code&gt;&gt; doesn&#39;t properly clean
  up &lt;&lt;code&gt;&gt;/dev/shm/var*&lt;&lt;/code&gt;&gt; (so that we can use &lt;&lt;code&gt;&gt;--mem&lt;&lt;/code&gt;&gt;
  and &lt;&lt;code&gt;&gt;--parallel&lt;&lt;/code&gt;&gt; option to speed up the more powerful
  machines).
* For triggered builds (ie. one builder makes a source tarball which another
  builder consumes), make it so that the pushed changesets are also transfered,
  so the blamelist on the build page works (currently the blame list is empty).
* Upgrade to Buildbot 0.8 on the master. Then use the facility to use a MariaDB
  server as backend for both speedup (hopefully) and more flexible querying of
  buildbot history.

== Lower priority items

* It should be easier to setup for a new user. Ideally, there should be one
  tarball that one can download, unpack and run. Within the tarball there
  should be a script and/or config files which allow to add the buildslave into
  automatic startup. The following should not be there:
** Dependence of buildslave on a load of python libraries. Ship them.
** Same for bzr
** Same for mysqld itself. Dl/make/make-install everything we need in the
   buildbot directory.

If the above is not done, we&#39;ll never get much participation from old or
unusual machines. The owners of such machines do not have the latest libraries,
installing them requires some manual effort, which simply sets the bar too
high.

* Check archivist observation/bug that build slave `uname` info disappears when
  slave is disconnected.
* Self refresh at a time interval (ajax maybe to reduce transfer) so users can
  know when to fire up a slave.
* In the waterfall page, second line from top is &#34;current activity&#34;. When
  displaying a particular branch (&#34;?branch=5.1&#34;), the &#34;current activity&#34; for
  hosts that are currently building another branch could also display the name
  of the branch (as a link to waterfall page for that branch) to avoid
  confusion that it is active on the current branch.
* Run with &lt;&lt;code&gt;&gt;--valgrind-mysqld&lt;&lt;/code&gt;&gt; instead
  of &lt;&lt;code&gt;&gt;--valgrind&lt;&lt;/code&gt;&gt;. Little point in Valgrinding mysqltest when we
  in any case ignore any errors in that program.
* Show pending builds for a slave on the &#39;builders&#39; page,
  eg. http://askmonty.org/buildbot/builders/hardy-x86-rtai
* Show dates in local time of the client. One way is with
  Javascript: http://articles.techrepublic.com.com/5100-10878_11-6016329.html
  (would be nice if some dates were still shown when javascript is not
  available).
* Check if InnoDB is fixed sufficiently to have no Valgrind leaks
  with &lt;&lt;code&gt;&gt;innodb_use_sys_malloc&lt;&lt;/code&gt;&gt;; if so remove hack
  in &lt;&lt;code&gt;&gt;mysql-test-run.pl&lt;&lt;/code&gt;&gt; to disable this in valgrind case.
* Fix problem that illegal regexp causes build exception (example:
  https://buildbot.askmonty.org/buildbot/builders/sol-sparc-32/builds/157/steps/compile/logs/err.text).
  The problem is that Buildbot grabs regexps from the suppression file in the
  MariaDB tree and tries to compile them; if this throws exception, then the
  exception should be caught (and possibly warned about), not crash the whole
  build.

== Improve binary package build and test

* Add `apt-get source mariadb-server` checking in buildbot (for package
  testing).
* Add testing of bintar package with real start of server [[mysqld_safe]] and
  also test on different distro/version than what was built (eg
  hardy&lt;-&gt;jaunty).
* In package build, sign .debs with dummy key, to more accurately test the real
  build process.
* Switch to build the bintar packages on centos 5, to work with older glibc
  versions? Or maybe even Debian 4 which is older I think? But do the install
  test in Buildbot also on other/newer distros (should probably test on several
  in each build).
* Add a test step for .deb that tests upgrading from an earlier version of
  MariaDB (currently we only check upgrade from MySQL).
* Add a &#39;follow log&#39; feature to runvm (which does `ssh guest tail -f log &gt;
  log`). Use this in the Buildbot packaging step that runs mysql-test-run.pl,
  so that we can get mysqld.X.err.Y server logs available like for the non-kvm
  builds.
* For runvm: add the options &#34;-o UserKnownHostsFile=/dev/null -o
  StrictHostKeyChecking=no&#34; to the ssh command used to login to the guest vm,
  so we do not get a login failure due to different host keys in different
  guests.

== Staging trees

Idea is to set it up so that each developer/group has a stating tree. Any push
to this tree will first get a full round of testing in Buildbot. If all results
are green after this, it will automatically be pushed to the main tree. If
another push gets in first, it will automatically merge the new stuff and
re-try a full Buildbot test. If there is a problem (test failure or merge
conflict), it will send mail with details.

* Get something working, simple initially.
* Staging tree per-captain
* &lt;&lt;code&gt;&gt;mysqltest --require&lt;&lt;/code&gt;&gt; not-staging to speed up Valgrind


</textarea>
    


                    <div id="content_disclaimer" class="graybox">
                        Content reproduced on this site is the property of its respective owners,
                        and this content is not reviewed in advance by MariaDB. The views, information and opinions
                        expressed by this content do not necessarily represent those of MariaDB or any other party.
                    </div>
                </div>
            </section>

            
        </div>
    </div>
</div>

<!-- Footer -->
<footer id="footer">
    <div class="footer">
        <div class="container">
            <div class="row">
                <div class="col-xs-12">
                    <ul class="list-inline text-center footer-nav">
                        <li>
                            <h5>
                                <a href="https://mariadb.com/products" title="Products">Products</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/solutions" title="Solutions">Solutions</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/resources" title="Resources">Resources</a>
                            </h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/about-us" title="About MariaDB">Company</a></h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/pricing" title="Pricing">Pricing</a>
                            </h5>
                        </li>
                        
                        
                        <li>
                            <h5><a href="https://mariadb.com/downloads" title="Download">Download MariaDB</a></h5>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="row row-10">
                
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div id="block-footerformcontact" class="block block-block-content block-block-contentd754ee1b-3cc9-40e7-9ef4-f504f1197fb1">
                        
                            <h5 style="font-weight: 400;">Subscribe to our newsletter!</h5>
                            <script src="//app-sj15.marketo.com/js/forms2/js/forms2.min.js"></script><form id="mktoForm_1498"></form>
                            <script>
                                <!--//--><![CDATA[// ><!--
                                MktoForms2.loadForm("//app-sj15.marketo.com", "573-PXI-984", 1498);
                                //--><!]]]]><![CDATA[>
                                //--><!]]>
                            </script>
                        
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div class="footer-copyright">
                        <div class="text-center">
                            <ul class="list-inline no-margin">
                                <li>
                                    <a href="/legal" title="Legal">Legal</a>
                                </li>
                                <li>
                                    <a href="/privacy-policy" title="Privacy Policy">Privacy Policy</a>
                                </li>
                                <li>
                                    <a href="/cookie-policy/" title="Cookies">Cookie Policy</a>
                                </li>
                            </ul>
                            <p>Copyright &copy; 2025 MariaDB. All rights reserved.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
</footer>
</div>

<div id="ajax_loading">
    <img src="/kb/static/images/ajax-loader.a51c5608d01a.gif" />
</div>

    <!-- Google Tag Manager -->
    <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-MK2847"
                      height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
            '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MK2847');</script>
    <!-- End Google Tag Manager -->

</body>

<script type="text/javascript" src="/kb/static/js/main.1587e3a666fc.js" charset="utf-8"></script>

</html>