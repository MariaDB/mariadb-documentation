<?xml version="1.0" encoding="utf-8"?>
<rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title>MariaDB Knowledge Base Comments for: Upgrading from MariaDB 10.1 to MariaDB 10.2</title><link>https://mariadb.com/kb/en/upgrading-from-mariadb-101-to-mariadb-102/+comments/feed/</link><description></description><atom:link href="https://mariadb.com/kb/en/upgrading-from-mariadb-101-to-mariadb-102/+comments/feed/" rel="self"></atom:link><language>en-us</language><lastBuildDate>Thu, 18 Jul 2024 17:34:42 +0000</lastBuildDate><item><title>Re: Upgrading from MariaDB 10.1 to MariaDB 10.2</title><link>https://mariadb.com/kb/en/upgrading-from-mariadb-101-to-mariadb-102/+comments/4800</link><description>&lt;p&gt;Thanks!&lt;/p&gt;
&lt;p&gt;I've solved the problem removing STRICT_TRANS_TABLES from the sql_mode configuration.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Leandro Puerari</dc:creator><guid>https://mariadb.com/kb/en/upgrading-from-mariadb-101-to-mariadb-102/+comments/4800</guid></item><item><title>Re: Upgrading from MariaDB 10.1 to MariaDB 10.2</title><link>https://mariadb.com/kb/en/upgrading-from-mariadb-101-to-mariadb-102/+comments/4799</link><description>&lt;p&gt;I suggest using one of the channels at &lt;a href="/kb/en/how-can-i-get-help-if-something-fails/"&gt;How Can I get Help if Something Fails?&lt;/a&gt; and providing enough details so that someone could help, such as what issues you're experiencing, your table structure, sample queries etc.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Ian Gilfillan</dc:creator><guid>https://mariadb.com/kb/en/upgrading-from-mariadb-101-to-mariadb-102/+comments/4799</guid></item><item><title>Re: Upgrading from MariaDB 10.1 to MariaDB 10.2</title><link>https://mariadb.com/kb/en/upgrading-from-mariadb-101-to-mariadb-102/+comments/4798</link><description>&lt;p&gt;After upgrade, i'm having issues when sending empty ('') values to a date or datetime column.
Some suggestion how to solve it not needing to alter all my scripts?&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Leandro Puerari</dc:creator><guid>https://mariadb.com/kb/en/upgrading-from-mariadb-101-to-mariadb-102/+comments/4798</guid></item><item><title>Clean (fast) shutdown is enough</title><link>https://mariadb.com/kb/en/upgrading-from-mariadb-101-to-mariadb-102/+comments/3429</link><description>&lt;p&gt;A shutdown with the default setting innodb_fast_shutdown=1 is sufficient before an upgrade. It will create a redo log checkpoint, so that the redo log will be logically empty.&lt;/p&gt;
&lt;p&gt;If there is a bug in &lt;a href="/kb/en/what-is-mariadb-102/"&gt;MariaDB 10.2&lt;/a&gt; or later that causes it to incorrectly refuse an upgrade from 10.1 (failing to detect the redo log as logically empty), please file a bug for it.&lt;/p&gt;
&lt;p&gt;The InnoDB redo log (ib_logfile0) works at a lower level than the binary logs (binlog).&lt;/p&gt;
&lt;p&gt;Last, a slow shutdown before upgrading MariaDB is not necessary. It is necessary when upgrading to MySQL 5.7 or 8.0, because in both versions, the undo log format was changed in an incompatible way. In MariaDB, the InnoDB undo log format is compatible with earlier versions. &lt;a href="https://jira.mariadb.org/browse/MDEV-12289"&gt;MDEV-12289&lt;/a&gt; in &lt;a href="/kb/en/what-is-mariadb-102/"&gt;MariaDB 10.2&lt;/a&gt; guarantees a smooth upgrade from earlier MariaDB versions, but creates an undo log format incompatibility with Oracle MySQL 5.7 and Percona XtraBackup 2.4.&lt;/p&gt;
&lt;p&gt;Alas, due to bugs, MySQL would not always empty all undo logs as part of a slow shutdown. In MariaDB Server 10.3, &lt;a href="https://jira.mariadb.org/browse/MDEV-13603"&gt;MDEV-13603&lt;/a&gt; was fixed. In earlier versions, various shutdown hangs have been fixed. (Maybe your 10.1 server hung during shutdown, and it was forcibly killed, so that crash recovery would have been needed?)&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Marko Mäkelä</dc:creator><guid>https://mariadb.com/kb/en/upgrading-from-mariadb-101-to-mariadb-102/+comments/3429</guid></item><item><title>Re: Upgrading from MariaDB 10.1 to MariaDB 10.2</title><link>https://mariadb.com/kb/en/upgrading-from-mariadb-101-to-mariadb-102/+comments/3066</link><description>&lt;p&gt;It's not specifically tested to upgrade multiple major releases in one go, but many people have managed to do this successfully. Go through the changelogs and upgrade notes for each major release carefully, and of course backup and test thoroughly.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Ian Gilfillan</dc:creator><guid>https://mariadb.com/kb/en/upgrading-from-mariadb-101-to-mariadb-102/+comments/3066</guid></item><item><title>Re: Upgrading from MariaDB 10.1 to MariaDB 10.2</title><link>https://mariadb.com/kb/en/upgrading-from-mariadb-101-to-mariadb-102/+comments/3065</link><description>&lt;p&gt;Can MariaDB be upgraded directly from 10.0 to 10.2 or does it have to be done in two steps i.e 10.0 --&amp;gt; 10.1 and then 10.1 --&amp;gt; 10.2&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Dermot Brereton</dc:creator><guid>https://mariadb.com/kb/en/upgrading-from-mariadb-101-to-mariadb-102/+comments/3065</guid></item><item><title>Re: Upgrading from MariaDB 10.1 to MariaDB 10.2</title><link>https://mariadb.com/kb/en/upgrading-from-mariadb-101-to-mariadb-102/+comments/2928</link><description>&lt;p&gt;If not already done, I suggest &lt;a href="/kb/en/reporting-bugs/"&gt;reporting as a bug&lt;/a&gt;, it'll get more attention than here.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Ian Gilfillan</dc:creator><guid>https://mariadb.com/kb/en/upgrading-from-mariadb-101-to-mariadb-102/+comments/2928</guid></item><item><title>Re: Upgrading from MariaDB 10.1 to MariaDB 10.2</title><link>https://mariadb.com/kb/en/upgrading-from-mariadb-101-to-mariadb-102/+comments/2926</link><description>&lt;p&gt;I've posted a log of the strace of the anomalously slow shutdown of &lt;a href="/kb/en/what-is-mariadb-101/"&gt;MariaDB 10.1&lt;/a&gt; over at the percona-server link below because it is too long to include in the comments here and appears to be relevant to both versions of MySQL as both suffer from this syndrome.&lt;/p&gt;
&lt;p&gt;My slow shutdown is still running -- constantly at 100% CPU&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/"> </dc:creator><guid>https://mariadb.com/kb/en/upgrading-from-mariadb-101-to-mariadb-102/+comments/2926</guid></item><item><title>Re: Upgrading from MariaDB 10.1 to MariaDB 10.2</title><link>https://mariadb.com/kb/en/upgrading-from-mariadb-101-to-mariadb-102/+comments/2923</link><description>&lt;p&gt;Apparently this slow merge problem has cropped up with the percona-server in the last few days:&lt;/p&gt;
&lt;p&gt;&lt;a href="https://bugs.launchpad.net/percona-server/+bug/1591036"&gt;https://bugs.launchpad.net/percona-server/+bug/1591036&lt;/a&gt;&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/"> </dc:creator><guid>https://mariadb.com/kb/en/upgrading-from-mariadb-101-to-mariadb-102/+comments/2923</guid></item><item><title>Re: Upgrading from MariaDB 10.1 to MariaDB 10.2</title><link>https://mariadb.com/kb/en/upgrading-from-mariadb-101-to-mariadb-102/+comments/2922</link><description>&lt;p&gt;I'm stuck on Step 2 shutting down for a few hours now.  There should probably be some kind of warning in step 2 about this.&lt;/p&gt;
&lt;p&gt;Every minute, the mysql/error.log emits a message like:&lt;/p&gt;
&lt;p&gt;InnoDB: number of bytes of change buffer just merged:  18433&lt;/p&gt;
&lt;p&gt;The number changes a bit but not much each time.&lt;/p&gt;
&lt;p&gt;I can't query the database's system variables to discover the size of the change buffer so I can't estimate how long it's going to take.&lt;/p&gt;
&lt;p&gt;The change buffer defaults to 25% of the buffer pool size which defaults to 128M.&lt;/p&gt;
&lt;p&gt;Are my sites going to be down for &amp;gt;24 hours?  That's what the default arithmetic says.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/"> </dc:creator><guid>https://mariadb.com/kb/en/upgrading-from-mariadb-101-to-mariadb-102/+comments/2922</guid></item><item><title>Re: Upgrading from MariaDB 10.1 to MariaDB 10.2</title><link>https://mariadb.com/kb/en/upgrading-from-mariadb-101-to-mariadb-102/+comments/2904</link><description>&lt;p&gt;I was only able to complete the upgrade from 10.1 by moving the old binary logs ( `/var/lib/mysql/ib_logfile*`) out of the way, thus letting &lt;a href="/kb/en/what-is-mariadb-102/"&gt;MariaDB 10.2&lt;/a&gt; create new ones.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Christian Rishøj</dc:creator><guid>https://mariadb.com/kb/en/upgrading-from-mariadb-101-to-mariadb-102/+comments/2904</guid></item><item><title>Re: Upgrading from MariaDB 10.1 to MariaDB 10.2</title><link>https://mariadb.com/kb/en/upgrading-from-mariadb-101-to-mariadb-102/+comments/2903</link><description>&lt;p&gt;A reminder to set `innodb_fast_shutdown` to `0` would be helpful. Otherwise the upgrade may result in the following situation:&lt;/p&gt;
&lt;div style="margin-left:2em"&gt;&lt;p&gt; [ERROR] InnoDB: Upgrade after a crash is not supported. This redo log was created before &lt;a href="/kb/en/mariadb-1022-release-notes/"&gt;MariaDB 10.2.2&lt;/a&gt;, and we did not find a valid checkpoint. Please follow the instructions at &lt;a href="http://dev.mysql.com/doc/refman/5.7/en/upgrading.html"&gt;http://dev.mysql.com/doc/refman/5.7/en/upgrading.html&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Christian Rishøj</dc:creator><guid>https://mariadb.com/kb/en/upgrading-from-mariadb-101-to-mariadb-102/+comments/2903</guid></item></channel></rss>