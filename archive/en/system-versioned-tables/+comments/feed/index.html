<?xml version="1.0" encoding="utf-8"?>
<rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title>MariaDB Knowledge Base Comments for: System-Versioned Tables</title><link>https://mariadb.com/kb/en/system-versioned-tables/+comments/feed/</link><description></description><atom:link href="https://mariadb.com/kb/en/system-versioned-tables/+comments/feed/" rel="self"></atom:link><language>en-us</language><lastBuildDate>Mon, 26 Aug 2024 01:49:36 +0000</lastBuildDate><item><title>RE: Adding or Removing System Versioning To/From a Table</title><link>https://mariadb.com/kb/en/system-versioned-tables/+comments/6424</link><description>&lt;p&gt;If the system versioning was activated by creating coluns row_start, row_end being visible and you need to drop it, execute: &lt;/p&gt;
&lt;p&gt;alter table 'table name' drop system versioning, drop PERIOD FOR SYSTEM_TIME, DROP COLUMN `row_start`, DROP COLUMN `row_end`;&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Catalin Dumitriu</dc:creator><guid>https://mariadb.com/kb/en/system-versioned-tables/+comments/6424</guid></item><item><title>Re: Temporal Data Tables</title><link>https://mariadb.com/kb/en/system-versioned-tables/+comments/4456</link><description>&lt;p&gt;Excellent! Thank you for the quick response.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Kurre St√•hlberg</dc:creator><guid>https://mariadb.com/kb/en/system-versioned-tables/+comments/4456</guid></item><item><title>Re: Temporal Data Tables</title><link>https://mariadb.com/kb/en/system-versioned-tables/+comments/4455</link><description>&lt;p&gt;Issue is confirmed. i've created a JIRA ticket for that : &lt;a href="https://jira.mariadb.org/browse/CONJ-776"&gt;https://jira.mariadb.org/browse/CONJ-776&lt;/a&gt;&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Diego Dupin</dc:creator><guid>https://mariadb.com/kb/en/system-versioned-tables/+comments/4455</guid></item><item><title>Re: Temporal Data Tables</title><link>https://mariadb.com/kb/en/system-versioned-tables/+comments/4141</link><description>&lt;p&gt;I would like to create a bitemporal schema utilizing the standardized approach. Currently (10.4.6) application-time periods cannot be used to enforce temporal uniqueness and temporal referential integrity on the application time dimension (&lt;a href="https://jira.mariadb.org/browse/MDEV-16978"&gt;MDEV-16978&lt;/a&gt;, &lt;a href="https://jira.mariadb.org/browse/MDEV-16983"&gt;MDEV-16983&lt;/a&gt;). To compensate I have added the app-time start and end columns to primary, unique and foreign keys, and attempted to enforce said aspects via trigger. Unfortunately even the trivial INSERT has proven challenging: A BEFORE INSERT trigger failed to run, producing a "field &amp;lt;system-time (tx) start col&amp;gt; doesn't have a default value" error. An AFTER INSERT trigger did run, but only to leave me wondering how I am supposed to reliably distinguish the newly-inserted row from pre-existing ones for validation purposes in this case (my only clue, NEW.&amp;lt;system-time (tx) start col&amp;gt; is set to 0). Am I missing something, or should I better resort to a "userspace" approach until 10.5 arrives?&lt;/p&gt;
&lt;p&gt;As an aside, AUTO_INCREMENT fires for rows inserted as a consequence of (UPDATE | DELETE) ... FOR PORTION OF. Is this intentional?&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Dane Trunch</dc:creator><guid>https://mariadb.com/kb/en/system-versioned-tables/+comments/4141</guid></item><item><title>Re: System-Versioned Tables</title><link>https://mariadb.com/kb/en/system-versioned-tables/+comments/3959</link><description>&lt;p&gt;According to SQL 2011, system versioned tables can be use to implement "transaction time". My understanding is that this is table is uni-temporal in nature. &lt;/p&gt;
&lt;p&gt;&lt;a href="https://en.wikipedia.org/wiki/Temporal_database"&gt;https://en.wikipedia.org/wiki/Temporal_database&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Do we have bi-temporal tables, or a feature request in place to include a feature, where we can have both "valid time" and a "transaction time" ?&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">speaker1988b </dc:creator><guid>https://mariadb.com/kb/en/system-versioned-tables/+comments/3959</guid></item><item><title>Re: System-Versioned Tables</title><link>https://mariadb.com/kb/en/system-versioned-tables/+comments/3765</link><description>&lt;p&gt;So there is no way to control/limit the versioning to say the LAST x changes made...it's all changes no matter what?&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">James Laurence</dc:creator><guid>https://mariadb.com/kb/en/system-versioned-tables/+comments/3765</guid></item><item><title>Re: System-Versioned Tables</title><link>https://mariadb.com/kb/en/system-versioned-tables/+comments/3688</link><description>&lt;p&gt;See &lt;a href="https://jira.mariadb.org/browse/MDEV-12483"&gt;https://jira.mariadb.org/browse/MDEV-12483&lt;/a&gt;&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Ralf Gebhardt</dc:creator><guid>https://mariadb.com/kb/en/system-versioned-tables/+comments/3688</guid></item><item><title>Re: System-Versioned Tables</title><link>https://mariadb.com/kb/en/system-versioned-tables/+comments/3682</link><description>&lt;p&gt;OK, I found in the documentation of partitioning limitations: 
A partitioned table cannot contain, or be referenced by, foreign keys&lt;/p&gt;
&lt;p&gt;This is a pity.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Friedemann Schmidt</dc:creator><guid>https://mariadb.com/kb/en/system-versioned-tables/+comments/3682</guid></item><item><title>Re: System-Versioned Tables</title><link>https://mariadb.com/kb/en/system-versioned-tables/+comments/3681</link><description>&lt;p&gt;Thank you. For one Table it worked. But for another table, this error occurred:
 &lt;code class="fixed" style="white-space:pre-wrap"&gt;Cannot delete or update a parent row: a foreign key constraint fails&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;What  have I done wrong?&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Friedemann Schmidt</dc:creator><guid>https://mariadb.com/kb/en/system-versioned-tables/+comments/3681</guid></item><item><title>Re: System-Versioned Tables</title><link>https://mariadb.com/kb/en/system-versioned-tables/+comments/3680</link><description>&lt;p&gt;The syntax for adding partitioning to a not partitioned table would be&lt;/p&gt;
&lt;p&gt;&lt;code class="fixed" style="white-space:pre-wrap"&gt; alter table t1 partition by SYSTEM_TIME (partition p_hist history, partition p_cur current); &lt;/code&gt;&lt;/p&gt;
&lt;p&gt;"add" only can be used for already partitioned tables.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Ralf Gebhardt</dc:creator><guid>https://mariadb.com/kb/en/system-versioned-tables/+comments/3680</guid></item><item><title>Re: System-Versioned Tables</title><link>https://mariadb.com/kb/en/system-versioned-tables/+comments/3678</link><description>&lt;p&gt;You have described how to create partitions when creating the table. Is it also possible to add it later?
I tried to add a partition, but unfortunately I couldn't do that:
Both failed:
&lt;/p&gt;&lt;pre class="fixed"&gt;alter table t1 add partition 
             (partition p_hist history, 
              partition p_cur current);
alter table t1 add partition by SYSTEM_TIME
             (partition p_hist history, 
              partition p_cur current);&lt;/pre&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Friedemann Schmidt</dc:creator><guid>https://mariadb.com/kb/en/system-versioned-tables/+comments/3678</guid></item><item><title>Re: System-Versioned Tables</title><link>https://mariadb.com/kb/en/system-versioned-tables/+comments/3635</link><description>&lt;p&gt;No, sorry. This is exactly the scenario that system versioning is supposed to prevent. The history is immutable.&lt;/p&gt;
&lt;p&gt;Having said that, two more points:&lt;/p&gt;
&lt;ul start="1"&gt;&lt;li&gt;you can make one particular column (that stores your sensitive data) non-versioned using &lt;code&gt;WITHOUT VERSIONING&lt;/code&gt; clause
&lt;/li&gt;&lt;li&gt;we might, in a future version, allow direct editing of timestamp fields (very limited, but still). then you'll be able, for example, to insert...select all data excluding that one record and get a new table without that one row.&lt;/li&gt;&lt;/ul&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Sergei Golubchik</dc:creator><guid>https://mariadb.com/kb/en/system-versioned-tables/+comments/3635</guid></item><item><title>Re: System-Versioned Tables</title><link>https://mariadb.com/kb/en/system-versioned-tables/+comments/3633</link><description>&lt;p&gt;Is there a way to delete history for a specific record? I have a situation where once I delete a record, I'm under contract to remove all records (including historical ones). I don't see that anywhere here.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Cory Collier</dc:creator><guid>https://mariadb.com/kb/en/system-versioned-tables/+comments/3633</guid></item><item><title>Re: System-Versioned Tables</title><link>https://mariadb.com/kb/en/system-versioned-tables/+comments/3586</link><description>&lt;p&gt;Not the answer I wanted, but it does make perfect sense.  The next best thing would be to somehow put the transaction_registry table directly in the database with the versioned tables themselves so it's at least self-contained.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/"> </dc:creator><guid>https://mariadb.com/kb/en/system-versioned-tables/+comments/3586</guid></item><item><title>Re: System-Versioned Tables</title><link>https://mariadb.com/kb/en/system-versioned-tables/+comments/3583</link><description>&lt;p&gt;Unfortunately, no. The only reason for &lt;code&gt;mysql.transaction_registry&lt;/code&gt; to exist is because transaction end cannot be stored directly in the versioned table. (simply, because it's not known at the time of the operation, it is only known at the time of commit, and it wold be too costly to postpone all updates till the commit time)&lt;/p&gt;
&lt;p&gt;You can create a view that joins with &lt;code&gt;mysql.transaction_registry&lt;/code&gt; so for your users the join will be hidden and implicit.&lt;/p&gt;
&lt;p&gt;If it's a question of privileges, you can just grant everyone SELECT privilege on &lt;code&gt;mysql.transaction_registry&lt;/code&gt;, and they can join, when needed.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Sergei Golubchik</dc:creator><guid>https://mariadb.com/kb/en/system-versioned-tables/+comments/3583</guid></item><item><title>Re: System-Versioned Tables</title><link>https://mariadb.com/kb/en/system-versioned-tables/+comments/3582</link><description>&lt;p&gt;Is there a way to add add the transaction_end to a transaction_precise versioned table so I can reference it directly without having to join mysql.transaction_registry?  In our system I give users a list of dates/times when records were changed, on a normally versioned table if a large change was made that change may span seconds or even minutes so it's difficult to figure out which was the "last" change for a set - transaction precise history fixes that problem but now I have no way of getting that list of dates/times without joining in a table external to the current database.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/"> </dc:creator><guid>https://mariadb.com/kb/en/system-versioned-tables/+comments/3582</guid></item><item><title>Re: System-Versioned Tables</title><link>https://mariadb.com/kb/en/system-versioned-tables/+comments/3499</link><description>&lt;p&gt;Yes, it was fixed in 10.3.8.&lt;/p&gt;
&lt;p&gt;I've updated the issue status now, sorry for confusion.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Sergei Golubchik</dc:creator><guid>https://mariadb.com/kb/en/system-versioned-tables/+comments/3499</guid></item><item><title>Re: System-Versioned Tables</title><link>https://mariadb.com/kb/en/system-versioned-tables/+comments/3480</link><description>&lt;p&gt;Was this every resolved? I don't see any movement on the ticket and the status is "stalled"&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Salvatore C</dc:creator><guid>https://mariadb.com/kb/en/system-versioned-tables/+comments/3480</guid></item><item><title>Re: System-Versioned Tables</title><link>https://mariadb.com/kb/en/system-versioned-tables/+comments/3451</link><description>&lt;p&gt;No at the moment it does not support versioning of system tables.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Sergei Golubchik</dc:creator><guid>https://mariadb.com/kb/en/system-versioned-tables/+comments/3451</guid></item><item><title>Re: System-Versioned Tables</title><link>https://mariadb.com/kb/en/system-versioned-tables/+comments/3450</link><description>&lt;p&gt;In my case, I need versioning of my stored procedure/function...
Is this feature allow versioning for system table eg: mysql.proc or information_schema.routines?&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">William Anthony</dc:creator><guid>https://mariadb.com/kb/en/system-versioned-tables/+comments/3450</guid></item><item><title>Re: System-Versioned Tables</title><link>https://mariadb.com/kb/en/system-versioned-tables/+comments/3417</link><description>&lt;p&gt;OK,I had report it at jira.mariadb.org, the issues number is &lt;a href="https://jira.mariadb.org/browse/MDEV-16485"&gt;MDEV-16485&lt;/a&gt;.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">shi wei hong</dc:creator><guid>https://mariadb.com/kb/en/system-versioned-tables/+comments/3417</guid></item><item><title>Re: System-Versioned Tables</title><link>https://mariadb.com/kb/en/system-versioned-tables/+comments/3413</link><description>&lt;p&gt;This is a bug. Could you please report it at jira.mariadb.org? We'll have it fixed in 10.3.8.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Sergei Golubchik</dc:creator><guid>https://mariadb.com/kb/en/system-versioned-tables/+comments/3413</guid></item><item><title>Re: System-Versioned Tables</title><link>https://mariadb.com/kb/en/system-versioned-tables/+comments/3337</link><description>&lt;p&gt;to drop a historical partition use DROP PARTITION. To add a historical partition use ADD PARTITION. Like&lt;/p&gt;
&lt;pre class="fixed"&gt;&lt;span class="k"&gt;alter&lt;/span&gt; &lt;span class="k"&gt;table&lt;/span&gt; &lt;span class="n"&gt;t1&lt;/span&gt; &lt;span class="k"&gt;drop&lt;/span&gt; &lt;span class="n"&gt;partition&lt;/span&gt; &lt;span class="n"&gt;p_hist1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="k"&gt;alter&lt;/span&gt; &lt;span class="k"&gt;table&lt;/span&gt; &lt;span class="n"&gt;t1&lt;/span&gt; &lt;span class="k"&gt;add&lt;/span&gt; &lt;span class="n"&gt;partition&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;partition&lt;/span&gt; &lt;span class="n"&gt;p_hist3&lt;/span&gt; &lt;span class="n"&gt;history&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Sergei Golubchik</dc:creator><guid>https://mariadb.com/kb/en/system-versioned-tables/+comments/3337</guid></item><item><title>Re: System-Versioned Tables</title><link>https://mariadb.com/kb/en/system-versioned-tables/+comments/3330</link><description>&lt;p&gt;Hello,&lt;/p&gt;
&lt;p&gt;you discribe, how I can drop a historical partition.
Can I also add a historical partition? How is the syntax to do this?&lt;/p&gt;
&lt;p&gt;Particulary with regard to historical partitions by time it is useful to add new historical partitions.&lt;/p&gt;
&lt;p&gt;Kind regards,
K. Budde&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Karsten Budde</dc:creator><guid>https://mariadb.com/kb/en/system-versioned-tables/+comments/3330</guid></item></channel></rss>