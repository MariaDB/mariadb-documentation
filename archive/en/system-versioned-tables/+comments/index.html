



<!DOCTYPE html>
<html>
<head data-cookie-domain=""
      data-cookie-path="/">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="apple-touch-icon" sizes="180x180" href="/kb/static/images/favicons/apple-touch-icon.159e713979be.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/kb/static/images/favicons/favicon-32x32.bc0ac1d5d11e.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/kb/static/images/favicons/favicon-16x16.5801f8f0f34e.png">
    <link rel="shortcut icon" href="/kb/static/images/favicons/favicon.d122d305dee4.ico" type="image/x-icon" />

    <title>
Comments - System-Versioned Tables
 - MariaDB Knowledge Base</title>

    <link href="/kb/static/css/main.f7633538c846.css" rel="stylesheet" type="text/css" />

    

    
        <meta name="robots" content="noindex, nofollow" />
    

    <!-- FB Open Graph tags -->
    <meta property="og:title" content="
Comments - System-Versioned Tables
" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://mariadb.com/kb/en/system-versioned-tables/+comments" />
    <meta property="og:image" content="http://mariadb.comaskmonty-logo.png" />
    <meta property="og:site_name" content="MariaDB KnowledgeBase" />
    <meta property="fb:admins" content="514852603" />
    <meta property="og:description" content="" />

    <meta name="description" content="" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="//fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet"/>
    
</head>
<body class="mpkb nodes node_comments jqui" id="node_comments">





<div id="menu-mobile" class="visible-sm visible-xs">

    <div>
        <div id="mobile-close-menu" class="text-right">
            <a href="javascript:void(0)" title="Close Menu" id="back-main" class="toggle-menu">X<span></span></a>
        </div>
    </div>
    <div class="mainmenu-mobile">
        <ul class="ls-none ul-menu">
            <li data-sub="submenu5"><a class="open-form-search" href="/kb/search/" title="Search">Search </a></li>
            <li data-sub="submenu0"><a href="/products" title="Products">Products</a><span class="arrow-main"></span></li>
            <li data-sub="submenu1"><a href="/services" title="Services">Services</a><span class="arrow-main"></span></li>
            <li data-sub="submenu2"><a href="/resources" title="Resources">Resources</a><span class="arrow-main"></span></li>
            <li data-sub="submenu3"><a href="/about-us" title="About">About</a><span class="arrow-main"></span></li>
            <li data-sub="submenu4"><a href="/contact" title="Contact">Contact</a></li>
        </ul>
    </div>

    <div class="nav-top-mobile">
        <div class="select-box form">

            <ul class="inline-block-md mb-none top-nav">
                <li>

                </li>
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/system-versioned-tables/+comments"> Login</a>
                    </li>
                
            </ul>



        </div>
        <p class="text-center copyright">Copyright &copy; 2024 MariaDB. All rights reserved.</p>
    </div>
</div>
<div class="violator-wrap d-none" id="top_violator">
    <div class="container">
        <div class="row">
            <div class="col-xs-12 col-sm-12">
                <div class="violator-outer">
                    <div class="violator-inner">
                        <div class="row">
                            <div class="col-xs-12 col-sm-9 col-lg-7 col-lg-offset-2" id="top_violator_content">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="content-link" target="_blank" rel="nofollow noreferrer">
                                    <span>The Ultimate Guide to High Availability with MariaDB</span>
                                </a>
                            </div>
                            <div class="col-xs-12 col-sm-3" id="top_violator_cta">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="btn btn-mariadb" target="_blank" rel="nofollow noreferrer">Download Now</a>
                            </div>
                        </div>
                    </div>
                    <button type="button" class="btn btn-link close-btn">
                        <svg xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 24 24" width="15px" height="15px"><path d="M 4.9902344 3.9902344 A 1.0001 1.0001 0 0 0 4.2929688 5.7070312 L 10.585938 12 L 4.2929688 18.292969 A 1.0001 1.0001 0 1 0 5.7070312 19.707031 L 12 13.414062 L 18.292969 19.707031 A 1.0001 1.0001 0 1 0 19.707031 18.292969 L 13.414062 12 L 19.707031 5.7070312 A 1.0001 1.0001 0 0 0 18.980469 3.9902344 A 1.0001 1.0001 0 0 0 18.292969 4.2929688 L 12 10.585938 L 5.7070312 4.2929688 A 1.0001 1.0001 0 0 0 4.9902344 3.9902344 z"/></svg>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="wrapper">
<div id="top-nav">
    <div class="container">
        <ul class="hidden-sm hidden-xs" >
            <li><a href="https://mariadb.com/kb/">Knowledge Base</a></li>
            <li><a href="https://mariadb.com/contact/">Contact</a></li>
            
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/system-versioned-tables/+comments" rel="nofollow">Login</a>
                    </li>
                
            
            
            <li id="search-form">
                <form action="/kb/en/+search/" method="get" id="search-block-form" accept-charset="UTF-8">
                    <input id="search" title="Enter the terms you wish to search for."
                           placeholder="Search . . ." type="text"
                           name="q" value="" size="15" maxlength="128" class="form-text"
                           data-autocomplete-url="/kb/en/+search/autocomplete/">
                    <input type="hidden" name="quick" value="1" />
                    <input type="hidden" name="source" value="kb" />
                </form>
            </li>
            <li><a id="search-toggler" href="/kb/search/">Search</a></li>
            
        </ul>
    </div>
</div>
<div id="navbar-bottom" class="navbar">
    <div class="container">
        
        
        
        
        <div class="row">
            <div class="col-md-3 col-sm-9 col-xs-9">
                <a class="brand" href="/" title="MariaDB">
                    <img src="/kb/static/images/logo-2018-black.95f5978ae14d.png">
                </a>
            </div>
            <div class="col-md-9 hidden-sm hidden-xs">
                <div class="main-menu">
                    <ul id="main-menu" class="nav navbar-nav inline-block-sm">
    <li class="has-sub full-menu">
        <a href="/products" title="Products">Products</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/services" title="Services">Services</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/pricing" title="Pricing">Pricing</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/resources" title="Resources">Resources</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/about-us" title="About Us">About Us</a>
    </li>
    <li class="">
        <a class="button electric-eel small top-bar-right-download" href="/downloads/">Download</a>
    </li>
</ul>
                </div>
            </div>
            <div class="col-md-3 visible-sm visible-xs col-sm-3 col-xs-3 ps-rv">
                <div class="navbar-header text-right pull-right">
                    <button type="button" class="menu-control toggle-menu" id="open-menu">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="main">
    <div class="container">
        

        <div id="subheader1" class="clearfix">
            <div class="pull-left">
                
                <div id="breadcrumbs" class="breadcrumb">
                    <a href="/kb/en/">Knowledge Base</a>
                    


    
    » <a class="crumb" href="/kb/en/documentation/">MariaDB Server Documentation</a>
    

    
    » <a class="crumb" href="/kb/en/using-mariadb-server/">Using MariaDB Server</a>
    

    
    » <a class="crumb" href="/kb/en/sql-statements-structure/">SQL Statements &amp; Structure</a>
    

    
    » <a class="crumb" href="/kb/en/temporal-tables/">Temporal Tables</a>
    


    » <a class="node_link crumb" href="/kb/en/system-versioned-tables/">System-Versioned Tables</a>


                </div>
                
            </div>
        </div>
    </div>
    <div class="container" id="container-main">
        <div class="row">
            
            
            
            
            
            <section id="content" class="limited_width col-md-12 clearfix">
                
                    <h1>
Comments - System-Versioned Tables
</h1>
                

                



                <div>
                    
<div id="comments" data-node-id="7380" data-comments-url="/kb/en/system-versioned-tables/+comments"
        data-reply-url="/kb/en/system-versioned-tables/comments/post/">
<div class="comment_top_menu hidden-print">&nbsp;
            <div class="pull-right">
                <label>
                    Include Archived
                    <input id="include_archived" type="checkbox" name="include_archived" value="1"
                           />
                </label>
            </div>
        </div>
        <a name="comment_6424"></a>
        <div class="comment approved" style="margin-left: 0px">
            <div class="info">
                

<span class="datetime" title="2023-10-12 13:14">9 months, 1 week ago</span>
                
<span class="user" id="user-14404">
<a href="/kb/user/id/14404" title="Catalin Dumitriu">Catalin Dumitriu</a>
</span>
            </div>
            <div class="title">
                <a href="#comment_6424">RE: Adding or Removing System Versioning To/From a Table</a>
                
            </div><div class="comment_text">
                <p>If the system versioning was activated by creating coluns row_start, row_end being visible and you need to drop it, execute: </p>
<p>alter table 'table name' drop system versioning, drop PERIOD FOR SYSTEM_TIME, DROP COLUMN `row_start`, DROP COLUMN `row_end`;</p>

            </div>
            <div class="comment_actions hidden-print">
                
                
                &nbsp;

                <div class="pull-right">
                    
                    <a class="flag btn btn-mini" href="/kb/en/system-versioned-tables/+comments/6424/flag"
                       data-flag-url="/kb/en/system-versioned-tables/+comments/6424/flag"
                            title="Flag as Spam/Inappropriate">
                        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                        </a>
                    
                    
                    
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
        
    

    
        <a name="comment_4141"></a>
        <div class="comment approved" style="margin-left: 0px">
            <div class="info">
                

<span class="datetime" title="2019-07-19 17:14">5 years ago</span>
                
<span class="user" id="user-7343">
<a href="/kb/user/id/7343" title="Dane Trunch">Dane Trunch</a>
</span>
            </div>
            <div class="title">
                <a href="#comment_4141">Re: Temporal Data Tables</a>
                
            </div><div class="comment_text">
                <p>I would like to create a bitemporal schema utilizing the standardized approach. Currently (10.4.6) application-time periods cannot be used to enforce temporal uniqueness and temporal referential integrity on the application time dimension (<a href="https://jira.mariadb.org/browse/MDEV-16978">MDEV-16978</a>, <a href="https://jira.mariadb.org/browse/MDEV-16983">MDEV-16983</a>). To compensate I have added the app-time start and end columns to primary, unique and foreign keys, and attempted to enforce said aspects via trigger. Unfortunately even the trivial INSERT has proven challenging: A BEFORE INSERT trigger failed to run, producing a "field &lt;system-time (tx) start col&gt; doesn't have a default value" error. An AFTER INSERT trigger did run, but only to leave me wondering how I am supposed to reliably distinguish the newly-inserted row from pre-existing ones for validation purposes in this case (my only clue, NEW.&lt;system-time (tx) start col&gt; is set to 0). Am I missing something, or should I better resort to a "userspace" approach until 10.5 arrives?</p>
<p>As an aside, AUTO_INCREMENT fires for rows inserted as a consequence of (UPDATE | DELETE) ... FOR PORTION OF. Is this intentional?</p>

            </div>
            <div class="comment_actions hidden-print">
                
                
                &nbsp;

                <div class="pull-right">
                    
                    <a class="flag btn btn-mini" href="/kb/en/system-versioned-tables/+comments/4141/flag"
                       data-flag-url="/kb/en/system-versioned-tables/+comments/4141/flag"
                            title="Flag as Spam/Inappropriate">
                        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                        </a>
                    
                    
                    
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
        
    

    
        <a name="comment_3959"></a>
        <div class="comment approved" style="margin-left: 0px">
            <div class="info">
                

<span class="datetime" title="2019-04-13 11:41">5 years, 3 months ago</span>
                
<span class="user" id="user-7064">
<a href="/kb/user/id/7064" title="speaker1988b">speaker1988b</a>
</span>
            </div>
            <div class="title">
                <a href="#comment_3959">Re: System-Versioned Tables</a>
                
            </div><div class="comment_text">
                <p>According to SQL 2011, system versioned tables can be use to implement "transaction time". My understanding is that this is table is uni-temporal in nature. </p>
<p><a href="https://en.wikipedia.org/wiki/Temporal_database">https://en.wikipedia.org/wiki/Temporal_database</a></p>
<p>Do we have bi-temporal tables, or a feature request in place to include a feature, where we can have both "valid time" and a "transaction time" ?</p>

            </div>
            <div class="comment_actions hidden-print">
                
                
                &nbsp;

                <div class="pull-right">
                    
                    <a class="flag btn btn-mini" href="/kb/en/system-versioned-tables/+comments/3959/flag"
                       data-flag-url="/kb/en/system-versioned-tables/+comments/3959/flag"
                            title="Flag as Spam/Inappropriate">
                        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                        </a>
                    
                    
                    
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
        
    

    
        <a name="comment_3765"></a>
        <div class="comment approved" style="margin-left: 0px">
            <div class="info">
                

<span class="datetime" title="2019-01-07 15:23">5 years, 6 months ago</span>
                
<span class="user" id="user-6774">
<a href="/kb/user/id/6774" title="James Laurence">James Laurence</a>
</span>
            </div>
            <div class="title">
                <a href="#comment_3765">Re: System-Versioned Tables</a>
                
            </div><div class="comment_text">
                <p>So there is no way to control/limit the versioning to say the LAST x changes made...it's all changes no matter what?</p>

            </div>
            <div class="comment_actions hidden-print">
                
                
                &nbsp;

                <div class="pull-right">
                    
                    <a class="flag btn btn-mini" href="/kb/en/system-versioned-tables/+comments/3765/flag"
                       data-flag-url="/kb/en/system-versioned-tables/+comments/3765/flag"
                            title="Flag as Spam/Inappropriate">
                        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                        </a>
                    
                    
                    
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
        
    

    
        <a name="comment_3633"></a>
        <div class="comment approved" style="margin-left: 0px">
            <div class="info">
                

<span class="datetime" title="2018-11-07 22:10">5 years, 8 months ago</span>
                
<span class="user" id="user-6619">
<a href="/kb/user/id/6619" title="Cory Collier">Cory Collier</a>
</span>
            </div>
            <div class="title">
                <a href="#comment_3633">Re: System-Versioned Tables</a>
                
            </div><div class="comment_text">
                <p>Is there a way to delete history for a specific record? I have a situation where once I delete a record, I'm under contract to remove all records (including historical ones). I don't see that anywhere here.</p>

            </div>
            <div class="comment_actions hidden-print">
                
                
                &nbsp;

                <div class="pull-right">
                    
                    <a class="flag btn btn-mini" href="/kb/en/system-versioned-tables/+comments/3633/flag"
                       data-flag-url="/kb/en/system-versioned-tables/+comments/3633/flag"
                            title="Flag as Spam/Inappropriate">
                        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                        </a>
                    
                    
                    
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
        <a name="comment_3635"></a>
        <div class="comment approved" style="margin-left: 10px">
            <div class="info">
                

<span class="datetime" title="2018-11-08 13:45">5 years, 8 months ago</span>
                
<span class="user" id="user-27">
<a href="/kb/user/id/27" title="Sergei Golubchik">Sergei Golubchik</a>
</span>
            </div>
            <div class="title">
                <a href="#comment_3635">Re: System-Versioned Tables</a>
                
            </div><div class="comment_text">
                <p>No, sorry. This is exactly the scenario that system versioning is supposed to prevent. The history is immutable.</p>
<p>Having said that, two more points:</p>
<ul start="1"><li>you can make one particular column (that stores your sensitive data) non-versioned using <code>WITHOUT VERSIONING</code> clause
</li><li>we might, in a future version, allow direct editing of timestamp fields (very limited, but still). then you'll be able, for example, to insert...select all data excluding that one record and get a new table without that one row.</li></ul>

            </div>
            <div class="comment_actions hidden-print">
                
                
                &nbsp;

                <div class="pull-right">
                    
                    <a class="flag btn btn-mini" href="/kb/en/system-versioned-tables/+comments/3635/flag"
                       data-flag-url="/kb/en/system-versioned-tables/+comments/3635/flag"
                            title="Flag as Spam/Inappropriate">
                        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                        </a>
                    
                    
                    
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
        
    

    

    
        <a name="comment_3582"></a>
        <div class="comment approved" style="margin-left: 0px">
            <div class="info">
                

<span class="datetime" title="2018-10-10 13:50">5 years, 9 months ago</span>
                
<span class="user" id="user-6539">
<a href="/kb/user/id/6539" title="">Al Bunch</a>
</span>
            </div>
            <div class="title">
                <a href="#comment_3582">Re: System-Versioned Tables</a>
                
            </div><div class="comment_text">
                <p>Is there a way to add add the transaction_end to a transaction_precise versioned table so I can reference it directly without having to join mysql.transaction_registry?  In our system I give users a list of dates/times when records were changed, on a normally versioned table if a large change was made that change may span seconds or even minutes so it's difficult to figure out which was the "last" change for a set - transaction precise history fixes that problem but now I have no way of getting that list of dates/times without joining in a table external to the current database.</p>

            </div>
            <div class="comment_actions hidden-print">
                
                
                &nbsp;

                <div class="pull-right">
                    
                    <a class="flag btn btn-mini" href="/kb/en/system-versioned-tables/+comments/3582/flag"
                       data-flag-url="/kb/en/system-versioned-tables/+comments/3582/flag"
                            title="Flag as Spam/Inappropriate">
                        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                        </a>
                    
                    
                    
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
        <a name="comment_3583"></a>
        <div class="comment approved" style="margin-left: 10px">
            <div class="info">
                

<span class="datetime" title="2018-10-10 15:01">5 years, 9 months ago</span>
                
<span class="user" id="user-27">
<a href="/kb/user/id/27" title="Sergei Golubchik">Sergei Golubchik</a>
</span>
            </div>
            <div class="title">
                <a href="#comment_3583">Re: System-Versioned Tables</a>
                
            </div><div class="comment_text">
                <p>Unfortunately, no. The only reason for <code>mysql.transaction_registry</code> to exist is because transaction end cannot be stored directly in the versioned table. (simply, because it's not known at the time of the operation, it is only known at the time of commit, and it wold be too costly to postpone all updates till the commit time)</p>
<p>You can create a view that joins with <code>mysql.transaction_registry</code> so for your users the join will be hidden and implicit.</p>
<p>If it's a question of privileges, you can just grant everyone SELECT privilege on <code>mysql.transaction_registry</code>, and they can join, when needed.</p>

            </div>
            <div class="comment_actions hidden-print">
                
                
                &nbsp;

                <div class="pull-right">
                    
                    <a class="flag btn btn-mini" href="/kb/en/system-versioned-tables/+comments/3583/flag"
                       data-flag-url="/kb/en/system-versioned-tables/+comments/3583/flag"
                            title="Flag as Spam/Inappropriate">
                        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                        </a>
                    
                    
                    
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
        <a name="comment_3586"></a>
        <div class="comment approved" style="margin-left: 20px">
            <div class="info">
                

<span class="datetime" title="2018-10-10 17:54">5 years, 9 months ago</span>
                
<span class="user" id="user-6539">
<a href="/kb/user/id/6539" title="">Al Bunch</a>
</span>
            </div>
            <div class="title">
                <a href="#comment_3586">Re: System-Versioned Tables</a>
                
            </div><div class="comment_text">
                <p>Not the answer I wanted, but it does make perfect sense.  The next best thing would be to somehow put the transaction_registry table directly in the database with the versioned tables themselves so it's at least self-contained.</p>

            </div>
            <div class="comment_actions hidden-print">
                
                
                &nbsp;

                <div class="pull-right">
                    
                    <a class="flag btn btn-mini" href="/kb/en/system-versioned-tables/+comments/3586/flag"
                       data-flag-url="/kb/en/system-versioned-tables/+comments/3586/flag"
                            title="Flag as Spam/Inappropriate">
                        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                        </a>
                    
                    
                    
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
        
    

    

    

    
        <a name="comment_3450"></a>
        <div class="comment approved" style="margin-left: 0px">
            <div class="info">
                

<span class="datetime" title="2018-07-12 02:15">6 years ago</span>
                
<span class="user" id="user-6306">
<a href="/kb/user/id/6306" title="William Anthony">William Anthony</a>
</span>
            </div>
            <div class="title">
                <a href="#comment_3450">Re: System-Versioned Tables</a>
                
            </div><div class="comment_text">
                <p>In my case, I need versioning of my stored procedure/function...
Is this feature allow versioning for system table eg: mysql.proc or information_schema.routines?</p>

            </div>
            <div class="comment_actions hidden-print">
                
                
                &nbsp;

                <div class="pull-right">
                    
                    <a class="flag btn btn-mini" href="/kb/en/system-versioned-tables/+comments/3450/flag"
                       data-flag-url="/kb/en/system-versioned-tables/+comments/3450/flag"
                            title="Flag as Spam/Inappropriate">
                        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                        </a>
                    
                    
                    
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
        <a name="comment_3451"></a>
        <div class="comment approved" style="margin-left: 10px">
            <div class="info">
                

<span class="datetime" title="2018-07-12 08:45">6 years ago</span>
                
<span class="user" id="user-27">
<a href="/kb/user/id/27" title="Sergei Golubchik">Sergei Golubchik</a>
</span>
            </div>
            <div class="title">
                <a href="#comment_3451">Re: System-Versioned Tables</a>
                
            </div><div class="comment_text">
                <p>No at the moment it does not support versioning of system tables.</p>

            </div>
            <div class="comment_actions hidden-print">
                
                
                &nbsp;

                <div class="pull-right">
                    
                    <a class="flag btn btn-mini" href="/kb/en/system-versioned-tables/+comments/3451/flag"
                       data-flag-url="/kb/en/system-versioned-tables/+comments/3451/flag"
                            title="Flag as Spam/Inappropriate">
                        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                        </a>
                    
                    
                    
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
        
    

    

    
        <a name="comment_3330"></a>
        <div class="comment approved" style="margin-left: 0px">
            <div class="info">
                

<span class="datetime" title="2018-04-06 09:16">6 years, 3 months ago</span>
                
<span class="user" id="user-5966">
<a href="/kb/user/id/5966" title="Karsten Budde">Karsten Budde</a>
</span>
            </div>
            <div class="title">
                <a href="#comment_3330">Re: System-Versioned Tables</a>
                
            </div><div class="comment_text">
                <p>Hello,</p>
<p>you discribe, how I can drop a historical partition.
Can I also add a historical partition? How is the syntax to do this?</p>
<p>Particulary with regard to historical partitions by time it is useful to add new historical partitions.</p>
<p>Kind regards,
K. Budde</p>

            </div>
            <div class="comment_actions hidden-print">
                
                
                &nbsp;

                <div class="pull-right">
                    
                    <a class="flag btn btn-mini" href="/kb/en/system-versioned-tables/+comments/3330/flag"
                       data-flag-url="/kb/en/system-versioned-tables/+comments/3330/flag"
                            title="Flag as Spam/Inappropriate">
                        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                        </a>
                    
                    
                    
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
        <a name="comment_3337"></a>
        <div class="comment approved" style="margin-left: 10px">
            <div class="info">
                

<span class="datetime" title="2018-04-09 10:04">6 years, 3 months ago</span>
                
<span class="user" id="user-27">
<a href="/kb/user/id/27" title="Sergei Golubchik">Sergei Golubchik</a>
</span>
            </div>
            <div class="title">
                <a href="#comment_3337">Re: System-Versioned Tables</a>
                
            </div><div class="comment_text">
                <p>to drop a historical partition use DROP PARTITION. To add a historical partition use ADD PARTITION. Like</p>
<pre class="fixed"><span class="k">alter</span> <span class="k">table</span> <span class="n">t1</span> <span class="k">drop</span> <span class="n">partition</span> <span class="n">p_hist1</span><span class="p">;</span>

<span class="k">alter</span> <span class="k">table</span> <span class="n">t1</span> <span class="k">add</span> <span class="n">partition</span> <span class="p">(</span><span class="n">partition</span> <span class="n">p_hist3</span> <span class="n">history</span><span class="p">);</span>
</pre>
            </div>
            <div class="comment_actions hidden-print">
                
                
                &nbsp;

                <div class="pull-right">
                    
                    <a class="flag btn btn-mini" href="/kb/en/system-versioned-tables/+comments/3337/flag"
                       data-flag-url="/kb/en/system-versioned-tables/+comments/3337/flag"
                            title="Flag as Spam/Inappropriate">
                        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                        </a>
                    
                    
                    
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
        <a name="comment_3678"></a>
        <div class="comment approved" style="margin-left: 20px">
            <div class="info">
                

<span class="datetime" title="2018-12-05 09:43">5 years, 7 months ago</span>
                
<span class="user" id="user-6684">
<a href="/kb/user/id/6684" title="Friedemann Schmidt">Friedemann Schmidt</a>
</span>
            </div>
            <div class="title">
                <a href="#comment_3678">Re: System-Versioned Tables</a>
                
            </div><div class="comment_text">
                <p>You have described how to create partitions when creating the table. Is it also possible to add it later?
I tried to add a partition, but unfortunately I couldn't do that:
Both failed:
</p><pre class="fixed">alter table t1 add partition 
             (partition p_hist history, 
              partition p_cur current);
alter table t1 add partition by SYSTEM_TIME
             (partition p_hist history, 
              partition p_cur current);</pre>

            </div>
            <div class="comment_actions hidden-print">
                
                
                &nbsp;

                <div class="pull-right">
                    
                    <a class="flag btn btn-mini" href="/kb/en/system-versioned-tables/+comments/3678/flag"
                       data-flag-url="/kb/en/system-versioned-tables/+comments/3678/flag"
                            title="Flag as Spam/Inappropriate">
                        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                        </a>
                    
                    
                    
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
        <a name="comment_3680"></a>
        <div class="comment approved" style="margin-left: 30px">
            <div class="info">
                

<span class="datetime" title="2018-12-05 10:11">5 years, 7 months ago</span>
                
<span class="user" id="user-2814">
<a href="/kb/user/id/2814" title="Ralf Gebhardt">Ralf Gebhardt</a>
</span>
            </div>
            <div class="title">
                <a href="#comment_3680">Re: System-Versioned Tables</a>
                
            </div><div class="comment_text">
                <p>The syntax for adding partitioning to a not partitioned table would be</p>
<p><code class="fixed" style="white-space:pre-wrap"> alter table t1 partition by SYSTEM_TIME (partition p_hist history, partition p_cur current); </code></p>
<p>"add" only can be used for already partitioned tables.</p>

            </div>
            <div class="comment_actions hidden-print">
                
                
                &nbsp;

                <div class="pull-right">
                    
                    <a class="flag btn btn-mini" href="/kb/en/system-versioned-tables/+comments/3680/flag"
                       data-flag-url="/kb/en/system-versioned-tables/+comments/3680/flag"
                            title="Flag as Spam/Inappropriate">
                        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                        </a>
                    
                    
                    
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
        <a name="comment_3681"></a>
        <div class="comment approved" style="margin-left: 40px">
            <div class="info">
                

<span class="datetime" title="2018-12-05 15:54">5 years, 7 months ago</span>
                
<span class="user" id="user-6684">
<a href="/kb/user/id/6684" title="Friedemann Schmidt">Friedemann Schmidt</a>
</span>
            </div>
            <div class="title">
                <a href="#comment_3681">Re: System-Versioned Tables</a>
                
            </div><div class="comment_text">
                <p>Thank you. For one Table it worked. But for another table, this error occurred:
 <code class="fixed" style="white-space:pre-wrap">Cannot delete or update a parent row: a foreign key constraint fails</code></p>
<p>What  have I done wrong?</p>

            </div>
            <div class="comment_actions hidden-print">
                
                
                &nbsp;

                <div class="pull-right">
                    
                    <a class="flag btn btn-mini" href="/kb/en/system-versioned-tables/+comments/3681/flag"
                       data-flag-url="/kb/en/system-versioned-tables/+comments/3681/flag"
                            title="Flag as Spam/Inappropriate">
                        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                        </a>
                    
                    
                    
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
        <a name="comment_3682"></a>
        <div class="comment approved" style="margin-left: 50px">
            <div class="info">
                

<span class="datetime" title="2018-12-05 21:38">5 years, 7 months ago</span>
                
<span class="user" id="user-6684">
<a href="/kb/user/id/6684" title="Friedemann Schmidt">Friedemann Schmidt</a>
</span>
            </div>
            <div class="title">
                <a href="#comment_3682">Re: System-Versioned Tables</a>
                
            </div><div class="comment_text">
                <p>OK, I found in the documentation of partitioning limitations: 
A partitioned table cannot contain, or be referenced by, foreign keys</p>
<p>This is a pity.</p>

            </div>
            <div class="comment_actions hidden-print">
                
                
                &nbsp;

                <div class="pull-right">
                    
                    <a class="flag btn btn-mini" href="/kb/en/system-versioned-tables/+comments/3682/flag"
                       data-flag-url="/kb/en/system-versioned-tables/+comments/3682/flag"
                            title="Flag as Spam/Inappropriate">
                        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                        </a>
                    
                    
                    
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
        <a name="comment_3688"></a>
        <div class="comment approved" style="margin-left: 60px">
            <div class="info">
                

<span class="datetime" title="2018-12-06 13:45">5 years, 7 months ago</span>
                
<span class="user" id="user-2814">
<a href="/kb/user/id/2814" title="Ralf Gebhardt">Ralf Gebhardt</a>
</span>
            </div>
            <div class="title">
                <a href="#comment_3688">Re: System-Versioned Tables</a>
                
            </div><div class="comment_text">
                <p>See <a href="https://jira.mariadb.org/browse/MDEV-12483">https://jira.mariadb.org/browse/MDEV-12483</a></p>

            </div>
            <div class="comment_actions hidden-print">
                
                
                &nbsp;

                <div class="pull-right">
                    
                    <a class="flag btn btn-mini" href="/kb/en/system-versioned-tables/+comments/3688/flag"
                       data-flag-url="/kb/en/system-versioned-tables/+comments/3688/flag"
                            title="Flag as Spam/Inappropriate">
                        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                        </a>
                    
                    
                    
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
        
    

    

    

    

    

    

    

    

</div>


                    <div id="content_disclaimer" class="graybox">
                        Content reproduced on this site is the property of its respective owners,
                        and this content is not reviewed in advance by MariaDB. The views, information and opinions
                        expressed by this content do not necessarily represent those of MariaDB or any other party.
                    </div>
                </div>
            </section>

            
        </div>
    </div>
</div>

<!-- Footer -->
<footer id="footer">
    <div class="footer">
        <div class="container">
            <div class="row">
                <div class="col-xs-12">
                    <ul class="list-inline text-center footer-nav">
                        <li>
                            <h5>
                                <a href="https://mariadb.com/products" title="Products">Products</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/services" title="Services">Services</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/pricing" title="Pricing">Pricing</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/resources" title="Resources">Resources</a>
                            </h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/about-us" title="About MariaDB">About Us</a></h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/download" title="Download">Download MariaDB</a></h5>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="row row-10">
                
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div id="block-footerformcontact" class="block block-block-content block-block-contentd754ee1b-3cc9-40e7-9ef4-f504f1197fb1">
                        
                            <h5 style="font-weight: 400;">Subscribe to our newsletter!</h5>
                            <script src="//app-sj15.marketo.com/js/forms2/js/forms2.min.js"></script><form id="mktoForm_1498"></form>
                            <script>
                                <!--//--><![CDATA[// ><!--
                                MktoForms2.loadForm("//app-sj15.marketo.com", "573-PXI-984", 1498);
                                //--><!]]]]><![CDATA[>
                                //--><!]]>
                            </script>
                        
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div class="footer-copyright">
                        <div class="text-center">
                            <ul class="list-inline no-margin">
                                <li>
                                    <a href="/legal" title="Legal">Legal</a>
                                </li>
                                <li>
                                    <a href="/privacy-policy" title="Privacy Policy">Privacy Policy</a>
                                </li>
                                <li>
                                    <a href="/cookie-policy/" title="Cookies">Cookie Policy</a>
                                </li>
                            </ul>
                            <p>Copyright &copy; 2024 MariaDB. All rights reserved.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
</footer>
</div>

<div id="ajax_loading">
    <img src="/kb/static/images/ajax-loader.a51c5608d01a.gif" />
</div>

    <!-- Google Tag Manager -->
    <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-MK2847"
                      height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
            '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MK2847');</script>
    <!-- End Google Tag Manager -->

</body>

<script type="text/javascript" src="/kb/static/js/main.1587e3a666fc.js" charset="utf-8"></script>

</html>