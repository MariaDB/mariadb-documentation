<!DOCTYPE html>
<html>
<head data-cookie-domain=""
      data-cookie-path="/">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="apple-touch-icon" sizes="180x180" href="/kb/static/images/favicons/apple-touch-icon.159e713979be.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/kb/static/images/favicons/favicon-32x32.bc0ac1d5d11e.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/kb/static/images/favicons/favicon-16x16.5801f8f0f34e.png">
    <link rel="shortcut icon" href="/kb/static/images/favicons/favicon.d122d305dee4.ico" type="image/x-icon" />

    <title>System-Versioned Tables - MariaDB Knowledge Base</title>

    <link href="/kb/static/css/main.f7633538c846.css" rel="stylesheet" type="text/css" />

    

    

    <!-- FB Open Graph tags -->
    <meta property="og:title" content="System-Versioned Tables" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://mariadb.com/kb/en/system-versioned-tables/" />
    <meta property="og:image" content="http://mariadb.comaskmonty-logo.png" />
    <meta property="og:site_name" content="MariaDB KnowledgeBase" />
    <meta property="fb:admins" content="514852603" />
    <meta property="og:description" content="System-versioned tables record the history of all changes to table data." />

    <meta name="description" content="System-versioned tables record the history of all changes to table data." />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="//fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet"/>
    
</head>
<body class="mpkb nodes products nodes_view jqui" id="nodes_view">





<div id="menu-mobile" class="visible-sm visible-xs">

    <div>
        <div id="mobile-close-menu" class="text-right">
            <a href="javascript:void(0)" title="Close Menu" id="back-main" class="toggle-menu">X<span></span></a>
        </div>
    </div>
    <div class="mainmenu-mobile">
        <ul class="ls-none ul-menu">
            <li data-sub="submenu5"><a class="open-form-search" href="/kb/search/" title="Search">Search </a></li>
            <li data-sub="submenu0"><a href="/products" title="Products">Products</a><span class="arrow-main"></span></li>
            <li data-sub="submenu1"><a href="/services" title="Services">Services</a><span class="arrow-main"></span></li>
            <li data-sub="submenu2"><a href="/resources" title="Resources">Resources</a><span class="arrow-main"></span></li>
            <li data-sub="submenu3"><a href="/about-us" title="About">About</a><span class="arrow-main"></span></li>
            <li data-sub="submenu4"><a href="/contact" title="Contact">Contact</a></li>
        </ul>
    </div>

    <div class="nav-top-mobile">
        <div class="select-box form">

            <ul class="inline-block-md mb-none top-nav">
                <li>

                </li>
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/system-versioned-tables/"> Login</a>
                    </li>
                
            </ul>



        </div>
        <p class="text-center copyright">Copyright &copy; 2025 MariaDB. All rights reserved.</p>
    </div>
</div>
<div class="violator-wrap d-none" id="top_violator">
    <div class="container">
        <div class="row">
            <div class="col-xs-12 col-sm-12">
                <div class="violator-outer">
                    <div class="violator-inner">
                        <div class="row">
                            <div class="col-xs-12 col-sm-9 col-lg-7 col-lg-offset-2" id="top_violator_content">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="content-link" target="_blank" rel="nofollow noreferrer">
                                    <span>The Ultimate Guide to High Availability with MariaDB</span>
                                </a>
                            </div>
                            <div class="col-xs-12 col-sm-3" id="top_violator_cta">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="btn btn-mariadb" target="_blank" rel="nofollow noreferrer">Download Now</a>
                            </div>
                        </div>
                    </div>
                    <button type="button" class="btn btn-link close-btn">
                        <svg xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 24 24" width="15px" height="15px"><path d="M 4.9902344 3.9902344 A 1.0001 1.0001 0 0 0 4.2929688 5.7070312 L 10.585938 12 L 4.2929688 18.292969 A 1.0001 1.0001 0 1 0 5.7070312 19.707031 L 12 13.414062 L 18.292969 19.707031 A 1.0001 1.0001 0 1 0 19.707031 18.292969 L 13.414062 12 L 19.707031 5.7070312 A 1.0001 1.0001 0 0 0 18.980469 3.9902344 A 1.0001 1.0001 0 0 0 18.292969 4.2929688 L 12 10.585938 L 5.7070312 4.2929688 A 1.0001 1.0001 0 0 0 4.9902344 3.9902344 z"/></svg>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="wrapper">
<div id="top-nav">
    <div class="container">
        <ul class="hidden-sm hidden-xs" >
            <li><a href="https://mariadb.com/kb/">Knowledge Base</a></li>
            <li><a href="https://mariadb.com/contact/">Contact</a></li>
            
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/system-versioned-tables/" rel="nofollow">Login</a>
                    </li>
                
            
            
            <li id="search-form">
                <form action="/kb/en/+search/" method="get" id="search-block-form" accept-charset="UTF-8">
                    <input id="search" title="Enter the terms you wish to search for."
                           placeholder="Search . . ." type="text"
                           name="q" value="" size="15" maxlength="128" class="form-text"
                           data-autocomplete-url="/kb/en/+search/autocomplete/">
                    <input type="hidden" name="quick" value="1" />
                    <input type="hidden" name="source" value="kb" />
                </form>
            </li>
            <li><a id="search-toggler" href="/kb/search/">Search</a></li>
            
        </ul>
    </div>
</div>
<div id="navbar-bottom" class="navbar">
    <div class="container">
        
        
        
        
        <div class="row">
            <div class="col-md-3 col-sm-9 col-xs-9">
                <a class="brand" href="/" title="MariaDB">
                    <img src="/kb/static/images/logo-2018-black.95f5978ae14d.png">
                </a>
            </div>
            <div class="col-md-9 hidden-sm hidden-xs">
                <div class="main-menu">
                    <ul id="main-menu" class="nav navbar-nav inline-block-sm">
    <li class="has-sub full-menu">
        <a href="/products" title="Products">Products</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/solutions" title="Solutions">Solutions</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/resources" title="Resources">Resources</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/about-us" title="Company">Company</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/pricing" title="Pricing">Pricing</a>
    </li>
    
    <li class="">
        <a class="button electric-eel small top-bar-right-download" href="/downloads/">Download</a>
    </li>
</ul>
                </div>
            </div>
            <div class="col-md-3 visible-sm visible-xs col-sm-3 col-xs-3 ps-rv">
                <div class="navbar-header text-right pull-right">
                    <button type="button" class="menu-control toggle-menu" id="open-menu">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="main">
    <div class="container">
        

        <div id="subheader1" class="clearfix">
            <div class="pull-left">
                
                <div id="breadcrumbs" class="breadcrumb">
                    <a href="/kb/en/">Knowledge Base</a>
                    


    
    » <a class="crumb" href="/kb/en/documentation/">MariaDB Server Documentation</a>
    

    
    » <a class="crumb" href="/kb/en/using-mariadb-server/">Using MariaDB Server</a>
    

    
    » <a class="crumb" href="/kb/en/sql-statements-structure/">SQL Statements &amp; Structure</a>
    

    
    » <a class="crumb" href="/kb/en/temporal-tables/">Temporal Tables</a>
    


    » <a class="node_link crumb" href="/kb/en/system-versioned-tables/">System-Versioned Tables</a>


                </div>
                
            </div>
        </div>
    </div>
    <div class="container" id="container-main">
        <div class="row">
            
            
                
                <aside id="sidebar-first" class="sidebar col-md-2 hidden-xs hidden-sm hidden-print">
                    
                        
                        <ul id="category_menu" class="nav nav-pills nav-stacked">
                            <li><a href="/kb/en/">Home</a></li>
                            
                                
                                    <li><a href="/kb/en/+questions/">Open Questions</a></li>
                                
                                <li><a href="/kb/en/documentation/">MariaDB Server</a></li>
                                <li><a href="/kb/en/maxscale/">MariaDB MaxScale</a></li>
                                <li><a href="/kb/en/mariadb-columnstore/">MariaDB ColumnStore</a></li>
                                <li><a href="/kb/en/connectors/">Connectors</a></li>
                            

                        </ul>
                    

                    
<div>



<div class="well well-small box actions"><div>

        <a class="btn btn-block btn-blue btn-sm" href="/kb/en/system-versioned-tables/+history" rel="nofollow">History</a>
        
        
        
        <a class="btn btn-block btn-blue btn-sm" href="/kb/en/system-versioned-tables/+source/">Source</a>
        
        <a class="btn btn-block btn-blue btn-sm flag" href="/kb/en/system-versioned-tables/+flag"
                data-flag-url="/kb/en/system-versioned-tables/+flag" rel="nofollow">
                Flag as Spam / Inappropriate</a>
        
        <a class="btn btn-block btn-blue btn-sm" href="/kb/en/system-versioned-tables/+translate/">
                Translate</a>
        

</div>
</div>





<div class="well well-small box node_info"><div>

    <dl>
        <dt>Created</dt>
        <dd>

<span class="datetime" title="2018-01-18 15:01">7 years, 3 months ago</span></dd>

        <dt>Modified</dt>
        <dd>

<span class="datetime" title="2025-03-17 20:39">1 month ago</span></dd>

        <dt>Type</dt>
        <dd>article</dd>

        <dt>Status</dt>
        <dd>active</dd>

        <dt>License</dt>
        <dd>
            
                <a href="/kb/en/system-versioned-tables/+license/">CC BY-SA / Gnu FDL</a>
            
        </dd>

        
    </dl>

    
    <ul class="rss_feeds">
        <li><a href="/kb/en/system-versioned-tables/+history/feed/">
            History</a>
        </li>
        <li><a href="/kb/en/system-versioned-tables/+comments/feed/">
            Comments</a>
        </li>
    </ul>
    

</div>
</div>





    
    
    

<div class="well well-small box attachments"><div><div class="edit_link pull-right"><a href="/kb/en/system-versioned-tables/+edit/attachments/">Edit</a></div><h5>Attachments</h5></div><div>

        
            <div class="no_data">No attachments exist</div>
        
    
</div>
</div>

    



    
    



    
    

<div class="well well-small box"><div><h5>Product Versions</h5></div><div>

        <ul id="product_chooser">
            
                <li class="mariadb_from_11_7">
                    <label><input type="checkbox" data-product-class="mariadb_from_11_7"
                            >MariaDB starting with 11.7</label>
                </li>
            
                <li class="mariadb_from_10_5_0">
                    <label><input type="checkbox" data-product-class="mariadb_from_10_5_0"
                            >MariaDB starting with 10.5.0</label>
                </li>
            
                <li class="mariadb_from_10_9_1">
                    <label><input type="checkbox" data-product-class="mariadb_from_10_9_1"
                            >MariaDB starting with 10.9.1</label>
                </li>
            
                <li class="mariadb_from_11_7">
                    <label><input type="checkbox" data-product-class="mariadb_from_11_7"
                            >MariaDB starting with 11.7</label>
                </li>
            
                <li class="mariadb_from_10_5_0">
                    <label><input type="checkbox" data-product-class="mariadb_from_10_5_0"
                            >MariaDB starting with 10.5.0</label>
                </li>
            
                <li class="mariadb_from_10_9_1">
                    <label><input type="checkbox" data-product-class="mariadb_from_10_9_1"
                            >MariaDB starting with 10.9.1</label>
                </li>
            
        </ul>
    
</div>
</div>





    

<div class="well well-small box"><div><h5>Parents</h5></div><div>

        <ul>
            
                <li><a href="/kb/en/temporal-tables/">Temporal Tables</a></li>
            
                <li><a href="/kb/en/table-statements/">Table Statements</a></li>
            
        </ul>
    
</div>
</div>



</div>


                    

































                </aside>
            
            
            
                
            
            
                
            
            <section id="content" class="limited_width col-md-8 clearfix">
                
                    <h1>System-Versioned Tables</h1>
                

                



                <div>
                    
    

    
    
    

    <div class="node creole">
        
        
        


    
    <div class="answer formatted">
        <div class="table_of_contents well well-small">
<h3>Contents</h3>
 <ol class="toc">

    <li class=""><a href="#system-versioned-tables" title="System-Versioned Tables">System-Versioned Tables</a>    <ol class="toc">

        <li class=""><a href="#creating-a-system-versioned-table" title="Creating a System-Versioned Table">Creating a System-Versioned Table</a></li>

        <li class=""><a href="#adding-or-removing-system-versioning-tofrom-a-table" title="Adding or Removing System Versioning To/From a Table">Adding or Removing System Versioning To/From a Table</a></li>

        <li class=""><a href="#inserting-data" title="Inserting Data">Inserting Data</a></li>

        <li class=""><a href="#querying-historical-data" title="Querying Historical Data">Querying Historical Data</a>        <ol class="toc">

            <li class=""><a href="#select" title="SELECT">SELECT</a></li>

            <li class=""><a href="#views-and-subqueries" title="Views and Subqueries">Views and Subqueries</a></li>

            <li class=""><a href="#use-in-replication-and-binary-logs" title="Use in Replication and Binary Logs">Use in Replication and Binary Logs</a>        </ol>
</li>

        <li class=""><a href="#transaction-precise-history-in-innodb" title="Transaction-Precise History in InnoDB">Transaction-Precise History in InnoDB</a></li>

        <li class=""><a href="#storing-the-history-separately" title="Storing the History Separately">Storing the History Separately</a>        <ol class="toc">

            <li class=""><a href="#default-partitions" title="Default Partitions">Default Partitions</a></li>

            <li class=""><a href="#automatically-creating-partitions" title="Automatically Creating Partitions">Automatically Creating Partitions</a>        </ol>
</li>

        <li class=""><a href="#removing-old-history" title="Removing Old History">Removing Old History</a></li>

        <li class=""><a href="#excluding-columns-from-versioning" title="Excluding Columns From Versioning">Excluding Columns From Versioning</a>    </ol>
</li>

    <li class=""><a href="#system-variables" title="System Variables">System Variables</a>    <ol class="toc">

        <li class=""><a href="#system_versioning_alter_history" title="system_versioning_alter_history">system_versioning_alter_history</a></li>

        <li class=""><a href="#system_versioning_asof" title="system_versioning_asof">system_versioning_asof</a></li>

        <li class=""><a href="#system_versioning_innodb_algorithm_simple" title="system_versioning_innodb_algorithm_simple">system_versioning_innodb_algorithm_simple</a></li>

        <li class=""><a href="#system_versioning_insert_history" title="system_versioning_insert_history">system_versioning_insert_history</a>    </ol>
</li>

    <li class=""><a href="#limitations" title="Limitations">Limitations</a></li>

    <li class=""><a href="#see-also" title="See Also">See Also</a> </ol>
</li>
</div><p>
MariaDB supports temporal data tables in the form of system-versioning tables (allowing you to query and operate on historic data, discussed below), <a href="/kb/en/application-time-periods/">application-time periods</a> (allow you to query and operate on a temporal range of data), and <a href="/kb/en/bitemporal-tables/">bitemporal tables</a> (which combine both system-versioning and <a href="/kb/en/application-time-periods/">application-time periods</a>).</p>
<h2 class="anchored_heading" id="system-versioned-tables">System-Versioned Tables</h2>
<p>System-versioned tables store the history of all changes, not only data which is currently applicable. This allows data analysis for any point in time, auditing of changes and comparison of data from different points in time.
Typical uses cases are:</p>
<ul start="1"><li>Forensic analysis &amp; legal requirements to store data for N years.
</li><li>Data analytics (retrospective, trends etc.), e.g. to get your staff information as of one year ago.
</li><li>Point-in-time recovery - recover a table state as of particular point in time.
</li></ul>
<p>System-versioned tables were first introduced in the SQL:2011 standard. </p>
<h3 class="anchored_heading" id="creating-a-system-versioned-table">Creating a System-Versioned Table</h3>
<p><br>
The <a href="/kb/en/create-table/">CREATE TABLE</a> syntax has been extended to permit creating a system-versioned table. To be system-versioned, according to SQL:2011, a table must have two generated columns, a period, and a special table option clause:
<br><br></p>
<pre class="fixed"><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">t</span><span class="p">(</span>
   <span class="n">x</span> <span class="nb">INT</span><span class="p">,</span>
   <span class="n">start_timestamp</span> <span class="k">TIMESTAMP</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span> <span class="k">GENERATED</span> <span class="n">ALWAYS</span> <span class="k">AS</span> <span class="k">ROW</span> <span class="k">START</span><span class="p">,</span>
   <span class="n">end_timestamp</span> <span class="k">TIMESTAMP</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span> <span class="k">GENERATED</span> <span class="n">ALWAYS</span> <span class="k">AS</span> <span class="k">ROW</span> <span class="k">END</span><span class="p">,</span>
   <span class="n">PERIOD</span> <span class="k">FOR</span> <span class="n">SYSTEM_TIME</span><span class="p">(</span><span class="n">start_timestamp</span><span class="p">,</span> <span class="n">end_timestamp</span><span class="p">)</span>
<span class="p">)</span> <span class="k">WITH</span> <span class="k">SYSTEM</span> <span class="n">VERSIONING</span><span class="p">;</span>
</pre><p>In MariaDB one can also use a simplified syntax:</p>
<pre class="fixed"><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">t</span> <span class="p">(</span>
   <span class="n">x</span> <span class="nb">INT</span>
<span class="p">)</span> <span class="k">WITH</span> <span class="k">SYSTEM</span> <span class="n">VERSIONING</span><span class="p">;</span>
</pre><p>In the latter case no extra columns will be created and they won't clutter the output of, say, <code>SELECT * FROM t</code>. The versioning information will still be stored, and it can be accessed via the pseudo-columns <code>ROW_START</code> and <code>ROW_END</code>:</p>
<pre class="fixed"><span class="k">SELECT</span> <span class="n">x</span><span class="p">,</span> <span class="n">ROW_START</span><span class="p">,</span> <span class="n">ROW_END</span> <span class="k">FROM</span> <span class="n">t</span><span class="p">;</span>
</pre><h3 class="anchored_heading" id="adding-or-removing-system-versioning-tofrom-a-table">Adding or Removing System Versioning To/From a Table</h3>
<p>An existing table can be <a href="/kb/en/alter-table/">altered</a> to enable system versioning for it.</p>
<pre class="fixed"><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">t</span><span class="p">(</span>
  <span class="n">x</span> <span class="nb">INT</span>
<span class="p">);</span>
</pre><pre class="fixed"><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">t</span> <span class="k">ADD</span> <span class="k">SYSTEM</span> <span class="n">VERSIONING</span><span class="p">;</span>
</pre><pre class="fixed">SHOW CREATE TABLE t\G
*************************** 1. row ***************************
       Table: t
Create Table: CREATE TABLE `t` (
  `x` int(11) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1 WITH SYSTEM VERSIONING
</pre><p>Similarly, system versioning can be removed from a table:</p>
<pre class="fixed"><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">t</span> <span class="k">DROP</span> <span class="k">SYSTEM</span> <span class="n">VERSIONING</span><span class="p">;</span>
</pre><pre class="fixed">SHOW CREATE TABLE t\G
*************************** 1. row ***************************
       Table: t
Create Table: CREATE TABLE `t` (
  `x` int(11) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1
</pre><p>One can also add system versioning with all columns created explicitly:</p>
<pre class="fixed"><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">t</span> <span class="k">ADD</span> <span class="k">COLUMN</span> <span class="n">ts</span> <span class="k">TIMESTAMP</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span> <span class="k">GENERATED</span> <span class="n">ALWAYS</span> <span class="k">AS</span> <span class="k">ROW</span> <span class="k">START</span><span class="p">,</span>
              <span class="k">ADD</span> <span class="k">COLUMN</span> <span class="n">te</span> <span class="k">TIMESTAMP</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span> <span class="k">GENERATED</span> <span class="n">ALWAYS</span> <span class="k">AS</span> <span class="k">ROW</span> <span class="k">END</span><span class="p">,</span>
              <span class="k">ADD</span> <span class="n">PERIOD</span> <span class="k">FOR</span> <span class="n">SYSTEM_TIME</span><span class="p">(</span><span class="n">ts</span><span class="p">,</span> <span class="n">te</span><span class="p">),</span>
              <span class="k">ADD</span> <span class="k">SYSTEM</span> <span class="n">VERSIONING</span><span class="p">;</span>
</pre><pre class="fixed">SHOW CREATE TABLE t\G
*************************** 1. row ***************************
       Table: t
Create Table: CREATE TABLE `t` (
  `x` int(11) DEFAULT NULL,
  `ts` timestamp(6) GENERATED ALWAYS AS ROW START,
  `te` timestamp(6) GENERATED ALWAYS AS ROW END,
  PERIOD FOR SYSTEM_TIME (`ts`, `te`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 WITH SYSTEM VERSIONING
</pre><div class="mariadb_from_11_7 mariadb from_11_7 product"><h5 class="product_title">MariaDB starting with <a href="/kb/en/what-is-mariadb-117/">11.7</a></h5><p>From <a href="/kb/en/what-is-mariadb-117/">MariaDB 11.7</a>, it is possible to convert a versioned table from implicit to explicit row_start/row_end columns. Note that in order to do any ALTER on a system versioned table, <a href="#system_versioning_alter_history">system_versioning_alter_history</a> must be set to <code>KEEP</code>.</p>
<pre class="fixed"><span class="k">CREATE</span> <span class="k">OR</span> <span class="k">REPLACE</span> <span class="k">TABLE</span> <span class="n">t1</span> <span class="p">(</span><span class="n">x</span> <span class="nb">INT</span><span class="p">)</span> <span class="k">WITH</span> <span class="k">SYSTEM</span> <span class="n">VERSIONING</span><span class="p">;</span>

<span class="k">SET</span> <span class="n">system_versioning_alter_history</span> <span class="o">=</span> <span class="n">keep</span><span class="p">;</span>

<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">t1</span> <span class="k">ADD</span> <span class="k">COLUMN</span> <span class="n">rs</span> <span class="k">TIMESTAMP</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span> <span class="k">AS</span> <span class="k">ROW</span> <span class="k">START</span><span class="p">,</span> 
  <span class="k">ADD</span> <span class="k">COLUMN</span> <span class="n">re</span> <span class="k">TIMESTAMP</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span> <span class="k">AS</span> <span class="k">ROW</span> <span class="k">END</span><span class="p">,</span> <span class="k">ADD</span> <span class="n">PERIOD</span> <span class="k">FOR</span> <span class="n">SYSTEM_TIME</span> <span class="p">(</span><span class="n">rs</span><span class="p">,</span><span class="n">re</span><span class="p">)</span>

</pre><p>Prior to <a href="/kb/en/what-is-mariadb-117/">MariaDB 11.7</a>, this would result in a duplicate row error:</p>
<pre class="fixed"><span class="k">CREATE</span> <span class="k">OR</span> <span class="k">REPLACE</span> <span class="k">TABLE</span> <span class="n">t1</span> <span class="p">(</span><span class="n">x</span> <span class="nb">INT</span><span class="p">)</span> <span class="k">WITH</span> <span class="k">SYSTEM</span> <span class="n">VERSIONING</span><span class="p">;</span>

<span class="k">SET</span> <span class="n">system_versioning_alter_history</span> <span class="o">=</span> <span class="n">keep</span><span class="p">;</span>

<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">t1</span> <span class="k">ADD</span> <span class="k">COLUMN</span> <span class="n">rs</span> <span class="k">TIMESTAMP</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span> <span class="k">AS</span> <span class="k">ROW</span> <span class="k">START</span><span class="p">,</span> 
  <span class="k">ADD</span> <span class="k">COLUMN</span> <span class="n">re</span> <span class="k">TIMESTAMP</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span> <span class="k">AS</span> <span class="k">ROW</span> <span class="k">END</span><span class="p">,</span> <span class="k">ADD</span> <span class="n">PERIOD</span> <span class="k">FOR</span> <span class="n">SYSTEM_TIME</span> <span class="p">(</span><span class="n">rs</span><span class="p">,</span><span class="n">re</span><span class="p">);</span>

<span class="n">ERROR</span> <span class="mi">4134</span> <span class="p">(</span><span class="n">HY000</span><span class="p">):</span> <span class="n">Duplicate</span> <span class="k">ROW</span> <span class="k">START</span> <span class="k">column</span> <span class="o">`</span><span class="n">rs</span><span class="o">`</span>
</pre></div><h3 class="anchored_heading" id="inserting-data">Inserting Data</h3>
<p>When data is inserted into a system-versioned table, it is given a <em>row_start</em> value of the current timestamp, and a <em>row_end</em> value of <a href="/kb/en/from_unixtime/">FROM_UNIXTIME</a>(2147483647.999999). The current timestamp can be adjusted by setting the <a href="/kb/en/server-system-variables/#timestamp">timestamp system variable</a>, for example:</p>
<pre class="fixed"><span class="k">SELECT</span> <span class="n">NOW</span><span class="p">();</span>
<span class="o">+</span><span class="c1">---------------------+</span>
<span class="o">|</span> <span class="n">NOW</span><span class="p">()</span>               <span class="o">|</span>
<span class="o">+</span><span class="c1">---------------------+</span>
<span class="o">|</span> <span class="mi">2022</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mi">24</span> <span class="mi">23</span><span class="p">:</span><span class="mi">09</span><span class="p">:</span><span class="mi">38</span> <span class="o">|</span>
<span class="o">+</span><span class="c1">---------------------+</span>
 
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">t</span> <span class="k">VALUES</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
 
<span class="k">SET</span> <span class="o">@@</span><span class="k">timestamp</span> <span class="o">=</span> <span class="n">UNIX_TIMESTAMP</span><span class="p">(</span><span class="s1">&#39;2033-10-24&#39;</span><span class="p">);</span>

<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">t</span> <span class="k">VALUES</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
 
<span class="k">SET</span> <span class="o">@@</span><span class="k">timestamp</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span>

<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">t</span> <span class="k">VALUES</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>
 
<span class="k">SELECT</span> <span class="n">a</span><span class="p">,</span><span class="n">row_start</span><span class="p">,</span><span class="n">row_end</span> <span class="k">FROM</span> <span class="n">t</span><span class="p">;</span>
<span class="o">+</span><span class="c1">------+----------------------------+----------------------------+</span>
<span class="o">|</span> <span class="n">a</span>    <span class="o">|</span> <span class="n">row_start</span>                  <span class="o">|</span> <span class="n">row_end</span>                    <span class="o">|</span>
<span class="o">+</span><span class="c1">------+----------------------------+----------------------------+</span>
<span class="o">|</span>    <span class="mi">1</span> <span class="o">|</span> <span class="mi">2022</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mi">24</span> <span class="mi">23</span><span class="p">:</span><span class="mi">09</span><span class="p">:</span><span class="mi">38</span><span class="p">.</span><span class="mi">951347</span> <span class="o">|</span> <span class="mi">2038</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">19</span> <span class="mi">05</span><span class="p">:</span><span class="mi">14</span><span class="p">:</span><span class="mi">07</span><span class="p">.</span><span class="mi">999999</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">2</span> <span class="o">|</span> <span class="mi">2033</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mi">24</span> <span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">.</span><span class="mi">000000</span> <span class="o">|</span> <span class="mi">2038</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">19</span> <span class="mi">05</span><span class="p">:</span><span class="mi">14</span><span class="p">:</span><span class="mi">07</span><span class="p">.</span><span class="mi">999999</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">3</span> <span class="o">|</span> <span class="mi">2022</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mi">24</span> <span class="mi">23</span><span class="p">:</span><span class="mi">09</span><span class="p">:</span><span class="mi">38</span><span class="p">.</span><span class="mi">961857</span> <span class="o">|</span> <span class="mi">2038</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">19</span> <span class="mi">05</span><span class="p">:</span><span class="mi">14</span><span class="p">:</span><span class="mi">07</span><span class="p">.</span><span class="mi">999999</span> <span class="o">|</span>
<span class="o">+</span><span class="c1">------+----------------------------+----------------------------+</span>
</pre><h3 class="anchored_heading" id="querying-historical-data">Querying Historical Data</h3>
<h4 class="anchored_heading" id="select"><code>SELECT</code></h4>
<p>To query the historical data one uses the clause <code>FOR SYSTEM_TIME</code> directly after the table name (before the table alias, if any). SQL:2011 provides three syntactic extensions:</p>
<ul start="1"><li><code>AS OF</code> is used to see the table as it was at a specific point in time in the past:
</li></ul>
<pre class="fixed"><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">t</span> <span class="k">FOR</span> <span class="n">SYSTEM_TIME</span> <span class="k">AS</span> <span class="k">OF</span> <span class="k">TIMESTAMP</span><span class="s1">&#39;2016-10-09 08:07:06&#39;</span><span class="p">;</span>
</pre><ul start="1"><li><code>BETWEEN start AND end</code> will show all rows that were visible at any point between two specified points in time. It works inclusively, a row visible exactly at <em>start</em> or exactly at <em>end</em> will be shown too.
</li></ul>
<pre class="fixed"><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">t</span> <span class="k">FOR</span> <span class="n">SYSTEM_TIME</span> <span class="k">BETWEEN</span> <span class="p">(</span><span class="n">NOW</span><span class="p">()</span> <span class="o">-</span> <span class="nb">INTERVAL</span> <span class="mi">1</span> <span class="k">YEAR</span><span class="p">)</span> <span class="k">AND</span> <span class="n">NOW</span><span class="p">();</span>
</pre><ul start="1"><li><code>FROM start TO end</code> will also show all rows that were visible at any point between two specified points in time, including <em>start</em>, but <strong>excluding</strong> <em>end</em>.
</li></ul>
<pre class="fixed"><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">t</span> <span class="k">FOR</span> <span class="n">SYSTEM_TIME</span> <span class="k">FROM</span> <span class="s1">&#39;2016-01-01 00:00:00&#39;</span> <span class="k">TO</span> <span class="s1">&#39;2017-01-01 00:00:00&#39;</span><span class="p">;</span>
</pre><p>Additionally MariaDB implements a non-standard extension:</p>
<ul start="1"><li><code>ALL</code> will show all rows, historical and current.
</li></ul>
<pre class="fixed"><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">t</span> <span class="k">FOR</span> <span class="n">SYSTEM_TIME</span> <span class="k">ALL</span><span class="p">;</span>
</pre><p>If the <code>FOR SYSTEM_TIME</code> clause is not used, the table will show the <em>current</em> data. This is usually the same as if one had specified <code>FOR SYSTEM_TIME AS OF CURRENT_TIMESTAMP</code>, unless one has adjusted the <em>row_start</em> value (until <a href="/kb/en/what-is-mariadb-1011/">MariaDB 10.11</a>, only possible by setting the <a href="/kb/en/server-system-variables/#secure_timestamp">secure_timestamp</a> variable). For example:</p>
<pre class="fixed"><span class="k">CREATE</span> <span class="k">OR</span> <span class="k">REPLACE</span> <span class="k">TABLE</span> <span class="n">t</span> <span class="p">(</span><span class="n">a</span> <span class="nb">int</span><span class="p">)</span> <span class="k">WITH</span> <span class="k">SYSTEM</span> <span class="n">VERSIONING</span><span class="p">;</span>

<span class="k">SELECT</span> <span class="n">NOW</span><span class="p">();</span>
<span class="o">+</span><span class="c1">---------------------+</span>
<span class="o">|</span> <span class="n">NOW</span><span class="p">()</span>               <span class="o">|</span>
<span class="o">+</span><span class="c1">---------------------+</span>
<span class="o">|</span> <span class="mi">2022</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mi">24</span> <span class="mi">23</span><span class="p">:</span><span class="mi">43</span><span class="p">:</span><span class="mi">37</span> <span class="o">|</span>
<span class="o">+</span><span class="c1">---------------------+</span>

<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">t</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">1</span><span class="p">);</span>

<span class="k">SET</span> <span class="o">@@</span><span class="k">timestamp</span> <span class="o">=</span> <span class="n">UNIX_TIMESTAMP</span><span class="p">(</span><span class="s1">&#39;2033-03-03&#39;</span><span class="p">);</span>

<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">t</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">2</span><span class="p">);</span>

<span class="k">DELETE</span> <span class="k">FROM</span> <span class="n">t</span><span class="p">;</span>

<span class="k">SET</span> <span class="o">@@</span><span class="k">timestamp</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span>


<span class="k">SELECT</span> <span class="n">a</span><span class="p">,</span> <span class="n">row_start</span><span class="p">,</span> <span class="n">row_end</span> <span class="k">FROM</span> <span class="n">t</span> <span class="k">FOR</span> <span class="n">SYSTEM_TIME</span> <span class="k">ALL</span><span class="p">;</span>
<span class="o">+</span><span class="c1">------+----------------------------+----------------------------+</span>
<span class="o">|</span> <span class="n">a</span>    <span class="o">|</span> <span class="n">row_start</span>                  <span class="o">|</span> <span class="n">row_end</span>                    <span class="o">|</span>
<span class="o">+</span><span class="c1">------+----------------------------+----------------------------+</span>
<span class="o">|</span>    <span class="mi">1</span> <span class="o">|</span> <span class="mi">2022</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mi">24</span> <span class="mi">23</span><span class="p">:</span><span class="mi">43</span><span class="p">:</span><span class="mi">37</span><span class="p">.</span><span class="mi">192725</span> <span class="o">|</span> <span class="mi">2033</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">03</span> <span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">.</span><span class="mi">000000</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">2</span> <span class="o">|</span> <span class="mi">2033</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">03</span> <span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">.</span><span class="mi">000000</span> <span class="o">|</span> <span class="mi">2033</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">03</span> <span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">.</span><span class="mi">000000</span> <span class="o">|</span>
<span class="o">+</span><span class="c1">------+----------------------------+----------------------------+</span>
<span class="mi">2</span> <span class="k">rows</span> <span class="k">in</span> <span class="k">set</span> <span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">000</span> <span class="n">sec</span><span class="p">)</span>


<span class="k">SELECT</span> <span class="n">a</span><span class="p">,</span> <span class="n">row_start</span><span class="p">,</span> <span class="n">row_end</span> <span class="k">FROM</span> <span class="n">t</span> <span class="k">FOR</span> <span class="n">SYSTEM_TIME</span> <span class="k">AS</span> <span class="k">OF</span> <span class="k">CURRENT_TIMESTAMP</span><span class="p">;</span>
<span class="o">+</span><span class="c1">------+----------------------------+----------------------------+</span>
<span class="o">|</span> <span class="n">a</span>    <span class="o">|</span> <span class="n">row_start</span>                  <span class="o">|</span> <span class="n">row_end</span>                    <span class="o">|</span>
<span class="o">+</span><span class="c1">------+----------------------------+----------------------------+</span>
<span class="o">|</span>    <span class="mi">1</span> <span class="o">|</span> <span class="mi">2022</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mi">24</span> <span class="mi">23</span><span class="p">:</span><span class="mi">43</span><span class="p">:</span><span class="mi">37</span><span class="p">.</span><span class="mi">192725</span> <span class="o">|</span> <span class="mi">2033</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">03</span> <span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">.</span><span class="mi">000000</span> <span class="o">|</span>
<span class="o">+</span><span class="c1">------+----------------------------+----------------------------+</span>
<span class="mi">1</span> <span class="k">row</span> <span class="k">in</span> <span class="k">set</span> <span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">000</span> <span class="n">sec</span><span class="p">)</span>


<span class="k">SELECT</span> <span class="n">a</span><span class="p">,</span> <span class="n">row_start</span><span class="p">,</span> <span class="n">row_end</span> <span class="k">FROM</span> <span class="n">t</span><span class="p">;</span>
<span class="n">Empty</span> <span class="k">set</span> <span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">001</span> <span class="n">sec</span><span class="p">)</span>
</pre><h4 class="anchored_heading" id="views-and-subqueries">Views and Subqueries</h4>
<p>When a system-versioned tables is used in a view or in a subquery in the from clause, <code>FOR SYSTEM_TIME</code> can be used directly in the view or subquery body, or (non-standard) applied to the whole view when it's being used in a <code>SELECT</code>:</p>
<pre class="fixed"><span class="k">CREATE</span> <span class="k">VIEW</span> <span class="n">v1</span> <span class="k">AS</span> <span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">t</span> <span class="k">FOR</span> <span class="n">SYSTEM_TIME</span> <span class="k">AS</span> <span class="k">OF</span> <span class="k">TIMESTAMP</span><span class="s1">&#39;2016-10-09 08:07:06&#39;</span><span class="p">;</span>
</pre><p>Or</p>
<pre class="fixed"><span class="k">CREATE</span> <span class="k">VIEW</span> <span class="n">v1</span> <span class="k">AS</span> <span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">t</span><span class="p">;</span>
<span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">v1</span> <span class="k">FOR</span> <span class="n">SYSTEM_TIME</span> <span class="k">AS</span> <span class="k">OF</span> <span class="k">TIMESTAMP</span><span class="s1">&#39;2016-10-09 08:07:06&#39;</span><span class="p">;</span>
</pre><h4 class="anchored_heading" id="use-in-replication-and-binary-logs">Use in Replication and Binary Logs</h4>
<p>Tables that use system-versioning implicitly add the <code>row_end</code> column to the Primary Key.  While this is generally not an issue for most use cases, it can lead to problems when re-applying write statements from the binary log or in replication environments, where a primary retries an SQL statement on the replica. </p>
<p>Specifically, these writes include a value on the <code>row_end</code> column containing the timestamp from when the write was initially made.  The re-occurrence of the Primary Key with the old system-versioning columns raises an error due to the duplication. </p>
<p>To mitigate this with MariaDB Replication, set the <a href="/kb/en/server-system-variables/#secure_timestamp">secure_timestamp</a> system variable to <code>YES</code> on the replica. When set, the replica uses its own system clock when applying to the row log, meaning that the primary can retry as many times as needed without causing a conflict.  The retries generate new historical rows with new values for the <code>row_start</code> and <code>row_end</code> columns.</p>
<h3 class="anchored_heading" id="transaction-precise-history-in-innodb">Transaction-Precise History in InnoDB</h3>
<p>A point in time when a row was inserted or deleted does not necessarily mean that a change became visible at the same moment. With transactional tables, a row might have been inserted in a long transaction, and became visible hours after it was inserted.</p>
<p>For some applications — for example, when doing data analytics on one-year-old data — this distinction does not matter much. For others — forensic analysis — it might be crucial.</p>
<p>MariaDB supports transaction-precise history (only for the <a href="/kb/en/innodb/">InnoDB storage engine</a>) that allows seeing the data exactly as it would've been seen by a new connection doing a <code>SELECT</code> at the specified point in time — rows inserted <em>before</em> that point, but committed <em>after</em> will not be shown.</p>
<p>To use transaction-precise history, InnoDB needs to remember not timestamps, but transaction identifier per row. This is done by creating generated columns as <code>BIGINT UNSIGNED</code>, not <code>TIMESTAMP(6)</code>:</p>
<pre class="fixed"><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">t</span><span class="p">(</span>
   <span class="n">x</span> <span class="nb">INT</span><span class="p">,</span>
   <span class="n">start_trxid</span> <span class="nb">BIGINT</span> <span class="n">UNSIGNED</span> <span class="k">GENERATED</span> <span class="n">ALWAYS</span> <span class="k">AS</span> <span class="k">ROW</span> <span class="k">START</span><span class="p">,</span>
   <span class="n">end_trxid</span> <span class="nb">BIGINT</span> <span class="n">UNSIGNED</span> <span class="k">GENERATED</span> <span class="n">ALWAYS</span> <span class="k">AS</span> <span class="k">ROW</span> <span class="k">END</span><span class="p">,</span>
   <span class="n">PERIOD</span> <span class="k">FOR</span> <span class="n">SYSTEM_TIME</span><span class="p">(</span><span class="n">start_trxid</span><span class="p">,</span> <span class="n">end_trxid</span><span class="p">)</span>
<span class="p">)</span> <span class="k">WITH</span> <span class="k">SYSTEM</span> <span class="n">VERSIONING</span><span class="p">;</span>
</pre><p>These columns must be specified explicitly, but they can be made <a href="/kb/en/invisible-columns/">INVISIBLE</a> to avoid cluttering <code>SELECT *</code> output.</p>
<p>Note that if you are using an engine that does not support system versioning with transaction ids, you will get an error like "`start_trxid` must be of type TIMESTAMP(6) for system-versioned table `t`".</p>
<p>When one uses transaction-precise history, one can optionally use transaction identifiers in the <code>FOR SYSTEM_TIME</code> clause:</p>
<pre class="fixed"><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">t</span> <span class="k">FOR</span> <span class="n">SYSTEM_TIME</span> <span class="k">AS</span> <span class="k">OF</span> <span class="n">TRANSACTION</span> <span class="mi">12345</span><span class="p">;</span>
</pre><p>This will show the data, exactly as it was seen by the transaction with the identifier 12345.</p>
<p>Data for this feature is stored in the <a href="/kb/en/mysqltransaction_registry-table/">mysql.transaction_registry table</a>.</p>
<h3 class="anchored_heading" id="storing-the-history-separately">Storing the History Separately</h3>
<p>When the history is stored together with the current data, it increases the size of the table, so current data queries — table scans and index searches — will take more time, because they will need to skip over historical data. If most queries on that table use only current data, it might make sense to store the history separately, to reduce the overhead from versioning.</p>
<p>This is done by partitioning the table by <code>SYSTEM_TIME</code>. Because of the <a href="/kb/en/partition-pruning-and-selection/">partition pruning</a> optimization, all current data queries will only access one partition, the one that stores current data.</p>
<p>This example shows how to create such a partitioned table:</p>
<pre class="fixed"><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">t</span> <span class="p">(</span><span class="n">x</span> <span class="nb">INT</span><span class="p">)</span> <span class="k">WITH</span> <span class="k">SYSTEM</span> <span class="n">VERSIONING</span>
  <span class="n">PARTITION</span> <span class="k">BY</span> <span class="n">SYSTEM_TIME</span> <span class="p">(</span>
    <span class="n">PARTITION</span> <span class="n">p_hist</span> <span class="n">HISTORY</span><span class="p">,</span>
    <span class="n">PARTITION</span> <span class="n">p_cur</span> <span class="k">CURRENT</span>
  <span class="p">);</span>
</pre><p>In this example all history will be stored in the partition <code>p_hist</code> while all current data will be in the partition <code>p_cur</code>. The table must have exactly one current partition and at least one historical partition.</p>
<p>Partitioning by <code>SYSTEM_TIME</code> also supports automatic partition rotation. One can rotate historical partitions by time or by size. This example shows how to rotate partitions by size:</p>
<pre class="fixed"><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">t</span> <span class="p">(</span><span class="n">x</span> <span class="nb">INT</span><span class="p">)</span> <span class="k">WITH</span> <span class="k">SYSTEM</span> <span class="n">VERSIONING</span>
  <span class="n">PARTITION</span> <span class="k">BY</span> <span class="n">SYSTEM_TIME</span> <span class="k">LIMIT</span> <span class="mi">100000</span> <span class="p">(</span>
    <span class="n">PARTITION</span> <span class="n">p0</span> <span class="n">HISTORY</span><span class="p">,</span>
    <span class="n">PARTITION</span> <span class="n">p1</span> <span class="n">HISTORY</span><span class="p">,</span>
    <span class="n">PARTITION</span> <span class="n">pcur</span> <span class="k">CURRENT</span>
  <span class="p">);</span>
</pre><p>MariaDB will start writing history rows into partition <code>p0</code>, and at the end of the statement that wrote the 100000th row, MariaDB will switch to partition <code>p1</code>. There are only two historical partitions, so when <code>p1</code> overflows, MariaDB will issue a warning, but will continue writing into it.</p>
<p>Similarly, one can rotate partitions by time:</p>
<pre class="fixed"><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">t</span> <span class="p">(</span><span class="n">x</span> <span class="nb">INT</span><span class="p">)</span> <span class="k">WITH</span> <span class="k">SYSTEM</span> <span class="n">VERSIONING</span>
  <span class="n">PARTITION</span> <span class="k">BY</span> <span class="n">SYSTEM_TIME</span> <span class="nb">INTERVAL</span> <span class="mi">1</span> <span class="n">WEEK</span> <span class="p">(</span>
    <span class="n">PARTITION</span> <span class="n">p0</span> <span class="n">HISTORY</span><span class="p">,</span>
    <span class="n">PARTITION</span> <span class="n">p1</span> <span class="n">HISTORY</span><span class="p">,</span>
    <span class="n">PARTITION</span> <span class="n">p2</span> <span class="n">HISTORY</span><span class="p">,</span>
    <span class="n">PARTITION</span> <span class="n">pcur</span> <span class="k">CURRENT</span>
  <span class="p">);</span>
</pre><p>This means that the history for the first week after the table was created will be stored in <code>p0</code>. The history for the second week — in <code>p1</code>, and all later history will go into <code>p2</code>. One can see the exact rotation time for each partition in the <a href="/kb/en/information-schema-partitions-table/">INFORMATION_SCHEMA.PARTITIONS</a> table.</p>
<p>It is possible to combine partitioning by <code>SYSTEM_TIME</code> and subpartitions:</p>
<pre class="fixed"><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">t</span> <span class="p">(</span><span class="n">x</span> <span class="nb">INT</span><span class="p">)</span> <span class="k">WITH</span> <span class="k">SYSTEM</span> <span class="n">VERSIONING</span>
  <span class="n">PARTITION</span> <span class="k">BY</span> <span class="n">SYSTEM_TIME</span>
    <span class="n">SUBPARTITION</span> <span class="k">BY</span> <span class="k">KEY</span> <span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="n">SUBPARTITIONS</span> <span class="mi">4</span> <span class="p">(</span>
    <span class="n">PARTITION</span> <span class="n">ph</span> <span class="n">HISTORY</span><span class="p">,</span>
    <span class="n">PARTITION</span> <span class="n">pc</span> <span class="k">CURRENT</span>
  <span class="p">);</span>
</pre><h4 class="anchored_heading" id="default-partitions">Default Partitions</h4>
<div class="mariadb_from_10_5_0 mariadb from_10_5_0 product"><h5 class="product_title">MariaDB starting with <a href="/kb/en/mariadb-1050-release-notes/">10.5.0</a></h5><p>Since partitioning by current and historical data is such a typical usecase, from <a href="/kb/en/what-is-mariadb-105/">MariaDB 10.5</a>, it is possible to use a simplified statement to do so. For example, instead of</p>
<pre class="fixed"><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">t</span> <span class="p">(</span><span class="n">x</span> <span class="nb">INT</span><span class="p">)</span> <span class="k">WITH</span> <span class="k">SYSTEM</span> <span class="n">VERSIONING</span> 
  <span class="n">PARTITION</span> <span class="k">BY</span> <span class="n">SYSTEM_TIME</span> <span class="p">(</span>
    <span class="n">PARTITION</span> <span class="n">p0</span> <span class="n">HISTORY</span><span class="p">,</span>  
    <span class="n">PARTITION</span> <span class="n">pn</span> <span class="k">CURRENT</span> 
<span class="p">);</span>
</pre><p>you can use</p>
<pre class="fixed"><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">t</span> <span class="p">(</span><span class="n">x</span> <span class="nb">INT</span><span class="p">)</span> <span class="k">WITH</span> <span class="k">SYSTEM</span> <span class="n">VERSIONING</span> 
  <span class="n">PARTITION</span> <span class="k">BY</span> <span class="n">SYSTEM_TIME</span><span class="p">;</span>
</pre><p>You can also specify the number of partitions, which is useful if you want to rotate history by time, for example:</p>
<pre class="fixed"><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">t</span> <span class="p">(</span><span class="n">x</span> <span class="nb">INT</span><span class="p">)</span> <span class="k">WITH</span> <span class="k">SYSTEM</span> <span class="n">VERSIONING</span> 
  <span class="n">PARTITION</span> <span class="k">BY</span> <span class="n">SYSTEM_TIME</span> 
    <span class="nb">INTERVAL</span> <span class="mi">1</span> <span class="k">MONTH</span> 
    <span class="n">PARTITIONS</span> <span class="mi">12</span><span class="p">;</span>
</pre><p>Specifying the number of partitions without specifying a rotation condition will result in a warning:</p>
<pre class="fixed wrap"><span class="k">CREATE</span> <span class="k">OR</span> <span class="k">REPLACE</span> <span class="k">TABLE</span> <span class="n">t</span> <span class="p">(</span><span class="n">x</span> <span class="nb">INT</span><span class="p">)</span> <span class="k">WITH</span> <span class="k">SYSTEM</span> <span class="n">VERSIONING</span>
  <span class="n">PARTITION</span> <span class="k">BY</span> <span class="n">SYSTEM_TIME</span> <span class="n">PARTITIONS</span> <span class="mi">12</span><span class="p">;</span>
<span class="n">Query</span> <span class="n">OK</span><span class="p">,</span> <span class="mi">0</span> <span class="k">rows</span> <span class="n">affected</span><span class="p">,</span> <span class="mi">1</span> <span class="n">warning</span> <span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">518</span> <span class="n">sec</span><span class="p">)</span>

<span class="n">Warning</span> <span class="p">(</span><span class="n">Code</span> <span class="mi">4115</span><span class="p">):</span> <span class="n">Maybe</span> <span class="n">missing</span> <span class="k">parameters</span><span class="p">:</span> <span class="k">no</span> <span class="n">rotation</span> <span class="n">condition</span> <span class="k">for</span> <span class="n">multiple</span> <span class="n">HISTORY</span> <span class="n">partitions</span><span class="p">.</span>
</pre><p>while specifying only 1 partition will result in an error:</p>
<pre class="fixed wrap"><span class="k">CREATE</span> <span class="k">OR</span> <span class="k">REPLACE</span> <span class="k">TABLE</span> <span class="n">t</span> <span class="p">(</span><span class="n">x</span> <span class="nb">INT</span><span class="p">)</span> <span class="k">WITH</span> <span class="k">SYSTEM</span> <span class="n">VERSIONING</span>
  <span class="n">PARTITION</span> <span class="k">BY</span> <span class="n">SYSTEM_TIME</span> <span class="n">PARTITIONS</span> <span class="mi">1</span><span class="p">;</span>
<span class="n">ERROR</span> <span class="mi">4128</span> <span class="p">(</span><span class="n">HY000</span><span class="p">):</span> <span class="n">Wrong</span> <span class="n">partitions</span> <span class="k">for</span> <span class="o">`</span><span class="n">t</span><span class="o">`</span><span class="p">:</span> <span class="n">must</span> <span class="n">have</span> <span class="k">at</span> <span class="n">least</span> <span class="n">one</span> <span class="n">HISTORY</span> <span class="k">and</span> <span class="n">exactly</span> <span class="n">one</span> <span class="k">last</span> <span class="k">CURRENT</span>
</pre></div><h4 class="anchored_heading" id="automatically-creating-partitions">Automatically Creating Partitions</h4>
<div class="mariadb_from_10_9_1 mariadb from_10_9_1 product"><h5 class="product_title">MariaDB starting with <a href="/kb/en/mariadb-1091-release-notes/">10.9.1</a></h5><p>From <a href="/kb/en/mariadb-1091-release-notes/">MariaDB 10.9.1</a>, the <code>AUTO</code> keyword can be used to automatically create history partitions.</p>
<p>For example</p>
<pre class="fixed"><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">t1</span> <span class="p">(</span><span class="n">x</span> <span class="nb">int</span><span class="p">)</span> <span class="k">WITH</span> <span class="k">SYSTEM</span> <span class="n">VERSIONING</span>
    <span class="n">PARTITION</span> <span class="k">BY</span> <span class="n">SYSTEM_TIME</span> <span class="nb">INTERVAL</span> <span class="mi">1</span> <span class="n">HOUR</span> <span class="n">AUTO</span><span class="p">;</span>

<span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">t1</span> <span class="p">(</span><span class="n">x</span> <span class="nb">int</span><span class="p">)</span> <span class="k">WITH</span> <span class="k">SYSTEM</span> <span class="n">VERSIONING</span>
   <span class="n">PARTITION</span> <span class="k">BY</span> <span class="n">SYSTEM_TIME</span> <span class="nb">INTERVAL</span> <span class="mi">1</span> <span class="k">MONTH</span>
   <span class="n">STARTS</span> <span class="s1">&#39;2021-01-01 00:00:00&#39;</span> <span class="n">AUTO</span> <span class="n">PARTITIONS</span> <span class="mi">12</span><span class="p">;</span>

<span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">t1</span> <span class="p">(</span><span class="n">x</span> <span class="nb">int</span><span class="p">)</span> <span class="k">WITH</span> <span class="k">SYSTEM</span> <span class="n">VERSIONING</span>
  <span class="n">PARTITION</span> <span class="k">BY</span> <span class="n">SYSTEM_TIME</span> <span class="k">LIMIT</span> <span class="mi">1000</span> <span class="n">AUTO</span><span class="p">;</span>
</pre><p>Or with explicit partitions:</p>
<pre class="fixed"><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">t1</span> <span class="p">(</span><span class="n">x</span> <span class="nb">int</span><span class="p">)</span> <span class="k">WITH</span> <span class="k">SYSTEM</span> <span class="n">VERSIONING</span>
  <span class="n">PARTITION</span> <span class="k">BY</span> <span class="n">SYSTEM_TIME</span> <span class="nb">INTERVAL</span> <span class="mi">1</span> <span class="n">HOUR</span> <span class="n">AUTO</span>
  <span class="p">(</span><span class="n">PARTITION</span> <span class="n">p0</span> <span class="n">HISTORY</span><span class="p">,</span> <span class="n">PARTITION</span> <span class="n">pn</span> <span class="k">CURRENT</span><span class="p">);</span>
</pre><p>To disable or enable auto-creation one can use ALTER TABLE by adding or removing AUTO from the partitioning specification:</p>
<pre class="fixed"><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">t1</span> <span class="p">(</span><span class="n">x</span> <span class="nb">int</span><span class="p">)</span> <span class="k">WITH</span> <span class="k">SYSTEM</span> <span class="n">VERSIONING</span>
  <span class="n">PARTITION</span> <span class="k">BY</span> <span class="n">SYSTEM_TIME</span> <span class="nb">INTERVAL</span> <span class="mi">1</span> <span class="n">HOUR</span> <span class="n">AUTO</span><span class="p">;</span>

<span class="o">#</span> <span class="n">Disables</span> <span class="n">auto</span><span class="o">-</span><span class="n">creation</span><span class="p">:</span>
<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">t1</span> <span class="n">PARTITION</span> <span class="k">BY</span> <span class="n">SYSTEM_TIME</span> <span class="nb">INTERVAL</span> <span class="mi">1</span> <span class="n">HOUR</span><span class="p">;</span>

<span class="o">#</span> <span class="n">Enables</span> <span class="n">auto</span><span class="o">-</span><span class="n">creation</span><span class="p">:</span>
<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">t1</span> <span class="n">PARTITION</span> <span class="k">BY</span> <span class="n">SYSTEM_TIME</span> <span class="nb">INTERVAL</span> <span class="mi">1</span> <span class="n">HOUR</span> <span class="n">AUTO</span><span class="p">;</span>
</pre><p>If the rest of the partitioning specification is identical to CREATE TABLE, no repartitioning will be done (for details see <a href="https://jira.mariadb.org/browse/MDEV-27328">MDEV-27328</a>).</p>
</div><h3 class="anchored_heading" id="removing-old-history">Removing Old History</h3>
<p>Because it stores all the history, a system-versioned table might grow very large over time. There are many options to trim down the space and remove the old history.</p>
<p>One can completely drop the versioning from the table and add it back again, this will delete all the history:</p>
<pre class="fixed"><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">t</span> <span class="k">DROP</span> <span class="k">SYSTEM</span> <span class="n">VERSIONING</span><span class="p">;</span>
<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">t</span> <span class="k">ADD</span> <span class="k">SYSTEM</span> <span class="n">VERSIONING</span><span class="p">;</span>
</pre><p>It might be a rather time-consuming operation, though, as the table will need to be rebuilt, possibly twice (depending on the storage engine).</p>
<p>Another option would be to use partitioning and drop some of historical partitions:</p>
<pre class="fixed"><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">t</span> <span class="k">DROP</span> <span class="n">PARTITION</span> <span class="n">p0</span><span class="p">;</span>
</pre><p>Note, that one cannot drop a current partition or the only historical partition.</p>
<p>And the third option; one can use a variant of the <a href="/kb/en/delete/">DELETE</a> statement to prune the history:</p>
<pre class="fixed"><span class="k">DELETE</span> <span class="n">HISTORY</span> <span class="k">FROM</span> <span class="n">t</span><span class="p">;</span>
</pre><p>or only old history up to a specific point in time:</p>
<pre class="fixed"><span class="k">DELETE</span> <span class="n">HISTORY</span> <span class="k">FROM</span> <span class="n">t</span> <span class="k">BEFORE</span> <span class="n">SYSTEM_TIME</span> <span class="s1">&#39;2016-10-09 08:07:06&#39;</span><span class="p">;</span>
</pre><p>or to a specific transaction (with <code>BEFORE SYSTEM_TIME TRANSACTION xxx</code>).</p>
<p>To protect the integrity of the history, this statement requires a special <a href="/kb/en/grant/#table-privileges">DELETE HISTORY</a> privilege.</p>
<p>Currently, using the DELETE HISTORY statement with a BEFORE SYSTEM_TIME greater than the ROW_END of the active records (as a <a href="/kb/en/timestamp/">TIMESTAMP</a>, this has a maximum value of '2038-01-19 03:14:07' <a href="/kb/en/coordinated-universal-time/">UTC</a>) will result in the historical records being dropped, and the active records being deleted and moved to history. See <a href="https://jira.mariadb.org/browse/MDEV-25468">MDEV-25468</a>.</p>
<p>The <a href="/kb/en/truncate-table/">TRUNCATE TABLE</a> statement drops all historical records from a system-versioned-table.</p>
<p>Historic data is protected from TRUNCATE statements, as per the SQL standard, and an Error 4137 is instead raised:</p>
<pre class="fixed"><span class="k">TRUNCATE</span> <span class="n">t</span><span class="p">;</span>
<span class="n">ERROR</span> <span class="mi">4137</span> <span class="p">(</span><span class="n">HY000</span><span class="p">):</span> <span class="k">System</span><span class="o">-</span><span class="n">versioned</span> <span class="n">tables</span> <span class="k">do</span> <span class="k">not</span> <span class="n">support</span> <span class="k">TRUNCATE</span> <span class="k">TABLE</span>
</pre><h3 class="anchored_heading" id="excluding-columns-from-versioning">Excluding Columns From Versioning</h3>
<p>Another MariaDB extension allows one to version only a subset of columns in a table. This is useful, for example, if you have a table with user information that should be versioned, but one column is, let's say, a login counter that is incremented often and is not interesting to version. Such a column can be excluded from versioning by declaring it <code>WITHOUT VERSIONING</code></p>
<pre class="fixed"><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">t</span> <span class="p">(</span>
   <span class="n">x</span> <span class="nb">INT</span><span class="p">,</span>
   <span class="n">y</span> <span class="nb">INT</span> <span class="k">WITHOUT</span> <span class="k">SYSTEM</span> <span class="n">VERSIONING</span>
<span class="p">)</span> <span class="k">WITH</span> <span class="k">SYSTEM</span> <span class="n">VERSIONING</span><span class="p">;</span>
</pre><p>A column can also be declared <code>WITH VERSIONING</code>, that will automatically make the table versioned. The statement below is equivalent to the one above:</p>
<pre class="fixed"><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">t</span> <span class="p">(</span>
   <span class="n">x</span> <span class="nb">INT</span> <span class="k">WITH</span> <span class="k">SYSTEM</span> <span class="n">VERSIONING</span><span class="p">,</span>
   <span class="n">y</span> <span class="nb">INT</span>
<span class="p">);</span>
</pre><div class="cstm-style hidden"><p>Changes in other sections:
<a href="https://mariadb.com/kb/en/create-table/">https://mariadb.com/kb/en/create-table/</a>
<a href="https://mariadb.com/kb/en/alter-table/">https://mariadb.com/kb/en/alter-table/</a>
<a href="https://mariadb.com/kb/en/join-syntax/">https://mariadb.com/kb/en/join-syntax/</a>
<a href="https://mariadb.com/kb/en/partitioning-types-overview/">https://mariadb.com/kb/en/partitioning-types-overview/</a>
<a href="https://mariadb.com/kb/en/date-and-time-units/">https://mariadb.com/kb/en/date-and-time-units/</a>
<a href="https://mariadb.com/kb/en/delete/">https://mariadb.com/kb/en/delete/</a>
<a href="https://mariadb.com/kb/en/grant/">https://mariadb.com/kb/en/grant/</a></p>
<p>they all reference back to this page</p>
<p>Also, TODO:</p>
<ul start="1"><li>limitations (size, speed, adding history to unique not nullable columns)
</li></ul>
</div><h2 class="anchored_heading" id="system-variables">System Variables</h2>
<p>There are a number of system variables related to system-versioned tables:</p>
<h4 class="anchored_heading" id="system_versioning_alter_history">system_versioning_alter_history</h4>
<ul start="1"><li><strong>Description:</strong> SQL:2011 does not allow <a href="/kb/en/alter-table/">ALTER TABLE</a> on system-versioned tables. When this variable is set to <code>ERROR</code>, an attempt to alter a system-versioned table will result in an error. When this variable is set to <code>KEEP</code>, ALTER TABLE will be allowed, but the history will become incorrect — querying historical data will show the new table structure. This mode is still useful, for example, when adding new columns to a table. Note that if historical data contains or would contain nulls, attempting to ALTER these columns to be <code>NOT NULL</code> will return an error (or warning if <a href="/kb/en/sql-mode/#strict-mode">strict_mode</a> is not set).
</li><li><strong>Commandline:</strong> <code>--system-versioning-alter-history=value</code>
</li><li><strong>Scope:</strong> Global, Session
</li><li><strong>Dynamic:</strong> Yes
</li><li><strong>Type:</strong> Enum
</li><li><strong>Default Value:</strong> <code>ERROR</code>
</li><li><strong>Valid Values:</strong> <code>ERROR</code>, <code>KEEP</code>
</li></ul>
<hr>
<h4 class="anchored_heading" id="system_versioning_asof"><code>system_versioning_asof</code></h4>
<ul start="1"><li><strong>Description:</strong> If set to a specific timestamp value, an implicit <code>FOR SYSTEM_TIME AS OF</code> clause will be applied to all queries. This is useful if one wants to do many queries for history at the specific point in time. Set it to <code>'DEFAULT'</code> to restore the default behavior. Has no effect on DML, so queries such as <a href="/kb/en/insert-select/">INSERT .. SELECT</a> and <a href="/kb/en/replace/">REPLACE .. SELECT</a> need to state AS OF explicitly.
</li></ul>
<p><strong>Note</strong>: You need to use quotes around the name <code>'DEFAULT'</code> when setting the session value, unquoted literal <code>DEFAULT</code> will restore the current global value instead. </p>
<ul start="1"><li><strong>Commandline:</strong> None
</li><li><strong>Scope:</strong> Global, Session
</li><li><strong>Dynamic:</strong> Yes
</li><li><strong>Type:</strong> Varchar
</li><li><strong>Default Value:</strong> <code>DEFAULT</code>
</li></ul>
<hr>
<h4 class="anchored_heading" id="system_versioning_innodb_algorithm_simple">system_versioning_innodb_algorithm_simple</h4>
<ul start="1"><li><strong>Description:</strong> Never fully implemented and removed in the following release.
</li><li><strong>Commandline:</strong> <code>--system-versioning-innodb-algorithm-simple[={0|1}]</code>
</li><li><strong>Scope:</strong> Global, Session
</li><li><strong>Dynamic:</strong> Yes
</li><li><strong>Type:</strong> Boolean
</li><li><strong>Default Value:</strong> <code>ON</code>
</li><li><strong>Introduced:</strong> <a href="/kb/en/mariadb-1034-release-notes/">MariaDB 10.3.4</a>
</li><li><strong>Removed:</strong> <a href="/kb/en/mariadb-1035-release-notes/">MariaDB 10.3.5</a>
</li></ul>
<hr>
<h4 class="anchored_heading" id="system_versioning_insert_history">system_versioning_insert_history</h4>
<ul start="1"><li><strong>Description:</strong> Allows direct inserts into ROW_START and ROW_END columns if <a href="/kb/en/server-system-variables/#secure_timestamp">secure_timestamp</a> allows changing <a href="/kb/en/server-system-variables/#timestamp">timestamp</a>.
</li><li><strong>Commandline:</strong> <code>--system-versioning-insert-history[={0|1}]</code>
</li><li><strong>Scope:</strong> Global, Session
</li><li><strong>Dynamic:</strong> Yes
</li><li><strong>Type:</strong> Boolean
</li><li><strong>Default Value:</strong> <code>OFF</code>
</li><li><strong>Introduced:</strong> <a href="/kb/en/mariadb-10-11-0-release-notes/">MariaDB 10.11.0</a>
</li></ul>
<hr>
<h2 class="anchored_heading" id="limitations">Limitations</h2>
<ul start="1"><li>Versioning clauses can not be applied to <a href="/kb/en/generated-columns/">generated (virtual and persistent) columns</a>.
</li><li><a href="/kb/en/mariadb-dumpmysqldump/">mariadb-dump</a> did not read historical rows from versioned tables, and so historical data would not be backed up. Also, a restore of the timestamps would not be possible as they cannot be defined by an insert/a user. From <a href="/kb/en/what-is-mariadb-1011/">MariaDB 10.11</a>, use the <code>-H</code> or <code>--dump-history</code> options to include the history.
</li></ul>
<h2 class="anchored_heading" id="see-also">See Also</h2>
<ul start="1"><li><a href="/kb/en/application-time-periods/">Application-Time Periods</a>
</li><li><a href="/kb/en/bitemporal-tables/">Bitemporal Tables</a>
</li><li><a href="/kb/en/mysqltransaction_registry-table/">mysql.transaction_registry Table</a>
</li><li><a href="https://youtu.be/uBoUlTsU1Tk">MariaDB Temporal Tables</a> (video)</li></ul>

    </div>


        
            <div id="subscribe" class="well well-small hide hidden-print"
                 data-subscribe-url="/kb/en/system-versioned-tables/+subscriptions/add"
                 data-unsubscribe-url="/kb/en/system-versioned-tables/+subscriptions/remove">
            </div>
        

        
        
    
        <div class="simple_section_nav">
            <ul class="nav nav-pills">
                
                
                    <li><a href="/kb/en/temporal-tables/">
                        ↑ Temporal Tables ↑
                    </a>
                    </li>
                
                
                    <li class="pull-right"><a href="/kb/en/application-time-periods/">
                        Application-Time Periods →
                    </a>
                    </li>
                
            </ul>
        </div>
    

        

        
        <h2>Comments</h2>
        
    
    <div id="comments" data-node-id="7380" data-comments-url="/kb/en/system-versioned-tables/+comments"
         data-reply-url="/kb/en/system-versioned-tables/comments/post/">
        Comments loading...
    </div>

        

    </div>


                    <div id="content_disclaimer" class="graybox">
                        Content reproduced on this site is the property of its respective owners,
                        and this content is not reviewed in advance by MariaDB. The views, information and opinions
                        expressed by this content do not necessarily represent those of MariaDB or any other party.
                    </div>
                </div>
            </section>

            
                <div id="right_bar" class="col-md-2">
                    
    
        
        <ul class="section_navigation well well-small hidden-xs hidden-sm">
            
                <li class="parent"><a href="/kb/en/temporal-tables/">
                    ↑ Temporal Tables ↑
                </a>
                </li>
            
            
                
                    <li class="active">
                        <span>System-Versioned Tables</span>
                        
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/application-time-periods/">
                            
                            Application-Time Periods
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/bitemporal-tables/">
                            
                            Bitemporal Tables
                        </a>
                    </li>
                
            
        </ul>
    
    

                </div>
            
        </div>
    </div>
</div>

<!-- Footer -->
<footer id="footer">
    <div class="footer">
        <div class="container">
            <div class="row">
                <div class="col-xs-12">
                    <ul class="list-inline text-center footer-nav">
                        <li>
                            <h5>
                                <a href="https://mariadb.com/products" title="Products">Products</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/solutions" title="Solutions">Solutions</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/resources" title="Resources">Resources</a>
                            </h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/about-us" title="About MariaDB">Company</a></h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/pricing" title="Pricing">Pricing</a>
                            </h5>
                        </li>
                        
                        
                        <li>
                            <h5><a href="https://mariadb.com/downloads" title="Download">Download MariaDB</a></h5>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="row row-10">
                
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div id="block-footerformcontact" class="block block-block-content block-block-contentd754ee1b-3cc9-40e7-9ef4-f504f1197fb1">
                        
                            <h5 style="font-weight: 400;">Subscribe to our newsletter!</h5>
                            <script src="//app-sj15.marketo.com/js/forms2/js/forms2.min.js"></script><form id="mktoForm_1498"></form>
                            <script>
                                <!--//--><![CDATA[// ><!--
                                MktoForms2.loadForm("//app-sj15.marketo.com", "573-PXI-984", 1498);
                                //--><!]]]]><![CDATA[>
                                //--><!]]>
                            </script>
                        
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div class="footer-copyright">
                        <div class="text-center">
                            <ul class="list-inline no-margin">
                                <li>
                                    <a href="/legal" title="Legal">Legal</a>
                                </li>
                                <li>
                                    <a href="/privacy-policy" title="Privacy Policy">Privacy Policy</a>
                                </li>
                                <li>
                                    <a href="/cookie-policy/" title="Cookies">Cookie Policy</a>
                                </li>
                            </ul>
                            <p>Copyright &copy; 2025 MariaDB. All rights reserved.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
</footer>
</div>

<div id="ajax_loading">
    <img src="/kb/static/images/ajax-loader.a51c5608d01a.gif" />
</div>

    <!-- Google Tag Manager -->
    <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-MK2847"
                      height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
            '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MK2847');</script>
    <!-- End Google Tag Manager -->

</body>

<script type="text/javascript" src="/kb/static/js/main.1587e3a666fc.js" charset="utf-8"></script>

</html>