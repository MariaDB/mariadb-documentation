<!DOCTYPE html>
<html>
<head data-cookie-domain=""
      data-cookie-path="/">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="apple-touch-icon" sizes="180x180" href="/kb/static/images/favicons/apple-touch-icon.159e713979be.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/kb/static/images/favicons/favicon-32x32.bc0ac1d5d11e.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/kb/static/images/favicons/favicon-16x16.5801f8f0f34e.png">
    <link rel="shortcut icon" href="/kb/static/images/favicons/favicon.d122d305dee4.ico" type="image/x-icon" />

    <title>Preparing for ColumnStore Installation - 1.0.X - Source - MariaDB Knowledge Base</title>

    <link href="/kb/static/css/main.f7633538c846.css" rel="stylesheet" type="text/css" />

    
        <meta name="robots" content="noindex, nofollow">
    

    

    <!-- FB Open Graph tags -->
    <meta property="og:title" content="Preparing for ColumnStore Installation - 1.0.X - Source" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://mariadb.com/kb/en/preparing-for-columnstore-installation-10x/+source/" />
    <meta property="og:image" content="http://mariadb.comaskmonty-logo.png" />
    <meta property="og:site_name" content="MariaDB KnowledgeBase" />
    <meta property="fb:admins" content="514852603" />
    <meta property="og:description" content="" />

    <meta name="description" content="" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="//fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet"/>
    
</head>
<body class="mpkb nodes autoresize nodes_source jqui" id="nodes_source">





<div id="menu-mobile" class="visible-sm visible-xs">

    <div>
        <div id="mobile-close-menu" class="text-right">
            <a href="javascript:void(0)" title="Close Menu" id="back-main" class="toggle-menu">X<span></span></a>
        </div>
    </div>
    <div class="mainmenu-mobile">
        <ul class="ls-none ul-menu">
            <li data-sub="submenu5"><a class="open-form-search" href="/kb/search/" title="Search">Search </a></li>
            <li data-sub="submenu0"><a href="/products" title="Products">Products</a><span class="arrow-main"></span></li>
            <li data-sub="submenu1"><a href="/services" title="Services">Services</a><span class="arrow-main"></span></li>
            <li data-sub="submenu2"><a href="/resources" title="Resources">Resources</a><span class="arrow-main"></span></li>
            <li data-sub="submenu3"><a href="/about-us" title="About">About</a><span class="arrow-main"></span></li>
            <li data-sub="submenu4"><a href="/contact" title="Contact">Contact</a></li>
        </ul>
    </div>

    <div class="nav-top-mobile">
        <div class="select-box form">

            <ul class="inline-block-md mb-none top-nav">
                <li>

                </li>
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/preparing-for-columnstore-installation-10x/+source/"> Login</a>
                    </li>
                
            </ul>



        </div>
        <p class="text-center copyright">Copyright &copy; 2024 MariaDB. All rights reserved.</p>
    </div>
</div>
<div class="violator-wrap d-none" id="top_violator">
    <div class="container">
        <div class="row">
            <div class="col-xs-12 col-sm-12">
                <div class="violator-outer">
                    <div class="violator-inner">
                        <div class="row">
                            <div class="col-xs-12 col-sm-9 col-lg-7 col-lg-offset-2" id="top_violator_content">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="content-link" target="_blank" rel="nofollow noreferrer">
                                    <span>The Ultimate Guide to High Availability with MariaDB</span>
                                </a>
                            </div>
                            <div class="col-xs-12 col-sm-3" id="top_violator_cta">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="btn btn-mariadb" target="_blank" rel="nofollow noreferrer">Download Now</a>
                            </div>
                        </div>
                    </div>
                    <button type="button" class="btn btn-link close-btn">
                        <svg xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 24 24" width="15px" height="15px"><path d="M 4.9902344 3.9902344 A 1.0001 1.0001 0 0 0 4.2929688 5.7070312 L 10.585938 12 L 4.2929688 18.292969 A 1.0001 1.0001 0 1 0 5.7070312 19.707031 L 12 13.414062 L 18.292969 19.707031 A 1.0001 1.0001 0 1 0 19.707031 18.292969 L 13.414062 12 L 19.707031 5.7070312 A 1.0001 1.0001 0 0 0 18.980469 3.9902344 A 1.0001 1.0001 0 0 0 18.292969 4.2929688 L 12 10.585938 L 5.7070312 4.2929688 A 1.0001 1.0001 0 0 0 4.9902344 3.9902344 z"/></svg>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="wrapper">
<div id="top-nav">
    <div class="container">
        <ul class="hidden-sm hidden-xs" >
            <li><a href="https://mariadb.com/kb/">Knowledge Base</a></li>
            <li><a href="https://mariadb.com/contact/">Contact</a></li>
            
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/preparing-for-columnstore-installation-10x/+source/" rel="nofollow">Login</a>
                    </li>
                
            
            
            <li id="search-form">
                <form action="/kb/en/+search/" method="get" id="search-block-form" accept-charset="UTF-8">
                    <input id="search" title="Enter the terms you wish to search for."
                           placeholder="Search . . ." type="text"
                           name="q" value="" size="15" maxlength="128" class="form-text"
                           data-autocomplete-url="/kb/en/+search/autocomplete/">
                    <input type="hidden" name="quick" value="1" />
                    <input type="hidden" name="source" value="kb" />
                </form>
            </li>
            <li><a id="search-toggler" href="/kb/search/">Search</a></li>
            
        </ul>
    </div>
</div>
<div id="navbar-bottom" class="navbar">
    <div class="container">
        
        
        
        
        <div class="row">
            <div class="col-md-3 col-sm-9 col-xs-9">
                <a class="brand" href="/" title="MariaDB">
                    <img src="/kb/static/images/logo-2018-black.95f5978ae14d.png">
                </a>
            </div>
            <div class="col-md-9 hidden-sm hidden-xs">
                <div class="main-menu">
                    <ul id="main-menu" class="nav navbar-nav inline-block-sm">
    <li class="has-sub full-menu">
        <a href="/products" title="Products">Products</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/services" title="Services">Services</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/pricing" title="Pricing">Pricing</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/resources" title="Resources">Resources</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/about-us" title="About Us">About Us</a>
    </li>
    <li class="">
        <a class="button electric-eel small top-bar-right-download" href="/downloads/">Download</a>
    </li>
</ul>
                </div>
            </div>
            <div class="col-md-3 visible-sm visible-xs col-sm-3 col-xs-3 ps-rv">
                <div class="navbar-header text-right pull-right">
                    <button type="button" class="menu-control toggle-menu" id="open-menu">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="main">
    <div class="container">
        

        <div id="subheader1" class="clearfix">
            <div class="pull-left">
                
                <div id="breadcrumbs" class="breadcrumb">
                    <a href="/kb/en/">Knowledge Base</a>
                    


    
    » <a class="crumb" href="/kb/en/documentation/">MariaDB Server Documentation</a>
    

    
    » <a class="crumb" href="/kb/en/columns-storage-engines-and-plugins/">Columns, Storage Engines, and Plugins</a>
    

    
    » <a class="crumb" href="/kb/en/storage-engines/">Storage Engines</a>
    

    
    » <a class="crumb" href="/kb/en/mariadb-columnstore/">MariaDB ColumnStore</a>
    

    
    » <a class="crumb" href="/kb/en/columnstore-getting-started/">ColumnStore Getting Started</a>
    

    
    » <a class="crumb" href="/kb/en/preparing-and-installing-mariadb-columnstore-10x/">Preparing and Installing MariaDB ColumnStore 1.0.X</a>
    


    » <a class="node_link crumb" href="/kb/en/preparing-for-columnstore-installation-10x/">Preparing for ColumnStore Installation - 1.0.X</a>


                </div>
                
            </div>
        </div>
    </div>
    <div class="container" id="container-main">
        <div class="row">
            
            
                
                <aside id="sidebar-first" class="sidebar col-md-2 hidden-xs hidden-sm hidden-print">
                    
                        
                        <ul id="category_menu" class="nav nav-pills nav-stacked">
                            <li><a href="/kb/en/">Home</a></li>
                            
                                
                                <li><a href="/kb/en/documentation/">MariaDB Server</a></li>
                                <li><a href="/kb/en/maxscale/">MariaDB MaxScale</a></li>
                                <li><a href="/kb/en/mariadb-columnstore/">MariaDB ColumnStore</a></li>
                                <li><a href="/kb/en/connectors/">Connectors</a></li>
                            

                        </ul>
                    

                    
                        <div>
    

<div class="well well-small box actions"><div>

        <a class="btn btn-block btn-small" href="/kb/en/preparing-for-columnstore-installation-10x/">Return to article</a>
    
</div>
</div>

</div>
                    

                    

































                </aside>
            
            
            
                
            
            
            <section id="content" class="limited_width col-md-10 clearfix">
                
                    <h1>Preparing for ColumnStore Installation - 1.0.X - Source</h1>
                

                



                <div>
                    

    

    
    <div class="revision_info">
        <dl class="table">
            <dt>Revision</dt>
            <dd><a href="/kb/en/preparing-for-columnstore-installation-10x/+r/80826/">80826</a></dd>
            <dt>User</dt>
            <dd>
<span class="user" id="user-4175">
<a href="/kb/user/id/4175" title="David Hill">David Hill</a>
</span></dd>
            <dt>Date</dt>
            <dd>

<span class="datetime" title="2019-02-14 00:04">2019-02-14 00:04</span></dd>
        </dl>
    </div>
    


    

    
        
        <textarea id="answer_source" class="creole_source autogrow">=== Prerequisite 
&lt;&lt;style class=&#34;redbox&#34;&gt;&gt;
With the GA version of MariaDB ColumnStore, there should be no versions of MariaDB Server or MySQL pre-installed on the OS before a MariaDB ColumnStore binary or RPM is installed on the system. If you have an installation of MariaDB server, uninstall it before proceeding.
&lt;&lt;/style&gt;&gt;


&lt;&lt;toc title=&#39;&#39; depth=4 layout=standalone&gt;&gt;

==== Configuration preparation

Before installing MariaDB ColumnStore, there is some preparation necessary. You will need to determine the following, refer the MariaDB ColumnStore Architecture Document for additional information.

* How many User Modules (UMs) will your system need?

* How many Performance Modules (PMs) will your system need?

* How much disk space will your system need?

===== OS information

MariaDB ColumnStore is certified to run on:

RHEL/CentOS v6, v7

Ubuntu 16.04 LTS

Debian v8

SUSE 12

but it should run on any recent Linux system.

Make sure the same OS is installed on all the servers for a multi-node system.

Make sure the locale setting on all servers are all the same.

To set locale to en_US and UTf-8, run:
&lt;&lt;code&gt;&gt;
# localedef -i en_US -f UTF-8 en_US.UTF-8
&lt;&lt;/code&gt;&gt;

===== System administration information

Information your system administrator must provide you before you start installing MariaDB ColumnStore:

* The hostnames of each interface on each node (optional).

* The IP address of each interface on each node.

* The root/non-root password for the nodes (all nodes must have the same root/non-root password or root/non-root ssh keys must be set up between servers). MariaDB ColumnStore can be installed as root or a non-root user.

Example for 3 PM, 1UM system, these are the steps required to configure PM-1 for passwordless ssh. The equivalent steps must be repeated on every PM in the system.
The equivalent steps must be repeated on every UM in the system if the MariaDB ColumnStore Data Replication feature is enabled during the install process.

&lt;&lt;code&gt;&gt;
[root@pm- 1 ~] $ ssh-keygen
[root@pm- 1 ~] $ ssh-copy-id -i ~/.ssh/id_rsa.pub pm-1
[root@pm- 1 ~] $ ssh-copy-id -i ~/.ssh/id_rsa.pub pm-2
[root@pm- 1 ~] $ ssh-copy-id -i ~/.ssh/id_rsa.pub pm-3
[root@pm- 1 ~] $ ssh-copy-id -i ~/.ssh/id_rsa.pub um-1
&lt;&lt;/code&gt;&gt;


===== Network configuration

MariaDB ColumnStore is quite flexible regarding networking. 
Some options are as follows:

* The interconnect between UMs and PMs can be one or more private VLANs. 
In this case MariaDB ColumnStore will automatically trunk the individual LANs together to provide greater effective bandwidth between the UMs and PMs.

* The PMs do not require a public LAN access as they only need to communicate with the UMs.

* The UMs most likely require at least one public interface to access the MySQL server front end from the site LAN. This interface can be a separate physical or logical connection from the PM interconnect.

* You can use whatever security your site requires on the public access to the MySQL server front end on the UMs. By default it is listening on port 3306.

* MariaDB ColumnStore software only requires a TCP/IP stack to be present to function. You can use any physical layer you desire.

==== MariaDB ColumnStore port usage

The MariaDB ColumnStore daemon utilizes port 3306.

You must reserve the following ports to run the MariaDB ColumnStore
software:
8600 - 8630, 8700, and 8800

==== Storage and Database files (DBRoots)

DBRoots are the MariaDB ColumnStore Datafile containers or directories. For example on a root install, they are /usr/local/mariadb/columnstore/data&lt;N&gt; where N is the dbroot number. 

IMPORTANT: When using Storage (extX, NFS, etc), setup to have the MariaDB front-end data and the DBRoots back-end data files mounted. Don&#39;t setup a mount where the actually MariaDB Columnstore package as a whole is mounted, i.e. /usr/local/mariadb or /usr/local/mariadb/columnstore.

This would included mounts for:
* /usr/local/mariadb/columnstore/mysql/db   # optional for the front-end schemas and non-Columnstore data
* /usr/local/mariadb/columnstore/dataX        # DBroots, Columnstore data

===== Local database files

If you are using local disk to store the database files, the DBRoot directories will be created under the installation directory, for example /usr/local/mariadb/columnstore/data&lt;N&gt; where N is the DBRoot number. 
You should setup to have 1 DBRoot per Performance Module when configuring the system.

Use of soft-links for the Data. If you want to setup an install where the Data is stored out in a separate directory in the case you have limit amount local storage, this can be done.
It is recommended that the softlinks be setup at the Data Directory Levels, like mariadb/columnstore/data and mariadb/columnstore/dataX. With this setup, you can perform upgrades using any of the package types, rpm, debian, or binary.
In the case where you prefer OR have to set a softlink at the top directory, like /usr/local/mariadb, you will need to install using the binary package. If you install using the rpm package and tool, this softlink will be deleted when you perform the upgrade process and the upgrade will fail.

===== SAN mounted database files

If you are using a SAN to store the database files, the following must be taken into account:

* Each of these DBRoots must be a separate, mountable partition/directory

* You might have more than 1 DBRoot assigned to a Performance Module and you can have different number of DBroots per Performance Module, but its recommend to have the same number and same physical size of the storage device on each Performance Module. Here is an example: If you setup 1 Performance Module and you have 2 separate devices that aren&#39;t stripped, then you would configure 2 DBRoots to this 1 Performance Module and setup the /etc/fstab with 2 mounts.

* MariaDB ColumnStore will run on most Linux filesystems, but we test most heavily with EXT2. You should have no problems with EXT3 or EXT4, but the journaling in these filesystems can be expensive for a database application. You should carefully evaluate the write characteristics of your chosen filesystem to make sure they meet your specific business needs. In any event, MariaDB ColumnStore writes relatively few, very large (64MB) files. You should consult with your Linux system administrator to see if configuring a larger bytes-per-inode setting than the default is available in your chosen filesystem.

* MariaDB ColumnStore supports High Availability failover in the case where a Performance Module was to go down when you are using SAN storage devices. To setup a system to support this, all of the SAN devices would need to be mountable to all of the Performance Modules. So in a system that had 2 Performance Modules and each one had 1 SAN device. If 1 of the Performance Modules was to go offline, the system would automatically detect this and would remount the SAN device from the downed module to the 1 active Performance Module. And the system would be able to continue to perform while the module remain offline.

* The fstab file must be set up (/etc/fstab). These entries would need to be added to each PM pointing to the all the dbroot(s) being used on all PMs. The &#39;noauto&#39; option indicates that all dbroots will be associated to every PM but will not be automatically mounted at server startup. The associated dbroots that are assigned to each PM will be specifically mounted to that PM at Columnstore startup.

The following example shows an /etc/fstab setup for 2 dbroots total for all PMs, but they can setup any disk type they want:

&lt;&lt;code&gt;&gt;
/dev/sda1 /usr/local/mariadb/columnstore/data1 ext2 noatime,nodiratime,noauto 0 0
/dev/sdd1 /usr/local/mariadb/columnstore/data2 ext2 noatime,nodiratime,noauto 0 0
&lt;&lt;/code&gt;&gt;

==== Performance optimization considerations

There are optimizations that should be made when using MariaDB ColumnStore listed below. As always, please consult with your network administrator for additional optimization considerations for your specific installation needs.

===== GbE NIC settings:

* Modify /etc/rc.d/rc.local to include the following:

&lt;&lt;code&gt;&gt;
/sbin/ifconfig eth0 txqueuelen 10000
&lt;&lt;/code&gt;&gt;

* Modify /etc/sysctl.conf for the following:

&lt;&lt;code&gt;&gt;
# increase TCP max buffer size

net.core.rmem_max = 16777216

net.core.wmem_max = 16777216

# increase Linux autotuning TCP buffer limits

# min, default, and max number of bytes to use

net.ipv4.tcp_rmem = 4096 87380 16777216

net.ipv4.tcp_wmem = 4096 65536 16777216

# don&#39;t cache ssthresh from previous connection

net.ipv4.tcp_no_metrics_save = 1

# recommended to increase this for 1000 BT or higher

net.core.netdev_max_backlog = 2500

# for 10 GigE, use this

net.core.netdev_max_backlog = 30000
&lt;&lt;/code&gt;&gt;

* Cache memory settings:
To optimize Linux to cache directories and inodes the vm.vfs_cache_pressure can be set to a lower value than 100 to attempt to retain caches for inode and directory structures. This will help improve read performance. A value of 10 is suggested. The following commands must all be run as the root user or with sudo.

To check the current  value:
&lt;&lt;code&gt;&gt;
cat /proc/sys/vm/vfs_cache_pressure
&lt;&lt;/code&gt;&gt;

To set the current value until the next reboot:
&lt;&lt;code&gt;&gt;
sysctl -w vm.vfs_cache_pressure=10
&lt;&lt;/code&gt;&gt;

To set the value permanently across reboots, add the following to /etc/sysctl.conf:
&lt;&lt;code&gt;&gt;
vm.vfs_cache_pressure = 10
&lt;&lt;/code&gt;&gt;

==== System settings considerations

===== umask setting

The default setting of 022 in /etc/profile is what is recommended. It it required that it the setting doesn&#39;t end with a 7, like 077. Example, on a root install, mysqld that runs as &#39;mysql&#39; user needs to be able to read the MariaDB ColumnStore configuration file, Columnstore.xml. So a last digit of 7 would prevent this and cause the install to fail. 

The current umask can be determined:
&lt;&lt;code&gt;&gt;
umask
&lt;&lt;/code&gt;&gt;
A value of 022 can be set in the current session or in /etc/profile as follows:
&lt;&lt;code&gt;&gt;
umask 022
&lt;&lt;/code&gt;&gt;

==== Firewall considerations

The MariaDB ColumnStore utilizes these ports 3306, 8600 - 8630, 8700, and 8800. So on multi-node installs, these ports will need to be accessible between the servers. So if there is any firewall software running on the system that could block these ports, either that firewall would need to be disabled as shown below or the ports listed above will need to be configured to allow both input and output on all servers within the firewall software. You will also want to allow these ports to be passed though on any routers that might be connected between the servers.

To disable any local firewalls and SELinux on mutli-node installs

You must be a Root user.

CentOS 6 and systems using iptables
&lt;&lt;code&gt;&gt;
#service iptables save  (Will save your existing IPTable Rules)
#service iptables stop  (It will disable firewall Temporarly)
&lt;&lt;/code&gt;&gt;
To Disable it Permanentely:
&lt;&lt;code&gt;&gt;
#chkconfig iptables off
&lt;&lt;/code&gt;&gt;

CentOS 7 and systems using systemctl with firewalld installed
&lt;&lt;code&gt;&gt;
#systemctl status firewalld  
#systemctl stop firewalld  
#systemctl disable firewalld  
&lt;&lt;/code&gt;&gt;

Ubuntu and systems using ufw
&lt;&lt;code&gt;&gt;
#service ufw stop  (It will disable firewall Temporarly)
&lt;&lt;/code&gt;&gt;
To Disable it Permanentely:
&lt;&lt;code&gt;&gt;
#chkconfig ufw off
&lt;&lt;/code&gt;&gt;

SUSE 
&lt;&lt;code&gt;&gt;
#/sbin/rcSuSEfirewall2 status
#/sbin/rcSuSEfirewall2 stop 
&lt;&lt;/code&gt;&gt;

To disable SELinux,
&lt;&lt;code&gt;&gt;
edit file &#34;/etc/selinux/config&#34; and find line;

SELINUX=enforcing

Now replace it with,

SELINUX=disabled
&lt;&lt;/code&gt;&gt;

=== Package dependencies

==== Boost libraries

MariaDB ColumnStore requires that the boost package of 1.53 or newer is installed.

For Centos 7, Ubuntu 16, Debian 8, SUSE 12 and other newer OS&#39;s, you can just install the boost packages via yum or apt-get. 

&lt;&lt;code&gt;&gt;
# yum -y install boost
&lt;&lt;/code&gt;&gt;

or 

&lt;&lt;code&gt;&gt;
# apt-get -y install libboost-all-dev
&lt;&lt;/code&gt;&gt;


For CentOS 6, you can either download and install the MariaDB Columnstore Centos 6 boost library package or install the boost source of 1.55 and build it to generate the required libraries. That means both the build and the install machines require this.

How to download, go to binaries download page and download &#34;centos6_boost_1_55.tar.gz&#34;

   https://mariadb.com/downloads/columnstore

   Click All Versions - &gt; 1.0.x -&gt; centos -&gt; x86_64

Install package on each server in the cluster

&lt;&lt;code&gt;&gt;
wget https://downloads.mariadb.com/ColumnStore/1.0.x/centos/x86_64/centos6_boost_1_55.tar.gz
tar xfz centos6_boost_1_55.tar.gz -C /usr/lib
ldconfig
&lt;&lt;/code&gt;&gt;

Downloading and build the boost libraries:

NOTE: This means that the &#34;Development Tools&#34; group install be done prior to this.

&lt;&lt;code&gt;&gt;
yum groupinstall &#34;Development Tools&#34;
yum install cmake
&lt;&lt;/code&gt;&gt;


Here is the procedure to download and build the boost source:

&lt;&lt;code&gt;&gt;
cd /usr/
wget http://sourceforge.net/projects/boost/files/boost/1.55.0/boost_1_55_0.tar.gz
tar zxvf boost_1_55_0.tar.gz
cd boost_1_55_0
./bootstrap.sh --with-libraries=atomic,date_time,exception,filesystem,iostreams,locale,program_options,regex,signals,system,test,thread,timer,log --prefix=/usr
./b2 install
ldconfig
&lt;&lt;/code&gt;&gt;

For SUSE 12, you will need to install the boost-devel package, which is part of the SLE-SDK package.

&lt;&lt;code&gt;&gt;
SUSEConnect -p sle-sdk/12.2/x86_64
zypper install boost-devel
&lt;&lt;/code&gt;&gt;

==== Other packages

Make sure these packages are installed on the nodes where the MariaDB ColumnStore packages will be installed:

==== Centos 6/7

&lt;&lt;code&gt;&gt;
# yum -y install epel-release
# yum -y install expect perl perl-DBI openssl zlib file sudo  libaio rsync snappy net-tools perl-DBD-MySQL jemalloc
&lt;&lt;/code&gt;&gt;

==== Ubuntu 16

&lt;&lt;code&gt;&gt;
# apt-get -y install tzdata libtcl8.6 expect perl openssl file sudo libdbi-perl libboost-all-dev libreadline-dev rsync libsnappy1v5 net-tools libdbd-mysql-perl libjemalloc1
&lt;&lt;/code&gt;&gt;

==== Debian 8

&lt;&lt;code&gt;&gt;
# apt-get -y install expect perl openssl file sudo libdbi-perl libboost-all-dev libreadline-dev rsync libsnappy1 net-tools libdbd-mysql-perl libjemalloc1
&lt;&lt;/code&gt;&gt;

==== SUSE 12

&lt;&lt;code&gt;&gt;
zypper addrepo https://download.opensuse.org/repositories/network:cluster/SLE_12_SP3/network:cluster.repo
zypper refresh
zypper install expect perl perl-DBI openssl zlib file sudo libaio rsync boost snappy net-tools perl-DBD-mysql jemalloc
&lt;&lt;/code&gt;&gt;

==== System Logging Package

MariaDB ColumnStore utilizes the System Logging applications for generating logs. So one of the below system logging applications should be install on all servers in the ColumnStore system:
* syslog
* rsyslog
* syslog-ng

=== Choosing the type of initial download/install

Installing MariaDB ColumnStore with the use of soft-links. If you want to setup an install where the Data is stored out in a separate directory in the case you have limit amount local storage, this can be done.
It is recommended that the softlinks be setup at the Data Directory Levels, like mariadb/columnstore/data and mariadb/columnstore/dataX. With this setup, you can perform upgrades using any of the package types, rpm, debian, or binary.
In the case where you prefer OR have to set a softlink at the top directory, like /usr/local/mariadb, you will need to install using the binary package. If you install using the rpm package and tool, this softlink will be deleted when you perform the upgrade process and the upgrade will fail.

IMPORTANT: Make sure there are no other version of MariaDB server install. If so, these will need to be uninstalled before installing MariaDB ColumnStore.

=== Root user installs

==== Initial download/install of MariaDB ColumnStore RPMs

# Install MariaDB ColumnStore as user root (use &#39;su -&#39; to establish a login shell if you access the box using another account):

Note: MariaDB ColumnStore installation will install with a single MariaDB userid of
root with no password. You may setup users and permissions for a MariaDB
ColumnStore-Mysql account just as you would in MySQL.

Note: The packages will be installed into /usr/local. This is required for root user installs

** Download the package mariadb-columnstore-release#.x86_64.tar.gz (RHEL5 64-BIT) to the server where you are installing MariaDB ColumnStore and place in the /root directory.
** Unpack the tarball, which will generate multiple RPMs that will reside in the
/root/ directory. 
\\
&lt;&lt;code&gt;&gt;tar -zxf mariadb-columnstore-release#.x86_64.tar&lt;&lt;/code&gt;&gt; 
\\
** Install the RPMs. The MariaDB ColumnStore software will be installed in /usr/local/. \\
&lt;&lt;code&gt;&gt;rpm -ivh mariadb-columnstore*release#*.rpm&lt;&lt;/code&gt;&gt;
\\
==== Initial download/install of MariaDB ColumnStore binary package

Install MariaDB ColumnStore as user root on the server designated as PM1:
Note: You may setup users and permissions for an MariaDB ColumnStore account just as you would in MariaDB. 

** For root user installs, MariaDB Columnstore needs to run in /usr/local.
You can either install directly into /usr/local or install elsewhere and then setup a softlink
to /usr/local. Here is an example of setting up a soft-link if you install the binary package in /mnt/mariadb
&lt;&lt;code&gt;&gt;
# ln -s /mnt/mariadb /usr/local
&lt;&lt;/code&gt;&gt;

* Download the package into the /root/ and copy to /usr/local directory to the server where you are installing MariaDB ColumnStore. \\
&lt;&lt;code&gt;&gt;
cp /root/mariadb-columnstore-release#.x86_64.bin.tar.gz /usr/local/ mariadb-columnstore-release#.x86_64.bin.tar.gz
&lt;&lt;/code&gt;&gt;
* Unpack the tarball, which will generate the /usr/local/ directory. \\
&lt;&lt;code&gt;&gt;tar -zxvf mariadb-columnstore-release#.x86_64.bin.tar.gz&lt;&lt;/code&gt;&gt;

Run the post-install script: \\

&lt;&lt;code&gt;&gt;
&lt;&lt;creole&gt;&gt;**/usr/local/mariadb/columnstore/bin/post-install**&lt;&lt;/creole&gt;&gt;
&lt;&lt;/code&gt;&gt;

==== Initial download/install of MariaDB ColumnStore DEB package

DEB package installs are not supported in the current version, but there is an Ubuntu 16.04 binary package that you can use to install. Just follow the binary package instructions above
 
Install MariaDB ColumnStore on a Debian or Ubuntu OS as user root:
Note: You may setup users and permissions for an MariaDB ColumnStore
account just as you would in MariaDB. 
# Download the package mariadb-columnstore-release#.amd64.deb.tar.gz \\
(DEB 64- BIT) into the /root directory of the server where you are installing MariaDB ColumnStore. \\
# Unpack the tarball, which will generate DEBs. \\
&lt;&lt;code&gt;&gt; tar -zxf  mariadb-columnstore-release#.amd64.deb.tar.gz&lt;&lt;/code&gt;&gt; \\
# Install the MariaDB ColumnStore DEBs. The MariaDB ColumnStore software will be installed in /usr/
local/. \\
&lt;&lt;code&gt;&gt; dpkg -i mariadb-columnstore*release#*.deb&lt;&lt;/code&gt;&gt;


=== Non-root user installs

MariaDB Columnstore can be installed to run as a non-root user using the binary tar file installation. These procedures will also allow you to change the installation from the default install directory into a user-specified directory. These procedures will need to be run on all the MariaDB ColumnStore Servers.

For the purpose of these instructions, the following assumptions are:
* Non-root user &#34;guest&#34; is used in this example
* Installation directory is /home/guest/mariadb/columnstore

Tasks involved:
* Create the non-root user and group of the same name (by root user)
* Update sudo configuration (by root user)
* Set the user file limits (by root user)
* Modify fstab if using SAN Mounted files (by root user)
* Uninstall existing MariaDB Columnstore installation if needed (by root user)
* Update permissions on certain directories that MariaDB Columnstore writes (by root user)
* Set up defaults file
* MariaDB Columnstore Installation (by non-root user)
* Enable MariaDB Columnstore to start automatically at boot time

==== Creation of the non-root user (by root user)
Before beginning the binary tar file installation you will need your system administrator to set up accounts
for you on every MariaDB Columnstore node. The account name must be the same on every node. The password used must be the same on every node. If you subsequently change the password on one node, you must change it on every node. The user-id must be the same on every node as well. In the examples below we will use the account name &#39;guest&#39; and the password &#39;mariadb&#39;. Additionally, every node must have a basic
Linux server package setup and additionally have expect (and all its dependencies) installed.

* create new user

Group ID is an example, can be different than 1000, but needs to be the same on all servers in the cluster

&lt;&lt;code&gt;&gt;adduser guest -u 1000&lt;&lt;/code&gt;&gt;

* create group

&lt;&lt;code&gt;&gt;
addgroup guest
moduser -g guest guest
&lt;&lt;/code&gt;&gt;

The value for user-id must be the same for all nodes.

* Assign password to newly created user

&lt;&lt;code&gt;&gt;passwd guest&lt;&lt;/code&gt;&gt;

* Log in as user guest

&lt;&lt;code&gt;&gt;su - guest&lt;&lt;/code&gt;&gt;

* Choose an installation directory in which the non-root user has full read-write access. The
installation directory must be the same on every node. In the examples below we will use the path
&#39;/home/guest/mariadb/columnstore&#39;. \\
On each host, the install process will update $HOME/.bashrc with the following \\

&lt;&lt;code&gt;&gt;
export COLUMNSTORE_INSTALL_DIR=$HOME/mariadb/columnstore
export PATH=$COLUMNSTORE_INSTALL_DIR/bin:$COLUMNSTORE_INSTALL_DIR/mysql/bin:/usr/sbin:$PATH
export LD_LIBRARY_PATH=$COLUMNSTORE_INSTALL_DIR/lib:$COLUMNSTORE_INSTALL_DIR/mysql/lib/mysql
&lt;&lt;/code&gt;&gt;

Note that these commands must be available to non-interactive shells. Once changes have been made,
verify by running &#39;ssh user@host env&#39; to ensure these values are displayed.

You must log off and log back in for these environment variables to be effective.

==== Update sudo configuration (by root user)
The sudo configuration file on each node will need to be modified to add in the non-root user. The
recommended way is to use the Unix command, visudo. The following example will add the ‘guest’
user:
visudo
* Add the following line for the non-root user: \\
&lt;&lt;code&gt;&gt;
guest  ALL=(ALL)       NOPASSWD: ALL
&lt;&lt;/code&gt;&gt;
* Comment out the following line, which will allow the user to login without &#39;tty&#39;:
&lt;&lt;code&gt;&gt;
#Defaults requiretty
&lt;&lt;/code&gt;&gt;

==== Set the user file limits (by root user)
ColumnStore needs the open file limit to be increased for the specified user. To do this edit the /etc/security/limits.conf file and make the following additions at the end of the file:

&lt;&lt;code&gt;&gt;
guest hard nofile 65536
guest soft nofile 65536
&lt;&lt;/code&gt;&gt;

If you are already logged in as &#39;guest&#39; you will need to log out and back in again for this change to take effect.

==== Modify fstab if using SAN Mounted Database Files (by root user)
If you are using a SAN to store the database files, an ‘users‘ option will need to be added to the fstab
entries (by the root user). For more information, please see the “SAN Mounted Database Files” section
earlier in this guide. 

\\Example entries: \\
/dev/sda1 /home/guest/mariadb/columnstore/data1 ext2 noatime,nodiratime,noauto,users 0 0 \\
/dev/sdd1 /home/mariadb/columnstore/data2 ext2 noatime,nodiratime,noauto,users 0 0 \\ 

The disk device being used will need to have its user permissions set to the non-root user name. This is an
example command run as &#39;root&#39; user setting the user ownership of dbroot /dev/sda1 to non-root user of
&#39;guest&#39;: \\

&lt;&lt;code&gt;&gt;
mke2fs dbroot (i.e., /dev/sda1) 
mount /dev/sda1 /tmpdir 
chown -R infinidb.infinidb /tmpdir 
umount /tmpdir 
&lt;&lt;/code&gt;&gt;

==== Uninstall existing MariaDB Columnstore installation, if needed (by root user) \\
If MariaDB Columnstore has ever before been installed on any of the planned hosts as a root user install, you must have the system administrator verify that no remnants of that installation exist. The non-root installation will not be successful if there are MariaDB Columnstore files owned by root on any of the hosts.

* Verify the MariaDB Columnstore installation directory does not exist: \\
The /usr/local/mariadb/columnstore directory should not exist at all unless it is your target directory, in
which case it must be completely empty and owned by the non-root user.

* Verify the /etc/fstab entries are correct for the new installation. \\

* Verify the /etc/default/columnstore directory does not exist.\\

* Verify the /var/lock/subsys/mysql-Columnstore file does not exist.\\

* Verify the /tmp/StopColumnstore file does not exist. \\

There should not be any files or directories owned by root in the /tmp directory

==== Update permissions on certain directories that MariaDB Columnstore writes (by root user)

These directories are writing to by the MariaDB Columnstore applications and the permissions need to be set to allow them to create files. So the permissions of them need to be set to the following by root user.

&lt;&lt;code&gt;&gt;
chmod 777 /tmp
chmod 777 /dev/shm
&lt;&lt;/code&gt;&gt;

==== MariaDB Columnstore installation (by non-root user)
You should be familiar with the general MariaDB Columnstore installation instructions in this guide as you will be askedthe same questions during installation.

* Log in as non-root user ( guest , in our example)
Note: Ensure you are at your home directory before proceeding to the next step

* Now place the MariaDB Columnstore binary tar file in your home directory on the host you will be using as
PM1. Untar the binary distribution package to the /home/guest directory:
tar -xf mariadb-columnstore-release#.x86_64.bin.tar.gz

* Run post installation:

&lt;&lt;code&gt;&gt;
./mariadb/columnstore/bin/post-install --installdir=$HOME/mariadb/columnstore
&lt;&lt;/code&gt;&gt;

* Run the 3 command lines that were outputted by the previous post-install command, which would
look like the following. See the “MariaDB Columnstore Configuration” in this guide for more information:

&lt;&lt;code&gt;&gt;
export COLUMNSTORE_INSTALL_DIR=/home/guest/mariadb/columnstore
export LD_LIBRARY_PATH=/home/guest/mariadb/columnstore/lib:/home/guest/mariadb/columnstore/mysql/lib/mysql
/home/guest/mariadb/columnstore/bin/postConfigure -i /home/guest/mariadb/columnstore
&lt;&lt;/code&gt;&gt;

a. When prompted for package type, enter &#39;binary&#39;
Enter the Package Type being installed to other servers [rpm,deb,binary] (rpm) &gt; binary

b. When prompted for password, enter the non-user account password OR just hit enter if you
have setup the non-root user with password-less ssh keys on all nodes (Please see the “System
Administration Information” section earlier in this guide for more information on ssh keys.)

==== Post-installation (by root user)

Optional items to assist in MariaDB Columnstore auto-start and logging:

* To configure MariaDB Columnstore to start automatically at boot time, perform the following steps in each
InfiniDB server:

* Add the following to the /etc/rc.local or /etc/rc.d/rc.local (centos7) file:

su - guest -l -c &#34;/home/guest/mariadb/columnstore/bin/columnstore start&#34;

or

sudo runuser -l mariadb-user -c &#34;/home/mariadb-user/mariadb/columnstore/bin/columnstore start&#34;

Note: Make sure the above entry is added to the rc.local file that gets executed at boot time.
Depending on the OS installation, rc.local could be in a different location.

* MariaDB Columnstore will setup and log using your current system logging application in the directory
/var/log/mariadb/columnstore. Perform the following if you want to setup to have the MariaDB Columnstore logs archived daily and deleted after 7 defaults (default setting):\\

* cp /home/guest/mariadb/columnstore/bin/columnstoreLogRotate
/etc/logrotate.d/columnstore (this is a rename of the file)

=== ColumnStore Cluster Test Tool

This tool can be running before doing installation on a single-server or multi-node installs. It will verify the setup of all servers that are going to be used in the Columnstore System.

https://mariadb.com/kb/en/mariadb/mariadb-columnstore-cluster-test-tool

The next step would be to run the install script postConfigure, check the Single Server Or Multi-Server Install guide.

=== ColumnStore Configuration and Installation Tool

MariaDB Columnstore System Configuration and Installation tool, &#39;postConfigure&#39;, will Configure the MariaDB Columnstore System and will perform a package Installation of all of the servers within the system that is being configured. It will prompt the user to configuration information like server, storage, and system features. It updates the MariaDB Columnstore System Configuration File, Columnstore.xml. It will also execute MariaDB Server setup scripts on server where User Module Functionality will be. At the end, it will start up the ColumnStore system. 

NOTE: This tool is always run on the Performance Module #1. 

Example uses of this script are shown in the Single and Multi Server Installations Guides.

&lt;&lt;code&gt;&gt;
# /usr/local/mariadb/columnstore/bin/postConfigure -h

This is the MariaDB ColumnStore System Configuration and Installation tool.
It will Configure the MariaDB ColumnStore System based on Operator inputs and
will perform a Package Installation of all of the Modules within the
System that is being configured.

IMPORTANT: This tool should only be run on a Performance Module Server,
           preferably Module #1

Instructions:

	Press &#39;enter&#39; to accept a value in (), if available or
	Enter one of the options within [], if available, or
	Enter a new value


Usage: postConfigure [-h][-c][-u][-p][-s][-port][-i][-n]
   -h  Help
   -c  Config File to use to extract configuration data, default is Columnstore.xml.rpmsave
   -u  Upgrade, Install using the Config File from -c, default to Columnstore.xml.rpmsave
	    If ssh-keys aren&#39;t setup, you should provide passwords as command line arguments
   -p  Unix Password, used with no-prompting option
   -s  Single Threaded Remote Install
   -port MariaDB ColumnStore Port Address
   -i Non-root Install directory, Only use for non-root installs
&lt;&lt;/code&gt;&gt;</textarea>
    


                    <div id="content_disclaimer" class="graybox">
                        Content reproduced on this site is the property of its respective owners,
                        and this content is not reviewed in advance by MariaDB. The views, information and opinions
                        expressed by this content do not necessarily represent those of MariaDB or any other party.
                    </div>
                </div>
            </section>

            
        </div>
    </div>
</div>

<!-- Footer -->
<footer id="footer">
    <div class="footer">
        <div class="container">
            <div class="row">
                <div class="col-xs-12">
                    <ul class="list-inline text-center footer-nav">
                        <li>
                            <h5>
                                <a href="https://mariadb.com/products" title="Products">Products</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/services" title="Services">Services</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/pricing" title="Pricing">Pricing</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/resources" title="Resources">Resources</a>
                            </h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/about-us" title="About MariaDB">About Us</a></h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/download" title="Download">Download MariaDB</a></h5>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="row row-10">
                
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div id="block-footerformcontact" class="block block-block-content block-block-contentd754ee1b-3cc9-40e7-9ef4-f504f1197fb1">
                        
                            <h5 style="font-weight: 400;">Subscribe to our newsletter!</h5>
                            <script src="//app-sj15.marketo.com/js/forms2/js/forms2.min.js"></script><form id="mktoForm_1498"></form>
                            <script>
                                <!--//--><![CDATA[// ><!--
                                MktoForms2.loadForm("//app-sj15.marketo.com", "573-PXI-984", 1498);
                                //--><!]]]]><![CDATA[>
                                //--><!]]>
                            </script>
                        
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div class="footer-copyright">
                        <div class="text-center">
                            <ul class="list-inline no-margin">
                                <li>
                                    <a href="/legal" title="Legal">Legal</a>
                                </li>
                                <li>
                                    <a href="/privacy-policy" title="Privacy Policy">Privacy Policy</a>
                                </li>
                                <li>
                                    <a href="/cookie-policy/" title="Cookies">Cookie Policy</a>
                                </li>
                            </ul>
                            <p>Copyright &copy; 2024 MariaDB. All rights reserved.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
</footer>
</div>

<div id="ajax_loading">
    <img src="/kb/static/images/ajax-loader.a51c5608d01a.gif" />
</div>

    <!-- Google Tag Manager -->
    <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-MK2847"
                      height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
            '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MK2847');</script>
    <!-- End Google Tag Manager -->

</body>

<script type="text/javascript" src="/kb/static/js/main.1587e3a666fc.js" charset="utf-8"></script>

</html>