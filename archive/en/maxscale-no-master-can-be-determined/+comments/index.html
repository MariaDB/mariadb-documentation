



<!DOCTYPE html>
<html>
<head data-cookie-domain=""
      data-cookie-path="/">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="apple-touch-icon" sizes="180x180" href="/kb/static/images/favicons/apple-touch-icon.159e713979be.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/kb/static/images/favicons/favicon-32x32.bc0ac1d5d11e.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/kb/static/images/favicons/favicon-16x16.5801f8f0f34e.png">
    <link rel="shortcut icon" href="/kb/static/images/favicons/favicon.d122d305dee4.ico" type="image/x-icon" />

    <title>
Comments - MaxScale, &#34;No Master can be determined&#34;
 - MariaDB Knowledge Base</title>

    <link href="/kb/static/css/main.f7633538c846.css" rel="stylesheet" type="text/css" />

    

    
        <meta name="robots" content="noindex, nofollow" />
    

    <!-- FB Open Graph tags -->
    <meta property="og:title" content="
Comments - MaxScale, &amp;#34;No Master can be determined&amp;#34;
" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://mariadb.com/kb/en/maxscale-no-master-can-be-determined/+comments" />
    <meta property="og:image" content="http://mariadb.comaskmonty-logo.png" />
    <meta property="og:site_name" content="MariaDB KnowledgeBase" />
    <meta property="fb:admins" content="514852603" />
    <meta property="og:description" content="" />

    <meta name="description" content="" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="//fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet"/>
    
</head>
<body class="mpkb nodes node_comments jqui" id="node_comments">





<div id="menu-mobile" class="visible-sm visible-xs">

    <div>
        <div id="mobile-close-menu" class="text-right">
            <a href="javascript:void(0)" title="Close Menu" id="back-main" class="toggle-menu">X<span></span></a>
        </div>
    </div>
    <div class="mainmenu-mobile">
        <ul class="ls-none ul-menu">
            <li data-sub="submenu5"><a class="open-form-search" href="/kb/search/" title="Search">Search </a></li>
            <li data-sub="submenu0"><a href="/products" title="Products">Products</a><span class="arrow-main"></span></li>
            <li data-sub="submenu1"><a href="/services" title="Services">Services</a><span class="arrow-main"></span></li>
            <li data-sub="submenu2"><a href="/resources" title="Resources">Resources</a><span class="arrow-main"></span></li>
            <li data-sub="submenu3"><a href="/about-us" title="About">About</a><span class="arrow-main"></span></li>
            <li data-sub="submenu4"><a href="/contact" title="Contact">Contact</a></li>
        </ul>
    </div>

    <div class="nav-top-mobile">
        <div class="select-box form">

            <ul class="inline-block-md mb-none top-nav">
                <li>

                </li>
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/maxscale-no-master-can-be-determined/+comments"> Login</a>
                    </li>
                
            </ul>



        </div>
        <p class="text-center copyright">Copyright &copy; 2024 MariaDB. All rights reserved.</p>
    </div>
</div>
<div class="violator-wrap d-none" id="top_violator">
    <div class="container">
        <div class="row">
            <div class="col-xs-12 col-sm-12">
                <div class="violator-outer">
                    <div class="violator-inner">
                        <div class="row">
                            <div class="col-xs-12 col-sm-9 col-lg-7 col-lg-offset-2" id="top_violator_content">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="content-link" target="_blank" rel="nofollow noreferrer">
                                    <span>The Ultimate Guide to High Availability with MariaDB</span>
                                </a>
                            </div>
                            <div class="col-xs-12 col-sm-3" id="top_violator_cta">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="btn btn-mariadb" target="_blank" rel="nofollow noreferrer">Download Now</a>
                            </div>
                        </div>
                    </div>
                    <button type="button" class="btn btn-link close-btn">
                        <svg xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 24 24" width="15px" height="15px"><path d="M 4.9902344 3.9902344 A 1.0001 1.0001 0 0 0 4.2929688 5.7070312 L 10.585938 12 L 4.2929688 18.292969 A 1.0001 1.0001 0 1 0 5.7070312 19.707031 L 12 13.414062 L 18.292969 19.707031 A 1.0001 1.0001 0 1 0 19.707031 18.292969 L 13.414062 12 L 19.707031 5.7070312 A 1.0001 1.0001 0 0 0 18.980469 3.9902344 A 1.0001 1.0001 0 0 0 18.292969 4.2929688 L 12 10.585938 L 5.7070312 4.2929688 A 1.0001 1.0001 0 0 0 4.9902344 3.9902344 z"/></svg>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="wrapper">
<div id="top-nav">
    <div class="container">
        <ul class="hidden-sm hidden-xs" >
            <li><a href="https://mariadb.com/kb/">Knowledge Base</a></li>
            <li><a href="https://mariadb.com/contact/">Contact</a></li>
            
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/maxscale-no-master-can-be-determined/+comments" rel="nofollow">Login</a>
                    </li>
                
            
            
            <li id="search-form">
                <form action="/kb/en/+search/" method="get" id="search-block-form" accept-charset="UTF-8">
                    <input id="search" title="Enter the terms you wish to search for."
                           placeholder="Search . . ." type="text"
                           name="q" value="" size="15" maxlength="128" class="form-text"
                           data-autocomplete-url="/kb/en/+search/autocomplete/">
                    <input type="hidden" name="quick" value="1" />
                    <input type="hidden" name="source" value="kb" />
                </form>
            </li>
            <li><a id="search-toggler" href="/kb/search/">Search</a></li>
            
        </ul>
    </div>
</div>
<div id="navbar-bottom" class="navbar">
    <div class="container">
        
        
        
        
        <div class="row">
            <div class="col-md-3 col-sm-9 col-xs-9">
                <a class="brand" href="/" title="MariaDB">
                    <img src="/kb/static/images/logo-2018-black.95f5978ae14d.png">
                </a>
            </div>
            <div class="col-md-9 hidden-sm hidden-xs">
                <div class="main-menu">
                    <ul id="main-menu" class="nav navbar-nav inline-block-sm">
    <li class="has-sub full-menu">
        <a href="/products" title="Products">Products</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/services" title="Services">Services</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/pricing" title="Pricing">Pricing</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/resources" title="Resources">Resources</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/about-us" title="About Us">About Us</a>
    </li>
    <li class="">
        <a class="button electric-eel small top-bar-right-download" href="/downloads/">Download</a>
    </li>
</ul>
                </div>
            </div>
            <div class="col-md-3 visible-sm visible-xs col-sm-3 col-xs-3 ps-rv">
                <div class="navbar-header text-right pull-right">
                    <button type="button" class="menu-control toggle-menu" id="open-menu">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="main">
    <div class="container">
        

        <div id="subheader1" class="clearfix">
            <div class="pull-left">
                
                <div id="breadcrumbs" class="breadcrumb">
                    <a href="/kb/en/">Knowledge Base</a>
                    


    
    » <a class="crumb" href="/kb/en/faq/">Frequently Asked Questions</a>
    

    
    » <a class="crumb" href="/kb/en/general-questions/">General Questions</a>
    


    » <a class="node_link crumb" href="/kb/en/maxscale-no-master-can-be-determined/">MaxScale, &#34;No Master can be determined&#34;</a>


                </div>
                
            </div>
        </div>
    </div>
    <div class="container" id="container-main">
        <div class="row">
            
            
            
            
            
            <section id="content" class="limited_width col-md-12 clearfix">
                
                    <h1>
Comments - MaxScale, &#34;No Master can be determined&#34;
</h1>
                

                



                <div>
                    
<div id="comments" data-node-id="8146" data-comments-url="/kb/en/maxscale-no-master-can-be-determined/+comments"
        data-reply-url="/kb/en/maxscale-no-master-can-be-determined/comments/post/">
<div class="comment_top_menu hidden-print">&nbsp;
            <div class="pull-right">
                <label>
                    Include Archived
                    <input id="include_archived" type="checkbox" name="include_archived" value="1"
                           />
                </label>
            </div>
        </div>
        <a name="comment_3661"></a>
        <div class="comment approved" style="margin-left: 0px">
            <div class="info">
                

<span class="datetime" title="2018-11-27 12:13">5 years, 10 months ago</span>
                
<span class="user" id="user-6476">
<a href="/kb/user/id/6476" title="Sam">Sam</a>
</span>
            </div>
            <div class="title">
                <a href="#comment_3661">Re: MaxScale, &#34;No Master can be determined&#34;</a>
                
            </div><div class="comment_text">
                <p>With different monitor and service names / settings.</p>
<pre class="fixed">MaxScale&gt; add server server1 MariaDB-Monitor RWSplit-Service
Could not add server 'server1' to object 'MariaDB-Monitor'. See error log for more details.
Could not add server 'server1' to object 'RWSplit-Service'. See error log for more details.
</pre><p>Where are the log files? I am running these in containers.</p>

            </div>
            <div class="comment_actions hidden-print">
                
                
                &nbsp;

                <div class="pull-right">
                    
                    <a class="flag btn btn-mini" href="/kb/en/maxscale-no-master-can-be-determined/+comments/3661/flag"
                       data-flag-url="/kb/en/maxscale-no-master-can-be-determined/+comments/3661/flag"
                            title="Flag as Spam/Inappropriate">
                        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                        </a>
                    
                    
                    
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
        <a name="comment_3664"></a>
        <div class="comment approved" style="margin-left: 10px">
            <div class="info">
                

<span class="datetime" title="2018-11-28 07:20">5 years, 10 months ago</span>
                
<span class="user" id="user-6476">
<a href="/kb/user/id/6476" title="Sam">Sam</a>
</span>
            </div>
            <div class="title">
                <a href="#comment_3664">Re: MaxScale, &#34;No Master can be determined&#34;</a>
                
            </div><div class="comment_text">
                <p>"flush logs" helped something: note "already monitored" was shown.
But nothing more was printed regarding re-execution of "add server server1 RWSplit-Service".</p>

            </div>
            <div class="comment_actions hidden-print">
                
                
                &nbsp;

                <div class="pull-right">
                    
                    <a class="flag btn btn-mini" href="/kb/en/maxscale-no-master-can-be-determined/+comments/3664/flag"
                       data-flag-url="/kb/en/maxscale-no-master-can-be-determined/+comments/3664/flag"
                            title="Flag as Spam/Inappropriate">
                        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                        </a>
                    
                    
                    
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
        
    

    

    
        <a name="comment_3611"></a>
        <div class="comment approved" style="margin-left: 0px">
            <div class="info">
                

<span class="datetime" title="2018-10-23 11:26">5 years, 11 months ago</span>
                
<span class="user" id="user-6476">
<a href="/kb/user/id/6476" title="Sam">Sam</a>
</span>
            </div>
            <div class="title">
                <a href="#comment_3611">Re: MaxScale, &#34;No Master can be determined&#34;</a>
                
            </div><div class="comment_text">
                <p>Trying with fresh installation. It seems that ports to containers are closed.
port 3306, mysql, checked with nmap -p 3306 127.17.0.2 --&gt; "closed".</p>

            </div>
            <div class="comment_actions hidden-print">
                
                
                &nbsp;

                <div class="pull-right">
                    
                    <a class="flag btn btn-mini" href="/kb/en/maxscale-no-master-can-be-determined/+comments/3611/flag"
                       data-flag-url="/kb/en/maxscale-no-master-can-be-determined/+comments/3611/flag"
                            title="Flag as Spam/Inappropriate">
                        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                        </a>
                    
                    
                    
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
        <a name="comment_3612"></a>
        <div class="comment approved" style="margin-left: 10px">
            <div class="info">
                

<span class="datetime" title="2018-10-23 14:52">5 years, 11 months ago</span>
                
<span class="user" id="user-6476">
<a href="/kb/user/id/6476" title="Sam">Sam</a>
</span>
            </div>
            <div class="title">
                <a href="#comment_3612">Re: MaxScale, &#34;No Master can be determined&#34;</a>
                
            </div><div class="comment_text">
                <p>All are now in containers: maxscale and three mariadb servers.</p>
<p>Three mariadb servers are in "Running" state again.</p>
<p>So, maxscale seems to see those servers.
Next: how to connect to DB through the maxscale docker container?</p>

            </div>
            <div class="comment_actions hidden-print">
                
                
                &nbsp;

                <div class="pull-right">
                    
                    <a class="flag btn btn-mini" href="/kb/en/maxscale-no-master-can-be-determined/+comments/3612/flag"
                       data-flag-url="/kb/en/maxscale-no-master-can-be-determined/+comments/3612/flag"
                            title="Flag as Spam/Inappropriate">
                        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                        </a>
                    
                    
                    
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
        
    

    

    
        <a name="comment_3609"></a>
        <div class="comment approved" style="margin-left: 0px">
            <div class="info">
                

<span class="datetime" title="2018-10-23 05:36">5 years, 11 months ago</span>
                
<span class="user" id="user-6476">
<a href="/kb/user/id/6476" title="Sam">Sam</a>
</span>
            </div>
            <div class="title">
                <a href="#comment_3609">Re: MaxScale, &#34;No Master can be determined&#34;</a>
                
            </div><div class="comment_text">
                <p>When I try to connect to maxscale with mysql, following error happens,</p>
<p>ERROR 1045 (28000): failed to create new session</p>
<p>In logs:</p>
<pre class="fixed">Oct 23 08:33:57 mycomputer maxscale[4769]: [readwritesplit] Couldn't find suitable Master from 3 candidates.
Oct 23 08:33:57 mycomputer maxscale[4769]: Failed to create new router session for service 'RWSplit-Service'. See previous errors for more details.
</pre>
            </div>
            <div class="comment_actions hidden-print">
                
                
                &nbsp;

                <div class="pull-right">
                    
                    <a class="flag btn btn-mini" href="/kb/en/maxscale-no-master-can-be-determined/+comments/3609/flag"
                       data-flag-url="/kb/en/maxscale-no-master-can-be-determined/+comments/3609/flag"
                            title="Flag as Spam/Inappropriate">
                        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                        </a>
                    
                    
                    
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
        
    

    
        <a name="comment_3606"></a>
        <div class="comment approved" style="margin-left: 0px">
            <div class="info">
                

<span class="datetime" title="2018-10-19 14:06">5 years, 11 months ago</span>
                
<span class="user" id="user-6476">
<a href="/kb/user/id/6476" title="Sam">Sam</a>
</span>
            </div>
            <div class="title">
                <a href="#comment_3606">Re: MaxScale, &#34;No Master can be determined&#34;</a>
                
            </div><div class="comment_text">
                <p>I reinstalled mariadb instances. Now with mariadb:10.3.10.</p>
<p>I created also following "users" and grants for those. Also IP address 127.17.0.1 was added:</p>
<pre class="fixed">create user 'maxscale'@'127.17.0.1' identified by 'admin';
create user 'maxscale'@'%' identified by 'admin';
grant all privileges on *.* to 'maxscale'@'127.17.0.1' with grant option;
grant all privileges on *.* to 'maxscale'@'%' with grant option;
</pre><p>Still same kinds of problems.</p>

            </div>
            <div class="comment_actions hidden-print">
                
                
                &nbsp;

                <div class="pull-right">
                    
                    <a class="flag btn btn-mini" href="/kb/en/maxscale-no-master-can-be-determined/+comments/3606/flag"
                       data-flag-url="/kb/en/maxscale-no-master-can-be-determined/+comments/3606/flag"
                            title="Flag as Spam/Inappropriate">
                        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                        </a>
                    
                    
                    
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
        
    

    
        <a name="comment_3598"></a>
        <div class="comment approved" style="margin-left: 0px">
            <div class="info">
                

<span class="datetime" title="2018-10-17 14:49">5 years, 12 months ago</span>
                
<span class="user" id="user-6476">
<a href="/kb/user/id/6476" title="Sam">Sam</a>
</span>
            </div>
            <div class="title">
                <a href="#comment_3598">Re: MaxScale, &#34;No Master can be determined&#34;</a>
                
            </div><div class="comment_text">
                <p>module=galeramon was in comments in maxscale.cnf.</p>
<p>Trying to copy paste again:</p>
<pre class="fixed">
[maxscale]
threads=auto
log_trace=1

[server1]
type=server
address=172.17.0.3
port=3306
protocol=MariaDBBackend

[server2]
type=server
address=172.17.0.4
port=3306
protocol=MariaDBBackend

[server3]
type=server
address=172.17.0.5
port=3306
protocol=MariaDBBackend

[WriteService]
type=service
router=readconnroute
router_options=master
servers=server1,server2,server3
user=maxscale
passwd=paswd

[ReadService]
type=service
router=readconnroute
router_options=slave
servers=server1,server2,server3
user=maxscale
passwd=paswd

[WriteListener]
type=listener
service=WriteService
protocol=MariaDBClient
port=4306
## socket=/tmp/ClusterMaster

[ReadListener]
type=listener
service=ReadService
protocol=MariaDBClient
#protocol=MySQLClient
port=4307

[ReplicationMonitor]
type=monitor
module=mariadbmon
servers=server1,server2,server3
user=maxscale
passwd=paswd
monitor_interval=1000

[CLI]
type=service
router=cli

[CLIListener]
type=listener
service=CLI
protocol=maxscaled
socket=default

</pre>
            </div>
            <div class="comment_actions hidden-print">
                
                
                &nbsp;

                <div class="pull-right">
                    
                    <a class="flag btn btn-mini" href="/kb/en/maxscale-no-master-can-be-determined/+comments/3598/flag"
                       data-flag-url="/kb/en/maxscale-no-master-can-be-determined/+comments/3598/flag"
                            title="Flag as Spam/Inappropriate">
                        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                        </a>
                    
                    
                    
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
        <a name="comment_3599"></a>
        <div class="comment approved" style="margin-left: 10px">
            <div class="info">
                

<span class="datetime" title="2018-10-18 05:06">5 years, 12 months ago</span>
                
<span class="user" id="user-6476">
<a href="/kb/user/id/6476" title="Sam">Sam</a>
</span>
            </div>
            <div class="title">
                <a href="#comment_3599">Re: MaxScale, &#34;No Master can be determined&#34;</a>
                
            </div><div class="comment_text">
                <p>All grants were tried to be given.
When maxscale is started, the error appears, "No Master can be determined".</p>
<pre class="fixed">systemctl status maxscale
● maxscale.service - MariaDB MaxScale Database Proxy
   Loaded: loaded (/lib/systemd/system/maxscale.service; disabled; vendor preset: enabled)
   Active: active (running) since to 2018-10-18 07:59:45 EEST; 6s ago
  Process: 8512 ExecStart=/usr/bin/maxscale (code=exited, status=0/SUCCESS)
  Process: 8508 ExecStartPre=/usr/bin/install -d /var/run/maxscale -o maxscale -g maxscale (code=exited, status=0/SUCCESS)
 Main PID: 8516 (maxscale)
    Tasks: 9
   Memory: 6.6M
      CPU: 144ms
   CGroup: /system.slice/maxscale.service
           └─8516 /usr/bin/maxscale

loka 18 07:59:45 mycomputer maxscale[8516]: [MySQLAuth] Added user: INSERT OR REPLACE INTO mysqlauth_users VALUES ('cm', '172.17.0.2', NULL, 1, '...
loka 18 07:59:45 mycomputer maxscale[8516]: [MySQLAuth] Added user: INSERT OR REPLACE INTO mysqlauth_users VALUES ('maxscale', '127.0.0.1', NULL, 1, '...
loka 18 07:59:45 mycomputer maxscale[8516]: [MySQLAuth] Added user: INSERT OR REPLACE INTO mysqlauth_users VALUES ('maxscale', '127.0.0.%', NULL, 1, '...
loka 18 07:59:45 mycomputer maxscale[8516]: [MySQLAuth] Added user: INSERT OR REPLACE INTO mysqlauth_users VALUES ('cm', '127.0.0.1', NULL, 1, '...
loka 18 07:59:45 mycomputer maxscale[8516]: [MySQLAuth] Added user: INSERT OR REPLACE INTO mysqlauth_users VALUES ('maxscale', '&lt;laptop_ip&gt;', NULL, 1, '...
loka 18 07:59:45 mycomputer maxscale[8516]: [MySQLAuth] Added user: INSERT OR REPLACE INTO mysqlauth_users VALUES ('myuser', '172.17.0.2', 'mysql', 0, '...
loka 18 07:59:45 mycomputer maxscale[8516]: [MySQLAuth] Added user: INSERT OR REPLACE INTO mysqlauth_users VALUES ('maxscale', '172.17.0.2', 'mysql', 1, '...
loka 18 07:59:45 mycomputer maxscale[8516]: [MySQLAuth] Added user: INSERT OR REPLACE INTO mysqlauth_users VALUES ('maxscale', '127.0.0.1', 'mysql', 1, '...
loka 18 07:59:45 mycomputer maxscale[8516]: [MySQLAuth] Added user: INSERT OR REPLACE INTO mysqlauth_users VALUES ('maxscale', '&lt;laptop_ip&gt;', 'mysql', 1, '
loka 18 07:59:45 mycomputer maxscale[8516]: [mariadbmon] No Master can be determined   
</pre><p>Following grants were given:</p>
<pre class="fixed">grant all privileges on *.* to 'maxscale'@'127.0.0.1' with grant option;

grant all privileges on *.* to 'maxscale'@'&lt;laptop_ip&gt;' with grant option;
</pre>
            </div>
            <div class="comment_actions hidden-print">
                
                
                &nbsp;

                <div class="pull-right">
                    
                    <a class="flag btn btn-mini" href="/kb/en/maxscale-no-master-can-be-determined/+comments/3599/flag"
                       data-flag-url="/kb/en/maxscale-no-master-can-be-determined/+comments/3599/flag"
                            title="Flag as Spam/Inappropriate">
                        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                        </a>
                    
                    
                    
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
        <a name="comment_3600"></a>
        <div class="comment approved" style="margin-left: 20px">
            <div class="info">
                

<span class="datetime" title="2018-10-18 05:28">5 years, 12 months ago</span>
                
<span class="user" id="user-6476">
<a href="/kb/user/id/6476" title="Sam">Sam</a>
</span>
            </div>
            <div class="title">
                <a href="#comment_3600">Re: MaxScale, &#34;No Master can be determined&#34;</a>
                
            </div><div class="comment_text">
                <p>In logs, maxscale otherwise starts up:</p>
<pre class="fixed">2018-10-18 07:59:45   info   : [MySQLAuth] Added user: INSERT OR REPLACE INTO mysqlauth_users VALUES ('maxscale', '127.0.0.1', 'mysql', 1, '4ACFE3202A5FF5CF467898FC58AAB1D615029441')
2018-10-18 07:59:45   info   : [MySQLAuth] Added user: INSERT OR REPLACE INTO mysqlauth_users VALUES ('maxscale', '10.144.114.162', 'mysql', 1, '4ACFE3202A5FF5CF467898FC58AAB1D615029441')
2018-10-18 07:59:45   notice : [MySQLAuth] [ReadService] Loaded 15 MySQL users for listener ReadListener.
2018-10-18 07:59:45   notice : Listening for connections at [::]:4307 with protocol MySQL
2018-10-18 07:59:45   info   : Started session [2] for ReadService service 
2018-10-18 07:59:45   notice : Service 'ReadService' started (2/3)
2018-10-18 07:59:45   notice : Listening for connections at [/tmp/maxadmin.sock]:0 with protocol MaxScale Admin
2018-10-18 07:59:45   info   : Started session [3] for CLI service 
2018-10-18 07:59:45   notice : Service 'CLI' started (3/3)
2018-10-18 07:59:45   notice : Started MaxScale log flusher.
2018-10-18 07:59:45   info   : [qc_sqlite] In-memory sqlite database successfully opened for thread 140506755454720.
2018-10-18 07:59:45   info   : [qc_sqlite] In-memory sqlite database successfully opened for thread 140506747062016.
2018-10-18 07:59:45   notice : Started REST API on [127.0.0.1]:8989
2018-10-18 07:59:45   info   : [qc_sqlite] In-memory sqlite database successfully opened for thread 140506730276608.
2018-10-18 07:59:45   info   : [qc_sqlite] In-memory sqlite database successfully opened for thread 140506738669312.
2018-10-18 07:59:45   notice : MaxScale started with 4 worker threads, each with a stack size of 8388608 bytes.
</pre><p>In other window:
No Master can be determined </p>
<p>Tried to set as master, but it did not help.</p>
<p>MaxScale&gt; set server server1 master</p>
<p>in logs:</p>
<pre class="fixed">2018-10-18 08:09:36   info   : (4) [cli] MaxAdmin: set server server1 master
2018-10-18 08:09:36   notice : Server changed state: server1[172.17.0.3:3306]: lost_master. [Master, Running] -&gt; [Running]
</pre><p>All servers are in Running state (not as master / slave states):</p>
<pre class="fixed">MaxScale&gt; list servers
Servers.
-------------------+-----------------+-------+-------------+--------------------
Server             | Address         | Port  | Connections | Status              
-------------------+-----------------+-------+-------------+--------------------
server1            | 172.17.0.3      |  3306 |           0 | Running
server2            | 172.17.0.4      |  3306 |           0 | Running
server3            | 172.17.0.5      |  3306 |           0 | Running
-------------------+-----------------+-------+-------------+--------------------


</pre>
            </div>
            <div class="comment_actions hidden-print">
                
                
                &nbsp;

                <div class="pull-right">
                    
                    <a class="flag btn btn-mini" href="/kb/en/maxscale-no-master-can-be-determined/+comments/3600/flag"
                       data-flag-url="/kb/en/maxscale-no-master-can-be-determined/+comments/3600/flag"
                            title="Flag as Spam/Inappropriate">
                        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                        </a>
                    
                    
                    
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
        <a name="comment_3601"></a>
        <div class="comment approved" style="margin-left: 30px">
            <div class="info">
                

<span class="datetime" title="2018-10-18 06:15">5 years, 12 months ago</span>
                
<span class="user" id="user-6476">
<a href="/kb/user/id/6476" title="Sam">Sam</a>
</span>
            </div>
            <div class="title">
                <a href="#comment_3601">Re: MaxScale, &#34;No Master can be determined&#34;</a>
                
            </div><div class="comment_text">
                <p>Same happens also with readwritesplit.</p>

            </div>
            <div class="comment_actions hidden-print">
                
                
                &nbsp;

                <div class="pull-right">
                    
                    <a class="flag btn btn-mini" href="/kb/en/maxscale-no-master-can-be-determined/+comments/3601/flag"
                       data-flag-url="/kb/en/maxscale-no-master-can-be-determined/+comments/3601/flag"
                            title="Flag as Spam/Inappropriate">
                        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                        </a>
                    
                    
                    
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
        <a name="comment_3602"></a>
        <div class="comment approved" style="margin-left: 40px">
            <div class="info">
                

<span class="datetime" title="2018-10-18 12:42">5 years, 12 months ago</span>
                
<span class="user" id="user-3062">
<a href="/kb/user/id/3062" title="Markus Mäkelä">Markus Mäkelä</a>
</span>
            </div>
            <div class="title">
                <a href="#comment_3602">Re: MaxScale, &#34;No Master can be determined&#34;</a>
                
            </div><div class="comment_text">
                <p>Is it a Galera cluster or a cluster with master-slave replication?</p>

            </div>
            <div class="comment_actions hidden-print">
                
                
                &nbsp;

                <div class="pull-right">
                    
                    <a class="flag btn btn-mini" href="/kb/en/maxscale-no-master-can-be-determined/+comments/3602/flag"
                       data-flag-url="/kb/en/maxscale-no-master-can-be-determined/+comments/3602/flag"
                            title="Flag as Spam/Inappropriate">
                        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                        </a>
                    
                    
                    
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
        <a name="comment_3603"></a>
        <div class="comment approved" style="margin-left: 50px">
            <div class="info">
                

<span class="datetime" title="2018-10-18 15:18">5 years, 12 months ago</span>
                
<span class="user" id="user-6476">
<a href="/kb/user/id/6476" title="Sam">Sam</a>
</span>
            </div>
            <div class="title">
                <a href="#comment_3603">Re: MaxScale, &#34;No Master can be determined&#34;</a>
                
            </div><div class="comment_text">
                <p>Hi! It is not galera cluster. It is MaxScale with Master Slave Slave (M-S-S) configuration. (M-S would be enough too.)
I have tried with readwritesplit and readconnroute.
There may be something basic missing. Grants given incorrectly? Something else missing / not executed?</p>

            </div>
            <div class="comment_actions hidden-print">
                
                
                &nbsp;

                <div class="pull-right">
                    
                    <a class="flag btn btn-mini" href="/kb/en/maxscale-no-master-can-be-determined/+comments/3603/flag"
                       data-flag-url="/kb/en/maxscale-no-master-can-be-determined/+comments/3603/flag"
                            title="Flag as Spam/Inappropriate">
                        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                        </a>
                    
                    
                    
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
        
    

    

    

    

    

    

    

</div>


                    <div id="content_disclaimer" class="graybox">
                        Content reproduced on this site is the property of its respective owners,
                        and this content is not reviewed in advance by MariaDB. The views, information and opinions
                        expressed by this content do not necessarily represent those of MariaDB or any other party.
                    </div>
                </div>
            </section>

            
        </div>
    </div>
</div>

<!-- Footer -->
<footer id="footer">
    <div class="footer">
        <div class="container">
            <div class="row">
                <div class="col-xs-12">
                    <ul class="list-inline text-center footer-nav">
                        <li>
                            <h5>
                                <a href="https://mariadb.com/products" title="Products">Products</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/services" title="Services">Services</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/pricing" title="Pricing">Pricing</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/resources" title="Resources">Resources</a>
                            </h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/about-us" title="About MariaDB">About Us</a></h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/download" title="Download">Download MariaDB</a></h5>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="row row-10">
                
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div id="block-footerformcontact" class="block block-block-content block-block-contentd754ee1b-3cc9-40e7-9ef4-f504f1197fb1">
                        
                            <h5 style="font-weight: 400;">Subscribe to our newsletter!</h5>
                            <script src="//app-sj15.marketo.com/js/forms2/js/forms2.min.js"></script><form id="mktoForm_1498"></form>
                            <script>
                                <!--//--><![CDATA[// ><!--
                                MktoForms2.loadForm("//app-sj15.marketo.com", "573-PXI-984", 1498);
                                //--><!]]]]><![CDATA[>
                                //--><!]]>
                            </script>
                        
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div class="footer-copyright">
                        <div class="text-center">
                            <ul class="list-inline no-margin">
                                <li>
                                    <a href="/legal" title="Legal">Legal</a>
                                </li>
                                <li>
                                    <a href="/privacy-policy" title="Privacy Policy">Privacy Policy</a>
                                </li>
                                <li>
                                    <a href="/cookie-policy/" title="Cookies">Cookie Policy</a>
                                </li>
                            </ul>
                            <p>Copyright &copy; 2024 MariaDB. All rights reserved.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
</footer>
</div>

<div id="ajax_loading">
    <img src="/kb/static/images/ajax-loader.a51c5608d01a.gif" />
</div>

    <!-- Google Tag Manager -->
    <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-MK2847"
                      height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
            '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MK2847');</script>
    <!-- End Google Tag Manager -->

</body>

<script type="text/javascript" src="/kb/static/js/main.1587e3a666fc.js" charset="utf-8"></script>

</html>