<?xml version="1.0" encoding="utf-8"?>
<rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title>MariaDB Knowledge Base Comments for: Swap usage won't decrease</title><link>https://mariadb.com/kb/en/swap-usage-wont-decrease/+comments/feed/</link><description></description><atom:link href="https://mariadb.com/kb/en/swap-usage-wont-decrease/+comments/feed/" rel="self"></atom:link><language>en-us</language><lastBuildDate>Mon, 30 Dec 2024 07:13:29 +0000</lastBuildDate><item><title>Re: Swap usage won't decrease</title><link>https://mariadb.com/kb/en/swap-usage-wont-decrease/+comments/2331</link><description>&lt;p&gt;It isn't rarely swapping but constantly since then, even though the system load has decreased.&lt;/p&gt;
&lt;p&gt;It seems like adding a few parameters can improve this behaviour (I will have to test it first):&lt;/p&gt;
&lt;p&gt;- innodb_buffer_pool_populate (under [mysqld] section)
- flush_caches (under [mysqld_safe] section)
- numa_interleave (under [mysqld_safe] section)&lt;/p&gt;
&lt;p&gt;(taken from &lt;a href="https://www.percona.com/doc/percona-server/5.5/performance/innodb_numa_support.html"&gt;https://www.percona.com/doc/percona-server/5.5/performance/innodb_numa_support.html&lt;/a&gt;)&lt;/p&gt;
&lt;p&gt;I don't think adding more RAM represents a workaround if the memory utilisation isn't balanced within a NUMA architecture.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Alexandra Arreaza</dc:creator><guid>https://mariadb.com/kb/en/swap-usage-wont-decrease/+comments/2331</guid></item><item><title>Re: Swap usage won't decrease</title><link>https://mariadb.com/kb/en/swap-usage-wont-decrease/+comments/2330</link><description>&lt;p&gt;when systemload don't increase there is nothing wrong with swap out rarely used memory pages &lt;/p&gt;
&lt;p&gt;if you are annoyed by swap then just buy RAM for your machines which is cheap these days and on most workloads you can even disable swap entirely &lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Harald Reindl</dc:creator><guid>https://mariadb.com/kb/en/swap-usage-wont-decrease/+comments/2330</guid></item><item><title>Re: Swap usage won't decrease</title><link>https://mariadb.com/kb/en/swap-usage-wont-decrease/+comments/2329</link><description>&lt;p&gt;We have swap usage monitoring in place and it's have been alerting every single day since the DB import took place because the swap % threshold has been less than 20 (this is just an example, not relevant in this case).  &lt;/p&gt;
&lt;p&gt;The workload wasn't heavy (it happened during non-peak hours on the donor node) and it isn't something that would be triggered every time a DB import is being done. &lt;/p&gt;
&lt;p&gt;We have done DB imports in the past without causing high swap usage at all. Sometimes it'd cleared itself after a couple of days, but this time it's been beyond that.&lt;/p&gt;
&lt;p&gt;Restarting the server would cause swap usage to go back to normal, but we don't want to use a MySQL restart as a workaround.&lt;/p&gt;
&lt;p&gt;Btw, we are using CentOS 6.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Alexandra Arreaza</dc:creator><guid>https://mariadb.com/kb/en/swap-usage-wont-decrease/+comments/2329</guid></item><item><title>Re: Swap usage won't decrease</title><link>https://mariadb.com/kb/en/swap-usage-wont-decrease/+comments/2328</link><description>&lt;p&gt;and where do you see a issue?&lt;/p&gt;
&lt;p&gt;swap is the job of the operating system and is based on LRU meaning for a long time not used parts are swapped to have the hot parts directly in RAM - untl your workload don't all the time lead to read from swap and swap out other pages which are read back within a short timeframe there is nothing wrong&lt;/p&gt;
&lt;p&gt;if your workload triggers that you can only fix it by change the workload itself or just put more memory in the machine because it's obviously not well dimensioned for your workload&lt;/p&gt;
&lt;p&gt;how do you imagine that mysqld should magically do about it?&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Harald Reindl</dc:creator><guid>https://mariadb.com/kb/en/swap-usage-wont-decrease/+comments/2328</guid></item></channel></rss>