



<!DOCTYPE html>
<html>
<head data-cookie-domain=""
      data-cookie-path="/">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="apple-touch-icon" sizes="180x180" href="/kb/static/images/favicons/apple-touch-icon.159e713979be.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/kb/static/images/favicons/favicon-32x32.bc0ac1d5d11e.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/kb/static/images/favicons/favicon-16x16.5801f8f0f34e.png">
    <link rel="shortcut icon" href="/kb/static/images/favicons/favicon.d122d305dee4.ico" type="image/x-icon" />

    <title>
Comments - Is chaining UPNs via &#34;authentication_options&#34; when using the GSSAPI Plugin considered safe?
 - MariaDB Knowledge Base</title>

    <link href="/kb/static/css/main.9a0d7dcebefd.css" rel="stylesheet" type="text/css" />

    

    <!-- FB Open Graph tags -->
    <meta property="og:title" content="
Comments - Is chaining UPNs via &amp;#34;authentication_options&amp;#34; when using the GSSAPI Plugin considered safe?
" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://mariadb.com/kb/en/the-community-is-chaining-upns-via-authentication_options-when-using-the-gs/+comments" />
    <meta property="og:image" content="http://mariadb.comaskmonty-logo.png" />
    <meta property="og:site_name" content="MariaDB KnowledgeBase" />
    <meta property="fb:admins" content="514852603" />
    <meta property="og:description" content="" />

    <meta name="description" content="" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="//fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet"/>
    
</head>
<body class="mpkb nodes node_comments jqui" id="node_comments">





<div id="menu-mobile" class="visible-sm visible-xs">

    <div>
        <div id="mobile-close-menu" class="text-right">
            <a href="javascript:void(0)" title="Close Menu" id="back-main" class="toggle-menu">X<span></span></a>
        </div>
    </div>
    <div class="mainmenu-mobile">
        <ul class="ls-none ul-menu">
            <li data-sub="submenu5"><a class="open-form-search" href="/kb/search/" title="Search">Search </a></li>
            <li data-sub="submenu0"><a href="/products" title="Products">Products</a><span class="arrow-main"></span></li>
            <li data-sub="submenu1"><a href="/services" title="Services">Services</a><span class="arrow-main"></span></li>
            <li data-sub="submenu2"><a href="/resources" title="Resources">Resources</a><span class="arrow-main"></span></li>
            <li data-sub="submenu3"><a href="/about-us" title="About">About</a><span class="arrow-main"></span></li>
            <li data-sub="submenu4"><a href="/contact" title="Contact">Contact</a></li>
        </ul>
    </div>

    <div class="nav-top-mobile">
        <div class="select-box form">

            <ul class="inline-block-md mb-none top-nav">
                <li>

                </li>
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/the-community-is-chaining-upns-via-authentication_options-when-using-the-gs/+comments"> Login</a>
                    </li>
                
            </ul>



        </div>
        <p class="text-center copyright">Copyright &copy; 2023 MariaDB. All rights reserved.</p>
    </div>
</div>
<div id="wrapper">
<div id="top-nav">
    <div class="container">
        <ul class="hidden-sm hidden-xs" >
            <li><a href="https://mariadb.com/kb/">Knowledge Base</a></li>
            <li><a href="https://mariadb.com/contact/">Contact</a></li>
            
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/the-community-is-chaining-upns-via-authentication_options-when-using-the-gs/+comments" rel="nofollow">Login</a>
                    </li>
                
            
            
            <li id="search-form">
                <form action="/kb/en/+search/" method="get" id="search-block-form" accept-charset="UTF-8">
                    <input id="search" title="Enter the terms you wish to search for."
                           placeholder="Search . . ." type="text"
                           name="q" value="" size="15" maxlength="128" class="form-text"
                           data-autocomplete-url="/kb/en/+search/autocomplete/">
                    <input type="hidden" name="quick" value="1" />
                    <input type="hidden" name="source" value="kb" />
                </form>
            </li>
            <li><a id="search-toggler" href="/kb/search/">Search</a></li>
            
        </ul>
    </div>
</div>
<div id="navbar-bottom" class="navbar">
    <div class="container">
        
        
        
        
        <div class="row">
            <div class="col-md-3 col-sm-9 col-xs-9">
                <a class="brand" href="/" title="MariaDB">
                    <img src="/kb/static/images/logo-2018-black.95f5978ae14d.png">
                </a>
            </div>
            <div class="col-md-9 hidden-sm hidden-xs">
                <div class="main-menu">
                    <ul id="main-menu" class="nav navbar-nav inline-block-sm">
    <li class="has-sub full-menu">
        <a href="/products" title="Products">Products</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/services" title="Services">Services</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/pricing" title="Pricing">Pricing</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/resources" title="Resources">Resources</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/about-us" title="About Us">About Us</a>
    </li>
    <li class="">
        <a class="button electric-eel small top-bar-right-download" href="/downloads/">Download</a>
    </li>
</ul>
                </div>
            </div>
            <div class="col-md-3 visible-sm visible-xs col-sm-3 col-xs-3 ps-rv">
                <div class="navbar-header text-right pull-right">
                    <button type="button" class="menu-control toggle-menu" id="open-menu">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="main">
    <div class="container">
        

        <div id="subheader1" class="clearfix">
            <div class="pull-left">
                
                <div id="breadcrumbs" class="breadcrumb">
                    <a href="/kb/en/">Knowledge Base</a>
                    


    
    » <a class="crumb" href="/kb/en/community/">The Community</a>
    


    » <a class="node_link crumb" href="/kb/en/the-community-is-chaining-upns-via-authentication_options-when-using-the-gs/">Is chaining UPNs via &#34;authentication_options&#34; when using the GSSAPI Plugin considered safe?</a>


                </div>
                
            </div>
        </div>
    </div>
    <div class="container" id="container-main">
        <div class="row">
            
            
            
            
            
            <section id="content" class="limited_width col-md-12 clearfix">
                
                    <h1>
Comments - Is chaining UPNs via &#34;authentication_options&#34; when using the GSSAPI Plugin considered safe?
</h1>
                

                



                <div>
                    
<div id="comments" data-node-id="10219" data-comments-url="/kb/en/the-community-is-chaining-upns-via-authentication_options-when-using-the-gs/+comments"
        data-reply-url="/kb/en/the-community-is-chaining-upns-via-authentication_options-when-using-the-gs/comments/post/">
<div class="comment_top_menu hidden-print">&nbsp;
            <div class="pull-right">
                <label>
                    Include Archived
                    <input id="include_archived" type="checkbox" name="include_archived" value="1"
                           />
                </label>
            </div>
        </div>
        <a name="comment_4885"></a>
        <div class="comment approved" style="margin-left: 0px">
            <div class="info">
                

<span class="datetime" title="2020-11-06 10:59">2 years, 7 months ago</span>
                
<span class="user" id="user-9330">
<a href="/kb/user/id/9330" title="Michael -O">Michael -O</a>
</span>
            </div>
            <div class="title">
                <a href="#comment_4885">Re: Is chaining UPNs via &#34;authentication_options&#34; when using the GSSAPI Plugin considered safe?</a>
                
            </div><div class="comment_text">
                <p>I will drop a few qualified comments next when I feel better from Corona.</p>

            </div>
            <div class="comment_actions hidden-print">
                
                
                &nbsp;

                <div class="pull-right">
                    
                    <a class="flag btn btn-mini" href="/kb/en/the-community-is-chaining-upns-via-authentication_options-when-using-the-gs/+comments/4885/flag"
                       data-flag-url="/kb/en/the-community-is-chaining-upns-via-authentication_options-when-using-the-gs/+comments/4885/flag"
                            title="Flag as Spam/Inappropriate">
                        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                        </a>
                    
                    
                    
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
        
    

    
        <a name="comment_4847"></a>
        <div class="comment approved" style="margin-left: 0px">
            <div class="info">
                

<span class="datetime" title="2020-10-14 18:14">2 years, 8 months ago</span>
                
<span class="user" id="user-27">
<a href="/kb/user/id/27" title="Sergei Golubchik">Sergei Golubchik</a>
</span>
            </div>
            <div class="title">
                <a href="#comment_4847">Re: Is chaining UPNs via &#34;authentication_options&#34; when using the GSSAPI Plugin considered safe?</a>
                
            </div><div class="comment_text">
                <p>yes, authentication information and privileges are stored in mysql.global_priv, while mysql.user is supposed to provide backward-compatible representation of the authentication info for older applications. It can correctly represent authentication info in the backward-compatible way only when the account uses backward compatible authentication.</p>
<p>The magic happens in sql_acl.cc indeed, in the function acl_authenticate():</p>
<pre class="fixed">    for (mpvio.curr_auth= mpvio.status != MPVIO_EXT::RESTART;
         res != CR_OK &amp;&amp; mpvio.curr_auth &lt; acl_user-&gt;nauth;
         mpvio.curr_auth++)
    {
      thd-&gt;clear_error();
      mpvio.status= MPVIO_EXT::RESTART;
      res= do_auth_once(thd, &amp;acl_user-&gt;auth[mpvio.curr_auth].plugin, &amp;mpvio);
    }
</pre><p>that is the server tries all specified authentications until one of them succeeds of the list runs out.</p>

            </div>
            <div class="comment_actions hidden-print">
                
                
                &nbsp;

                <div class="pull-right">
                    
                    <a class="flag btn btn-mini" href="/kb/en/the-community-is-chaining-upns-via-authentication_options-when-using-the-gs/+comments/4847/flag"
                       data-flag-url="/kb/en/the-community-is-chaining-upns-via-authentication_options-when-using-the-gs/+comments/4847/flag"
                            title="Flag as Spam/Inappropriate">
                        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                        </a>
                    
                    
                    
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
        <a name="comment_4848"></a>
        <div class="comment approved" style="margin-left: 10px">
            <div class="info">
                

<span class="datetime" title="2020-10-15 10:24">2 years, 8 months ago</span>
                
<span class="user" id="user-9274">
<a href="/kb/user/id/9274" title="jo_ku_ Kunde">jo_ku_ Kunde</a>
</span>
            </div>
            <div class="title">
                <a href="#comment_4848">Re: Is chaining UPNs via &#34;authentication_options&#34; when using the GSSAPI Plugin considered safe?</a>
                
            </div><div class="comment_text">
                <p>Hi Sergei,</p>
<p>thank your very much for the confirmation. The code fragment is spot on.</p>
<p>Best regards,</p>
<p>Johannes</p>

            </div>
            <div class="comment_actions hidden-print">
                
                
                &nbsp;

                <div class="pull-right">
                    
                    <a class="flag btn btn-mini" href="/kb/en/the-community-is-chaining-upns-via-authentication_options-when-using-the-gs/+comments/4848/flag"
                       data-flag-url="/kb/en/the-community-is-chaining-upns-via-authentication_options-when-using-the-gs/+comments/4848/flag"
                            title="Flag as Spam/Inappropriate">
                        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                        </a>
                    
                    
                    
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
        
    

    

    
        <a name="comment_4838"></a>
        <div class="comment approved" style="margin-left: 0px">
            <div class="info">
                

<span class="datetime" title="2020-10-09 12:10">2 years, 8 months ago</span>
                
<span class="user" id="user-9274">
<a href="/kb/user/id/9274" title="jo_ku_ Kunde">jo_ku_ Kunde</a>
</span>
            </div>
            <div class="title">
                <a href="#comment_4838">Re: Is chaining UPNs via &#34;authentication_options&#34; when using the GSSAPI Plugin considered safe?</a>
                
            </div><div class="comment_text">
                <p>Hi folks,</p>
<p>I made a little progress on that one. The permission object containing the required user information is stored in the form of a JSON object in the table "mysql.global_priv" within a field named "Priv" [1]. Starting with MariaDB v10.4 "mysql.user" has been replaced with "mysql.global_priv" and "mysql.user" now is just a database view and not a regular table at all (I was not aware of that fact, under MySQL v5.7.28 it is a table) [2][3]. The last "authentication_option" from the create user statement is stored under the key "authentication_string" in the mentioned JSON object, which is why this one is returned in the column "authentication_string" when querying the "user" view. The content of the "Priv" field to the above shown create user statement looks as follows:</p>
<p>{
   "access":0,
   "version_id":100505,
   "plugin":"gssapi",
   "authentication_string":"username_3@MY_DOMAIN",
   "auth_or":[
      {
         "plugin":"gssapi",
         "authentication_string":"username_1@MY_DOMAIN"
      },
      {
         "plugin":"gssapi",
         "authentication_string":"username_2@MY_DOMAIN"
      },
      {</p>
<p>      }
   ],
   "password_last_changed":1602144036
}</p>
<p>Anyway, I'm still interested in any feedback from the community.</p>
<p>Best regards
Johannes</p>
<p>[1] <a href="https://mariadb.com/kb/en/mysqlglobal_priv-table/">https://mariadb.com/kb/en/mysqlglobal_priv-table/</a>
[2] <a href="https://mariadb.com/kb/en/mysqluser-table/">https://mariadb.com/kb/en/mysqluser-table/</a>
[3] <a href="https://dev.mysql.com/doc/refman/5.7/en/connection-access.html">https://dev.mysql.com/doc/refman/5.7/en/connection-access.html</a></p>

            </div>
            <div class="comment_actions hidden-print">
                
                
                &nbsp;

                <div class="pull-right">
                    
                    <a class="flag btn btn-mini" href="/kb/en/the-community-is-chaining-upns-via-authentication_options-when-using-the-gs/+comments/4838/flag"
                       data-flag-url="/kb/en/the-community-is-chaining-upns-via-authentication_options-when-using-the-gs/+comments/4838/flag"
                            title="Flag as Spam/Inappropriate">
                        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                        </a>
                    
                    
                    
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
        <a name="comment_4845"></a>
        <div class="comment approved" style="margin-left: 10px">
            <div class="info">
                

<span class="datetime" title="2020-10-14 15:58">2 years, 8 months ago</span>
                
<span class="user" id="user-3528">
<a href="/kb/user/id/3528" title="Vladislav Vaintroub">Vladislav Vaintroub</a>
</span>
            </div>
            <div class="title">
                <a href="#comment_4845">Re: Is chaining UPNs via &#34;authentication_options&#34; when using the GSSAPI Plugin considered safe?</a>
                
            </div><div class="comment_text">
                <p>Do you want GSSAPI to support group names on Windows on server side? I think this is a no brainer for implementation, and that it is a good feature, even if not portable outside of Windows.</p>

            </div>
            <div class="comment_actions hidden-print">
                
                
                &nbsp;

                <div class="pull-right">
                    
                    <a class="flag btn btn-mini" href="/kb/en/the-community-is-chaining-upns-via-authentication_options-when-using-the-gs/+comments/4845/flag"
                       data-flag-url="/kb/en/the-community-is-chaining-upns-via-authentication_options-when-using-the-gs/+comments/4845/flag"
                            title="Flag as Spam/Inappropriate">
                        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                        </a>
                    
                    
                    
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
        <a name="comment_4846"></a>
        <div class="comment approved" style="margin-left: 20px">
            <div class="info">
                

<span class="datetime" title="2020-10-14 16:20">2 years, 8 months ago</span>
                
<span class="user" id="user-3528">
<a href="/kb/user/id/3528" title="Vladislav Vaintroub">Vladislav Vaintroub</a>
</span>
            </div>
            <div class="title">
                <a href="#comment_4846">Re: Is chaining UPNs via &#34;authentication_options&#34; when using the GSSAPI Plugin considered safe?</a>
                
            </div><div class="comment_text">
                <p>I created <a href="https://jira.mariadb.org/browse/MDEV-23959">MDEV-23959</a> to track "support groups in GSSAPI plugin on Windows".</p>

            </div>
            <div class="comment_actions hidden-print">
                
                
                &nbsp;

                <div class="pull-right">
                    
                    <a class="flag btn btn-mini" href="/kb/en/the-community-is-chaining-upns-via-authentication_options-when-using-the-gs/+comments/4846/flag"
                       data-flag-url="/kb/en/the-community-is-chaining-upns-via-authentication_options-when-using-the-gs/+comments/4846/flag"
                            title="Flag as Spam/Inappropriate">
                        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                        </a>
                    
                    
                    
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
        <a name="comment_4849"></a>
        <div class="comment approved" style="margin-left: 30px">
            <div class="info">
                

<span class="datetime" title="2020-10-15 10:39">2 years, 8 months ago</span>
                
<span class="user" id="user-9274">
<a href="/kb/user/id/9274" title="jo_ku_ Kunde">jo_ku_ Kunde</a>
</span>
            </div>
            <div class="title">
                <a href="#comment_4849">Re: Is chaining UPNs via &#34;authentication_options&#34; when using the GSSAPI Plugin considered safe?</a>
                
            </div><div class="comment_text">
                <p>Hi Vlad,</p>
<p>yes, we'd like to use AD groups to authorize Kerberos-authenticated users. I will split my elaboration for SSPI and GSS-API because they need to be treated differently, but both can make use of AD groups out of the box with some effort.</p>
<p>SSPI: I believe the best spot is here [1]. When the username does not match, retrieve all AD groups of the user via Windows API and match a string representation of it against the auth_string provided in a loop. You'll know even better where to look for sure.</p>
<p>GSS-API: Luckily, all Kerberos tickets from AD contain full group memberships embedded in the PAC data. MIT Kerberos offers to extract name attributes [2] after the context has been established. It will already break up the PAC data structure in sub blobs for you and make it available (sample code is in mod_gssapi for the retrieval). You will need to parse this structure [3] which is available via the 'urn:mspac:logon-info"' attribute (see src/lib/krb5/krb/pac.c). A complete Java impl can be found here [4] for reference.</p>
<p>With that both worlds can easily make use of the same AD groups.</p>
<p>A word on group name formats: As you can see PAC data provides the group SIDs only which need to be converted/formatted to its string representation 'S-1-...'. Windows API provides various output formats. I would highly recommend, for consistency reasons, to make it configurable on Windows (SSPI) what the group name format is: downlevel name or SID.
This would make it consistent on both platforms to use.
We use SIDs exclusively in our Java webapps.</p>
<p>Many thanks in advance!</p>
<p>Best regards,</p>
<p>Johannes</p>
<p>[1] <a href="https://github.com/MariaDB/server/blob/cccfa9dcfe2c161779824c01a84edfa64fc4378a/plugin/auth_gssapi/sspi_server.cc#L265-L271">https://github.com/MariaDB/server/blob/cccfa9dcfe2c161779824c01a84edfa64fc4378a/plugin/auth_gssapi/sspi_server.cc#L265-L271</a></p>
<p>[2] <a href="https://web.mit.edu/kerberos/krb5-latest/doc/appdev/gssapi.html#name-attributes">https://web.mit.edu/kerberos/krb5-latest/doc/appdev/gssapi.html#name-attributes</a></p>
<p>[3] <a href="https://docs.microsoft.com/en-us/openspecs/windows_protocols/ms-pac/69e86ccc-85e3-41b9-b514-7d969cd0ed73">https://docs.microsoft.com/en-us/openspecs/windows_protocols/ms-pac/69e86ccc-85e3-41b9-b514-7d969cd0ed73</a></p>
<p>[4] <a href="https://github.com/cbsit/JaasLounge">https://github.com/cbsit/JaasLounge</a></p>

            </div>
            <div class="comment_actions hidden-print">
                
                
                &nbsp;

                <div class="pull-right">
                    
                    <a class="flag btn btn-mini" href="/kb/en/the-community-is-chaining-upns-via-authentication_options-when-using-the-gs/+comments/4849/flag"
                       data-flag-url="/kb/en/the-community-is-chaining-upns-via-authentication_options-when-using-the-gs/+comments/4849/flag"
                            title="Flag as Spam/Inappropriate">
                        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                        </a>
                    
                    
                    
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
        <a name="comment_4851"></a>
        <div class="comment approved" style="margin-left: 40px">
            <div class="info">
                

<span class="datetime" title="2020-10-15 12:24">2 years, 8 months ago</span>
                
<span class="user" id="user-3528">
<a href="/kb/user/id/3528" title="Vladislav Vaintroub">Vladislav Vaintroub</a>
</span>
            </div>
            <div class="title">
                <a href="#comment_4851">Re: Is chaining UPNs via &#34;authentication_options&#34; when using the GSSAPI Plugin considered safe?</a>
                
            </div><div class="comment_text">
                <p>Thanks a lot for this information, this is helpful. I think supporting both SIDs and names on Windows is a relatively easy thing, and natural on Windows. although SIDs might be less natural for application than group names, it is easy to figure out that string is a SID.</p>
<p>Now on Unixen, groups could be handled as an ActiveDirectory specific extension, for boxes than join Windows domain. The pure MIT kerberos KDC has no groups, an no LDAP, to my knowlegde.  This is something I'm a little less familiar with, and might need some more time. SID-only option seems a little user-unfriendly.</p>

            </div>
            <div class="comment_actions hidden-print">
                
                
                &nbsp;

                <div class="pull-right">
                    
                    <a class="flag btn btn-mini" href="/kb/en/the-community-is-chaining-upns-via-authentication_options-when-using-the-gs/+comments/4851/flag"
                       data-flag-url="/kb/en/the-community-is-chaining-upns-via-authentication_options-when-using-the-gs/+comments/4851/flag"
                            title="Flag as Spam/Inappropriate">
                        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                        </a>
                    
                    
                    
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
        <a name="comment_4852"></a>
        <div class="comment approved" style="margin-left: 50px">
            <div class="info">
                

<span class="datetime" title="2020-10-15 13:02">2 years, 8 months ago</span>
                
<span class="user" id="user-9330">
<a href="/kb/user/id/9330" title="Michael -O">Michael -O</a>
</span>
            </div>
            <div class="title">
                <a href="#comment_4852">Re: Is chaining UPNs via &#34;authentication_options&#34; when using the GSSAPI Plugin considered safe?</a>
                
            </div><div class="comment_text">
                <p>Hi Vlad,</p>
<p>I was involved in the analysis for/with Johannes.</p>
<div style="margin-left:2em"><p> although SIDs might be less natural for application than group names, it is easy to figure out that string is a SID.</p>
</div>
<p>Microsoft's approach is to test for 'S-'  prefix.</p>
<div style="margin-left:2em"><p> Now on Unixen, groups could be handled as an ActiveDirectory specific extension, for boxes than join Windows domain. The pure MIT kerberos KDC has no groups, an no LDAP, to my knowlegde. </p>
</div>
<p>Correct. But I don't see to add any configure/compile time option for this. It could be simply a module option "use PAC groups" or similar. If the attribute name value is present, read it otherwise fail the authnz.</p>
<div style="margin-left:2em"><p> This is something I'm a little less familiar with, and might need some more time.</p>
</div>
<p>I will happily support and can provide plenty PAC data privately if necessary.</p>
<div style="margin-left:2em"><p>  SID-only option seems a little user-unfriendly.</p>
</div>
<p>There is no other option on Unix. Consider that this is not for users, but for admins. From my point of view, I see little difference because in our huge (and likely others) environment our groups are DOMAIN\cryptic-very-long-name vs. S-1-5-21-&lt;group-sid&gt;-&lt;rid&gt;. I treat them as opaque strings because I don't memorize the 100 gorups I have anyway. See also here a justification why SIDs are better than names in large environments [1].</p>
<p>What one could do is to map SIDs to app specific friendly names like I do in Java [1], but that would require more code in MariaDB and I don't see a need for now.</p>
<p>[1] <a href="http://tomcatspnegoad.sourceforge.net/realms.html#Using_Security_Groups_from_Active_Directory">http://tomcatspnegoad.sourceforge.net/realms.html#Using_Security_Groups_from_Active_Directory</a>.</p>

            </div>
            <div class="comment_actions hidden-print">
                
                
                &nbsp;

                <div class="pull-right">
                    
                    <a class="flag btn btn-mini" href="/kb/en/the-community-is-chaining-upns-via-authentication_options-when-using-the-gs/+comments/4852/flag"
                       data-flag-url="/kb/en/the-community-is-chaining-upns-via-authentication_options-when-using-the-gs/+comments/4852/flag"
                            title="Flag as Spam/Inappropriate">
                        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                        </a>
                    
                    
                    
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
        <a name="comment_4878"></a>
        <div class="comment approved" style="margin-left: 60px">
            <div class="info">
                

<span class="datetime" title="2020-11-03 13:59">2 years, 7 months ago</span>
                
<span class="user" id="user-3528">
<a href="/kb/user/id/3528" title="Vladislav Vaintroub">Vladislav Vaintroub</a>
</span>
            </div>
            <div class="title">
                <a href="#comment_4878">Re: Is chaining UPNs via &#34;authentication_options&#34; when using the GSSAPI Plugin considered safe?</a>
                
            </div><div class="comment_text">
                <p>Hi Michael-O and Johannes, I updated  <a href="https://jira.mariadb.org/browse/MDEV-23959">https://jira.mariadb.org/browse/MDEV-23959</a>, group and SID support on Windows, with details.  Feel free to discuss comment in the JIRA ticket.</p>

            </div>
            <div class="comment_actions hidden-print">
                
                
                &nbsp;

                <div class="pull-right">
                    
                    <a class="flag btn btn-mini" href="/kb/en/the-community-is-chaining-upns-via-authentication_options-when-using-the-gs/+comments/4878/flag"
                       data-flag-url="/kb/en/the-community-is-chaining-upns-via-authentication_options-when-using-the-gs/+comments/4878/flag"
                            title="Flag as Spam/Inappropriate">
                        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                        </a>
                    
                    
                    
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
        <a name="comment_4884"></a>
        <div class="comment approved" style="margin-left: 70px">
            <div class="info">
                

<span class="datetime" title="2020-11-06 10:39">2 years, 7 months ago</span>
                
<span class="user" id="user-9274">
<a href="/kb/user/id/9274" title="jo_ku_ Kunde">jo_ku_ Kunde</a>
</span>
            </div>
            <div class="title">
                <a href="#comment_4884">Re: Is chaining UPNs via &#34;authentication_options&#34; when using the GSSAPI Plugin considered safe?</a>
                
            </div><div class="comment_text">
                <p>Hi Vlad, I just checked your updates in the JIRA ticket. I think the proposed solution covers my needs perfectly and will make the switch over to MariaDB possible. Also the suggested prefixes GROUP and SID make sense and implementing it that way would pull Unix users in as well. Thanks for your support!</p>

            </div>
            <div class="comment_actions hidden-print">
                
                
                &nbsp;

                <div class="pull-right">
                    
                    <a class="flag btn btn-mini" href="/kb/en/the-community-is-chaining-upns-via-authentication_options-when-using-the-gs/+comments/4884/flag"
                       data-flag-url="/kb/en/the-community-is-chaining-upns-via-authentication_options-when-using-the-gs/+comments/4884/flag"
                            title="Flag as Spam/Inappropriate">
                        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                        </a>
                    
                    
                    
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
        
    

    

    
        <a name="comment_4869"></a>
        <div class="comment approved" style="margin-left: 60px">
            <div class="info">
                

<span class="datetime" title="2020-10-28 10:06">2 years, 8 months ago</span>
                
<span class="user" id="user-3528">
<a href="/kb/user/id/3528" title="Vladislav Vaintroub">Vladislav Vaintroub</a>
</span>
            </div>
            <div class="title">
                <a href="#comment_4869">Re: Is chaining UPNs via &#34;authentication_options&#34; when using the GSSAPI Plugin considered safe?</a>
                
            </div><div class="comment_text">
                <p>Hi Michael,
I see, but again, given the first request was concerned about migration from Oracle Windows auth plugin, I assume the importance of Windows here is higher. </p>
<p>It is not that I mind having some AD option for Unixen, SID or not-SID, but it seems to be entering an uncharted territory with unknown effort to be spent . See, for the most part, on Unixen this plugin currently is just plain GSSAPI, and apart from get_default_principal_name(), there are even no krb5_ functions in there.</p>
<p>So, it operates on in the Unix plugin, is 
  gss_cred_id_t cred, gss_ctx_id_t ctxt and gss_name_t client_name
Those are initialized whenever the handshake is finished.</p>
<p>I presume there is something in ctxt that can be extracted in some way, but I'm not really sure how :) And once it is extracted, I did not find any krb5_pac function that would allow to iterate over SIDs. If it would require parsing like JAASLounge is doing it, this would be a larger effort. I did not find any OSS C++ code that can be reused, I'm sure SAMBA will be doing something like that, somewhere, but I'm unfamiliar with their code either.</p>
<p>If  that is important, you can create a JIRA ticket asking for supporting AD SID on Unix , nd we can discuss it there. Larger discussions on KB are rather seldom, JIRA can be a better place.</p>

            </div>
            <div class="comment_actions hidden-print">
                
                
                &nbsp;

                <div class="pull-right">
                    
                    <a class="flag btn btn-mini" href="/kb/en/the-community-is-chaining-upns-via-authentication_options-when-using-the-gs/+comments/4869/flag"
                       data-flag-url="/kb/en/the-community-is-chaining-upns-via-authentication_options-when-using-the-gs/+comments/4869/flag"
                            title="Flag as Spam/Inappropriate">
                        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                        </a>
                    
                    
                    
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
        
    

    

    

    

    

    

    

    

</div>


                    <div id="content_disclaimer" class="graybox">
                        Content reproduced on this site is the property of its respective owners,
                        and this content is not reviewed in advance by MariaDB. The views, information and opinions
                        expressed by this content do not necessarily represent those of MariaDB or any other party.
                    </div>
                </div>
            </section>

            
        </div>
    </div>
</div>

<!-- Footer -->
<footer id="footer">
    <div class="footer">
        <div class="container">
            <div class="row row-10">
                <div class="col-md-2 col-xs-4 item">
                    <h5>
                        <a href="/products" title="Products">Products</a>
                    </h5>
                    <ul>
                        <li id="menu-item-7816" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-7816"><a href="https://mariadb.com/products/mariadb-platform/">MariaDB Platform</a></li>
                        <li id="menu-item-7815" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-7815"><a href="https://mariadb.com/products/skysql/">MariaDB SkySQL</a></li>
                        <li id="menu-item-4172" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4172"><a href="https://mariadb.com/pricing/">Pricing</a></li>
                        <li id="menu-item-4163" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4163"><a href="https://mariadb.com/downloads/">Download MariaDB</a></li>
                    </ul>
                </div>
                <div class="col-md-2 col-xs-4 item">
                    <h5>
                        <a href="/services" title="Services">Services</a>
                    </h5>
                    <ul>
                        <li id="menu-item-4169" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4169"><a href="https://mariadb.com/services/remote-dba/">Remote DBA</a></li>
                        <li id="menu-item-41691" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4169"><a href="https://mariadb.com/services/skydba/">SkyDBA</a></li>
                        <li id="menu-item-4167" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4167"><a href="https://mariadb.com/services/enterprise-architect/">Enterprise Architect</a></li>
                        <li id="menu-item-4170" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4170"><a href="https://mariadb.com/services/technical-support-services/">Technical Support</a></li>
                        <li id="menu-item-4168" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4168"><a href="https://mariadb.com/services/migration-practice/">Migration Practice</a></li>
                        <li id="menu-item-4166" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4166"><a href="https://mariadb.com/services/consulting/">Consulting</a></li>
                        <li id="menu-item-4171" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4171"><a href="https://mariadb.com/services/training/">Training</a></li>
                    </ul>
                </div>
                <div class="col-md-2 col-xs-4 item">
                    <h5>
                        <a href="/resources" title="Resources">Resources</a>
                    </h5>
                    <ul>
                        <li id="menu-item-41751" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4175"><a href="https://mariadb.com/docs/">Documentation</a></li>
                        <li id="menu-item-41752" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4175"><a href="https://mariadb.com/developers/">Developers</a></li>
                        <li id="menu-item-4175" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4175"><a href="https://mariadb.com/resources/blog/">Blog</a></li>
                        <li id="menu-item-5462" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-5462"><a href="https://support.mariadb.com">Support</a></li>
                        <li id="menu-item-6004" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-6004"><a href="https://mariadb.com/openworks/">OpenWorks</a></li>
                        <li id="menu-item-60041" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-6004"><a href="https://mariadb.com/resources/customer-stories/">Customer Stories</a></li>
                        <li id="menu-item-7817" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-7817"><a href="https://mariadb.com/resources/events/">Events</a></li>
                        <li id="menu-item-4177" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4177"><a href="https://mariadb.com/roadshow/">MariaDB Roadshow</a></li>
                    </ul>
                </div>
                <div class="visible-xs visible-sm clear"></div>
                <div class="col-md-2 col-xs-5 item">
                    <h5>
                        <a href="/about-us" title="About MariaDB">About</a>
                    </h5>
                    <ul>
                        <li id="menu-item-4173" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4173"><a href="https://mariadb.com/contact/">Contact</a></li>
                        <li id="menu-item-4161" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4161"><a href="https://mariadb.com/about-us/leadership/">Leadership</a></li>
                        <li id="menu-item-4162" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4162"><a href="https://mariadb.com/about-us/partners/">Partners</a></li>
                        <li id="menu-item-4174" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4174"><a href="https://mariadb.com/newsroom/">Newsroom</a></li>
                        <li id="menu-item-4160" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4160"><a href="https://mariadb.com/about-us/investors/">Investors</a></li>
                        <li id="menu-item-4159" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4159"><a href="https://mariadb.com/about-us/careers/">Careers</a></li>
                        <li id="menu-item-41591" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4159"><a href="https://mariadb.com/trust/">Trust Center</a></li>
                        <li id="menu-item-41592" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4159"><a href="https://mariadb.com/vulnerability-reporting/">Vulnerability Reporting</a></li>
                    </ul>
                </div>
                <div class="col-md-4 col-xs-7 item">
                    <div id="block-footercontact" class="block block-block-content block-block-content22b3af28-0754-44ec-a5c6-4466568f37e3">
                        <h5><a href="/contact" title="Contact">Contact</a></h5>
                    </div>
                    <div class="social">
                        <ul class="list-inline">
                            <li>
                                <a target="_blank" href="https://www.facebook.com/MariaDB.dbms/" title="Facebook">
                                    <i class="fa fa-facebook" aria-hidden="true"></i>
                                </a>
                            </li>
                            <li>
                                <a target="_blank" href="https://twitter.com/mariadb" title="Twitter">
                                    <i class="fa fa-twitter" aria-hidden="true"></i>
                                </a>
                            </li>
                            <li>
                                <a target="_blank" href="https://www.linkedin.com/company/mariadb-corporation?trk=company_logo " title="LinkedIn">
                                    <i class="fa fa-linkedin" aria-hidden="true"></i>
                                </a>
                            </li>
                        </ul>
                    </div>
                    <div id="block-footerformcontact" class="block block-block-content block-block-contentd754ee1b-3cc9-40e7-9ef4-f504f1197fb1">
                        
                            <p>Subscribe to our newsletter!</p>
                            <script src="//app-sj15.marketo.com/js/forms2/js/forms2.min.js"></script><form id="mktoForm_1498"></form>
                            <script>
                                <!--//--><![CDATA[// ><!--
                                MktoForms2.loadForm("//app-sj15.marketo.com", "573-PXI-984", 1498);
                                //--><!]]]]><![CDATA[>
                                //--><!]]>
                            </script>
                        
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="footer-copyright">
        <div class="container text-center">
            <ul class="list-inline no-margin">
                <li>
                    <a href="/legal" title="Legal">Legal</a>
                </li>
                <li>
                    <a href="/privacy-policy" title="Privacy Policy">Privacy Policy</a>
                </li>
                <li>
                    <a href="/cookie-policy/" title="Cookies">Cookie Policy</a>
                </li>
            </ul>
            <p>Copyright &copy; 2023 MariaDB. All rights reserved.</p>
        </div>
    </div>
</footer>
</div>

<div id="ajax_loading">
    <img src="/kb/static/images/ajax-loader.a51c5608d01a.gif" />
</div>

    <!-- Google Tag Manager -->
    <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-MK2847"
                      height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
            '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MK2847');</script>
    <!-- End Google Tag Manager -->

</body>

<script type="text/javascript" src="/kb/static/js/main.fed4ec768178.js" charset="utf-8"></script>

</html>