<!DOCTYPE html>
<html>
<head data-cookie-domain=""
      data-cookie-path="/">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="apple-touch-icon" sizes="180x180" href="/kb/static/images/favicons/apple-touch-icon.159e713979be.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/kb/static/images/favicons/favicon-32x32.bc0ac1d5d11e.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/kb/static/images/favicons/favicon-16x16.5801f8f0f34e.png">
    <link rel="shortcut icon" href="/kb/static/images/favicons/favicon.d122d305dee4.ico" type="image/x-icon" />

    <title>MariaDB 5.3.3 Changelog - Source - MariaDB Knowledge Base</title>

    <link href="/kb/static/css/main.f7633538c846.css" rel="stylesheet" type="text/css" />

    
        <meta name="robots" content="noindex, nofollow">
    

    

    <!-- FB Open Graph tags -->
    <meta property="og:title" content="MariaDB 5.3.3 Changelog - Source" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://mariadb.com/kb/en/mariadb-533-changelog/+source/" />
    <meta property="og:image" content="http://mariadb.comaskmonty-logo.png" />
    <meta property="og:site_name" content="MariaDB KnowledgeBase" />
    <meta property="fb:admins" content="514852603" />
    <meta property="og:description" content="" />

    <meta name="description" content="" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="//fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet"/>
    
</head>
<body class="mpkb nodes autoresize nodes_source jqui" id="nodes_source">





<div id="menu-mobile" class="visible-sm visible-xs">

    <div>
        <div id="mobile-close-menu" class="text-right">
            <a href="javascript:void(0)" title="Close Menu" id="back-main" class="toggle-menu">X<span></span></a>
        </div>
    </div>
    <div class="mainmenu-mobile">
        <ul class="ls-none ul-menu">
            <li data-sub="submenu5"><a class="open-form-search" href="/kb/search/" title="Search">Search </a></li>
            <li data-sub="submenu0"><a href="/products" title="Products">Products</a><span class="arrow-main"></span></li>
            <li data-sub="submenu1"><a href="/services" title="Services">Services</a><span class="arrow-main"></span></li>
            <li data-sub="submenu2"><a href="/resources" title="Resources">Resources</a><span class="arrow-main"></span></li>
            <li data-sub="submenu3"><a href="/about-us" title="About">About</a><span class="arrow-main"></span></li>
            <li data-sub="submenu4"><a href="/contact" title="Contact">Contact</a></li>
        </ul>
    </div>

    <div class="nav-top-mobile">
        <div class="select-box form">

            <ul class="inline-block-md mb-none top-nav">
                <li>

                </li>
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/mariadb-533-changelog/+source/"> Login</a>
                    </li>
                
            </ul>



        </div>
        <p class="text-center copyright">Copyright &copy; 2025 MariaDB. All rights reserved.</p>
    </div>
</div>
<div class="violator-wrap d-none" id="top_violator">
    <div class="container">
        <div class="row">
            <div class="col-xs-12 col-sm-12">
                <div class="violator-outer">
                    <div class="violator-inner">
                        <div class="row">
                            <div class="col-xs-12 col-sm-9 col-lg-7 col-lg-offset-2" id="top_violator_content">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="content-link" target="_blank" rel="nofollow noreferrer">
                                    <span>The Ultimate Guide to High Availability with MariaDB</span>
                                </a>
                            </div>
                            <div class="col-xs-12 col-sm-3" id="top_violator_cta">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="btn btn-mariadb" target="_blank" rel="nofollow noreferrer">Download Now</a>
                            </div>
                        </div>
                    </div>
                    <button type="button" class="btn btn-link close-btn">
                        <svg xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 24 24" width="15px" height="15px"><path d="M 4.9902344 3.9902344 A 1.0001 1.0001 0 0 0 4.2929688 5.7070312 L 10.585938 12 L 4.2929688 18.292969 A 1.0001 1.0001 0 1 0 5.7070312 19.707031 L 12 13.414062 L 18.292969 19.707031 A 1.0001 1.0001 0 1 0 19.707031 18.292969 L 13.414062 12 L 19.707031 5.7070312 A 1.0001 1.0001 0 0 0 18.980469 3.9902344 A 1.0001 1.0001 0 0 0 18.292969 4.2929688 L 12 10.585938 L 5.7070312 4.2929688 A 1.0001 1.0001 0 0 0 4.9902344 3.9902344 z"/></svg>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="wrapper">
<div id="top-nav">
    <div class="container">
        <ul class="hidden-sm hidden-xs" >
            <li><a href="https://mariadb.com/kb/">Knowledge Base</a></li>
            <li><a href="https://mariadb.com/contact/">Contact</a></li>
            
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/mariadb-533-changelog/+source/" rel="nofollow">Login</a>
                    </li>
                
            
            
            <li id="search-form">
                <form action="/kb/en/+search/" method="get" id="search-block-form" accept-charset="UTF-8">
                    <input id="search" title="Enter the terms you wish to search for."
                           placeholder="Search . . ." type="text"
                           name="q" value="" size="15" maxlength="128" class="form-text"
                           data-autocomplete-url="/kb/en/+search/autocomplete/">
                    <input type="hidden" name="quick" value="1" />
                    <input type="hidden" name="source" value="kb" />
                </form>
            </li>
            <li><a id="search-toggler" href="/kb/search/">Search</a></li>
            
        </ul>
    </div>
</div>
<div id="navbar-bottom" class="navbar">
    <div class="container">
        
        
        
        
        <div class="row">
            <div class="col-md-3 col-sm-9 col-xs-9">
                <a class="brand" href="/" title="MariaDB">
                    <img src="/kb/static/images/logo-2018-black.95f5978ae14d.png">
                </a>
            </div>
            <div class="col-md-9 hidden-sm hidden-xs">
                <div class="main-menu">
                    <ul id="main-menu" class="nav navbar-nav inline-block-sm">
    <li class="has-sub full-menu">
        <a href="/products" title="Products">Products</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/solutions" title="Solutions">Solutions</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/resources" title="Resources">Resources</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/about-us" title="Company">Company</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/pricing" title="Pricing">Pricing</a>
    </li>
    
    <li class="">
        <a class="button electric-eel small top-bar-right-download" href="/downloads/">Download</a>
    </li>
</ul>
                </div>
            </div>
            <div class="col-md-3 visible-sm visible-xs col-sm-3 col-xs-3 ps-rv">
                <div class="navbar-header text-right pull-right">
                    <button type="button" class="menu-control toggle-menu" id="open-menu">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="main">
    <div class="container">
        

        <div id="subheader1" class="clearfix">
            <div class="pull-left">
                
                <div id="breadcrumbs" class="breadcrumb">
                    <a href="/kb/en/">Knowledge Base</a>
                    


    
    » <a class="crumb" href="/kb/en/mariadb-server-release-dates/">MariaDB Server Releases</a>
    

    
    » <a class="crumb" href="/kb/en/changelogs/">Changelogs</a>
    

    
    » <a class="crumb" href="/kb/en/changelogs-mariadb-53-series/">Changelogs - MariaDB 5.3 Series</a>
    


    » <a class="node_link crumb" href="/kb/en/mariadb-533-changelog/">MariaDB 5.3.3 Changelog</a>


                </div>
                
            </div>
        </div>
    </div>
    <div class="container" id="container-main">
        <div class="row">
            
            
                
                <aside id="sidebar-first" class="sidebar col-md-2 hidden-xs hidden-sm hidden-print">
                    
                        
                        <ul id="category_menu" class="nav nav-pills nav-stacked">
                            <li><a href="/kb/en/">Home</a></li>
                            
                                
                                    <li><a href="/kb/en/+questions/">Open Questions</a></li>
                                
                                <li><a href="/kb/en/documentation/">MariaDB Server</a></li>
                                <li><a href="/kb/en/maxscale/">MariaDB MaxScale</a></li>
                                <li><a href="/kb/en/mariadb-columnstore/">MariaDB ColumnStore</a></li>
                                <li><a href="/kb/en/connectors/">Connectors</a></li>
                            

                        </ul>
                    

                    
                        <div>
    

<div class="well well-small box actions"><div>

        <a class="btn btn-block btn-small" href="/kb/en/mariadb-533-changelog/">Return to article</a>
    
</div>
</div>

</div>
                    

                    

































                </aside>
            
            
            
                
            
            
            <section id="content" class="limited_width col-md-10 clearfix">
                
                    <h1>MariaDB 5.3.3 Changelog - Source</h1>
                

                



                <div>
                    

    

    
    <div class="revision_info">
        <dl class="table">
            <dt>Revision</dt>
            <dd><a href="/kb/en/mariadb-533-changelog/+r/13793/">13793</a></dd>
            <dt>User</dt>
            <dd>
<span class="user" id="user-2">
<a href="/kb/user/id/2" title="Daniel Bartholomew">Daniel Bartholomew</a>
</span></dd>
            <dt>Date</dt>
            <dd>

<span class="datetime" title="2022-11-18 02:56">2022-11-18 02:56</span></dd>
        </dl>
    </div>
    


    

    
        
        <textarea id="answer_source" class="creole_source autogrow">[[http://downloads.askmonty.org/mariadb/5.3.3|Download]] | 
[[mariadb-533-release-notes|Release Notes]] | 
**Changelog** |
[[what-is-mariadb-53|Overview of 5.3]]

**Release date:** 21 Dec 2011

For the highlights of this release, see the
[[mariadb-533-release-notes|release notes]].

The revision number links will take you to the revision&#39;s page on Launchpad. On
Launchpad you can view more details of the revision and view diffs of the code
modified in that revision.

* maria53rev:3367
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Tue 2011-12-20 12:13:47 +0400&lt;&lt;/style&gt;&gt;
** Fix version number: it&#39;s 5.3.3
* maria53rev:3366
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Tue 2011-12-20 09:57:42 +0400&lt;&lt;/style&gt;&gt;
** Update mysql-test/suite/pbxt/r/subselect.result for the previous push
* maria53rev:3365
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Mon 2011-12-19 23:05:44 +0200&lt;&lt;/style&gt;&gt;
** Backport of lwl#5953 from MySQL 5.6
** The patch differs from the original MySQL patch as follows:
*** All test case differences have been reviewed one by one, and
   care has been taken to restore the original plan so that each
   test case executes the code path it was designed for.
*** A bug was found and fixed in MariaDB 5.3 in
   Item_allany_subselect::cleanup().
*** ORDER BY is not removed because we are unsure of all effects,
   and it would prevent enabling ORDER BY ... LIMIT subqueries.
*** ref_pointer_array.m_size is not adjusted because we don&#39;t do
   array bounds checking, and because it looks risky.
** Original comment by Jorgen Loland:
***none lwl#5953 - Optimize away useless subquery clauses
*** For IN/ALL/ANY/SOME/EXISTS subqueries, the following clauses are 
   meaningless:
**** ORDER BY (since we don&#39;t support LIMIT in these subqueries)
**** DISTINCT
**** GROUP BY if there is no HAVING clause and no aggregate 
    functions
*** This WL detects and optimizes away these useless parts of the
   query during JOIN::prepare()
* maria53rev:3364
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Mon 2011-12-19 22:24:10 +0400&lt;&lt;/style&gt;&gt;
** lpbug#906385: EXPLAIN EXTENDED crashes in TABLE_LIST::print with limited max_join_size
*** Take into account that subquery&#39;s optimization can fail because of @@max_join_size error.
* maria53rev:3363
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Mon 2011-12-19 20:58:55 +0400&lt;&lt;/style&gt;&gt;
** lpbug#904432: Wrong result with LEFT JOIN, constant table, semijoin=ON,materialization=ON
*** Correct handling for SJ-Materialization + outer joins (details in the comments in the code)
* maria53rev:3362
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Mon 2011-12-19 18:07:19 +0400&lt;&lt;/style&gt;&gt;
** Remove garbage comments
* maria53rev:3361
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Mon 2011-12-19 10:11:21 +0200&lt;&lt;/style&gt;&gt;
** Supression condition made wider to cover some other system cases.
* maria53rev:3360
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Sun 2011-12-18 23:38:37 -0800&lt;&lt;/style&gt;&gt;
** Fixed lpbug#904832.
** Do not perform index condition pushdown for conditions containing subqueries
   and stored functions.
* maria53rev:3359
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Sun 2011-12-18 19:25:00 +0400&lt;&lt;/style&gt;&gt;
** Bump version number: now it&#39;s 5.3.3 (5.3.2 has been released some time ago)
* maria53rev:3358
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Fri 2011-12-16 08:05:14 -0800&lt;&lt;/style&gt;&gt;
** Adjusted test cases of the suite funcs_1.
* maria53rev:3357
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Fri 2011-12-16 14:19:58 +0400&lt;&lt;/style&gt;&gt;
** Update test results for previous push
* maria53rev:3356
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Fri 2011-12-16 10:21:46 +0400&lt;&lt;/style&gt;&gt;
** GIS issues fixed.
** Failures on SUN Solaris. Buggy compiler there required some extra initialization
  for variables. Then the 02 optimization leads to bugs when values set through the
  pointer are not always taken into account. Finally, the (long long) / (long)
  crashes there, the explicit typeconverstion added.
  Failing innodb_plunin.innodb_gis.test fixed.
** per-file comments:
*** mysql-test/suite/innodb_plugin/t/innodb_gis.test
**** GIS issues fixed.
*** sql/gcalc_slicescan.cc
**** GIS issues fixed.
*** sql/gcalc_tools.cc
**** GIS issues fixed.
* maria53rev:3355 [merge]
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Thu 2011-12-15 15:55:00 -0800&lt;&lt;/style&gt;&gt;
** Merge
** maria53rev:3353.1.1 [merge]
   &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Thu 2011-12-15 14:28:34 -0800&lt;&lt;/style&gt;&gt;
*** Merge.
*** maria53rev:3349.2.2
    &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Thu 2011-12-15 14:26:59 -0800&lt;&lt;/style&gt;&gt;
**** Made join_cache_level == 2 by default.
*** maria53rev:3349.2.1
    &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Thu 2011-12-15 00:21:15 -0800&lt;&lt;/style&gt;&gt;
**** Made the optimizer switch flags &#39;outer_join_with_cache&#39;, &#39;semijoin_with_cache&#39;
    set to &#39;on&#39; by default.
* maria53rev:3354 [merge]
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Fri 2011-12-16 03:46:04 +0400&lt;&lt;/style&gt;&gt;
** Merge
** maria53rev:3349.1.2
   &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Fri 2011-12-16 03:44:25 +0400&lt;&lt;/style&gt;&gt;
*** lpbug#901399: Wrong result (extra row) with semijoin=ON, materialization=OFF, optimizer_prune_level=0
*** Correctly handle plan refinement stage for LooseScan plans: run create_ref_for_key() if LooseScan 
    plan includes a ref access, and if we don&#39;t have any fixed key components, switch to a full index scan.
* maria53rev:3353
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Thu 2011-12-15 17:26:32 +0400&lt;&lt;/style&gt;&gt;
** Fix unused variable &#39;thd&#39; error.
* maria53rev:3352 [merge]
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Thu 2011-12-15 16:47:39 +0400&lt;&lt;/style&gt;&gt;
** Merge
** maria53rev:3349.1.1
   &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Thu 2011-12-15 02:49:19 +0400&lt;&lt;/style&gt;&gt;
*** Make MyISAM&#39;s version of create_internal_tmp_table set 
    QPLAN_TMP_DISK, like Aria version does (otherwise slow query 
    log would show Tmp_table_on_disk=No when it should have said Yes)
* maria53rev:3351
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Thu 2011-12-15 16:43:28 +0400&lt;&lt;/style&gt;&gt;
** Fix trivial merge error
* maria53rev:3350 [merge]
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Wed 2011-12-14 20:38:38 +0200&lt;&lt;/style&gt;&gt;
** Merge
** maria53rev:3345.1.2 [merge]
   &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Wed 2011-12-14 20:36:51 +0200&lt;&lt;/style&gt;&gt;
*** Merge with 5.2
*** maria53rev:2732.46.39 [merge]
    &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Tue 2011-12-13 20:08:41 +0200&lt;&lt;/style&gt;&gt;
**** Merge with 5.1
**** Updated version number in configure
**** maria53rev:2643.143.66
     &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Mon 2011-12-12 16:28:16 +0100&lt;&lt;/style&gt;&gt;
***** new &#34;&lt;&lt;code&gt;&gt;./configure --disable-distribution&lt;&lt;/code&gt;&gt;&#34; option
***** maria53rev:2643.143.65
      &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Mon 2011-12-12 13:37:18 +0100&lt;&lt;/style&gt;&gt;
****** Fix GCC build failure in PBXT in some cases/platforms.
****** maria53rev:2643.143.64
       &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Sun 2011-12-11 22:58:01 +0200&lt;&lt;/style&gt;&gt;
******** Fixed valgrind problem: reference on deleted memory of temporary table name.
         Removed previous patch of this problem.
*** maria53rev:2732.46.38
    &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Tue 2011-12-13 19:57:19 +0200&lt;&lt;/style&gt;&gt;
**** Fixed lpbug:887051  ; Error in recovery with LOAD DATA + DELETE
** maria53rev:3345.1.1
   &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Tue 2011-12-13 20:07:23 +0200&lt;&lt;/style&gt;&gt;
*** Fixed failure with query_cache.test for embedded server
* maria53rev:3349 [merge]
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Wed 2011-12-14 04:56:54 +0400&lt;&lt;/style&gt;&gt;
** Merge
** maria53rev:3338.1.1
   &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Wed 2011-12-14 04:39:29 +0400&lt;&lt;/style&gt;&gt;
*** lpbug#901506: Crash in TABLE_LIST::print on EXPLAIN EXTENDED
**** Let JTBM optimization code handle the case where the subquery is
     degenerate and doesn&#39;t have a join query plan. Regular materialization
     would fall back to IN-&gt;EXISTS for such cases. Semi-Join materialization
     does not have such option, instead we introduce and use &#34;constant JTBM
     join tabs&#34;.
* maria53rev:3348 [merge]
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Tue 2011-12-13 14:28:53 -0800&lt;&lt;/style&gt;&gt;
** Merge
** maria53rev:3346.1.1
   &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Tue 2011-12-13 14:20:47 -0800&lt;&lt;/style&gt;&gt;
*** Fixed lpbug#902356.
*** A memory overwrite in the function test_if_skip_sort_order()
    could cause a crash for some queries with subqueries.
* maria53rev:3347
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Wed 2011-12-14 02:15:15 +0400&lt;&lt;/style&gt;&gt;
** lpbug#902632: Crash or invalid read at st_join_table::cleanup, st_table::disable_keyread
*** Do a &#34;more thorough&#34; cleanup of SJ-Materialization join tab in
    JOIN_TAB::cleanup. The bug was due to the fact that JOIN_TAB::cleanup() may
    be called multiple times for the same tab if the join has grouping.
* maria53rev:3346
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Tue 2011-12-13 20:52:06 +0200&lt;&lt;/style&gt;&gt;
** The variable query_cache_strip_comments allowed in embedded server.
* maria53rev:3345 [merge]
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Tue 2011-12-13 14:11:08 +0200&lt;&lt;/style&gt;&gt;
** Automatic merge
** maria53rev:3343.1.1
   &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Tue 2011-12-13 14:00:20 +0200&lt;&lt;/style&gt;&gt;
*** Fixed valgrind error when storing db_name_length in query_cache.
**** Changed storage to be 2 bytes instead of sizeof(size_t) (simple optimization)
**** Fixed bug when using query_cache_strip_comments and query that started with &#39;(&#39;
**** Fixed DBUG_PRINT() that used wrong (not initialized) variables.
* maria53rev:3344 [merge]
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Mon 2011-12-12 13:00:33 +0100&lt;&lt;/style&gt;&gt;
** 5.2-&gt;5.3 merge
** maria53rev:2732.46.37
   &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Mon 2011-12-12 12:36:46 +0200&lt;&lt;/style&gt;&gt;
** Fixed lpbug:900375
** The range optimizer incorrectly chose a loose scan for group by
   when there is a correlated WHERE condition. This range access
   method cannot be executed for correlated conditions also with the
   &#34;range checked for each record&#34; because generally the range access
   method can change for each outer record. Loose scan destructively
   changes the query plan and removes the GROUP operation, which will
   result in wrong query plans if another range access is chosen
   dynamically.
** maria53rev:2732.46.36
   &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Thu 2011-12-08 12:05:52 +0200&lt;&lt;/style&gt;&gt;
** Fixed lpbug:888456
** Analysis:
*** The class member QUICK_GROUP_MIN_MAX_SELECT::seen_first_key
    was not reset between subquery re-executions. Thus each
    subsequent execution continued from the group that was
    reached by the previous subquery execution. As a result
    loose scan reached end of file much earlier, and returned
    empty result where it shouldn&#39;t.
** Solution:
*** Reset seen_first_key before each re-execution of the
    loose scan.
** maria53rev:2732.46.35
   &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Sat 2011-12-03 22:44:33 +0100&lt;&lt;/style&gt;&gt;
*** updated the version in configure
** maria53rev:2732.46.34
   &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Fri 2011-12-02 16:27:13 +0100&lt;&lt;/style&gt;&gt;
*** PAM plugin with test
** maria53rev:2732.46.33
   &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Fri 2011-12-02 16:26:43 +0100&lt;&lt;/style&gt;&gt;
### add &lt;&lt;code&gt;&gt;--plugin-dir&lt;&lt;/code&gt;&gt; and &lt;&lt;code&gt;&gt;--default-auth&lt;&lt;/code&gt;&gt; to mysqltest.
### dialog plugin now always returns mysql-&gt;password if non-empty and the first question is of password type
### split get_tty_password into get_tty_password_buff and strdup.
### dialog plugin now uses get_tty_password by default
### dialog.test
### moved small tests of individual plugins into a dedicated suite
** maria53rev:2732.46.32
   &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Sat 2011-12-03 10:53:00 +0100&lt;&lt;/style&gt;&gt;
*** update tests
* maria53rev:3343
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Sun 2011-12-11 19:41:53 -0800&lt;&lt;/style&gt;&gt;
** Fixed lpbug#901709
** The cause of the reported assertion failure was a division of a double value by 0. 
* maria53rev:3342 [merge]
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Sun 2011-12-11 14:38:14 -0800&lt;&lt;/style&gt;&gt;
** Merge
** maria53rev:3339.1.1
   &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Sun 2011-12-11 12:56:06 -0800&lt;&lt;/style&gt;&gt;
*** Fixed lpbug#901478
*** If the duplicate elimination strategy is used for a semi-join and potentially
    one of the block-based join algorithms can be employed to join the inner
    tables of the semi-join then sorting of the head (first non-constant) table
    for a query with ORDER BY / GROUP BY cannot be used.
* maria53rev:3341
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Sun 2011-12-11 12:42:43 -0800&lt;&lt;/style&gt;&gt;
** Adjusted the results of pbxt.subselect after the latest merge 5.1-&gt;5.2-&gt;5.3.
* maria53rev:3340 [merge]
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Sun 2011-12-11 19:28:05 +0200&lt;&lt;/style&gt;&gt;
** Merge with 5.1 &amp; fixes to IGNORE handling
** maria53rev:3327.1.3
   &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Sun 2011-12-11 18:39:33 +0200&lt;&lt;/style&gt;&gt;
*** Rewrite IGNORE handling:
**** Instead of supressing all errors, only suppress safe ones like:
***** ER_DUP_KEY, ER_BAD_NULL_ERROR, ER_SUBQUERY_NO_1_ROW, ER_ROW_IS_REFERENCED_2
** maria53rev:3327.1.2 [merge]
   &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Sun 2011-12-11 11:34:44 +0200&lt;&lt;/style&gt;&gt;
*** Merge with 5.2.
*** no_error handling for select (used by ##INSERT ... SELECT##) still needs to
    be fixed, but I will do that in a separate commit
*** maria53rev:2732.46.31 [merge]
    &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Sat 2011-12-03 20:47:25 +0200&lt;&lt;/style&gt;&gt;
**** Merge with 5.1
**** maria53rev:2643.143.63
     &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Sat 2011-12-03 20:29:15 +0200&lt;&lt;/style&gt;&gt;
***** Added suppressions
***** Fixed feedback_plugin_send to not generate a random number of lines.
**** maria53rev:2643.143.62 [merge]
     &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Thu 2011-12-01 19:20:57 +0100&lt;&lt;/style&gt;&gt;
***** merge
***** maria53rev:2643.150.2 [merge]
      &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Thu 2011-12-01 19:18:45 +0100&lt;&lt;/style&gt;&gt;
****** merge
***** maria53rev:2643.150.1
      &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Thu 2011-12-01 19:15:09 +0100&lt;&lt;/style&gt;&gt;
****** Fix main.merge testcase on Windows
*** maria53rev:2732.46.30
    &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Sat 2011-12-03 20:44:54 +0200&lt;&lt;/style&gt;&gt;
**** Fixed buildbot warnings
*** maria53rev:2732.46.29
    &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Fri 2011-12-02 18:10:54 +0200&lt;&lt;/style&gt;&gt;
**** Fixed some Aria limits to be more sane
*** maria53rev:2732.46.28 [merge]
    &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Fri 2011-12-02 17:32:56 +0200&lt;&lt;/style&gt;&gt;
**** Merge
**** maria53rev:2732.49.1
     &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Fri 2011-12-02 17:22:17 +0200&lt;&lt;/style&gt;&gt;
***** Fixed bug where automaticly zerofilled table was not part of recovery if crash happended before next checkpoint.
*** maria53rev:2732.46.27
    &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Thu 2011-12-01 22:37:45 +0100&lt;&lt;/style&gt;&gt;
**** Fix intermittently failing variables-notembedded test case.
**** After sending packet that is too large, clienrt can get either an error packet with 
     ER_NET_PACKET_TOO_LARGE, or a socket error. Both cases are valid, since the
     server does not ensure reply was fully read by client, before shutting down  and closing 
     the socket.
*** maria53rev:2732.46.26
    &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Thu 2011-12-01 20:21:11 +0200&lt;&lt;/style&gt;&gt;
**** Fixed compiler warning
*** maria53rev:2732.46.25 [merge]
    &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Thu 2011-12-01 20:14:53 +0200&lt;&lt;/style&gt;&gt;
**** Merge with 5.1
**** maria53rev:2643.143.61
     &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Thu 2011-12-01 20:11:41 +0200&lt;&lt;/style&gt;&gt;
***** Fixed that &lt;&lt;code&gt;&gt;--with-libedit --without-readline&lt;&lt;/code&gt;&gt; works
***** Fixed buildbot failures (compiler warnings, failing tests)
*** maria53rev:2732.46.24 [merge]
    &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Wed 2011-11-30 22:57:18 +0200&lt;&lt;/style&gt;&gt;
**** Merge with 5.1
**** maria53rev:2643.143.60
     &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Wed 2011-11-30 20:57:09 +0200&lt;&lt;/style&gt;&gt;
***** Fixed compiler warning and errors
**** maria53rev:2643.143.59
     &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Wed 2011-11-30 18:44:51 +0200&lt;&lt;/style&gt;&gt;
***** Fixed compiler warnings and other bugs found by buildbot.
**** maria53rev:2643.143.58
     &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Wed 2011-11-30 11:37:28 +0100&lt;&lt;/style&gt;&gt;
***** test both federated and federatedX in the federated suite.
**** maria53rev:2643.143.57
     &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Wed 2011-11-30 13:53:25 +0100&lt;&lt;/style&gt;&gt;
***** Cherrypick into XtraDB: Bug#13002783 PARTIALLY UNINITIALIZED CASCADE UPDATE VECTOR&lt;&lt;/style&gt;&gt;
***** We merged the test case for this into MariaDB 5.1, but the fix was not
      yet part of XtraDB.
**** maria53rev:2643.143.56
     &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Wed 2011-11-30 00:34:05 +0200&lt;&lt;/style&gt;&gt;
***** Fixed compiler warnings
*** maria53rev:2732.46.23 [merge]
    &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Tue 2011-11-29 22:48:24 +0200&lt;&lt;/style&gt;&gt;
**** Merge with 5.1 + fixes for build failures in 5.2
**** maria53rev:2643.143.55
     &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Tue 2011-11-29 15:32:25 +0200&lt;&lt;/style&gt;&gt;
***** Fixed that maria-recover works as expected.
****** &#34;&#34; is now used if no option is set
**** maria53rev:2643.143.54
     &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Tue 2011-11-29 01:10:17 +0100&lt;&lt;/style&gt;&gt;
***** Fix Windows build, and a conversion truncation warning.
**** maria53rev:2643.143.53
     &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Thu 2011-11-24 19:23:20 +0200&lt;&lt;/style&gt;&gt;
***** Fixed that one can use &lt;&lt;code&gt;&gt;--maria-recover=backup,force&lt;&lt;/code&gt;&gt;
***** (Before we only allowed one option)
*** maria53rev:2732.46.22
    &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Tue 2011-11-29 08:50:54 +0100&lt;&lt;/style&gt;&gt;
**** Fix testcases:
##### main.merge fails with errno 13 in copy_file().
****** The reason for the error is that copy_file tries to create a file with
       the same name as recently deleted one, and there is still an open handle
       for the deleted file.
****** To fix, use my_delete_allow_opened() for MTR&#39;s delete_file. On Windows,
       this renames file to unique name prior to deletion, and prevents EACCES
       errors for files opened with FILE_SHARE_DELETE.
##### innodb_bug59641 
****** generates warnings, after server was killed and restarted in the test case.
****** The warnings are about test_suppression table (needs to be repaired, as it that was written just prior to the crash)
****** Fixed by using FLUSH TABLES after populating warning suppression table.
*** maria53rev:2732.46.21
    &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Tue 2011-11-29 02:00:24 +0100&lt;&lt;/style&gt;&gt;
**** merge, fix Windows warnings
*** maria53rev:2732.46.20
    &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Mon 2011-11-28 15:08:12 +0100&lt;&lt;/style&gt;&gt;
**** after merge fixes
*** maria53rev:2732.46.19 [merge]
    &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Thu 2011-11-24 22:48:35 +0200&lt;&lt;/style&gt;&gt;
**** Automatic merge
**** maria53rev:2732.48.2
     &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Thu 2011-11-24 19:07:36 +0200&lt;&lt;/style&gt;&gt;
***** Added test case for lpbug:875797  Using &#39;innodb_sys_indexes&#39; causes core dump
**** maria53rev:2732.48.1 [merge]
     &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Thu 2011-11-24 18:48:58 +0200&lt;&lt;/style&gt;&gt;
***** Merge with MariaDB 5.1
***** maria53rev:2643.143.52
      &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Thu 2011-11-24 16:04:19 +0200&lt;&lt;/style&gt;&gt;
****** Fixes for build failuers found by buildbot
***** maria53rev:2643.143.51 [merge]
      &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Wed 2011-11-23 19:32:14 +0200&lt;&lt;/style&gt;&gt;
****** Merge with MySQL 5.1.60
***** maria53rev:2643.143.50
      &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Wed 2011-11-23 10:25:27 +0200&lt;&lt;/style&gt;&gt;
****** Fixes of testcases after merge with MySQL 5.1.59
***** maria53rev:2643.143.49 [merge]
      &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Mon 2011-11-21 19:19:37 +0200&lt;&lt;/style&gt;&gt;
****** Merge of XtraDB for 5.1.59
****** maria53rev:2643.149.1 [merge]
       &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Mon 2011-11-21 14:21:13 +0100&lt;&lt;/style&gt;&gt;
******* Merge XtraDB from Percona-Server-5.1.59-13 into MariaDB 5.1.
******* maria53rev:0.6.47
        &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Mon 2011-11-21 13:20:15 +0100&lt;&lt;/style&gt;&gt;
******** Updated with changes from Percona Server 5.1.56-13, from
         lp{{{:}}}percona-server/5.1, tag Percona-Server-5.1.59-13.0.
******** Merged: revid:ignacio.nin@percona.com-20111016133841-fzpr5s89n13ft1s1
***** maria53rev:2643.143.48 [merge]
      &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Mon 2011-11-21 19:17:56 +0200&lt;&lt;/style&gt;&gt;
****** Automatic merge
****** maria53rev:2643.148.1 [merge]
       &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Mon 2011-11-21 19:13:14 +0200&lt;&lt;/style&gt;&gt;
******* Initial merge with MySQL 5.1 (XtraDB still needs to be merged)
******* Fixed up copyright messages.
*** maria53rev:2732.46.18
    &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Tue 2011-11-22 21:55:11 +0100&lt;&lt;/style&gt;&gt;
**** fix dialog plugin to work on windows
*** maria53rev:2732.46.17
    &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Tue 2011-11-15 13:14:54 +0200&lt;&lt;/style&gt;&gt;
**** Fix for lp:780425 sql_buffer_result=1 gives wrong result for GROUP BY with a +# constant expression&#34;
** maria53rev:3327.1.1
   &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Sat 2011-12-03 23:06:16 +0200&lt;&lt;/style&gt;&gt;
*** Added handler and temporary table usage to mytop
*** Fixed prompt on reconnect in mysql client
* maria53rev:3339
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Fri 2011-12-09 14:30:50 -0800&lt;&lt;/style&gt;&gt;
** Fixed lpbug#901312
** The function setup_sj_materialization_part1() forgot to set the value
   of TABLE::map for any materialized IN subquery. 
** This could lead to wrong results for queries with subqueries that were
   converted to queries with semijoins.
* maria53rev:3338
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Thu 2011-12-08 16:29:45 +0400&lt;&lt;/style&gt;&gt;
** lpbug#901655 ST_BUFFER asserts with a coplicated shape.
** Coinciding nodes can appear as a result of DOUBLE inaccuracy.
** We should test that before we start the loop.
** Also the spatial relations can be calculated faster if we check
   MBR relations first. And we do have the shape&#39;s MBR-s now.
** per-file comments:
*** sql/gcalc_slicescan.cc
**** set_extent() method added.
**** lpbug#901655 ST_BUFFER asserts with a coplicated shape.
*** sql/gcalc_slicescan.h
**** set_extent() method declared.
**** lpbug#901655 ST_BUFFER asserts with a coplicated shape.
*** sql/gcalc_tools.cc
**** lpbug#901655 ST_BUFFER asserts with a coplicated shape.
**** checks for equal nodes added.
*** sql/item_geofunc.cc
**** lpbug#901655 ST_BUFFER asserts with a coplicated shape.
**** MBR for the shapes calculated, and MBR checks added before we
     start the heavy calculations.
*** sql/spatial.h
**** lpbug#901655 ST_BUFFER asserts with a coplicated shape.
**** MBR::buffer() method implemented.
* maria53rev:3337
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Thu 2011-12-08 04:22:38 +0400&lt;&lt;/style&gt;&gt;
** Small semi-join optimization improvement:
*** if we&#39;re considering FirstMatch access with one inner table, and 
    @@optimizer_switch has semijoin_with_cache flag, calculate costs
    as if we used join cache (because we will be able to do so)
* maria53rev:3336 [merge]
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Thu 2011-12-08 02:47:54 +0400&lt;&lt;/style&gt;&gt;
** Merge fix for lpbug#868908
** maria53rev:3322.1.3
   &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Wed 2011-12-07 23:15:57 +0400&lt;&lt;/style&gt;&gt;
*** Remove garbage assignments causing failures on Windows
** maria53rev:3322.1.2
   &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Wed 2011-12-07 19:21:51 +0400&lt;&lt;/style&gt;&gt;
*** lpbug#868908: Crash in check_simple_equality() with semijoin + materialization + prepared statement
**** Part2: safety and code cleanup
** maria53rev:3322.1.1
   &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Wed 2011-12-07 01:03:00 +0400&lt;&lt;/style&gt;&gt;
*** lpbug#868908: Crash in check_simple_equality() with semijoin + materialization + prepared statement
**** Part 1 of the fix: for semi-join merged subqueries, calling child_join-&gt;optimize() until we&#39;re done with all
     PS-lifetime optimizations in the parent.
* maria53rev:3335
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Thu 2011-12-08 02:12:48 +0400&lt;&lt;/style&gt;&gt;
** lpbug#901032: Wrong result for MIN/MAX on an indexed column with materialization and semijoin
*** opt_sum_query() should not assume that join tables from sj-materialization
    have known numbers of rows.
* maria53rev:3334
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Tue 2011-12-06 13:42:18 -0800&lt;&lt;/style&gt;&gt;
** Fixed lpbug#900469.
** The execution plan cannot use sorting on the first table from the
   sequence of the joined tables if it plans to employ the block-based
   hash join algorithm.
* maria53rev:3333
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Tue 2011-12-06 02:46:42 -0800&lt;&lt;/style&gt;&gt;
** Fixed lpbug#899509.
** The optimizer must ignore any possible hash join key when looking for the 
   query execution plan with join_cache_level set to 0.  
* maria53rev:3332 [merge]
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Mon 2011-12-05 18:52:50 -0800&lt;&lt;/style&gt;&gt;
** Merge
** maria53rev:3330.1.1 [merge]
   &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Mon 2011-12-05 18:51:56 -0800&lt;&lt;/style&gt;&gt;
*** Merge
*** maria53rev:3328.1.1
    &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Mon 2011-12-05 09:50:24 -0800&lt;&lt;/style&gt;&gt;
**** Fixed lpbug#899777.
**** KEYUSE elements for a possible hash join key are not sorted by field
     numbers of the second table T of the hash join operation. Besides
     some of these KEYUSE elements cannot be used to build any key as their
     key expressions depend on the tables that are planned to be accessed
     after the table T. 
**** The code before the patch did not take this into account and, as a result,
     execition of a query the employing block-based hash join algorithm could
     cause a crash or return a wrong result set. 
* maria53rev:3331
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Tue 2011-12-06 01:04:27 +0400&lt;&lt;/style&gt;&gt;
** lpbug#899962: materialized subquery with join_cache_level=3 
** Make create_tmp_table() set KEY_PART_INFO attributes for the keys it creates.
** This wasn&#39;t needed before but is needed now, when temp. tables that are 
   results of SJ-Materialization are being used for joins.
** This particular bug depended on HA_VAR_LENGTH_PART being set,
   but also added code to set HA_BLOB_PART and HA_NULL_PART when appropriate.
* maria53rev:3330
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Mon 2011-12-05 10:24:14 +0400&lt;&lt;/style&gt;&gt;
** Update test result missed in the previous cset
* maria53rev:3329
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Mon 2011-12-05 01:31:42 +0400&lt;&lt;/style&gt;&gt;
** Make subquery Materialization, as well as semi-join Materialization be shown
   in EXPLAIN as select_type==MATERIALIZED. 
** Before, we had select_type==SUBQUERY and it was difficult to tell materialized
   subqueries from uncorrelated scalar-context subqueries.
* maria53rev:3328
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Sun 2011-12-04 07:43:33 -0800&lt;&lt;/style&gt;&gt;
** Fixed lpbug#899696.
** If has been decided that the first match strategy is to be used to join table T
   from a semi-join nest while no buffer can be employed to join this table
   then no join buffer can be used to join any table in the join sequence between
   the first one belonging to the semi-join nest and table T.
* maria53rev:3327
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Fri 2011-12-02 00:36:55 +0200&lt;&lt;/style&gt;&gt;
** Added new file (for netware)
** Added some file to ignore
* maria53rev:3326
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Fri 2011-12-02 00:34:59 +0200&lt;&lt;/style&gt;&gt;
** Fixes for netware by Guenter Knauf
* maria53rev:3325
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Fri 2011-12-02 00:24:58 +0200&lt;&lt;/style&gt;&gt;
** Patch to get MariaDB to compile on CYGWIN; By Guenter Knauf
** Increased number of locks in thr_lock (used only when testing)
* maria53rev:3324
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Wed 2011-11-30 10:22:53 -0800&lt;&lt;/style&gt;&gt;
** Fixed lpbug#898073.
** The tables from the same semi-join or outer join nest cannot use
   join buffers if in the join sequence of the query execution plan
   they are separated by a table that is planned to be joined without
   usage of a join buffer.
* maria53rev:3323 [merge]
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Wed 2011-11-30 08:28:40 +0200&lt;&lt;/style&gt;&gt;
** Merge the fix of lpbug:825051
** maria53rev:3321.1.1
   &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Tue 2011-11-29 23:06:39 +0200&lt;&lt;/style&gt;&gt;
*** Fixed lpbug:825051
*** The cause of the wrong result was that Item_ref_null_helper::get_date()
    didn&#39;t use a method of the *_result() family, and fetched the data
    for the field from the current row instead of result_field. Changed to
    use the correct *_result() method, like to all other similar methods
    of Item_ref_null_helper.
* maria53rev:3322
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Tue 2011-11-29 23:09:06 +0200&lt;&lt;/style&gt;&gt;
** Added test suite for the lpbug#885162 (fixed by the patch for lpbug#859375 and lpbug#887458).
* maria53rev:3321
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Tue 2011-11-29 15:27:52 +0400&lt;&lt;/style&gt;&gt;
** lpbug#857066 Wrong result with ST_DISJOINT when using an index.
** DISJOINT can&#39;t be properly optimized with the RTree keys in MyISAM also.
** per-file comments:
*** storage/myisam/rt_index.c
**** lpbug#857066 Wrong result with ##ST_DISJOINT## when using an index.
**** don&#39;t optimize ##DISJOINT## with the RTree keys.
* maria53rev:3320
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Tue 2011-11-29 02:11:13 +0400&lt;&lt;/style&gt;&gt;
** lpbug#857066 Wrong result with ST_DISJOINT when using an index
   the ST_DISJOINT can&#39;t be properly optimized with the RTree key
   at the moment.
** per-file comments:
*** storage/maria/ma_rt_index.c
**** lpbug#857066 Wrong result with ST_DISJOINT when using an index
     disabled optimization for the DISJOINT case.
* maria53rev:3319
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Mon 2011-11-28 15:24:07 +0200&lt;&lt;/style&gt;&gt;
** Fix lpbug:833777, lpbug:894397
** Analysis:
*** lpbug:894397 was a consequence of a prior incorrect fix of lpbug:833777
    which didn&#39;t take into account that even when all tables are
    constant there may be correlated conditions, and the where clause
    is not equivalent to the constant conditions.
** Solution:
*** When there are constant tables only, evaluate only the conditions
    that reference outer fields, because the constant conditions are
    already checked, and the where clause doesn&#39;t have other conditions
    than constant ones, and outer referencing ones. The fix for
    lpbug:894397 also fixes lpbug:833777
* maria53rev:3318
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Mon 2011-11-28 12:42:14 +0200&lt;&lt;/style&gt;&gt;
** Fixed lpbug:747278
** The problem was that when we have single row subquery with no rows
   Item_cache(es) which represent result row was not null and being
   requested via element_index() returned random value.
** The fix is setting all Item_cache(es) in NULL before executing the
   query (reset() method) which guaranty NULL value of whole query
   or its elements requested in any way if no rows was found.
** set_null() method was added to Item_cache to guaranty correct NULL
   value in case of reseting the cache.
* maria53rev:3317
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Sat 2011-11-26 14:23:00 -0800&lt;&lt;/style&gt;&gt;
** Set new default values for the optimizer switch flags &#39;derived_merge&#39;
   and &#39;derived_with_keys&#39;. Now they are set on by default.
* maria53rev:3316 [merge]
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Sat 2011-11-26 12:27:52 +0400&lt;&lt;/style&gt;&gt;
** Merge
** maria53rev:3314.1.5
   &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Fri 2011-11-25 23:54:36 +0400&lt;&lt;/style&gt;&gt;
*** Subquery code cleanups:
      - Make functions that operate on SJ_TMP_TABLE be member functions
      - Make Loose_scan_opt data members private
** maria53rev:3314.1.4
   &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Fri 2011-11-25 21:45:58 +0400&lt;&lt;/style&gt;&gt;
*** Update test results
** maria53rev:3314.1.3
   &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Fri 2011-11-25 15:48:56 +0400&lt;&lt;/style&gt;&gt;
*** Update test results
** maria53rev:3314.1.2
   &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Fri 2011-11-25 14:57:27 +0400&lt;&lt;/style&gt;&gt;
*** Remove garbage comments
** maria53rev:3314.1.1 [merge]
   &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Fri 2011-11-25 14:28:43 +0400&lt;&lt;/style&gt;&gt;
*** Merge
*** maria53rev:3275.1.3
    &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Fri 2011-11-25 05:56:58 +0400&lt;&lt;/style&gt;&gt;
**** Semi-join optimizations code cleanup part 2:
***** Make EXPLAIN display &#34;Start temporary&#34; at the start of the fanout (it used to display
     at the first table whose rowid gets into temp. table which is not that useful for
     the user)
***** Updated test results (all checked)
*** maria53rev:3275.1.2
    &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Wed 2011-11-23 04:25:52 +0400&lt;&lt;/style&gt;&gt;
**** Semi-join optimizations code cleanup:
***** Break down POSITION/advance_sj_state() into four classes 
     representing potential semi-join strategies.
***** Treat all strategies uniformly (before, DuplicateWeedout 
     was special as it was the catch-all strategy. Now, we&#39;re 
     still relying on it to be the catch-all, but are able to 
     function,e.g. with firstmatch=on,duplicate_weedout=off.
***** Update test results (checked)
*** maria53rev:3275.1.1
    &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Sat 2011-11-12 20:50:11 +0200&lt;&lt;/style&gt;&gt;
**** lpbug:887468: Second assertion `keypart_map&#39; failed in maria_rkey with semijoin
**** in advance_sj_state: Do not try to construct LooseScan strategy if we&#39;re 
     already behind the last LooseScan table.
* maria53rev:3315
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Fri 2011-11-25 22:54:13 +0400&lt;&lt;/style&gt;&gt;
** Remove garbage comment
* maria53rev:3314
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Thu 2011-11-24 22:56:02 -0800&lt;&lt;/style&gt;&gt;
** Currently innodb_plugin does not support ICP. Part2.
* maria53rev:3313
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Thu 2011-11-24 23:47:50 +0200&lt;&lt;/style&gt;&gt;
** Added valgrind suppression for an error due to
** http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=577135
* maria53rev:3312
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Thu 2011-11-24 23:15:40 +0200&lt;&lt;/style&gt;&gt;
** Fix lpbug:894326
** The patch also fixes an unrelated compiler warning.
** Analysis:
*** The temporary table created during SJ-materialization
    might be used for sorting for a group by operation. The
    sort buffers for this internal temporary table were not
    cleared by the execution code after each subquery
    re-execution. This resulted in a memory leak detected
    by valgrind.
** Solution:
*** Cleanup the sort buffers for the semijon tables as well.
* maria53rev:3311
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Thu 2011-11-24 12:19:37 -0800&lt;&lt;/style&gt;&gt;
  Currently innodb_plugin does not support ICP.
* maria53rev:3310
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Thu 2011-11-24 15:12:10 +0200&lt;&lt;/style&gt;&gt;
** Fix for lpbug:859375 and lpbug:887458.
** Stop attempts to apply IN/ALL/ANY optimizations to so called &#34;fake_select&#34;
   (used for ordering and filtering results of union) in union subquery execution.
* maria53rev:3309
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Thu 2011-11-24 16:26:13 +0400&lt;&lt;/style&gt;&gt;
** fixes to make compilers happy.
** per-file comments:
*** mysql-test/t/gis-precise.test
**** number-to-string conversion differs on Windows.
**** Have to tolerate this while GIS data is stored in doubles.
*** sql/spatial.cc
**** prev_x initialization added.
* maria53rev:3308
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Wed 2011-11-23 23:13:51 +0200&lt;&lt;/style&gt;&gt;
** Fix lpbug:893486
** Analysis:
*** The bug is a result of an incomplete fix for lpbug:869036
*** That fix didn&#39;t take into account that there may be a case
    when ther are no NULLs in the materialized subquery, however
    all columns without NULLs may not be grouped in the only
    non-null index. This is the case when the left subquery expression
    has nullable columns.
** Solution:
*** The patch handles two missing sub-cases of the case when there are
    no value (non-null matches) for any outer expression, and there are
    both NULLs and non-NUll values in the outer reference.
####lower-alpha If the materialized subquery contains no NULLs there cannot be a
     partial match, because there are no NULLs in those columns where
     the outer reference has no NULLs.
#### If the materialized subquery contains NULLs, but there exists a
     column, such that its corresponding outer expression has no NULL,
     and this column also has no NULL. Then there cannot be a partial
     match either.
* maria53rev:3307
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Tue 2011-11-22 17:57:33 +0400&lt;&lt;/style&gt;&gt;
** Small fixes to make compilers happy.
* maria53rev:3306
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Tue 2011-11-22 17:32:05 +0400&lt;&lt;/style&gt;&gt;
** Windows has no &#39;nearbyint&#39; in libraries.
** So removed.
* maria53rev:3305 [merge]
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Tue 2011-11-22 12:06:46 +0200&lt;&lt;/style&gt;&gt;
** Merge default materialization=on.
** maria53rev:3300.2.1 [merge]
   &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Mon 2011-11-21 17:48:25 +0200&lt;&lt;/style&gt;&gt;
*** Merge enabling materialization=on by default.
*** maria53rev:3290.1.1 [merge]
    &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Mon 2011-11-21 16:56:32 +0200&lt;&lt;/style&gt;&gt;
**** Merge enabling of materialization=on by default with main tree.
**** maria53rev:3273.1.3
     &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Wed 2011-11-09 21:29:01 +0200&lt;&lt;/style&gt;&gt;
***** Fixed PBXT test cases.
**** maria53rev:3273.1.2
     &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Wed 2011-11-09 16:46:08 +0200&lt;&lt;/style&gt;&gt;
***** Removed a comment that is not true any more.
***** Consistent use of the ##SUBS_NOT_TRANSFORMED## constant for in_strategy.
**** maria53rev:3273.1.1
     &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Wed 2011-11-09 15:36:25 +0200&lt;&lt;/style&gt;&gt;
***** Enable subquery materialization=ON by default.
* maria53rev:3304
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Mon 2011-11-21 22:16:01 +0200&lt;&lt;/style&gt;&gt;
** Fix lpbug:833777
** Correct test file.
* maria53rev:3303
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Mon 2011-11-21 22:01:47 +0200&lt;&lt;/style&gt;&gt;
** Fix lpbug:833777
** Fix test to pass on 32-bit machines by reducing
   the depth of subquery nestedness to less than 31
   (sizeof(ulong)-1).
* maria53rev:3302 [merge]
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Mon 2011-11-21 11:21:30 -0800&lt;&lt;/style&gt;&gt;
** Merge.
** maria53rev:3300.1.1
   &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Mon 2011-11-21 09:06:35 -0800&lt;&lt;/style&gt;&gt;
*** Fixed lpbug:887496
*** This bug in the function Loose_scan_opt::check_ref_access_part1 could lead
    to choosing an invalid execution plan employing a loose scan access to a
    semi-join table even in the cases when such access could not be used at all.
    This could result in wrong answers for some queries with IN subqueries.
* maria53rev:3301
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Mon 2011-11-21 18:00:55 +0200&lt;&lt;/style&gt;&gt;
** Fix lpbug:833777
** Analysis:
*** The optimizer distinguishes two kinds of &#39;constant&#39; conditions:
    expensive ones, and non-expensive ones. The non-expensive conditions
    are evaluated inside make_join_select(), and if false, already the
    optimizer detects empty query results.
*** In order to avoid arbitrarily expensive optimization, the evaluation of
    expensive constant conditions is delayed until execution. These conditions
    are attached to JOIN::exec_const_cond and evaluated in the beginning of
    JOIN::exec. The relevant execution logic is:&lt;&lt;code inline=false&gt;&gt;JOIN::exec()
  {
    if (! join-&gt;exec_const_cond-&gt;val_int())
    {
      produce an empty result;
      stop execution
    }
    continue execution
    execute the original WHERE clause (that contains exec_const_cond)
   ...
  }
&lt;&lt;/code&gt;&gt;
*** As a result, when an expensive constant condition is
    TRUE, it is evaluated twice - once through
    JOIN::exec_const_cond, and once through JOIN::cond.
    When the expensive constant condition is a subquery,
    predicate, the subquery is evaluated twice. If we have
    many levels of subqueries, this logic results in a chain
    of recursive subquery executions that walk a perfect
    binary tree. The result is that for subquries with depth N,
    JOIN::exec is executed O(2^N) times.
** Solution:
*** Notice that the second execution of the constant conditions
    happens inside do_select(), in the branch:
    if (join-&gt;table_count == join-&gt;const_tables) { ... }
    In this case exec_const_cond is equivalent to the whole WHERE
    clause, therefore the WHERE clause has already been checked in
    the beginnig of JOIN::exec, and has been found to be true.
    The bug is addressed by not evaluating the WHERE clause if there
    was exec_const_conds, and it was TRUE.
* maria53rev:3300
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Mon 2011-11-21 07:00:14 -0800&lt;&lt;/style&gt;&gt;
** Corrected the patch that made the optimizer switch for index condition pushdown
   set to &#39;on&#39; by default.
* maria53rev:3299
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Mon 2011-11-21 05:16:16 -0800&lt;&lt;/style&gt;&gt;
** Made the optimizer switch for index condition pushdown set to &#39;on&#39; by default. 
* maria53rev:3298
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Sun 2011-11-20 04:53:07 -0800&lt;&lt;/style&gt;&gt;
** Fixed lpbug:892725.
** A non-first execution of a prepared statement missed a call of the
   TABLE_LIST::process_index_hints() method in the code of the function
   setup_tables().
** At some scenarios this could lead to the choice of a quite inefficient
   execution plan for the base query of the prepared statement.
* maria53rev:3297
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Sun 2011-11-20 12:30:43 +0400&lt;&lt;/style&gt;&gt;
** Fix for lpbug:809849 spatial operations must be KILL-able.
*** Checks for thd-&gt;killed state added to the long loops in geometry calculations.
** per-file comments:
*** sql/gcalc_slicescan.cc
**** Fix for lpbug:809849 spatial operations must be KILL-able.
**** checks for TERMINATED_STATE added.
*** sql/gcalc_slicescan.h
**** Fix for lpbug:809849 spatial operations must be KILL-able.
**** defines added to include checks for termination in the
     library.
*** sql/gcalc_tools.cc
**** Fix for lpbug:809849 spatial operations must be KILL-able.
**** checks for TERMINATED_STATE added.
*** sql/gcalc_tools.h
**** Fix for lpbug:809849 spatial operations must be KILL-able.
**** TERMINATED_STATE pointers added.
*** sql/item_geofunc.cc
**** Fix for lpbug:809849 spatial operations must be KILL-able.
*** sql/item_geofunc.h
**** Fix for lpbug:809849 spatial operations must be KILL-able.
* maria53rev:3296
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Fri 2011-11-18 13:32:21 -0800&lt;&lt;/style&gt;&gt;
** Fixed lpbug:891995
** This bug in the function setup_semijoin_dups_elimination() could 
   lead to invalid choice of the sequence of tables for which semi-join
   duplicate elimination was applied.
* maria53rev:3295
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Fri 2011-11-18 09:35:51 -0800&lt;&lt;/style&gt;&gt;
** Fixed lpbug:891953
** Due to this bug the function SEL_IMERGE::or_sel_tree_with_checks()
   could build an inconsistent merge tree if one of the SEL_TREEs in the
   resulting index merge happened to contain a full key range.
** This could trigger an assertion failure.
* maria53rev:3294
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Fri 2011-11-18 18:15:06 +0400&lt;&lt;/style&gt;&gt;
** unused variable removed.
* maria53rev:3293
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Fri 2011-11-18 17:56:42 +0400&lt;&lt;/style&gt;&gt;
** GCALC_CHECK_WITH_FLOAT disabled.
** That&#39;s not a good option for an onrdinary user.
* maria53rev:3292
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Fri 2011-11-18 04:41:25 -0800&lt;&lt;/style&gt;&gt;
** Fixed lpbug:800184
** The function key_and() erroneously called SEL_ARG::increment_use_count()
   when SEL_ARG::incr_refs() should had been called. This could lead to
   wrong values of use_count for some SEL_ARG trees.
* maria53rev:3291 [merge]
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Thu 2011-11-17 08:00:22 -0800&lt;&lt;/style&gt;&gt;
** Merge.
** maria53rev:3287.1.1
   &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Thu 2011-11-17 03:24:20 -0800&lt;&lt;/style&gt;&gt;
*** Corrected the fix for lpbug:891052
* maria53rev:3290
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Thu 2011-11-17 18:03:47 +0400&lt;&lt;/style&gt;&gt;
** small fixes to make compiler happy.
* maria53rev:3289
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Thu 2011-11-17 17:12:58 +0400&lt;&lt;/style&gt;&gt;
** test results updated.
* maria53rev:3288 [merge]
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Thu 2011-11-17 14:27:00 +0400&lt;&lt;/style&gt;&gt;
** merging.
** maria53rev:2978.3.42 [merge]
   &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Sat 2011-11-12 19:56:29 +0400&lt;&lt;/style&gt;&gt;
*** merging.
** maria53rev:2978.3.41
   &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Sun 2011-10-16 21:16:53 +0500&lt;&lt;/style&gt;&gt;
*** code cleanup.
** maria53rev:2978.3.40
   &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Sun 2011-10-16 19:55:37 +0500&lt;&lt;/style&gt;&gt;
*** GIS code cleanup.
** maria53rev:2978.3.39
   &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Fri 2011-10-14 18:37:40 +0500&lt;&lt;/style&gt;&gt;
*** #define added
** maria53rev:2978.3.38
   &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Fri 2011-10-14 17:57:07 +0500&lt;&lt;/style&gt;&gt;
*** repeating calcualtions eliminated.
** maria53rev:2978.3.37
   &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Fri 2011-10-14 16:10:55 +0500&lt;&lt;/style&gt;&gt;
*** GIS code.
*** Forward calculations introduced.
*** per-file comments:
**** sql/gcalc_slicescan.cc
**** sql/gcalc_slicescan.h
**** sql/gcalc_tools.cc
**** sql/gcalc_tools.h
**** sql/item_geofunc.cc
** maria53rev:2978.3.36
   &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Thu 2011-10-06 17:41:28 +0500&lt;&lt;/style&gt;&gt;
*** Copyright notices fixed.
** maria53rev:2978.3.35
   &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Wed 2011-10-05 14:45:39 +0500&lt;&lt;/style&gt;&gt;
*** Valgrind warning fixed.
*** Coordinate size limitation removed.
*** per-file comments:
**** mysql-test/r/gis-precise.result
***** test result updated.
**** sql/gcalc_slicescan.cc
***** Check coordinate extent to pick better precidion in the ::set_double()
**** sql/gcalc_slicescan.h
***** free_list() can lead to valgrind warnig. Fixed
**** sql/gcalc_tools.cc
***** free_list() call changed.
** maria53rev:2978.3.34
   &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Tue 2011-10-04 15:29:39 +0500&lt;&lt;/style&gt;&gt;
*** GIS code cleanup.
*** GCALC_xxx macros fixed for the GCALC_DBUG_OFF case.
*** per-file comments:
**** sql/gcalc_slicescan.h
***** GIS code cleanup.
** maria53rev:2978.3.33
   &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Tue 2011-10-04 15:01:21 +0500&lt;&lt;/style&gt;&gt;
*** GIS library code cleanup.
*** GCALC_DBUG_OFF and related infrastructure defined so we can enable/disable debugging conveniently.
*** per-file comments:
**** sql/gcalc_slicescan.cc
***** GIS library code cleanup.
**** sql/gcalc_slicescan.h
***** GIS library code cleanup.
**** sql/gcalc_tools.cc
***** GIS library code cleanup.
**** sql/gcalc_tools.h
***** GIS library code cleanup.
** maria53rev:2978.3.32
   &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Fri 2011-09-23 17:00:36 +0500&lt;&lt;/style&gt;&gt;
*** lpbug:857087 Wrong result with ST_INTERSECTS and LINESTRINGs
*** Line autointersection point was treated as if it doesn&#39;t belong to the line.
*** It&#39;s in some way logical, but seems to confuse people. Fixed.
*** per_file_comments:
**** mysql-test/r/gis-precise.result
***** lpbug:857087 Wrong result with ST_INTERSECTS and LINESTRINGs
***** test result updated.
**** mysql-test/t/gis-precise.test
***** lpbug:857087 Wrong result with ST_INTERSECTS and LINESTRINGs
***** test case added.
**** sql/gcalc_tools.cc
***** lpbug:857087 Wrong result with ST_INTERSECTS and LINESTRINGs
***** Point of line autointersection handled as it belongs to the line.
**** sql/gcalc_tools.h
***** lpbug:857087 Wrong result with ST_INTERSECTS and LINESTRINGs
***** Gcalc_function::set_i_state() added
** maria53rev:2978.3.31
   &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Fri 2011-09-23 15:36:56 +0500&lt;&lt;/style&gt;&gt;
*** lpbug:857050 ST_WITHIN returns wrong result with MULTIPOINT and POLYGON
    actually only testcase added as the bug was fixed already.
*** modified:
**** mysql-test/r/gis-precise.result
***** lpbug:857050 ST_WITHIN returns wrong result with MULTIPOINT and POLYGON
***** test result updated.
**** mysql-test/t/gis-precise.test
***** lpbug:857050 ST_WITHIN returns wrong result with MULTIPOINT and POLYGON
***** test case added.
**** sql/gcalc_tools.cc
***** superfluous variable removed.
** maria53rev:2978.3.30
   &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Fri 2011-09-23 15:25:48 +0500&lt;&lt;/style&gt;&gt;
*** fix for lpbug:857051 ST_EQUALS returns TRUE on two nonidentical MULTIPOINTs
*** The &#39;single point&#39; event was forgotten in the relation&#39;s calculation
*** per-file comments:
**** mysql-test/r/gis-precise.result
***** fix for lpbug:857051 ST_EQUALS returns TRUE on two nonidentical MULTIPOINTs
***** test result updated.
**** mysql-test/t/gis-precise.test
***** fix for lpbug:857051 ST_EQUALS returns TRUE on two nonidentical MULTIPOINTs
***** test case added.
**** sql/gcalc_tools.cc
***** fix for lpbug:857051 ST_EQUALS returns TRUE on two nonidentical MULTIPOINTs
***** scev_single_point is properly handled.
** maria53rev:2978.3.29
   &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Fri 2011-09-23 15:05:36 +0500&lt;&lt;/style&gt;&gt;
*** fix for 857050 ST_WITHIN returns wrong result with MULTIPOINT and POLYGON
    return GEOMETRYCOLLECTION EMPTY, not NULL for the query
*** per-file comments:
**** mysql-test/r/gis.result
***** fix for 857050 ST_WITHIN returns wrong result with MULTIPOINT and POLYGON
      test result updated.
**** sql/spatial.cc
***** fix for 857050 ST_WITHIN returns wrong result with MULTIPOINT and POLYGON
      return of the Geometry::envelope() changed for the empty geometry.
** maria53rev:2978.3.28
   &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Thu 2011-09-22 18:53:36 +0500&lt;&lt;/style&gt;&gt;
*** fixed bugs
**** lpbug:855485  ST_CROSSES returns different result than PostGIS for overlapping polygons
**** lpbug:855487  ST_WITHIN returns wrong result for partially overlapping polygons
**** lpbug:855492  ST_WITHIN returns TRUE on point on the edge of a polygon
**** lpbug:855497  ST_ENVELOPE of GEOMETRYCOLLECTION EMPTY returns NULL and not GEOMETRYCOLLECTION EMPTY
**** lpbug:855503  ST_EQUALS reports TRUE between a POLYGON and a MULTILINESTRING
**** lpbug:855505  ST_TOUCHES reports TRUE for intersecting polygon and linestring
*** Changed the way weird functions like Crosses or Touches treated.
*** Added BORDER handling to the Gcalc_function.
*** per-file comments:
**** mysql-test/r/gis-precise.result
***** GIS bugs fixed.
***** test result updated.
**** mysql-test/t/gis-precise.test
***** GIS bugs fixed.
***** test cases added.
**** sql/gcalc_slicescan.h
***** GIS bugs fixed.
**** sql/gcalc_tools.cc
***** GIS bugs fixed.
**** sql/gcalc_tools.h
***** GIS bugs fixed.
**** sql/item_create.cc
***** GIS bugs fixed.
**** sql/item_geofunc.cc
***** GIS bugs fixed.
**** sql/item_geofunc.h
***** GIS bugs fixed.
**** sql/spatial.cc
***** GIS bugs fixed.
** maria53rev:2978.3.27
   &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Wed 2011-09-21 13:26:21 +0500&lt;&lt;/style&gt;&gt;
*** lpbug:855336      ST_LENGTH does not work on GEOMETRYCOLLECTIONs fixed.
*** per-file comments:
**** mysql-test/r/gis.result
***** lpbug:855336      ST_LENGTH does not work on GEOMETRYCOLLECTIONs fixed.
***** test result updated.
**** mysql-test/t/gis.test
***** lpbug:855336      ST_LENGTH does not work on GEOMETRYCOLLECTIONs fixed.
***** test case added.
**** sql/item_geofunc.cc
***** lpbug:855336      ST_LENGTH does not work on GEOMETRYCOLLECTIONs fixed.
***** geom_length() call fixed.
**** sql/spatial.cc
***** lpbug:855336      ST_LENGTH does not work on GEOMETRYCOLLECTIONs fixed.
***** Geometry_collection::geom_length implemented.
**** sql/spatial.h
***** lpbug:855336      ST_LENGTH does not work on GEOMETRYCOLLECTIONs fixed.
***** Geometry_collection::geom_length declaration added.
** maria53rev:2978.3.26
   &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Wed 2011-09-21 12:50:03 +0500&lt;&lt;/style&gt;&gt;
*** fix for lpbug:848926 GIS functions return &#34;GEOMETRYCOLLECTION()&#34; instead of &#34;GEOMETRYCOLLECTION EMPTY&#34;
*** per-file comments:
**** mysql-test/r/gis.result
***** fix for lpbug:848926 GIS functions return &#34;GEOMETRYCOLLECTION()&#34; instead of &#34;GEOMETRYCOLLECTION EMPTY&#34;
***** test result updated.
**** mysql-test/t/gis.test
***** fix for lpbug:848926 GIS functions return &#34;GEOMETRYCOLLECTION()&#34; instead of &#34;GEOMETRYCOLLECTION EMPTY&#34;
***** test case added.
**** sql/gstream.cc
***** fix for lpbug:848926 GIS functions return &#34;GEOMETRYCOLLECTION()&#34; instead of &#34;GEOMETRYCOLLECTION EMPTY&#34;
***** lookup_next_word() implemented.
**** sql/gstream.h
***** fix for lpbug:848926 GIS functions return &#34;GEOMETRYCOLLECTION()&#34; instead of &#34;GEOMETRYCOLLECTION EMPTY&#34;
***** lookup_next_word() added.
**** sql/spatial.cc
***** fix for lpbug:848926 GIS functions return &#34;GEOMETRYCOLLECTION()&#34; instead of &#34;GEOMETRYCOLLECTION EMPTY&#34;
***** name changed for the empty geometry.
**** sql/spatial.h
***** fix for lpbug:848926 GIS functions return &#34;GEOMETRYCOLLECTION()&#34; instead of &#34;GEOMETRYCOLLECTION EMPTY&#34;
***** declarations modified.
** maria53rev:2978.3.25
   &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Wed 2011-09-21 09:29:37 +0500&lt;&lt;/style&gt;&gt;
*** bugs fixed
**** lpbug:855253 Compiler error: gcalc_slicescan.cc:2036: error: suggest parentheses around comparison in operand of .|. in maria-5.3-gis
**** lpbug:850775 ST_AREA does not work on GEOMETRYCOLLECTIONs in maria-5.3-gis
*** per-file comments:
**** mysql-test/r/gis.result
***** test result updated.
**** mysql-test/t/gis.test
***** test case added for 850775.
**** sql/gcalc_slicescan.cc
***** compiler error fixed.
**** sql/spatial.cc
***** ST_AREA implementation for GEOMETRY_COLLECTION, POINT and LINESTRING.
**** sql/spatial.h
***** area() declarations added.
** maria53rev:2978.3.24
   &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Wed 2011-09-21 00:04:41 +0500&lt;&lt;/style&gt;&gt;
*** several bugs fixed here.
**** lpbug:849789  Second assertion `m_poly_borders-&gt;next&#39; failed in Gcalc_operation_reducer::count_slice in maria-5.3-gis
**** lpbug:849791  Fourth assertion `n &gt; 0 &amp;&amp; n &lt; SINUSES_CALCULATED*2+1&#39; in get_n_sincos
**** lpbug:849789  Second assertion `m_poly_borders-&gt;next&#39; failed in Gcalc_operation_reducer::count_slice in maria-5.3-gis
**** lpbug:848901  Assertion `fabs(cur_isc-&gt;x-m_cur_intersection-&gt;x) + fabs(cur_isc-&gt;y-m_cur_intersection-&gt;y) &lt; 0.000000000001&#39; failed in Gcalc_scan_iterator::intersection_scan() in maria-5.3-gis
*** per-file comments:
**** mysql-test/r/gis-precise.result
***** test result updated.
**** mysql-test/r/gis.result
***** test result updated.
**** sql/gcalc_slicescan.cc
***** bugfixes.
**** sql/gcalc_slicescan.h
***** bugfixes.
**** sql/gcalc_tools.cc
***** bugfixes.
**** sql/gcalc_tools.h
***** bugfixes.
**** sql/item_geofunc.cc
***** bugfixes.
**** sql/spatial.cc
***** bugfixes.
** maria53rev:2978.3.23
   &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Tue 2011-09-13 18:26:16 +0500&lt;&lt;/style&gt;&gt;
*** Fix for lpbug:848939 Wrong result with ##ST_INTERSECTION## between linestrings and a polygon in 5.3-gis
**** Coordinates were mistakenly reversed for MULTIPOINT.
*** per-file comments:
**** mysql-test/r/gis-precise.result
***** Fix for lpbug:848939 Wrong result with ST_INTERSECTION between linestrings and a polygon in 5.3-gis
***** test result updated.
**** mysql-test/t/gis-precise.test
***** Fix for lpbug:848939 Wrong result with ST_INTERSECTION between linestrings and a polygon in 5.3-gis
***** test case added.
**** sql/gcalc_tools.cc
***** Fix for lpbug:848939 Wrong result with ST_INTERSECTION between linestrings and a polygon in 5.3-gis
***** coordinates set in the proper order.
** maria53rev:2978.3.22
   &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Tue 2011-09-13 15:19:55 +0500&lt;&lt;/style&gt;&gt;
*** Fix for lpbug:848901 Assertion `fabs(cur_isc-&gt;x-m_cur_intersection-&gt;x) + fabs(cur_isc-&gt;y-m_cur_intersection-&gt;y) &lt; 0.000000000001&#39; failed in Gcalc_scan_iterator::intersection_scan() in maria-5.3-gis
*** That assertion&#39;s check was too tight. Released it a bit.
*** per-file comments:
**** mysql-test/r/gis-precise.result
***** Fix for lpbug:848901
***** test result updated.
**** mysql-test/t/gis-precise.test
***** Fix for lpbug:848901
***** test case added.
**** sql/gcalc_slicescan.cc
***** Fix for lpbug:848901
***** The DBUG_ASSERT check is too tight here.
** maria53rev:2978.3.21
   &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Tue 2011-09-13 13:59:11 +0500&lt;&lt;/style&gt;&gt;
*** Fix for few similar bugs:
**** lpbug:841622 Assertion `t-&gt;rp-&gt;type == Gcalc_function::shape_line&#39; failed in Gcalc_operation_reducer::end_line in maria-5.3-gi
**** lpbug:841625 Assertion `m_poly_borders-&gt;next&#39; failed in Gcalc_operation_reducer::count_slice in maria-5.3-gis
**** lpbug:841638 Assertion `!m_prev || m_prev-&gt;x != x || m_prev-&gt;y != y&#39; failed in Gcalc_shape_transporter::int_add_point in maria-5.3-gis
**** lpbug:841662 Third assertion `n &gt; 0 &amp;&amp; n &lt; SINUSES_CALCULATED*2+1&#39; in get_n_sincos
**** lpbug:841745 Assertion `!sp0-&gt;is_bottom()&#39; failed in Gcalc_scan_iterator::find_intersections in maria-5.3-gis
*** They mostly was caused by inprecision of double arithmetic.
**** Fixed by changes in how to handle multiple intersections to keep their order right.
**** Also ST_DISTANCE(GEOM, EMPTY_GEOM) was defined as NULL.
*** per-file comments:
**** mysql-test/r/gis-precise.result
***** GIS bugfixes.
****** test result updated.
**** mysql-test/t/gis-precise.test
***** GIS bugfixes.
****** test cases added.
**** sql/gcalc_slicescan.cc
***** GIS bugfixes.
****** If intersections are close, add order checks to cope with the
       double calcualtions imprecision.
**** sql/gcalc_slicescan.h
***** GIS bugfixes.
****** n_row parameter added to intersection to check their order.
**** sql/item_geofunc.cc
***** GIS bugfixes.
****** ST_DISTANCE(GEOM, EMPTY_GEOM) returns NULL.
** maria53rev:2978.3.20
   &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Mon 2011-09-05 09:49:46 +0500&lt;&lt;/style&gt;&gt;
*** lpbug:839327 Crash in Gcalc_operation_reducer::end_couple with ST_UNION and MULTIPOLYGONs in 5.3-gis.
*** When edges of a polygon coicide, it can form an pike, that is turned into a line after an operation.
*** In this case a former polygon point can be an end of a single line, and that case wasn&#39;t properly handled.
*** per-file comments:
**** mysql-test/r/gis-precise.result
***** lpbug:839327 Crash in Gcalc_operation_reducer::end_couple with ST_UNION and MULTIPOLYGONs in 5.3-gis.
****** test result updated.
**** mysql-test/t/gis-precise.test
***** lpbug:839327 Crash in Gcalc_operation_reducer::end_couple with ST_UNION and MULTIPOLYGONs in 5.3-gis.
****** test case added.
**** sql/gcalc_tools.cc
***** lpbug:839327 Crash in Gcalc_operation_reducer::end_couple with ST_UNION and MULTIPOLYGONs in 5.3-gis.
****** in the scev_two_ends case check if we have single line ending on a polygon node.
** maria53rev:2978.3.19
   &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Mon 2011-09-05 09:13:58 +0500&lt;&lt;/style&gt;&gt;
*** lpbug:839318 Crash in Gcalc_scan_iterator::point::get_shape with ST_DISTANCE and MULTILINESTRING in maria-5.3-gis.
**** wrong variable was used as a result of inattentive copypaste.
*** per-file comments:
**** mysql-test/r/gis-precise.result
***** lpbug:839318 Crash in Gcalc_scan_iterator::point::get_shape with ST_DISTANCE and MULTILINESTRING in maria-5.3-gis.
***** test result updated.
**** mysql-test/t/gis-precise.test
***** lpbug:839318 Crash in Gcalc_scan_iterator::point::get_shape with ST_DISTANCE and MULTILINESTRING in maria-5.3-gis.
***** test case added.
**** sql/item_geofunc.cc
***** lpbug:839318 Crash in Gcalc_scan_iterator::point::get_shape with ST_DISTANCE and MULTILINESTRING in maria-5.3-gis.
***** use &#39;ev&#39; variable instead of the &#39;evpos&#39;.
** maria53rev:2978.3.18
   &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Sun 2011-09-04 23:48:17 +0500&lt;&lt;/style&gt;&gt;
*** lpbug:839341 100% CPU usage with ST_UNION in maria-5.3-gis.
**** Line loops weren&#39;t recognized when collect results.
**** Fixed by checking if we got the same beginning point of the line.
*** per-file comments:
**** mysql-test/r/gis-precise.result
***** lpbug:839341 100% CPU usage with ST_UNION in maria-5.3-gis.
***** test result updated.
**** mysql-test/t/gis-precise.test
***** lpbug:839341 100% CPU usage with ST_UNION in maria-5.3-gis.
***** test case added.
**** sql/gcalc_tools.cc
***** lpbug:839341 100% CPU usage with ST_UNION in maria-5.3-gis.
***** check if we get the beginning node of the linestring, then cut the loop.
** maria53rev:2978.3.17
   &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Sun 2011-09-04 19:11:04 +0500&lt;&lt;/style&gt;&gt;
*** lpbug:801466 ST_INTERSECTION() returns invalid value on empty intersection in maria-5.3-gis.
**** We didn&#39;t implement an empty geometry. And returning NULL instead of it is not
     quite correct. So here is the implementation of the empty value as GEOMETRYCOLLECTION().
*** per-file comments:
**** mysql-test/r/gis-precise.result
***** lpbug:801466 ST_INTERSECTION() returns invalid value on empty intersection in maria-5.3-gis.
****** test result updated.
**** mysql-test/r/gis.result
***** lpbug:801466 ST_INTERSECTION() returns invalid value on empty intersection in maria-5.3-gis.
****** test result updated.
**** mysql-test/t/gis-precise.test
***** lpbug:801466 ST_INTERSECTION() returns invalid value on empty intersection in maria-5.3-gis.
****** test case added.
**** mysql-test/t/gis.test
***** lpbug:801466 ST_INTERSECTION() returns invalid value on empty intersection in maria-5.3-gis.
****** test case added.
**** sql/field.cc
***** lpbug:801466 ST_INTERSECTION() returns invalid value on empty intersection in maria-5.3-gis.
****** store GEOMETRYCOLLECTION() properly.
**** sql/gcalc_tools.cc
***** lpbug:801466 ST_INTERSECTION() returns invalid value on empty intersection in maria-5.3-gis.
****** create the GEOMETRYCOLLECTION() for the empty result.
**** sql/gstream.h
***** lpbug:801466 ST_INTERSECTION() returns invalid value on empty intersection in maria-5.3-gis.
****** next_symbol() added.
**** sql/spatial.cc
***** lpbug:801466 ST_INTERSECTION() returns invalid value on empty intersection in maria-5.3-gis.
****** code modified to handle 0 geometries in the GEOMETRYCOLLECTION properly.
** maria53rev:2978.3.16
   &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Fri 2011-09-02 09:38:17 +0500&lt;&lt;/style&gt;&gt;
*** lpbug:801560 and lpbug:802194
**** tests added.
*** per-file comments:
**** mysql-test/r/gis-precise.result
***** lpbug:801560 and lpbug:802194
****** test result updated.
**** mysql-test/t/gis-precise.test
***** lpbug:801560 and lpbug:802194
****** test case added.
** maria53rev:2978.3.15
   &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Thu 2011-09-01 11:44:56 +0500&lt;&lt;/style&gt;&gt;
*** PostGIS-style &#39;same point&#39; handling.
** maria53rev:2978.3.14
   &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Wed 2011-07-13 14:57:27 +0500&lt;&lt;/style&gt;&gt;
*** Fix for lpbug:804266 Memory corruption/valgrind warning/crash in move_hole() with ST_UNION.
*** Second smaller hole in the polygon got link to the bigger one as it&#39;s the
    outer ring. Fixed by specifying the outer ring explicitly.
*** per-file comments:
**** mysql-test/r/gis-precise.result
***** Fix for lpbug:804266 Memory corruption/valgrind warning/crash in move_hole() with ST_UNION.
****** test result updated.
**** mysql-test/t/gis-precise.test
***** Fix for lpbug:804266 Memory corruption/valgrind warning/crash in move_hole() with ST_UNION.
****** test case added.
**** sql/gcalc_tools.cc
***** Fix for lpbug:804266 Memory corruption/valgrind warning/crash in move_hole() with ST_UNION.
****** specify the outer ring explicitly in the get_polygon_result parameter.
**** sql/gcalc_tools.h
***** Fix for lpbug:804266 Memory corruption/valgrind warning/crash in move_hole() with ST_UNION.
****** add the outer ring as a parameter to the get_polygon_result.
** maria53rev:2978.3.13
   &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Tue 2011-07-12 11:21:20 +0500&lt;&lt;/style&gt;&gt;
*** Fix for lpbug:801217 Assertion `t1-&gt;result_range&#39; in Gcalc_operation_reducer::end_couple.
**** We cannot cut a line from a polygon. So if the polygon fits the condition, and
     the intersection of a line and the polygon doesn&#39;t, we just skip the line.
**** That rule wasn&#39;t applied if the line start was inside the polygon, which leaded
     to the assertion.
*** per-file comments:
**** mysql-test/r/gis-precise.result
***** Fix for lpbug:801217 Assertion `t1-&gt;result_range&#39; in Gcalc_operation_reducer::end_couple.
****** test result updated.
**** mysql-test/t/gis-precise.test
***** Fix for lpbug:801217 Assertion `t1-&gt;result_range&#39; in Gcalc_operation_reducer::end_couple.
****** test case added.
**** sql/gcalc_tools.cc
***** Fix for lpbug:801217 Assertion `t1-&gt;result_range&#39; in Gcalc_operation_reducer::end_couple.
****** Don&#39;t mark the line as a border if it&#39;s inside a polygon that fits the result condition.
** maria53rev:2978.3.12
   &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Fri 2011-07-08 15:38:15 +0500&lt;&lt;/style&gt;&gt;
*** Fix for lpbug:804259 Second assertion in Gis_geometry_collection::init_from_opresult.
**** A polygon has no right to have holes that are actually points.
**** So just skip them when we collect the result of an operation.
*** per-file comments:
**** mysql-test/r/gis-precise.result
***** Fix for lpbug:804259 Second assertion in Gis_geometry_collection::init_from_opresult.
****** test result updated.
**** mysql-test/t/gis-precise.test
***** Fix for lpbug:804259 Second assertion in Gis_geometry_collection::init_from_opresult.
****** test case added.
**** sql/gcalc_tools.cc
***** Fix for lpbug:804259 Second assertion in Gis_geometry_collection::init_from_opresult.
****** Skip the point in the result if it&#39;s the hole inside a polygon.
** maria53rev:2978.3.11
   &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Thu 2011-07-07 21:30:51 +0500&lt;&lt;/style&gt;&gt;
*** Fix for lpbug:805860 Second assertion Assertion `n &gt; 0 &amp;&amp; n &lt; SINUSES_CALCULATED*2+1&#39; in get_n_sincos.
**** Just typo-style mistake. Should be &#39;||&#39; instead of &#39;&amp;&amp;&#39;.
*** per-file comments:
**** mysql-test/r/gis-precise.result
***** Fix for lpbug:805860 Second assertion Assertion `n &gt; 0 &amp;&amp; n &lt; SINUSES_CALCULATED*2+1&#39; in get_n_sincos.
****** test result updated.
**** mysql-test/t/gis-precise.test
***** Fix for lpbug:805860 Second assertion Assertion `n &gt; 0 &amp;&amp; n &lt; SINUSES_CALCULATED*2+1&#39; in get_n_sincos.
****** test case added.
**** sql/item_geofunc.cc
***** Fix for lpbug:805860 Second assertion Assertion `n &gt; 0 &amp;&amp; n &lt; SINUSES_CALCULATED*2+1&#39; in get_n_sincos.
****** condition fixed.
** maria53rev:2978.3.10
   &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Thu 2011-07-07 16:59:45 +0500&lt;&lt;/style&gt;&gt;
*** Fix for lpbug:804324 Assertion 0 in Gcalc_scan_iterator::pop_suitable_intersection
**** There were actually two bugs. One was when the line that intersects itself
     the intersection point treated as it doesn&#39;t belong to the line.
**** Second when edges partly coincide, wrong result produced when we try to find their
     intersection.
*** per-file comments:
**** mysql-test/r/gis-precise.result
***** Fix for lpbug:804324 Assertion 0 in Gcalc_scan_iterator::pop_suitable_intersection
****** test result updated.
**** mysql-test/t/gis-precise.test
***** Fix for lpbug:804324 Assertion 0 in Gcalc_scan_iterator::pop_suitable_intersection
****** test case added.
**** sql/gcalc_slicescan.cc
***** Fix for lpbug:804324 Assertion 0 in Gcalc_scan_iterator::pop_suitable_intersection
****** skip the intersection if it just line that intersects itself.
**** sql/gcalc_tools.cc
***** Fix for lpbug:804324 Assertion 0 in Gcalc_scan_iterator::pop_suitable_intersection
****** if edges coincide, just pick the first coinciding poing as an intersection.
** maria53rev:2978.3.9
   &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Tue 2011-07-05 19:42:35 +0500&lt;&lt;/style&gt;&gt;
*** lpbug:804305 Crash in wkb_get_double with ST_INTERSECTION.
*** That crash happened with the complicated topology of the result.
*** If we found a hole in a polygon whose outside border was already
    found, we need to paste the hole right after it and respectively
    shift polygons after it. Also we need to update poly_position fields
    in these polygons. That last thing wasn&#39;t properly done that led to the
    crash.
*** To fix that we keep the list of the found polygons and update the
    poly_positions that are bigger or equal to where we placed the next hole.
*** per-file comments:
**** mysql-test/r/gis-precise.result
***** lpbug:804305 Crash in wkb_get_double with ST_INTERSECTION.
****** test result updated.
**** mysql-test/t/gis-precise.test
***** lpbug:804305 Crash in wkb_get_double with ST_INTERSECTION.
****** test result added.
**** sql/gcalc_tools.cc
***** lpbug:804305 Crash in wkb_get_double with ST_INTERSECTION.
****** keep the list of the found polygons and update their poly_position fields respectively.
**** sql/gcalc_tools.h
***** lpbug:804305 Crash in wkb_get_double with ST_INTERSECTION.
****** Gcalc_result_receiver::move_hole interface changed.
** maria53rev:2978.3.8
   &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Mon 2011-07-04 16:17:34 +0500&lt;&lt;/style&gt;&gt;
*** fix for lpbug:801212 Assertion with ST_INTERSECTION on NULL values
**** The ::val_str() method has to return NULL if it calculated
     the null_value, not just set the related flag.
*** per-file comments:
**** mysql-test/r/gis-precise.result
***** fix for lpbug:801212 Assertion with ST_INTERSECTION on NULL values
****** test result updated.
**** mysql-test/t/gis-precise.test
***** fix for lpbug:801212 Assertion with ST_INTERSECTION on NULL values
****** test case added.
**** sql/item_geofunc.cc
***** fix for lpbug:801212 Assertion with ST_INTERSECTION on NULL values
****** return NULL from the val_str if we get the null_value.
** maria53rev:2978.3.7
   &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Mon 2011-07-04 16:03:36 +0500&lt;&lt;/style&gt;&gt;
*** lpbug:801199 Infinite recursion in Gcalc_function::count_internal with ST_BUFFER over MULTIPOINT
**** Collections were treated mistakenly, so the counter for the final UNION operation
     received the wrong value.
**** As a fix we implement Item_func_buffer::Transporter::start_collection() method,
     where we set the proper operation and the operand counter.
     start_poly() and start_line() were also modified to function correctly for the 
     polygon as a part of a collection.
*** per-file comments:
**** mysql-test/r/gis-precise.result
***** lpbug:801199 Infinite recursion in Gcalc_function::count_internal with ST_BUFFER over MULTIPOINT
****** test result updated.
**** mysql-test/t/gis-precise.test
***** lpbug:801199 Infinite recursion in Gcalc_function::count_internal with ST_BUFFER over MULTIPOINT
****** test case added.
**** sql/item_geofunc.cc
***** lpbug:801199 Infinite recursion in Gcalc_function::count_internal with ST_BUFFER over MULTIPOINT
****** start_collection() implemented.
**** sql/item_geofunc.h
***** lpbug:801199 Infinite recursion in Gcalc_function::count_internal with ST_BUFFER over MULTIPOINT
****** Item_func_buffer::Transporter::start_collection() defined.
** maria53rev:2978.3.6
   &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Thu 2011-06-30 19:24:52 +0500&lt;&lt;/style&gt;&gt;
*** fix for lpbug:201189 ST_BUFFER asserts if radius = 0.
**** Internal caclucations can&#39;t handle zero distance properly.
**** As the ST_BUFFER(geom, 0) is in fact NOOP, we&#39;ll just return the
****** &#39;geom&#39; as the result here.
*** per-file comments:
**** mysql-test/r/gis-precise.result
***** fix for lpbug:201189 ST_BUFFER asserts if radius = 0.
****** test result updated.
**** mysql-test/t/gis-precise.test
***** fix for lpbug:201189 ST_BUFFER asserts if radius = 0.
****** test case added.
**** sql/item_geofunc.cc
***** fix for lpbug:201189 ST_BUFFER asserts if radius = 0.
****** return the first argument as the result of the ST_BUFFER, if
       the distance is 0 there.
** maria53rev:2978.3.5
   &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Thu 2011-06-30 18:18:27 +0500&lt;&lt;/style&gt;&gt;
*** fix for lpbug:801243 Assertion `(0)&#39; failed in Gis_geometry_collection::init_from_opresult on ST_UNION 
**** If the result contains a polygon with a hole, consequitive shapes weren&#39;t calculated
     properly, as the hole appeared as shape in the result, but actually it&#39;s a single shape
     with the surrounding polygon. It&#39;s more natural to use the size of the result as
     a border instead of the number of resulting shapes.
*** per-file comments:
**** mysql-test/r/gis-precise.result
***** fix for lpbug:801243 Assertion `(0)&#39; failed in Gis_geometry_collection::init_from_opresult on ST_UNION 
***** test result updated.
**** mysql-test/t/gis-precise.test
***** fix for lpbug:801243 Assertion `(0)&#39; failed in Gis_geometry_collection::init_from_opresult on ST_UNION 
***** test case added.
**** sql/spatial.cc
***** fix for lpbug:801243 Assertion `(0)&#39; failed in Gis_geometry_collection::init_from_opresult on ST_UNION 
***** check the data lenght instead of number of shapes.
**** sql/spatial.h
***** fix for lpbug:801243 Assertion `(0)&#39; failed in Gis_geometry_collection::init_from_opresult on ST_UNION 
***** check the data lenght instead of number of shapes.
** maria53rev:2978.3.4 [merge]
   &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Mon 2011-06-20 00:21:41 +0500&lt;&lt;/style&gt;&gt;
*** gis-related tests fixes.
*** merging.
*** maria53rev:2978.3.3
    &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Tue 2011-06-14 11:20:48 +0500&lt;&lt;/style&gt;&gt;
**** Precision spatial function tests added.
*** maria53rev:2978.3.2
    &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Thu 2011-05-05 14:30:59 +0500&lt;&lt;/style&gt;&gt;
**** forgotten h-files added to the NOINST_HEADERS
*** maria53rev:2978.3.1
    &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Wed 2011-05-04 23:20:17 +0500&lt;&lt;/style&gt;&gt;
**** Precise GIS functions added.
* maria53rev:3287
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Thu 2011-11-17 01:00:46 -0800&lt;&lt;/style&gt;&gt;
** Fixed lpbug:891052.
** Some optimizer switches were missing in the help lists of mysqld.
* maria53rev:3286
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Thu 2011-11-17 01:25:10 +0200&lt;&lt;/style&gt;&gt;
** Fix lpbug:869036
** Apart from the fix, the patch also adds few more unrelated test
   cases for partial matching, and fixes few typos.
** Analysis:
*** This bug uncovered that partial matching via rowid intersection
    didn&#39;t handle the case when:
**** the left IN argument has some NULLs,
**** there are no non-null value matches, and there is no non-null
     column,
**** the subquery columns that are not covered with the NULLs in
     the left IN argument contain at least one row, such that it
     has NULL values in all columns where the left IN operand has
     no NULLs.
*** In this case there is a partial match.
*** In addition the analysis of the related code uncovered incorrect
    handling of few other related cases.
** Solution:
*** The solution for the bug is to check if there exists a row with
    NULLs in all columns other than the ones having NULL in the
    let IN operand.
*** The check is implemented via checking whether the bitmaps that
    store NULL information in class Ordered_key have a non-empty
    intersection for the relevant columns.
*** The intersection itself is implemented via the function
    bitmap_exists_intersection() in my_bitmap.c.
* maria53rev:3285
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Wed 2011-11-16 06:11:25 -0800&lt;&lt;/style&gt;&gt;
** Fixed lpbug:887479.
** The function setup_semijoin_dups_elimination erroneously assumed
   that if join_cache_level is set to 3 or 4 then the type of the
   access to a table cannot be JT_REF or JT_EQ_REF. This could lead
   to wrong query result sets.
* maria53rev:3284 [merge]
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Tue 2011-11-15 14:35:36 -0800&lt;&lt;/style&gt;&gt;
** Merge.
** maria53rev:3278.1.1
   &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Tue 2011-11-15 13:03:00 -0800&lt;&lt;/style&gt;&gt;
*** Fixed lpbug:889750.
*** If the optimizer switch &#39;semijoin_with_cache&#39; is set to &#39;off&#39; then 
    join cache cannot be used to join inner tables of a semijoin.
*** Also fixed a bug in the function check_join_cache_usage() that led
    to wrong output of the EXPLAIN commands for some test cases.
* maria53rev:3283
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Mon 2011-11-14 19:24:36 +0200&lt;&lt;/style&gt;&gt;
** Fix lpbug:889744
** MariaDB 5.5 merges changes from MySQL 5.5 where all constant
   expressions are wrapped into an Item_cache. As a result, constant
   single-row subqueries were also wrapped in an Item_cache.
   When analyzing the where clause for constant expressions that
   can be evaluated during optimization, subqueries wrapped into
   an Item_cache did not appear as expensive, and were therefore
   evaluated during optimization. Such evaluation is against the
   current architecture of MariaDB 5.3 where subquries are executed
   during the execute phase.
** The patch adds the is_expensive() predicate to Item_cache.
** This makes Item_cache consistent with other wrapping Item
   classes that need to look at the properties of the wrapped
   object.
* maria53rev:3282 [merge]
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Mon 2011-11-14 00:32:21 +0100&lt;&lt;/style&gt;&gt;
** 5.2-&gt;5.3 merge
** maria53rev:2732.46.16 [merge]
   &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Sun 2011-11-13 18:41:45 +0100&lt;&lt;/style&gt;&gt;
*** 5.1-&gt;5.2 merge
*** maria53rev:2643.143.47
    &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Sun 2011-11-13 13:28:35 +0100&lt;&lt;/style&gt;&gt;
**** don&#39;t make feedback_plugin_send.test as &#39;big&#39;
**** don&#39;t assume that the http reply packet will arrive in all in one piece
* maria53rev:3281
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Sun 2011-11-13 12:02:13 +0200&lt;&lt;/style&gt;&gt;
** Fix for lpbug:824425: Prohibiting subqueries in rows for left part of IN/ALL/ANY
** Fix for walk() method of subqueries: always call the method on the subquery.
* maria53rev:3280 [merge]
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Sun 2011-11-13 09:10:45 +0100&lt;&lt;/style&gt;&gt;
** 5.2-&gt;5.3 merge
** maria53rev:2732.46.15 [merge]
   &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Sun 2011-11-13 08:30:03 +0100&lt;&lt;/style&gt;&gt;
*** 5.1-5.2 merge
*** maria53rev:2643.143.46
    &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Sat 2011-11-12 18:40:51 +0100&lt;&lt;/style&gt;&gt;
**** increase feedback plugin version
* maria53rev:3279 [merge]
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Sat 2011-11-12 18:08:12 +0100&lt;&lt;/style&gt;&gt;
** 5.2-&gt;5.3 merge
** maria53rev:2732.46.14 [merge]
   &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Sat 2011-11-12 16:47:14 +0100&lt;&lt;/style&gt;&gt;
*** 5.1 merge
*** maria53rev:2643.143.45
    &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Sat 2011-11-12 16:41:00 +0100&lt;&lt;/style&gt;&gt;
**** feedback plugin:
***** fix for mem_total on windows
***** report the time of the data snapshot
*** maria53rev:2643.143.44
    &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Tue 2011-11-08 23:07:19 +0100&lt;&lt;/style&gt;&gt;
**** typos fixed
***** (thanks viva64.com)
** maria53rev:2732.46.13 [merge]
   &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Fri 2011-11-04 12:41:27 +0200&lt;&lt;/style&gt;&gt;
*** Merge of gcc 4.6 fixes
*** maria53rev:2732.47.2
    &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Thu 2011-10-27 19:18:25 +0300&lt;&lt;/style&gt;&gt;
**** Fix gcc 4.6 warning after merge with 5.1
*** maria53rev:2732.47.1 [merge]
    &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Thu 2011-10-27 17:51:30 +0300&lt;&lt;/style&gt;&gt;
**** 5.1-&gt;5.2 merge (gcc 4.6 warnings and apple hwaddress fixes).
**** maria53rev:2643.143.43
     &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Thu 2011-10-27 15:22:52 +0300&lt;&lt;/style&gt;&gt;
***** Fix gcc 4.6 warnings about assigned but not used variables.
***** Fixed my_gethwaddr.c to allow compilation on Mac OS X.
** maria53rev:2732.46.12
   &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Tue 2011-11-01 12:36:43 +0400&lt;&lt;/style&gt;&gt;
*** lpbug:884184: Wrong result with RIGHT JOIN + derived_merge
****none Make eliminate_tables_for_list() take into account that it is not possible
     to eliminate a table if it is used in the upper-side ON expressions. Example:&lt;&lt;code inline=false&gt;&gt;xxx JOIN (t1 LEFT JOIN t2 ON cond ) ON func(t2.columns)&lt;&lt;/code&gt;&gt;
**** Here it would eliminate t2 which is not possible because of use of t2.columns.
* maria53rev:3278 [merge]
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Sat 2011-11-12 03:57:46 -0800&lt;&lt;/style&gt;&gt;
** Merge.
** maria53rev:3148.1.1
   &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Sat 2011-11-12 02:20:44 -0800&lt;&lt;/style&gt;&gt;
*** Fixed lpbug:823301
*** A bug in the code of the function key_or could lead to a situation
    when performing of an OR operation for one index changes the result
    the operation for another index. This bug is fixed with this patch.
*** Also corrected the specification and the code of the function 
    or_sel_tree_with_checks.
* maria53rev:3277
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Sat 2011-11-12 12:03:27 +0200&lt;&lt;/style&gt;&gt;
** Remove unused variable detected by GCC 4.6.1.
* maria53rev:3276
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Sat 2011-11-12 11:29:12 +0200&lt;&lt;/style&gt;&gt;
** Fix mybug:12329653
*** In MariaDB, when running in ONLY_FULL_GROUP_BY mode,
    the server produced in incorrect error message that there
    is an aggregate function without GROUP BY, for artificially
    created MIN/MAX functions during subquery MIN/MAX optimization.
*** The fix introduces a way to distinguish between artifially
    created MIN/MAX functions as a result of a rewrite, and normal
    ones present in the query. The test for ONLY_FULL_GROUP_BY violation
    now tests in addition if a MIN/MAX function was part of a MIN/MAX
    subquery rewrite.
*** In order to be able to distinguish these MIN/MAX functions, the
    patch introduces an additional flag in Item_in_subselect::in_strategy -
    SUBS_STRATEGY_CHOSEN. This flag is set when the optimizer makes its
    final choice of a subuqery strategy. In order to make the choice
    consistent, access to Item_in_subselect::in_strategy is provided
    via new class methods.
** Fix mybug:12329653
*** In MariaDB, when running in ONLY_FULL_GROUP_BY mode,
    the server produced in incorrect error message that there
    is an aggregate function without GROUP BY, for artificially
    created MIN/MAX functions during subquery MIN/MAX optimization.
*** The fix introduces a way to distinguish between artifially
    created MIN/MAX functions as a result of a rewrite, and normal
    ones present in the query. The test for ONLY_FULL_GROUP_BY violation
    now tests in addition if a MIN/MAX function was part of a MIN/MAX
    subquery rewrite.
*** In order to be able to distinguish these MIN/MAX functions, the
    patch introduces an additional flag in Item_in_subselect::in_strategy -
    SUBS_STRATEGY_CHOSEN. This flag is set when the optimizer makes its
    final choice of a subuqery strategy. In order to make the choice
    consistent, access to Item_in_subselect::in_strategy is provided
    via new class methods.
* maria53rev:3275
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Fri 2011-11-11 14:53:26 -0800&lt;&lt;/style&gt;&gt;
** Fixed lpbug:879871
** The function add_ref_to_table_cond missed updating the value of
   join_tab-&gt;pre_idx_push_select_cond after having updated the value
   of join_tab-&gt;select-&gt;pre_idx_push_select_cond.
* maria53rev:3274 [merge]
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Thu 2011-11-10 13:28:02 -0800&lt;&lt;/style&gt;&gt;
** Merge of the maria-5.3-icp tree into the 5.3 tree
** maria53rev:3256.1.16 [merge]
   &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Tue 2011-11-08 08:04:48 -0800&lt;&lt;/style&gt;&gt;
*** Merge.
** maria53rev:3256.1.15
   &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Mon 2011-11-07 23:30:03 +0400&lt;&lt;/style&gt;&gt;
*** lpbug:887026: Wrong result with ICP, outer join, subquery in maria-5.3-icp
**** Do not push index condition if we&#39;re using a triggered ref access.
** maria53rev:3256.1.14 [merge]
   &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Sun 2011-11-06 13:44:59 -0800&lt;&lt;/style&gt;&gt;
*** Merge.
** maria53rev:3256.1.13
   &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Sun 2011-11-06 01:23:03 -0700&lt;&lt;/style&gt;&gt;
*** Fixed lpbug:886145
*** The bug happened because in some cases the function JOIN::exec
    did not save the value of TABLE::pre_idx_push_select_cond in
    TABLE::select-&gt;pre_idx_push_select_cond for the sort table.
*** Noticed and fixed a bug in the function make_cond_remainder
    that builds the remainder condition after extraction of an index
    pushdown condition from the where condition. The code
    erroneously assumed that the function make_cond_for_table left
    the value of ICP_COND_USES_INDEX_ONLY in sub-condition markers.
*** Adjusted many result files from the regression test suite
    after this fix .
** maria53rev:3256.1.12
   &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Fri 2011-11-04 05:39:45 -0700&lt;&lt;/style&gt;&gt;
*** Fixed lpbug:885168
*** The call of the virtual function cancel_pushed_idx_cond in the code of
    the function test_if_skip_sort_order was misplaced when backporting the
    fix for mybug:58816
** maria53rev:3256.1.11 [merge]
   &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Wed 2011-11-02 01:22:11 -0700&lt;&lt;/style&gt;&gt;
*** Merge.
** maria53rev:3256.1.10
   &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Tue 2011-11-01 07:00:55 -0700&lt;&lt;/style&gt;&gt;
*** Backported the fix and the test case for mybug:12822678 from the mysql-5.6 code line.
*** Fixed a bug in select_describe.
*** Adjusted results for affected test cases.
** maria53rev:3256.1.9
   &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Mon 2011-10-31 01:36:28 -0700&lt;&lt;/style&gt;&gt;
*** Fixed a compilation error.
** maria53rev:3256.1.8
   &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Mon 2011-10-31 01:13:12 -0700&lt;&lt;/style&gt;&gt;
*** Backported the test case for mybug:59843 from the mysql-5.6 code line.
*** (Failed to reproduce the bug in mariadb-5.3).
** maria53rev:3256.1.7
   &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Sun 2011-10-30 06:17:07 -0700&lt;&lt;/style&gt;&gt;
*** Backported the fix and the test case for mybug:59483 from the mysql-5.6 code line.
** maria53rev:3256.1.6
   &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Sun 2011-10-30 04:18:09 -0700&lt;&lt;/style&gt;&gt;
*** Backported the test case for mybug:58838 from mysql-5.6 code line.
*** The bug was fixed by the patches for lpbug:668644 and lpbug:702322 that
    were applied earlier to the mariadb-5.3 code.
** maria53rev:3256.1.5
   &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Sun 2011-10-30 03:34:26 -0700&lt;&lt;/style&gt;&gt;
*** Backported the test case for mybug:59186 from mysql-5.6 code line.
*** The bug was fixed by the patch for lpbug:694092 that was
    applied earlier to the mariadb-5.3 code.
** maria53rev:3256.1.4
   &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Sun 2011-10-30 02:37:10 -0700&lt;&lt;/style&gt;&gt;
*** Backported the test case for mybug:58837 The fix was backported earlier.
** maria53rev:3256.1.3
   &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Sat 2011-10-29 15:36:24 -0700&lt;&lt;/style&gt;&gt;
*** Backported the fix and the test case for mybug:58816 from mysql-5.6 code line.
** maria53rev:3256.1.2 [merge]
   &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Fri 2011-10-28 05:19:45 -0700&lt;&lt;/style&gt;&gt;
*** Merge.
** maria53rev:3256.1.1 [merge]
   &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Fri 2011-10-28 04:07:11 -0700&lt;&lt;/style&gt;&gt;
*** Merge.
*** maria53rev:3015.2.3
    &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Thu 2011-06-02 14:03:02 -0700&lt;&lt;/style&gt;&gt;
**** Applied the patch for mybug:58837 (for the mysql-5.6 code line).
**** This patch fixed the crash in innodb_bug59307.
*** maria53rev:3015.2.2 [merge]
    &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Wed 2011-06-01 20:49:37 -0700&lt;&lt;/style&gt;&gt;
**** Merge.
**** maria53rev:2954.1.6
     &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Wed 2011-06-01 17:41:50 -0700&lt;&lt;/style&gt;&gt;
***** Modified the code backported from mysql 5.6 to make it handle virtual
      columns as well.
**** maria53rev:2954.1.5
     &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Sun 2011-05-29 11:09:05 -0700&lt;&lt;/style&gt;&gt;
***** Backported the test case for mybug:52605
**** maria53rev:2954.1.4
     &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Fri 2011-05-27 20:50:06 -0700&lt;&lt;/style&gt;&gt;
***** Backported the test case for mybug:52660 from mysql code line.
***** Extended the test case to show how MariaDB applies ICP for
      indexes with some components defined on the beginning of fields.
**** maria53rev:2954.1.3
     &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Fri 2011-05-27 17:04:29 -0700&lt;&lt;/style&gt;&gt;
***** Backported the test case for mybug:43618 from mysql code line.
**** maria53rev:2954.1.2
     &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Fri 2011-05-27 15:20:19 -0700&lt;&lt;/style&gt;&gt;
***** Backported the test case for mybug:43617 fixed by the patch for mybug:42580
***** Backported the test case for mybug:49906 fixed by the patch for lpbug:625841
***** Slightly optimized the code of the fix for lpbug:625841
**** maria53rev:2954.1.1
     &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Wed 2011-05-25 16:01:56 -0700&lt;&lt;/style&gt;&gt;
***** Downported InnoDB support of Index Condition Pushdown from MySQL-5.6 code line.
* maria53rev:3273
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Mon 2011-11-07 16:39:02 +0400&lt;&lt;/style&gt;&gt;
** Make subselect_extra_no_semijoin.test run the tests with semijoin=off,
** update test results
* maria53rev:3272
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Fri 2011-11-04 12:04:12 +0200&lt;&lt;/style&gt;&gt;
** Fixed that test doesn&#39;t abort if &#39;var&#39; points to a deleted directory (common case when using &lt;&lt;code&gt;&gt;--mem&lt;&lt;/code&gt;&gt;)
** Better error message if &lt;&lt;code&gt;&gt;--log-bin&lt;&lt;/code&gt;&gt; is used without &lt;&lt;code&gt;&gt;--log-bin-index&lt;&lt;/code&gt;&gt;
* maria53rev:3271
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Fri 2011-11-04 10:14:25 +0200&lt;&lt;/style&gt;&gt;
** Fixed lpbug:884101 &#34;Crash in check_table_is_closed with concurrent workload&#34;
* maria53rev:3270
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Thu 2011-11-03 13:00:25 +0100&lt;&lt;/style&gt;&gt;
** rename binlog_dbug_fsync_sleep -&gt; debug_binlog_fsync_sleep
* maria53rev:3269
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Thu 2011-11-03 12:59:48 +0100&lt;&lt;/style&gt;&gt;
** cast.test: use exact double, to be independent from compiler optimizations
* maria53rev:3268 [merge]
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Wed 2011-11-02 22:06:22 +0400&lt;&lt;/style&gt;&gt;
** Merge
** maria53rev:3262.1.3
   &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Wed 2011-11-02 22:05:08 +0400&lt;&lt;/style&gt;&gt;
*** lpbug:878753: Assertion &#39;0&#39; failed in replace_where_subcondition with derived_merge
**** Remove the assert in replace_where_subcondition (the patch has explanation why)
* maria53rev:3267
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Wed 2011-11-02 20:01:50 +0400&lt;&lt;/style&gt;&gt;
** Change the default @@optimizer_switch settings:
*** More test result updates (the errors are the same, the difference is that
    &#34;at row X&#34; became &#34;at row Y&#34; due to queries with semi-joins producing
    select results in different order)
* maria53rev:3266
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Wed 2011-11-02 19:52:11 +0400&lt;&lt;/style&gt;&gt;
** Fix &#34;unused variable addr&#34; warning
* maria53rev:3265 [merge]
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Wed 2011-11-02 19:37:26 +0400&lt;&lt;/style&gt;&gt;
** Merge
** maria53rev:3262.1.2
   &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Wed 2011-11-02 19:36:08 +0400&lt;&lt;/style&gt;&gt;
*** Change the default @@optimizer_switch settings:
**** More test result updates
* maria53rev:3264 [merge]
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Wed 2011-11-02 13:51:47 +0400&lt;&lt;/style&gt;&gt;
** Merge
** maria53rev:3262.1.1
   &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Wed 2011-11-02 13:48:41 +0400&lt;&lt;/style&gt;&gt;
*** Change the default @@optimizer_switch settings:
**** semijoin=on
**** firstmatch=on
**** loosescan=on
* maria53rev:3263 [merge]
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Wed 2011-11-02 10:05:07 +0200&lt;&lt;/style&gt;&gt;
** Merge of lpbug:872775 fix
*** maria53rev:3248.1.1
    &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Tue 2011-11-01 17:42:52 +0200&lt;&lt;/style&gt;&gt;
**** Fix of lpbug:872775
**** The problem was that merged views has its own nest_level numbering =&gt;
      when we compare nest levels we should take into considiration basis (i.e. 0 level),
      if it is different then nest levels are not comparable.
* maria53rev:3262
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Tue 2011-11-01 18:19:19 +0200&lt;&lt;/style&gt;&gt;
** Fix lpbug:833702
** Analysis:
*** Equality propagation propagated the constant &#39;7&#39; into
    args[0] of the Item_in_optimizer that stands for the
    &#34;&lt; ANY&#34; predicate. At the same the min/max subquery
    rewrite swapped the order of the left and right operands
    of the &#34;&lt;&#34; predicate, but used Item_in_subselect::left_expr.
*** As a result, when the &lt;ANY predicate is executed early in the
    execution phase as a contant condition, instead of a constant
    right (swapped) argument of the &lt; predicate, there was a field
    (t3.a). This field had no data, since the whole predicate is
    considered constant, and it is evaluated before any tables are
    read. Having junk in the field row buffer produced wrong result
** Solution:
*** Fix create_swap to pick the correct Item_in_optimizer left
    argument.
* maria53rev:3261
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Tue 2011-11-01 13:22:09 +0200&lt;&lt;/style&gt;&gt;
** Fix of typo.
* maria53rev:3260
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Tue 2011-11-01 12:04:11 +0400&lt;&lt;/style&gt;&gt;
** lpbug:884631: Table elimination works 5.3 release builds even if turned off
*** Make table elimination to actually switch itself on/off in release builds.
* maria53rev:3259
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Mon 2011-10-31 15:07:43 +0400&lt;&lt;/style&gt;&gt;
** lpbug:882994: Crash in QUICK_RANGE_SELECT::reset with derived_with_keys
*** The bug was caused by the following scenario:
**** a quick select is created with get_quick_select_for_ref. The quick 
     select refers to temporary (derived) table. It saves table-&gt;file, which
     refers to a ha_heap object.
**** When temp table is populated, ha_heap reaches max. size and is converted
     to a ha_myisam.  However, quick-&gt;file remains pointing to where ha_heap 
     was. 
**** Attempt to use the quick select causes crash.
***** Fixed by introducing QUICK_SELECT_I::replace_handler(). Note that it will 
      not work for index_merge quick selects. Which is fine, because these
      quick selects are never created for derived tables.
* maria53rev:3258
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Fri 2011-10-28 12:38:36 +0400&lt;&lt;/style&gt;&gt;
** Let t/myisam_icp.test run include/icp_tests.inc with MRR/ICP turned ON (not OFF)
** Fix the compile-time-default value of optimizer_switch printed by mysqld &lt;&lt;code&gt;&gt;--help --defaults&lt;&lt;/code&gt;&gt;
* maria53rev:3257
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Fri 2011-10-28 11:23:30 +0400&lt;&lt;/style&gt;&gt;
** Make innodb_no_mrricp.test to really run with MRR and ICP turned OFF. 
* maria53rev:3256
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Thu 2011-10-27 12:03:33 -0700&lt;&lt;/style&gt;&gt;
** Moved the test case for lpbug:879939 to derived_view.test where it belongs to. 
* maria53rev:3255 [merge]
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Thu 2011-10-27 09:14:45 -0700&lt;&lt;/style&gt;&gt;
** Merge.
** maria53rev:3252.1.1
   &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Thu 2011-10-27 08:32:24 -0700&lt;&lt;/style&gt;&gt;
*** Fixed lpbug:874035
*** The function Item_direct_view_ref::fix_fields erroneously did not correct
    the value of the flag maybe_null when the view for which the item was
    being fixed happened to be an inner table of an outer join.
* maria53rev:3254
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Thu 2011-10-27 13:54:28 +0400&lt;&lt;/style&gt;&gt;
** lpbug:882472: subselect4.test fails in current 5.3
*** The problem was that the value of READ_RECORD::file was not updated when the underlying table
    was temporary and was converted from heap to myisam. Resolved by eliminating READ_RECORD::file,
    always use READ_RECORD::table-&gt;file
* maria53rev:3253
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Wed 2011-10-26 20:25:18 +0300&lt;&lt;/style&gt;&gt;
** Fixed lpbug:879939 &#34;assertion in ha_maria::enable_indexes with derived_with_keys=on&#34;
** Honor unique/not unique when creating keys for internal tempory tables.
** Added new variables to be used to limit how keys are created for internal temporary tables.
* maria53rev:3252
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Wed 2011-10-26 04:27:09 -0700&lt;&lt;/style&gt;&gt;
** Fixed lpbug:881449
** The function SELECT_LEX::update_used_tables first must clean up
   all bitmaps to be recalculated for all tables that require it
   and only after this walk through on conditions attached to the
   tables to update these bitmaps.
* maria53rev:3251 [merge]
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Wed 2011-10-26 10:58:40 +0400&lt;&lt;/style&gt;&gt;
** Merge fix for lpbug:877288
** maria53rev:3249.1.1
   &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Wed 2011-10-26 02:38:49 +0400&lt;&lt;/style&gt;&gt;
*** lpbug:877288: Wrong result with semijoin + materialization + multipart key
**** when create_ref_for_key() is constructing a ref access for
     a table that&#39;s inside a SJ-Materialization nest, it may not 
     use references to fields of tables that are unside the nest (because 
     these fields will not yet have values when ref access will be used)
**** The check was performed in the first of create_ref_for_key&#39;s loops (the 
     one which counts how many key parts are usable) but not in the second
     (the one which actually fills the TABLE_REF structure). 
* maria53rev:3250
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Tue 2011-10-25 14:18:19 -0700&lt;&lt;/style&gt;&gt;
** Fixed lpbug:881318.
** If a materialized derived table / view is empty then for this table
   the value of file-&gt;ref is 0. This was not taken into account by
   the function JOIN_CACHE::write_record_data. As a result a query
   using an empty materialized derived tables as inner tables of outer
   joins and IN subqueries in WHERE conditions could cause server crashes
   when the optimizer employed join caches and duplicate elimination for
   semi-joins.
* maria53rev:3249
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Mon 2011-10-24 12:54:28 -0700&lt;&lt;/style&gt;&gt;
** Fixed lpbug:880724
** Do not create KEYUSEs for a materialized view over a constant table. 
* maria53rev:3248
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Sun 2011-10-23 05:46:03 -0700&lt;&lt;/style&gt;&gt;
** Fixed lpbug:879882
** This bug happened because the function Item_cond::eval_not_null_tables
   erroneously did not initialize the value of not_null_tables_cache.
* maria53rev:3247
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Sat 2011-10-22 07:19:43 -0700&lt;&lt;/style&gt;&gt;
** Fixed lpbug:878769
** The method DsMrr_impl::dsmrr_init erroneously tried to get a KEY descriptor
   for key with number MAX_KEY. This caused valgrind complains.
* maria53rev:3246
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Sat 2011-10-22 00:14:27 -0700&lt;&lt;/style&gt;&gt;
** Fixed lpbug:874378
** This bug happened for the queries over multi-table mergeable views
   because the bitmap TABLE::read_set of the underlying tables were not
   updated after the views had been merged into the query.
** Now this bitmaps are updated properly.
** Also the bitmap TABLE::merge_keys now is updated in prevention of
  future bugs.
* maria53rev:3245
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Thu 2011-10-20 08:02:31 -0700&lt;&lt;/style&gt;&gt;
** Added a test case for lpbug:873263 fixed by the patch for lpbug:874006
* maria53rev:3244
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Thu 2011-10-20 04:59:20 -0700&lt;&lt;/style&gt;&gt;
** Fixed lpbug:878199
** The function JOIN::drop_unused_derived_keys could erroneously set
   the value of REF::key to 0 for a joined materialized view/derived table
   in the case when no REF access to the table was used by the query
   execution plan. This could cause a crash of the server.
* maria53rev:3243 [merge]
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Wed 2011-10-19 23:35:11 -0700&lt;&lt;/style&gt;&gt;
** Merge.
** maria53rev:3240.1.1
   &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Wed 2011-10-19 23:28:37 -0700&lt;&lt;/style&gt;&gt;
*** Fixed lpbug:877316
*** This bug happened due to incompleteness of the fix for lpbug:872735:
    the occurrences of the fields in the conditions of correlated
    subqueries were not taken into account when recalculating
    covering keys bit maps.
* maria53rev:3242 [merge]
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Wed 2011-10-19 21:01:42 +0200&lt;&lt;/style&gt;&gt;
** merge 5.2
** maria53rev:2732.46.11 [merge]
   &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Wed 2011-10-19 20:53:16 +0200&lt;&lt;/style&gt;&gt;
*** merge from 5.1
*** maria53rev:2643.143.42
    &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Wed 2011-10-19 20:51:01 +0200&lt;&lt;/style&gt;&gt;
**** Fix endless loop in my_gethwaddr()
*** maria53rev:2643.143.41
    &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Thu 2011-10-13 11:20:33 +0200&lt;&lt;/style&gt;&gt;
**** silence the &#34;uninitialized&#34; warning
** maria53rev:2732.46.10
   &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Sun 2011-10-16 21:55:53 +0300&lt;&lt;/style&gt;&gt;
*** Fixed wrong info message for mysqld &lt;&lt;code&gt;&gt;--general-log&lt;&lt;/code&gt;&gt;
*** Fixed wrong parameter type for &lt;&lt;code&gt;&gt;--general-log&lt;&lt;/code&gt;&gt;. Now one can enable it with &lt;&lt;code&gt;&gt;--general-log= 1 | true | on&lt;&lt;/code&gt;&gt;
*** Fixed that bool parameters can also take &#39;on&#39; and &#39;off&#39; as parameters. This is in line with the values assigned to them in mysqld.
* maria53rev:3241
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Tue 2011-10-18 22:50:17 +0300&lt;&lt;/style&gt;&gt;
** Fix of building on Mac OS.
* maria53rev:3240 [merge]
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Tue 2011-10-18 14:04:10 +0300&lt;&lt;/style&gt;&gt;
** merge
** maria53rev:3233.2.1
   &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Tue 2011-10-18 13:44:12 +0300&lt;&lt;/style&gt;&gt;
*** Compiler warning about assigned but not used variables fixed.
* maria53rev:3239
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Mon 2011-10-17 03:42:56 -0700&lt;&lt;/style&gt;&gt;
** Fixed a compiler warning.
* maria53rev:3238 [merge]
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Mon 2011-10-17 01:20:16 -0700&lt;&lt;/style&gt;&gt;
** Merge.
** maria53rev:3235.1.1
   &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Sun 2011-10-16 13:23:57 -0700&lt;&lt;/style&gt;&gt;
*** Fixed lpbug:874006
*** This bug manifested itself with queries containing non-correlated
    IN subqueries over materialized views/derived tables.  
*** The bug happened because the code of the function generate_derived_keys did
    not take into account that the function could be called twice when the
    optimizer was deciding whether in-exist transformation should be applied.
* maria53rev:3237
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Sun 2011-10-16 22:46:11 +0300&lt;&lt;/style&gt;&gt;
** Remove extra MariaDB- from binary tar.gz file name
** Print server version name to .err file on crash 
* maria53rev:3236
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Fri 2011-10-14 17:51:16 +0200&lt;&lt;/style&gt;&gt;
** In crash handler, output session value of the optimizer switch.
* maria53rev:3235 [merge]
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Fri 2011-10-14 03:56:41 -0700&lt;&lt;/style&gt;&gt;
** Merge.
** maria53rev:3233.1.1 [merge]
   &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Fri 2011-10-14 00:11:50 -0700&lt;&lt;/style&gt;&gt;
*** Merge.
*** maria53rev:3232.1.1
    &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Thu 2011-10-13 22:39:00 -0700&lt;&lt;/style&gt;&gt;
**** Fixed lpbug:872735
**** This bug happened because the maps of covering keys for mergeable derived
     tables/views was not recalculated after the derived tables/vies had been
     merged into the main query.
* maria53rev:3234
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Fri 2011-10-14 12:41:20 +0200&lt;&lt;/style&gt;&gt;
** update pbxt test results
* maria53rev:3233
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Thu 2011-10-13 13:44:50 +0200&lt;&lt;/style&gt;&gt;
** lpbug:817966 int_column IN (string_constant)
** restore the status quo from before the microsecond patch
* maria53rev:3232
  &lt;&lt;style style=&#34;color:gray;font-size:0.8em;font-style:italic;&#34;&gt;&gt;Thu 2011-10-13 11:23:59 +0200&lt;&lt;/style&gt;&gt;
** typo.</textarea>
    


                    <div id="content_disclaimer" class="graybox">
                        Content reproduced on this site is the property of its respective owners,
                        and this content is not reviewed in advance by MariaDB. The views, information and opinions
                        expressed by this content do not necessarily represent those of MariaDB or any other party.
                    </div>
                </div>
            </section>

            
        </div>
    </div>
</div>

<!-- Footer -->
<footer id="footer">
    <div class="footer">
        <div class="container">
            <div class="row">
                <div class="col-xs-12">
                    <ul class="list-inline text-center footer-nav">
                        <li>
                            <h5>
                                <a href="https://mariadb.com/products" title="Products">Products</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/solutions" title="Solutions">Solutions</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/resources" title="Resources">Resources</a>
                            </h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/about-us" title="About MariaDB">Company</a></h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/pricing" title="Pricing">Pricing</a>
                            </h5>
                        </li>
                        
                        
                        <li>
                            <h5><a href="https://mariadb.com/downloads" title="Download">Download MariaDB</a></h5>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="row row-10">
                
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div id="block-footerformcontact" class="block block-block-content block-block-contentd754ee1b-3cc9-40e7-9ef4-f504f1197fb1">
                        
                            <h5 style="font-weight: 400;">Subscribe to our newsletter!</h5>
                            <script src="//app-sj15.marketo.com/js/forms2/js/forms2.min.js"></script><form id="mktoForm_1498"></form>
                            <script>
                                <!--//--><![CDATA[// ><!--
                                MktoForms2.loadForm("//app-sj15.marketo.com", "573-PXI-984", 1498);
                                //--><!]]]]><![CDATA[>
                                //--><!]]>
                            </script>
                        
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div class="footer-copyright">
                        <div class="text-center">
                            <ul class="list-inline no-margin">
                                <li>
                                    <a href="/legal" title="Legal">Legal</a>
                                </li>
                                <li>
                                    <a href="/privacy-policy" title="Privacy Policy">Privacy Policy</a>
                                </li>
                                <li>
                                    <a href="/cookie-policy/" title="Cookies">Cookie Policy</a>
                                </li>
                            </ul>
                            <p>Copyright &copy; 2025 MariaDB. All rights reserved.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
</footer>
</div>

<div id="ajax_loading">
    <img src="/kb/static/images/ajax-loader.a51c5608d01a.gif" />
</div>

    <!-- Google Tag Manager -->
    <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-MK2847"
                      height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
            '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MK2847');</script>
    <!-- End Google Tag Manager -->

</body>

<script type="text/javascript" src="/kb/static/js/main.1587e3a666fc.js" charset="utf-8"></script>

</html>