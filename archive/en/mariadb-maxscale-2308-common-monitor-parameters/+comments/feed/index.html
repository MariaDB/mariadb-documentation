<?xml version="1.0" encoding="utf-8"?>
<rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title>MariaDB Knowledge Base Comments for:  Common Monitor Parameters</title><link>https://mariadb.com/kb/en/mariadb-maxscale-2308-common-monitor-parameters/+comments/feed/</link><description></description><atom:link href="https://mariadb.com/kb/en/mariadb-maxscale-2308-common-monitor-parameters/+comments/feed/" rel="self"></atom:link><language>en-us</language><lastBuildDate>Wed, 11 Dec 2024 01:20:56 +0000</lastBuildDate><item><title>Incorrect replication lag reported</title><link>https://mariadb.com/kb/en/mariadb-maxscale-2308-common-monitor-parameters/+comments/6519</link><description>&lt;p&gt;I'm noticing a problem similar to this issue where on start up of Slave server after being down for some time, the initial replication lag is reported as 0s, which then allows the monitor to open connections to it for the read-write service. &lt;/p&gt;
&lt;p&gt;&lt;a href="https://jira.mariadb.org/browse/MDEV-17516"&gt;External Links&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Then some time later the real replication lag comes through, and if it exceeds the max_replication_lag parameter of the Read-Write service it will attempt to remove it from the service. &lt;/p&gt;
&lt;p&gt;However not ALL connections are dropped (might reduce from 60 to 15 for example). Which concerns me a bit especially when lag is high, and it might allow incorrect reads to the client to occur. &lt;/p&gt;
&lt;p&gt;So a couple things:&lt;/p&gt;
&lt;p&gt;1) Is there a MaxScale parameter that can allow us to delay the &lt;strong&gt;initial&lt;/strong&gt; monitoring so that we can hope the replication lag is being reported by MariaDB properly? Something like "monitor_interval" but for initial startup of a slave only? 
2) Is there a MaxScale parameter that can &lt;strong&gt;force close&lt;/strong&gt; connections when a server needs to be taken out of the read-write service? 
I know this can be done manually by putting it into Maintenance Mode but I would prefer something automatic.&lt;/p&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Richard Lee</dc:creator><guid>https://mariadb.com/kb/en/mariadb-maxscale-2308-common-monitor-parameters/+comments/6519</guid></item></channel></rss>