<!DOCTYPE html>
<html>
<head data-cookie-domain=""
      data-cookie-path="/">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="apple-touch-icon" sizes="180x180" href="/kb/static/images/favicons/apple-touch-icon.159e713979be.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/kb/static/images/favicons/favicon-32x32.bc0ac1d5d11e.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/kb/static/images/favicons/favicon-16x16.5801f8f0f34e.png">
    <link rel="shortcut icon" href="/kb/static/images/favicons/favicon.d122d305dee4.ico" type="image/x-icon" />

    <title>MariaDB Protocol Differences with MySQL - MariaDB Knowledge Base</title>

    <link href="/kb/static/css/main.f7633538c846.css" rel="stylesheet" type="text/css" />

    

    

    <!-- FB Open Graph tags -->
    <meta property="og:title" content="MariaDB Protocol Differences with MySQL" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://mariadb.com/kb/en/mariadb-protocol-differences-with-mysql/" />
    <meta property="og:image" content="http://mariadb.comaskmonty-logo.png" />
    <meta property="og:site_name" content="MariaDB KnowledgeBase" />
    <meta property="fb:admins" content="514852603" />
    <meta property="og:description" content="List of differences between MariaDB and MySQL in terms of protocol." />

    <meta name="description" content="List of differences between MariaDB and MySQL in terms of protocol." />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="//fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet"/>
    
</head>
<body class="mpkb nodes products nodes_view jqui" id="nodes_view">





<div id="menu-mobile" class="visible-sm visible-xs">

    <div>
        <div id="mobile-close-menu" class="text-right">
            <a href="javascript:void(0)" title="Close Menu" id="back-main" class="toggle-menu">X<span></span></a>
        </div>
    </div>
    <div class="mainmenu-mobile">
        <ul class="ls-none ul-menu">
            <li data-sub="submenu5"><a class="open-form-search" href="/kb/search/" title="Search">Search </a></li>
            <li data-sub="submenu0"><a href="/products" title="Products">Products</a><span class="arrow-main"></span></li>
            <li data-sub="submenu1"><a href="/services" title="Services">Services</a><span class="arrow-main"></span></li>
            <li data-sub="submenu2"><a href="/resources" title="Resources">Resources</a><span class="arrow-main"></span></li>
            <li data-sub="submenu3"><a href="/about-us" title="About">About</a><span class="arrow-main"></span></li>
            <li data-sub="submenu4"><a href="/contact" title="Contact">Contact</a></li>
        </ul>
    </div>

    <div class="nav-top-mobile">
        <div class="select-box form">

            <ul class="inline-block-md mb-none top-nav">
                <li>

                </li>
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/mariadb-protocol-differences-with-mysql/"> Login</a>
                    </li>
                
            </ul>



        </div>
        <p class="text-center copyright">Copyright &copy; 2025 MariaDB. All rights reserved.</p>
    </div>
</div>
<div class="violator-wrap d-none" id="top_violator">
    <div class="container">
        <div class="row">
            <div class="col-xs-12 col-sm-12">
                <div class="violator-outer">
                    <div class="violator-inner">
                        <div class="row">
                            <div class="col-xs-12 col-sm-9 col-lg-7 col-lg-offset-2" id="top_violator_content">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="content-link" target="_blank" rel="nofollow noreferrer">
                                    <span>The Ultimate Guide to High Availability with MariaDB</span>
                                </a>
                            </div>
                            <div class="col-xs-12 col-sm-3" id="top_violator_cta">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="btn btn-mariadb" target="_blank" rel="nofollow noreferrer">Download Now</a>
                            </div>
                        </div>
                    </div>
                    <button type="button" class="btn btn-link close-btn">
                        <svg xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 24 24" width="15px" height="15px"><path d="M 4.9902344 3.9902344 A 1.0001 1.0001 0 0 0 4.2929688 5.7070312 L 10.585938 12 L 4.2929688 18.292969 A 1.0001 1.0001 0 1 0 5.7070312 19.707031 L 12 13.414062 L 18.292969 19.707031 A 1.0001 1.0001 0 1 0 19.707031 18.292969 L 13.414062 12 L 19.707031 5.7070312 A 1.0001 1.0001 0 0 0 18.980469 3.9902344 A 1.0001 1.0001 0 0 0 18.292969 4.2929688 L 12 10.585938 L 5.7070312 4.2929688 A 1.0001 1.0001 0 0 0 4.9902344 3.9902344 z"/></svg>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="wrapper">
<div id="top-nav">
    <div class="container">
        <ul class="hidden-sm hidden-xs" >
            <li><a href="https://mariadb.com/kb/">Knowledge Base</a></li>
            <li><a href="https://mariadb.com/contact/">Contact</a></li>
            
                
                    <li>
                        <a href="/kb/user/login?next=/kb/en/mariadb-protocol-differences-with-mysql/" rel="nofollow">Login</a>
                    </li>
                
            
            
            <li id="search-form">
                <form action="/kb/en/+search/" method="get" id="search-block-form" accept-charset="UTF-8">
                    <input id="search" title="Enter the terms you wish to search for."
                           placeholder="Search . . ." type="text"
                           name="q" value="" size="15" maxlength="128" class="form-text"
                           data-autocomplete-url="/kb/en/+search/autocomplete/">
                    <input type="hidden" name="quick" value="1" />
                    <input type="hidden" name="source" value="kb" />
                </form>
            </li>
            <li><a id="search-toggler" href="/kb/search/">Search</a></li>
            
        </ul>
    </div>
</div>
<div id="navbar-bottom" class="navbar">
    <div class="container">
        
        
        
        
        <div class="row">
            <div class="col-md-3 col-sm-9 col-xs-9">
                <a class="brand" href="/" title="MariaDB">
                    <img src="/kb/static/images/logo-2018-black.95f5978ae14d.png">
                </a>
            </div>
            <div class="col-md-9 hidden-sm hidden-xs">
                <div class="main-menu">
                    <ul id="main-menu" class="nav navbar-nav inline-block-sm">
    <li class="has-sub full-menu">
        <a href="/products" title="Products">Products</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/services" title="Services">Services</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/pricing" title="Pricing">Pricing</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/resources" title="Resources">Resources</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/about-us" title="About Us">About Us</a>
    </li>
    <li class="">
        <a class="button electric-eel small top-bar-right-download" href="/downloads/">Download</a>
    </li>
</ul>
                </div>
            </div>
            <div class="col-md-3 visible-sm visible-xs col-sm-3 col-xs-3 ps-rv">
                <div class="navbar-header text-right pull-right">
                    <button type="button" class="menu-control toggle-menu" id="open-menu">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="main">
    <div class="container">
        

        <div id="subheader1" class="clearfix">
            <div class="pull-left">
                
                <div id="breadcrumbs" class="breadcrumb">
                    <a href="/kb/en/">Knowledge Base</a>
                    


    
    » <a class="crumb" href="/kb/en/server-client-software/">Server &amp; Client Software</a>
    

    
    » <a class="crumb" href="/kb/en/client-libraries/">Client Libraries</a>
    

    
    » <a class="crumb" href="/kb/en/clientserver-protocol/">Client/Server Protocol</a>
    


    » <a class="node_link crumb" href="/kb/en/mariadb-protocol-differences-with-mysql/">MariaDB Protocol Differences with MySQL</a>


                </div>
                
            </div>
        </div>
    </div>
    <div class="container" id="container-main">
        <div class="row">
            
            
                
                <aside id="sidebar-first" class="sidebar col-md-2 hidden-xs hidden-sm hidden-print">
                    
                        
                        <ul id="category_menu" class="nav nav-pills nav-stacked">
                            <li><a href="/kb/en/">Home</a></li>
                            
                                
                                    <li><a href="/kb/en/+questions/">Open Questions</a></li>
                                
                                <li><a href="/kb/en/documentation/">MariaDB Server</a></li>
                                <li><a href="/kb/en/maxscale/">MariaDB MaxScale</a></li>
                                <li><a href="/kb/en/mariadb-columnstore/">MariaDB ColumnStore</a></li>
                                <li><a href="/kb/en/connectors/">Connectors</a></li>
                            

                        </ul>
                    

                    
<div>



<div class="well well-small box actions"><div>

        <a class="btn btn-block btn-blue btn-sm" href="/kb/en/mariadb-protocol-differences-with-mysql/+history" rel="nofollow">History</a>
        
        
        
        <a class="btn btn-block btn-blue btn-sm" href="/kb/en/mariadb-protocol-differences-with-mysql/+source/">Source</a>
        
        <a class="btn btn-block btn-blue btn-sm flag" href="/kb/en/mariadb-protocol-differences-with-mysql/+flag"
                data-flag-url="/kb/en/mariadb-protocol-differences-with-mysql/+flag" rel="nofollow">
                Flag as Spam / Inappropriate</a>
        
        <a class="btn btn-block btn-blue btn-sm" href="/kb/en/mariadb-protocol-differences-with-mysql/+translate/">
                Translate</a>
        

</div>
</div>





<div class="well well-small box node_info"><div>

    <dl>
        <dt>Created</dt>
        <dd>

<span class="datetime" title="2024-09-20 15:56">4 months ago</span></dd>

        <dt>Modified</dt>
        <dd>

<span class="datetime" title="2024-10-24 17:02">2 months, 3 weeks ago</span></dd>

        <dt>Type</dt>
        <dd>article</dd>

        <dt>Status</dt>
        <dd>active</dd>

        <dt>License</dt>
        <dd>
            
                <a href="/kb/en/mariadb-protocol-differences-with-mysql/+license/">CC BY-SA / Gnu FDL</a>
            
        </dd>

        
    </dl>

    
    <ul class="rss_feeds">
        <li><a href="/kb/en/mariadb-protocol-differences-with-mysql/+history/feed/">
            History</a>
        </li>
        <li><a href="/kb/en/mariadb-protocol-differences-with-mysql/+comments/feed/">
            Comments</a>
        </li>
    </ul>
    

</div>
</div>





    
    
    

<div class="well well-small box attachments"><div><div class="edit_link pull-right"><a href="/kb/en/mariadb-protocol-differences-with-mysql/+edit/attachments/">Edit</a></div><h5>Attachments</h5></div><div>

        
            <div class="no_data">No attachments exist</div>
        
    
</div>
</div>

    



    
    






</div>


                    

































                </aside>
            
            
            
                
            
            
                
            
            <section id="content" class="limited_width col-md-8 clearfix">
                
                    <h1>MariaDB Protocol Differences with MySQL</h1>
                

                



                <div>
                    
    

    
    
    

    <div class="node creole">
        
        
        


    
    <div class="answer formatted">
        <p>Here is a list of the differences between MariaDB and MySQL in terms of protocol, in order to help community driver maintainers.</p>
<h3 class="anchored_heading" id="mariadb-capabilities-extension">MariaDB Capabilities Extension</h3>
<p>MariaDB/MySQL servers can advertise feature support using capabilities. To expand the capabilities beyond the original 4 bytes, MariaDB utilizes 4 bytes, unused by MySQL, in the <a href="/kb/en/connection/#initial-handshake-packet">Initial handshake packet</a> (server capabilities 3rd part). In order to avoid incompatibility in the future, those 4 bytes have to be read only if capability CLIENT_MYSQL is not SET (server then being MariaDB).</p>
<p>Enhanced Capabilities</p>
<ul start="1"><li>MARIADB_CLIENT_CACHE_METADATA: Enables clients to cache metadata and avoid repeated network transmissions. (since <a href="/kb/en/mariadb-1060-release-notes/">MariaDB 10.6.0</a>)
</li><li>MARIADB_CLIENT_EXTENDED_METADATA : Provides more detailed column metadata information for specific data types. (since <a href="/kb/en/mariadb-1052-release-notes/">MariaDB 10.5.2</a>)
</li><li>MARIADB_CLIENT_STMT_BULK_OPERATIONS: Introduces a dedicated command, <a href="/kb/en/com_stmt_bulk_execute/">COM_STMT_BULK_EXECUTE</a>, for efficient batch execution of statements. (since <a href="/kb/en/mariadb-1020-release-notes/">MariaDB 10.2.0</a>)
</li><li>MARIADB_CLIENT_BULK_UNIT_RESULTS: Allows for individual result sets for each bulk operation. (since <a href="/kb/en/mariadb-11-5-1-release-notes/">MariaDB 11.5.1</a>)
</li></ul>
<p>See <a href="/kb/en/connection/#capabilities">Connection Capabilities</a>.</p>
<h3 class="anchored_heading" id="prepare-statement-skipping-metadata">Prepare Statement Skipping Metadata</h3>
<p><em>since <a href="/kb/en/mariadb-1060-release-notes/">MariaDB 10.6.0</a></em></p>
<p>Prepared statement metadata, which typically remains unchanged except during table alterations, can be cached by clients when the MARIADB_CLIENT_CACHE_METADATA capability is enabled. The server won't then send them again, unless they change. This significantly improves the performance of subsequent executions, especially for large metadata sets.</p>
<p>When MARIADB_CLIENT_CACHE_METADATA  capability is set, the Resultset <a href="/kb/en/result-set-packets/#column-count-packet">Column count packet</a> format indicates if metadata follows or is skipped:</p>
<div class="cstm-style" style="padding: 16px;background-color: #f7f7f7;border-radius: 3px;"><ul start="1"><li>int&lt;lenenc&gt; column count
</li><li>if (MARIADB_CLIENT_CACHE_METADATA capability set)
    int&lt;1&gt; metadata follows (0 / 1)
</li></ul>
</div><h5 class="anchored_heading" id="example">Example</h5>
<div class="cstm-style yellowbox"><p>java code:</p>
<pre class="fixed">stmt.execute(&#34;CREATE TABLE test_table (id int, val varchar(32))&#34;);
stmt.execute(&#34;INSERT INTO test_table VALUES (1, 'a'), (2, 'b')&#34;);
try (PreparedStatement prep = sharedConnBinary.prepareStatement(&#34;SELECT * FROM test_table WHERE id = ?&#34;)) {
    prep.setInt(1, 1);
    prep.executeQuery();
}
</pre><p>Results with metadata caching:</p>
<pre class="fixed">Column count packet:
       +--------------------------------------------------+
       |  0  1  2  3  4  5  6  7   8  9  a  b  c  d  e  f |
+------+--------------------------------------------------+------------------+
|000000| 02 00 00 01 02 00                                | ......           |
+------+--------------------------------------------------+------------------+
row:
       +--------------------------------------------------+
       |  0  1  2  3  4  5  6  7   8  9  a  b  c  d  e  f |
+------+--------------------------------------------------+------------------+
|000000| 08 00 00 02 00 00 01 00  00 00 01 61             | ...........a     |
+------+--------------------------------------------------+------------------+

OK_Packet with a 0xFE header:
       +--------------------------------------------------+
       |  0  1  2  3  4  5  6  7   8  9  a  b  c  d  e  f |
+------+--------------------------------------------------+------------------+
|000000| 07 00 00 03 FE 00 00 22  00 00 00                | .......&#34;...      |
+------+--------------------------------------------------+------------------+

</pre><p>same without metadata caching:</p>
<pre class="fixed">Column count packet:
       +--------------------------------------------------+
       |  0  1  2  3  4  5  6  7   8  9  a  b  c  d  e  f |
+------+--------------------------------------------------+------------------+
|000000| 01 00 00 01 02                                   | .....            |
+------+--------------------------------------------------+------------------+

Column Definition packet:
       +--------------------------------------------------+
       |  0  1  2  3  4  5  6  7   8  9  a  b  c  d  e  f |
+------+--------------------------------------------------+------------------+
|000000| 33 00 00 02 03 64 65 66  05 74 65 73 74 6A 0A 74 | 3....def.testj.t |
|000010| 65 73 74 5F 74 61 62 6C  65 0A 74 65 73 74 5F 74 | est_table.test_t |
|000020| 61 62 6C 65 02 69 64 02  69 64 0C 3F 00 0B 00 00 | able.id.id.?.... |
|000030| 00 03 00 00 00 00 00                             | .......          |
+------+--------------------------------------------------+------------------+

Column Definition packet:
       +--------------------------------------------------+
       |  0  1  2  3  4  5  6  7   8  9  a  b  c  d  e  f |
+------+--------------------------------------------------+------------------+
|000000| 35 00 00 03 03 64 65 66  05 74 65 73 74 6A 0A 74 | 5....def.testj.t |
|000010| 65 73 74 5F 74 61 62 6C  65 0A 74 65 73 74 5F 74 | est_table.test_t |
|000020| 61 62 6C 65 03 76 61 6C  03 76 61 6C 0C FF 00 80 | able.val.val.... |
|000030| 00 00 00 FD 00 00 00 00  00                      | .........        |
+------+--------------------------------------------------+------------------+

row:
       +--------------------------------------------------+
       |  0  1  2  3  4  5  6  7   8  9  a  b  c  d  e  f |
+------+--------------------------------------------------+------------------+
|000000| 08 00 00 04 00 00 01 00  00 00 01 61             | ...........a     |
+------+--------------------------------------------------+------------------+

OK_Packet with a 0xFE header:
       +--------------------------------------------------+
       |  0  1  2  3  4  5  6  7   8  9  a  b  c  d  e  f |
+------+--------------------------------------------------+------------------+
|000000| 07 00 00 05 FE 00 00 22  00 00 00                | .......&#34;...      |
+------+--------------------------------------------------+------------------+
</pre></div><h3 class="anchored_heading" id="extended-column-information">Extended Column Information</h3>
<p><em>since <a href="/kb/en/mariadb-1052-release-notes/">MariaDB 10.5.2</a></em></p>
<p>When the MARIADB_CLIENT_EXTENDED_METADATA capability is set, <a href="/kb/en/result-set-packets/#column-definition-packet">column definition packet</a> can include additional type and format information.</p>
<ul start="1"><li>For geometric fields: Detailed geometric data type (e.g., 'point', 'polygon')
</li><li>For JSON fields: Type 'json'
</li><li>For UUID fields: Type 'uuid'
</li></ul>
<h3 class="anchored_heading" id="bulk">Bulk</h3>
<p><em>since <a href="/kb/en/mariadb-1020-release-notes/">MariaDB 10.2.0</a> - <a href="/kb/en/mariadb-11-5-1-release-notes/">MariaDB 11.5.1</a> for unit results</em></p>
<p>The MARIADB_CLIENT_STMT_BULK_OPERATIONS capability enables the <a href="/kb/en/com_stmt_bulk_execute/">COM_STMT_BULK_EXECUTE</a> command for efficient batch processing. However, note that only one result (OK or ERROR) is returned per batch, containing the total affected rows and the first auto-generated ID. For individual results, the MARIADB_CLIENT_BULK_UNIT_RESULTS capability can be set. The server will then return a resultset containing for each unitary results (containing auto generated ids and affected rows)</p>
<h5 class="anchored_heading" id="example">Example</h5>
<div class="cstm-style yellowbox"><p>java code: </p>
<pre class="fixed">Statement stmt = connection.createStatement();
stmt.execute(&#34;CREATE TABLE test_table (id int, val varchar(32))&#34;);

try (PreparedStatement prep = connection.prepareStatement(&#34;INSERT INTO test_table VALUES (?, ?)&#34;)) {

    prep.setInt(1, 1);
    prep.setString(2, &#34;a&#34;);
    prep.addBatch();

    prep.setInt(1, 2);
    prep.setString(2, &#34;b&#34;);
    prep.addBatch();

    prep.executeBatch();
}
</pre><p>client send :</p>
<pre class="fixed">MARIADB_CLIENT_STMT_BULK_OPERATIONS:
       +--------------------------------------------------+
       |  0  1  2  3  4  5  6  7   8  9  a  b  c  d  e  f |
+------+--------------------------------------------------+------------------+
|000000| 1B 00 00 00 FA FF FF FF  FF 80 00 03 00 FD 00 00 | ................ |
|000010| 01 00 00 00 00 01 61 00  02 00 00 00 00 01 62    | ......a.......b  |
+------+--------------------------------------------------+------------------+
</pre><p>server response:</p>
<pre class="fixed">OK_Packet:
       +--------------------------------------------------+
       |  0  1  2  3  4  5  6  7   8  9  a  b  c  d  e  f |
+------+--------------------------------------------------+------------------+
|000000| 2E 00 00 01 00 02 00 02  00 00 00 26 52 65 63 6F | ...........&amp;Reco |
|000010| 72 64 73 3A 20 32 20 20  44 75 70 6C 69 63 61 74 | rds: 2  Duplicat |
|000020| 65 73 3A 20 30 20 20 57  61 72 6E 69 6E 67 73 3A | es: 0  Warnings: |
|000030| 20 30                                            |  0               |
+------+--------------------------------------------------+------------------+
</pre></div><h3 class="anchored_heading" id="authentication-plugins">Authentication Plugins</h3>
<p>MariaDB has specific authentication methods. </p>
<ul start="1"><li><a href="/kb/en/connection/#client_ed25519-plugin">ED25519 plugin</a>  since <a href="/kb/en/mariadb-1030-release-notes/">MariaDB 10.3.0</a>
</li><li><a href="/kb/en/connection/#parsec-plugin">PARSEC plugin</a> since <a href="/kb/en/mariadb-11-6-1-release-notes/">MariaDB 11.6.1</a>
</li><li><a href="/kb/en/connection/#auth_gssapi_client-plugin">GSSAPI plugin</a> since <a href="/kb/en/mariadb-10110-release-notes/">MariaDB 10.1.10</a>
</li></ul>
<h3 class="anchored_heading" id="redirection">Redirection</h3>
<p><em>since <a href="/kb/en/mariadb-11-3-1-release-notes/">MariaDB 11.3.1</a> or Maxscale 25.08.0</em></p>
<p>MariaDB permits <a href="/kb/en/connection-redirection-mechanism-in-the-mariadb-clientserver-protocol/">connection redirection</a>.</p>
<h5 class="anchored_heading" id="use-cases">Use Cases</h5>
<ul start="1"><li>Proxy Scenarios: Connection redirection is particularly beneficial when multiple servers share a single proxy.
</li><li>Server Management: This feature can also be used during planned server shutdowns or restarts, allowing for a graceful transition to a new server.
</li></ul>
<p>Connectors can support 2 different levels:</p>
<ul start="1"><li>On Connection Creation only: The redirection information is included in the initial <a href="/kb/en/ok_packet/#server-status-flag">OK_Packet</a> sent by the server to the client. This allows the client to connect directly to the target server immediately.
</li><li>Anytime Redirection: If redirection information becomes available later, the connector can handle it based on the existing transaction state.
<ul start="1"><li>No Transaction: If no transaction is in progress, the connector can redirect the connection directly.
</li><li>Transaction in Progress: If a transaction is ongoing, the redirection information is stored until the transaction is completed. The transaction state is determined using server status flags like SERVER_STATUS_IN_TRANS in the "OK_Packet," "ERR_Packet," or "EOF_Packet."
</li></ul>
</li></ul>
<h3 class="anchored_heading" id="no-configuration-ssl">No Configuration SSL</h3>
<p><em>since <a href="/kb/en/mariadb-11-4-1-release-notes/">MariaDB 11.4.1</a></em></p>
<p>Since <a href="https://mariadb.org/mission-impossible-zero-configuration-ssl/">a feature permitting TLS certificate validation without needing to provide certificate client side</a>.</p>
<h5 class="anchored_heading" id="benefits">Benefits</h5>
<ul start="1"><li>Simplified Setup: No need to install and manage client certificates, making initial configuration much easier.
</li></ul>
<h5 class="anchored_heading" id="limitations">Limitations</h5>
<ul start="1"><li>Password Requirement: To ensure security, this approach requires users to connect with a password.
</li><li>Authentication Methods: Only mysql_native_password and client_ed25519 authentication methods are currently supported.
</li></ul>
<h5 class="anchored_heading" id="how-it-works">How it Works</h5>
<ul start="1"><li>Self-Signed Certificates: The server can utilize a self-signed certificate, which doesn't require a trusted Certificate Authority (CA).
</li><li>Fingerprint Storage: The client connector needs to handle self-signed certificates. It first saves the SHA256 fingerprint of the server certificate.
</li><li>Server Validation: Upon connection, the server sends a special hash within the "OK_Packet" info field.
</li><li>Local Validation: The client generates a hash by combining the password hash, server seed, and the stored certificate fingerprint.
</li><li>Comparison: If the client-generated hash matches the server-sent hash, the connection is deemed secure and proceeds. Otherwise, the connection must be terminated for security reasons.
</li></ul>
<h3 class="anchored_heading" id="initial-session-tracking">Initial Session Tracking</h3>
<p>MySQL 5.7.0 and <a href="/kb/en/mariadb-1022-release-notes/">MariaDB 10.2.2</a> support session tracking when the CLIENT_SESSION_TRACK capability is set. </p>
<p>One difference is that since <a href="/kb/en/mariadb-11-5-1-release-notes/">MariaDB 11.5.1</a>, connection ending OK_Packet lists all the current variables of tracked variable. </p>
<h3 class="anchored_heading" id="mysql-features-not-supported">MySQL Features Not Supported</h3>
<ul start="1"><li>X protocol is not supported
</li></ul>
<p>Unsupported features and associate capabilities:</p>
<ul start="1"><li>CLIENT_OPTIONAL_RESULTSET_METADATA: permits setting no METADATA at all for a connection. See <a href="#prepare-statement-skipping-metadata">Prepare statement skipping metadata</a>'s MariaDB implementation choice.
</li><li>CLIENT_QUERY_ATTRIBUTES adds some metadata attributes
</li><li>CLIENT_ZSTD_COMPRESSION_ALGORITHM permits zstd compression 
</li><li>MULTI_FACTOR_AUTHENTICATION Multifactor Authentication capability.
</li></ul>
<h3 class="anchored_heading" id="tips">TIPS</h3>
<h4 class="anchored_heading" id="identifying-mariadb-server">Identifying MariaDB Server</h4>
<p>MariaDB connectors use specific criteria to determine if a server is a MariaDB instance during the initial handshake process. </p>
<p>The two key indicators used are:</p>
<ul start="1"><li>Missing CLIENT_MYSQL Capability: <a href="/kb/en/what-is-mariadb-102/">MariaDB 10.2</a> and newer versions do not set the CLIENT_MYSQL capability flag in the initial handshake packet.
</li><li>Server Version String: The server's version string is examined for the presence of the word "mariadb" (ignoring case sensitivity). 
</li></ul>
<p>The reason is some features like using COM_RESET_CONNECTION has no capability, and depend on the MySQL or MariaDB server version. </p>
<h4 class="anchored_heading" id="pipelining-prepare-execute">Pipelining Prepare Execute</h4>
<p>Connectors usually follow a two-step process for prepared statements:</p>
<ul start="1"><li>Prepare: Send a  <a href="/kb/en/com_stmt_prepare/">COM_STMT_PREPARE</a> command to the server, receiving a statement ID in response.
</li><li>Execute: Send a <a href="/kb/en/com_stmt_execute/">COM_STMT_EXECUTE</a> command, using the statement ID obtained in the previous step.
</li></ul>
<p>When the server support MARIADB_CLIENT_STMT_BULK_OPERATIONS capability (since <a href="/kb/en/what-is-mariadb-102/">MariaDB 10.2</a>), a specific statement ID value of -1 (or 0xffffffff in hexadecimal) can be used to indicate that the previously prepared statement could be reused. This enables connectors to pipeline the preparation and execution steps into a single request:</p>
<ul start="1"><li>Send a  <a href="/kb/en/com_stmt_prepare/">COM_STMT_PREPARE</a> then a <a href="/kb/en/com_stmt_execute/">COM_STMT_EXECUTE</a> with statement ID -1 (0xffffffff) commands to the server.
</li><li>Read the prepare and execute responses
</li></ul>
<p>If the  <a href="/kb/en/com_stmt_prepare/">COM_STMT_PREPARE</a> command returns an error (ERR_Packet), the subsequent <a href="/kb/en/com_stmt_execute/">COM_STMT_EXECUTE</a> with statement ID -1 will also fail and return an error.</p>
<p>By eliminating the round trip for the separate COM_STMT_EXECUTE command, this approach improves performance for the first execution.</p>
<p>Traditionally, connectors send <a href="/kb/en/com_stmt_prepare/">COM_STMT_PREPARE</a>, wait for results, then execute <a href="/kb/en/com_stmt_execute/">COM_STMT_EXECUTE</a>  with statement_id received from the prepare result. </p>
<p>This description has been done for <a href="/kb/en/com_stmt_execute/">COM_STMT_EXECUTE</a>, but <a href="/kb/en/com_stmt_bulk_execute/">COM_STMT_BULK_EXECUTE</a> works exactly the same way. </p>
<h4 class="anchored_heading" id="query-timeout">Query Timeout</h4>
<p><em>Since <a href="/kb/en/mariadb-1012-release-notes/">MariaDB 10.1.2</a></em></p>
<p>Setting a timeout for all commands can be set using <code class="fixed" style="white-space:pre-wrap"><span class="k">SET</span> <span class="n">max_statement_time</span><span class="o">=</span><span class="n">XXX</span>
</code> with XXX in seconds.</p>
<p>Setting it for a specific query can be done using <code class="fixed" style="white-space:pre-wrap"><span class="k">SET</span> <span class="k">STATEMENT</span> <span class="n">max_statement_time</span><span class="o">=</span><span class="n">XXX</span> <span class="k">FOR</span> <span class="p">...</span>
</code></p>
<h3 class="anchored_heading" id="collations">Collations</h3>
<p>Connectors don't care about collations, but normally want to ensure charset in connection exchanges.</p>
<p>The only good solution is to use <code class="fixed" style="white-space:pre-wrap"><span class="k">SET</span> <span class="k">NAMES</span> <span class="n">utf8mb4</span>
</code> or <code class="fixed" style="white-space:pre-wrap"><span class="k">SET</span> <span class="k">NAMES</span> <span class="n">utf8mb4</span> <span class="k">COLLATE</span> <span class="n">someUtf8mb4collation</span>
</code></p>
<p>If supporting session tracking, connectors can check if charset of initial tracked variable 'character_set_connection' corresponds to the expected value, then permit skipping this SET NAMES command.</p>
<p>( 'server default collation' from <a href="/kb/en/connection/#initial-handshake-packet">initial handshare packet</a> cannot be trusted, since truncated to one byte. Recent mysql and mariadb collation can go on 2 bytes)</p>

    </div>


        
            <div id="subscribe" class="well well-small hide hidden-print"
                 data-subscribe-url="/kb/en/mariadb-protocol-differences-with-mysql/+subscriptions/add"
                 data-unsubscribe-url="/kb/en/mariadb-protocol-differences-with-mysql/+subscriptions/remove">
            </div>
        

        
        
    
        <div class="simple_section_nav">
            <ul class="nav nav-pills">
                
                    <li><a href="/kb/en/replication-protocol/">
                        ← Replication Protocol
                    </a>
                    </li>
                
                
                    <li><a href="/kb/en/clientserver-protocol/">
                        ↑ Client/Server Protocol ↑
                    </a>
                    </li>
                
                
            </ul>
        </div>
    

        

        
        <h2>Comments</h2>
        
    
    <div id="comments" data-node-id="15123" data-comments-url="/kb/en/mariadb-protocol-differences-with-mysql/+comments"
         data-reply-url="/kb/en/mariadb-protocol-differences-with-mysql/comments/post/">
        Comments loading...
    </div>

        

    </div>


                    <div id="content_disclaimer" class="graybox">
                        Content reproduced on this site is the property of its respective owners,
                        and this content is not reviewed in advance by MariaDB. The views, information and opinions
                        expressed by this content do not necessarily represent those of MariaDB or any other party.
                    </div>
                </div>
            </section>

            
                <div id="right_bar" class="col-md-2">
                    
    
        
        <ul class="section_navigation well well-small hidden-xs hidden-sm">
            
                <li class="parent"><a href="/kb/en/clientserver-protocol/">
                    ↑ Client/Server Protocol ↑
                </a>
                </li>
            
            
                
                    <li>
                        <a href="/kb/en/0-packet/">
                            
                            0 - Packet
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/1-connecting/">
                            
                            1 - Connecting
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/2-text-protocol/">
                            
                            2 - Text Protocol
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/3-binary-protocol-prepared-statements/">
                            
                            3 - Binary Protocol (Prepared Statements)
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/4-server-response-packets/">
                            
                            4 - Server Response Packets
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/protocol-data-types/">
                            
                            Protocol data types
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/en/replication-protocol/">
                            
                            Replication Protocol
                        </a>
                    </li>
                
            
                
                    <li class="active">
                        <span>MariaDB Protocol Differences with MySQL</span>
                        
                    </li>
                
            
        </ul>
    
    

                </div>
            
        </div>
    </div>
</div>

<!-- Footer -->
<footer id="footer">
    <div class="footer">
        <div class="container">
            <div class="row">
                <div class="col-xs-12">
                    <ul class="list-inline text-center footer-nav">
                        <li>
                            <h5>
                                <a href="https://mariadb.com/products" title="Products">Products</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/services" title="Services">Services</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/pricing" title="Pricing">Pricing</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/resources" title="Resources">Resources</a>
                            </h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/about-us" title="About MariaDB">About Us</a></h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/download" title="Download">Download MariaDB</a></h5>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="row row-10">
                
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div id="block-footerformcontact" class="block block-block-content block-block-contentd754ee1b-3cc9-40e7-9ef4-f504f1197fb1">
                        
                            <h5 style="font-weight: 400;">Subscribe to our newsletter!</h5>
                            <script src="//app-sj15.marketo.com/js/forms2/js/forms2.min.js"></script><form id="mktoForm_1498"></form>
                            <script>
                                <!--//--><![CDATA[// ><!--
                                MktoForms2.loadForm("//app-sj15.marketo.com", "573-PXI-984", 1498);
                                //--><!]]]]><![CDATA[>
                                //--><!]]>
                            </script>
                        
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div class="footer-copyright">
                        <div class="text-center">
                            <ul class="list-inline no-margin">
                                <li>
                                    <a href="/legal" title="Legal">Legal</a>
                                </li>
                                <li>
                                    <a href="/privacy-policy" title="Privacy Policy">Privacy Policy</a>
                                </li>
                                <li>
                                    <a href="/cookie-policy/" title="Cookies">Cookie Policy</a>
                                </li>
                            </ul>
                            <p>Copyright &copy; 2025 MariaDB. All rights reserved.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
</footer>
</div>

<div id="ajax_loading">
    <img src="/kb/static/images/ajax-loader.a51c5608d01a.gif" />
</div>

    <!-- Google Tag Manager -->
    <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-MK2847"
                      height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
            '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MK2847');</script>
    <!-- End Google Tag Manager -->

</body>

<script type="text/javascript" src="/kb/static/js/main.1587e3a666fc.js" charset="utf-8"></script>

</html>