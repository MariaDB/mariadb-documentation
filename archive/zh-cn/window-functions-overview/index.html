<!DOCTYPE html>
<html>
<head data-cookie-domain=""
      data-cookie-path="/">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="apple-touch-icon" sizes="180x180" href="/kb/static/images/favicons/apple-touch-icon.159e713979be.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/kb/static/images/favicons/favicon-32x32.bc0ac1d5d11e.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/kb/static/images/favicons/favicon-16x16.5801f8f0f34e.png">
    <link rel="shortcut icon" href="/kb/static/images/favicons/favicon.d122d305dee4.ico" type="image/x-icon" />

    <title>Window Functions速览 - MariaDB Knowledge Base</title>

    <link href="/kb/static/css/main.f7633538c846.css" rel="stylesheet" type="text/css" />

    

    

    <!-- FB Open Graph tags -->
    <meta property="og:title" content="Window Functions速览" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://mariadb.com/kb/zh-cn/window-functions-overview/" />
    <meta property="og:image" content="http://mariadb.comaskmonty-logo.png" />
    <meta property="og:site_name" content="MariaDB KnowledgeBase" />
    <meta property="fb:admins" content="514852603" />
    <meta property="og:description" content="MariaDB starting with &lt;a href=&#34;/kb/en/what-is-mariadb-102/&#34;&gt;10.2&lt;/a&gt;开窗函数是从MariaDB 10.2开始支持的新功能。

简介
通过开窗函数，可以为分组后的行执行一些普通SQL语句无法执行的计算。
语法
function (expression) OVER (
  [ PART..." />

    <meta name="description" content="MariaDB starting with &lt;a href=&#34;/kb/en/what-is-mariadb-102/&#34;&gt;10.2&lt;/a&gt;开窗函数是从MariaDB 10.2开始支持的新功能。

简介
通过开窗函数，可以为分组后的行执行一些普通SQL语句无法执行的计算。
语法
function (expression) OVER (
  [ PART..." />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="//fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet"/>
    
</head>
<body class="mpkb nodes products nodes_view jqui" id="nodes_view">





<div id="menu-mobile" class="visible-sm visible-xs">

    <div>
        <div id="mobile-close-menu" class="text-right">
            <a href="javascript:void(0)" title="Close Menu" id="back-main" class="toggle-menu">X<span></span></a>
        </div>
    </div>
    <div class="mainmenu-mobile">
        <ul class="ls-none ul-menu">
            <li data-sub="submenu5"><a class="open-form-search" href="/kb/search/" title="Search">Search </a></li>
            <li data-sub="submenu0"><a href="/products" title="Products">Products</a><span class="arrow-main"></span></li>
            <li data-sub="submenu1"><a href="/services" title="Services">Services</a><span class="arrow-main"></span></li>
            <li data-sub="submenu2"><a href="/resources" title="Resources">Resources</a><span class="arrow-main"></span></li>
            <li data-sub="submenu3"><a href="/about-us" title="About">About</a><span class="arrow-main"></span></li>
            <li data-sub="submenu4"><a href="/contact" title="Contact">Contact</a></li>
        </ul>
    </div>

    <div class="nav-top-mobile">
        <div class="select-box form">

            <ul class="inline-block-md mb-none top-nav">
                <li>

                </li>
                
                    <li>
                        <a href="/kb/user/login?next=/kb/zh-cn/window-functions-overview/"> Login</a>
                    </li>
                
            </ul>



        </div>
        <p class="text-center copyright">Copyright &copy; 2024 MariaDB. All rights reserved.</p>
    </div>
</div>
<div class="violator-wrap d-none" id="top_violator">
    <div class="container">
        <div class="row">
            <div class="col-xs-12 col-sm-12">
                <div class="violator-outer">
                    <div class="violator-inner">
                        <div class="row">
                            <div class="col-xs-12 col-sm-9 col-lg-7 col-lg-offset-2" id="top_violator_content">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="content-link" target="_blank" rel="nofollow noreferrer">
                                    <span>The Ultimate Guide to High Availability with MariaDB</span>
                                </a>
                            </div>
                            <div class="col-xs-12 col-sm-3" id="top_violator_cta">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="btn btn-mariadb" target="_blank" rel="nofollow noreferrer">Download Now</a>
                            </div>
                        </div>
                    </div>
                    <button type="button" class="btn btn-link close-btn">
                        <svg xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 24 24" width="15px" height="15px"><path d="M 4.9902344 3.9902344 A 1.0001 1.0001 0 0 0 4.2929688 5.7070312 L 10.585938 12 L 4.2929688 18.292969 A 1.0001 1.0001 0 1 0 5.7070312 19.707031 L 12 13.414062 L 18.292969 19.707031 A 1.0001 1.0001 0 1 0 19.707031 18.292969 L 13.414062 12 L 19.707031 5.7070312 A 1.0001 1.0001 0 0 0 18.980469 3.9902344 A 1.0001 1.0001 0 0 0 18.292969 4.2929688 L 12 10.585938 L 5.7070312 4.2929688 A 1.0001 1.0001 0 0 0 4.9902344 3.9902344 z"/></svg>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="wrapper">
<div id="top-nav">
    <div class="container">
        <ul class="hidden-sm hidden-xs" >
            <li><a href="https://mariadb.com/kb/">Knowledge Base</a></li>
            <li><a href="https://mariadb.com/contact/">Contact</a></li>
            
                
                    <li>
                        <a href="/kb/user/login?next=/kb/zh-cn/window-functions-overview/" rel="nofollow">Login</a>
                    </li>
                
            
            
            <li id="search-form">
                <form action="/kb/zh-cn/+search/" method="get" id="search-block-form" accept-charset="UTF-8">
                    <input id="search" title="Enter the terms you wish to search for."
                           placeholder="Search . . ." type="text"
                           name="q" value="" size="15" maxlength="128" class="form-text"
                           data-autocomplete-url="/kb/zh-cn/+search/autocomplete/">
                    <input type="hidden" name="quick" value="1" />
                    <input type="hidden" name="source" value="kb" />
                </form>
            </li>
            <li><a id="search-toggler" href="/kb/search/">Search</a></li>
            
        </ul>
    </div>
</div>
<div id="navbar-bottom" class="navbar">
    <div class="container">
        
        
        
        
        <div class="row">
            <div class="col-md-3 col-sm-9 col-xs-9">
                <a class="brand" href="/" title="MariaDB">
                    <img src="/kb/static/images/logo-2018-black.95f5978ae14d.png">
                </a>
            </div>
            <div class="col-md-9 hidden-sm hidden-xs">
                <div class="main-menu">
                    <ul id="main-menu" class="nav navbar-nav inline-block-sm">
    <li class="has-sub full-menu">
        <a href="/products" title="Products">Products</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/services" title="Services">Services</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/pricing" title="Pricing">Pricing</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/resources" title="Resources">Resources</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/about-us" title="About Us">About Us</a>
    </li>
    <li class="">
        <a class="button electric-eel small top-bar-right-download" href="/downloads/">Download</a>
    </li>
</ul>
                </div>
            </div>
            <div class="col-md-3 visible-sm visible-xs col-sm-3 col-xs-3 ps-rv">
                <div class="navbar-header text-right pull-right">
                    <button type="button" class="menu-control toggle-menu" id="open-menu">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="main">
    <div class="container">
        

        <div id="subheader1" class="clearfix">
            <div class="pull-left">
                
                <div id="breadcrumbs" class="breadcrumb">
                    <a href="/kb/zh-cn/">Knowledge Base</a>
                    


    
    » <a class="crumb" href="/kb/zh-cn/mariadb/">MariaDB - 简体中文</a>
    

    
    » <a class="crumb" href="/kb/zh-cn/mariadb-server/">MariaDB Server文档</a>
    


    » <a class="node_link crumb" href="/kb/zh-cn/window-functions-overview/">Window Functions速览</a>


                </div>
                
            </div>
        </div>
    </div>
    <div class="container" id="container-main">
        <div class="row">
            
            
                
                <aside id="sidebar-first" class="sidebar col-md-2 hidden-xs hidden-sm hidden-print">
                    
                        
                        <ul id="category_menu" class="nav nav-pills nav-stacked">
                            <li><a href="/kb/zh-cn/">首页</a></li>
                            
                                
                                    <li><a href="/kb/zh-cn/+questions/">Open Questions</a></li>
                                
                                <li><a href="/kb/zh-cn/documentation/">MariaDB Server</a></li>
                                <li><a href="/kb/zh-cn/maxscale/">MariaDB MaxScale</a></li>
                                <li><a href="/kb/zh-cn/mariadb-columnstore/">MariaDB ColumnStore</a></li>
                                <li><a href="/kb/zh-cn/connectors/">Connectors</a></li>
                            

                        </ul>
                    

                    
<div>



<div class="well well-small box actions"><div>

        <a class="btn btn-block btn-blue btn-sm" href="/kb/zh-cn/window-functions-overview/+history" rel="nofollow">历史</a>
        
        
        
        <a class="btn btn-block btn-blue btn-sm" href="/kb/zh-cn/window-functions-overview/+source/">Source</a>
        
        <a class="btn btn-block btn-blue btn-sm flag" href="/kb/zh-cn/window-functions-overview/+flag"
                data-flag-url="/kb/zh-cn/window-functions-overview/+flag" rel="nofollow">
                Flag as Spam / Inappropriate</a>
        
        <a class="btn btn-block btn-blue btn-sm" href="/kb/zh-cn/window-functions-overview/+translate/">
                Translate</a>
        

</div>
</div>





<div class="well well-small box node_info"><div>

    <dl>
        <dt>已创建</dt>
        <dd>

<span class="datetime" title="2018-04-24 04:35">6 years, 2 months ago</span></dd>

        <dt>Modified</dt>
        <dd>

<span class="datetime" title="2018-04-24 04:35">6 years, 2 months ago</span></dd>

        <dt>Type</dt>
        <dd>article</dd>

        <dt>Status</dt>
        <dd>active</dd>

        <dt>License</dt>
        <dd>
            
                <a href="/kb/zh-cn/window-functions-overview/+license/">CC BY-SA / Gnu FDL</a>
            
        </dd>

        
    </dl>

    
    <ul class="rss_feeds">
        <li><a href="/kb/zh-cn/window-functions-overview/+history/feed/">
            历史</a>
        </li>
        <li><a href="/kb/zh-cn/window-functions-overview/+comments/feed/">
            Comments</a>
        </li>
    </ul>
    

</div>
</div>





    
    
    

<div class="well well-small box attachments"><div><div class="edit_link pull-right"><a href="/kb/zh-cn/window-functions-overview/+edit/attachments/">Edit</a></div><h5>Attachments</h5></div><div>

        
            <div class="no_data">No attachments exist</div>
        
    
</div>
</div>

    



    
    
        

<div class="well well-small box"><div><h5>Localized Versions</h5></div><div>

        <ul>
            
            <li><a href="/kb/en/window-functions-overview/">Window Functions Overview</a> [en]</li>
            
        </ul>
        
</div>
</div>

    



    
    

<div class="well well-small box"><div><h5>Product Versions</h5></div><div>

        <ul id="product_chooser">
            
                <li class="mariadb_from_10_2">
                    <label><input type="checkbox" data-product-class="mariadb_from_10_2"
                            >MariaDB starting with 10.2</label>
                </li>
            
                <li class="mariadb_from_10_2">
                    <label><input type="checkbox" data-product-class="mariadb_from_10_2"
                            >MariaDB starting with 10.2</label>
                </li>
            
        </ul>
    
</div>
</div>






</div>


                    

































                </aside>
            
            
            
                
            
            
                
            
            <section id="content" class="limited_width col-md-8 clearfix">
                
                    <h1>Window Functions速览</h1>
                

                



                <div>
                    
    

    
    
    

    <div class="node creole">
        
        
        


    
    <div class="answer formatted">
        <div class="mariadb_from_10_2 mariadb from_10_2 product"><h5 class="product_title">MariaDB starting with <a href="/kb/en/what-is-mariadb-102/">10.2</a></h5><p>开窗函数是从<a href="/kb/en/what-is-mariadb-102/">MariaDB 10.2</a>开始支持的新功能。</p>
</div><div class="table_of_contents well well-small">
<h3>Contents</h3>
 <ol class="toc">

    <li class="mariadb_from_10_2"><a href="#简介" title="简介">简介</a>    <ol class="toc">

        <li class="mariadb_from_10_2"><a href="#语法" title="语法">语法</a></li>

        <li class="mariadb_from_10_2"><a href="#描述" title="描述">描述</a>    </ol>
</li>

    <li class="mariadb_from_10_2"><a href="#使用范围" title="使用范围">使用范围</a></li>

    <li class="mariadb_from_10_2"><a href="#links" title="Links">Links</a></li>

    <li class="mariadb_from_10_2"><a href="#示例" title="示例">示例</a></li>

    <li class="mariadb_from_10_2"><a href="#see-also" title="See also">See also</a> </ol>
</li>
</div>
<h2 class="anchored_heading" id="简介">简介</h2>
<p>通过开窗函数，可以为分组后的行执行一些普通SQL语句无法执行的计算。</p>
<h3 class="anchored_heading" id="语法">语法</h3>
<pre class="fixed">function (expression) OVER (
  [ PARTITION BY <em>expression_list</em> ]
  [ ORDER BY <em>order_list</em> [ <em>frame_clause</em> ] ] ) 

<em>function</em>:
  A valid window function

<em>expression_list</em>:
  expression | column_name [, expr_list ]

<em>order_list</em>:
  expression | column_name [ ASC | DESC ] 
  [, ... ]

<em>frame_clause</em>:
</pre><h3 class="anchored_heading" id="描述">描述</h3>
<p>在某种概念上来说，开窗函数类似于<a href="/kb/en/aggregate-functions/">聚合函数</a>，它们都是对一些行集合做计算。但和聚合函数不同的是，开窗函数的输出不是单行标量的。</p>
<p>MariaDB目前支持的开窗函数包括<a href="/kb/en/row_number/">ROW_NUMBER</a>, <a href="/kb/en/rank/">RANK</a>, <a href="/kb/en/dense_rank/">DENSE_RANK</a>, <a href="/kb/en/percent_rank/">PERCENT_RANK</a>, <a href="/kb/en/cume_dist/">CUME_DIST</a>, <a href="/kb/en/ntile/">NTILE</a>, <a href="/kb/en/count/">COUNT</a>, <a href="/kb/en/sum/">SUM</a>, <a href="/kb/en/avg/">AVG</a>, <a href="/kb/en/bit_or/">BIT_OR</a>, <a href="/kb/en/bit_and/">BIT_AND</a> 和 <a href="/kb/en/bit_xor/">BIT_XOR</a>。</p>
<p>开窗函数最明显的特征是在计算函数之后使用OVER关键字。默认情况下，开窗函数将所有行作为行集(即所谓的"窗口"、"分区")，可以对其使用ORDER BY子句进行排序。如果使用PARTITION BY子句，可以指定按照哪列进行分组，每个组是一个窗口。</p>
<p>例如，给定如下数据：</p>
<pre class="fixed"><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">student</span> <span class="p">(</span><span class="n">name</span> <span class="nb">CHAR</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span> <span class="n">test</span> <span class="nb">CHAR</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span> <span class="n">score</span> <span class="n">TINYINT</span><span class="p">);</span> 

<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">student</span> <span class="k">VALUES</span> 
  <span class="p">(</span><span class="s1">&#39;Chun&#39;</span><span class="p">,</span> <span class="s1">&#39;SQL&#39;</span><span class="p">,</span> <span class="mi">75</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;Chun&#39;</span><span class="p">,</span> <span class="s1">&#39;Tuning&#39;</span><span class="p">,</span> <span class="mi">73</span><span class="p">),</span> 
  <span class="p">(</span><span class="s1">&#39;Esben&#39;</span><span class="p">,</span> <span class="s1">&#39;SQL&#39;</span><span class="p">,</span> <span class="mi">43</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;Esben&#39;</span><span class="p">,</span> <span class="s1">&#39;Tuning&#39;</span><span class="p">,</span> <span class="mi">31</span><span class="p">),</span> 
  <span class="p">(</span><span class="s1">&#39;Kaolin&#39;</span><span class="p">,</span> <span class="s1">&#39;SQL&#39;</span><span class="p">,</span> <span class="mi">56</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;Kaolin&#39;</span><span class="p">,</span> <span class="s1">&#39;Tuning&#39;</span><span class="p">,</span> <span class="mi">88</span><span class="p">),</span> 
  <span class="p">(</span><span class="s1">&#39;Tatiana&#39;</span><span class="p">,</span> <span class="s1">&#39;SQL&#39;</span><span class="p">,</span> <span class="mi">87</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;Tatiana&#39;</span><span class="p">,</span> <span class="s1">&#39;Tuning&#39;</span><span class="p">,</span> <span class="mi">83</span><span class="p">);</span>
</pre><p>下面的两个查询分别按照test字段和name字段分组，并分别返回这两个分组中的平均值：</p>
<pre class="fixed"><span class="k">SELECT</span> <span class="n">name</span><span class="p">,</span> <span class="n">test</span><span class="p">,</span> <span class="n">score</span><span class="p">,</span> <span class="k">AVG</span><span class="p">(</span><span class="n">score</span><span class="p">)</span> <span class="n">OVER</span> <span class="p">(</span><span class="n">PARTITION</span> <span class="k">BY</span> <span class="n">test</span><span class="p">)</span> 
  <span class="k">AS</span> <span class="n">average_by_test</span> <span class="k">FROM</span> <span class="n">student</span><span class="p">;</span>
<span class="o">+</span><span class="c1">---------+--------+-------+-----------------+</span>
<span class="o">|</span> <span class="n">name</span>    <span class="o">|</span> <span class="n">test</span>   <span class="o">|</span> <span class="n">score</span> <span class="o">|</span> <span class="n">average_by_test</span> <span class="o">|</span>
<span class="o">+</span><span class="c1">---------+--------+-------+-----------------+</span>
<span class="o">|</span> <span class="n">Chun</span>    <span class="o">|</span> <span class="k">SQL</span>    <span class="o">|</span>    <span class="mi">75</span> <span class="o">|</span>         <span class="mi">65</span><span class="p">.</span><span class="mi">2500</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Chun</span>    <span class="o">|</span> <span class="n">Tuning</span> <span class="o">|</span>    <span class="mi">73</span> <span class="o">|</span>         <span class="mi">68</span><span class="p">.</span><span class="mi">7500</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Esben</span>   <span class="o">|</span> <span class="k">SQL</span>    <span class="o">|</span>    <span class="mi">43</span> <span class="o">|</span>         <span class="mi">65</span><span class="p">.</span><span class="mi">2500</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Esben</span>   <span class="o">|</span> <span class="n">Tuning</span> <span class="o">|</span>    <span class="mi">31</span> <span class="o">|</span>         <span class="mi">68</span><span class="p">.</span><span class="mi">7500</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Kaolin</span>  <span class="o">|</span> <span class="k">SQL</span>    <span class="o">|</span>    <span class="mi">56</span> <span class="o">|</span>         <span class="mi">65</span><span class="p">.</span><span class="mi">2500</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Kaolin</span>  <span class="o">|</span> <span class="n">Tuning</span> <span class="o">|</span>    <span class="mi">88</span> <span class="o">|</span>         <span class="mi">68</span><span class="p">.</span><span class="mi">7500</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Tatiana</span> <span class="o">|</span> <span class="k">SQL</span>    <span class="o">|</span>    <span class="mi">87</span> <span class="o">|</span>         <span class="mi">65</span><span class="p">.</span><span class="mi">2500</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Tatiana</span> <span class="o">|</span> <span class="n">Tuning</span> <span class="o">|</span>    <span class="mi">83</span> <span class="o">|</span>         <span class="mi">68</span><span class="p">.</span><span class="mi">7500</span> <span class="o">|</span>
<span class="o">+</span><span class="c1">---------+--------+-------+-----------------+</span>

<span class="k">SELECT</span> <span class="n">name</span><span class="p">,</span> <span class="n">test</span><span class="p">,</span> <span class="n">score</span><span class="p">,</span> <span class="k">AVG</span><span class="p">(</span><span class="n">score</span><span class="p">)</span> <span class="n">OVER</span> <span class="p">(</span><span class="n">PARTITION</span> <span class="k">BY</span> <span class="n">name</span><span class="p">)</span> 
  <span class="k">AS</span> <span class="n">average_by_name</span> <span class="k">FROM</span> <span class="n">student</span><span class="p">;</span>
<span class="o">+</span><span class="c1">---------+--------+-------+-----------------+</span>
<span class="o">|</span> <span class="n">name</span>    <span class="o">|</span> <span class="n">test</span>   <span class="o">|</span> <span class="n">score</span> <span class="o">|</span> <span class="n">average_by_name</span> <span class="o">|</span>
<span class="o">+</span><span class="c1">---------+--------+-------+-----------------+</span>
<span class="o">|</span> <span class="n">Chun</span>    <span class="o">|</span> <span class="k">SQL</span>    <span class="o">|</span>    <span class="mi">75</span> <span class="o">|</span>         <span class="mi">74</span><span class="p">.</span><span class="mi">0000</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Chun</span>    <span class="o">|</span> <span class="n">Tuning</span> <span class="o">|</span>    <span class="mi">73</span> <span class="o">|</span>         <span class="mi">74</span><span class="p">.</span><span class="mi">0000</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Esben</span>   <span class="o">|</span> <span class="k">SQL</span>    <span class="o">|</span>    <span class="mi">43</span> <span class="o">|</span>         <span class="mi">37</span><span class="p">.</span><span class="mi">0000</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Esben</span>   <span class="o">|</span> <span class="n">Tuning</span> <span class="o">|</span>    <span class="mi">31</span> <span class="o">|</span>         <span class="mi">37</span><span class="p">.</span><span class="mi">0000</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Kaolin</span>  <span class="o">|</span> <span class="k">SQL</span>    <span class="o">|</span>    <span class="mi">56</span> <span class="o">|</span>         <span class="mi">72</span><span class="p">.</span><span class="mi">0000</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Kaolin</span>  <span class="o">|</span> <span class="n">Tuning</span> <span class="o">|</span>    <span class="mi">88</span> <span class="o">|</span>         <span class="mi">72</span><span class="p">.</span><span class="mi">0000</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Tatiana</span> <span class="o">|</span> <span class="k">SQL</span>    <span class="o">|</span>    <span class="mi">87</span> <span class="o">|</span>         <span class="mi">85</span><span class="p">.</span><span class="mi">0000</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Tatiana</span> <span class="o">|</span> <span class="n">Tuning</span> <span class="o">|</span>    <span class="mi">83</span> <span class="o">|</span>         <span class="mi">85</span><span class="p">.</span><span class="mi">0000</span> <span class="o">|</span>
<span class="o">+</span><span class="c1">---------+--------+-------+-----------------+</span>
</pre><h2 class="anchored_heading" id="使用范围">使用范围</h2>
<p>开窗函数是标准SQL:2003中开始引入的特性，在标准SQL的子版本中又对其做了些扩展。</p>
<p>MariaDB:</p>
<ul start="1"><li>支持ROWS和RANGE类型的frame计算
<ul start="1"><li>支持所有frame边界，包括<code>RANGE PRECEDING|FOLLOWING n</code>(不像PostgreSQL或MS SQL Server一样不支持边界)
</li><li>RANGE类型的frame边界不支持DATE[TIME]数据类型和算术类型(<a href="https://jira.mariadb.org/browse/MDEV-9727">MDEV-9727</a>)
</li></ul>
</li><li>不支持GROUP类型的frame(主流数据库产品似乎都不支持该特性)
</li></ul>
<ul start="1"><li>不支持frame排除(其他数据库产品也不支持)(<a href="https://jira.mariadb.org/browse/MDEV-9724">MDEV-9724</a>)
</li><li>不支持显式的<code>NULLS FIRST</code> 和 <code>NULLS LAST</code>
</li><li>不支持窗口函数嵌套
</li></ul>
<ul start="1"><li>支持以下窗口函数：
<ul start="1"><li><a href="/kb/en/row_number/">ROW_NUMBER</a>, <a href="/kb/en/rank/">RANK</a>, <a href="/kb/en/dense_rank/">DENSE_RANK</a>, 
</li><li><a href="/kb/en/percent_rank/">PERCENT_RANK</a>, <a href="/kb/en/cume_dist/">CUME_DIST</a>, <a href="/kb/en/ntile/">NTILE</a>
</li></ul>
</li></ul>
<ul start="1"><li>聚合函数：<a href="/kb/en/count/">COUNT</a>, <a href="/kb/en/sum/">SUM</a>, <a href="/kb/en/avg/">AVG</a>, <a href="/kb/en/bit_or/">BIT_OR</a>, <a href="/kb/en/bit_and/">BIT_AND</a>, <a href="/kb/en/bit_xor/">BIT_XOR</a>.
</li><li>不支持带有<code>DISTINCT</code>的聚合函数，如<code>COUNT( DISTINCT x)</code>。
</li></ul>
<h2 class="anchored_heading" id="links">Links</h2>
<ul start="1"><li><a href="https://jira.mariadb.org/browse/MDEV-6115">MDEV-6115</a> is the main jira task for window functions development. Other tasks are are attached as sub-tasks
</li><li><a href="https://github.com/MariaDB/server/commits/bb-10.2-mdev9543">bb-10.2-mdev9543</a> is the feature tree for window functions. Development is ongoing, and this tree has the newest changes.
</li><li>Testcases are in <code>mysql-test/t/win*.test</code>
</li></ul>
<h2 class="anchored_heading" id="示例">示例</h2>
<p>给定如下示例数据：</p>
<pre class="fixed"><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">users</span> <span class="p">(</span>
  <span class="n">email</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">30</span><span class="p">),</span> 
  <span class="n">first_name</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">30</span><span class="p">),</span> 
  <span class="n">last_name</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">30</span><span class="p">),</span> 
  <span class="n">account_type</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span>
<span class="p">);</span>

<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">users</span> <span class="k">VALUES</span> 
  <span class="p">(</span><span class="s1">&#39;<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="eb8a8f868285ab89849898c584998c">[email&#160;protected]</a>&#39;</span><span class="p">,</span> <span class="s1">&#39;Admin&#39;</span><span class="p">,</span> <span class="s1">&#39;Boss&#39;</span><span class="p">,</span> <span class="s1">&#39;admin&#39;</span><span class="p">),</span> 
  <span class="p">(</span><span class="s1">&#39;<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="bad8d5d894d9dbc8d6c9dfd4fadcd5d594d8dbc8">[email&#160;protected]</a>&#39;</span><span class="p">,</span> <span class="s1">&#39;Bob&#39;</span><span class="p">,</span> <span class="s1">&#39;Carlsen&#39;</span><span class="p">,</span> <span class="s1">&#39;regular&#39;</span><span class="p">),</span>
  <span class="p">(</span><span class="s1">&#39;<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="5134353538347f22253427343f2211353025307f3e2336">[email&#160;protected]</a>&#39;</span><span class="p">,</span> <span class="s1">&#39;Eddie&#39;</span><span class="p">,</span> <span class="s1">&#39;Stevens&#39;</span><span class="p">,</span> <span class="s1">&#39;regular&#39;</span><span class="p">),</span>
  <span class="p">(</span><span class="s1">&#39;<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="016b6e696f2f726c6875694179787b2f6e7366">[email&#160;protected]</a>&#39;</span><span class="p">,</span> <span class="s1">&#39;John&#39;</span><span class="p">,</span> <span class="s1">&#39;Smith&#39;</span><span class="p">,</span> <span class="s1">&#39;regular&#39;</span><span class="p">),</span> 
  <span class="p">(</span><span class="s1">&#39;<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="65170a0a1125070a16164b0a1702">[email&#160;protected]</a>&#39;</span><span class="p">,</span> <span class="s1">&#39;Root&#39;</span><span class="p">,</span> <span class="s1">&#39;Chief&#39;</span><span class="p">,</span> <span class="s1">&#39;admin&#39;</span><span class="p">)</span>
</pre><p>首先，对email按字母顺序排序，并让<em>rnum</em>值从1开始。可以使用窗口函数<a href="/kb/en/row_number/">ROW_NUMBER</a>实现：</p>
<pre class="fixed"><span class="k">SELECT</span> <span class="n">row_number</span><span class="p">()</span> <span class="n">OVER</span> <span class="p">(</span><span class="k">ORDER</span> <span class="k">BY</span> <span class="n">email</span><span class="p">)</span> <span class="k">AS</span> <span class="n">rnum</span><span class="p">,</span>
    <span class="n">email</span><span class="p">,</span> <span class="n">first_name</span><span class="p">,</span> <span class="n">last_name</span><span class="p">,</span> <span class="n">account_type</span>
<span class="k">FROM</span> <span class="n">users</span> <span class="k">ORDER</span> <span class="k">BY</span> <span class="n">email</span><span class="p">;</span>
<span class="o">+</span><span class="c1">------+------------------------+------------+-----------+--------------+</span>
<span class="o">|</span> <span class="n">rnum</span> <span class="o">|</span> <span class="n">email</span>                  <span class="o">|</span> <span class="n">first_name</span> <span class="o">|</span> <span class="n">last_name</span> <span class="o">|</span> <span class="n">account_type</span> <span class="o">|</span>
<span class="o">+</span><span class="c1">------+------------------------+------------+-----------+--------------+</span>
<span class="o">|</span>    <span class="mi">1</span> <span class="o">|</span> <span class="k">admin</span><span class="o">@</span><span class="n">boss</span><span class="p">.</span><span class="n">org</span>         <span class="o">|</span> <span class="k">Admin</span>      <span class="o">|</span> <span class="n">Boss</span>      <span class="o">|</span> <span class="k">admin</span>        <span class="o">|</span>
<span class="o">|</span>    <span class="mi">2</span> <span class="o">|</span> <span class="n">bob</span><span class="p">.</span><span class="n">carlsen</span><span class="o">@</span><span class="n">foo</span><span class="p">.</span><span class="n">bar</span>    <span class="o">|</span> <span class="n">Bob</span>        <span class="o">|</span> <span class="n">Carlsen</span>   <span class="o">|</span> <span class="n">regular</span>      <span class="o">|</span>
<span class="o">|</span>    <span class="mi">3</span> <span class="o">|</span> <span class="n">eddie</span><span class="p">.</span><span class="n">stevens</span><span class="o">@</span><span class="k">data</span><span class="p">.</span><span class="n">org</span> <span class="o">|</span> <span class="n">Eddie</span>      <span class="o">|</span> <span class="n">Stevens</span>   <span class="o">|</span> <span class="n">regular</span>      <span class="o">|</span>
<span class="o">|</span>    <span class="mi">4</span> <span class="o">|</span> <span class="n">john</span><span class="p">.</span><span class="n">smith</span><span class="o">@</span><span class="n">xyz</span><span class="p">.</span><span class="n">org</span>     <span class="o">|</span> <span class="n">John</span>       <span class="o">|</span> <span class="n">Smith</span>     <span class="o">|</span> <span class="n">regular</span>      <span class="o">|</span>
<span class="o">|</span>    <span class="mi">5</span> <span class="o">|</span> <span class="n">root</span><span class="o">@</span><span class="n">boss</span><span class="p">.</span><span class="n">org</span>          <span class="o">|</span> <span class="n">Root</span>       <span class="o">|</span> <span class="n">Chief</span>     <span class="o">|</span> <span class="k">admin</span>        <span class="o">|</span>
<span class="o">+</span><span class="c1">------+------------------------+------------+-----------+--------------</span>
</pre><p>还可以根据account类型生成独立的序列号，只需使用PARTITION BY子句对account进行分区：</p>
<pre class="fixed">
<span class="k">SELECT</span> <span class="n">row_number</span><span class="p">()</span> <span class="n">OVER</span> <span class="p">(</span><span class="n">PARTITION</span> <span class="k">BY</span> <span class="n">account_type</span> <span class="k">ORDER</span> <span class="k">BY</span> <span class="n">email</span><span class="p">)</span> <span class="k">AS</span> <span class="n">rnum</span><span class="p">,</span> 
  <span class="n">email</span><span class="p">,</span> <span class="n">first_name</span><span class="p">,</span> <span class="n">last_name</span><span class="p">,</span> <span class="n">account_type</span> 
<span class="k">FROM</span> <span class="n">users</span> <span class="k">ORDER</span> <span class="k">BY</span> <span class="n">account_type</span><span class="p">,</span><span class="n">email</span><span class="p">;</span>
<span class="o">+</span><span class="c1">------+------------------------+------------+-----------+--------------+</span>
<span class="o">|</span> <span class="n">rnum</span> <span class="o">|</span> <span class="n">email</span>                  <span class="o">|</span> <span class="n">first_name</span> <span class="o">|</span> <span class="n">last_name</span> <span class="o">|</span> <span class="n">account_type</span> <span class="o">|</span>
<span class="o">+</span><span class="c1">------+------------------------+------------+-----------+--------------+</span>
<span class="o">|</span>    <span class="mi">1</span> <span class="o">|</span> <span class="k">admin</span><span class="o">@</span><span class="n">boss</span><span class="p">.</span><span class="n">org</span>         <span class="o">|</span> <span class="k">Admin</span>      <span class="o">|</span> <span class="n">Boss</span>      <span class="o">|</span> <span class="k">admin</span>        <span class="o">|</span>
<span class="o">|</span>    <span class="mi">2</span> <span class="o">|</span> <span class="n">root</span><span class="o">@</span><span class="n">boss</span><span class="p">.</span><span class="n">org</span>          <span class="o">|</span> <span class="n">Root</span>       <span class="o">|</span> <span class="n">Chief</span>     <span class="o">|</span> <span class="k">admin</span>        <span class="o">|</span>
<span class="o">|</span>    <span class="mi">1</span> <span class="o">|</span> <span class="n">bob</span><span class="p">.</span><span class="n">carlsen</span><span class="o">@</span><span class="n">foo</span><span class="p">.</span><span class="n">bar</span>    <span class="o">|</span> <span class="n">Bob</span>        <span class="o">|</span> <span class="n">Carlsen</span>   <span class="o">|</span> <span class="n">regular</span>      <span class="o">|</span>
<span class="o">|</span>    <span class="mi">2</span> <span class="o">|</span> <span class="n">eddie</span><span class="p">.</span><span class="n">stevens</span><span class="o">@</span><span class="k">data</span><span class="p">.</span><span class="n">org</span> <span class="o">|</span> <span class="n">Eddie</span>      <span class="o">|</span> <span class="n">Stevens</span>   <span class="o">|</span> <span class="n">regular</span>      <span class="o">|</span>
<span class="o">|</span>    <span class="mi">3</span> <span class="o">|</span> <span class="n">john</span><span class="p">.</span><span class="n">smith</span><span class="o">@</span><span class="n">xyz</span><span class="p">.</span><span class="n">org</span>     <span class="o">|</span> <span class="n">John</span>       <span class="o">|</span> <span class="n">Smith</span>     <span class="o">|</span> <span class="n">regular</span>      <span class="o">|</span>
<span class="o">+</span><span class="c1">------+------------------------+------------+-----------+--------------+</span>
</pre><p>给定如下结构的表和数据，需求是检索出每个department中薪水前5的员工。</p>
<pre class="fixed"><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">employee_salaries</span> <span class="p">(</span><span class="n">dept</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">20</span><span class="p">),</span> <span class="n">name</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">20</span><span class="p">),</span> <span class="n">salary</span> <span class="nb">INT</span><span class="p">(</span><span class="mi">11</span><span class="p">));</span>

<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">employee_salaries</span> <span class="k">VALUES</span>
<span class="p">(</span><span class="s1">&#39;Engineering&#39;</span><span class="p">,</span> <span class="s1">&#39;Dharma&#39;</span><span class="p">,</span> <span class="mi">3500</span><span class="p">),</span>
<span class="p">(</span><span class="s1">&#39;Engineering&#39;</span><span class="p">,</span> <span class="s1">&#39;Bình&#39;</span><span class="p">,</span> <span class="mi">3000</span><span class="p">),</span>
<span class="p">(</span><span class="s1">&#39;Engineering&#39;</span><span class="p">,</span> <span class="s1">&#39;Adalynn&#39;</span><span class="p">,</span> <span class="mi">2800</span><span class="p">),</span>
<span class="p">(</span><span class="s1">&#39;Engineering&#39;</span><span class="p">,</span> <span class="s1">&#39;Samuel&#39;</span><span class="p">,</span> <span class="mi">2500</span><span class="p">),</span>
<span class="p">(</span><span class="s1">&#39;Engineering&#39;</span><span class="p">,</span> <span class="s1">&#39;Cveta&#39;</span><span class="p">,</span> <span class="mi">2200</span><span class="p">),</span>
<span class="p">(</span><span class="s1">&#39;Engineering&#39;</span><span class="p">,</span> <span class="s1">&#39;Ebele&#39;</span><span class="p">,</span> <span class="mi">1800</span><span class="p">),</span>
<span class="p">(</span><span class="s1">&#39;Sales&#39;</span><span class="p">,</span> <span class="s1">&#39;Carbry&#39;</span><span class="p">,</span> <span class="mi">500</span><span class="p">),</span>
<span class="p">(</span><span class="s1">&#39;Sales&#39;</span><span class="p">,</span> <span class="s1">&#39;Clytemnestra&#39;</span><span class="p">,</span> <span class="mi">400</span><span class="p">),</span>
<span class="p">(</span><span class="s1">&#39;Sales&#39;</span><span class="p">,</span> <span class="s1">&#39;Juraj&#39;</span><span class="p">,</span> <span class="mi">300</span><span class="p">),</span>
<span class="p">(</span><span class="s1">&#39;Sales&#39;</span><span class="p">,</span> <span class="s1">&#39;Kalpana&#39;</span><span class="p">,</span> <span class="mi">300</span><span class="p">),</span>
<span class="p">(</span><span class="s1">&#39;Sales&#39;</span><span class="p">,</span> <span class="s1">&#39;Svantepolk&#39;</span><span class="p">,</span> <span class="mi">250</span><span class="p">),</span>
<span class="p">(</span><span class="s1">&#39;Sales&#39;</span><span class="p">,</span> <span class="s1">&#39;Angelo&#39;</span><span class="p">,</span> <span class="mi">200</span><span class="p">);</span>
</pre><p>如果不使用窗口函数，可以使用下面的语句来实现：</p>
<pre class="fixed"><span class="k">select</span> <span class="n">dept</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">salary</span>
<span class="k">from</span> <span class="n">employee_salaries</span> <span class="k">as</span> <span class="n">t1</span>
<span class="k">where</span> <span class="p">(</span><span class="k">select</span> <span class="k">count</span><span class="p">(</span><span class="n">t2</span><span class="p">.</span><span class="n">salary</span><span class="p">)</span>
       <span class="k">from</span> <span class="n">employee_salaries</span> <span class="k">as</span> <span class="n">t2</span>
       <span class="k">where</span> <span class="n">t1</span><span class="p">.</span><span class="n">name</span> <span class="o">!=</span> <span class="n">t2</span><span class="p">.</span><span class="n">name</span> <span class="k">and</span>
             <span class="n">t1</span><span class="p">.</span><span class="n">dept</span> <span class="o">=</span> <span class="n">t2</span><span class="p">.</span><span class="n">dept</span> <span class="k">and</span>
             <span class="n">t2</span><span class="p">.</span><span class="n">salary</span> <span class="o">&gt;</span> <span class="n">t1</span><span class="p">.</span><span class="n">salary</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">5</span>
<span class="k">order</span> <span class="k">by</span> <span class="n">dept</span><span class="p">,</span> <span class="n">salary</span> <span class="k">desc</span><span class="p">;</span>

<span class="o">+</span><span class="c1">-------------+--------------+--------+</span>
<span class="o">|</span> <span class="n">dept</span>        <span class="o">|</span> <span class="n">name</span>         <span class="o">|</span> <span class="n">salary</span> <span class="o">|</span>
<span class="o">+</span><span class="c1">-------------+--------------+--------+</span>
<span class="o">|</span> <span class="n">Engineering</span> <span class="o">|</span> <span class="n">Dharma</span>       <span class="o">|</span>   <span class="mi">3500</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Engineering</span> <span class="o">|</span> <span class="n">B</span><span class="err">ì</span><span class="n">nh</span>         <span class="o">|</span>   <span class="mi">3000</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Engineering</span> <span class="o">|</span> <span class="n">Adalynn</span>      <span class="o">|</span>   <span class="mi">2800</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Engineering</span> <span class="o">|</span> <span class="n">Samuel</span>       <span class="o">|</span>   <span class="mi">2500</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Engineering</span> <span class="o">|</span> <span class="n">Cveta</span>        <span class="o">|</span>   <span class="mi">2200</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Sales</span>       <span class="o">|</span> <span class="n">Carbry</span>       <span class="o">|</span>    <span class="mi">500</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Sales</span>       <span class="o">|</span> <span class="n">Clytemnestra</span> <span class="o">|</span>    <span class="mi">400</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Sales</span>       <span class="o">|</span> <span class="n">Juraj</span>        <span class="o">|</span>    <span class="mi">300</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Sales</span>       <span class="o">|</span> <span class="n">Kalpana</span>      <span class="o">|</span>    <span class="mi">300</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Sales</span>       <span class="o">|</span> <span class="n">Svantepolk</span>   <span class="o">|</span>    <span class="mi">250</span> <span class="o">|</span>
<span class="o">+</span><span class="c1">-------------+--------------+--------+</span>
</pre><p>但以上实现方式有如下缺点：</p>
<ul start="1"><li>如果employee_salary表没有索引且表较大，查询将耗费大量时间
</li><li>添加和维护索引会增加开销，且即使<em>dept</em>和<em>salary</em>上有索引，每次子查询执行时也都会执行索引查找(index lookup)从而加重开销。
</li></ul>
<p>尝试使用窗口函数来实现上面的需求。首先，使用<a href="/kb/en/rank/">RANK</a>窗口函数为每个department中的employee生成排名序列。</p>
<pre class="fixed"><span class="k">select</span> <span class="n">rank</span><span class="p">()</span> <span class="n">over</span> <span class="p">(</span><span class="n">partition</span> <span class="k">by</span> <span class="n">dept</span> <span class="k">order</span> <span class="k">by</span> <span class="n">salary</span> <span class="k">desc</span><span class="p">)</span> <span class="k">as</span> <span class="n">ranking</span><span class="p">,</span>
    <span class="n">dept</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">salary</span>
    <span class="k">from</span> <span class="n">employee_salaries</span>
    <span class="k">order</span> <span class="k">by</span> <span class="n">dept</span><span class="p">,</span> <span class="n">ranking</span><span class="p">;</span>
<span class="o">+</span><span class="c1">---------+-------------+--------------+--------+</span>
<span class="o">|</span> <span class="n">ranking</span> <span class="o">|</span> <span class="n">dept</span>        <span class="o">|</span> <span class="n">name</span>         <span class="o">|</span> <span class="n">salary</span> <span class="o">|</span>
<span class="o">+</span><span class="c1">---------+-------------+--------------+--------+</span>
<span class="o">|</span>       <span class="mi">1</span> <span class="o">|</span> <span class="n">Engineering</span> <span class="o">|</span> <span class="n">Dharma</span>       <span class="o">|</span>   <span class="mi">3500</span> <span class="o">|</span>
<span class="o">|</span>       <span class="mi">2</span> <span class="o">|</span> <span class="n">Engineering</span> <span class="o">|</span> <span class="n">B</span><span class="err">ì</span><span class="n">nh</span>         <span class="o">|</span>   <span class="mi">3000</span> <span class="o">|</span>
<span class="o">|</span>       <span class="mi">3</span> <span class="o">|</span> <span class="n">Engineering</span> <span class="o">|</span> <span class="n">Adalynn</span>      <span class="o">|</span>   <span class="mi">2800</span> <span class="o">|</span>
<span class="o">|</span>       <span class="mi">4</span> <span class="o">|</span> <span class="n">Engineering</span> <span class="o">|</span> <span class="n">Samuel</span>       <span class="o">|</span>   <span class="mi">2500</span> <span class="o">|</span>
<span class="o">|</span>       <span class="mi">5</span> <span class="o">|</span> <span class="n">Engineering</span> <span class="o">|</span> <span class="n">Cveta</span>        <span class="o">|</span>   <span class="mi">2200</span> <span class="o">|</span>
<span class="o">|</span>       <span class="mi">6</span> <span class="o">|</span> <span class="n">Engineering</span> <span class="o">|</span> <span class="n">Ebele</span>        <span class="o">|</span>   <span class="mi">1800</span> <span class="o">|</span>
<span class="o">|</span>       <span class="mi">1</span> <span class="o">|</span> <span class="n">Sales</span>       <span class="o">|</span> <span class="n">Carbry</span>       <span class="o">|</span>    <span class="mi">500</span> <span class="o">|</span>
<span class="o">|</span>       <span class="mi">2</span> <span class="o">|</span> <span class="n">Sales</span>       <span class="o">|</span> <span class="n">Clytemnestra</span> <span class="o">|</span>    <span class="mi">400</span> <span class="o">|</span>
<span class="o">|</span>       <span class="mi">3</span> <span class="o">|</span> <span class="n">Sales</span>       <span class="o">|</span> <span class="n">Juraj</span>        <span class="o">|</span>    <span class="mi">300</span> <span class="o">|</span>
<span class="o">|</span>       <span class="mi">3</span> <span class="o">|</span> <span class="n">Sales</span>       <span class="o">|</span> <span class="n">Kalpana</span>      <span class="o">|</span>    <span class="mi">300</span> <span class="o">|</span>
<span class="o">|</span>       <span class="mi">5</span> <span class="o">|</span> <span class="n">Sales</span>       <span class="o">|</span> <span class="n">Svantepolk</span>   <span class="o">|</span>    <span class="mi">250</span> <span class="o">|</span>
<span class="o">|</span>       <span class="mi">6</span> <span class="o">|</span> <span class="n">Sales</span>       <span class="o">|</span> <span class="n">Angelo</span>       <span class="o">|</span>    <span class="mi">200</span> <span class="o">|</span>
<span class="o">+</span><span class="c1">---------+-------------+--------------+--------+</span>
</pre><p>每个department都有独立的排名序列。该特殊序列是<em>rank()</em>函数根据OVER()子句中的ORDER BY(对salary排序)生成的。为了结果易读性，在外部查询中还使用了ORDER BY子句对<em>dept</em>和<em>ranking</em>列进行排序。</p>
<p>现在，我们需要减少每个department中的员工数量，以便挑选出薪水前5的员工。但下面的语句会报错：</p>
<pre class="fixed"><span class="k">select</span>
<span class="n">rank</span><span class="p">()</span> <span class="n">over</span> <span class="p">(</span><span class="n">partition</span> <span class="k">by</span> <span class="n">dept</span> <span class="k">order</span> <span class="k">by</span> <span class="n">salary</span> <span class="k">desc</span><span class="p">)</span> <span class="k">as</span> <span class="n">ranking</span><span class="p">,</span>
<span class="n">dept</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">salary</span>
<span class="k">from</span> <span class="n">employee_salaries</span>
<span class="k">where</span> <span class="n">ranking</span> <span class="o">&lt;=</span> <span class="mi">5</span>
<span class="k">order</span> <span class="k">by</span> <span class="n">dept</span><span class="p">,</span> <span class="n">ranking</span><span class="p">;</span>

<span class="n">ERROR</span> <span class="mi">1054</span> <span class="p">(</span><span class="mi">42</span><span class="n">S22</span><span class="p">):</span> <span class="k">Unknown</span> <span class="k">column</span> <span class="s1">&#39;ranking&#39;</span> <span class="k">in</span> <span class="s1">&#39;where clause&#39;</span>
</pre><p>通过WHERE子句尝试从每个department窗口中挑选前<code>ranking&lt;=5</code>的行将无法正确执行，因为ranking是窗口函数计算的来的。而窗口函数的计算是在WHERE子句、GROUP BY子句、HAVING子句之后才执行的，它仅在ORDER BY子句之前。因此窗口函数是在筛选之后，并对结果集分组之后才计算的，WHERE子句无法筛选窗口函数计算的结果。</p>
<p>要解决这各问题，需要将上面查询的结果导出到另一张表中，然后对该表进行WHERE筛选：</p>
<pre class="fixed"><span class="k">select</span> <span class="o">*</span><span class="k">from</span> <span class="p">(</span><span class="k">select</span> <span class="n">rank</span><span class="p">()</span> <span class="n">over</span> <span class="p">(</span><span class="n">partition</span> <span class="k">by</span> <span class="n">dept</span> <span class="k">order</span> <span class="k">by</span> <span class="n">salary</span> <span class="k">desc</span><span class="p">)</span> <span class="k">as</span> <span class="n">ranking</span><span class="p">,</span>
  <span class="n">dept</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">salary</span>
<span class="k">from</span> <span class="n">employee_salaries</span><span class="p">)</span> <span class="k">as</span> <span class="n">salary_ranks</span>
<span class="k">where</span> <span class="p">(</span><span class="n">salary_ranks</span><span class="p">.</span><span class="n">ranking</span> <span class="o">&lt;=</span> <span class="mi">5</span><span class="p">)</span>
  <span class="k">order</span> <span class="k">by</span> <span class="n">dept</span><span class="p">,</span> <span class="n">ranking</span><span class="p">;</span>
<span class="o">+</span><span class="c1">---------+-------------+--------------+--------+</span>
<span class="o">|</span> <span class="n">ranking</span> <span class="o">|</span> <span class="n">dept</span>        <span class="o">|</span> <span class="n">name</span>         <span class="o">|</span> <span class="n">salary</span> <span class="o">|</span>
<span class="o">+</span><span class="c1">---------+-------------+--------------+--------+</span>
<span class="o">|</span>       <span class="mi">1</span> <span class="o">|</span> <span class="n">Engineering</span> <span class="o">|</span> <span class="n">Dharma</span>       <span class="o">|</span>   <span class="mi">3500</span> <span class="o">|</span>
<span class="o">|</span>       <span class="mi">2</span> <span class="o">|</span> <span class="n">Engineering</span> <span class="o">|</span> <span class="n">B</span><span class="err">ì</span><span class="n">nh</span>         <span class="o">|</span>   <span class="mi">3000</span> <span class="o">|</span>
<span class="o">|</span>       <span class="mi">3</span> <span class="o">|</span> <span class="n">Engineering</span> <span class="o">|</span> <span class="n">Adalynn</span>      <span class="o">|</span>   <span class="mi">2800</span> <span class="o">|</span>
<span class="o">|</span>       <span class="mi">4</span> <span class="o">|</span> <span class="n">Engineering</span> <span class="o">|</span> <span class="n">Samuel</span>       <span class="o">|</span>   <span class="mi">2500</span> <span class="o">|</span>
<span class="o">|</span>       <span class="mi">5</span> <span class="o">|</span> <span class="n">Engineering</span> <span class="o">|</span> <span class="n">Cveta</span>        <span class="o">|</span>   <span class="mi">2200</span> <span class="o">|</span>
<span class="o">|</span>       <span class="mi">1</span> <span class="o">|</span> <span class="n">Sales</span>       <span class="o">|</span> <span class="n">Carbry</span>       <span class="o">|</span>    <span class="mi">500</span> <span class="o">|</span>
<span class="o">|</span>       <span class="mi">2</span> <span class="o">|</span> <span class="n">Sales</span>       <span class="o">|</span> <span class="n">Clytemnestra</span> <span class="o">|</span>    <span class="mi">400</span> <span class="o">|</span>
<span class="o">|</span>       <span class="mi">3</span> <span class="o">|</span> <span class="n">Sales</span>       <span class="o">|</span> <span class="n">Juraj</span>        <span class="o">|</span>    <span class="mi">300</span> <span class="o">|</span>
<span class="o">|</span>       <span class="mi">3</span> <span class="o">|</span> <span class="n">Sales</span>       <span class="o">|</span> <span class="n">Kalpana</span>      <span class="o">|</span>    <span class="mi">300</span> <span class="o">|</span>
<span class="o">|</span>       <span class="mi">5</span> <span class="o">|</span> <span class="n">Sales</span>       <span class="o">|</span> <span class="n">Svantepolk</span>   <span class="o">|</span>    <span class="mi">250</span> <span class="o">|</span>
<span class="o">+</span><span class="c1">---------+-------------+--------------+--------+</span>
</pre><h2 class="anchored_heading" id="see-also">See also</h2>
<ul start="1"><li><a href="https://mariadb.com/resources/blog/introduction-window-functions-mariadb-server-102">Introduction to Window Functions in MariaDB Server 10.2</a></li></ul>

    </div>


        
            <div id="subscribe" class="well well-small hide hidden-print"
                 data-subscribe-url="/kb/zh-cn/window-functions-overview/+subscriptions/add"
                 data-unsubscribe-url="/kb/zh-cn/window-functions-overview/+subscriptions/remove">
            </div>
        

        
        
    
        <div class="simple_section_nav">
            <ul class="nav nav-pills">
                
                    <li><a href="/kb/zh-cn/wait-and-nowait/">
                        ← WAIT 和 NOWAIT
                    </a>
                    </li>
                
                
                    <li><a href="/kb/zh-cn/mariadb-server/">
                        ↑ MariaDB Server文档 ↑
                    </a>
                    </li>
                
                
                    <li class="pull-right"><a href="/kb/zh-cn/xtrabackup-v2-sst/">
                        xtrabackup-v2 SST方法 →
                    </a>
                    </li>
                
            </ul>
        </div>
    

        

        
        <h2>Comments</h2>
        
    
    <div id="comments" data-node-id="7559" data-comments-url="/kb/zh-cn/window-functions-overview/+comments"
         data-reply-url="/kb/zh-cn/window-functions-overview/comments/post/">
        Comments loading...
    </div>

        

    </div>


                    <div id="content_disclaimer" class="graybox">
                        Content reproduced on this site is the property of its respective owners,
                        and this content is not reviewed in advance by MariaDB. The views, information and opinions
                        expressed by this content do not necessarily represent those of MariaDB or any other party.
                    </div>
                </div>
            </section>

            
                <div id="right_bar" class="col-md-2">
                    
    
        
        <ul class="section_navigation well well-small hidden-xs hidden-sm">
            
                <li class="parent"><a href="/kb/zh-cn/mariadb-server/">
                    ↑ MariaDB Server文档 ↑
                </a>
                </li>
            
            
                
                    <li>
                        <a href="/kb/zh-cn/alter/">
                            
                            ALTER语句
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/create/">
                            
                            CREATE
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/mariabackup/">
                            
                            Mariabackup
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/mariadb-columnstore/">
                            
                            MariaDB ColumnStore
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/mariadb-administration/">
                            
                            MariaDB 管理
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/standard-replication/">
                            
                            MariaDB复制
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/mariadb-server-mariadb-server/">
                            
                            使用MariaDB Server
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/columns-storage-engines-and-plugins/">
                            
                            列、存储引擎和插件
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/backing-up-and-restoring-databases/">
                            
                            备份和恢复数据库
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/data-types/">
                            
                            数据类型
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/account-management-sql-commands/">
                            
                            账户管理中的SQL命令
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/alter-user/">
                            
                            ALTER USER
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/analyze-format-json/">
                            
                            ANALYZE FORMAT=JSON
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/mariadb-analyze-formatjson/">
                            
                            ANALYZE FORMAT=JSON 示例
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/begin-end/">
                            
                            BEGIN END
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/case-statement/">
                            
                            CASE STATEMENT（条件语句）
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/close/">
                            
                            CLOSE(关闭)
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/coalesce/">
                            
                            COALESCE
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/concurrent-inserts/">
                            
                            Concurrent Inserts
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/create-database/">
                            
                            CREATE DATABASE
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/create-function/">
                            
                            CREATE FUNCTION
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/create-procedure/">
                            
                            CREATE PROCEDURE
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/create-trigger/">
                            
                            CREATE TRIGGER
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/database/">
                            
                            DATABASE
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/declare-handler/">
                            
                            DECLARE HANDLER
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/declare-variable/">
                            
                            DECLARE Variable
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/delete/">
                            
                            DELETE
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/drop-role/">
                            
                            DROP ROLE
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/drop-user/">
                            
                            DROP USER
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/execute-statement/">
                            
                            EXECUTE 语句
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/fetch/">
                            
                            FETCH
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/galera-cluster-system-variables/">
                            
                            Galera Cluster System Variables
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/getting-started-with-mariadb-galera-cluster/">
                            
                            Getting Started with MariaDB Galera Cluster
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/grant/">
                            
                            GRANT
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/greatest/">
                            
                            GREATEST
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/group_concat/">
                            
                            GROUP_CONCAT
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/help-command/">
                            
                            HELP 命令
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/high_prioritylow_priority/">
                            
                            HIGH_PRIORITY和LOW_PRIORITY
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/how-to-quickly-insert-data-into-mariadb/">
                            
                            How to Quickly Insert Data Into MariaDB
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/if-statement/">
                            
                            IF 语句
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/in/">
                            
                            IN
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/insert/">
                            
                            INSERT
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/insert-on-duplicate-key-update/">
                            
                            INSERT ON DUPLICATE KEY UPDATE
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/insert-select/">
                            
                            INSERT SELECT
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/iterate/">
                            
                            ITERATE
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/labels/">
                            
                            Labels
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/last_value/">
                            
                            LAST_VALUE()
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/leave/">
                            
                            LEAVE（退出）
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/load-data-infile/">
                            
                            LOAD DATA INFILE
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/loop/">
                            
                            LOOP（循环）
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/sql_modeoracle-from-mariadb-103/">
                            
                            MariaDB 10.3支持SQL_MODE=ORACLE
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/mysqldump/">
                            
                            mysqldump
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/non-recursive-common-table-expressions-overview/">
                            
                            Non-Recursive Common Table Expressions Overview
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/rename-table/">
                            
                            RENAME TABLE
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/rename-user/">
                            
                            RENAME USER
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/replace/">
                            
                            REPLACE
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/revoke/">
                            
                            REVOKE
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/selectinto/">
                            
                            SELECT INTO
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/select-into-outfile/">
                            
                            SELECT INTO OUTFILE
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/selinux/">
                            
                            SELinux
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/set/">
                            
                            SET
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/set-default-role/">
                            
                            SET DEFAULT ROLE
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/set-names/">
                            
                            SET NAMES
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/set-password/">
                            
                            SET PASSWORD
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/set-role/">
                            
                            SET ROLE
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/set-variable/">
                            
                            SET Variable
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/show-create-user/">
                            
                            SHOW CREATE USER
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/show-databases/">
                            
                            SHOW DATABASES
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/show-grants/">
                            
                            SHOW GRANTS
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/ssl-overview/">
                            
                            SSL 综述
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/string-literals/">
                            
                            String Literals
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/tinyint/">
                            
                            TINYINT
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/truncate-table/">
                            
                            TRUNCATE TABLE
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/update/">
                            
                            UPDATE
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/wait-and-nowait/">
                            
                            WAIT 和 NOWAIT
                        </a>
                    </li>
                
            
                
                    <li class="active">
                        <span>Window Functions速览</span>
                        
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/xtrabackup-v2-sst/">
                            
                            xtrabackup-v2 SST方法
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/auto_increment-handling-in-xtradbinnodb/">
                            
                            XtraDB/InnoDB中的AUTO_INCREMENT处理方式
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/xtradbinnodb-file-format/">
                            
                            XtraDB/InnoDB的文件格式
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/general-query-log/">
                            
                            一般查询日志
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/using-innodb-instead-of-xtradb/">
                            
                            使用InnoDB替代XtraDB
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/about-xtradb/">
                            
                            关于 XtraDB 存储引擎
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/create-user/">
                            
                            创建用户
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/start-slave/">
                            
                            启动从服务
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/declare-cursor/">
                            
                            声明游标
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/performance-schema-table_lock_waits_summary_by_table-table/">
                            
                            性能配置方案 table_lock_waits_summary_by_table 表
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/numeric-data-type-overview/">
                            
                            数值型的数据类型概述
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/identifier-names/">
                            
                            标识符命名规则
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/identifier-case-sensitivity/">
                            
                            标识符对大小写敏感的情况
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/identifier-qualifiers/">
                            
                            标识限定符
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/user-defined-variables/">
                            
                            用户变量(User-Defined Variables)
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/cache-index/">
                            
                            索引-缓存
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/setting-character-sets-and-collations/">
                            
                            设置字符集和排序规则
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/assignment-operator/">
                            
                            赋值操作符(:=)
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/reset/">
                            
                            重置（清零）
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/error-log/">
                            
                            错误日志
                        </a>
                    </li>
                
            
        </ul>
    
    

                </div>
            
        </div>
    </div>
</div>

<!-- Footer -->
<footer id="footer">
    <div class="footer">
        <div class="container">
            <div class="row">
                <div class="col-xs-12">
                    <ul class="list-inline text-center footer-nav">
                        <li>
                            <h5>
                                <a href="https://mariadb.com/products" title="Products">Products</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/services" title="Services">Services</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/pricing" title="Pricing">Pricing</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/resources" title="Resources">Resources</a>
                            </h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/about-us" title="About MariaDB">About Us</a></h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/download" title="Download">Download MariaDB</a></h5>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="row row-10">
                
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div id="block-footerformcontact" class="block block-block-content block-block-contentd754ee1b-3cc9-40e7-9ef4-f504f1197fb1">
                        
                            <h5 style="font-weight: 400;">Subscribe to our newsletter!</h5>
                            <script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script src="//app-sj15.marketo.com/js/forms2/js/forms2.min.js"></script><form id="mktoForm_1498"></form>
                            <script>
                                <!--//--><![CDATA[// ><!--
                                MktoForms2.loadForm("//app-sj15.marketo.com", "573-PXI-984", 1498);
                                //--><!]]]]><![CDATA[>
                                //--><!]]>
                            </script>
                        
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div class="footer-copyright">
                        <div class="text-center">
                            <ul class="list-inline no-margin">
                                <li>
                                    <a href="/legal" title="Legal">Legal</a>
                                </li>
                                <li>
                                    <a href="/privacy-policy" title="Privacy Policy">Privacy Policy</a>
                                </li>
                                <li>
                                    <a href="/cookie-policy/" title="Cookies">Cookie Policy</a>
                                </li>
                            </ul>
                            <p>Copyright &copy; 2024 MariaDB. All rights reserved.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
</footer>
</div>

<div id="ajax_loading">
    <img src="/kb/static/images/ajax-loader.a51c5608d01a.gif" />
</div>

    <!-- Google Tag Manager -->
    <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-MK2847"
                      height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
            '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MK2847');</script>
    <!-- End Google Tag Manager -->

</body>

<script type="text/javascript" src="/kb/static/js/main.1587e3a666fc.js" charset="utf-8"></script>

</html>