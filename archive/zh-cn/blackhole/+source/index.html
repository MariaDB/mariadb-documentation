<!DOCTYPE html>
<html>
<head data-cookie-domain=""
      data-cookie-path="/">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="apple-touch-icon" sizes="180x180" href="/kb/static/images/favicons/apple-touch-icon.159e713979be.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/kb/static/images/favicons/favicon-32x32.bc0ac1d5d11e.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/kb/static/images/favicons/favicon-16x16.5801f8f0f34e.png">
    <link rel="shortcut icon" href="/kb/static/images/favicons/favicon.d122d305dee4.ico" type="image/x-icon" />

    <title>BLACKHOLE - Source - MariaDB Knowledge Base</title>

    <link href="/kb/static/css/main.b9e1e104f007.css" rel="stylesheet" type="text/css" />

    
        <meta name="robots" content="noindex, nofollow">
    

    <!-- FB Open Graph tags -->
    <meta property="og:title" content="BLACKHOLE - Source" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://mariadb.com/kb/zh-cn/blackhole/+source/" />
    <meta property="og:image" content="http://mariadb.comaskmonty-logo.png" />
    <meta property="og:site_name" content="MariaDB KnowledgeBase" />
    <meta property="fb:admins" content="514852603" />
    <meta property="og:description" content="" />

    <meta name="description" content="" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="//fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet"/>
    
</head>
<body class="mpkb nodes autoresize nodes_source jqui" id="nodes_source">





<div id="menu-mobile" class="visible-sm visible-xs">

    <div>
        <div id="mobile-close-menu" class="text-right">
            <a href="javascript:void(0)" title="Close Menu" id="back-main" class="toggle-menu">X<span></span></a>
        </div>
    </div>
    <div class="mainmenu-mobile">
        <ul class="ls-none ul-menu">
            <li data-sub="submenu5"><a class="open-form-search" href="/kb/search/" title="Search">Search </a></li>
            <li data-sub="submenu0"><a href="/products" title="Products">Products</a><span class="arrow-main"></span></li>
            <li data-sub="submenu1"><a href="/services" title="Services">Services</a><span class="arrow-main"></span></li>
            <li data-sub="submenu2"><a href="/resources" title="Resources">Resources</a><span class="arrow-main"></span></li>
            <li data-sub="submenu3"><a href="/about-us" title="About">About</a><span class="arrow-main"></span></li>
            <li data-sub="submenu4"><a href="/contact" title="Contact">Contact</a></li>
        </ul>
    </div>

    <div class="nav-top-mobile">
        <div class="select-box form">

            <ul class="inline-block-md mb-none top-nav">
                <li>

                </li>
                
                    <li>
                        <a href="/kb/user/login?next=/kb/zh-cn/blackhole/+source/"> Login</a>
                    </li>
                
            </ul>



        </div>
        <p class="text-center copyright">Copyright &copy; 2024 MariaDB. All rights reserved.</p>
    </div>
</div>
<div id="wrapper">
<div id="top-nav">
    <div class="container">
        <ul class="hidden-sm hidden-xs" >
            <li><a href="https://mariadb.com/kb/">Knowledge Base</a></li>
            <li><a href="https://mariadb.com/contact/">Contact</a></li>
            
                
                    <li>
                        <a href="/kb/user/login?next=/kb/zh-cn/blackhole/+source/" rel="nofollow">Login</a>
                    </li>
                
            
            
            <li id="search-form">
                <form action="/kb/zh-cn/+search/" method="get" id="search-block-form" accept-charset="UTF-8">
                    <input id="search" title="Enter the terms you wish to search for."
                           placeholder="Search . . ." type="text"
                           name="q" value="" size="15" maxlength="128" class="form-text"
                           data-autocomplete-url="/kb/zh-cn/+search/autocomplete/">
                    <input type="hidden" name="quick" value="1" />
                    <input type="hidden" name="source" value="kb" />
                </form>
            </li>
            <li><a id="search-toggler" href="/kb/search/">Search</a></li>
            
        </ul>
    </div>
</div>
<div id="navbar-bottom" class="navbar">
    <div class="container">
        
        
        
        
        <div class="row">
            <div class="col-md-3 col-sm-9 col-xs-9">
                <a class="brand" href="/" title="MariaDB">
                    <img src="/kb/static/images/logo-2018-black.95f5978ae14d.png">
                </a>
            </div>
            <div class="col-md-9 hidden-sm hidden-xs">
                <div class="main-menu">
                    <ul id="main-menu" class="nav navbar-nav inline-block-sm">
    <li class="has-sub full-menu">
        <a href="/products" title="Products">Products</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/services" title="Services">Services</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/pricing" title="Pricing">Pricing</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/resources" title="Resources">Resources</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/about-us" title="About Us">About Us</a>
    </li>
    <li class="">
        <a class="button electric-eel small top-bar-right-download" href="/downloads/">Download</a>
    </li>
</ul>
                </div>
            </div>
            <div class="col-md-3 visible-sm visible-xs col-sm-3 col-xs-3 ps-rv">
                <div class="navbar-header text-right pull-right">
                    <button type="button" class="menu-control toggle-menu" id="open-menu">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="main">
    <div class="container">
        

        <div id="subheader1" class="clearfix">
            <div class="pull-left">
                
                <div id="breadcrumbs" class="breadcrumb">
                    <a href="/kb/zh-cn/">Knowledge Base</a>
                    


    
    » <a class="crumb" href="/kb/zh-cn/mariadb/">MariaDB - 简体中文</a>
    

    
    » <a class="crumb" href="/kb/zh-cn/mariadb-server/">MariaDB Server文档</a>
    

    
    » <a class="crumb" href="/kb/zh-cn/columns-storage-engines-and-plugins/">列、存储引擎和插件</a>
    

    
    » <a class="crumb" href="/kb/zh-cn/storage-engines/">存储引擎</a>
    


    » <a class="node_link crumb" href="/kb/zh-cn/blackhole/">BLACKHOLE</a>


                </div>
                
            </div>
        </div>
    </div>
    <div class="container" id="container-main">
        <div class="row">
            
            
                
                <aside id="sidebar-first" class="sidebar col-md-2 hidden-xs hidden-sm hidden-print">
                    
                        
                        <ul id="category_menu" class="nav nav-pills nav-stacked">
                            <li><a href="/kb/zh-cn/">首页</a></li>
                            
                                
                                    <li><a href="/kb/zh-cn/+questions/">Open Questions</a></li>
                                
                                <li><a href="/kb/zh-cn/documentation/">MariaDB Server</a></li>
                                <li><a href="/kb/zh-cn/maxscale/">MariaDB MaxScale</a></li>
                                <li><a href="/kb/zh-cn/mariadb-columnstore/">MariaDB ColumnStore</a></li>
                                <li><a href="/kb/zh-cn/connectors/">Connectors</a></li>
                            

                        </ul>
                    

                    
                        <div>
    

<div class="well well-small box actions"><div>

        <a class="btn btn-block btn-small" href="/kb/zh-cn/blackhole/">Return to article</a>
    
</div>
</div>

</div>
                    

                    

































                </aside>
            
            
            
                
            
            
            <section id="content" class="limited_width col-md-10 clearfix">
                
                    <h1>BLACKHOLE - Source</h1>
                

                



                <div>
                    

    

    
    <div class="revision_info">
        <dl class="table">
            <dt>Revision</dt>
            <dd><a href="/kb/zh-cn/blackhole/+r/127515/">127515</a></dd>
            <dt>用户</dt>
            <dd>
<span class="user" id="user-13772">
<a href="/kb/user/id/13772" title="Yingquan He">Yingquan He</a>
</span></dd>
            <dt>Date</dt>
            <dd>

<span class="datetime" title="2023-06-24 02:23">2023-06-24 02:23</span></dd>
        </dl>
    </div>
    


    

    
        
        <textarea id="answer_source" class="creole_source autogrow">##BLACKHOLE## 存储引擎接受数据但不存储数据并始终返回空结果。

使用 ##BLACKHOLE## 存储引擎的表由单个 .frm 表格格式文件组成，但没有关联的数据或索引文件。

例如，如果您想在从服务器上运行复杂的过滤规则而不会在主服务器上产生任何开销，则此存储引擎可能很有用。主服务器可以运行 ##BLACKHOLE## 存储引擎，将数据复制到从服务器进行处理。

&lt;&lt;toc&gt;&gt;

== 安装插件

虽然插件的共享库默认情况下随 MariaDB 分发，但 MariaDB 实际上默认情况下不会安装插件。有两种方法可以用于在 MariaDB 中安装插件。

第一种方法可用于在不重新启动服务器的情况下安装插件。您可以通过执行 [[install-soname|INSTALL SONAME]] 或 [[install-plugin|INSTALL PLUGIN]] 来动态安装插件。例如：

&lt;&lt;sql&gt;&gt;
INSTALL SONAME &#39;ha_blackhole&#39;;
&lt;&lt;/sql&gt;&gt;

第二种方法可用于告诉服务器在启动时加载插件。可以通过提供 [[mysqld-options/#-plugin-load|--plugin-load]] 或 [[mysqld-options/#-plugin-load-add|--plugin-load-add]] 选项来安装插件。这可以作为命令行参数指定给 [[mysqld-options|mysqld]]，也可以在相关的服务器 [[configuring-mariadb-with-option-files/#option-groups|option group]] 中在 [[configuring-mariadb-with-option-files|option file]] 中指定。例如：

&lt;&lt;code&gt;&gt;
[mariadb]
...
plugin_load_add = ha_blackhole
&lt;&lt;/code&gt;&gt;

== 卸载插件

您可以通过执行 [[uninstall-soname|UNINSTALL SONAME]] 或 [[uninstall-plugin|UNINSTALL PLUGIN]] 来动态卸载插件。例如：

&lt;&lt;sql&gt;&gt;
UNINSTALL SONAME &#39;ha_blackhole&#39;;
&lt;&lt;/sql&gt;&gt;

如果您通过在相关服务器 [[configuring-mariadb-with-option-files/#option-groups|option group]] 中的 [[configuring-mariadb-with-option-files|option file]] 中提供 [[mysqld-options/#-plugin-load|--plugin-load]] 或 [[mysqld-options/#-plugin-load-add|--plugin-load-add]] 选项来安装插件，则应删除这些选项以防止下次重新启动服务器时加载插件。

== 使用 BLACKHOLE 存储引擎

=== 与 DML 一起使用

[[INSERT]]，[[UPDATE]] 和 [[DELETE]] 语句都可以与 ##BLACKHOLE## 存储引擎一起使用。但是，实际上不会应用任何数据更改。

=== 与复制一起使用

如果启用了二进制日志，则所有 SQL 语句都将像往常一样记录，并复制到任何从服务器。但是，由于未存储行，因此重要的是使用基于语句而不是行或混合格式，因为 [[UPDATE]] 和 [[DELETE]] 语句既不记录也不复制。请参阅 [[binary-log-formats|二进制日志格式]]。

=== 与触发器一起使用

某些 [[triggers|触发器]] 可与 ##BLACKHOLE## 存储引擎一起使用。

对于 [[INSERT]] 语句的 ##BEFORE## 触发器仍然会被激活。

对于 [[UPDATE]] 和 [[DELETE]] 语句的 [[triggers|触发器]] 不会被激活。

带有 ##FOR EACH ROW## 子句的 [[triggers|触发器]] 不适用，因为表格没有行。

=== 与外键一起使用

不支持外键。如果将一个 [[innodb|InnoDB]] 表转换为 ##BLACKHOLE##，则外键将消失。如果将相同的表格转换回 InnoDB，则必须重新创建它们。

=== 与虚拟列一起使用

如果将包含[[virtual-columns|虚拟列]]的 [[innodb|InnoDB]] 表转换为 ##BLACKHOLE##，则会产生错误。

=== 与 AUTO_INCREMENT 一起使用

因为 BLACKHOLE 表格不存储数据，所以它不会维护 [[AUTO_INCREMENT]] 值。如果您正在复制到可以处理 ##AUTO_INCREMENT## 列的表格，并且没有在 [[INSERT]] 查询中显式设置主键自增值，也没有使用 [[SET]] [[server-system-variables#insert_id|INSERT_ID]] 语句，则插入操作将在从服务器上失败，因为存在重复键。

== 限制

最大键大小为：
* 3500 字节（&gt;= MariaDB 10.1.48、MariaDB 10.2.35、MariaDB 10.3.26、MariaDB 10.4.16 和 MariaDB 10.5.7）
* 1000 字节（&lt;= MariaDB 10.1.47、MariaDB 10.2.34、MariaDB 10.3.25、MariaDB 10.4.15 和 MariaDB 10.5.6）。

== 示例

&lt;&lt;sql&gt;&gt;
CREATE TABLE table_name (
   id int unsigned primary key not null,
   v varchar(30)
) ENGINE=BLACKHOLE;

INSERT INTO table_name VALUES (1, &#39;bob&#39;),(2, &#39;jane&#39;);

SELECT * FROM table_name;
Empty set (0.001 sec)
&lt;&lt;/sql&gt;&gt;</textarea>
    


                    <div id="content_disclaimer" class="graybox">
                        Content reproduced on this site is the property of its respective owners,
                        and this content is not reviewed in advance by MariaDB. The views, information and opinions
                        expressed by this content do not necessarily represent those of MariaDB or any other party.
                    </div>
                </div>
            </section>

            
        </div>
    </div>
</div>

<!-- Footer -->
<footer id="footer">
    <div class="footer">
        <div class="container">
            <div class="row">
                <div class="col-xs-12">
                    <ul class="list-inline text-center footer-nav">
                        <li>
                            <h5>
                                <a href="https://mariadb.com/products" title="Products">Products</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/services" title="Services">Services</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/pricing" title="Pricing">Pricing</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/resources" title="Resources">Resources</a>
                            </h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/about-us" title="About MariaDB">About Us</a></h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/download" title="Download">Download MariaDB</a></h5>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="row row-10">
                
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div id="block-footerformcontact" class="block block-block-content block-block-contentd754ee1b-3cc9-40e7-9ef4-f504f1197fb1">
                        
                            <h5 style="font-weight: 400;">Subscribe to our newsletter!</h5>
                            <script src="//app-sj15.marketo.com/js/forms2/js/forms2.min.js"></script><form id="mktoForm_1498"></form>
                            <script>
                                <!--//--><![CDATA[// ><!--
                                MktoForms2.loadForm("//app-sj15.marketo.com", "573-PXI-984", 1498);
                                //--><!]]]]><![CDATA[>
                                //--><!]]>
                            </script>
                        
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div class="footer-copyright">
                        <div class="text-center">
                            <ul class="list-inline no-margin">
                                <li>
                                    <a href="/legal" title="Legal">Legal</a>
                                </li>
                                <li>
                                    <a href="/privacy-policy" title="Privacy Policy">Privacy Policy</a>
                                </li>
                                <li>
                                    <a href="/cookie-policy/" title="Cookies">Cookie Policy</a>
                                </li>
                            </ul>
                            <p>Copyright &copy; 2024 MariaDB. All rights reserved.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
</footer>
</div>

<div id="ajax_loading">
    <img src="/kb/static/images/ajax-loader.a51c5608d01a.gif" />
</div>

    <!-- Google Tag Manager -->
    <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-MK2847"
                      height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
            '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MK2847');</script>
    <!-- End Google Tag Manager -->

</body>

<script type="text/javascript" src="/kb/static/js/main.fed4ec768178.js" charset="utf-8"></script>

</html>