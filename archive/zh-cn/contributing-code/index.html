<!DOCTYPE html>
<html>
<head data-cookie-domain=""
      data-cookie-path="/">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="apple-touch-icon" sizes="180x180" href="/kb/static/images/favicons/apple-touch-icon.159e713979be.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/kb/static/images/favicons/favicon-32x32.bc0ac1d5d11e.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/kb/static/images/favicons/favicon-16x16.5801f8f0f34e.png">
    <link rel="shortcut icon" href="/kb/static/images/favicons/favicon.d122d305dee4.ico" type="image/x-icon" />

    <title>贡献代码 - MariaDB Knowledge Base</title>

    <link href="/kb/static/css/main.f7633538c846.css" rel="stylesheet" type="text/css" />

    

    

    <!-- FB Open Graph tags -->
    <meta property="og:title" content="贡献代码" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://mariadb.com/kb/zh-cn/contributing-code/" />
    <meta property="og:image" content="http://mariadb.comaskmonty-logo.png" />
    <meta property="og:site_name" content="MariaDB KnowledgeBase" />
    <meta property="fb:admins" content="514852603" />
    <meta property="og:description" content="
本页包含有关贡献代码的一般指南和程序。如果您有任何问题，请在maria-developers邮件列表、我们在 https://mariadb.zulipchat.com 的 Zulip 实例或 #maria IRC 频道（在https://libera.chat/上）上提问。其他查找 MariaDB 的电子邮件列表和位置可以在这里找到。
有关向 ..." />

    <meta name="description" content="
本页包含有关贡献代码的一般指南和程序。如果您有任何问题，请在maria-developers邮件列表、我们在 https://mariadb.zulipchat.com 的 Zulip 实例或 #maria IRC 频道（在https://libera.chat/上）上提问。其他查找 MariaDB 的电子邮件列表和位置可以在这里找到。
有关向 ..." />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="//fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet"/>
    
</head>
<body class="mpkb nodes products nodes_view jqui" id="nodes_view">





<div id="menu-mobile" class="visible-sm visible-xs">

    <div>
        <div id="mobile-close-menu" class="text-right">
            <a href="javascript:void(0)" title="Close Menu" id="back-main" class="toggle-menu">X<span></span></a>
        </div>
    </div>
    <div class="mainmenu-mobile">
        <ul class="ls-none ul-menu">
            <li data-sub="submenu5"><a class="open-form-search" href="/kb/search/" title="Search">Search </a></li>
            <li data-sub="submenu0"><a href="/products" title="Products">Products</a><span class="arrow-main"></span></li>
            <li data-sub="submenu1"><a href="/services" title="Services">Services</a><span class="arrow-main"></span></li>
            <li data-sub="submenu2"><a href="/resources" title="Resources">Resources</a><span class="arrow-main"></span></li>
            <li data-sub="submenu3"><a href="/about-us" title="About">About</a><span class="arrow-main"></span></li>
            <li data-sub="submenu4"><a href="/contact" title="Contact">Contact</a></li>
        </ul>
    </div>

    <div class="nav-top-mobile">
        <div class="select-box form">

            <ul class="inline-block-md mb-none top-nav">
                <li>

                </li>
                
                    <li>
                        <a href="/kb/user/login?next=/kb/zh-cn/contributing-code/"> Login</a>
                    </li>
                
            </ul>



        </div>
        <p class="text-center copyright">Copyright &copy; 2024 MariaDB. All rights reserved.</p>
    </div>
</div>
<div class="violator-wrap d-none" id="top_violator">
    <div class="container">
        <div class="row">
            <div class="col-xs-12 col-sm-12">
                <div class="violator-outer">
                    <div class="violator-inner">
                        <div class="row">
                            <div class="col-xs-12 col-sm-9 col-lg-7 col-lg-offset-2" id="top_violator_content">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="content-link" target="_blank" rel="nofollow noreferrer">
                                    <span>The Ultimate Guide to High Availability with MariaDB</span>
                                </a>
                            </div>
                            <div class="col-xs-12 col-sm-3" id="top_violator_cta">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="btn btn-mariadb" target="_blank" rel="nofollow noreferrer">Download Now</a>
                            </div>
                        </div>
                    </div>
                    <button type="button" class="btn btn-link close-btn">
                        <svg xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 24 24" width="15px" height="15px"><path d="M 4.9902344 3.9902344 A 1.0001 1.0001 0 0 0 4.2929688 5.7070312 L 10.585938 12 L 4.2929688 18.292969 A 1.0001 1.0001 0 1 0 5.7070312 19.707031 L 12 13.414062 L 18.292969 19.707031 A 1.0001 1.0001 0 1 0 19.707031 18.292969 L 13.414062 12 L 19.707031 5.7070312 A 1.0001 1.0001 0 0 0 18.980469 3.9902344 A 1.0001 1.0001 0 0 0 18.292969 4.2929688 L 12 10.585938 L 5.7070312 4.2929688 A 1.0001 1.0001 0 0 0 4.9902344 3.9902344 z"/></svg>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="wrapper">
<div id="top-nav">
    <div class="container">
        <ul class="hidden-sm hidden-xs" >
            <li><a href="https://mariadb.com/kb/">Knowledge Base</a></li>
            <li><a href="https://mariadb.com/contact/">Contact</a></li>
            
                
                    <li>
                        <a href="/kb/user/login?next=/kb/zh-cn/contributing-code/" rel="nofollow">Login</a>
                    </li>
                
            
            
            <li id="search-form">
                <form action="/kb/zh-cn/+search/" method="get" id="search-block-form" accept-charset="UTF-8">
                    <input id="search" title="Enter the terms you wish to search for."
                           placeholder="Search . . ." type="text"
                           name="q" value="" size="15" maxlength="128" class="form-text"
                           data-autocomplete-url="/kb/zh-cn/+search/autocomplete/">
                    <input type="hidden" name="quick" value="1" />
                    <input type="hidden" name="source" value="kb" />
                </form>
            </li>
            <li><a id="search-toggler" href="/kb/search/">Search</a></li>
            
        </ul>
    </div>
</div>
<div id="navbar-bottom" class="navbar">
    <div class="container">
        
        
        
        
        <div class="row">
            <div class="col-md-3 col-sm-9 col-xs-9">
                <a class="brand" href="/" title="MariaDB">
                    <img src="/kb/static/images/logo-2018-black.95f5978ae14d.png">
                </a>
            </div>
            <div class="col-md-9 hidden-sm hidden-xs">
                <div class="main-menu">
                    <ul id="main-menu" class="nav navbar-nav inline-block-sm">
    <li class="has-sub full-menu">
        <a href="/products" title="Products">Products</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/services" title="Services">Services</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/pricing" title="Pricing">Pricing</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/resources" title="Resources">Resources</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/about-us" title="About Us">About Us</a>
    </li>
    <li class="">
        <a class="button electric-eel small top-bar-right-download" href="/downloads/">Download</a>
    </li>
</ul>
                </div>
            </div>
            <div class="col-md-3 visible-sm visible-xs col-sm-3 col-xs-3 ps-rv">
                <div class="navbar-header text-right pull-right">
                    <button type="button" class="menu-control toggle-menu" id="open-menu">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="main">
    <div class="container">
        

        <div id="subheader1" class="clearfix">
            <div class="pull-left">
                
                <div id="breadcrumbs" class="breadcrumb">
                    <a href="/kb/zh-cn/">Knowledge Base</a>
                    


    
    » <a class="crumb" href="/kb/zh-cn/mariadb/">MariaDB - 简体中文</a>
    


    » <a class="node_link crumb" href="/kb/zh-cn/contributing-code/">贡献代码</a>


                </div>
                
            </div>
        </div>
    </div>
    <div class="container" id="container-main">
        <div class="row">
            
            
                
                <aside id="sidebar-first" class="sidebar col-md-2 hidden-xs hidden-sm hidden-print">
                    
                        
                        <ul id="category_menu" class="nav nav-pills nav-stacked">
                            <li><a href="/kb/zh-cn/">首页</a></li>
                            
                                
                                    <li><a href="/kb/zh-cn/+questions/">Open Questions</a></li>
                                
                                <li><a href="/kb/zh-cn/documentation/">MariaDB Server</a></li>
                                <li><a href="/kb/zh-cn/maxscale/">MariaDB MaxScale</a></li>
                                <li><a href="/kb/zh-cn/mariadb-columnstore/">MariaDB ColumnStore</a></li>
                                <li><a href="/kb/zh-cn/connectors/">Connectors</a></li>
                            

                        </ul>
                    

                    
<div>



<div class="well well-small box actions"><div>

        <a class="btn btn-block btn-blue btn-sm" href="/kb/zh-cn/contributing-code/+history" rel="nofollow">历史</a>
        
        
        
        <a class="btn btn-block btn-blue btn-sm" href="/kb/zh-cn/contributing-code/+source/">Source</a>
        
        <a class="btn btn-block btn-blue btn-sm flag" href="/kb/zh-cn/contributing-code/+flag"
                data-flag-url="/kb/zh-cn/contributing-code/+flag" rel="nofollow">
                Flag as Spam / Inappropriate</a>
        
        <a class="btn btn-block btn-blue btn-sm" href="/kb/zh-cn/contributing-code/+translate/">
                Translate</a>
        

</div>
</div>





<div class="well well-small box node_info"><div>

    <dl>
        <dt>已创建</dt>
        <dd>

<span class="datetime" title="2013-06-12 15:48">11 years, 2 months ago</span></dd>

        <dt>Modified</dt>
        <dd>

<span class="datetime" title="2023-08-02 01:33">1 year ago</span></dd>

        <dt>Type</dt>
        <dd>article</dd>

        <dt>Status</dt>
        <dd>active</dd>

        <dt>License</dt>
        <dd>
            
                <a href="/kb/zh-cn/contributing-code/+license/">CC BY-SA / Gnu FDL</a>
            
        </dd>

        
    </dl>

    
    <ul class="rss_feeds">
        <li><a href="/kb/zh-cn/contributing-code/+history/feed/">
            历史</a>
        </li>
        <li><a href="/kb/zh-cn/contributing-code/+comments/feed/">
            Comments</a>
        </li>
    </ul>
    

</div>
</div>





    
    
    

<div class="well well-small box attachments"><div><div class="edit_link pull-right"><a href="/kb/zh-cn/contributing-code/+edit/attachments/">Edit</a></div><h5>Attachments</h5></div><div>

        
            <div class="no_data">No attachments exist</div>
        
    
</div>
</div>

    



    
    
        

<div class="well well-small box"><div><h5>Localized Versions</h5></div><div>

        <ul>
            
            <li><a href="/kb/en/contributing-code/">Contributing Code</a> [en]</li>
            
            <li><a href="/kb/it/contributing-code/">Aiutare con il codice</a> [it]</li>
            
            <li><a href="/kb/ru/contributing-code/">Внесение изменений в код</a> [ru]</li>
            
        </ul>
        
</div>
</div>

    






</div>


                    

































                </aside>
            
            
            
                
            
            
                
            
            <section id="content" class="limited_width col-md-8 clearfix">
                
                    <h1>贡献代码</h1>
                

                



                <div>
                    
    

    
    
    

    <div class="node creole">
        
        
        


    
    <div class="answer formatted">
        <div class="table_of_contents well well-small">
<h3>Contents</h3>
 <ol class="toc">

    <li class=""><a href="#寻找要开发的项目" title="寻找要开发的项目">寻找要开发的项目</a></li>

    <li class=""><a href="#对mariadb-server开发者的期望" title="对MariaDB Server开发者的期望">对MariaDB Server开发者的期望</a>    <ol class="toc">

        <li class=""><a href="#基础知识" title="基础知识">基础知识</a></li>

        <li class=""><a href="#提交注释中应包含的内容" title="提交注释中应包含的内容">提交注释中应包含的内容</a></li>

        <li class=""><a href="#测试" title="测试">测试</a></li>

        <li class=""><a href="#将代码推送到稳定分支之前" title="将代码推送到稳定分支之前">将代码推送到稳定分支之前</a></li>

        <li class=""><a href="#开始新项目" title="开始新项目">开始新项目</a></li>

        <li class=""><a href="#修复错误" title="修复错误">修复错误</a></li>

        <li class=""><a href="#使审阅人员工作更轻松" title="使审阅人员工作更轻松">使审阅人员工作更轻松</a></li>

        <li class=""><a href="#审核代码时" title="审核代码时">审核代码时</a>    </ol>
</li>

    <li class=""><a href="#另请参阅" title="另请参阅">另请参阅</a> </ol>
</li>
</div><p>
本页包含有关贡献代码的一般指南和程序。如果您有任何问题，请在<a href="http://launchpad.net/~maria-developers">maria-developers</a>邮件列表、我们在 <a href="https://mariadb.zulipchat.com">https://mariadb.zulipchat.com</a> 的 Zulip 实例或 #maria <a href="/kb/en/irc/">IRC</a> 频道（在<a href="https://libera.chat/">https://libera.chat/</a>上）上提问。其他查找 MariaDB 的电子邮件列表和位置可以在<a href="/kb/en/where-are-other-users-and-developers-of-mariadb/">这里</a>找到。</p>
<p>有关向 MariaDB 贡献的一般信息（供开发人员和非开发人员使用）可在<a href="/kb/en/contributing-to-the-mariadb-project/">Contributing to the MariaDB Project</a>页面找到。</p>
<h2 class="anchored_heading" id="寻找要开发的项目">寻找要开发的项目</h2>
<p>MariaDB 有许多您可以为其做出贡献的开放式开发项目（除了您自己的任何想法）。</p>
<ul start="1"><li>我们正在使用<a href="/kb/en/jira/">JIRA</a>管理 MariaDB 项目。转到<a href="https://jira.mariadb.org">https://jira.mariadb.org</a>并单击“项目”即可进入 MariaDB 项目。浏览<a href="https://jira.mariadb.org/secure/IssueNavigator.jspa?reset=true&amp;jqlQuery=project+%3D+MDEV+AND+resolution+%3D+Unresolved+AND+assignee+is+EMPTY+ORDER+BY+priority+DESC&amp;mode=hide">未解决的、未分配的</a>问题，看看是否有您感兴趣的内容。有些问题有赞助商，您可以得到报酬！
</li></ul>
<ul start="1"><li>我们还提供了<a href="https://jira.mariadb.org/issues/?jql=resolution%20%3D%20Unresolved%20AND%20labels%20%3D%20beginner-friendly%20ORDER%20BY%20updated%20DESC">适合初学者的</a>任务列表。
</li></ul>
<ul start="1"><li>检查下一个 MariaDB 版本的<a href="/kb/en/development-plans/">开发计划</a>。
</li></ul>
<ul start="1"><li>加入<a href="https://launchpad.net/~maria-developers">maria-developers</a> 并写信给 <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="84e9e5f6ede5a9e0e1f2e1e8ebf4e1f6f7c4e8edf7f0f7aae8e5f1eae7ecf4e5e0aaeae1f0">[email&#160;protected]</a> 列表，询问您可以完成的任务建议。请在电子邮件中包含您的编程经验、您对 MariaDB 源码的了解以及您对使用 MySQL/MariaDB 的了解程度，以便我们知道可以向您建议哪些任务。
</li></ul>
<ul start="1"><li>如果这是您的第一个项目，请查看<a href="/kb/en/suggested-development/">建议的开发</a>页面。它列出了一个很好的开端项目。
</li></ul>
<ul start="1"><li>加入 MariaDB 的 Zulip 实例，网址为 <a href="https://mariadb.zulipchat.com，并寻求建议。">https://mariadb.zulipchat.com，并寻求建议。</a>
</li></ul>
<ul start="1"><li>加入<a href="https://libera.chat/">https://libera.chat/</a> <a href="/kb/en/irc/">IRC</a>上的 #/maria，并寻求建议。
</li></ul>
<p>如果您有自己的想法，请将它们提交到<a href="/kb/en/jira/">JIRA</a>，以便其他 MariaDB 开发人员可以对其进行评论并建议如何实现它们。当然，您也可以使用<a href="https://launchpad.net/~maria-developers">maria-developers</a> 列表。</p>
<h2 class="anchored_heading" id="对mariadb-server开发者的期望">对MariaDB Server开发者的期望</h2>
<p>本节主要是针对具有对 MariaDB git 存储库的提交权限的开发人员。但是，我们希望它对于任何想要为 MariaDB 贡献代码的人都有用，以了解审阅者对他们的期望。</p>
<p>这不是关于编码风格或是否应该优先选择 C 而不是 C++ 的话题。那应该是一个应该尽早创建的单独话题。</p>
<h3 class="anchored_heading" id="基础知识">基础知识</h3>
<p>在编码时，尽量创建“永远不需要再次更改”的代码。尽可能使代码具有最佳性能。通常，为了使代码比最初预期的快15％，可以花费50％的时间。在计划时间估计时，请考虑这一点！话虽如此，请勿尝试添加尚未使用的类或功能。</p>
<p>代码应易于阅读，并遵循项目的编码标准。比起复杂的解决方案，较小和较简单的补丁通常更好。在未与 Sergei 或 Monty 检查之前，请勿使服务器依赖于新的外部库！</p>
<p>对于任何不明显的内容，请添加代码注释。在可能的情况下，在代码中使用断言来记录参数等的期望。通常，如果代码需要复杂的注释，请考虑是否有更好的方法来构建逻辑。更简单通常更好，更少的 bug。</p>
<h3 class="anchored_heading" id="提交注释中应包含的内容">提交注释中应包含的内容</h3>
<ul start="1"><li>Jira 问题编号和摘要，例如：
<a href="https://jira.mariadb.org/browse/MDEV-23839">MDEV-23839</a> innodb_fast_shutdown=0 hang on change buffer merge
</li><li>一个空行
</li><li>问题的简短描述
</li><li>解决方案的描述
</li><li>任何额外信息，以便理解补丁
</li><li>提交消息应是自包含的，最好不需要审阅者完全查看 Jira 就能理解提交。这并不意味着提交消息应包括所有背景和考虑的不同设计选项，因为 Jira 应包含这些信息。
</li><li>所有审阅者和作者的名称应清楚地在提交消息中列出。首选方式是（每个人一行）
<ul start="1"><li>Reviewed-by: email
</li><li>Co-authored-by: email
</li><li>有关详细信息，请参见 <a href="https://docs.github.com/en/free-pro-team@latest/github/committing-changes-to-your-project/creating-a-commit-with-multiple-authors。">https://docs.github.com/en/free-pro-team@latest/github/committing-changes-to-your-project/creating-a-commit-with-multiple-authors。</a>
</li></ul>
</li><li>默认情况下，所有代码都应进行审查。仅在非常特殊的情况下（例如合并（原始代码已经进行过审查）），才可以进行自我审查，这应在提交中清楚说明。在这种情况下，在推送之前，当然应特别小心地在本地和 buildbot 中测试代码。
</li></ul>
<h3 class="anchored_heading" id="测试">测试</h3>
<ul start="1"><li>所有代码都应具有测试用例，以显示新代码是否有效，或者在修复错误的情况下，问题是否已解决！它应在未打补丁的服务器上失败，并在新版本中运行。在极端情况下，如果实际上不可能进行测试用例，则需要在提交消息中（可选地也在 Jira 中）记录代码的测试方法。
</li><li>如果存在 Jira 问题，则测试用例应引用该问题。
</li><li>与性能有关的补丁应由开发人员（对于简单的提交）或性能测试人员进行测试。结果应在 Jira 中列出，并在提交中进行概述。
</li><li>复杂的补丁应由 QA 在推送之前的 bb- 分支中进行测试。Jira 条目应包括已完成的测试类型和运行的测试类型的信息。
</li><li>对于任何不是微不足道的内容，应在新代码上运行 Valgrind 或 ASAN / MSAN。 （如果您无法让 valgrind 或 ASAN 正常工作，则 Buildbot 将为您执行此操作）。至少应通过其中一个测试用例。如果由于某种原因开发人员无法执行此操作，则应检查执行此操作的 buildbot 构建器，并确保至少其测试用例不会产生有关使用未初始化内存或其他故障的警告。
</li><li>对于复杂的代码，开发人员最好使用 gcov 或某些类似工具，以确保至少不执行所有非错误分支。 “mtr --gcov” 或 “dgcov.pl” 可以帮助您完成此操作。
</li></ul>
<h3 class="anchored_heading" id="将代码推送到稳定分支之前">将代码推送到稳定分支之前</h3>
<ul start="1"><li>确保您已为新代码编译了所有内容，在调试服务器上（使用 cmake -DCMAKE_BUILD_TYPE=Debug 配置），包括受您的代码更改影响的所有嵌入式和所有插件。
</li><li>使用调试服务器在本地运行 mysql-test-run（mtr）测试套件。
</li><li>对于任何复杂的内容，都应运行完整的测试套件。
</li><li>对于绝对微不足道的内容，至少必须运行主要套件。
</li><li>总是首先推送到 bb- 分支以测试代码。当 buildbot 中的 bb- 分支为绿色时，可以推送到主分支。注意检查 Windows 构建是否编译（要特别注意检查，因为这经常失败），以及 valgrind 和 msan 构建是否显示与新测试用例相关的任何问题。
</li><li>如果必须在推送之前进行变基，则必须从头开始。
</li><li>在从第三方（如 MySQL）移植代码时，请确保将版权归属于正确的所有者，在每个修改后的文件头中。
</li><li>例如：
版权所有（c）2000, 2018, Oracle 及/或其附属公司。
版权所有（c）2009, 2020, MariaDB
</li><li>唯一的例外是，如果更改微不足道且变基微不足道且本地 mysql-test-run 已经工作，则可以直接推送到主分支。只有在您99％确定没有问题时才这样做！请不要让我们后悔我们做出了这个例外！
当我们有受保护的 git 分支时，上述规则将自动执行，因为保护将处理此事。
</li></ul>
<h3 class="anchored_heading" id="开始新项目">开始新项目</h3>
<ul start="1"><li>首先创建一个 Jira 条目，解释问题以及可以用来解决问题的不同解决方案。如果有新的语法，请包括查询和结果的示例。
</li><li>在获得要使用的解决方案的一致意见后，使用建议的解决方案详细说明 Jira 条目。
</li><li>当架构得到审查后，分配的开发人员可以开始编码。
</li><li>当代码准备好后，Jira 条目应与审阅人员进行更新。
</li><li>审阅人员检查代码，要么批准将其推送，要么向应该修复的开发人员提供评论。在后一种情况下，开发人员更新代码并将其交还给审阅人员。这将继续进行，直到代码得到批准。
</li><li>如果在项目期间更改设计，则需要更新 Jira 中的设计。
</li></ul>
<h3 class="anchored_heading" id="修复错误">修复错误</h3>
<ul start="1"><li>确保 Jira 问题是最新的。
</li><li>对于需要重新设计的复杂错误，请遵循“开始新项目”的过程。
</li><li>对于较简单的错误，可以跳过列出不同解决方案和架构的步骤。但是，仍应在 JIRA 注释中记录错误原因以及如何修复或待修复。
</li></ul>
<h3 class="anchored_heading" id="使审阅人员工作更轻松">使审阅人员工作更轻松</h3>
<ul start="1"><li>确保在请求审阅之前编译所有代码，并且所有 MTR 测试都能工作
</li><li>尝试将较大的项目拆分为较小的、自包含的变更集。
</li><li>自动化的事情，例如类、变量、函数等的重命名最好在单独的提交中完成。
</li></ul>
<h3 class="anchored_heading" id="审核代码时">审核代码时</h3>
<p>请记住，任何项目的稳定性和安全性在很大程度上取决于审阅人员。如果已接受的补丁有问题，通常应该责备审阅人员，因为是审阅人员允许其进入的！</p>
<ul start="1"><li>确保代码在 New BSD 或 MariaDB 的另一个经批准的许可证下获得许可（基本上是任何不与 GPL 冲突的开源许可证），或者贡献者已签署 MCA。
</li><li>仅允许使用 MySQL 的代码使用 GPL（因为 MariaDB 已经依赖于 MySQL 代码）。
</li><li>确保提交不太大。如果代码非常大，请提供如何将其拆分为较小部分的建议。合并提交（如果可以重建，则不允许合并提交）以保持历史线性。
</li><li>检查提交消息是否正确描述了提交。对于改善性能的代码，请确保 Jira 和提交消息包含有关改进的信息。
</li><li>检查旧测试中是否有未说明的更改。
</li><li>检查代码质量（没有明显的错误，使用正确的算法）
</li><li>检查是否可以简化或优化任何代码。使用已经存在的函数，循环是否最优，互斥锁是否使用正确等。
</li><li>确保代码有适当的测试用例。请参阅“测试”以了解所需内容！
</li><li>确保代码遵循 MariaDB 的编码标准。该文档应该很快就会创建，但在此期间，如果您不确定，请咨询旧的 MySQL/MariaDB 开发人员。
</li><li>确保代码遵循在 Jira 中同意的架构（如果在 Jira 中）。
</li><li>代码应易于理解（良好的代码注释，良好的函数和变量名称等）。
</li><li>确保您理解审核的每一行代码。如果不是，请要求开发人员添加更多注释以澄清或向另一个审核人员寻求帮助。
</li><li>所有常见情况都不会降低性能。
</li><li>任何涉及任何敏感区域（文件、通信、登录、加密或安全）的代码都需要另一个是该领域专家的审核人员。
</li></ul>
<h2 class="anchored_heading" id="另请参阅">另请参阅</h2>
<ul start="1"><li><a href="https://mariadb.org/get-involved/getting-started-for-developers/">开发人员入门</a> (mariadb.org)
</li><li><a href="https://mariadb.org/get-involved/getting-started-for-developers/get-code-build-test/">获取代码、构建、测试</a> (mariadb.org)
</li><li><a href="https://mariadb.org/get-involved/getting-started-for-developers/writing-good-test-cases-mariadb-server/">编写适用于 MariaDB Server 的良好测试用例</a> (mariadb.org)
</li><li><a href="https://mariadb.org/get-involved/getting-started-for-developers/submitting-pull-request/">提交拉取请求</a> (mariadb.org)
</li><li><a href="/kb/en/contributing-to-the-mariadb-project/">参与 MariaDB 项目</a>（面向非开发人员）
</li></ul>
<div class="cstm-style hidden"><pre class="unknown_macro">&lt;&lt;<span class="macro_name">nowiki</span><span class="macro_arg_string"></span>&gt;&gt;
<span class="macro_body">&lt;&lt;style class="redbox centered"&gt;&gt;
**MariaDB 的源代码现在托管在 Github 上：https://github.com/MariaDB/server。请参阅[[using-git|使用 Git]]。下面的信息已过时，将在某个时候进行重写。**
&lt;&lt;/style&gt;&gt;

== 先决条件

您需要[[http://bazaar-vcs.org|Bazaar]]进行版本控制。

= = = bzr 登录设置

* 在 https://launchpad.net/+login 上获取 launchpad 帐户。
* 登录后，设置您的 SSH 密钥
** 点击您的名称（右上角）
** 点击“更改详细信息”链接（右上方）
** 点击 SSH 密钥按钮（页面中央）
** 上传您的公共 SSH 密钥
([[https://help.launchpad.net/YourAccount/CreatingAnSSHKeyPair|如何获得公共密钥？]])
* 从本地命令行向 launchpad 注册自己：&lt;&lt;fixed&gt;&gt;bzr launchpad-login [yourloginid]&lt;&lt;/fixed&gt;&gt;

=== 获取 MariaDB 代码

# 首先，[[getting-the-mariadb-source-code|获取 MariaDB 代码的干净副本]]
（对于某些人来说，最快的方法是按照“源树 Tarball”部分中的说明进行操作）。

#decimal.2 获取源代码的干净副本后，为您的更改创建工作副本：
&lt;&lt;code lang=sh inline=false indent=1&gt;&gt;
cd $maria-repo # 例如：~/repos/maria
bzr branch trunk maria-fix-bugNNNNNN
cd maria-fix-bugNNNNNN
&lt;&lt;/code&gt;&gt;

&lt;&lt;style class="bluebox"&gt;&gt;
**提示：**//使用描述性名称，例如 maria-fix-bugNNNNNN（其中 NNNNNN 当然是错误编号）。//
&lt;&lt;/style&gt;&gt;

#decimal.3 现在，您应该准备好[[generic-build-instructions|编译 MariaDB]]了。在进行任何更改之前，编译此阶段是一个好主意，以确认您要修改的源代码树是否有效。

以下页面将帮助您快速上手 MariaDB 源代码：

* [[getting-the-mariadb-source-code|获取 MariaDB 源代码]]
* 设置构建环境：
** [[build-environment-setup-for-linux|Linux]]
** [[build-environment-setup-for-mac|Mac]]
** [[building-mariadb-on-windows|Windows]]
* [[compiling-mariadb-from-source|构建 MariaDB]]

== 设置测试

Maria 测试套件包含在源代码树的&lt;&lt;code&gt;&gt;./mysql-test/&lt;&lt;/code&gt;&gt;子目录中。mysql-test 目录有两个子目录对您至关重要，即&lt;&lt;code&gt;&gt;t/&lt;&lt;/code&gt;&gt;目录和&lt;&lt;code&gt;&gt;r/&lt;&lt;/code&gt;&gt;目录（分别用于“测试”和“结果”）。确保检查并查看您的 bug 是否已有测试。

所有测试都在&lt;&lt;code&gt;&gt;t/&lt;&lt;/code&gt;&gt;目录中。打开与您正在更改的功能相对应的文件（或添加新文件），并添加将重现 bug 或验证新功能的命令。

例如，下面的测试创建了一个新的测试表“t1”；显示了该 CREATE TABLE 语句的结果；最后，我们通过删除测试表来清理测试：

&lt;&lt;sql&gt;&gt;
#
# Bug #XXXXXX: INET_ATON() returns signed, not unsigned
#
create table t1 select INET_ATON('255.255.0.1') as `a`;
show create table t1;
drop table t1;
&lt;&lt;/sql&gt;&gt;

先添加测试，这将提醒您稍后重新记录测试输出文件（当然还会通知未来的努力您的预期输出）。现在是时候进行更改了。

查看现有的测试以更好地了解如何编写您的测试。

我们一直在寻找更好的测试，因此如果您创建了新的测试或改进了现有的测试，请将其上传到我们的“私人”文件夹中[[FTP]]服务器，然后在[[IRC]]上联系我们或发送一封邮件到Maria-Developers邮件列表，让我们知道。

== 编辑并添加您的贡献

有了可用的版本，您可以开始在新分支中进行更改，定期将代码提交到本地工作副本；随时提交早期和频繁的提交，因为您将稍后使用推送和提议来正式化您的贡献。

&lt;&lt;code lang=sh&gt;&gt;
cd $maria-repo/maria-fix-bugNNNNNN
# 进行更改
bzr commit -m "合并注释"
&lt;&lt;/code&gt;&gt;

在发布完成的工作之前，您需要确认您的分支按预期工作并更新测试运行。

为了让其他人看到您的提交，您应该配置[[setting-up-and-using-bazaar-bzr-with-mariadb|bzr]]将其提交电子邮件发送到[[http://lists.askmonty.org/cgi-bin/mailman/listinfo/commits|commits 'at' mariadb 'dot' org]]电子邮件列表。

== 测试您的分支

确保您至少拥有libtool 1.5.22（[[http://www.gnu.org/software/libiconv/|在此找到]]）。

首先，检查所有测试是否都通过（还记得您之前设置的测试吗？它应该失败。没关系，您很快就会重新记录它）：

&lt;&lt;code lang=sh&gt;&gt;
cd $maria-repo/mysql-test
./mysql-test-run
&lt;&lt;/code&gt;&gt;

任何失败的测试都需要重新记录。

&lt;&lt;code lang=sh&gt;&gt;
cd $maria-repo/mysql-test
./mysql-test-run --record $test # 其中$test是失败的测试名称
&lt;&lt;/code&gt;&gt;

现在，您已经准备好合并到主干了。

== 合并最近的更改

在推送或发布之前，合并从主干到您的分支的任何更改都很重要。

更新本地主干。

&lt;&lt;code lang=sh&gt;&gt;
cd $maria-repo 
cd trunk
bzr pull   
&lt;&lt;/code&gt;&gt;

更新本地分支。

&lt;&lt;code lang=sh&gt;&gt;
cd $maria-repo
cd maria-fix-bugNNNNNN
bzr merge ../trunk
bzr commit -m "从主干合并"
&lt;&lt;/code&gt;&gt;

冲突可以通过bazaar解决：

&lt;&lt;code lang=sh&gt;&gt;
bzr resolve $filename
&lt;&lt;/code&gt;&gt;

要恢复到分支上的最后一次提交，请使用：

&lt;&lt;code lang=sh&gt;&gt;
bzr revert $filename
&lt;&lt;/code&gt;&gt;

（注意，在推送之前，您需要重新合并主干）

仔细验证差异

&lt;&lt;code lang=sh&gt;&gt;
bzr diff
&lt;&lt;/code&gt;&gt;

== 发布您的分支

当所有更改都合并并且您的更改都是一致的时，您可以将分支推送到LaunchPad

&lt;&lt;code lang=sh inline=false&gt;&gt;
cd $maria-repos/$your-branch # 其中$your-branch是您要推送的分支（例如：maria-bugNNNN）
bzr push lp:~[yourloginid]/maria/$your-branch
&lt;&lt;/code&gt;&gt;

如果您发现这需要很长时间（例如&gt; 30分钟），则可以尝试使用'&lt;&lt;code&gt;&gt;bzr init-repo --format=1.9&lt;&lt;/code&gt;&gt;'初始化一个新存储库并将您的工作合并到其中，然后再次推送。

== 如何提出合并请求

在您的Launchpad代码页面{{{https://code.launchpad.net/~{yourloginid}/maria/{branch-name} }}}上，单击“**建议将分支合并到另一个分支中**”链接，将分支建议给维护者合并到主干。

== 将您的代码放入MariaDB主树

MariaDB中的所有代码都来自以下来源之一：
* MySQL
* 由[[http://mariadb.org|MariaDB Foundation]]雇员开发的代码。
* 由[[http://mariadb.com|MariaDB Corporation]]雇员开发的代码。
* 在[[mca|MCA]]下与MariaDB Foundation共享的代码。
* 具有已知来源并在BSD或公共领域下的代码。

如果您希望代码成为主[[MariaDB]]树的一部分，您还需要向MariaDB Foundation提供您的代码的共享版权。这是必需的，以便基金会可以将代码提供给其他项目（如MySQL）。

您可以通过以下方式之一来完成此操作：

# 签署MariaDB贡献者协议（[[mca|MCA]]）并将其扫描并发送给基金会。
# 向[[http://launchpad.net/~maria-developers|maria-developers]]发送电子邮件，在其中说您的补丁及其所有修复均在[[mca|MCA]]下提供给MariaDB Foundation。
# 使用[[http://opensource.org/licenses/bsd-license.html|BSD许可证]]对您的代码进行许可。

我们需要共享版权的原因如下：
# 为了保护版权或GPL，如果有人侵犯它（这是自由软件基金会也要求其代码[[https://www.gnu.org/licenses/why-assign.html|分配版权]]的原因）
# 为了能够向MySQL捐赠代码（例如修复安全漏洞或新功能）
# 允许持有MySQL非免费许可证的公司也使用MariaDB（MCA / BSD允许我们向这些公司授予MySQL和MariaDB之间所有更改的权利，以便他们可以使用MariaDB而不是MySQL）

有关MCA的更多信息，请参见[[mca-faq|MCA FAQ]]页面。

== 修复分支（如果需要）

如果需要在您的分支上进行修复，则需要进行以下操作：进行更改，重新合并任何新更改到主干，提交和重新推送；您不需要重新提出。推送后，LaunchPad将自动捕获更改。

请注意，更改可能需要几分钟才能使LaunchPad将您的新更改合并到您的建议中。

== 如何重新提交建议

目前，这是一个棘手的过程，Launchpad上的“请求另一个审核”链接都不起作用。

要重新提交合并建议，请按照以下步骤操作：

# 在合并建议的主页面上，顶部一行将类似于“状态：需要审核”。在其右侧有一个小按钮；单击此按钮以更改状态。
# 从下拉菜单中选择“重新提交”，然后单击“更改状态”。
# 下一页应提示您重新提交合并建议并告知您新建议将取代旧建议
# 单击“重新提交”完成。

获取您的合并建议注意的几种简单方法是：

* 加入#maria [[IRC]]频道，请求人们审核/讨论您的合并。
* 订阅并向Launchpad上的[[http://launchpad.net/~maria-developers|maria-developers]]组发送电子邮件。
</span>&lt;&lt;/nowiki&gt;&gt;</pre></div>
    </div>


        
            <div id="subscribe" class="well well-small hide hidden-print"
                 data-subscribe-url="/kb/zh-cn/contributing-code/+subscriptions/add"
                 data-unsubscribe-url="/kb/zh-cn/contributing-code/+subscriptions/remove">
            </div>
        

        
        
    
        <div class="simple_section_nav">
            <ul class="nav nav-pills">
                
                    <li><a href="/kb/zh-cn/who-is-behind-mariadb/">
                        ← 谁在给MariaDB做贡献？
                    </a>
                    </li>
                
                
                    <li><a href="/kb/zh-cn/mariadb-mariadb-/">
                        ↑ MariaDB - 简体中文 ↑
                    </a>
                    </li>
                
                
                    <li class="pull-right"><a href="/kb/zh-cn/sponsoring-the-mariadb-project/">
                        赞助MariaDB项目 →
                    </a>
                    </li>
                
            </ul>
        </div>
    

        

        
        <h2>Comments</h2>
        
    
    <div id="comments" data-node-id="3535" data-comments-url="/kb/zh-cn/contributing-code/+comments"
         data-reply-url="/kb/zh-cn/contributing-code/comments/post/">
        Comments loading...
    </div>

        

    </div>


                    <div id="content_disclaimer" class="graybox">
                        Content reproduced on this site is the property of its respective owners,
                        and this content is not reviewed in advance by MariaDB. The views, information and opinions
                        expressed by this content do not necessarily represent those of MariaDB or any other party.
                    </div>
                </div>
            </section>

            
                <div id="right_bar" class="col-md-2">
                    
    
        
        <ul class="section_navigation well well-small hidden-xs hidden-sm">
            
                <li class="parent"><a href="/kb/zh-cn/mariadb-mariadb-/">
                    ↑ MariaDB - 简体中文 ↑
                </a>
                </li>
            
            
                
                    <li>
                        <a href="/kb/zh-cn/mariadb-mariadb/">
                            
                            MariaDB简介
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/3033/">
                            
                            下载
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/google-summers-of-code/">
                            
                            Google Summers of Code
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/mariadb-server/">
                            
                            MariaDB Server文档
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/training-tutorials/">
                            
                            培训和教程
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/3104/">
                            
                            插件
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/server-client-software/">
                            
                            服务端和客户端
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/licensing-questions/">
                            
                            许可问题
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/contributing-participating/">
                            
                            贡献和参与
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/aria-storage-engine/">
                            
                            Aria 存储引擎
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/mariadb-1004/">
                            
                            MariaDB 10.0.4 发行日志
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/deprecation-policy/">
                            
                            MariaDB 停止支持规范
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/mariadb-mariadbmysql/">
                            
                            MariaDB与MySQL——特性比较
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/mariadb-vs-mysql-compatibility/">
                            
                            MariaDB与MySQL兼容性比较
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/nimbuzz-uses-mariadb/">
                            
                            Nimbuzz 使用 MariaDB
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/perfect-mariadb-a-mariadb-connector-in-swift/">
                            
                            Perfect-MariaDB - Swift语言的MariaDB数据库连接函数库
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/mariadb/">
                            
                            与 MariaDB 一同工作
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/reporting-bugs/">
                            
                            向MariaDB社区报告错误
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/buildbot-setup-for-solaris-sparc/">
                            
                            在Solaris Sparc上设置Buildbot
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/buildbot-setup-for-solaris-x86/">
                            
                            在Solaris x86上设置Buildbot
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/multi-source-replication/">
                            
                            多源(主)复制
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/suggested-development/">
                            
                            开发建议
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/community-contributing-to-the-mariadb-project/">
                            
                            怎样为MariaDB做出贡献？
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/mariadb-mariadb-mysql/">
                            
                            推荐的 MariaDB / MySQL 电子书
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/web-hosting-providers-offering-mariadb/">
                            
                            提供 MariaDB 的 Web 托管提供商
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/getting-help-with-mariadb/">
                            
                            获得MariaDB的帮助
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/licensing-faq/">
                            
                            许可证 FAQ
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/who-is-behind-mariadb/">
                            
                            谁在给MariaDB做贡献？
                        </a>
                    </li>
                
            
                
                    <li class="active">
                        <span>贡献代码</span>
                        
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/sponsoring-the-mariadb-project/">
                            
                            赞助MariaDB项目
                        </a>
                    </li>
                
            
        </ul>
    
    

                </div>
            
        </div>
    </div>
</div>

<!-- Footer -->
<footer id="footer">
    <div class="footer">
        <div class="container">
            <div class="row">
                <div class="col-xs-12">
                    <ul class="list-inline text-center footer-nav">
                        <li>
                            <h5>
                                <a href="https://mariadb.com/products" title="Products">Products</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/services" title="Services">Services</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/pricing" title="Pricing">Pricing</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/resources" title="Resources">Resources</a>
                            </h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/about-us" title="About MariaDB">About Us</a></h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/download" title="Download">Download MariaDB</a></h5>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="row row-10">
                
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div id="block-footerformcontact" class="block block-block-content block-block-contentd754ee1b-3cc9-40e7-9ef4-f504f1197fb1">
                        
                            <h5 style="font-weight: 400;">Subscribe to our newsletter!</h5>
                            <script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script src="//app-sj15.marketo.com/js/forms2/js/forms2.min.js"></script><form id="mktoForm_1498"></form>
                            <script>
                                <!--//--><![CDATA[// ><!--
                                MktoForms2.loadForm("//app-sj15.marketo.com", "573-PXI-984", 1498);
                                //--><!]]]]><![CDATA[>
                                //--><!]]>
                            </script>
                        
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div class="footer-copyright">
                        <div class="text-center">
                            <ul class="list-inline no-margin">
                                <li>
                                    <a href="/legal" title="Legal">Legal</a>
                                </li>
                                <li>
                                    <a href="/privacy-policy" title="Privacy Policy">Privacy Policy</a>
                                </li>
                                <li>
                                    <a href="/cookie-policy/" title="Cookies">Cookie Policy</a>
                                </li>
                            </ul>
                            <p>Copyright &copy; 2024 MariaDB. All rights reserved.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
</footer>
</div>

<div id="ajax_loading">
    <img src="/kb/static/images/ajax-loader.a51c5608d01a.gif" />
</div>

    <!-- Google Tag Manager -->
    <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-MK2847"
                      height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
            '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MK2847');</script>
    <!-- End Google Tag Manager -->

</body>

<script type="text/javascript" src="/kb/static/js/main.1587e3a666fc.js" charset="utf-8"></script>

</html>