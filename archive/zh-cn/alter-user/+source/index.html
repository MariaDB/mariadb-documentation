<!DOCTYPE html>
<html>
<head data-cookie-domain=""
      data-cookie-path="/">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="apple-touch-icon" sizes="180x180" href="/kb/static/images/favicons/apple-touch-icon.159e713979be.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/kb/static/images/favicons/favicon-32x32.bc0ac1d5d11e.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/kb/static/images/favicons/favicon-16x16.5801f8f0f34e.png">
    <link rel="shortcut icon" href="/kb/static/images/favicons/favicon.d122d305dee4.ico" type="image/x-icon" />

    <title>ALTER USER - Source - MariaDB Knowledge Base</title>

    <link href="/kb/static/css/main.f7633538c846.css" rel="stylesheet" type="text/css" />

    
        <meta name="robots" content="noindex, nofollow">
    

    

    <!-- FB Open Graph tags -->
    <meta property="og:title" content="ALTER USER - Source" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://mariadb.com/kb/zh-cn/alter-user/+source/" />
    <meta property="og:image" content="http://mariadb.comaskmonty-logo.png" />
    <meta property="og:site_name" content="MariaDB KnowledgeBase" />
    <meta property="fb:admins" content="514852603" />
    <meta property="og:description" content="" />

    <meta name="description" content="" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="//fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet"/>
    
</head>
<body class="mpkb nodes autoresize nodes_source jqui" id="nodes_source">





<div id="menu-mobile" class="visible-sm visible-xs">

    <div>
        <div id="mobile-close-menu" class="text-right">
            <a href="javascript:void(0)" title="Close Menu" id="back-main" class="toggle-menu">X<span></span></a>
        </div>
    </div>
    <div class="mainmenu-mobile">
        <ul class="ls-none ul-menu">
            <li data-sub="submenu5"><a class="open-form-search" href="/kb/search/" title="Search">Search </a></li>
            <li data-sub="submenu0"><a href="/products" title="Products">Products</a><span class="arrow-main"></span></li>
            <li data-sub="submenu1"><a href="/services" title="Services">Services</a><span class="arrow-main"></span></li>
            <li data-sub="submenu2"><a href="/resources" title="Resources">Resources</a><span class="arrow-main"></span></li>
            <li data-sub="submenu3"><a href="/about-us" title="About">About</a><span class="arrow-main"></span></li>
            <li data-sub="submenu4"><a href="/contact" title="Contact">Contact</a></li>
        </ul>
    </div>

    <div class="nav-top-mobile">
        <div class="select-box form">

            <ul class="inline-block-md mb-none top-nav">
                <li>

                </li>
                
                    <li>
                        <a href="/kb/user/login?next=/kb/zh-cn/alter-user/+source/"> Login</a>
                    </li>
                
            </ul>



        </div>
        <p class="text-center copyright">Copyright &copy; 2024 MariaDB. All rights reserved.</p>
    </div>
</div>
<div class="violator-wrap d-none" id="top_violator">
    <div class="container">
        <div class="row">
            <div class="col-xs-12 col-sm-12">
                <div class="violator-outer">
                    <div class="violator-inner">
                        <div class="row">
                            <div class="col-xs-12 col-sm-9 col-lg-7 col-lg-offset-2" id="top_violator_content">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="content-link" target="_blank" rel="nofollow noreferrer">
                                    <span>The Ultimate Guide to High Availability with MariaDB</span>
                                </a>
                            </div>
                            <div class="col-xs-12 col-sm-3" id="top_violator_cta">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="btn btn-mariadb" target="_blank" rel="nofollow noreferrer">Download Now</a>
                            </div>
                        </div>
                    </div>
                    <button type="button" class="btn btn-link close-btn">
                        <svg xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 24 24" width="15px" height="15px"><path d="M 4.9902344 3.9902344 A 1.0001 1.0001 0 0 0 4.2929688 5.7070312 L 10.585938 12 L 4.2929688 18.292969 A 1.0001 1.0001 0 1 0 5.7070312 19.707031 L 12 13.414062 L 18.292969 19.707031 A 1.0001 1.0001 0 1 0 19.707031 18.292969 L 13.414062 12 L 19.707031 5.7070312 A 1.0001 1.0001 0 0 0 18.980469 3.9902344 A 1.0001 1.0001 0 0 0 18.292969 4.2929688 L 12 10.585938 L 5.7070312 4.2929688 A 1.0001 1.0001 0 0 0 4.9902344 3.9902344 z"/></svg>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="wrapper">
<div id="top-nav">
    <div class="container">
        <ul class="hidden-sm hidden-xs" >
            <li><a href="https://mariadb.com/kb/">Knowledge Base</a></li>
            <li><a href="https://mariadb.com/contact/">Contact</a></li>
            
                
                    <li>
                        <a href="/kb/user/login?next=/kb/zh-cn/alter-user/+source/" rel="nofollow">Login</a>
                    </li>
                
            
            
            <li id="search-form">
                <form action="/kb/zh-cn/+search/" method="get" id="search-block-form" accept-charset="UTF-8">
                    <input id="search" title="Enter the terms you wish to search for."
                           placeholder="Search . . ." type="text"
                           name="q" value="" size="15" maxlength="128" class="form-text"
                           data-autocomplete-url="/kb/zh-cn/+search/autocomplete/">
                    <input type="hidden" name="quick" value="1" />
                    <input type="hidden" name="source" value="kb" />
                </form>
            </li>
            <li><a id="search-toggler" href="/kb/search/">Search</a></li>
            
        </ul>
    </div>
</div>
<div id="navbar-bottom" class="navbar">
    <div class="container">
        
        
        
        
        <div class="row">
            <div class="col-md-3 col-sm-9 col-xs-9">
                <a class="brand" href="/" title="MariaDB">
                    <img src="/kb/static/images/logo-2018-black.95f5978ae14d.png">
                </a>
            </div>
            <div class="col-md-9 hidden-sm hidden-xs">
                <div class="main-menu">
                    <ul id="main-menu" class="nav navbar-nav inline-block-sm">
    <li class="has-sub full-menu">
        <a href="/products" title="Products">Products</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/services" title="Services">Services</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/pricing" title="Pricing">Pricing</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/resources" title="Resources">Resources</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/about-us" title="About Us">About Us</a>
    </li>
    <li class="">
        <a class="button electric-eel small top-bar-right-download" href="/downloads/">Download</a>
    </li>
</ul>
                </div>
            </div>
            <div class="col-md-3 visible-sm visible-xs col-sm-3 col-xs-3 ps-rv">
                <div class="navbar-header text-right pull-right">
                    <button type="button" class="menu-control toggle-menu" id="open-menu">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="main">
    <div class="container">
        

        <div id="subheader1" class="clearfix">
            <div class="pull-left">
                
                <div id="breadcrumbs" class="breadcrumb">
                    <a href="/kb/zh-cn/">Knowledge Base</a>
                    


    
    » <a class="crumb" href="/kb/zh-cn/mariadb/">MariaDB - 简体中文</a>
    

    
    » <a class="crumb" href="/kb/zh-cn/mariadb-server/">MariaDB Server文档</a>
    


    » <a class="node_link crumb" href="/kb/zh-cn/alter-user/">ALTER USER</a>


                </div>
                
            </div>
        </div>
    </div>
    <div class="container" id="container-main">
        <div class="row">
            
            
                
                <aside id="sidebar-first" class="sidebar col-md-2 hidden-xs hidden-sm hidden-print">
                    
                        
                        <ul id="category_menu" class="nav nav-pills nav-stacked">
                            <li><a href="/kb/zh-cn/">首页</a></li>
                            
                                
                                <li><a href="/kb/zh-cn/documentation/">MariaDB Server</a></li>
                                <li><a href="/kb/zh-cn/maxscale/">MariaDB MaxScale</a></li>
                                <li><a href="/kb/zh-cn/mariadb-columnstore/">MariaDB ColumnStore</a></li>
                                <li><a href="/kb/zh-cn/connectors/">Connectors</a></li>
                            

                        </ul>
                    

                    
                        <div>
    

<div class="well well-small box actions"><div>

        <a class="btn btn-block btn-small" href="/kb/zh-cn/alter-user/">Return to article</a>
    
</div>
</div>

</div>
                    

                    

































                </aside>
            
            
            
                
            
            
            <section id="content" class="limited_width col-md-10 clearfix">
                
                    <h1>ALTER USER - Source</h1>
                

                



                <div>
                    

    

    
    <div class="revision_info">
        <dl class="table">
            <dt>Revision</dt>
            <dd><a href="/kb/zh-cn/alter-user/+r/126457/">126457</a></dd>
            <dt>用户</dt>
            <dd>
<span class="user" id="user-13772">
<a href="/kb/user/id/13772" title="Yingquan He">Yingquan He</a>
</span></dd>
            <dt>Date</dt>
            <dd>

<span class="datetime" title="2023-05-27 14:09">2023-05-27 14:09</span></dd>
        </dl>
    </div>
    


    

    
        
        <textarea id="answer_source" class="creole_source autogrow">== 语法
&lt;&lt;code&gt;&gt;
ALTER USER [IF EXISTS] 
 &lt;&lt;creole&gt;&gt;//user_specification// [,//user_specification//] ...&lt;&lt;/creole&gt;&gt;
  &lt;&lt;creole&gt;&gt;[REQUIRE {NONE | //tls_option// [[AND] //tls_option//] ...}]&lt;&lt;/creole&gt;&gt;
 &lt;&lt;creole&gt;&gt; [WITH //resource_option// [//resource_option//] ...]&lt;&lt;/creole&gt;&gt;
 &lt;&lt;creole&gt;&gt; [//lock_option//] [//password_option//] &lt;&lt;/creole&gt;&gt;

&lt;&lt;creole&gt;&gt;//user_specification//:&lt;&lt;/creole&gt;&gt;
  &lt;&lt;creole&gt;&gt;username [//authentication_option//]&lt;&lt;/creole&gt;&gt;

&lt;&lt;creole&gt;&gt;//authentication_option//:&lt;&lt;/creole&gt;&gt;
  IDENTIFIED BY &#39;password&#39; 
  | IDENTIFIED BY PASSWORD &#39;password_hash&#39;
  | IDENTIFIED {VIA|WITH} &lt;&lt;creole&gt;&gt;//authentication_rule// [OR //authentication_rule//] ...&lt;&lt;/creole&gt;&gt; 
 
&lt;&lt;creole&gt;&gt;//authentication_rule//:&lt;&lt;/creole&gt;&gt;
  authentication_plugin
  | authentication_plugin {USING|AS} &#39;authentication_string&#39;
  | authentication_plugin {USING|AS} PASSWORD(&#39;password&#39;)

&lt;&lt;creole&gt;&gt;//tls_option//&lt;&lt;/creole&gt;&gt;
  SSL 
  | X509
  | CIPHER &#39;cipher&#39;
  | ISSUER &#39;issuer&#39;
  | SUBJECT &#39;subject&#39;

&lt;&lt;creole&gt;&gt;//resource_option//&lt;&lt;/creole&gt;&gt;
  MAX_QUERIES_PER_HOUR count
  | MAX_UPDATES_PER_HOUR count
  | MAX_CONNECTIONS_PER_HOUR count
  | MAX_USER_CONNECTIONS count
  | MAX_STATEMENT_TIME time

&lt;&lt;creole&gt;&gt;//password_option//:&lt;&lt;/creole&gt;&gt;
  PASSWORD EXPIRE
  | PASSWORD EXPIRE DEFAULT
  | PASSWORD EXPIRE NEVER
  | PASSWORD EXPIRE INTERVAL N DAY

&lt;&lt;creole&gt;&gt;//lock_option//:&lt;&lt;/creole&gt;&gt;
    ACCOUNT LOCK
  | ACCOUNT UNLOCK
}
&lt;&lt;/code&gt;&gt;

&lt;&lt;toc&gt;&gt;

== 描述

##ALTER USER## 语句用于修改现有的 MariaDB 账户。要使用它，您必须具有全局 [[grant#global-privileges|CREATE USER]] 权限或 [[grant#table-privileges|UPDATE]] 权限以更改 [[the-mysql-database-tables|mysql]] 数据库中的用户。如果启用了 [[server-system-variables#read_only|read_only]] 系统变量，则还需要全局 [[grant#global-privileges|SUPER]] 权限。

如果指定的任何用户帐户尚不存在，则会产生错误。如果发生错误，则 ##ALTER USER## 仍将修改未导致错误的帐户。对于所有未修改的用户，只会产生一个错误。

== IF EXISTS
使用 ##IF EXISTS## 子句时，MariaDB 会针对每个未存在的指定用户返回警告而不是错误。

== 帐户名称

对于 ##ALTER USER## 语句，帐户名称与 [[create-user|CREATE USER]] 语句中一样作为 ##username## 参数指定。有关如何指定帐户名称的详细信息，请参见 ##CREATE USER## 页面上的 [[create-user/#account-names|帐户名称]] 部分。

[[current_user|CURRENT_USER]] 或 ##CURRENT_USER()## 也可以用于更改登录到当前会话中的帐户。例如，要将当前用户的密码更改为 ##mariadb##：

&lt;&lt;sql&gt;&gt;
ALTER USER CURRENT_USER() IDENTIFIED BY &#39;mariadb&#39;;
&lt;&lt;/sql&gt;&gt;

== 认证选项

&lt;&lt;product mariadb from=&#34;10.4&#34;&gt;&gt;
从 MariaDB 10.4 开始，每个用户帐户可以使用多个身份验证插件。例如，在过渡期间允许旧的 mysql_native_password 身份验证插件作为替代方案，可以逐步将用户迁移到更安全的 ed25519 身份验证插件。有关更多信息，请参见 [[authentication-from-mariadb-104|来自 MariaDB 10.4 的身份验证]]。

在运行 ##ALTER USER## 时，如果在 IDENTIFIED VIA 子句中未指定身份验证选项，则将删除该身份验证方法。（但是在 MariaDB 10.4.13 之前不是这种情况，请参见 MDEV-21928）

例如，创建了一个用户，该用户可以通过密码和 unix_socket 进行身份验证：
&lt;&lt;code&gt;&gt;
CREATE USER &#39;bob&#39;@&#39;localhost&#39; 
  IDENTIFIED VIA mysql_native_password USING PASSWORD(&#39;pwd&#39;) 
  OR unix_socket;

SHOW CREATE USER &#39;bob&#39;@&#39;localhost&#39;\G
*************************** 1. row ***************************
CREATE USER for bob@localhost: CREATE USER `bob`@`localhost` 
  IDENTIFIED VIA mysql_native_password 
  USING &#39;*975B2CD4FF9AE554FE8AD33168FBFC326D2021DD&#39; 
  OR unix_socket
&lt;&lt;/code&gt;&gt;
如果更新了用户的密码，但在 ##IDENTIFIED VIA## 子句中未指定unix_socket身份验证，则将不再允许使用unix_socket身份验证。
&lt;&lt;code&gt;&gt;
ALTER USER &#39;bob&#39;@&#39;localhost&#39; IDENTIFIED VIA mysql_native_password 
  USING PASSWORD(&#39;pwd2&#39;);

SHOW CREATE USER &#39;bob&#39;@&#39;localhost&#39;\G
*************************** 1. row ***************************
CREATE USER for bob@localhost: CREATE USER `bob`@`localhost` 
  IDENTIFIED BY PASSWORD &#39;*38366FDA01695B6A5A9DD4E428D9FB8F7EB75512&#39;
&lt;&lt;/code&gt;&gt;

&lt;&lt;/product&gt;&gt;

=== IDENTIFIED BY &#39;password&#39;

可选的 ##IDENTIFIED BY## 子句用于为帐户提供密码。密码应以明文形式指定。在存储到 [[mysqluser-table|mysql.user]] 表之前，它将由 [[password|PASSWORD]] 函数进行哈希处理。

例如，如果我们的密码是 ##mariadb##，则可以使用以下方法设置帐户的密码：

&lt;&lt;sql&gt;&gt;
ALTER USER foo2@test IDENTIFIED BY &#39;mariadb&#39;;
&lt;&lt;/sql&gt;&gt;

如果您没有使用 ##IDENTIFIED BY## 子句指定密码，则用户将能够无需密码连接到 MariaDB。空白密码不是匹配任何密码的通配符。如果未设置密码，则用户必须在未提供密码的情况下连接。

此子句支持的唯一 [[authentication-plugins|身份验证插件]] 是 [[authentication-plugin-mysql_native_password|mysql_native_password]] 和 [[authentication-plugin-mysql_old_password|mysql_old_password]]。

=== IDENTIFIED BY PASSWORD &#39;password_hash&#39;

可选的 ##IDENTIFIED BY PASSWORD## 子句用于为已经哈希处理的密码提供帐户。密码应指定为由 [[password|PASSWORD]] 函数提供的哈希值。它将按原样存储到 [[mysqluser-table|mysql.user]] 表中。

例如，如果我们的密码是 ##mariadb##，则可以使用以下方法找到哈希值：

&lt;&lt;sql&gt;&gt;
SELECT PASSWORD(&#39;mariadb&#39;);
+-------------------------------------------+
| PASSWORD(&#39;mariadb&#39;)                       |
+-------------------------------------------+
| *54958E764CE10E50764C2EECBB71D01F08549980 |
+-------------------------------------------+
&lt;&lt;/sql&gt;&gt;

然后，我们可以使用哈希值设置帐户的密码：

&lt;&lt;sql&gt;&gt;
ALTER USER foo2@test 
  IDENTIFIED BY PASSWORD &#39;*54958E764CE10E50764C2EECBB71D01F08549980&#39;;
&lt;&lt;/sql&gt;&gt;

如果您没有使用 ##IDENTIFIED BY## 子句指定密码，则用户将能够无需密码连接到 MariaDB。空白密码不是匹配任何密码的通配符。如果未设置密码，则用户必须在未提供密码的情况下连接。

此子句支持的唯一 [[authentication-plugins|身份验证插件]] 是 [[authentication-plugin-mysql_native_password|mysql_native_password]] 和 [[authentication-plugin-mysql_old_password|mysql_old_password]]。

=== IDENTIFIED {VIA|WITH} authentication_plugin

可选的 ##IDENTIFIED VIA authentication_plugin## 允许您指定应该由特定 [[authentication-plugins|身份验证插件]] 对帐户进行身份验证。插件名称必须是 [[show-plugins|SHOW PLUGINS]] 中的活动身份验证插件。如果它没有显示在该输出中，则您需要使用 [[install-plugin|INSTALL PLUGIN]] 或 [[install-soname|INSTALL SONAME]] 进行安装。

例如，这可以与 [[authentication-plugin-pam|PAM 身份验证插件]] 一起使用：

&lt;&lt;sql&gt;&gt;
ALTER USER foo2@test IDENTIFIED VIA pam;
&lt;&lt;/sql&gt;&gt;

某些身份验证插件允许在 ##USING## 或 ##AS## 关键字之后指定其他参数。例如，[[authentication-plugin-pam|PAM 身份验证插件]] 接受一个 [[authentication-plugin-pam/#configuring-the-pam-service|服务名称]]：

&lt;&lt;sql&gt;&gt;
ALTER USER foo2@test IDENTIFIED VIA pam USING &#39;mariadb&#39;;
&lt;&lt;/sql&gt;&gt;

附加参数的确切含义取决于特定的身份验证插件。

在 MariaDB 10.4 及更高版本中，如果它作为 [[password|PASSWORD()]] 函数的参数提供，那么 ##USING## 或 ##AS## 关键字也可以用于向插件提供明文密码。这仅适用于已实现 [[password|PASSWORD()]] 函数钩子的 [[authentication-plugins|身份验证插件]]。例如，[[authentication-plugin-ed25519|ed25519]] 身份验证插件支持此功能：

&lt;&lt;sql&gt;&gt;
ALTER USER safe@&#39;%&#39; IDENTIFIED VIA ed25519 USING PASSWORD(&#39;secret&#39;);
&lt;&lt;/sql&gt;&gt;

== TLS 选项

默认情况下，MariaDB 在服务器和客户端之间传输数据时不加密。当服务器和客户端在同一主机上运行或在通过其他方式保证安全性的网络中运行时，这通常是可以接受的。然而，在服务器和客户端存在于不同网络或它们在高风险网络中的情况下，缺乏加密确实引入了安全问题，因为恶意行为者有可能窃听它们之间在网络上传输的流量。

为了缓解这种担忧，MariaDB 允许您使用传输层安全性 (TLS) 协议在服务器和客户端之间加密传输数据。TLS 以前被称为安全套接字层 (SSL)，但严格来说，SSL 协议是 TLS 的前身，并且该协议的版本现在被认为是不安全的。文档仍然经常使用术语 SSL，出于兼容性原因，与 TLS 相关的服务器系统和状态变量仍然使用前缀 ssl_，但在内部，MariaDB 仅支持其安全的后继者。

有关如何确定您的 MariaDB 服务器是否支持 TLS 的更多信息，请参见 [[secure-connections-overview|Secure Connections Overview]]。

您可以为特定用户帐户设置某些与 TLS 相关的限制。例如，您可能会将其与需要访问敏感数据的用户帐户一起使用，同时将其发送到您无法控制的网络。可以使用 [[create-user|CREATE USER]]、[[alter-user|ALTER USER]] 或 [[grant|GRANT]] 语句为用户帐户启用这些限制。以下选项可用：

&lt;&lt;style class=&#34;darkheader-nospace-borders&#34;&gt;&gt;
|= 选项 |= 描述
| ##REQUIRE NONE## | 不需要此帐户使用 TLS，但仍然可以使用。
| ##REQUIRE SSL## | 必须使用 TLS，但不需要有效的 X509 证书。此选项不能与其他 TLS 选项结合使用。
| ##REQUIRE X509## | 必须使用 TLS，并且必须具有有效的 X509 证书。此选项意味着 ##REQUIRE SSL##。此选项不能与其他 TLS 选项结合使用。
| ##REQUIRE ISSUER &#39;issuer&#39; | 必须使用 TLS，并且必须具有有效的 X509 证书。此外，证书颁发机构必须是通过字符串 ##issuer## 指定的那个。此选项意味着 ##REQUIRE X509##。此选项可以与任意顺序中的 ##SUBJECT## 和 ##CIPHER## 选项结合使用。
| ##REQUIRE SUBJECT &#39;subject&#39; | 必须使用 TLS，并且必须具有有效的 X509 证书。此外，证书的主题必须是通过字符串 ##subject## 指定的那个。此选项意味着 ##REQUIRE X509##。此选项可以与任意顺序中的 ##ISSUER## 和 ##CIPHER## 选项结合使用。
| ##REQUIRE CIPHER &#39;cipher&#39; | 必须使用 TLS，但不需要有效的 X509 证书。此外，用于连接的加密必须使用在字符串 ##cipher## 中指定的特定密码方法。此选项意味着 ##REQUIRE SSL##。此选项可以与任意顺序中的 ##ISSUER## 和 ##SUBJECT## 选项结合使用。
&lt;&lt;/style&gt;&gt;

必须仅对所有指定选项使用一次 ##REQUIRE## 关键字，可以使用 ##AND## 关键字将单个选项分隔开，但不是必需的。

例如，您可以更改用户帐户以要求这些 TLS 选项：

&lt;&lt;sql&gt;&gt;
ALTER USER &#39;alice&#39;@&#39;%&#39;
 REQUIRE SUBJECT &#39;/CN=alice/O=My Dom, Inc./C=US/ST=Oregon/L=Portland&#39; AND
 ISSUER &#39;/C=FI/ST=Somewhere/L=City/ O=Some Company/CN=Peter Parker/emailAddress=p.parker@marvel.com&#39;
 AND CIPHER &#39;SHA-DES-CBC3-EDH-RSA&#39;;
&lt;&lt;/sql&gt;&gt;

如果为特定用户帐户设置了这些选项中的任何一个，则尝试使用该用户帐户连接的任何客户端都必须配置为使用 TLS 连接。

有关如何在客户端和服务器上启用 TLS 的信息，请参见 [[securing-connections-for-client-and-server|Securing Connections for Client and Server]]。

== 资源限制选项

可以为某些服务器资源设置每个帐户的限制。下表显示了每个帐户可以设置的值：

&lt;&lt;style class=&#34;darkheader-nospace-borders&#34;&gt;&gt;
|= 限制类型 |= 描述
| ##MAX_QUERIES_PER_HOUR## | 帐户每小时可以发出的语句数（包括更新）
| ##MAX_UPDATES_PER_HOUR## | 帐户每小时可以发出的更新（而不是查询）数
| ##MAX_CONNECTIONS_PER_HOUR## | 帐户每小时可以启动的连接数
| ##MAX_USER_CONNECTIONS## | 可从同一帐户接受的同时连接数；如果为 0，则将使用 ##max_connections##；如果 ##max_connections## 为 0，则此帐户的同时连接没有限制。
| ##MAX_STATEMENT_TIME## | 用户执行的语句的超时时间（以秒为单位）。另请参见 [[aborting-statements|Aborting Statements that Exceed a Certain Time to Execute]]。
&lt;&lt;/style&gt;&gt;

如果将这些限制中的任何一个设置为 ##0##，则该用户的该资源将没有限制。

以下是设置帐户资源限制的示例：

&lt;&lt;sql&gt;&gt;
ALTER USER &#39;someone&#39;@&#39;localhost&#39; WITH
    MAX_USER_CONNECTIONS 10
    MAX_QUERIES_PER_HOUR 200;
&lt;&lt;/sql&gt;&gt;

这些资源是按帐户跟踪的，这意味着按 ##&#39;user&#39;@&#39;server&#39;## 而不是按用户名或连接跟踪。

可以使用 [[flush|FLUSH USER_RESOURCES]]、[[flush|FLUSH PRIVILEGES]] 或 [[mysqladmin|mysqladmin reload]] 为所有用户重置计数。

每个帐户的资源限制存储在 [[the-mysql-database-tables|mysql]] 数据库中的 [[mysqluser-table|user]] 表中。用于资源限制的列名为 ##max_questions##、##max_updates##、##max_connections##（对于 ##MAX_CONNECTIONS_PER_HOUR##）和 ##max_user_connections##（对于 ##MAX_USER_CONNECTIONS##）。

== 密码过期
&lt;&lt;product mariadb from=10.4.3&gt;&gt;
除了由 [[server-system-variables/#default_password_lifetime|default_password_lifetime]] 确定的自动密码过期之外，还可以在单个用户基础上设置密码过期时间，以覆盖全局设置，例如：
&lt;&lt;sql&gt;&gt;
ALTER USER &#39;monty&#39;@&#39;localhost&#39; PASSWORD EXPIRE INTERVAL 120 DAY;
ALTER USER &#39;monty&#39;@&#39;localhost&#39; PASSWORD EXPIRE NEVER;
ALTER USER &#39;monty&#39;@&#39;localhost&#39; PASSWORD EXPIRE DEFAULT;
&lt;&lt;/sql&gt;&gt;

有关更多详细信息，请参见 [[user-password-expiry|User Password Expiry]]。
&lt;&lt;/product&gt;&gt;

== 帐户锁定
&lt;&lt;product mariadb from=10.4.2&gt;&gt;
帐户锁定允许特权管理员锁定/解锁用户帐户。如果帐户被锁定，则不会允许新的客户端连接（现有连接不受影响）。例如：
&lt;&lt;sql&gt;&gt;
ALTER USER &#39;marijn&#39;@&#39;localhost&#39; ACCOUNT LOCK;
&lt;&lt;/sql&gt;&gt;

有关更多详细信息，请参见 [[account-locking|Account Locking]]。
&lt;&lt;/product&gt;&gt;

从 MariaDB 10.4.7 和 MariaDB 10.5.8 开始，//lock_option// 和 //password_option// 子句可以以任意顺序出现。

== 另请参阅
* [[authentication-from-mariadb-104|Authentication from MariaDB 10.4]]
* [[grant|GRANT]]
* [[create-user|CREATE USER]]
* [[drop-user|DROP USER]]
* [[set-password|SET PASSWORD]]
* [[show-create-user|SHOW CREATE USER]]
* [[mysqluser-table|mysql.user table]]
* [[password-validation-plugins|Password Validation Plugins]] - 允许设置密码的基本条件
* [[authentication-plugins|Authentication Plugins]] - 允许使用各种认证方法，并开发新的认证方法。</textarea>
    


                    <div id="content_disclaimer" class="graybox">
                        Content reproduced on this site is the property of its respective owners,
                        and this content is not reviewed in advance by MariaDB. The views, information and opinions
                        expressed by this content do not necessarily represent those of MariaDB or any other party.
                    </div>
                </div>
            </section>

            
        </div>
    </div>
</div>

<!-- Footer -->
<footer id="footer">
    <div class="footer">
        <div class="container">
            <div class="row">
                <div class="col-xs-12">
                    <ul class="list-inline text-center footer-nav">
                        <li>
                            <h5>
                                <a href="https://mariadb.com/products" title="Products">Products</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/services" title="Services">Services</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/pricing" title="Pricing">Pricing</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/resources" title="Resources">Resources</a>
                            </h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/about-us" title="About MariaDB">About Us</a></h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/download" title="Download">Download MariaDB</a></h5>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="row row-10">
                
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div id="block-footerformcontact" class="block block-block-content block-block-contentd754ee1b-3cc9-40e7-9ef4-f504f1197fb1">
                        
                            <h5 style="font-weight: 400;">Subscribe to our newsletter!</h5>
                            <script src="//app-sj15.marketo.com/js/forms2/js/forms2.min.js"></script><form id="mktoForm_1498"></form>
                            <script>
                                <!--//--><![CDATA[// ><!--
                                MktoForms2.loadForm("//app-sj15.marketo.com", "573-PXI-984", 1498);
                                //--><!]]]]><![CDATA[>
                                //--><!]]>
                            </script>
                        
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div class="footer-copyright">
                        <div class="text-center">
                            <ul class="list-inline no-margin">
                                <li>
                                    <a href="/legal" title="Legal">Legal</a>
                                </li>
                                <li>
                                    <a href="/privacy-policy" title="Privacy Policy">Privacy Policy</a>
                                </li>
                                <li>
                                    <a href="/cookie-policy/" title="Cookies">Cookie Policy</a>
                                </li>
                            </ul>
                            <p>Copyright &copy; 2024 MariaDB. All rights reserved.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
</footer>
</div>

<div id="ajax_loading">
    <img src="/kb/static/images/ajax-loader.a51c5608d01a.gif" />
</div>

    <!-- Google Tag Manager -->
    <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-MK2847"
                      height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
            '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MK2847');</script>
    <!-- End Google Tag Manager -->

</body>

<script type="text/javascript" src="/kb/static/js/main.1587e3a666fc.js" charset="utf-8"></script>

</html>