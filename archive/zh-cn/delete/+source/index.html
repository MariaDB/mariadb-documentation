<!DOCTYPE html>
<html>
<head data-cookie-domain=""
      data-cookie-path="/">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="apple-touch-icon" sizes="180x180" href="/kb/static/images/favicons/apple-touch-icon.159e713979be.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/kb/static/images/favicons/favicon-32x32.bc0ac1d5d11e.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/kb/static/images/favicons/favicon-16x16.5801f8f0f34e.png">
    <link rel="shortcut icon" href="/kb/static/images/favicons/favicon.d122d305dee4.ico" type="image/x-icon" />

    <title>DELETE - Source - MariaDB Knowledge Base</title>

    <link href="/kb/static/css/main.f7633538c846.css" rel="stylesheet" type="text/css" />

    
        <meta name="robots" content="noindex, nofollow">
    

    

    <!-- FB Open Graph tags -->
    <meta property="og:title" content="DELETE - Source" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://mariadb.com/kb/zh-cn/delete/+source/" />
    <meta property="og:image" content="http://mariadb.comaskmonty-logo.png" />
    <meta property="og:site_name" content="MariaDB KnowledgeBase" />
    <meta property="fb:admins" content="514852603" />
    <meta property="og:description" content="" />

    <meta name="description" content="" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="//fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet"/>
    
</head>
<body class="mpkb nodes autoresize nodes_source jqui" id="nodes_source">





<div id="menu-mobile" class="visible-sm visible-xs">

    <div>
        <div id="mobile-close-menu" class="text-right">
            <a href="javascript:void(0)" title="Close Menu" id="back-main" class="toggle-menu">X<span></span></a>
        </div>
    </div>
    <div class="mainmenu-mobile">
        <ul class="ls-none ul-menu">
            <li data-sub="submenu5"><a class="open-form-search" href="/kb/search/" title="Search">Search </a></li>
            <li data-sub="submenu0"><a href="/products" title="Products">Products</a><span class="arrow-main"></span></li>
            <li data-sub="submenu1"><a href="/services" title="Services">Services</a><span class="arrow-main"></span></li>
            <li data-sub="submenu2"><a href="/resources" title="Resources">Resources</a><span class="arrow-main"></span></li>
            <li data-sub="submenu3"><a href="/about-us" title="About">About</a><span class="arrow-main"></span></li>
            <li data-sub="submenu4"><a href="/contact" title="Contact">Contact</a></li>
        </ul>
    </div>

    <div class="nav-top-mobile">
        <div class="select-box form">

            <ul class="inline-block-md mb-none top-nav">
                <li>

                </li>
                
                    <li>
                        <a href="/kb/user/login?next=/kb/zh-cn/delete/+source/"> Login</a>
                    </li>
                
            </ul>



        </div>
        <p class="text-center copyright">Copyright &copy; 2025 MariaDB. All rights reserved.</p>
    </div>
</div>
<div class="violator-wrap d-none" id="top_violator">
    <div class="container">
        <div class="row">
            <div class="col-xs-12 col-sm-12">
                <div class="violator-outer">
                    <div class="violator-inner">
                        <div class="row">
                            <div class="col-xs-12 col-sm-9 col-lg-7 col-lg-offset-2" id="top_violator_content">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="content-link" target="_blank" rel="nofollow noreferrer">
                                    <span>The Ultimate Guide to High Availability with MariaDB</span>
                                </a>
                            </div>
                            <div class="col-xs-12 col-sm-3" id="top_violator_cta">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="btn btn-mariadb" target="_blank" rel="nofollow noreferrer">Download Now</a>
                            </div>
                        </div>
                    </div>
                    <button type="button" class="btn btn-link close-btn">
                        <svg xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 24 24" width="15px" height="15px"><path d="M 4.9902344 3.9902344 A 1.0001 1.0001 0 0 0 4.2929688 5.7070312 L 10.585938 12 L 4.2929688 18.292969 A 1.0001 1.0001 0 1 0 5.7070312 19.707031 L 12 13.414062 L 18.292969 19.707031 A 1.0001 1.0001 0 1 0 19.707031 18.292969 L 13.414062 12 L 19.707031 5.7070312 A 1.0001 1.0001 0 0 0 18.980469 3.9902344 A 1.0001 1.0001 0 0 0 18.292969 4.2929688 L 12 10.585938 L 5.7070312 4.2929688 A 1.0001 1.0001 0 0 0 4.9902344 3.9902344 z"/></svg>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="wrapper">
<div id="top-nav">
    <div class="container">
        <ul class="hidden-sm hidden-xs" >
            <li><a href="https://mariadb.com/kb/">Knowledge Base</a></li>
            <li><a href="https://mariadb.com/contact/">Contact</a></li>
            
                
                    <li>
                        <a href="/kb/user/login?next=/kb/zh-cn/delete/+source/" rel="nofollow">Login</a>
                    </li>
                
            
            
            <li id="search-form">
                <form action="/kb/zh-cn/+search/" method="get" id="search-block-form" accept-charset="UTF-8">
                    <input id="search" title="Enter the terms you wish to search for."
                           placeholder="Search . . ." type="text"
                           name="q" value="" size="15" maxlength="128" class="form-text"
                           data-autocomplete-url="/kb/zh-cn/+search/autocomplete/">
                    <input type="hidden" name="quick" value="1" />
                    <input type="hidden" name="source" value="kb" />
                </form>
            </li>
            <li><a id="search-toggler" href="/kb/search/">Search</a></li>
            
        </ul>
    </div>
</div>
<div id="navbar-bottom" class="navbar">
    <div class="container">
        
        
        
        
        <div class="row">
            <div class="col-md-3 col-sm-9 col-xs-9">
                <a class="brand" href="/" title="MariaDB">
                    <img src="/kb/static/images/logo-2018-black.95f5978ae14d.png">
                </a>
            </div>
            <div class="col-md-9 hidden-sm hidden-xs">
                <div class="main-menu">
                    <ul id="main-menu" class="nav navbar-nav inline-block-sm">
    <li class="has-sub full-menu">
        <a href="/products" title="Products">Products</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/services" title="Services">Services</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/pricing" title="Pricing">Pricing</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/resources" title="Resources">Resources</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/about-us" title="About Us">About Us</a>
    </li>
    <li class="">
        <a class="button electric-eel small top-bar-right-download" href="/downloads/">Download</a>
    </li>
</ul>
                </div>
            </div>
            <div class="col-md-3 visible-sm visible-xs col-sm-3 col-xs-3 ps-rv">
                <div class="navbar-header text-right pull-right">
                    <button type="button" class="menu-control toggle-menu" id="open-menu">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="main">
    <div class="container">
        

        <div id="subheader1" class="clearfix">
            <div class="pull-left">
                
                <div id="breadcrumbs" class="breadcrumb">
                    <a href="/kb/zh-cn/">Knowledge Base</a>
                    


    
    » <a class="crumb" href="/kb/zh-cn/mariadb/">MariaDB - 简体中文</a>
    

    
    » <a class="crumb" href="/kb/zh-cn/mariadb-server/">MariaDB Server文档</a>
    


    » <a class="node_link crumb" href="/kb/zh-cn/delete/">DELETE</a>


                </div>
                
            </div>
        </div>
    </div>
    <div class="container" id="container-main">
        <div class="row">
            
            
                
                <aside id="sidebar-first" class="sidebar col-md-2 hidden-xs hidden-sm hidden-print">
                    
                        
                        <ul id="category_menu" class="nav nav-pills nav-stacked">
                            <li><a href="/kb/zh-cn/">首页</a></li>
                            
                                
                                    <li><a href="/kb/zh-cn/+questions/">Open Questions</a></li>
                                
                                <li><a href="/kb/zh-cn/documentation/">MariaDB Server</a></li>
                                <li><a href="/kb/zh-cn/maxscale/">MariaDB MaxScale</a></li>
                                <li><a href="/kb/zh-cn/mariadb-columnstore/">MariaDB ColumnStore</a></li>
                                <li><a href="/kb/zh-cn/connectors/">Connectors</a></li>
                            

                        </ul>
                    

                    
                        <div>
    

<div class="well well-small box actions"><div>

        <a class="btn btn-block btn-small" href="/kb/zh-cn/delete/">Return to article</a>
    
</div>
</div>

</div>
                    

                    

































                </aside>
            
            
            
                
            
            
            <section id="content" class="limited_width col-md-10 clearfix">
                
                    <h1>DELETE - Source</h1>
                

                



                <div>
                    

    

    
    <div class="revision_info">
        <dl class="table">
            <dt>Revision</dt>
            <dd><a href="/kb/zh-cn/delete/+r/68253/">68253</a></dd>
            <dt>用户</dt>
            <dd>
<span class="user" id="user-5480">
<a href="/kb/user/id/5480" title="longshuai Ma">longshuai Ma</a>
</span></dd>
            <dt>Date</dt>
            <dd>

<span class="datetime" title="2018-04-22 14:37">2018-04-22 14:37</span></dd>
        </dl>
    </div>
    


    

    
        
        <textarea id="answer_source" class="creole_source autogrow">&lt;&lt;toc&gt;&gt;
== 语法

单表语法：

&lt;&lt;code&gt;&gt;
DELETE [LOW_PRIORITY] [QUICK] [IGNORE] 
    FROM tbl_name [PARTITION (partition_list)]
    [WHERE where_condition]
    [ORDER BY ...]
    [LIMIT row_count]
    [RETURNING select_expr 
      [, select_expr ...]]
&lt;&lt;/code&gt;&gt;

多表语法：

&lt;&lt;code&gt;&gt;
DELETE [LOW_PRIORITY] [QUICK] [IGNORE]
    tbl_name[.*] [, tbl_name[.*]] ...
    FROM table_references
    [WHERE where_condition]
&lt;&lt;/code&gt;&gt;

或：

&lt;&lt;code&gt;&gt;
DELETE [LOW_PRIORITY] [QUICK] [IGNORE]
    FROM tbl_name[.*] [, tbl_name[.*]] ...
    USING table_references
    [WHERE where_condition]
&lt;&lt;/code&gt;&gt;

Trimming history:
&lt;&lt;code&gt;&gt;
DELETE HISTORY
  FROM tbl_name [PARTITION (partition_list)]
  [BEFORE SYSTEM_TIME [TIMESTAMP|TRANSACTION] expression]
&lt;&lt;/code&gt;&gt;

== 描述
&lt;&lt;style class=&#34;darkheader-nospace-borders&#34;&gt;&gt;
|= 选项 |= 描述
| LOW_PRIORITY | DELETE延迟执行，直到没有其他客户端SELECT表。只有使用表锁的存储引擎(MyISAM、Aria等)才需要使用，详见[[high_priority-and-low_priority-clauses|HIGH_PRIORITY and LOW_PRIORITY clauses]]。
| QUICK | 通知存储引擎它期望删除很多行。存储引擎收到这类通知后，会做出一些行为加速DELETE操作。例如DELETE执行过程中忽略数据块的合并，直到DELETE结束。这加快了数据块中空间丢失的扩散速度。至少[[myisam|MyISAM]]和[[aria|Aria]]支持该特性。
| IGNORE | 即使DELETE某行的过程中发生了错误，也继续向后执行DELETE操作。见[[ignore|How IGNORE works]]。
&lt;&lt;/style&gt;&gt;

对于单表DELETE，&lt;&lt;code&gt;&gt;DELETE&lt;&lt;/code&gt;&gt;语句删除&lt;&lt;code&gt;&gt;tbl_name&lt;&lt;/code&gt;&gt;中的行，并返回成功删除的行数量。该数量可以通过[[row-count|ROW_COUNT()]]函数获取。如果给定了&lt;&lt;code&gt;&gt;WHERE&lt;&lt;/code&gt;&gt;子句，则筛选出哪些行需要删除。没有&lt;&lt;code&gt;&gt;WHERE&lt;&lt;/code&gt;&gt;子句时，会删除表中所有行。如果给定了[[order-by|ORDER BY]]子句，则数据会先排序，并按顺序删除。如果给定了[[limit|LIMIT]]子句，则只删除一定数量的行。

对于多表DELETE，&lt;&lt;code&gt;&gt;DELETE&lt;&lt;/code&gt;&gt;语句删除&lt;&lt;code&gt;&gt;tbl_name&lt;&lt;/code&gt;&gt;中满足条件的行。这种情况下，不能使用[[order-by|ORDER BY]]和[[limit|LIMIT]]子句。##DELETE##可以通过##db_name.tbl_name##(见[[identifier-qualifiers|Identifier Qualifiers]])的方式引用不同数据库中的表，因此可以删除不同数据库中的数据。

&lt;&lt;code&gt;&gt;where_condition&lt;&lt;/code&gt;&gt;是一个表达式，用于评估筛选哪些行会被删除。

直到目前为止，还无法删除某表的同时在子查询中select该表数据。

要删除行，需要对表具有&lt;&lt;code&gt;&gt;DELETE&lt;&lt;/code&gt;&gt;权限，而对于那些只用来读取的字段，只需要对字段具有&lt;&lt;code&gt;&gt;SELECT&lt;&lt;/code&gt;&gt;权限即可，例如&lt;&lt;code&gt;&gt;WHERE&lt;&lt;/code&gt;&gt;中引用的字段。见[[grant|GRANT]]。

&lt;&lt;product MariaDB from=10.0&gt;&gt;
PARTITION子句是MariaDB 10.0中引入的特性。详细信息见[[partition-pruning-and-selection|Partition Pruning and Selection]]。
&lt;&lt;/product&gt;&gt;

按照规定，没有给定&lt;&lt;fixed&gt;&gt;WHERE&lt;&lt;/fixed&gt;&gt;子句的&lt;&lt;fixed&gt;&gt;DELETE&lt;&lt;/fixed&gt;&gt;语句会删除表中的所有行。如果你不需要知道删除了多少行，那么可以使用更快的删除方式&lt;&lt;fixed&gt;&gt;TRUNCATE TABLE&lt;&lt;/fixed&gt;&gt;。但是，在事务中或者表上有锁的时候，&lt;&lt;code&gt;&gt;TRUNCATE TABLE&lt;&lt;/code&gt;&gt;无法执行，而&lt;&lt;code&gt;&gt;DELETE&lt;&lt;/code&gt;&gt;可以。见&lt;&lt;fixed&gt;&gt;[[truncate-table|TRUNCATE TABLE]]&lt;&lt;/fixed&gt;&gt;和
&lt;&lt;fixed&gt;&gt;[[lock|LOCK]]&lt;&lt;/fixed&gt;&gt;。

&lt;&lt;product MariaDB from=10.0.5&gt;&gt;
从MariaDB 10.0.5开始，可以为单表DELETE返回删除行相关的数据，只需使用##DELETE ... RETURNING select_expr [, select_expr2 ...]]##语法即可。
&lt;&lt;sql&gt;&gt;
/* 此为译注所给示例 */

/* 删除id&gt;5的记录时，同时返回t1表中所有的字段 */
DELETE FROM t1 WHERE id&gt;5 RETURNING *;  
+----+------+------+--------+
| id | comp | sex  | number |
+----+------+------+--------+
|  6 | A    | nan  |     60 |
|  7 | A    | nan  |     60 |
+----+------+------+--------+

/* 删除id&lt;3的记录时，同时返回t1表中id+3的值 */
DELETE FROM t1 WHERE id&lt;3 RETURNING id+3;  
+------+
| id+3 |
+------+
|    4 |
|    5 |
+------+
&lt;&lt;/sql&gt;&gt;
多表删除不允许使用RETURNING。
SQL表达式可以从单行的字段中计算得出。允许使用子查询。允许使用AS关键字，因此可以使用别名。 

不允许使用聚合函数。
&lt;&lt;/product&gt;&gt;

&lt;&lt;product mariadb from=10.3.1&gt;&gt;
=== 源和目标相同
MariaDB 10.3.1之前，无法删除源和目标相同的表。从MariaDB 10.3.1开始，允许删除源和目标相同的表。例如：
&lt;&lt;sql&gt;&gt;
DELETE FROM t1 WHERE c1 IN (SELECT b.c1 FROM t1 b WHERE b.c2=0);
&lt;&lt;/sql&gt;&gt;
&lt;&lt;/product&gt;&gt;

&lt;&lt;product mariadb from=10.3.4&gt;&gt;
从MariaDB 10.3.4开始，可以使用##DELETE HISTORY##删除[[system-versioned-tables|System-versioned tables]]中的历史信息。
&lt;&lt;/product&gt;&gt;

== 示例

如何使用[[order-by|ORDER BY]]和[[limit|LIMIT]]子句：
&lt;&lt;code&gt;&gt;
DELETE FROM page_hit ORDER BY timestamp LIMIT 1000000;
&lt;&lt;/code&gt;&gt;

如何使用RETURNING子句：
&lt;&lt;code&gt;&gt;
DELETE FROM t RETURNING f1;
+------+
| f1   |
+------+
|    5 |
|   50 |
|  500 |
+------+ 
&lt;&lt;/code&gt;&gt;

下面的语句联接了两张表：其中blog表用于匹配WHERE条件，该表中的数据不会被删除；post表中的数据会被删除。
&lt;&lt;code&gt;&gt;
DELETE post FROM blog INNER JOIN post WHERE blog.id = post.blog_id;
&lt;&lt;/code&gt;&gt;

=== 源和目标相同的DELETE
&lt;&lt;sql&gt;&gt;
CREATE TABLE t1 (c1 INT, c2 INT);
DELETE FROM t1 WHERE c1 IN (SELECT b.c1 FROM t1 b WHERE b.c2=0);
&lt;&lt;/sql&gt;&gt;
MariaDB 10.3.1之前，该语句返回：
&lt;&lt;sql&gt;&gt;
ERROR 1093 (HY000): Table &#39;t1&#39; is specified twice, both as a target for &#39;DELETE&#39; 
  and as a separate source for
&lt;&lt;/sql&gt;&gt;
MariaDB 10.3.1之后：
&lt;&lt;sql&gt;&gt;
Query OK, 0 rows affected (0.00 sec)
&lt;&lt;/sql&gt;&gt;

== See also
* [[ignore|How IGNORE works]]
* [[select|SELECT]]
* [[order-by|ORDER BY]]
* [[limit|LIMIT]]</textarea>
    


                    <div id="content_disclaimer" class="graybox">
                        Content reproduced on this site is the property of its respective owners,
                        and this content is not reviewed in advance by MariaDB. The views, information and opinions
                        expressed by this content do not necessarily represent those of MariaDB or any other party.
                    </div>
                </div>
            </section>

            
        </div>
    </div>
</div>

<!-- Footer -->
<footer id="footer">
    <div class="footer">
        <div class="container">
            <div class="row">
                <div class="col-xs-12">
                    <ul class="list-inline text-center footer-nav">
                        <li>
                            <h5>
                                <a href="https://mariadb.com/products" title="Products">Products</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/services" title="Services">Services</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/pricing" title="Pricing">Pricing</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/resources" title="Resources">Resources</a>
                            </h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/about-us" title="About MariaDB">About Us</a></h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/download" title="Download">Download MariaDB</a></h5>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="row row-10">
                
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div id="block-footerformcontact" class="block block-block-content block-block-contentd754ee1b-3cc9-40e7-9ef4-f504f1197fb1">
                        
                            <h5 style="font-weight: 400;">Subscribe to our newsletter!</h5>
                            <script src="//app-sj15.marketo.com/js/forms2/js/forms2.min.js"></script><form id="mktoForm_1498"></form>
                            <script>
                                <!--//--><![CDATA[// ><!--
                                MktoForms2.loadForm("//app-sj15.marketo.com", "573-PXI-984", 1498);
                                //--><!]]]]><![CDATA[>
                                //--><!]]>
                            </script>
                        
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div class="footer-copyright">
                        <div class="text-center">
                            <ul class="list-inline no-margin">
                                <li>
                                    <a href="/legal" title="Legal">Legal</a>
                                </li>
                                <li>
                                    <a href="/privacy-policy" title="Privacy Policy">Privacy Policy</a>
                                </li>
                                <li>
                                    <a href="/cookie-policy/" title="Cookies">Cookie Policy</a>
                                </li>
                            </ul>
                            <p>Copyright &copy; 2025 MariaDB. All rights reserved.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
</footer>
</div>

<div id="ajax_loading">
    <img src="/kb/static/images/ajax-loader.a51c5608d01a.gif" />
</div>

    <!-- Google Tag Manager -->
    <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-MK2847"
                      height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
            '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MK2847');</script>
    <!-- End Google Tag Manager -->

</body>

<script type="text/javascript" src="/kb/static/js/main.1587e3a666fc.js" charset="utf-8"></script>

</html>