<!DOCTYPE html>
<html>
<head data-cookie-domain=""
      data-cookie-path="/">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="apple-touch-icon" sizes="180x180" href="/kb/static/images/favicons/apple-touch-icon.159e713979be.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/kb/static/images/favicons/favicon-32x32.bc0ac1d5d11e.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/kb/static/images/favicons/favicon-16x16.5801f8f0f34e.png">
    <link rel="shortcut icon" href="/kb/static/images/favicons/favicon.d122d305dee4.ico" type="image/x-icon" />

    <title>ColumnStore系统变量 - MariaDB Knowledge Base</title>

    <link href="/kb/static/css/main.f7633538c846.css" rel="stylesheet" type="text/css" />

    

    

    <!-- FB Open Graph tags -->
    <meta property="og:title" content="ColumnStore系统变量" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://mariadb.com/kb/zh-cn/columnstore-system-variables/" />
    <meta property="og:image" content="http://mariadb.comaskmonty-logo.png" />
    <meta property="og:site_name" content="MariaDB KnowledgeBase" />
    <meta property="fb:admins" content="514852603" />
    <meta property="og:description" content="
变量
名称命令行范围数据类型默认值范围
infinidb_compression_type是两者枚举20,2
infinidb_decimal_scale是两者数值8
infinidb_diskjoin_bucketsize是两者数值100
infinidb_diskjoin_largesidelimit是两者数值0
infinidb_diskj..." />

    <meta name="description" content="
变量
名称命令行范围数据类型默认值范围
infinidb_compression_type是两者枚举20,2
infinidb_decimal_scale是两者数值8
infinidb_diskjoin_bucketsize是两者数值100
infinidb_diskjoin_largesidelimit是两者数值0
infinidb_diskj..." />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="//fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet"/>
    
</head>
<body class="mpkb nodes products nodes_view jqui" id="nodes_view">





<div id="menu-mobile" class="visible-sm visible-xs">

    <div>
        <div id="mobile-close-menu" class="text-right">
            <a href="javascript:void(0)" title="Close Menu" id="back-main" class="toggle-menu">X<span></span></a>
        </div>
    </div>
    <div class="mainmenu-mobile">
        <ul class="ls-none ul-menu">
            <li data-sub="submenu5"><a class="open-form-search" href="/kb/search/" title="Search">Search </a></li>
            <li data-sub="submenu0"><a href="/products" title="Products">Products</a><span class="arrow-main"></span></li>
            <li data-sub="submenu1"><a href="/services" title="Services">Services</a><span class="arrow-main"></span></li>
            <li data-sub="submenu2"><a href="/resources" title="Resources">Resources</a><span class="arrow-main"></span></li>
            <li data-sub="submenu3"><a href="/about-us" title="About">About</a><span class="arrow-main"></span></li>
            <li data-sub="submenu4"><a href="/contact" title="Contact">Contact</a></li>
        </ul>
    </div>

    <div class="nav-top-mobile">
        <div class="select-box form">

            <ul class="inline-block-md mb-none top-nav">
                <li>

                </li>
                
                    <li>
                        <a href="/kb/user/login?next=/kb/zh-cn/columnstore-system-variables/"> Login</a>
                    </li>
                
            </ul>



        </div>
        <p class="text-center copyright">Copyright &copy; 2024 MariaDB. All rights reserved.</p>
    </div>
</div>
<div class="violator-wrap d-none" id="top_violator">
    <div class="container">
        <div class="row">
            <div class="col-xs-12 col-sm-12">
                <div class="violator-outer">
                    <div class="violator-inner">
                        <div class="row">
                            <div class="col-xs-12 col-sm-9 col-lg-7 col-lg-offset-2" id="top_violator_content">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="content-link" target="_blank" rel="nofollow noreferrer">
                                    <span>The Ultimate Guide to High Availability with MariaDB</span>
                                </a>
                            </div>
                            <div class="col-xs-12 col-sm-3" id="top_violator_cta">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="btn btn-mariadb" target="_blank" rel="nofollow noreferrer">Download Now</a>
                            </div>
                        </div>
                    </div>
                    <button type="button" class="btn btn-link close-btn">
                        <svg xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 24 24" width="15px" height="15px"><path d="M 4.9902344 3.9902344 A 1.0001 1.0001 0 0 0 4.2929688 5.7070312 L 10.585938 12 L 4.2929688 18.292969 A 1.0001 1.0001 0 1 0 5.7070312 19.707031 L 12 13.414062 L 18.292969 19.707031 A 1.0001 1.0001 0 1 0 19.707031 18.292969 L 13.414062 12 L 19.707031 5.7070312 A 1.0001 1.0001 0 0 0 18.980469 3.9902344 A 1.0001 1.0001 0 0 0 18.292969 4.2929688 L 12 10.585938 L 5.7070312 4.2929688 A 1.0001 1.0001 0 0 0 4.9902344 3.9902344 z"/></svg>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="wrapper">
<div id="top-nav">
    <div class="container">
        <ul class="hidden-sm hidden-xs" >
            <li><a href="https://mariadb.com/kb/">Knowledge Base</a></li>
            <li><a href="https://mariadb.com/contact/">Contact</a></li>
            
                
                    <li>
                        <a href="/kb/user/login?next=/kb/zh-cn/columnstore-system-variables/" rel="nofollow">Login</a>
                    </li>
                
            
            
            <li id="search-form">
                <form action="/kb/zh-cn/+search/" method="get" id="search-block-form" accept-charset="UTF-8">
                    <input id="search" title="Enter the terms you wish to search for."
                           placeholder="Search . . ." type="text"
                           name="q" value="" size="15" maxlength="128" class="form-text"
                           data-autocomplete-url="/kb/zh-cn/+search/autocomplete/">
                    <input type="hidden" name="quick" value="1" />
                    <input type="hidden" name="source" value="kb" />
                </form>
            </li>
            <li><a id="search-toggler" href="/kb/search/">Search</a></li>
            
        </ul>
    </div>
</div>
<div id="navbar-bottom" class="navbar">
    <div class="container">
        
        
        
        
        <div class="row">
            <div class="col-md-3 col-sm-9 col-xs-9">
                <a class="brand" href="/" title="MariaDB">
                    <img src="/kb/static/images/logo-2018-black.95f5978ae14d.png">
                </a>
            </div>
            <div class="col-md-9 hidden-sm hidden-xs">
                <div class="main-menu">
                    <ul id="main-menu" class="nav navbar-nav inline-block-sm">
    <li class="has-sub full-menu">
        <a href="/products" title="Products">Products</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/services" title="Services">Services</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/pricing" title="Pricing">Pricing</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/resources" title="Resources">Resources</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/about-us" title="About Us">About Us</a>
    </li>
    <li class="">
        <a class="button electric-eel small top-bar-right-download" href="/downloads/">Download</a>
    </li>
</ul>
                </div>
            </div>
            <div class="col-md-3 visible-sm visible-xs col-sm-3 col-xs-3 ps-rv">
                <div class="navbar-header text-right pull-right">
                    <button type="button" class="menu-control toggle-menu" id="open-menu">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="main">
    <div class="container">
        

        <div id="subheader1" class="clearfix">
            <div class="pull-left">
                
                <div id="breadcrumbs" class="breadcrumb">
                    <a href="/kb/zh-cn/">Knowledge Base</a>
                    


    
    » <a class="crumb" href="/kb/zh-cn/mariadb/">MariaDB - 简体中文</a>
    

    
    » <a class="crumb" href="/kb/zh-cn/mariadb-server/">MariaDB Server文档</a>
    

    
    » <a class="crumb" href="/kb/zh-cn/mariadb-columnstore/">MariaDB ColumnStore</a>
    


    » <a class="node_link crumb" href="/kb/zh-cn/columnstore-system-variables/">ColumnStore系统变量</a>


                </div>
                
            </div>
        </div>
    </div>
    <div class="container" id="container-main">
        <div class="row">
            
            
                
                <aside id="sidebar-first" class="sidebar col-md-2 hidden-xs hidden-sm hidden-print">
                    
                        
                        <ul id="category_menu" class="nav nav-pills nav-stacked">
                            <li><a href="/kb/zh-cn/">首页</a></li>
                            
                                
                                    <li><a href="/kb/zh-cn/+questions/">Open Questions</a></li>
                                
                                <li><a href="/kb/zh-cn/documentation/">MariaDB Server</a></li>
                                <li><a href="/kb/zh-cn/maxscale/">MariaDB MaxScale</a></li>
                                <li><a href="/kb/zh-cn/mariadb-columnstore/">MariaDB ColumnStore</a></li>
                                <li><a href="/kb/zh-cn/connectors/">Connectors</a></li>
                            

                        </ul>
                    

                    
<div>



<div class="well well-small box actions"><div>

        <a class="btn btn-block btn-blue btn-sm" href="/kb/zh-cn/columnstore-system-variables/+history" rel="nofollow">历史</a>
        
        
        
        <a class="btn btn-block btn-blue btn-sm" href="/kb/zh-cn/columnstore-system-variables/+source/">Source</a>
        
        <a class="btn btn-block btn-blue btn-sm flag" href="/kb/zh-cn/columnstore-system-variables/+flag"
                data-flag-url="/kb/zh-cn/columnstore-system-variables/+flag" rel="nofollow">
                Flag as Spam / Inappropriate</a>
        
        <a class="btn btn-block btn-blue btn-sm" href="/kb/zh-cn/columnstore-system-variables/+translate/">
                Translate</a>
        

</div>
</div>





<div class="well well-small box node_info"><div>

    <dl>
        <dt>已创建</dt>
        <dd>

<span class="datetime" title="2023-05-22 12:52">1 year, 5 months ago</span></dd>

        <dt>Modified</dt>
        <dd>

<span class="datetime" title="2023-05-22 12:52">1 year, 5 months ago</span></dd>

        <dt>Type</dt>
        <dd>article</dd>

        <dt>Status</dt>
        <dd>active</dd>

        <dt>License</dt>
        <dd>
            
                <a href="/kb/zh-cn/columnstore-system-variables/+license/">CC BY-SA / Gnu FDL</a>
            
        </dd>

        
    </dl>

    
    <ul class="rss_feeds">
        <li><a href="/kb/zh-cn/columnstore-system-variables/+history/feed/">
            历史</a>
        </li>
        <li><a href="/kb/zh-cn/columnstore-system-variables/+comments/feed/">
            Comments</a>
        </li>
    </ul>
    

</div>
</div>





    
    
    

<div class="well well-small box attachments"><div><div class="edit_link pull-right"><a href="/kb/zh-cn/columnstore-system-variables/+edit/attachments/">Edit</a></div><h5>Attachments</h5></div><div>

        
            <div class="no_data">No attachments exist</div>
        
    
</div>
</div>

    



    
    
        

<div class="well well-small box"><div><h5>Localized Versions</h5></div><div>

        <ul>
            
            <li><a href="/kb/en/columnstore-system-variables/">ColumnStore System Variables</a> [en]</li>
            
        </ul>
        
</div>
</div>

    






</div>


                    

































                </aside>
            
            
            
                
            
            
                
            
            <section id="content" class="limited_width col-md-8 clearfix">
                
                    <h1>ColumnStore系统变量</h1>
                

                



                <div>
                    
    

    
    
    

    <div class="node creole">
        
        
        


    
    <div class="answer formatted">
        <div class="table_of_contents standalone"> <ol class="toc">

    <li class=""><a href="#变量" title="变量">变量</a></li>

    <li class=""><a href="#压缩模式" title="压缩模式">压缩模式</a></li>

    <li class=""><a href="#列存储小数转双精度浮点数运算" title="列存储小数转双精度浮点数运算">列存储小数转双精度浮点数运算</a></li>

    <li class=""><a href="#基于磁盘的连接" title="基于磁盘的连接">基于磁盘的连接</a></li>

    <li class=""><a href="#inserts-的批量插入模式" title="INSERTS 的批量插入模式">INSERTS 的批量插入模式</a></li>

    <li class=""><a href="#本地-pm-查询模式" title="本地 PM 查询模式">本地 PM 查询模式</a></li>

    <li class=""><a href="#操作模式" title="操作模式">操作模式</a> </ol>
</li>
</div>
<h2 class="anchored_heading" id="变量">变量</h2>
<div class="cstm-style darkheader-nospace-borders"><table><tr><th>名称</th><th>命令行</th><th>范围</th><th>数据类型</th><th>默认值</th><th>范围</th></tr>
<tr><td><a href="#compression-mode">infinidb_compression_type</a></td><td>是</td><td>两者</td><td>枚举</td><td>2</td><td>0,2</td></tr>
<tr><td><a href="#columnstore-decimal-scale">infinidb_decimal_scale</a></td><td>是</td><td>两者</td><td>数值</td><td>8</td><td></td></tr>
<tr><td><a href="#disk-based-joins">infinidb_diskjoin_bucketsize</a></td><td>是</td><td>两者</td><td>数值</td><td>100</td><td></td></tr>
<tr><td><a href="#disk-based-joins">infinidb_diskjoin_largesidelimit</a></td><td>是</td><td>两者</td><td>数值</td><td>0</td><td></td></tr>
<tr><td><a href="#disk-based-joins">infinidb_diskjoin_smallsidelimit</a></td><td>是</td><td>两者</td><td>数值</td><td>0</td><td></td></tr>
<tr><td><a href="#columnstore-decimal-to-double-math">infinidb_double_for_decimal_math</a></td><td>是</td><td>两者</td><td>枚举</td><td>关闭</td><td>关闭，打开</td></tr>
<tr><td><a href="#batch-insert-mode-for-inserts">infinidb_import_for_batchinsert_delimiter</a></td><td>是</td><td>两者</td><td>数值</td><td>7</td><td></td></tr>
<tr><td><a href="#batch-insert-mode-for-inserts">infinidb_import_for_batchinsert_enclosed_by</a></td><td>是</td><td>两者</td><td>数值</td><td>17</td><td></td></tr>
<tr><td><a href="#local-pm-query-mode">infinidb_local_query</a></td><td>是</td><td>两者</td><td>枚举</td><td>0</td><td>0,1</td></tr>
<tr><td>infinidb_ordered_only</td><td>是</td><td>两者</td><td>枚举</td><td>关闭</td><td>关闭，打开</td></tr>
<tr><td>infinidb_string_scan_threshold</td><td>是</td><td>两者</td><td>数值</td><td>10</td><td></td></tr>
<tr><td>infinidb_stringtable_threshold</td><td>是</td><td>两者</td><td>数值</td><td>20</td><td></td></tr>
<tr><td><a href="#disk-based-joins">infinidb_um_mem_limit</a></td><td>是</td><td>两者</td><td>数值</td><td>0</td><td></td></tr>
<tr><td><a href="#columnstore-decimal-scale">infinidb_use_decimal_scale</a></td><td>是</td><td>两者</td><td>枚举</td><td>关闭</td><td>关闭，打开</td></tr>
<tr><td><a href="#batch-insert-mode-for-inserts">infinidb_use_import_for_batchinsert</a></td><td>是</td><td>两者</td><td>枚举</td><td>打开</td><td>关闭，打开</td></tr>
<tr><td>infinidb_varbin_always_hex</td><td>是</td><td>两者</td><td>枚举</td><td>打开</td><td>关闭，打开</td></tr>
<tr><td><a href="#operating-mode">infinidb_vtable_mode</a></td><td>是</td><td>两者</td><td>枚举</td><td>1</td><td>0,1,2</td></tr>
</table>
</div><p><code class="unknown_macro">&lt;&lt;<span class="macro_name">toc</span><span class="macro_arg_string"></span>&gt;&gt;</code></p>
<h2 class="anchored_heading" id="压缩模式">压缩模式</h2>
<p>MariaDB ColumnStore has the ability to compress data and this is controlled through a compression mode. This compression mode may be set as a default for the instance or set at the session level.</p>
<p>To set the compression mode at the session level, the following command is used. Once the session has ended, any subsequent session will return to the default for the instance.</p>
<pre class="fixed">set infinidb_compression_type = n
</pre><p>where n is:</p>
<ul start="1"><li>0) compression is turned off. Any subsequent table create statements run will have compression turned off for that table unless any statement overrides have been performed. Any alter statements run to add a column will have compression turned off for that column unless any statement override has been performed.
</li><li>2) compression is turned on. Any subsequent table create statements run will have compression turned on for that table unless any statement overrides have been performed. Any alter statements run to add a column will have compression turned on for that column unless any statement override has been performed. ColumnStore uses snappy compression in this mode.</li></ul>

<h2 class="anchored_heading" id="列存储小数转双精度浮点数运算">列存储小数转双精度浮点数运算</h2>
<p><code class="unknown_macro">&lt;&lt;<span class="macro_name">toc</span><span class="macro_arg_string"> title=''  layout=standalone</span>&gt;&gt;</code>
MariaDB ColumnStore has the ability to change intermediate decimal mathematical results from decimal type to double. The decimal type has approximately 17-18 digits of precision, but a smaller maximum range.  Whereas the double type has approximately 15-16 digits of precision, but a much larger maximum range. 
In typical mathematical and scientific applications, the ability to avoid overflow in intermediate results with double math is likely more beneficial than the additional two digits of precisions. In banking applications, however, it may be more appropriate to leave in the default decimal setting to ensure accuracy to the least significant digit.</p>
<h3 class="anchored_heading" id="enabledisable-decimal-to-double-math">Enable/Disable decimal to double math</h3>
<p>The infinidb_double_for_decimal_math variable is used to control the data type for intermediate decimal results. This decimal for double math may be set as a default for the instance, set at the session level, or at the statement level by toggling this variable on and off.</p>
<p>To enable/disable the use of the decimal to double math at the session level, the following command is used. Once the session has ended, any subsequent session will return to the default for the instance.</p>
<pre class="fixed">set infinidb_double_for_decimal_math = on
</pre><p>where n is:</p>
<ul start="1"><li>off (disabled, default)
</li><li>on (enabled)
</li></ul>
<h3 class="anchored_heading" id="columnstore-decimal-scale">ColumnStore decimal scale</h3>
<p>ColumnStore has the ability to support varied internal precision on decimal calculations. <em>infinidb_decimal_scale</em> is used internally by the ColumnStore engine to control how many significant digits to the right of the decimal point are carried through in suboperations on calculated columns. If, while running a query, you receive the message ‘aggregate overflow’, try reducing <em>infinidb_decimal_scale</em> and running the query again. Note that,as you decrease <em>infinidb_decimal_scale</em>, you may see reduced accuracy in the least significant digit(s) of a returned calculated column. <em>infinidb_use_decimal_scale</em> is used internally by the ColumnStore engine to turn the use of this internal precision on and off. These two system variables may be set as a default for the instance or set at the session level.</p>
<h4 class="anchored_heading" id="enabledisable-decimal-scale">Enable/disable decimal scale</h4>
<p>To enable/disable the use of the decimal scale at the session level, the following command is used. Once the session has ended, any subsequent session will return to the default for the instance.</p>
<pre class="fixed">set infinidb_use_decimal_scale = on
</pre><p>where <em>n</em> is off (disabled) or on (enabled).</p>
<h4 class="anchored_heading" id="set-decimal-scale-level">Set decimal scale level</h4>
<p>To set the decimal scale at the session level, the following command is used. Once the session has ended, any subsequent session will return to the default for the instance.</p>
<pre class="fixed">set infinidb_decimal_scale = n
</pre><p>where <em>n</em> is the amount of precision desired for calculations.</p>

<h2 class="anchored_heading" id="基于磁盘的连接">基于磁盘的连接</h2>
<p><code class="unknown_macro">&lt;&lt;<span class="macro_name">toc</span><span class="macro_arg_string"> title='' layout=standalone</span>&gt;&gt;</code></p>
<h3 class="anchored_heading" id="introduction">Introduction</h3>
<p>Joins are performed in-memory on the <a href="/kb/en/columnstore-user-module/">UM</a> node. When a join operation exceeds the memory allocated on the UM for query joins, the query is aborted with an error code IDB-2001.
Disk-based joins enable such queries to use disk for intermediate join data in case when the memory needed for join exceeds the memory limit on the UM. Although slower in performance as compared to a fully in-memory join, and bound by the temporary space on disk, it does allow such queries to complete.  
<br><strong>Note:Disk-based joins does not include aggregation and DML joins.</strong></p>
<p>The following variables in the <em><strong>HashJoin</strong></em> element in the Columnstore.xml configuration file relate to disk-based joins. Columnstore.xml resides in the etc directory for your installation(/usr/local/mariadb/columnstore/etc).</p>
<ul start="1"><li><em><strong>AllowDiskBasedJoin</strong></em> – Option to use disk-based joins. Valid values are Y (enabled) or N (disabled). Default is disabled.
</li><li><em><strong>TempFileCompression</strong></em> – Option to use compression for disk join files. Valid values are Y (use compressed files) or N (use non-compressed files).
</li><li><em><strong>TempFilePath</strong></em> – The directory path used for the disk joins. By default, this path is the tmp directory for your installation (i.e., /usr/local/mariadb/columnstore/tmp). Files (named infinidb-join-data*) in this directory will be created and cleaned on an as needed basis. The entire directory is removed and recreated by ExeMgr at startup.)
</li></ul>
<p><strong>Note: When using disk-based joins, it is strongly recommended that the TempFilePath reside on its own partition as the partition may fill up as queries are executed.</strong></p>
<h3 class="anchored_heading" id="per-user-join-memory-limit">Per user join memory limit</h3>
<p>In addition to the system wide flags, at SQL global and session level, the following system variables exists for managing per user memory limit for joins.  </p>
<ul start="1"><li><em><strong>infinidb_um_mem_limit</strong></em> - A value for memory limit in MB per user. When this limit is exceeded by a join, it will switch to a disk-based join. By default the limit is not set (value of 0).
</li></ul>
<p>For modification at the global level:
In my.cnf file (typically /usr/local/mariadb/columnstore/mysql):</p>
<pre class="fixed">[mysqld]
...
infinidb_um_mem_limit = value
where value is the value in Mb for in memory limitation per user.
</pre><p>For modification at the session level, before issuing your join query from the SQL client, set the session variable as follows.</p>
<pre class="fixed">set infinidb_um_mem_limit = value
</pre>
<h2 class="anchored_heading" id="inserts-的批量插入模式">INSERTS 的批量插入模式</h2>
<p><code class="unknown_macro">&lt;&lt;<span class="macro_name">toc</span><span class="macro_arg_string"> title=''  layout=standalone</span>&gt;&gt;</code></p>
<h3 class="anchored_heading" id="introduction">Introduction</h3>
<p>MariaDB ColumnStore has the ability to utilize the cpimport fast data import tool for non-transactional <a href="/kb/en/load-data-infile/">LOAD DATA INFILE</a> and <a href="/kb/en/insert/">INSERT INTO SELECT FROM</a> SQL statements. Using this method results in a significant increase in performance in loading data through these two SQL statements. This optimization is independent of the storage engine used for the tables in the select statement.</p>
<h3 class="anchored_heading" id="enabledisable-using-cpimport-for-batch-insert">Enable/disable using cpimport for batch insert</h3>
<p>The infinidb_use_import_for_batchinsert variable is used  to control if cpimport is used for these statements. This variable may be set as a default for the instance, set at the session level, or at the statement level by toggling this variable on and off.</p>
<p>To enable/disable the use of the use cpimport for batch insert at the session level, the following command is used. Once the session has ended, any subsequent session will return to the default for the instance.</p>
<pre class="fixed">set infinidb_use_import_for_batchinsert = n
where n is:
* 0 (disabled)
* 1 (enabled)
</pre><h3 class="anchored_heading" id="changing-default-delimiter-for-insert-select">Changing default delimiter for INSERT SELECT</h3>
<ul start="1"><li>The infinidb_import_for_batchinsert_delimiter variable is used internally by MariaDB ColumnStore on a non-transactional INSERT INTO SELECT FROM statement as the default delimiter passed to the cpimport tool. With a default value ascii 7, there should be no need to change this value unless your data contains ascii 7 values.
</li></ul>
<p>To change this variable value at the at the session level, the following command is used. Once the session has ended, any subsequent session will return to the default for the instance.</p>
<pre class="fixed">set infinidb_import_for_batchinsert_delimiter = ascii_value
where ascii_value is an ascii value representation of the delimiter desired.
</pre><p>Note that this setting may cause issues with multi byte character set data. It is recommended to utilize UTF8 files directly with cpimport.</p>
<h3 class="anchored_heading" id="version-buffer-file-management">Version buffer file management</h3>
<p>If the following error is received, most likely with a transaction LOAD DATA INFILE or INSERT INTO SELECT then it is recommended to break up the load into multiple smaller chunks, increase the VersionBufferFileSize setting, or consider a non transactional LOAD DATA INFILE or to use cpimport.</p>
<pre class="fixed">ERROR 1815 (HY000) at line 1 in file: 'ldi.sql': Internal error: CAL0006: IDB-2008: The version buffer overflowed. Increase VersionBufferFileSize or limit the rows to be processed.
</pre><p>The VersionBufferFileSize setting is updated in the ColumnStore.xml typically located under /usr/local/mariadb/columnstore/etc.  This dictates the size of the version buffer file on disk which provides DML transactional consistency. The default value is '1GB' which reserves up to a 1 Gigabyte file size. Modify this on the PM1 node and restart the system if you require a larger value.</p>

<h2 class="anchored_heading" id="本地-pm-查询模式">本地 PM 查询模式</h2>
<p>MariaDB ColumnStore has the ability to query data from just a single <a href="/kb/en/columnstore-performance-module/">PM</a> instead of the whole database through the <a href="/kb/en/columnstore-user-module/">UM</a>. In order to accomplish this, the infinidb_local_query variable in the my.cnf configuration file is used and maybe set as a default at system wide or set at the session level. </p>
<p><code class="unknown_macro">&lt;&lt;<span class="macro_name">toc</span><span class="macro_arg_string"> title=''  layout=standalone</span>&gt;&gt;</code></p>
<h3 class="anchored_heading" id="enable-local-pm-query-during-installation">Enable local PM query during installation</h3>
<p>Local PM query can be enabled system wide during the install process when running the install script postConfigure. Answer 'y' to this prompt during the install process.</p>
<pre class="fixed">NOTE: Local Query Feature allows the ability to query data from a single Performance
      Module. Check MariaDB ColumnStore Admin Guide for additional information.

Enable Local Query feature? [y,n] (n) &gt; 
</pre><p><a href="https://mariadb.com/kb/en/library/installing-and-configuring-a-multi-server-columnstore-system-11x/">https://mariadb.com/kb/en/library/installing-and-configuring-a-multi-server-columnstore-system-11x/</a></p>
<h3 class="anchored_heading" id="enable-local-pm-query-systemwide">Enable local PM query systemwide</h3>
<p>To enable the use of the local PM Query at the instance level, specify <code>infinidb_local_query =1</code> (enabled) in the my.cnf configuration file at /usr/local/mariadb/columnstore/mysql. The default is 0 (disabled). </p>
<h3 class="anchored_heading" id="enabledisable-local-pm-query-at-the-session-level">Enable/disable local PM query at the session level</h3>
<p>To enable/disable the use of the local PM Query at the session level, the following command is used. Once the session has ended, any subsequent session will return to the default for the instance.</p>
<pre class="fixed">set infinidb_local_query = n
where n is:
* 0 (disabled)
* 1 (enabled)
</pre><p>At the session level, this variable applies only to executing a query on an individual <a href="/kb/en/columnstore-performance-module/">PM</a> and will error if executed on the <a href="/kb/en/columnstore-user-module/">UM</a>. The PM must be set up with the local query option during installation.</p>
<h3 class="anchored_heading" id="local-pm-query-examples">Local PM Query Examples</h3>
<h4 class="anchored_heading" id="example-1-select-from-a-single-table-on-local-pm-to-import-back-on-local-pm">Example 1 - SELECT from a single table on local PM to import back on local PM:</h4>
<p>With the infinidb_local_query variable set to 1 (default with local PM Query):</p>
<pre class="fixed">mcsmysql -e 'select * from source_schema.source_table;' –N | /usr/local/Calpont/bin/cpimport target_schema target_table -s '\t' –n1
</pre><h4 class="anchored_heading" id="example-2-select-involving-a-join-between-a-fact-table-on-the-pm-node-and-dimension-table-across-all-the-nodes-to-import-back-on-local-pm">Example 2 - SELECT involving a join between a fact table on the PM node and dimension table across all the nodes to import back on local PM:</h4>
<p>With the infinidb_local_query variable set to 0 (default with local PM Query):</p>
<p>Create a script (i.e., extract_query_script.sql in our example) similar to the following:</p>
<pre class="fixed">set infinidb_local_query=0;
select fact.column1, dim.column2 
from fact join dim using (key) 
where idbPm(fact.key) = idbLocalPm();
</pre><p>The infinidb_local_query is set to 0 to allow query across all PMs.</p>
<p>The query is structured so that the UM process on the PM node gets the fact table data locally from the PM node (as indicated by the use of the <a href="https://mariadb.com/kb/en/mariadb/columnstore-information-functions/">idbLocalPm()</a> function), while the dimension table data is extracted from all the PM nodes.</p>
<p>Then you can execute the script to pipe it directly into cpimport:</p>
<pre class="fixed">mcsmysql source_schema -N &lt; extract_query_script.sql | /usr/local/mariadb/columnstore/bin/cpimport target_schema target_table -s '\t' –n1
</pre>
<h2 class="anchored_heading" id="操作模式">操作模式</h2>
<p>ColumnStore 可以通过操作模式支持完整的 MariaDB 查询语法。该操作模式可以设置为实例的默认值，也可以在会话级别进行设置。要在会话级别设置操作模式，请使用以下命令。一旦会话结束，任何后续的会话都将返回到实例的默认值。</p>
<pre class="fixed">set infinidb_vtable_mode = n
</pre><p>其中 n 为：</p>
<ul start="1"><li>0）一种通用的、高度兼容的逐行处理模式。ColumnStore 可以处理一些 WHERE 子句组件，但连接完全由 mysqld 使用嵌套循环连接机制处理。
</li><li>1）（默认值）查询语法由 ColumnStore 进行评估，以便与分布式执行兼容，不兼容的查询将被拒绝。在此模式下执行的查询利用分布式执行，通常具有更高的性能。
</li><li>2）自动切换模式：如果 ColumnStore 无法处理查询，则会自动将查询切换为逐行模式运行。</li></ul>

    </div>


        
            <div id="subscribe" class="well well-small hide hidden-print"
                 data-subscribe-url="/kb/zh-cn/columnstore-system-variables/+subscriptions/add"
                 data-unsubscribe-url="/kb/zh-cn/columnstore-system-variables/+subscriptions/remove">
            </div>
        

        
        
    
        <div class="simple_section_nav">
            <ul class="nav nav-pills">
                
                    <li><a href="/kb/zh-cn/columnstore/">
                        ← ColumnStore的安全漏洞
                    </a>
                    </li>
                
                
                    <li><a href="/kb/zh-cn/mariadb-columnstore/">
                        ↑ MariaDB ColumnStore ↑
                    </a>
                    </li>
                
                
                    <li class="pull-right"><a href="/kb/zh-cn/mariadb-columnstore-mariadb-columnstore/">
                        关于MariaDB ColumnStore →
                    </a>
                    </li>
                
            </ul>
        </div>
    

        

        
        <h2>Comments</h2>
        
    
    <div id="comments" data-node-id="12322" data-comments-url="/kb/zh-cn/columnstore-system-variables/+comments"
         data-reply-url="/kb/zh-cn/columnstore-system-variables/comments/post/">
        Comments loading...
    </div>

        

    </div>


                    <div id="content_disclaimer" class="graybox">
                        Content reproduced on this site is the property of its respective owners,
                        and this content is not reviewed in advance by MariaDB. The views, information and opinions
                        expressed by this content do not necessarily represent those of MariaDB or any other party.
                    </div>
                </div>
            </section>

            
                <div id="right_bar" class="col-md-2">
                    
    
        
        <ul class="section_navigation well well-small hidden-xs hidden-sm">
            
                <li class="parent"><a href="/kb/zh-cn/mariadb-columnstore/">
                    ↑ MariaDB ColumnStore ↑
                </a>
                </li>
            
            
                
                    <li>
                        <a href="/kb/zh-cn/columnstore-data-ingestion/">
                            
                            ColumnStore Data 摄取
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/mariadb-columnstore-columnstore/">
                            
                            ColumnStore架构
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/columnstore-minimum-hardware-specification/">
                            
                            ColumnStore最小硬件规格
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/columnstore/">
                            
                            ColumnStore的安全漏洞
                        </a>
                    </li>
                
            
                
                    <li class="active">
                        <span>ColumnStore系统变量</span>
                        
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/mariadb-columnstore-mariadb-columnstore/">
                            
                            关于MariaDB ColumnStore
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/building-columnstore-in-mariadb/">
                            
                            在MariaDB中构建ColumnStore
                        </a>
                    </li>
                
            
        </ul>
    
    

                </div>
            
        </div>
    </div>
</div>

<!-- Footer -->
<footer id="footer">
    <div class="footer">
        <div class="container">
            <div class="row">
                <div class="col-xs-12">
                    <ul class="list-inline text-center footer-nav">
                        <li>
                            <h5>
                                <a href="https://mariadb.com/products" title="Products">Products</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/services" title="Services">Services</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/pricing" title="Pricing">Pricing</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/resources" title="Resources">Resources</a>
                            </h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/about-us" title="About MariaDB">About Us</a></h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/download" title="Download">Download MariaDB</a></h5>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="row row-10">
                
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div id="block-footerformcontact" class="block block-block-content block-block-contentd754ee1b-3cc9-40e7-9ef4-f504f1197fb1">
                        
                            <h5 style="font-weight: 400;">Subscribe to our newsletter!</h5>
                            <script src="//app-sj15.marketo.com/js/forms2/js/forms2.min.js"></script><form id="mktoForm_1498"></form>
                            <script>
                                <!--//--><![CDATA[// ><!--
                                MktoForms2.loadForm("//app-sj15.marketo.com", "573-PXI-984", 1498);
                                //--><!]]]]><![CDATA[>
                                //--><!]]>
                            </script>
                        
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div class="footer-copyright">
                        <div class="text-center">
                            <ul class="list-inline no-margin">
                                <li>
                                    <a href="/legal" title="Legal">Legal</a>
                                </li>
                                <li>
                                    <a href="/privacy-policy" title="Privacy Policy">Privacy Policy</a>
                                </li>
                                <li>
                                    <a href="/cookie-policy/" title="Cookies">Cookie Policy</a>
                                </li>
                            </ul>
                            <p>Copyright &copy; 2024 MariaDB. All rights reserved.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
</footer>
</div>

<div id="ajax_loading">
    <img src="/kb/static/images/ajax-loader.a51c5608d01a.gif" />
</div>

    <!-- Google Tag Manager -->
    <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-MK2847"
                      height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
            '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MK2847');</script>
    <!-- End Google Tag Manager -->

</body>

<script type="text/javascript" src="/kb/static/js/main.1587e3a666fc.js" charset="utf-8"></script>

</html>