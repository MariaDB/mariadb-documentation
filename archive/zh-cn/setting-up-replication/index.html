<!DOCTYPE html>
<html>
<head data-cookie-domain=""
      data-cookie-path="/">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="apple-touch-icon" sizes="180x180" href="/kb/static/images/favicons/apple-touch-icon.159e713979be.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/kb/static/images/favicons/favicon-32x32.bc0ac1d5d11e.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/kb/static/images/favicons/favicon-16x16.5801f8f0f34e.png">
    <link rel="shortcut icon" href="/kb/static/images/favicons/favicon.d122d305dee4.ico" type="image/x-icon" />

    <title>设置复制 - MariaDB Knowledge Base</title>

    <link href="/kb/static/css/main.f7633538c846.css" rel="stylesheet" type="text/css" />

    

    

    <!-- FB Open Graph tags -->
    <meta property="og:title" content="设置复制" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://mariadb.com/kb/zh-cn/setting-up-replication/" />
    <meta property="og:image" content="http://mariadb.comaskmonty-logo.png" />
    <meta property="og:site_name" content="MariaDB KnowledgeBase" />
    <meta property="fb:admins" content="514852603" />
    <meta property="og:description" content="The terms master and slave have historically been used in replication, and MariaDB has begun the process of adding primary and replica synonyms. The old terms will continue to..." />

    <meta name="description" content="The terms master and slave have historically been used in replication, and MariaDB has begun the process of adding primary and replica synonyms. The old terms will continue to..." />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="//fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet"/>
    
</head>
<body class="mpkb nodes products nodes_view jqui" id="nodes_view">





<div id="menu-mobile" class="visible-sm visible-xs">

    <div>
        <div id="mobile-close-menu" class="text-right">
            <a href="javascript:void(0)" title="Close Menu" id="back-main" class="toggle-menu">X<span></span></a>
        </div>
    </div>
    <div class="mainmenu-mobile">
        <ul class="ls-none ul-menu">
            <li data-sub="submenu5"><a class="open-form-search" href="/kb/search/" title="Search">Search </a></li>
            <li data-sub="submenu0"><a href="/products" title="Products">Products</a><span class="arrow-main"></span></li>
            <li data-sub="submenu1"><a href="/services" title="Services">Services</a><span class="arrow-main"></span></li>
            <li data-sub="submenu2"><a href="/resources" title="Resources">Resources</a><span class="arrow-main"></span></li>
            <li data-sub="submenu3"><a href="/about-us" title="About">About</a><span class="arrow-main"></span></li>
            <li data-sub="submenu4"><a href="/contact" title="Contact">Contact</a></li>
        </ul>
    </div>

    <div class="nav-top-mobile">
        <div class="select-box form">

            <ul class="inline-block-md mb-none top-nav">
                <li>

                </li>
                
                    <li>
                        <a href="/kb/user/login?next=/kb/zh-cn/setting-up-replication/"> Login</a>
                    </li>
                
            </ul>



        </div>
        <p class="text-center copyright">Copyright &copy; 2024 MariaDB. All rights reserved.</p>
    </div>
</div>
<div class="violator-wrap d-none" id="top_violator">
    <div class="container">
        <div class="row">
            <div class="col-xs-12 col-sm-12">
                <div class="violator-outer">
                    <div class="violator-inner">
                        <div class="row">
                            <div class="col-xs-12 col-sm-9 col-lg-7 col-lg-offset-2" id="top_violator_content">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="content-link" target="_blank" rel="nofollow noreferrer">
                                    <span>The Ultimate Guide to High Availability with MariaDB</span>
                                </a>
                            </div>
                            <div class="col-xs-12 col-sm-3" id="top_violator_cta">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="btn btn-mariadb" target="_blank" rel="nofollow noreferrer">Download Now</a>
                            </div>
                        </div>
                    </div>
                    <button type="button" class="btn btn-link close-btn">
                        <svg xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 24 24" width="15px" height="15px"><path d="M 4.9902344 3.9902344 A 1.0001 1.0001 0 0 0 4.2929688 5.7070312 L 10.585938 12 L 4.2929688 18.292969 A 1.0001 1.0001 0 1 0 5.7070312 19.707031 L 12 13.414062 L 18.292969 19.707031 A 1.0001 1.0001 0 1 0 19.707031 18.292969 L 13.414062 12 L 19.707031 5.7070312 A 1.0001 1.0001 0 0 0 18.980469 3.9902344 A 1.0001 1.0001 0 0 0 18.292969 4.2929688 L 12 10.585938 L 5.7070312 4.2929688 A 1.0001 1.0001 0 0 0 4.9902344 3.9902344 z"/></svg>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="wrapper">
<div id="top-nav">
    <div class="container">
        <ul class="hidden-sm hidden-xs" >
            <li><a href="https://mariadb.com/kb/">Knowledge Base</a></li>
            <li><a href="https://mariadb.com/contact/">Contact</a></li>
            
                
                    <li>
                        <a href="/kb/user/login?next=/kb/zh-cn/setting-up-replication/" rel="nofollow">Login</a>
                    </li>
                
            
            
            <li id="search-form">
                <form action="/kb/zh-cn/+search/" method="get" id="search-block-form" accept-charset="UTF-8">
                    <input id="search" title="Enter the terms you wish to search for."
                           placeholder="Search . . ." type="text"
                           name="q" value="" size="15" maxlength="128" class="form-text"
                           data-autocomplete-url="/kb/zh-cn/+search/autocomplete/">
                    <input type="hidden" name="quick" value="1" />
                    <input type="hidden" name="source" value="kb" />
                </form>
            </li>
            <li><a id="search-toggler" href="/kb/search/">Search</a></li>
            
        </ul>
    </div>
</div>
<div id="navbar-bottom" class="navbar">
    <div class="container">
        
        
        
        
        <div class="row">
            <div class="col-md-3 col-sm-9 col-xs-9">
                <a class="brand" href="/" title="MariaDB">
                    <img src="/kb/static/images/logo-2018-black.95f5978ae14d.png">
                </a>
            </div>
            <div class="col-md-9 hidden-sm hidden-xs">
                <div class="main-menu">
                    <ul id="main-menu" class="nav navbar-nav inline-block-sm">
    <li class="has-sub full-menu">
        <a href="/products" title="Products">Products</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/services" title="Services">Services</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/pricing" title="Pricing">Pricing</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/resources" title="Resources">Resources</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/about-us" title="About Us">About Us</a>
    </li>
    <li class="">
        <a class="button electric-eel small top-bar-right-download" href="/downloads/">Download</a>
    </li>
</ul>
                </div>
            </div>
            <div class="col-md-3 visible-sm visible-xs col-sm-3 col-xs-3 ps-rv">
                <div class="navbar-header text-right pull-right">
                    <button type="button" class="menu-control toggle-menu" id="open-menu">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="main">
    <div class="container">
        

        <div id="subheader1" class="clearfix">
            <div class="pull-left">
                
                <div id="breadcrumbs" class="breadcrumb">
                    <a href="/kb/zh-cn/">Knowledge Base</a>
                    


    
    » <a class="crumb" href="/kb/zh-cn/mariadb/">MariaDB - 简体中文</a>
    

    
    » <a class="crumb" href="/kb/zh-cn/mariadb-server/">MariaDB Server文档</a>
    

    
    » <a class="crumb" href="/kb/zh-cn/standard-replication/">MariaDB复制</a>
    


    » <a class="node_link crumb" href="/kb/zh-cn/setting-up-replication/">设置复制</a>


                </div>
                
            </div>
        </div>
    </div>
    <div class="container" id="container-main">
        <div class="row">
            
            
                
                <aside id="sidebar-first" class="sidebar col-md-2 hidden-xs hidden-sm hidden-print">
                    
                        
                        <ul id="category_menu" class="nav nav-pills nav-stacked">
                            <li><a href="/kb/zh-cn/">首页</a></li>
                            
                                
                                    <li><a href="/kb/zh-cn/+questions/">Open Questions</a></li>
                                
                                <li><a href="/kb/zh-cn/documentation/">MariaDB Server</a></li>
                                <li><a href="/kb/zh-cn/maxscale/">MariaDB MaxScale</a></li>
                                <li><a href="/kb/zh-cn/mariadb-columnstore/">MariaDB ColumnStore</a></li>
                                <li><a href="/kb/zh-cn/connectors/">Connectors</a></li>
                            

                        </ul>
                    

                    
<div>



<div class="well well-small box actions"><div>

        <a class="btn btn-block btn-blue btn-sm" href="/kb/zh-cn/setting-up-replication/+history" rel="nofollow">历史</a>
        
        
        
        <a class="btn btn-block btn-blue btn-sm" href="/kb/zh-cn/setting-up-replication/+source/">Source</a>
        
        <a class="btn btn-block btn-blue btn-sm flag" href="/kb/zh-cn/setting-up-replication/+flag"
                data-flag-url="/kb/zh-cn/setting-up-replication/+flag" rel="nofollow">
                Flag as Spam / Inappropriate</a>
        
        <a class="btn btn-block btn-blue btn-sm" href="/kb/zh-cn/setting-up-replication/+translate/">
                Translate</a>
        

</div>
</div>





<div class="well well-small box node_info"><div>

    <dl>
        <dt>已创建</dt>
        <dd>

<span class="datetime" title="2023-06-13 06:07">1 year, 4 months ago</span></dd>

        <dt>Modified</dt>
        <dd>

<span class="datetime" title="2023-06-13 06:07">1 year, 4 months ago</span></dd>

        <dt>Type</dt>
        <dd>article</dd>

        <dt>Status</dt>
        <dd>active</dd>

        <dt>License</dt>
        <dd>
            
                <a href="/kb/zh-cn/setting-up-replication/+license/">CC BY-SA / Gnu FDL</a>
            
        </dd>

        
    </dl>

    
    <ul class="rss_feeds">
        <li><a href="/kb/zh-cn/setting-up-replication/+history/feed/">
            历史</a>
        </li>
        <li><a href="/kb/zh-cn/setting-up-replication/+comments/feed/">
            Comments</a>
        </li>
    </ul>
    

</div>
</div>





    
    
    

<div class="well well-small box attachments"><div><div class="edit_link pull-right"><a href="/kb/zh-cn/setting-up-replication/+edit/attachments/">Edit</a></div><h5>Attachments</h5></div><div>

        
            <div class="no_data">No attachments exist</div>
        
    
</div>
</div>

    



    
    
        

<div class="well well-small box"><div><h5>Localized Versions</h5></div><div>

        <ul>
            
            <li><a href="/kb/en/setting-up-replication/">Setting Up Replication</a> [en]</li>
            
            <li><a href="/kb/ru/setting-up-replication/">Настройка репликации</a> [ru]</li>
            
            <li><a href="/kb/pt/setting-up-replication/">Setting Up Replication</a> [pt]</li>
            
        </ul>
        
</div>
</div>

    



    
    

<div class="well well-small box"><div><h5>Product Versions</h5></div><div>

        <ul id="product_chooser">
            
                <li class="mariadb_from_10_0">
                    <label><input type="checkbox" data-product-class="mariadb_from_10_0"
                            >MariaDB starting with 10.0</label>
                </li>
            
                <li class="mariadb_from_10_0">
                    <label><input type="checkbox" data-product-class="mariadb_from_10_0"
                            >MariaDB starting with 10.0</label>
                </li>
            
        </ul>
    
</div>
</div>






</div>


                    

































                </aside>
            
            
            
                
            
            
                
            
            <section id="content" class="limited_width col-md-8 clearfix">
                
                    <h1>设置复制</h1>
                

                



                <div>
                    
    

    
    
    

    <div class="node creole">
        
        
        


    
    <div class="answer formatted">
        <div class="cstm-style bluebox text"><p>The terms <em>master</em> and <em>slave</em> have historically been used in replication, and MariaDB has begun the process of adding <em>primary</em> and <em>replica</em> synonyms. The old terms will continue to be used to maintain backward compatibility - see <a href="https://jira.mariadb.org/browse/MDEV-18777">MDEV-18777</a> to follow progress on this effort.</p>
</div>
<div class="table_of_contents well well-small">
<h3>Contents</h3>
 <ol class="toc">

    <li class=""><a href="#使用-mariabackup-设置复制从服务器" title="使用 Mariabackup 设置复制从服务器">使用 Mariabackup 设置复制从服务器</a></li>

    <li class=""><a href="#版本" title="版本">版本</a></li>

    <li class=""><a href="#配置主服务器" title="配置主服务器">配置主服务器</a>    <ol class="toc">

        <li class=""><a href="#为-mariadb-启用复制的示例" title="为 MariaDB 启用复制的示例">为 MariaDB 启用复制的示例</a></li>

        <li class=""><a href="#为-mysql-启用复制的示例" title="为 MySQL 启用复制的示例">为 MySQL 启用复制的示例</a>    </ol>
</li>

    <li class=""><a href="#需要检查的设置" title="需要检查的设置">需要检查的设置</a></li>

    <li class=""><a href="#配置从服务器" title="配置从服务器">配置从服务器</a></li>

    <li class=""><a href="#获取主服务器的二进制日志坐标" title="获取主服务器的二进制日志坐标">获取主服务器的二进制日志坐标</a></li>

    <li class=""><a href="#启动从服务器" title="启动从服务器">启动从服务器</a>    <ol class="toc">

        <li class=""><a href="#使用全局事务-id-gtid" title="使用全局事务 ID (GTID)">使用全局事务 ID (GTID)</a>    </ol>
</li>

    <li class=""><a href="#从-mysql-主服务器复制到-mariadb-从服务器" title="从 MySQL 主服务器复制到 MariaDB 从服务器">从 MySQL 主服务器复制到 MariaDB 从服务器</a></li>

    <li class=""><a href="#参见" title="参见">参见</a> </ol>
</li>
</div><p>
使 <a href="/kb/en/replication/">replication</a> 工作需要在主服务器和从服务器上都进行一些步骤。</p>
<div class="cstm-style bluebox"><p><a href="/kb/en/what-is-mariadb-100/">MariaDB 10.0</a> 引入了带有 <a href="/kb/en/global-transaction-id/">全局事务 ID</a> 的复制功能。这些功能有许多好处，通常建议从 <a href="/kb/en/what-is-mariadb-100/">MariaDB 10.0</a> 开始使用此功能。</p>
</div><h2 class="anchored_heading" id="使用-mariabackup-设置复制从服务器">使用 Mariabackup 设置复制从服务器</h2>
<p>如果您想使用 <a href="/kb/en/mariabackup/">Mariabackup</a> 设置复制从服务器，则可能会发现 <a href="/kb/en/setting-up-a-replication-slave-with-mariabackup/">使用 Mariabackup 设置复制从服务器</a> 中的信息很有用。</p>
<h2 class="anchored_heading" id="版本">版本</h2>
<p>通常，当在不同版本的 MariaDB 之间进行复制时，最好将主服务器设置为较旧版本，而从服务器设置为较新版本。MariaDB 版本通常是向后兼容的，而较旧版本则不总是向前兼容。另请参阅 <a href="#replicating-from-mysql-master-to-mariadb-slave">从 MySQL 主服务器复制到 MariaDB 从服务器</a>。</p>
<h2 class="anchored_heading" id="配置主服务器">配置主服务器</h2>
<ul><li>如果尚未启用二进制日志记录，请启用它。有关详细信息，请参见 <a href="/kb/en/activating-the-binary-log/">激活二进制日志</a> 和 <a href="/kb/en/binary-log-formats/">二进制日志格式</a>。
</li><li>为主服务器分配一个唯一的 <a href="/kb/en/replication-and-binary-log-system-variables/#server_id">server_id</a>。所有从服务器也必须分配 server_id。这可以是从 1 到 2<sup>32</sup>-1 的数字，并且每个复制组中的每个服务器必须是唯一的。
</li><li>使用 <a href="/kb/en/mysqld-options-full-list/#-log-basename">--log-basename</a> 指定您的复制日志的唯一名称。如果未指定此名称，则将使用主机名，并且如果主机名发生更改，则会出现问题。
</li><li>从服务器需要连接并开始复制服务器的权限。通常，这是通过创建专用的从服务器用户并仅授予该用户复制权限（REPLICATION SLAVE 权限）来完成的。
</li></ul>
<h3 class="anchored_heading" id="为-mariadb-启用复制的示例">为 MariaDB 启用复制的示例</h3>
<p>将以下内容添加到您的 <a href="/kb/en/configuring-mariadb-with-mycnf/">my.cnf</a> 文件中，并重新启动数据库。</p>
<pre class="fixed">[mariadb]
log-bin
server_id=1
log-basename=master1
binlog-format=mixed
</pre><p>服务器 ID 是网络中每个 MariaDB/MySQL 服务器的唯一编号。<a href="/kb/en/binary-log-formats/">binlog-format</a> 指定如何记录语句。这主要影响在主服务器和从服务器之间发送的 <a href="/kb/en/binary-log/">二进制日志</a> 的大小。</p>
<p>然后使用 <a href="/kb/en/mysql-command-line-client/"><code>mysql</code></a> 命令行客户端执行以下 SQL：</p>
<pre class="fixed"><span class="k">CREATE</span> <span class="k">USER</span> <span class="s1">&#39;replication_user&#39;</span><span class="o">@</span><span class="s1">&#39;%&#39;</span> <span class="n">IDENTIFIED</span> <span class="k">BY</span> <span class="s1">&#39;bigs3cret&#39;</span><span class="p">;</span>
<span class="k">GRANT</span> <span class="n">REPLICATION</span> <span class="n">SLAVE</span> <span class="k">ON</span> <span class="o">*</span><span class="p">.</span><span class="o">*</span> <span class="k">TO</span> <span class="s1">&#39;replication_user&#39;</span><span class="o">@</span><span class="s1">&#39;%&#39;</span><span class="p">;</span>
</pre><h3 class="anchored_heading" id="为-mysql-启用复制的示例">为 MySQL 启用复制的示例</h3>
<p>如果您想要从 MySQL 启用复制到 MariaDB，则可以使用与 MariaDB 服务器之间几乎相同的方式进行操作。主要区别在于 MySQL 不支持 <code>log-basename</code>。</p>
<pre class="fixed">[mysqld]
log-bin
server_id=1
</pre><h2 class="anchored_heading" id="需要检查的设置">需要检查的设置</h2>
<p>有一些选项可能会影响或破坏复制。请检查以下设置以避免问题。</p>
<ul start="1"><li><a href="/kb/en/server-system-variables/#skip_networking">skip-networking</a>。如果 <code>skip-networking=1</code>，服务器将仅限制连接到 localhost，并阻止所有远程从服务器连接。
</li><li><a href="/kb/en/server-system-variables/#bind_address">bind-address</a>。类似地，如果服务器侦听 TCP/IP 连接的地址是 127.0.0.1（localhost），则远程从服务器连接将失败。
</li></ul>
<h2 class="anchored_heading" id="配置从服务器">配置从服务器</h2>
<ul start="1"><li>为从服务器提供唯一的<a href="/kb/en/replication-and-binary-log-server-system-variables/#server_id">server_id</a>。所有服务器，无论是主服务器还是从服务器，都会被分配一个 server_id。这可以是从 1 到 2<sup>32</sup>-1 的数字，并且在复制组中每个服务器必须是唯一的。需要重新启动服务器才能使此选项的更改生效。
</li></ul>
<h2 class="anchored_heading" id="获取主服务器的二进制日志坐标">获取主服务器的二进制日志坐标</h2>
<p>现在，您需要在查看二进制日志位置时防止对数据进行任何更改。您将使用此位置告诉从服务器应从哪个点开始复制。</p>
<ul start="1"><li>在主服务器上，通过运行 <code class="fixed" style="white-space:pre-wrap">FLUSH TABLES WITH READ LOCK</code> 刷新并锁定所有表。保持此会话运行 - 退出将释放锁定。
</li><li>运行 <code><a href="/kb/en/show-master-status/">SHOW MASTER STATUS</a></code> 获取二进制日志中的当前位置：
</li></ul>
<pre class="fixed">SHOW MASTER STATUS;
+--------------------+----------+--------------+------------------+
| File               | Position | Binlog_Do_DB | Binlog_Ignore_DB |
+--------------------+----------+--------------+------------------+
| master1-bin.000096 |      568 |              |                  |
+--------------------+----------+--------------+------------------+
</pre><ul start="1"><li>记录 <em>File</em> 和 <em>Position</em> 详细信息。如果刚启用二进制日志，则这些内容将为空。
</li><li>现在，在锁定的情况下，将数据从主服务器复制到从服务器。有关如何执行此操作的详细信息，请参见<a href="/kb/en/backup-restore-and-import/">备份、恢复和导入</a>。
</li><li>对于实时数据库的注意事项：您只需要制作数据的本地副本，无需保持主服务器锁定，直到从服务器导入数据。
</li><li>复制数据后，您可以通过运行<a href="/kb/en/transactions-lock/">UNLOCK TABLES</a>来释放主服务器上的锁定。
</li></ul>
<pre class="fixed">UNLOCK TABLES;
</pre><h2 class="anchored_heading" id="启动从服务器">启动从服务器</h2>
<ul start="1"><li>导入数据后，您可以开始进行复制。首先运行<a href="/kb/en/change-master-to/">CHANGE MASTER TO</a>，确保 <em>MASTER_LOG_FILE</em> 匹配早期 SHOW MASTER STATUS 返回的文件，<em>MASTER_LOG_POS</em> 匹配位置。例如：
</li></ul>
<pre class="fixed"><span class="n">CHANGE</span> <span class="n">MASTER</span> <span class="k">TO</span>
  <span class="n">MASTER_HOST</span><span class="o">=</span><span class="s1">&#39;master.domain.com&#39;</span><span class="p">,</span>
  <span class="n">MASTER_USER</span><span class="o">=</span><span class="s1">&#39;replication_user&#39;</span><span class="p">,</span>
  <span class="n">MASTER_PASSWORD</span><span class="o">=</span><span class="s1">&#39;bigs3cret&#39;</span><span class="p">,</span>
  <span class="n">MASTER_PORT</span><span class="o">=</span><span class="mi">3306</span><span class="p">,</span>
  <span class="n">MASTER_LOG_FILE</span><span class="o">=</span><span class="s1">&#39;master1-bin.000096&#39;</span><span class="p">,</span>
  <span class="n">MASTER_LOG_POS</span><span class="o">=</span><span class="mi">568</span><span class="p">,</span>
  <span class="n">MASTER_CONNECT_RETRY</span><span class="o">=</span><span class="mi">10</span><span class="p">;</span>
</pre><p>如果您要针对从一开始就配置为复制的新主服务器启动从服务器，则无需指定 <code>MASTER_LOG_FILE</code> 和 <code>MASTER_LOG_POS</code>。</p>
<h3 class="anchored_heading" id="使用全局事务-id-gtid">使用全局事务 ID (GTID)</h3>
<div class="mariadb_from_10_0 mariadb from_10_0 product"><h5 class="product_title">MariaDB starting with <a href="/kb/en/what-is-mariadb-100/">10.0</a></h5><p><a href="/kb/en/what-is-mariadb-100/">MariaDB 10.0</a> 引入了用于复制的全局事务 ID（GTID）。通常建议使用 <a href="/kb/en/what-is-mariadb-100/">MariaDB 10.0</a> 的 GTID，因为这有许多好处。只需要将 <code>MASTER_USE_GTID</code> 选项添加到 <code>CHANGE MASTER</code> 语句中，例如：</p>
<pre class="fixed"><span class="n">CHANGE</span> <span class="n">MASTER</span> <span class="k">TO</span> <span class="n">MASTER_USE_GTID</span> <span class="o">=</span> <span class="n">slave_pos</span>
</pre><p>有关完整说明，请参见<a href="/kb/en/global-transaction-id/">全局事务 ID</a>。</p>
</div><ul><li>现在使用 <a href="/kb/en/start-slave/"><code>START SLAVE</code></a> 命令启动从服务器：
</li></ul>
<pre class="fixed"><span class="k">START</span> <span class="n">SLAVE</span><span class="p">;</span>
</pre><ul><li>通过执行 <a href="/kb/en/show-slave-status/"><code>SHOW SLAVE STATUS</code></a> 命令检查复制是否正常工作：
</li></ul>
<pre class="fixed"><span class="k">SHOW</span> <span class="n">SLAVE</span> <span class="n">STATUS</span> <span class="err">\</span><span class="k">G</span>
</pre><ul><li>如果复制正常工作，则 <code>Slave_IO_Running</code> 和 <code>Slave_SQL_Running</code> 的值都应为 <code>Yes</code>：
</li></ul>
<pre class="fixed">Slave_IO_Running: Yes
Slave_SQL_Running: Yes
</pre><h2 class="anchored_heading" id="从-mysql-主服务器复制到-mariadb-从服务器">从 MySQL 主服务器复制到 MariaDB 从服务器</h2>
<ul start="1"><li>从 MySQL 5.5 复制到 <a href="/kb/en/what-is-mariadb-55/">MariaDB 5.5</a>+ 应该可以正常工作。当使用 <a href="/kb/en/what-is-mariadb-102/">MariaDB 10.2</a>+ 作为从服务器时，可能需要将 <a href="/kb/en/replication-and-binary-log-server-system-variables/#binlog_checksum">binlog_checksum</a> 设置为 NONE。
</li><li>从没有 GTID 的 MySQL 5.6 复制到 MariaDB 10+ 应该可以正常工作。
</li><li>从带有 GTID、binlog_rows_query_log_events 和可忽略事件的 MySQL 5.6 复制起始于 <a href="/kb/en/mariadb-10022-release-notes/">MariaDB 10.0.22</a> 和 <a href="/kb/en/mariadb-1018-release-notes/">MariaDB 10.1.8</a>。在这种情况下，MariaDB 将删除 MySQL GTID 和其他不需要的事件，而是添加自己的 GTID。
</li></ul>
<h2 class="anchored_heading" id="参见">参见</h2>
<ul start="1"><li><a href="/kb/en/binary-log-formats/">基于语句、混合和行日志记录之间的差异</a>
</li><li><a href="/kb/en/replication-and-foreign-keys/">复制和外键</a>
</li><li><a href="/kb/en/replication-as-a-backup-solution/">复制作为备份解决方案</a>
</li><li><a href="/kb/en/multi-source-replication/">多源复制</a>
</li><li><a href="/kb/en/global-transaction-id/">全局事务 ID</a>
</li><li><a href="/kb/en/parallel-replication/">并行复制</a>
</li><li><a href="/kb/en/replication-and-binary-log-server-system-variables/">复制和二进制日志系统变量</a>
</li><li><a href="/kb/en/replication-and-binary-log-status-variables/">复制和二进制日志状态变量</a>
</li><li><a href="/kb/en/semisynchronous-replication/">半同步复制</a>
</li><li><a href="/kb/en/delayed-replication/">延迟复制</a>
</li><li><a href="/kb/en/mariadb-vs-mysql-compatibility/#replication-compatibility">复制兼容性</a></li></ul>

    </div>


        
            <div id="subscribe" class="well well-small hide hidden-print"
                 data-subscribe-url="/kb/zh-cn/setting-up-replication/+subscriptions/add"
                 data-unsubscribe-url="/kb/zh-cn/setting-up-replication/+subscriptions/remove">
            </div>
        

        
        
    
        <div class="simple_section_nav">
            <ul class="nav nav-pills">
                
                    <li><a href="/kb/zh-cn/replication-overview/">
                        ← 复制概述
                    </a>
                    </li>
                
                
                    <li><a href="/kb/zh-cn/standard-replication/">
                        ↑ MariaDB复制 ↑
                    </a>
                    </li>
                
                
            </ul>
        </div>
    

        

        
        <h2>Comments</h2>
        
    
    <div id="comments" data-node-id="12399" data-comments-url="/kb/zh-cn/setting-up-replication/+comments"
         data-reply-url="/kb/zh-cn/setting-up-replication/comments/post/">
        Comments loading...
    </div>

        

    </div>


                    <div id="content_disclaimer" class="graybox">
                        Content reproduced on this site is the property of its respective owners,
                        and this content is not reviewed in advance by MariaDB. The views, information and opinions
                        expressed by this content do not necessarily represent those of MariaDB or any other party.
                    </div>
                </div>
            </section>

            
                <div id="right_bar" class="col-md-2">
                    
    
        
        <ul class="section_navigation well well-small hidden-xs hidden-sm">
            
                <li class="parent"><a href="/kb/zh-cn/standard-replication/">
                    ↑ MariaDB复制 ↑
                </a>
                </li>
            
            
                
                    <li>
                        <a href="/kb/zh-cn/replication-threads/">
                            
                            Replication Threads
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/zh-cn/replication-overview/">
                            
                            复制概述
                        </a>
                    </li>
                
            
                
                    <li class="active">
                        <span>设置复制</span>
                        
                    </li>
                
            
        </ul>
    
    

                </div>
            
        </div>
    </div>
</div>

<!-- Footer -->
<footer id="footer">
    <div class="footer">
        <div class="container">
            <div class="row">
                <div class="col-xs-12">
                    <ul class="list-inline text-center footer-nav">
                        <li>
                            <h5>
                                <a href="https://mariadb.com/products" title="Products">Products</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/services" title="Services">Services</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/pricing" title="Pricing">Pricing</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/resources" title="Resources">Resources</a>
                            </h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/about-us" title="About MariaDB">About Us</a></h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/download" title="Download">Download MariaDB</a></h5>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="row row-10">
                
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div id="block-footerformcontact" class="block block-block-content block-block-contentd754ee1b-3cc9-40e7-9ef4-f504f1197fb1">
                        
                            <h5 style="font-weight: 400;">Subscribe to our newsletter!</h5>
                            <script src="//app-sj15.marketo.com/js/forms2/js/forms2.min.js"></script><form id="mktoForm_1498"></form>
                            <script>
                                <!--//--><![CDATA[// ><!--
                                MktoForms2.loadForm("//app-sj15.marketo.com", "573-PXI-984", 1498);
                                //--><!]]]]><![CDATA[>
                                //--><!]]>
                            </script>
                        
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div class="footer-copyright">
                        <div class="text-center">
                            <ul class="list-inline no-margin">
                                <li>
                                    <a href="/legal" title="Legal">Legal</a>
                                </li>
                                <li>
                                    <a href="/privacy-policy" title="Privacy Policy">Privacy Policy</a>
                                </li>
                                <li>
                                    <a href="/cookie-policy/" title="Cookies">Cookie Policy</a>
                                </li>
                            </ul>
                            <p>Copyright &copy; 2024 MariaDB. All rights reserved.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
</footer>
</div>

<div id="ajax_loading">
    <img src="/kb/static/images/ajax-loader.a51c5608d01a.gif" />
</div>

    <!-- Google Tag Manager -->
    <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-MK2847"
                      height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
            '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MK2847');</script>
    <!-- End Google Tag Manager -->

</body>

<script type="text/javascript" src="/kb/static/js/main.1587e3a666fc.js" charset="utf-8"></script>

</html>