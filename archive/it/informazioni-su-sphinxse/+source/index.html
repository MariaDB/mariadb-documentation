<!DOCTYPE html>
<html>
<head data-cookie-domain=""
      data-cookie-path="/">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="apple-touch-icon" sizes="180x180" href="/kb/static/images/favicons/apple-touch-icon.159e713979be.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/kb/static/images/favicons/favicon-32x32.bc0ac1d5d11e.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/kb/static/images/favicons/favicon-16x16.5801f8f0f34e.png">
    <link rel="shortcut icon" href="/kb/static/images/favicons/favicon.d122d305dee4.ico" type="image/x-icon" />

    <title>Informazioni su SphinxSE - Source - MariaDB Knowledge Base</title>

    <link href="/kb/static/css/main.9a0d7dcebefd.css" rel="stylesheet" type="text/css" />

    
        <meta name="robots" content="noindex, nofollow">
    

    <!-- FB Open Graph tags -->
    <meta property="og:title" content="Informazioni su SphinxSE - Source" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://mariadb.com/kb/it/informazioni-su-sphinxse/+source/" />
    <meta property="og:image" content="http://mariadb.comaskmonty-logo.png" />
    <meta property="og:site_name" content="MariaDB KnowledgeBase" />
    <meta property="fb:admins" content="514852603" />
    <meta property="og:description" content="" />

    <meta name="description" content="" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="//fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet"/>
    
</head>
<body class="mpkb nodes autoresize nodes_source jqui" id="nodes_source">





<div id="menu-mobile" class="visible-sm visible-xs">

    <div>
        <div id="mobile-close-menu" class="text-right">
            <a href="javascript:void(0)" title="Close Menu" id="back-main" class="toggle-menu">X<span></span></a>
        </div>
    </div>
    <div class="mainmenu-mobile">
        <ul class="ls-none ul-menu">
            <li data-sub="submenu5"><a class="open-form-search" href="/kb/search/" title="Search">Search </a></li>
            <li data-sub="submenu0"><a href="/products" title="Products">Products</a><span class="arrow-main"></span></li>
            <li data-sub="submenu1"><a href="/services" title="Services">Services</a><span class="arrow-main"></span></li>
            <li data-sub="submenu2"><a href="/resources" title="Resources">Resources</a><span class="arrow-main"></span></li>
            <li data-sub="submenu3"><a href="/about-us" title="About">About</a><span class="arrow-main"></span></li>
            <li data-sub="submenu4"><a href="/contact" title="Contact">Contact</a></li>
        </ul>
    </div>

    <div class="nav-top-mobile">
        <div class="select-box form">

            <ul class="inline-block-md mb-none top-nav">
                <li>

                </li>
                
                    <li>
                        <a href="/kb/user/login?next=/kb/it/informazioni-su-sphinxse/+source/"> Login</a>
                    </li>
                
            </ul>



        </div>
        <p class="text-center copyright">Copyright &copy; 2023 MariaDB. All rights reserved.</p>
    </div>
</div>
<div id="wrapper">
<div id="top-nav">
    <div class="container">
        <ul class="hidden-sm hidden-xs" >
            <li><a href="https://mariadb.com/kb/">Knowledge Base</a></li>
            <li><a href="https://mariadb.com/contact/">Contact</a></li>
            
                
                    <li>
                        <a href="/kb/user/login?next=/kb/it/informazioni-su-sphinxse/+source/" rel="nofollow">Accesso</a>
                    </li>
                
            
            
            <li id="search-form">
                <form action="/kb/it/+search/" method="get" id="search-block-form" accept-charset="UTF-8">
                    <input id="search" title="Enter the terms you wish to search for."
                           placeholder="Search . . ." type="text"
                           name="q" value="" size="15" maxlength="128" class="form-text"
                           data-autocomplete-url="/kb/it/+search/autocomplete/">
                    <input type="hidden" name="quick" value="1" />
                    <input type="hidden" name="source" value="kb" />
                </form>
            </li>
            <li><a id="search-toggler" href="/kb/search/">Search</a></li>
            
        </ul>
    </div>
</div>
<div id="navbar-bottom" class="navbar">
    <div class="container">
        
        
        
        
        <div class="row">
            <div class="col-md-3 col-sm-9 col-xs-9">
                <a class="brand" href="/" title="MariaDB">
                    <img src="/kb/static/images/logo-2018-black.95f5978ae14d.png">
                </a>
            </div>
            <div class="col-md-9 hidden-sm hidden-xs">
                <div class="main-menu">
                    <ul id="main-menu" class="nav navbar-nav inline-block-sm">
    <li class="has-sub full-menu">
        <a href="/products" title="Products">Products</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/services" title="Services">Services</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/pricing" title="Pricing">Pricing</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/resources" title="Resources">Resources</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/about-us" title="About Us">About Us</a>
    </li>
    <li class="">
        <a class="button electric-eel small top-bar-right-download" href="/downloads/">Download</a>
    </li>
</ul>
                </div>
            </div>
            <div class="col-md-3 visible-sm visible-xs col-sm-3 col-xs-3 ps-rv">
                <div class="navbar-header text-right pull-right">
                    <button type="button" class="menu-control toggle-menu" id="open-menu">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="main">
    <div class="container">
        

        <div id="subheader1" class="clearfix">
            <div class="pull-left">
                
                <div id="breadcrumbs" class="breadcrumb">
                    <a href="/kb/it/">Knowledge Base</a>
                    


    
    » <a class="crumb" href="/kb/it/mariadb-italiano/">MariaDB - Italiano</a>
    

    
    » <a class="crumb" href="/kb/it/storage-engine/">Storage Engine</a>
    

    
    » <a class="crumb" href="/kb/it/sphinxse/">SphinxSE</a>
    


    » <a class="node_link crumb" href="/kb/it/informazioni-su-sphinxse/">Informazioni su SphinxSE</a>


                </div>
                
            </div>
        </div>
    </div>
    <div class="container" id="container-main">
        <div class="row">
            
            
                
                <aside id="sidebar-first" class="sidebar col-md-2 hidden-xs hidden-sm hidden-print">
                    
                        
                        <ul id="category_menu" class="nav nav-pills nav-stacked">
                            <li><a href="/kb/it/">Pagina iniziale</a></li>
                            
                                
                                    <li><a href="/kb/it/+questions/">Domande Aperte</a></li>
                                
                                <li><a href="/kb/it/documentation/">MariaDB Server</a></li>
                                <li><a href="/kb/it/maxscale/">MariaDB MaxScale</a></li>
                                <li><a href="/kb/it/mariadb-columnstore/">MariaDB ColumnStore</a></li>
                                <li><a href="/kb/it/connectors/">Connectors</a></li>
                            

                        </ul>
                    

                    
                        <div>
    

<div class="well well-small box actions"><div>

        <a class="btn btn-block btn-small" href="/kb/it/informazioni-su-sphinxse/">Return to article</a>
    
</div>
</div>

</div>
                    

                    

































                </aside>
            
            
            
                
            
            
            <section id="content" class="limited_width col-md-10 clearfix">
                
                    <h1>Informazioni su SphinxSE - Source</h1>
                

                



                <div>
                    

    

    
    <div class="revision_info">
        <dl class="table">
            <dt>Revisione</dt>
            <dd><a href="/kb/it/informazioni-su-sphinxse/+r/9982/">9982</a></dd>
            <dt>Utente</dt>
            <dd>
<span class="user" id="user-982">
<a href="/kb/user/id/982" title="Federico Razzoli">Federico Razzoli</a>
</span></dd>
            <dt>Data</dt>
            <dd>

<span class="datetime" title="2012-04-19 13:52">2012-04-19 13:52</span></dd>
        </dl>
    </div>
    


    

    
        
        <textarea id="answer_source" class="creole_source autogrow">&lt;&lt;toc&gt;&gt;
== Abilitare SphinxSE in MariaDB

A partire da MariaDB 5.2.2, lo Storage Engine Sphinx è incluso nei sorgenti, nei binari e nei pacchetti di MariaDB. SphinxSE è compilato come plugin .so caricabile dinamicamente. Per utilizzarlo occorre eseguire un&#39;unica volta:
&lt;&lt;fixed&gt;&gt;[[install-plugin|INSTALL PLUGIN]]&lt;&lt;/fixed&gt;&gt;:

&lt;&lt;code&gt;&gt;
MariaDB [(none)]&gt; INSTALL PLUGIN sphinx SONAME &#39;ha_sphinx.so&#39;;
Query OK, 0 rows affected (0.00 sec)
&lt;&lt;/code&gt;&gt;

Una volta installato, SphinxSE apparirà nell&#39;elenco degli Storage Engine installati:
&lt;&lt;code&gt;&gt;
MariaDB [(none)]&gt; show engines;
+------------+---------+--------------------------------------------+--------------+------+------------+
| Engine     | Support | Comment                                    | Transactions | XA   | Savepoints |
+------------+---------+--------------------------------------------+--------------+------+------------+
...
| SPHINX     | YES     | Sphinx storage engine 0.9.9                | NO           | NO   | NO         |
...
+------------+---------+--------------------------------------------+--------------+------+------------+
&lt;&lt;/code&gt;&gt;

Questo deve essere fatto una sola volta.

&lt;&lt;style class=&#34;greenbox&#34;&gt;&gt;
**Nota:** SphinxSE è solo la parte di Sphinx che funge da Storage Engine. Per poterlo utilizzare in MariaDB, occorre installare [[http://sphinxsearch.com/|Sphinx]].
&lt;&lt;/style&gt;&gt;

A dispetto del suo nome, SphinxSE di per sé non gestisce i dati. In effetti non è altro che un client built-in che permette a MariaDB di comunicare con searchd, eseguire ricerche e ottenere i risultati. Tutta la parte di indicizzazione e di ricerca avviene fuori da MariaDB.

Ecco alcune applicazioni di SphinxSE:

* port più semplice delle applicazioni FTS MariaDB/MySQL a Sphinx
* permettere l&#39;uso di Sphinx con linguaggi di programmazione che non dispongono ancora delle API necessarie
* ottimizzazioni che riguardano l&#39;elaborazione del set dei risultati di Sphinx dal lato di MariaDB (esempi; JOIN con la tabella dei documenti originali, ulteriori filtri operati da MariaDB, etc...)

== Usare SphinxSE ==

=== Utilizzo di base ===

Per effettuare ricerche con SphinxSE, occorre creare una particolare &#34;tabella di ricerca&#34;
&lt;&lt;fixed&gt;&gt;ENGINE=SPHINX&lt;&lt;/fixed&gt;&gt;, ed effettuare una
&lt;&lt;fixed&gt;&gt;SELECT&lt;&lt;/fixed&gt;&gt; su di essa, con la query full text nella clausola
&lt;&lt;fixed&gt;&gt;WHERE&lt;&lt;/fixed&gt;&gt;.

Ecco un esempio di istruzione CREATE e di query per la ricerca:

&lt;&lt;code lang=mysql inline=false&gt;&gt;
CREATE TABLE t1
(
    id          INTEGER UNSIGNED NOT NULL,
    weight      INTEGER NOT NULL,
    query       VARCHAR(3072) NOT NULL,
    group_id    INTEGER,
    INDEX(query)
) ENGINE=SPHINX CONNECTION=&#34;sphinx://localhost:9312/test&#34;;

SELECT * FROM t1 WHERE query=&#39;test it;mode=any&#39;;
&lt;&lt;/code&gt;&gt;

Le prime tre colonne della tabella devono essere dei seguenti tipi:
&lt;&lt;fixed&gt;&gt;INTEGER&lt;&lt;/fixed&gt;&gt; &lt;&lt;fixed&gt;&gt;UNSINGED&lt;&lt;/fixed&gt;&gt; o
&lt;&lt;fixed&gt;&gt;BIGINT&lt;&lt;/fixed&gt;&gt; per la prima colonna (id del documento),
&lt;&lt;fixed&gt;&gt;INTEGER&lt;&lt;/fixed&gt;&gt; o &lt;&lt;fixed&gt;&gt;BIGINT&lt;&lt;/fixed&gt;&gt; per la seconda colonna
(&#34;peso&#34; della corrispondenza) e &lt;&lt;fixed&gt;&gt;VARCHAR&lt;&lt;/fixed&gt;&gt; o &lt;&lt;fixed&gt;&gt;TEXT&lt;&lt;/fixed&gt;&gt; per la terza colonna (la query). Queste associazioni sono fisse; non si può omettere una di queste tre colonne, modificare la loro posizione o cambiare i tipi. Inoltre la colonna query deve essere indicizzata; tutte le altre devono essere mantenute senza indici. I nomi delle colonne vengono ignorati, perciò è possibile sceglierli arbitrariamente.

Le colonne aggiuntive possono essere &lt;&lt;fixed&gt;&gt;INTEGER&lt;&lt;/fixed&gt;&gt;,
&lt;&lt;fixed&gt;&gt;TIMESTAMP&lt;&lt;/fixed&gt;&gt;, &lt;&lt;fixed&gt;&gt;BIGINT&lt;&lt;/fixed&gt;&gt;,
&lt;&lt;fixed&gt;&gt;VARCHAR&lt;&lt;/fixed&gt;&gt; o &lt;&lt;fixed&gt;&gt;FLOAT&lt;&lt;/fixed&gt;&gt;. Saranno legate agli attributi forniti nel set di risultati forniti da Sphinx in base al loro nome, perciò i loro nomi devono corrispondere ai nomi degli attributi specificati in &lt;&lt;fixed&gt;&gt;sphinx.conf&lt;&lt;/fixed&gt;&gt;. Se nei risultati non sono presenti nomi di attributi, le colonne aggiuntive avranno valori &lt;&lt;fixed&gt;&gt;NULL&lt;&lt;/fixed&gt;&gt;.

Alcuni particolari nomi di attributi &#34;virtuali&#34; possono essere associati alle colonne SphinxSE.
&lt;&lt;fixed&gt;&gt;_sph_&lt;&lt;/fixed&gt;&gt; deve essere usato al posto di &lt;&lt;fixed&gt;&gt;@&lt;&lt;/fixed&gt;&gt;. Per esempio, per ottenere i valori degli attributi virtuali &#39;&lt;&lt;fixed&gt;&gt;@groupby&lt;&lt;/fixed&gt;&gt;&#39;, &#39;&lt;&lt;fixed&gt;&gt;@count&lt;&lt;/fixed&gt;&gt;&#39; o &#39;&lt;&lt;fixed&gt;&gt;@distinct&lt;&lt;/fixed&gt;&gt;&#39;, si usano rispettivamente i nomi di colonna &#39;&lt;&lt;fixed&gt;&gt;_sph_groupby&lt;&lt;/fixed&gt;&gt;&#39;, &#39;&lt;&lt;fixed&gt;&gt;_sph_count&lt;&lt;/fixed&gt;&gt;&#39; o &#39;&lt;&lt;fixed&gt;&gt;_sph_distinct&lt;&lt;/fixed&gt;&gt;&#39;.

Il parametro stringa &lt;&lt;fixed&gt;&gt;CONNECTION&lt;&lt;/fixed&gt;&gt; serve a specificare l&#39;host &lt;&lt;fixed&gt;&gt;searchd&lt;&lt;/fixed&gt;&gt; predefinito, la porta e gli indici per le query lanciate sulla tabella. Se non viene fornita alcune stringa di connessione nella &lt;&lt;fixed&gt;&gt;CREATE TABLE&lt;&lt;/fixed&gt;&gt;, saranno usati il nome di indice &#39;&lt;&lt;fixed&gt;&gt;*&lt;&lt;/fixed&gt;&gt;&#39; (cioè tutti gli indici) e &#39;&lt;&lt;fixed&gt;&gt;localhost:9312&lt;&lt;/fixed&gt;&gt;&#39;. La sintassi della stringa di connessione è la seguente:

&lt;&lt;code&gt;&gt;
CONNECTION=&#34;sphinx://HOST:PORTA/NOMEINDICE&#34;
&lt;&lt;/code&gt;&gt;

E&#39; possibile modificare successivamente la stringa di connessione predefinita, in questo modo:

&lt;&lt;code lang=mysql inline=false&gt;&gt;
ALTER TABLE t1 CONNECTION=&#34;sphinx://NUOVO_HOST:NUOVA_PORTA/NUOVO_NOMEINDICE&#34;;
&lt;&lt;/code&gt;&gt;

E&#39; anche possibile per le singole query scavalcare questi parametri.

=== Opzioni di ricerca ===

Come visto nell&#39;esempio sopra, il testo delle query e le opzioni di ricerca dovrebbero essere inseriti nella clausola &#39;&lt;&lt;code&gt;&gt;WHERE&lt;&lt;/code&gt;&gt;&#39; nella colonna delle query (cioè la terza colonna); le opzioni sono separate da punti e virgola (&#39;&lt;&lt;code&gt;&gt;;&lt;&lt;/code&gt;&gt;&#39;) e i nomi devono essere separati dai valori tramite il segno uguale (&#39;&lt;&lt;code&gt;&gt;=&lt;&lt;/code&gt;&gt;&#39;). E&#39; possibile specificare un qualsiasi numero di opzioni. Le opzioni disponibili sono:

* query - il testo della query;
* mode - modalità di corrispondenza. Può essere: &#34;all&#34;, &#34;any&#34;, &#34;phrase&#34;, &#34;boolean&#34; o &#34;extended&#34;. Il predefinito è &#34;all&#34;;
* sort - modalità di orginamento. Può essere &#34;relevance&#34;, &#34;attr_desc&#34;,
  &#34;attr_asc&#34;, &#34;time_segments&#34; o &#34;extended&#34;. In tutte le modalità, eccetto &#34;relevance&#34;, deve essere specificato il nome dell&#39;attributo (o la clausola di ordinamento, nel caso di &#34;extended&#34;) dopo un segno di due punti: &lt;&lt;code lang=mysql inline=false&gt;&gt;
... WHERE query=&#39;test;sort=attr_asc:group_id&#39;;
... WHERE query=&#39;test;sort=extended:@weight desc, group_id asc&#39;;
&lt;&lt;/code&gt;&gt;
* offset - offset nel set dei risultati, il default è 0;
* limit - il numero di righe da estrarre dai risultati, il default è 20;
* index - i nomi degli indici da cercare: &lt;&lt;code lang=mysql inline=false&gt;&gt;
... WHERE query=&#39;test;index=test1;&#39;;
... WHERE query=&#39;test;index=test1,test2,test3;&#39;;
&lt;&lt;/code&gt;&gt;
* minid, maxid - ID del documento minimo e massimo;
* weights - elenco dei pesi, separato da virgole, da assegnare ai campi full-text di Sphinx:&lt;&lt;code lang=mysql inline=false&gt;&gt;
... WHERE query=&#39;test;weights=1,2,3;&#39;;
&lt;&lt;/code&gt;&gt;
* filter, !filter - nomi di attributi separati da virgole e i valori associati: &lt;&lt;code lang=mysql inline=false&gt;&gt;
# include solo i gruppi 1, 5 e 19
... WHERE query=&#39;test;filter=group_id,1,5,19;&#39;;

# esclude i gruppi 3 e 11
... WHERE query=&#39;test;!filter=group_id,3,11;&#39;;
&lt;&lt;/code&gt;&gt;
* range, !range - nomi di attributi separati da virgole, valori minimi e massimi: &lt;&lt;code lang=mysql inline=false&gt;&gt;
# include i gruppi da 3 a 7 compresi
... WHERE query=&#39;test;range=group_id,3,7;&#39;;

# esclude i gruppi da 5 a 25
... WHERE query=&#39;test;!range=group_id,5,25;&#39;;
&lt;&lt;/code&gt;&gt;
* maxmatches - valori delle corrispondenza per ogni query: &lt;&lt;code lang=mysql inline=false&gt;&gt;
... WHERE query=&#39;test;maxmatches=2000;&#39;;
&lt;&lt;/code&gt;&gt;
* groupby - funzione e attributo group-by: &lt;&lt;code lang=mysql inline=false&gt;&gt;
... WHERE query=&#39;test;groupby=day:published_ts;&#39;;
... WHERE query=&#39;test;groupby=attr:group_id;&#39;;
&lt;&lt;/code&gt;&gt;
* groupsort - clausola di ordinamento group-by: &lt;&lt;code lang=mysql inline=false&gt;&gt;
... WHERE query=&#39;test;groupsort=@count desc;&#39;;
&lt;&lt;/code&gt;&gt;
* indexweights - elenco separato da virgole dei nomi degli indici e dei pesi da usare nel cercare nei diversi indici: &lt;&lt;code lang=mysql inline=false&gt;&gt;
... WHERE query=&#39;test;indexweights=idx_exact,2,idx_stemmed,1;&#39;;
&lt;&lt;/code&gt;&gt;
* comment - una stringa da associare a questa query nel log delle query (associata al parametro $comment nella chiamata a Query()): &lt;&lt;code lang=mysql inline=false&gt;&gt;
... WHERE query=&#39;test;comment=marker001;&#39;;
&lt;&lt;/code&gt;&gt;
* select - una stringa con le espressioni da calcolare (associate alla chiamata a SetSelect()): &lt;&lt;code lang=mysql inline=false&gt;&gt;
... WHERE query=&#39;test;select=2*a+3*b as myexpr;&#39;;
&lt;&lt;/code&gt;&gt;

&lt;&lt;style class=&#34;greenbox&#34;&gt;&gt;
**Nota:** E&#39; molto più efficiente permettere a Sphinx di effettuare l&#39;ordinamento, il filtraggio e la riduzione dei risultati, piuttosto che ottenere il massimo dei risultati e utilizzare le clausole &#39;&lt;&lt;fixed&gt;&gt;WHERE&lt;&lt;/fixed&gt;&gt;&#39;, &#39;&lt;&lt;fixed&gt;&gt;ORDER BY&lt;&lt;/fixed&gt;&gt;&#39; e
&#39;&lt;&lt;fixed&gt;&gt;LIMIT&lt;&lt;/fixed&gt;&gt;&#39; dal lato di MariaDB. Questo per due motivi:

# Sphinx effettua un certo numero di ottimizzazioni, e in questo genere di operazioni si comporta meglio di MariaDB/MySQL.
# Una minor quantità di dati dovrà essere compressa da &lt;&lt;fixed&gt;&gt;searchd&lt;&lt;/fixed&gt;&gt;, e trasferita e decompressa da SphinxSE.
&lt;&lt;/style&gt;&gt;

=== SHOW ENGINE SPHINX STATUS ===

A partire dalla versione 0.9.9-rc1, alcune informazioni aggiuntive sulle query possono essere lette con l&#39;istruzione &#39;&lt;&lt;fixed&gt;&gt;SHOW ENGINE SPHINX STATUS&lt;&lt;/fixed&gt;&gt;&#39;:

&lt;&lt;code&gt;&gt;
mysql&gt; SHOW ENGINE SPHINX STATUS;
+--------+-------+-------------------------------------------------+
| Type   | Name  | Status                                          |
+--------+-------+-------------------------------------------------+
| SPHINX | stats | total: 25, total found: 25, time: 126, words: 2 | 
| SPHINX | words | sphinx:591:1256 soft:11076:15945                | 
+--------+-------+-------------------------------------------------+
2 rows in set (0.00 sec)
&lt;&lt;/code&gt;&gt;

E&#39; anche possibile accedere a queste informazioni tramite le variabili di stato. Si noti che questo metodo non richiede il privilegio super user.

&lt;&lt;code&gt;&gt;
mysql&gt; SHOW STATUS LIKE &#39;sphinx_%&#39;;
+--------------------+----------------------------------+
| Variable_name      | Value                            |
+--------------------+----------------------------------+
| sphinx_total       | 25                               | 
| sphinx_total_found | 25                               | 
| sphinx_time        | 126                              | 
| sphinx_word_count  | 2                                | 
| sphinx_words       | sphinx:591:1256 soft:11076:15945 | 
+--------------------+----------------------------------+
5 rows in set (0.00 sec)
&lt;&lt;/code&gt;&gt;

=== Le JOIN con SphinxSE ===

E&#39; possibile effettuare delle &lt;&lt;fixed&gt;&gt;JOIN&lt;&lt;/fixed&gt;&gt; su una tabella di ricerca SphinxSE e altre tabelle che utilizzano Storage Engine differenti. Ecco un esempio con i &#34;documenti&#34; di example.sql:

&lt;&lt;code&gt;&gt;
mysql&gt; SELECT content, date_added FROM test.documents docs
-&gt; JOIN t1 ON (docs.id=t1.id) 
-&gt; WHERE query=&#34;one document;mode=any&#34;;
+-------------------------------------+---------------------+
| content                             | docdate             |
+-------------------------------------+---------------------+
| this is my test document number two | 2006-06-17 14:04:28 | 
| this is my test document number one | 2006-06-17 14:04:28 | 
+-------------------------------------+---------------------+
2 rows in set (0.00 sec)

mysql&gt; SHOW ENGINE SPHINX STATUS;
+--------+-------+---------------------------------------------+
| Type   | Name  | Status                                      |
+--------+-------+---------------------------------------------+
| SPHINX | stats | total: 2, total found: 2, time: 0, words: 2 | 
| SPHINX | words | one:1:2 document:2:2                        | 
+--------+-------+---------------------------------------------+
2 rows in set (0.00 sec)
&lt;&lt;/code&gt;&gt;

== Creare degli snippet (estratti) con MariaDB ==

A partire dalla versione 0.9.9-rc2, SphinxSE comprende una funzione UDF che permette di creare degli snippet attraverso MariaDB. Questa funzionalità è molto simile alla funzione API [[http://sphinxsearch.com/docs/current.html#api-func-buildexcerpts|BuildExcerprts]], che è accessibile tramite MariaDB+SphinxSE.

Il binario che contiene la UDF si chiama sphinx.so e viene creato e installato automaticamente nel percorso corretto insieme a SphinxSE. Per registrare la UDF si esegua la seguente istruzione:

&lt;&lt;code lang=mysql inline=false&gt;&gt;
CREATE FUNCTION sphinx_snippets RETURNS STRING SONAME &#39;sphinx.so&#39;;
&lt;&lt;/code&gt;&gt;

Il nome della funzione deve essere &#39;&lt;&lt;fixed&gt;&gt;sphinx_snippets&lt;&lt;/fixed&gt;&gt;&#39;, non è possibile usarne uno arbitrario. Gli argomenti sono i seguenti:

&lt;&lt;code&gt;&gt;
Prototype: function sphinx_snippets ( documento, indice, parole, [opzioni] );
&lt;&lt;/code&gt;&gt;

Gli argomenti documento e parole possono essere stringhe o colonne di una tabella. Le opzioni devono essere specificate in questo modo: &lt;code&gt;&#39;valore&#39; AS nome_opzione&lt;/code&gt;. L&#39;elenco delle opzioni supportate è disponibile nella documentazione della funzione API [[http://sphinxsearch.com/docs/current.html#api-func-buildexcerpts|BuildExcerprts()]]. L&#39;unica opzione specifica dell&#39;UDF è &#39;sphinx&#39;, che permette di specificare dove si trova searchd (host e porta).

Esempi d&#39;uso:

&lt;&lt;code lang=mysql inline=false&gt;&gt;
SELECT sphinx_snippets(&#39;hello world doc&#39;, &#39;main&#39;, &#39;world&#39;,
    &#39;sphinx://192.168.1.1/&#39; AS sphinx, true AS exact_phrase,
    &#39;[b]&#39; AS before_match, &#39;[/b]&#39; AS after_match)
FROM documents;

SELECT title, sphinx_snippets(text, &#39;index&#39;, &#39;mysql php&#39;) AS text
    FROM sphinx, documents
    WHERE query=&#39;mysql php&#39; AND sphinx.id=documents.id;
&lt;&lt;/code&gt;&gt;

== Versioni di Sphinx utilizzate ==

* MariaDB 5.2 e 5.3 usano Sphinx versione 0.9.9.
* MariaDB 5.5 usa Sphinx versione 2.0.4

== Ulteriori informazioni ==

Ulteriori informazioni su Sphinx e SphinxSE sono disponibili sul
[[http://sphinxsearch.com/docs/current.html|sito di Sphinx]].
</textarea>
    


                    <div id="content_disclaimer" class="graybox">
                        Content reproduced on this site is the property of its respective owners,
                        and this content is not reviewed in advance by MariaDB. The views, information and opinions
                        expressed by this content do not necessarily represent those of MariaDB or any other party.
                    </div>
                </div>
            </section>

            
        </div>
    </div>
</div>

<!-- Footer -->
<footer id="footer">
    <div class="footer">
        <div class="container">
            <div class="row row-10">
                <div class="col-md-2 col-xs-4 item">
                    <h5>
                        <a href="/products" title="Products">Products</a>
                    </h5>
                    <ul>
                        <li id="menu-item-7816" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-7816"><a href="https://mariadb.com/products/mariadb-platform/">MariaDB Platform</a></li>
                        <li id="menu-item-7815" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-7815"><a href="https://mariadb.com/products/skysql/">MariaDB SkySQL</a></li>
                        <li id="menu-item-4172" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4172"><a href="https://mariadb.com/pricing/">Pricing</a></li>
                        <li id="menu-item-4163" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4163"><a href="https://mariadb.com/downloads/">Download MariaDB</a></li>
                    </ul>
                </div>
                <div class="col-md-2 col-xs-4 item">
                    <h5>
                        <a href="/services" title="Services">Services</a>
                    </h5>
                    <ul>
                        <li id="menu-item-4169" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4169"><a href="https://mariadb.com/services/remote-dba/">Remote DBA</a></li>
                        <li id="menu-item-41691" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4169"><a href="https://mariadb.com/services/skydba/">SkyDBA</a></li>
                        <li id="menu-item-4167" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4167"><a href="https://mariadb.com/services/enterprise-architect/">Enterprise Architect</a></li>
                        <li id="menu-item-4170" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4170"><a href="https://mariadb.com/services/technical-support-services/">Technical Support</a></li>
                        <li id="menu-item-4168" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4168"><a href="https://mariadb.com/services/migration-practice/">Migration Practice</a></li>
                        <li id="menu-item-4166" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4166"><a href="https://mariadb.com/services/consulting/">Consulting</a></li>
                        <li id="menu-item-4171" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4171"><a href="https://mariadb.com/services/training/">Training</a></li>
                    </ul>
                </div>
                <div class="col-md-2 col-xs-4 item">
                    <h5>
                        <a href="/resources" title="Resources">Resources</a>
                    </h5>
                    <ul>
                        <li id="menu-item-41751" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4175"><a href="https://mariadb.com/docs/">Documentation</a></li>
                        <li id="menu-item-41752" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4175"><a href="https://mariadb.com/developers/">Developers</a></li>
                        <li id="menu-item-4175" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4175"><a href="https://mariadb.com/resources/blog/">Blog</a></li>
                        <li id="menu-item-5462" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-5462"><a href="https://support.mariadb.com">Support</a></li>
                        <li id="menu-item-6004" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-6004"><a href="https://mariadb.com/openworks/">OpenWorks</a></li>
                        <li id="menu-item-60041" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-6004"><a href="https://mariadb.com/resources/customer-stories/">Customer Stories</a></li>
                        <li id="menu-item-7817" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-7817"><a href="https://mariadb.com/resources/events/">Events</a></li>
                        <li id="menu-item-4177" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4177"><a href="https://mariadb.com/roadshow/">MariaDB Roadshow</a></li>
                    </ul>
                </div>
                <div class="visible-xs visible-sm clear"></div>
                <div class="col-md-2 col-xs-5 item">
                    <h5>
                        <a href="/about-us" title="About MariaDB">About</a>
                    </h5>
                    <ul>
                        <li id="menu-item-4173" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4173"><a href="https://mariadb.com/contact/">Contact</a></li>
                        <li id="menu-item-4161" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4161"><a href="https://mariadb.com/about-us/leadership/">Leadership</a></li>
                        <li id="menu-item-4162" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4162"><a href="https://mariadb.com/about-us/partners/">Partners</a></li>
                        <li id="menu-item-4174" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4174"><a href="https://mariadb.com/newsroom/">Newsroom</a></li>
                        <li id="menu-item-4160" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4160"><a href="https://mariadb.com/about-us/investors/">Investors</a></li>
                        <li id="menu-item-4159" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4159"><a href="https://mariadb.com/about-us/careers/">Careers</a></li>
                        <li id="menu-item-41591" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4159"><a href="https://mariadb.com/trust/">Trust Center</a></li>
                        <li id="menu-item-41592" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4159"><a href="https://mariadb.com/vulnerability-reporting/">Vulnerability Reporting</a></li>
                    </ul>
                </div>
                <div class="col-md-4 col-xs-7 item">
                    <div id="block-footercontact" class="block block-block-content block-block-content22b3af28-0754-44ec-a5c6-4466568f37e3">
                        <h5><a href="/contact" title="Contact">Contact</a></h5>
                    </div>
                    <div class="social">
                        <ul class="list-inline">
                            <li>
                                <a target="_blank" href="https://www.facebook.com/MariaDB.dbms/" title="Facebook">
                                    <i class="fa fa-facebook" aria-hidden="true"></i>
                                </a>
                            </li>
                            <li>
                                <a target="_blank" href="https://twitter.com/mariadb" title="Twitter">
                                    <i class="fa fa-twitter" aria-hidden="true"></i>
                                </a>
                            </li>
                            <li>
                                <a target="_blank" href="https://www.linkedin.com/company/mariadb-corporation?trk=company_logo " title="LinkedIn">
                                    <i class="fa fa-linkedin" aria-hidden="true"></i>
                                </a>
                            </li>
                        </ul>
                    </div>
                    <div id="block-footerformcontact" class="block block-block-content block-block-contentd754ee1b-3cc9-40e7-9ef4-f504f1197fb1">
                        
                            <p>Subscribe to our newsletter!</p>
                            <script src="//app-sj15.marketo.com/js/forms2/js/forms2.min.js"></script><form id="mktoForm_1498"></form>
                            <script>
                                <!--//--><![CDATA[// ><!--
                                MktoForms2.loadForm("//app-sj15.marketo.com", "573-PXI-984", 1498);
                                //--><!]]]]><![CDATA[>
                                //--><!]]>
                            </script>
                        
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="footer-copyright">
        <div class="container text-center">
            <ul class="list-inline no-margin">
                <li>
                    <a href="/legal" title="Legal">Legal</a>
                </li>
                <li>
                    <a href="/privacy-policy" title="Privacy Policy">Privacy Policy</a>
                </li>
                <li>
                    <a href="/cookie-policy/" title="Cookies">Cookie Policy</a>
                </li>
            </ul>
            <p>Copyright &copy; 2023 MariaDB. All rights reserved.</p>
        </div>
    </div>
</footer>
</div>

<div id="ajax_loading">
    <img src="/kb/static/images/ajax-loader.a51c5608d01a.gif" />
</div>

    <!-- Google Tag Manager -->
    <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-MK2847"
                      height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
            '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MK2847');</script>
    <!-- End Google Tag Manager -->

</body>

<script type="text/javascript" src="/kb/static/js/main.fed4ec768178.js" charset="utf-8"></script>

</html>