<!DOCTYPE html>
<html>
<head data-cookie-domain=""
      data-cookie-path="/">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="apple-touch-icon" sizes="180x180" href="/kb/static/images/favicons/apple-touch-icon.159e713979be.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/kb/static/images/favicons/favicon-32x32.bc0ac1d5d11e.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/kb/static/images/favicons/favicon-16x16.5801f8f0f34e.png">
    <link rel="shortcut icon" href="/kb/static/images/favicons/favicon.d122d305dee4.ico" type="image/x-icon" />

    <title>Buildbot Setup for Virtual Machines - Debian 7 &#34;wheezy&#34; - MariaDB Knowledge Base</title>

    <link href="/kb/static/css/main.f7633538c846.css" rel="stylesheet" type="text/css" />

    

    

    <!-- FB Open Graph tags -->
    <meta property="og:title" content="Buildbot Setup for Virtual Machines - Debian 7 &#34;wheezy&#34;" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://mariadb.com/kb/it/buildbot-setup-for-virtual-machines-debian-7-wheezy/" />
    <meta property="og:image" content="http://mariadb.comaskmonty-logo.png" />
    <meta property="og:site_name" content="MariaDB KnowledgeBase" />
    <meta property="fb:admins" content="514852603" />
    <meta property="og:description" content="
Installazione base
qemu-img create -f qcow2 /kvm/vms/vm-wheezy-amd64-serial.qcow2 10G
qemu-img create -f qcow2 /kvm/vms/vm-wheezy-i386-serial.qcow2 10G
Avviare ogni VM dall&#39;i..." />

    <meta name="description" content="
Installazione base
qemu-img create -f qcow2 /kvm/vms/vm-wheezy-amd64-serial.qcow2 10G
qemu-img create -f qcow2 /kvm/vms/vm-wheezy-i386-serial.qcow2 10G
Avviare ogni VM dall&#39;i..." />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="//fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet"/>
    
</head>
<body class="mpkb nodes products nodes_view jqui" id="nodes_view">





<div id="menu-mobile" class="visible-sm visible-xs">

    <div>
        <div id="mobile-close-menu" class="text-right">
            <a href="javascript:void(0)" title="Close Menu" id="back-main" class="toggle-menu">X<span></span></a>
        </div>
    </div>
    <div class="mainmenu-mobile">
        <ul class="ls-none ul-menu">
            <li data-sub="submenu5"><a class="open-form-search" href="/kb/search/" title="Search">Search </a></li>
            <li data-sub="submenu0"><a href="/products" title="Products">Products</a><span class="arrow-main"></span></li>
            <li data-sub="submenu1"><a href="/services" title="Services">Services</a><span class="arrow-main"></span></li>
            <li data-sub="submenu2"><a href="/resources" title="Resources">Resources</a><span class="arrow-main"></span></li>
            <li data-sub="submenu3"><a href="/about-us" title="About">About</a><span class="arrow-main"></span></li>
            <li data-sub="submenu4"><a href="/contact" title="Contact">Contact</a></li>
        </ul>
    </div>

    <div class="nav-top-mobile">
        <div class="select-box form">

            <ul class="inline-block-md mb-none top-nav">
                <li>

                </li>
                
                    <li>
                        <a href="/kb/user/login?next=/kb/it/buildbot-setup-for-virtual-machines-debian-7-wheezy/"> Login</a>
                    </li>
                
            </ul>



        </div>
        <p class="text-center copyright">Copyright &copy; 2025 MariaDB. All rights reserved.</p>
    </div>
</div>
<div class="violator-wrap d-none" id="top_violator">
    <div class="container">
        <div class="row">
            <div class="col-xs-12 col-sm-12">
                <div class="violator-outer">
                    <div class="violator-inner">
                        <div class="row">
                            <div class="col-xs-12 col-sm-9 col-lg-7 col-lg-offset-2" id="top_violator_content">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="content-link" target="_blank" rel="nofollow noreferrer">
                                    <span>The Ultimate Guide to High Availability with MariaDB</span>
                                </a>
                            </div>
                            <div class="col-xs-12 col-sm-3" id="top_violator_cta">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="btn btn-mariadb" target="_blank" rel="nofollow noreferrer">Download Now</a>
                            </div>
                        </div>
                    </div>
                    <button type="button" class="btn btn-link close-btn">
                        <svg xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 24 24" width="15px" height="15px"><path d="M 4.9902344 3.9902344 A 1.0001 1.0001 0 0 0 4.2929688 5.7070312 L 10.585938 12 L 4.2929688 18.292969 A 1.0001 1.0001 0 1 0 5.7070312 19.707031 L 12 13.414062 L 18.292969 19.707031 A 1.0001 1.0001 0 1 0 19.707031 18.292969 L 13.414062 12 L 19.707031 5.7070312 A 1.0001 1.0001 0 0 0 18.980469 3.9902344 A 1.0001 1.0001 0 0 0 18.292969 4.2929688 L 12 10.585938 L 5.7070312 4.2929688 A 1.0001 1.0001 0 0 0 4.9902344 3.9902344 z"/></svg>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="wrapper">
<div id="top-nav">
    <div class="container">
        <ul class="hidden-sm hidden-xs" >
            <li><a href="https://mariadb.com/kb/">Knowledge Base</a></li>
            <li><a href="https://mariadb.com/contact/">Contact</a></li>
            
                
                    <li>
                        <a href="/kb/user/login?next=/kb/it/buildbot-setup-for-virtual-machines-debian-7-wheezy/" rel="nofollow">Accesso</a>
                    </li>
                
            
            
            <li id="search-form">
                <form action="/kb/it/+search/" method="get" id="search-block-form" accept-charset="UTF-8">
                    <input id="search" title="Enter the terms you wish to search for."
                           placeholder="Search . . ." type="text"
                           name="q" value="" size="15" maxlength="128" class="form-text"
                           data-autocomplete-url="/kb/it/+search/autocomplete/">
                    <input type="hidden" name="quick" value="1" />
                    <input type="hidden" name="source" value="kb" />
                </form>
            </li>
            <li><a id="search-toggler" href="/kb/search/">Search</a></li>
            
        </ul>
    </div>
</div>
<div id="navbar-bottom" class="navbar">
    <div class="container">
        
        
        
        
        <div class="row">
            <div class="col-md-3 col-sm-9 col-xs-9">
                <a class="brand" href="/" title="MariaDB">
                    <img src="/kb/static/images/logo-2018-black.95f5978ae14d.png">
                </a>
            </div>
            <div class="col-md-9 hidden-sm hidden-xs">
                <div class="main-menu">
                    <ul id="main-menu" class="nav navbar-nav inline-block-sm">
    <li class="has-sub full-menu">
        <a href="/products" title="Products">Products</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/solutions" title="Solutions">Solutions</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/resources" title="Resources">Resources</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/about-us" title="Company">Company</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/pricing" title="Pricing">Pricing</a>
    </li>
    
    <li class="">
        <a class="button electric-eel small top-bar-right-download" href="/downloads/">Download</a>
    </li>
</ul>
                </div>
            </div>
            <div class="col-md-3 visible-sm visible-xs col-sm-3 col-xs-3 ps-rv">
                <div class="navbar-header text-right pull-right">
                    <button type="button" class="menu-control toggle-menu" id="open-menu">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="main">
    <div class="container">
        

        <div id="subheader1" class="clearfix">
            <div class="pull-left">
                
                <div id="breadcrumbs" class="breadcrumb">
                    <a href="/kb/it/">Knowledge Base</a>
                    


    
    » <a class="crumb" href="/kb/it/mariadb-italiano/">MariaDB - Italiano</a>
    

    
    » <a class="crumb" href="/kb/it/sviluppo/">Sviluppo</a>
    

    
    » <a class="crumb" href="/kb/it/strumenti/">Strumenti</a>
    

    
    » <a class="crumb" href="/kb/it/buildbot/">Buildbot</a>
    

    
    » <a class="crumb" href="/kb/it/configurazione-di-buildbot/">Configurazione di Buildbot</a>
    

    
    » <a class="crumb" href="/kb/it/configurare-buildbot-sulle-macchine-virtuali/">Configurare Buildbot sulle macchine virtuali</a>
    

    
    » <a class="crumb" href="/kb/it/configurare-buildbot-per-le-macchine-virtuali-debian/">Configurare Buildbot per le Macchine Virtuali - Debian</a>
    


    » <a class="node_link crumb" href="/kb/it/buildbot-setup-for-virtual-machines-debian-7-wheezy/">Buildbot Setup for Virtual Machines - Debian 7 &#34;wheezy&#34;</a>


                </div>
                
            </div>
        </div>
    </div>
    <div class="container" id="container-main">
        <div class="row">
            
            
                
                <aside id="sidebar-first" class="sidebar col-md-2 hidden-xs hidden-sm hidden-print">
                    
                        
                        <ul id="category_menu" class="nav nav-pills nav-stacked">
                            <li><a href="/kb/it/">Pagina iniziale</a></li>
                            
                                
                                    <li><a href="/kb/it/+questions/">Domande Aperte</a></li>
                                
                                <li><a href="/kb/it/documentation/">MariaDB Server</a></li>
                                <li><a href="/kb/it/maxscale/">MariaDB MaxScale</a></li>
                                <li><a href="/kb/it/mariadb-columnstore/">MariaDB ColumnStore</a></li>
                                <li><a href="/kb/it/connectors/">Connectors</a></li>
                            

                        </ul>
                    

                    
<div>



<div class="well well-small box actions"><div>

        <a class="btn btn-block btn-blue btn-sm" href="/kb/it/buildbot-setup-for-virtual-machines-debian-7-wheezy/+history" rel="nofollow">Cronologia</a>
        
        
        
        <a class="btn btn-block btn-blue btn-sm" href="/kb/it/buildbot-setup-for-virtual-machines-debian-7-wheezy/+source/">Source</a>
        
        <a class="btn btn-block btn-blue btn-sm flag" href="/kb/it/buildbot-setup-for-virtual-machines-debian-7-wheezy/+flag"
                data-flag-url="/kb/it/buildbot-setup-for-virtual-machines-debian-7-wheezy/+flag" rel="nofollow">
                Flag as Spam / Inappropriate</a>
        
        <a class="btn btn-block btn-blue btn-sm" href="/kb/it/buildbot-setup-for-virtual-machines-debian-7-wheezy/+translate/">
                Traduci</a>
        

</div>
</div>





<div class="well well-small box node_info"><div>

    <dl>
        <dt>Creato</dt>
        <dd>

<span class="datetime" title="2012-08-19 14:19">12 anni, 7 mesi ago</span></dd>

        <dt>Modificato</dt>
        <dd>

<span class="datetime" title="2012-08-19 14:21">12 anni, 7 mesi ago</span></dd>

        <dt>Tipo</dt>
        <dd>article</dd>

        <dt>Stato</dt>
        <dd>active</dd>

        <dt>Licenza</dt>
        <dd>
            
                <a href="/kb/it/buildbot-setup-for-virtual-machines-debian-7-wheezy/+license/">CC BY-SA / Gnu FDL</a>
            
        </dd>

        
    </dl>

    
    <ul class="rss_feeds">
        <li><a href="/kb/it/buildbot-setup-for-virtual-machines-debian-7-wheezy/+history/feed/">
            Cronologia</a>
        </li>
        <li><a href="/kb/it/buildbot-setup-for-virtual-machines-debian-7-wheezy/+comments/feed/">
            Commenti</a>
        </li>
    </ul>
    

</div>
</div>





    
    
    

<div class="well well-small box attachments"><div><div class="edit_link pull-right"><a href="/kb/it/buildbot-setup-for-virtual-machines-debian-7-wheezy/+edit/attachments/">Edit</a></div><h5>Attachments</h5></div><div>

        
            <div class="no_data">No attachments exist</div>
        
    
</div>
</div>

    



    
    
        

<div class="well well-small box"><div><h5>Versioni Localizzate</h5></div><div>

        <ul>
            
            <li><a href="/kb/en/buildbot-setup-for-virtual-machines-debian-7-wheezy/">Buildbot Setup for Virtual Machines - Debian 7 &#34;wheezy&#34;</a> [en]</li>
            
        </ul>
        
</div>
</div>

    






</div>


                    

































                </aside>
            
            
            
                
            
            
                
            
            <section id="content" class="limited_width col-md-8 clearfix">
                
                    <h1>Buildbot Setup for Virtual Machines - Debian 7 &#34;wheezy&#34;</h1>
                

                



                <div>
                    
    

    
    
    

    <div class="node creole">
        
        
        


    
    <div class="answer formatted">
        <div class="table_of_contents well well-small">
<h3>Contents</h3>
 <ol class="toc">

    <li class=""><a href="#installazione-base" title="Installazione base">Installazione base</a></li>

    <li class=""><a href="#vm-per-compilare-i-deb" title="VM per compilare i .deb">VM per compilare i .deb</a></li>

    <li class=""><a href="#vm-per-testare-linstallazione" title="VM per testare l&#39;installazione">VM per testare l&#39;installazione</a></li>

    <li class=""><a href="#vm-per-testare-laggiornamento-da-mysql" title="VM per testare l&#39;aggiornamento da MySQL">VM per testare l&#39;aggiornamento da MySQL</a></li>

    <li class=""><a href="#vm-per-testare-laggiornamento-di-mariadb" title="VM per testare l&#39;aggiornamento di MariaDB">VM per testare l&#39;aggiornamento di MariaDB</a></li>

    <li class=""><a href="#aggiungere-le-chiavi-a-known_hosts" title="Aggiungere le chiavi a known_hosts">Aggiungere le chiavi a known_hosts</a> </ol>
</li>
</div>
<h2 class="anchored_heading" id="installazione-base">Installazione base</h2>
<pre class="fixed">qemu-img create -f qcow2 /kvm/vms/vm-wheezy-amd64-serial.qcow2 10G
qemu-img create -f qcow2 /kvm/vms/vm-wheezy-i386-serial.qcow2 10G
</pre><p>Avviare ogni VM dall'iso di installazione del server e seguire queste istruzioni:</p>
<pre class="fixed">kvm -m <span class="m">1024</span> -hda /kvm/vms/vm-wheezy-amd64-serial.qcow2 -cdrom /kvm/iso/debian-testing-amd64-CD-1.iso -redir tcp:2269::22 -boot d -smp <span class="m">2</span> -cpu qemu64 -net nic,model<span class="o">=</span>virtio -net user
kvm -m <span class="m">1024</span> -hda /kvm/vms/vm-wheezy-i386-serial.qcow2  -cdrom /kvm/iso/debian-testing-i386-CD-1.iso  -redir tcp:2270::22 -boot d -smp <span class="m">2</span> -cpu qemu64 -net nic,model<span class="o">=</span>virtio -net user
</pre><p>Una volta avviato, riconnettersi con il server VNC dall'host locale:</p>
<pre class="fixed">vncviewer -via <span class="si">${</span><span class="nv">host</span><span class="p">-remoto</span><span class="si">}</span> localhost
</pre><p>Sostituire ${host-remoto} con l'host su cui gira la VM.</p>
<p><strong>Nota:</strong> Quando si avvia l'installazione, vncviewer potrebbe disconnettersi dicendo che il rect è troppo grande. Va tutto bene. Debian ha semplicemente ridimensionato lo schermo vnc. Basta riconnettersi.</p>
<p>Installare, mantenendo perloppiù le opzioni predefinite, con qualche accorgimento:</p>
<ul start="1"><li>Impostare il nome host a debian7-wheezy-amd64 o debian7-wheezy-i386
</li><li>Quando si partizionano i dischi, scegliere "Guided - use entire disk" (non vogliamo LVM)
<ul start="1"><li>Schema di partizionamento: tutti i file una partizione
</li></ul>
</li><li>Nessun CD aggiuntivo
</li><li>Configurare un mirror di rete
</li><li>Schermata di selezione del Software
<ul start="1"><li>Deselezionare "Debian desktop environment"
</li><li>Deselezionare "Print server"
</li><li>Mantenere "SSH server" e "Standard system utilities"
</li></ul>
</li></ul>
<p>Al termine dell'installazione, l'installer tenta di riavviare e fallisce. Va bene così, terminare il processo kvm sul server host.</p>
<p>Ora che la VM è installata, è tempo di configurarla.
Se si ha abbastanza memoria si possono eseguire le seguenti operazioni simultaneamente:</p>
<pre class="fixed">kvm -m <span class="m">1024</span> -hda /kvm/vms/vm-wheezy-amd64-serial.qcow2 -redir tcp:2269::22 -boot c -smp <span class="m">2</span> -cpu qemu64 -net nic,model<span class="o">=</span>virtio -net user -nographic
kvm -m <span class="m">1024</span> -hda /kvm/vms/vm-wheezy-i386-serial.qcow2 -redir tcp:2270::22 -boot c -smp <span class="m">2</span> -cpu qemu64 -net nic,model<span class="o">=</span>virtio -net user -nographic

ssh -p <span class="m">2269</span> localhost
<span class="c1"># modificare /boot/grub/menu.lst and visudo, vedi sotto</span>

ssh -p <span class="m">2270</span> localhost
<span class="c1"># modificare /boot/grub/menu.lst and visudo, vedi sotto</span>

ssh -t -p <span class="m">2269</span> localhost <span class="s2">&quot;mkdir -v .ssh&quot;</span>
ssh -t -p <span class="m">2270</span> localhost <span class="s2">&quot;mkdir -v .ssh&quot;</span>

scp -P <span class="m">2269</span> /kvm/vms/authorized_keys localhost:.ssh/
scp -P <span class="m">2270</span> /kvm/vms/authorized_keys localhost:.ssh/

<span class="nb">echo</span> <span class="s1">$&#39;Buildbot\n\n\n\n\ny&#39;</span> <span class="p">|</span> ssh -p <span class="m">2269</span> localhost <span class="s1">&#39;chmod -vR go-rwx .ssh; sudo adduser --disabled-password buildbot; sudo addgroup buildbot sudo; sudo mkdir ~buildbot/.ssh; sudo cp -vi .ssh/authorized_keys ~buildbot/.ssh/; sudo chown -vR buildbot:buildbot ~buildbot/.ssh; sudo chmod -vR go-rwx ~buildbot/.ssh&#39;</span>
<span class="nb">echo</span> <span class="s1">$&#39;Buildbot\n\n\n\n\ny&#39;</span> <span class="p">|</span> ssh -p <span class="m">2270</span> localhost <span class="s1">&#39;chmod -vR go-rwx .ssh; sudo adduser --disabled-password buildbot; sudo addgroup buildbot sudo; sudo mkdir ~buildbot/.ssh; sudo cp -vi .ssh/authorized_keys ~buildbot/.ssh/; sudo chown -vR buildbot:buildbot ~buildbot/.ssh; sudo chmod -vR go-rwx ~buildbot/.ssh&#39;</span>

scp -P <span class="m">2269</span> /kvm/vms/ttyS0.conf buildbot@localhost:
scp -P <span class="m">2270</span> /kvm/vms/ttyS0.conf buildbot@localhost:

ssh -p <span class="m">2269</span> buildbot@localhost <span class="s1">&#39;sudo cp -vi ttyS0.conf /etc/init/; rm -v ttyS0.conf; sudo shutdown -h now&#39;</span>
ssh -p <span class="m">2270</span> buildbot@localhost <span class="s1">&#39;sudo cp -vi ttyS0.conf /etc/init/; rm -v ttyS0.conf; sudo shutdown -h now&#39;</span>
</pre><p>Abilitare sudo senza password:</p>
<pre class="fixed">su -
vi /etc/apt/sources.list <span class="c1">#commentare la riga deb cdrom</span>
apt-get update
apt-get install sudo vim tree
update-alternatives --config editor <span class="c1"># selezionare vim.basic</span>
visudo <span class="c1"># commentare la riga %sudo e aggiungere: %sudo ALL=NOPASSWD: ALL</span>
usermod -a -G sudo <span class="si">${</span><span class="nv">username</span><span class="si">}</span>
</pre><p>Modificare /boot/grub/menu.lst:</p>
<pre class="fixed">vi /etc/default/grub

<span class="c1"># Aggiungere/modificare queste voci:</span>
    <span class="nv">GRUB_CMDLINE_LINUX_DEFAULT</span><span class="o">=</span><span class="s2">&quot;console=tty0 console=ttyS0,115200n8&quot;</span>
    <span class="nv">GRUB_TERMINAL</span><span class="o">=</span><span class="s2">&quot;serial&quot;</span>
    <span class="nv">GRUB_SERIAL_COMMAND</span><span class="o">=</span><span class="s2">&quot;serial --unit=0 --speed=115200 --word=8 --parity=no --stop=1&quot;</span>

update-grub
<span class="c1"># uscire e tornare al server</span>
</pre><h2 class="anchored_heading" id="vm-per-compilare-i-deb">VM per compilare i .deb</h2>
<pre class="fixed"><span class="k">for</span> i in <span class="s1">&#39;/kvm/vms/vm-wheezy-amd64-serial.qcow2 2269 qemu64&#39;</span> <span class="s1">&#39;/kvm/vms/vm-wheezy-i386-serial.qcow2 2270 qemu64&#39;</span> <span class="p">;</span> <span class="k">do</span> <span class="se">\</span>
  <span class="nb">set</span> <span class="nv">$i</span><span class="p">;</span> <span class="se">\</span>
  runvm --user<span class="o">=</span>buildbot --logfile<span class="o">=</span>kernel_<span class="nv">$2</span>.log --base-image<span class="o">=</span><span class="nv">$1</span> --port<span class="o">=</span><span class="nv">$2</span> --cpu<span class="o">=</span><span class="nv">$3</span> <span class="s2">&quot;</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$1</span> <span class="p">|</span> sed -e <span class="s1">&#39;s/serial/build/&#39;</span><span class="k">)</span><span class="s2">&quot;</span> <span class="se">\</span>
    <span class="s2">&quot;= scp -P </span><span class="nv">$2</span><span class="s2"> -o UserKnownHostsFile=/dev/null -o StrictHostKeyChecking=no /kvm/boost_1_49_0.tar.gz buildbot@localhost:/dev/shm/&quot;</span> <span class="se">\</span>
    <span class="s2">&quot;sudo DEBIAN_FRONTEND=noninteractive apt-get update&quot;</span> <span class="se">\</span>
    <span class="s2">&quot;sudo DEBIAN_FRONTEND=noninteractive apt-get -y build-dep mysql-server-5.5&quot;</span> <span class="se">\</span>
    <span class="s2">&quot;sudo DEBIAN_FRONTEND=noninteractive apt-get install -y devscripts hardening-wrapper fakeroot doxygen texlive-latex-base ghostscript libevent-dev libssl-dev zlib1g-dev libpam0g-dev libreadline-gplv2-dev autoconf automake automake1.9 dpatch ghostscript-x libfontenc1 libjpeg62 libltdl-dev libltdl7 libmail-sendmail-perl libxfont1 lmodern texlive-latex-base-doc ttf-dejavu ttf-dejavu-extra libaio-dev xfonts-encodings xfonts-utils&quot;</span> <span class="se">\</span>
    <span class="s2">&quot;cd /usr/local/src;sudo tar zxf /dev/shm/boost_1_49_0.tar.gz;cd /usr/local/include/;sudo ln -vs ../src/boost_1_49_0/boost .&quot;</span> <span class="p">;</span> <span class="se">\</span>
<span class="k">done</span>

</pre><h2 class="anchored_heading" id="vm-per-testare-linstallazione">VM per testare l'installazione</h2>
<p>Si veda <a href="http://kb.askmonty.org/it/configurare-buildbot-per-le-macchine-virtuali-principi-generali/">Configurare Buildbot per le Macchine Virtuali - Principi generali</a> per sapere come ottenere <code>my.seed</code> e <code>sources.append</code>.</p>
<pre class="fixed"><span class="k">for</span> i in <span class="s1">&#39;/kvm/vms/vm-wheezy-amd64-serial.qcow2 2269 qemu64&#39;</span> <span class="s1">&#39;/kvm/vms/vm-wheezy-i386-serial.qcow2 2270 qemu64&#39;</span> <span class="p">;</span> <span class="k">do</span> <span class="se">\</span>
  <span class="nb">set</span> <span class="nv">$i</span><span class="p">;</span> <span class="se">\</span>
  runvm --user<span class="o">=</span>buildbot --logfile<span class="o">=</span>kernel_<span class="nv">$2</span>.log --base-image<span class="o">=</span><span class="nv">$1</span> --port<span class="o">=</span><span class="nv">$2</span> --cpu<span class="o">=</span><span class="nv">$3</span> <span class="s2">&quot;</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$1</span> <span class="p">|</span> sed -e <span class="s1">&#39;s/serial/install/&#39;</span><span class="k">)</span><span class="s2">&quot;</span> <span class="se">\</span>
    <span class="s2">&quot;sudo DEBIAN_FRONTEND=noninteractive apt-get update&quot;</span> <span class="se">\</span>
    <span class="s2">&quot;sudo DEBIAN_FRONTEND=noninteractive apt-get install -y libaio1 debconf-utils&quot;</span> <span class="se">\</span>
    <span class="s2">&quot;= scp -P </span><span class="nv">$2</span><span class="s2"> /kvm/vms/my.seed /kvm/vms/sources.append buildbot@localhost:/tmp/&quot;</span> <span class="se">\</span>
    <span class="s2">&quot;sudo debconf-set-selections /tmp/my.seed&quot;</span> <span class="se">\</span>
    <span class="s2">&quot;sudo sh -c &#39;cat /tmp/sources.append &gt;&gt; /etc/apt/sources.list&#39;&quot;</span><span class="p">;</span> <span class="se">\</span>
<span class="k">done</span>
</pre><h2 class="anchored_heading" id="vm-per-testare-laggiornamento-da-mysql">VM per testare l'aggiornamento da MySQL</h2>
<pre class="fixed"><span class="k">for</span> i in <span class="s1">&#39;/kvm/vms/vm-wheezy-amd64-install.qcow2 2269 qemu64&#39;</span> <span class="s1">&#39;/kvm/vms/vm-wheezy-i386-install.qcow2 2270 qemu64&#39;</span> <span class="p">;</span> <span class="k">do</span> <span class="se">\</span>
  <span class="nb">set</span> <span class="nv">$i</span><span class="p">;</span> <span class="se">\</span>
  runvm --user<span class="o">=</span>buildbot --logfile<span class="o">=</span>kernel_<span class="nv">$2</span>.log --base-image<span class="o">=</span><span class="nv">$1</span> --port<span class="o">=</span><span class="nv">$2</span> --cpu<span class="o">=</span><span class="nv">$3</span> <span class="s2">&quot;</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$1</span> <span class="p">|</span> sed -e <span class="s1">&#39;s/install/upgrade/&#39;</span><span class="k">)</span><span class="s2">&quot;</span> <span class="se">\</span>
    <span class="s1">&#39;sudo DEBIAN_FRONTEND=noninteractive apt-get install -y libaio1 mysql-server-5.5&#39;</span> <span class="se">\</span>
    <span class="s1">&#39;mysql -uroot -prootpass -e &quot;create database mytest; use mytest; create table t(a int primary key); insert into t values (1); select * from t&quot;&#39;</span> <span class="p">;</span><span class="se">\</span>
<span class="k">done</span>
</pre><div class="cstm-style redbox"><p>La VM per l'aggiornamento degli upgrade di MariaDB non è stata compilata. Quando i pacchetti di MariaDB Wheezy saranno disponibili, questa VM verrà compilata.</p>
<h2 class="anchored_heading" id="vm-per-testare-laggiornamento-di-mariadb">VM per testare l'aggiornamento di MariaDB</h2>
<p> <em>Le istruzioni qui sotto sono basate su quelle per Natty, su <a href="http://kb.askmonty.org/it/installare-le-immagini-delle-vm-per-testare-laggiornamento-dei-deb/">Installare le immagini delle VM per testare l'aggiornamento dei .deb</a>.</em></p>
<pre class="fixed"><span class="k">for</span> i in <span class="s1">&#39;/kvm/vms/vm-wheezy-amd64-serial.qcow2 2269 qemu64&#39;</span> <span class="s1">&#39;/kvm/vms/vm-wheezy-i386-serial.qcow2 2270 qemu64&#39;</span> <span class="p">;</span> <span class="k">do</span> <span class="se">\</span>
  <span class="nb">set</span> <span class="nv">$i</span><span class="p">;</span> <span class="se">\</span>
  runvm --user<span class="o">=</span>buildbot --logfile<span class="o">=</span>kernel_<span class="nv">$2</span>.log --base-image<span class="o">=</span><span class="nv">$1</span> --port<span class="o">=</span><span class="nv">$2</span> --cpu<span class="o">=</span><span class="nv">$3</span> <span class="s2">&quot;</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$1</span> <span class="p">|</span> sed -e <span class="s1">&#39;s/serial/upgrade2/&#39;</span><span class="k">)</span><span class="s2">&quot;</span> <span class="se">\</span>
    <span class="s2">&quot;= scp -P </span><span class="nv">$2</span><span class="s2"> -o UserKnownHostsFile=/dev/null -o StrictHostKeyChecking=no /kvm/vms/mariadb-squeeze.list buildbot@localhost:/tmp/tmp.list&quot;</span> <span class="se">\</span>
    <span class="s1">&#39;sudo mv -vi /tmp/tmp.list /etc/apt/sources.list.d/&#39;</span> <span class="se">\</span>
    <span class="s1">&#39;sudo apt-key adv --recv-keys --keyserver keyserver.ubuntu.com 1BB943DB&#39;</span> <span class="se">\</span>
    <span class="s1">&#39;sudo apt-get update&#39;</span> <span class="se">\</span>
    <span class="s1">&#39;sudo DEBIAN_FRONTEND=noninteractive apt-get install -y --allow-unauthenticated mariadb-server mariadb-server-5.5 mariadb-client mariadb-client-5.5 mariadb-test libmariadbclient-dev&#39;</span> <span class="se">\</span>
    <span class="s1">&#39;sudo apt-get -f install&#39;</span> <span class="se">\</span>
    <span class="s1">&#39;mysql -uroot -prootpass -e &quot;create database mytest; use mytest; create table t(a int primary key); insert into t values (1); select * from t&quot;&#39;</span> <span class="se">\</span>
    <span class="s1">&#39;sudo rm /etc/apt/sources.list.d/tmp.list&#39;</span> <span class="se">\</span>
    <span class="s1">&#39;sudo apt-get update&#39;</span> <span class="se">\</span>
    <span class="s1">&#39;sudo DEBIAN_FRONTEND=noninteractive apt-get install -y libaio1&#39;</span> <span class="se">\</span>
    <span class="s1">&#39;sudo DEBIAN_FRONTEND=noninteractive apt-get upgrade -y&#39;</span><span class="p">;</span> <span class="se">\</span>
<span class="k">done</span>
</pre></div><h2 class="anchored_heading" id="aggiungere-le-chiavi-a-known_hosts">Aggiungere le chiavi a known_hosts</h2>
<p>Seguire queste istruzioni su ogni host per aggiungere le VM a known_hosts.</p>
<pre class="fixed"><span class="c1"># wheezy-amd64</span>
cp -avi /kvm/vms/vm-wheezy-amd64-install.qcow2 /kvm/vms/vm-wheezy-amd64-test.qcow2
kvm -m <span class="m">1024</span> -hda /kvm/vms/vm-wheezy-amd64-test.qcow2 -redir tcp:2269::22 -boot c -smp <span class="m">2</span> -cpu qemu64 -net nic,model<span class="o">=</span>virtio -net user -nographic
sudo su - buildbot
ssh -p <span class="m">2269</span> buildbot@localhost sudo shutdown -h now
rm -v /kvm/vms/vm-wheezy-amd64-test.qcow2

<span class="c1"># wheezy-i386</span>
cp -avi /kvm/vms/vm-wheezy-i386-install.qcow2 /kvm/vms/vm-wheezy-i386-test.qcow2
kvm -m <span class="m">1024</span> -hda /kvm/vms/vm-wheezy-i386-test.qcow2 -redir tcp:2270::22 -boot c -smp <span class="m">2</span> -cpu qemu64 -net nic,model<span class="o">=</span>virtio -net user -nographic
sudo su - buildbot
ssh -p <span class="m">2270</span> buildbot@localhost sudo shutdown -h now
rm -v /kvm/vms/vm-wheezy-i386-test.qcow2
</pre>
    </div>


        
            <div id="subscribe" class="well well-small hide hidden-print"
                 data-subscribe-url="/kb/it/buildbot-setup-for-virtual-machines-debian-7-wheezy/+subscriptions/add"
                 data-unsubscribe-url="/kb/it/buildbot-setup-for-virtual-machines-debian-7-wheezy/+subscriptions/remove">
            </div>
        

        
        
    
        <div class="simple_section_nav">
            <ul class="nav nav-pills">
                
                
                    <li><a href="/kb/it/configurare-buildbot-per-le-macchine-virtuali-debian/">
                        ↑ Configurare Buildbot per le Macchine Virtuali - Debian ↑
                    </a>
                    </li>
                
                
                    <li class="pull-right"><a href="/kb/it/buildbot-setup-for-virtual-machines-debian-4-amd64/">
                        Configurazione di Buildbot per le Macchine Virtuali - Debian 4 amd64 →
                    </a>
                    </li>
                
            </ul>
        </div>
    

        

        
        <h2>Commenti</h2>
        
    
    <div id="comments" data-node-id="2896" data-comments-url="/kb/it/buildbot-setup-for-virtual-machines-debian-7-wheezy/+comments"
         data-reply-url="/kb/it/buildbot-setup-for-virtual-machines-debian-7-wheezy/comments/post/">
        Sto caricando i commenti......
    </div>

        

    </div>


                    <div id="content_disclaimer" class="graybox">
                        Content reproduced on this site is the property of its respective owners,
                        and this content is not reviewed in advance by MariaDB. The views, information and opinions
                        expressed by this content do not necessarily represent those of MariaDB or any other party.
                    </div>
                </div>
            </section>

            
                <div id="right_bar" class="col-md-2">
                    
    
        
        <ul class="section_navigation well well-small hidden-xs hidden-sm">
            
                <li class="parent"><a href="/kb/it/configurare-buildbot-per-le-macchine-virtuali-debian/">
                    ↑ Configurare Buildbot per le Macchine Virtuali - Debian ↑
                </a>
                </li>
            
            
                
                    <li class="active">
                        <span>Buildbot Setup for Virtual Machines - Debian 7 &#34;wheezy&#34;</span>
                        
                    </li>
                
            
                
                    <li>
                        <a href="/kb/it/buildbot-setup-for-virtual-machines-debian-4-amd64/">
                            
                            Configurazione di Buildbot per le Macchine Virtuali - Debian 4 amd64
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/it/buildbot-setup-for-virtual-machines-debian-4-i386/">
                            
                            Configurazione di Buildbot per le Macchine Virtuali - Debian 4 i386
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/it/configurazione-di-buildbot-per-le-macchine-virtuali-debian-5-amd64/">
                            
                            Configurazione di Buildbot per le Macchine Virtuali - Debian 5 amd64
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/it/configurazione-di-buildbot-per-le-macchine-virtuali-debian-5-i386/">
                            
                            Configurazione di Buildbot per le Macchine Virtuali - Debian 5 i386
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/it/configurazione-di-buildbot-per-le-macchine-virtuali-debian-6-amd64/">
                            <span class="pull-right not_primary"></span>
                            Configurazione di Buildbot per le Macchine Virtuali - Debian 6 amd64
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/it/buildbot-setup-for-virtual-machines-debian-6-i386/">
                            
                            Configurazione di Buildbot per le Macchine Virtuali - Debian 6 i386
                        </a>
                    </li>
                
            
        </ul>
    
    

                </div>
            
        </div>
    </div>
</div>

<!-- Footer -->
<footer id="footer">
    <div class="footer">
        <div class="container">
            <div class="row">
                <div class="col-xs-12">
                    <ul class="list-inline text-center footer-nav">
                        <li>
                            <h5>
                                <a href="https://mariadb.com/products" title="Products">Products</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/solutions" title="Solutions">Solutions</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/resources" title="Resources">Resources</a>
                            </h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/about-us" title="About MariaDB">Company</a></h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/pricing" title="Pricing">Pricing</a>
                            </h5>
                        </li>
                        
                        
                        <li>
                            <h5><a href="https://mariadb.com/downloads" title="Download">Download MariaDB</a></h5>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="row row-10">
                
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div id="block-footerformcontact" class="block block-block-content block-block-contentd754ee1b-3cc9-40e7-9ef4-f504f1197fb1">
                        
                            <h5 style="font-weight: 400;">Subscribe to our newsletter!</h5>
                            <script src="//app-sj15.marketo.com/js/forms2/js/forms2.min.js"></script><form id="mktoForm_1498"></form>
                            <script>
                                <!--//--><![CDATA[// ><!--
                                MktoForms2.loadForm("//app-sj15.marketo.com", "573-PXI-984", 1498);
                                //--><!]]]]><![CDATA[>
                                //--><!]]>
                            </script>
                        
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div class="footer-copyright">
                        <div class="text-center">
                            <ul class="list-inline no-margin">
                                <li>
                                    <a href="/legal" title="Legal">Legal</a>
                                </li>
                                <li>
                                    <a href="/privacy-policy" title="Privacy Policy">Privacy Policy</a>
                                </li>
                                <li>
                                    <a href="/cookie-policy/" title="Cookies">Cookie Policy</a>
                                </li>
                            </ul>
                            <p>Copyright &copy; 2025 MariaDB. All rights reserved.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
</footer>
</div>

<div id="ajax_loading">
    <img src="/kb/static/images/ajax-loader.a51c5608d01a.gif" />
</div>

    <!-- Google Tag Manager -->
    <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-MK2847"
                      height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
            '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MK2847');</script>
    <!-- End Google Tag Manager -->

</body>

<script type="text/javascript" src="/kb/static/js/main.1587e3a666fc.js" charset="utf-8"></script>

</html>