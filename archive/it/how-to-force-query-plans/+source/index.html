<!DOCTYPE html>
<html>
<head data-cookie-domain=""
      data-cookie-path="/">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="apple-touch-icon" sizes="180x180" href="/kb/static/images/favicons/apple-touch-icon.159e713979be.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/kb/static/images/favicons/favicon-32x32.bc0ac1d5d11e.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/kb/static/images/favicons/favicon-16x16.5801f8f0f34e.png">
    <link rel="shortcut icon" href="/kb/static/images/favicons/favicon.d122d305dee4.ico" type="image/x-icon" />

    <title>Come forzare i piani delle query - Source - MariaDB Knowledge Base</title>

    <link href="/kb/static/css/main.b9e1e104f007.css" rel="stylesheet" type="text/css" />

    
        <meta name="robots" content="noindex, nofollow">
    

    <!-- FB Open Graph tags -->
    <meta property="og:title" content="Come forzare i piani delle query - Source" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://mariadb.com/kb/it/how-to-force-query-plans/+source/" />
    <meta property="og:image" content="http://mariadb.comaskmonty-logo.png" />
    <meta property="og:site_name" content="MariaDB KnowledgeBase" />
    <meta property="fb:admins" content="514852603" />
    <meta property="og:description" content="" />

    <meta name="description" content="" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="//fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet"/>
    
</head>
<body class="mpkb nodes autoresize nodes_source jqui" id="nodes_source">





<div id="menu-mobile" class="visible-sm visible-xs">

    <div>
        <div id="mobile-close-menu" class="text-right">
            <a href="javascript:void(0)" title="Close Menu" id="back-main" class="toggle-menu">X<span></span></a>
        </div>
    </div>
    <div class="mainmenu-mobile">
        <ul class="ls-none ul-menu">
            <li data-sub="submenu5"><a class="open-form-search" href="/kb/search/" title="Search">Search </a></li>
            <li data-sub="submenu0"><a href="/products" title="Products">Products</a><span class="arrow-main"></span></li>
            <li data-sub="submenu1"><a href="/services" title="Services">Services</a><span class="arrow-main"></span></li>
            <li data-sub="submenu2"><a href="/resources" title="Resources">Resources</a><span class="arrow-main"></span></li>
            <li data-sub="submenu3"><a href="/about-us" title="About">About</a><span class="arrow-main"></span></li>
            <li data-sub="submenu4"><a href="/contact" title="Contact">Contact</a></li>
        </ul>
    </div>

    <div class="nav-top-mobile">
        <div class="select-box form">

            <ul class="inline-block-md mb-none top-nav">
                <li>

                </li>
                
                    <li>
                        <a href="/kb/user/login?next=/kb/it/how-to-force-query-plans/+source/"> Login</a>
                    </li>
                
            </ul>



        </div>
        <p class="text-center copyright">Copyright &copy; 2024 MariaDB. All rights reserved.</p>
    </div>
</div>
<div id="wrapper">
<div id="top-nav">
    <div class="container">
        <ul class="hidden-sm hidden-xs" >
            <li><a href="https://mariadb.com/kb/">Knowledge Base</a></li>
            <li><a href="https://mariadb.com/contact/">Contact</a></li>
            
                
                    <li>
                        <a href="/kb/user/login?next=/kb/it/how-to-force-query-plans/+source/" rel="nofollow">Accesso</a>
                    </li>
                
            
            
            <li id="search-form">
                <form action="/kb/it/+search/" method="get" id="search-block-form" accept-charset="UTF-8">
                    <input id="search" title="Enter the terms you wish to search for."
                           placeholder="Search . . ." type="text"
                           name="q" value="" size="15" maxlength="128" class="form-text"
                           data-autocomplete-url="/kb/it/+search/autocomplete/">
                    <input type="hidden" name="quick" value="1" />
                    <input type="hidden" name="source" value="kb" />
                </form>
            </li>
            <li><a id="search-toggler" href="/kb/search/">Search</a></li>
            
        </ul>
    </div>
</div>
<div id="navbar-bottom" class="navbar">
    <div class="container">
        
        
        
        
        <div class="row">
            <div class="col-md-3 col-sm-9 col-xs-9">
                <a class="brand" href="/" title="MariaDB">
                    <img src="/kb/static/images/logo-2018-black.95f5978ae14d.png">
                </a>
            </div>
            <div class="col-md-9 hidden-sm hidden-xs">
                <div class="main-menu">
                    <ul id="main-menu" class="nav navbar-nav inline-block-sm">
    <li class="has-sub full-menu">
        <a href="/products" title="Products">Products</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/services" title="Services">Services</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/pricing" title="Pricing">Pricing</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/resources" title="Resources">Resources</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/about-us" title="About Us">About Us</a>
    </li>
    <li class="">
        <a class="button electric-eel small top-bar-right-download" href="/downloads/">Download</a>
    </li>
</ul>
                </div>
            </div>
            <div class="col-md-3 visible-sm visible-xs col-sm-3 col-xs-3 ps-rv">
                <div class="navbar-header text-right pull-right">
                    <button type="button" class="menu-control toggle-menu" id="open-menu">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="main">
    <div class="container">
        

        <div id="subheader1" class="clearfix">
            <div class="pull-left">
                
                <div id="breadcrumbs" class="breadcrumb">
                    <a href="/kb/it/">Knowledge Base</a>
                    


    
    » <a class="crumb" href="/kb/it/mariadb-italiano/">MariaDB - Italiano</a>
    

    
    » <a class="crumb" href="/kb/it/documentazione-di-mariadb/">Documentazione di MariaDB</a>
    

    
    » <a class="crumb" href="/kb/it/ottimizzazione/">Ottimizzazione</a>
    


    » <a class="node_link crumb" href="/kb/it/how-to-force-query-plans/">Come forzare i piani delle query</a>


                </div>
                
            </div>
        </div>
    </div>
    <div class="container" id="container-main">
        <div class="row">
            
            
                
                <aside id="sidebar-first" class="sidebar col-md-2 hidden-xs hidden-sm hidden-print">
                    
                        
                        <ul id="category_menu" class="nav nav-pills nav-stacked">
                            <li><a href="/kb/it/">Pagina iniziale</a></li>
                            
                                
                                    <li><a href="/kb/it/+questions/">Domande Aperte</a></li>
                                
                                <li><a href="/kb/it/documentation/">MariaDB Server</a></li>
                                <li><a href="/kb/it/maxscale/">MariaDB MaxScale</a></li>
                                <li><a href="/kb/it/mariadb-columnstore/">MariaDB ColumnStore</a></li>
                                <li><a href="/kb/it/connectors/">Connectors</a></li>
                            

                        </ul>
                    

                    
                        <div>
    

<div class="well well-small box actions"><div>

        <a class="btn btn-block btn-small" href="/kb/it/how-to-force-query-plans/">Return to article</a>
    
</div>
</div>

</div>
                    

                    

































                </aside>
            
            
            
                
            
            
            <section id="content" class="limited_width col-md-10 clearfix">
                
                    <h1>Come forzare i piani delle query - Source</h1>
                

                



                <div>
                    

    

    
    <div class="revision_info">
        <dl class="table">
            <dt>Revisione</dt>
            <dd><a href="/kb/it/how-to-force-query-plans/+r/6979/">6979</a></dd>
            <dt>Utente</dt>
            <dd>
<span class="user" id="user-982">
<a href="/kb/user/id/982" title="Federico Razzoli">Federico Razzoli</a>
</span></dd>
            <dt>Data</dt>
            <dd>

<span class="datetime" title="2011-10-14 21:41">2011-10-14 21:41</span></dd>
        </dl>
    </div>
    


    

    
        
        <textarea id="answer_source" class="creole_source autogrow">&lt;&lt;toc&gt;&gt;


L&#39;ottimizzatore si basa in gran parte sui costi di esecuzione nel cercare di trovare il piano ottimale per ciascuna query. Tuttavia può succedere che non abbia sufficienti informazioni per identificare un piano perfetto; in questi casi è possibile forzare la scelta di un particolare piano.

E&#39; possibile esaminare il piano per una [[select|SELECT]] scrivendo [[explain|EXPLAIN]] prima dell&#39;istruzione.


Per i seguenti esempi, si userà il [[http://dev.mysql.com/doc/world-setup/en/world-setup.html|database world]].

== Preparare il database di esempio world

Si scarichi il database da [[ftp://ftp.askmonty.org/public/world.sql.gz]]

Lo si installi:

&lt;&lt;code&gt;&gt;
mysqladmin create world
zcat world.sql.gz | ../client/mysql world
&lt;&lt;/code&gt;&gt;

oppure:

&lt;&lt;code&gt;&gt;
mysqladmin create world
gunzip world.sql.gz
../client/mysql world &lt; world.sql
&lt;&lt;/code&gt;&gt;

== Forzare l&#39;ordine delle JOIN

E&#39; possibile forzare l&#39;ordine delle JOIN utilizzando [[join|STRAIGHT_JOIN]] nella clausola [[select|SELECT]] o nella clausola [[join|JOIN]].

Il caso più semplice è quello in cui si forza l&#39;ordine delle tabelle nella clausola &lt;&lt;fixed&gt;&gt;FROM&lt;&lt;/fixed&gt;&gt; e si specifica &lt;&lt;fixed&gt;&gt;SELECT STRAIGHT_JOIN&lt;&lt;/fixed&gt;&gt;:

&lt;&lt;code&gt;&gt;
SELECT STRAIGHT_JOIN SUM(City.Population) FROM Country,City WHERE
City.CountryCode=Country.Code AND Country.HeadOfState=&#34;Vladimir Putin&#34;;
&lt;&lt;/code&gt;&gt;

Se si desidera forzare l&#39;ordine delle JOIN per una quantità limitata di tabelle, si può utilizzare &lt;&lt;fixed&gt;&gt;STRAIGHT_JOIN&lt;&lt;/fixed&gt;&gt; nella clausola &lt;&lt;fixed&gt;&gt;FROM&lt;&lt;/fixed&gt;&gt;: verrà imposto un ordine solo per le tabelle connesse da &lt;&lt;fixed&gt;&gt;STRAIGHT_JOIN&lt;&lt;/fixed&gt;&gt;.

&lt;&lt;code&gt;&gt;
SELECT SUM(City.Population) FROM Country STRAIGHT_JOIN City WHERE
City.CountryCode=Country.Code AND Country.HeadOfState=&#34;Vladimir Putin&#34;;
&lt;&lt;/code&gt;&gt;

In entrambi i casi, &lt;&lt;fixed&gt;&gt;Country&lt;&lt;/fixed&gt;&gt; verrà letta per prima e per ogni Paese corrispondente (uno in questo caso) verrà cercata una corrispondenza in tutte le righe di &lt;&lt;fixed&gt;&gt;City&lt;&lt;/fixed&gt;&gt;. Poiché vi è soltanto un record corrispondente, questa query sarà più veloce di quella originale.

L&#39;output di [[explain|EXPLAIN]] per gli esempi di cui sopra è:

&lt;&lt;style class=&#34;darkheader-nospace-borders&#34;&gt;&gt;
|= id |= select_type |= table |= type |= possible_keys |= key |= key_len |= ref |= rows |= Extra
| 1 | SIMPLE | Country | ALL | PRIMARY | NULL | NULL | NULL | 239 | Using where
| 1 | SIMPLE | City | ALL | NULL | NULL | NULL | NULL | 4079 | Using where; Using join buffer (flat, BNL join)
&lt;&lt;/style&gt;&gt;

Questo è uno dei rari casi in cui il valore &lt;&lt;fixed&gt;&gt;ALL&lt;&lt;/fixed&gt;&gt; è accettabile, perché la scansione della tabella &lt;&lt;fixed&gt;&gt;Country&lt;&lt;/fixed&gt;&gt; troverà soltanto una corrispondenza.

== Forzare la scelta di un indice specifico per la clausola &lt;&lt;fixed&gt;&gt;WHERE&lt;&lt;/fixed&gt;&gt;

In alcuni casi l&#39;ottimizzatore potrebbe scegliere un indice non ottimale o non scegliere alcun indice, anche se teoricamente potrebbe usarne alcuni.

In questo caso si può dire all&#39;ottimizzatore di utilizzare un insieme di indici limitato, di ignorare uno o più indici, oppure forzare l&#39;uso di alcuni indici.

=== Usare un insieme limitato di indici

E&#39; possibile limitare gli indici che l&#39;ottimizzatore prenderà in considerazione tramite l&#39;opzione [[join|USE INDEX]].

&lt;&lt;code&gt;&gt;
USE INDEX [{FOR {JOIN|ORDER BY|GROUP BY}] ([elenco_indici])
&lt;&lt;/code&gt;&gt; 

Il default è &lt;&lt;fixed&gt;&gt;FOR JOIN&lt;&lt;/fixed&gt;&gt;, che significa che il suggerimento vale solo per la clausola &lt;&lt;fixed&gt;&gt;WHERE&lt;&lt;/fixed&gt;&gt;.

&lt;&lt;fixed&gt;&gt;USE INDEX&lt;&lt;/fixed&gt;&gt; deve essere specificato dopo il nome della tabella nella clausola &lt;&lt;fixed&gt;&gt;FROM&lt;&lt;/fixed&gt;&gt;.

Esempio:
&lt;&lt;code&gt;&gt;
CREATE INDEX Name ON City (Name);
CREATE INDEX CountryCode ON City (Countrycode);
EXPLAIN SELECT Name FROM City USE INDEX (CountryCode)
WHERE name=&#34;Helsingborg&#34; AND countrycode=&#34;SWE&#34;;
&lt;&lt;/code&gt;&gt;

Risultato:

&lt;&lt;style class=&#34;darkheader-nospace-borders&#34;&gt;&gt;
|= id |= select_type |= table |= type |= possible_keys |= key |= key_len |= ref |= rows |= Extra
| 1 | SIMPLE | City | ref | CountryCode | CountryCode | 3 | const | 14 | Using where
&lt;&lt;/style&gt;&gt;

Senza l&#39;uso di &lt;&lt;fixed&gt;&gt;USE INDEX&lt;&lt;/fixed&gt;&gt;, anche l&#39;indice &lt;&lt;fixed&gt;&gt;Name&lt;&lt;/fixed&gt;&gt; sarebbe stato incluso in &lt;&lt;fixed&gt;&gt;possible keys&lt;&lt;/fixed&gt;&gt;.

=== Ignorare alcuni indici

E&#39; possibile dire all&#39;ottimizzatore di non considerare alcuni indici con l&#39;opzione [[join|IGNORE INDEX]].

&lt;&lt;code&gt;&gt;
IGNORE INDEX [{FOR {JOIN|ORDER BY|GROUP BY}] ([elenco_indici])
&lt;&lt;/code&gt;&gt; 

&lt;&lt;fixed&gt;&gt;IGNORE INDEX&lt;&lt;/fixed&gt;&gt; deve essere specificato dopo il nome della tabella nella clausola &lt;&lt;fixed&gt;&gt;FROM&lt;&lt;/fixed&gt;&gt;.

Esempio:

&lt;&lt;code&gt;&gt;
CREATE INDEX Name ON City (Name);
CREATE INDEX CountryCode ON City (Countrycode);
EXPLAIN SELECT Name FROM City IGNORE INDEX (Name)
WHERE name=&#34;Helsingborg&#34; AND countrycode=&#34;SWE&#34;;
&lt;&lt;/code&gt;&gt;

Risultato:

&lt;&lt;style class=&#34;darkheader-nospace-borders&#34;&gt;&gt;
|= id |= select_type |= table |= type |= possible_keys |= key |= key_len |= ref |= rows |= Extra
| 1 | SIMPLE | City | ref | CountryCode | CountryCode | 3 | const | 14 | Using where
&lt;&lt;/style&gt;&gt;

Il beneficio dell&#39;uso di &lt;&lt;fixed&gt;&gt;IGNORE_INDEX&lt;&lt;/fixed&gt;&gt; invece di &lt;&lt;fixed&gt;&gt;USE_INDEX&lt;&lt;/fixed&gt;&gt; è che il primo non disabilita eventuali nuovi indici che potrebbero essere aggiunti in futuro.

=== Forzare l&#39;uso di un indice

Forzare la scelta di un indice è utile soprattutto quando l&#39;ottimizzatore decide di effettuare una scansione completa di una tabella nonostante l&#39;uso di una certa chiave sia più auspicabile.

&lt;&lt;code&gt;&gt;
CREATE INDEX Name ON City (Name);
EXPLAIN SELECT Name,CountryCode FROM City FORCE INDEX (Name)
WHERE name&gt;=&#34;A&#34; and CountryCode &gt;=&#34;A&#34;;
&lt;&lt;/code&gt;&gt;

Risultato:

&lt;&lt;style class=&#34;darkheader-nospace-borders&#34;&gt;&gt;
|= id |= select_type |= table |= type |= possible_keys |= key |= key_len |= ref |= rows |= Extra
| 1 | SIMPLE | City | range | Name | Name | 35 | NULL | 4079 | Using where
&lt;&lt;/style&gt;&gt;

&lt;&lt;fixed&gt;&gt;FORCE_INDEX&lt;&lt;/fixed&gt;&gt; impone all&#39;ottimizzatore di considerare solo gli indici specificati (come &lt;&lt;fixed&gt;&gt;USE_INDEX&lt;&lt;/fixed&gt;&gt;, ma in più dice all&#39;ottimizzatore di considerare una scansione completa della tabella come qualcosa di estremamente costoso. Tuttavia, se nessuno degli indici specificati è adatto, la scansione completa avverrà comunque.

== Forzare l&#39;uso di un indice per &lt;&lt;fixed&gt;&gt;ORDER BY&lt;&lt;/fixed&gt;&gt; o per &lt;&lt;fixed&gt;&gt;GROUP BY&lt;&lt;/fixed&gt;&gt;

L&#39;ottimizzatore cerca di utilizzare gli indici per elaborare le clausole &lt;&lt;fixed&gt;&gt;ORDER BY&lt;&lt;/fixed&gt;&gt; e &lt;&lt;fixed&gt;&gt;GROUP BY&lt;&lt;/fixed&gt;&gt;.

Per forzare o ignorare un indice specifico, è possibile usare &lt;&lt;fixed&gt;&gt;USE INDEX&lt;&lt;/fixed&gt;&gt;, &lt;&lt;fixed&gt;&gt;IGNORE INDEX&lt;&lt;/fixed&gt;&gt; e &lt;&lt;fixed&gt;&gt;FORCE INDEX&lt;&lt;/fixed&gt;&gt; come si è fatto sopra per la clausola &lt;&lt;fixed&gt;&gt;WHERE&lt;&lt;/fixed&gt;&gt;:

&lt;&lt;code&gt;&gt;
USE INDEX [{FOR {JOIN|ORDER BY|GROUP BY}] ([elenco_indici])
&lt;&lt;/code&gt;&gt; 

Queste opzioni devono essere specificate dopo il nome della tabella nella clausola &lt;&lt;fixed&gt;&gt;FROM&lt;&lt;/fixed&gt;&gt;.

Esempio:

&lt;&lt;code&gt;&gt;
CREATE INDEX Name ON City (Name);
EXPLAIN SELECT Name,Count(*) FROM City
FORCE INDEX FOR GROUP BY (Name)
WHERE population &gt;= 10000000 GROUP BY Name;
&lt;&lt;/code&gt;&gt;

Risultato:

&lt;&lt;style class=&#34;darkheader-nospace-borders&#34;&gt;&gt;
|= id |= select_type |= table |= type |= possible_keys |= key |= key_len |= ref |= rows |= Extra
| 1 | SIMPLE | City | index | NULL | Name | 35 | NULL | 4079 | Using where |
&lt;&lt;/style&gt;&gt;

Senza l&#39;opzione &lt;&lt;fixed&gt;&gt;FORCE INDEX&lt;&lt;/fixed&gt;&gt;, il valore della colonna extra sarebbe &lt;&lt;fixed&gt;&gt;Using where; Using temporary; Using
filesort&lt;&lt;/fixed&gt;&gt;, perchè l&#39;ottimizzatore creerebbe una tabella temporanea e la ordinerebbe.

=== Aiutare l&#39;ottimizzatore a ottimizzare &lt;&lt;fixed&gt;&gt;GROUP BY&lt;&lt;/fixed&gt;&gt; e &lt;&lt;fixed&gt;&gt;ORDER BY&lt;&lt;/fixed&gt;&gt;

L&#39;ottimizzatore usa diverse strategie per ottimizzare &lt;&lt;fixed&gt;&gt;GROUP BY&lt;&lt;/fixed&gt;&gt; e &lt;&lt;fixed&gt;&gt;ORDER BY&lt;&lt;/fixed&gt;&gt;:

* Elaborarla con un indice:
** Scansionare la tabella seguendo l&#39;ordine dell&#39;indice e inviare i dati man mano. (Funziona solo se la clausola &lt;&lt;fixed&gt;&gt;ORDER BY&lt;&lt;/fixed&gt;&gt; / &lt;&lt;fixed&gt;&gt;GROUP BY&lt;&lt;/fixed&gt;&gt; può essere risolta con un indice dopo la propagazione delle costanti).

* Filesort:
** Scansionare la tabella da ordinare e collezionare le chiavi ordinate in un file temporaneo.
** Ordinare le chiavi + riferimenti in  righe (con il filesort)
** Scansionare la tabella nell&#39;ordine stabilito

* Usare una tabella temporanea per &lt;&lt;fixed&gt;&gt;ORDER BY&lt;&lt;/fixed&gt;&gt;.
** Creare una tabella temporanea (in memoria) per i dati da ordinare. (Se però diventa più grande di &lt;&lt;fixed&gt;&gt;max_heap_table_size&lt;&lt;/fixed&gt;&gt; o contiene colonne BLOB, verranno usate tabelle Aria o MyISAM su disco)
** Ordinare le chiavi + riferimenti in  righe (con il filesort)
** Scansionare la tabella nell&#39;ordine stabilito

Se i campi da ordinare non sono tutti nella prima [[join|JOIN]], viene sempre usata una tabella temporanea.

* Usare una tabella temporanea per &lt;&lt;fixed&gt;&gt;GROUP BY&lt;&lt;/fixed&gt;&gt;:
** Creare una tabella temporanea contenente i risultati del raggruppamento con un indice che corrisponde ai campi usati nella clausola &lt;&lt;fixed&gt;&gt;GROUP BY&lt;&lt;/fixed&gt;&gt;.
** Produrre una riga di risultati
** Se nella tabella temporanea esiste già una riga con l&#39;indice usato per la &lt;&lt;fixed&gt;&gt;GROUP BY&lt;&lt;/fixed&gt;&gt;, aggiungere ad esso i nuovi risultati. Altrimenti, creare una nuova riga.
** Prima di inviare i risultati al client, ordinare le righe con il filesort per avere i risultati nell&#39;ordine del &lt;&lt;fixed&gt;&gt;GROUP BY&lt;&lt;/fixed&gt;&gt;.

=== Forzare/proibire l&#39;uso delle tabelle temporeanee per &lt;&lt;fixed&gt;&gt;GROUP BY&lt;&lt;/fixed&gt;&gt;

Usare una tabella in memoria (come descritto sopra) è solitamente l&#39;opzione più veloce per risolvere la clausola &lt;&lt;fixed&gt;&gt;GROUP BY&lt;&lt;/fixed&gt;&gt; quando i risultati sono pochi, ma non è ottimale quando l&#39;insieme dei risultati è molto grande.
E&#39; possibile informare di questo l&#39;ottimizzatore utilizzando &lt;&lt;fixed&gt;&gt;SELECT SQL_SMALL_RESULT&lt;&lt;/fixed&gt;&gt; o &lt;&lt;fixed&gt;&gt;SELECT SQL_BIG_RESULT&lt;&lt;/fixed&gt;&gt;:

&lt;&lt;code&gt;&gt;
EXPLAIN SELECT SQL_SMALL_RESULT Name,Count(*) AS Cities FROM City GROUP BY Name HAVING Cities &gt; 2;
&lt;&lt;/code&gt;&gt;

Risultato:

&lt;&lt;style class=&#34;darkheader-nospace-borders&#34;&gt;&gt;
|= id |= select_type |= table |= type |= possible_keys |= key |= key_len |= ref |= rows |= Extra
| 1 | SIMPLE | City | ALL | NULL | NULL | NULL | NULL | 4079 | Using temporary; Using filesort
&lt;&lt;/style&gt;&gt;

Esempio opposto:

&lt;&lt;code&gt;&gt;
EXPLAIN SELECT SQL_BIG_RESULT Name,Count(*) AS Cities FROM City
GROUP BY Name HAVING Cities &gt; 2;
&lt;&lt;/code&gt;&gt;

Risultato:

&lt;&lt;style class=&#34;darkheader-nospace-borders&#34;&gt;&gt;
|= id |= select_type |= table |= type |= possible_keys |= key |= key_len |= ref |= rows |= Extra
| 1 | SIMPLE | City | ALL | NULL | NULL | NULL | NULL | 4079 | Using filesort
&lt;&lt;/style&gt;&gt;

La differenza è che se si specifica &lt;&lt;fixed&gt;&gt;SQL_SMALL_RESULT&lt;&lt;/fixed&gt;&gt; viene creata una tabella temporanea.

== Forzare l&#39;uso di una tabella temporanea

In alcuni casi è possibile forzare l&#39;uso di una tabella temporanea per i risultati, per rilasciare al più presto possibile i lock a livello di tabella o di riga.

Per farlo, si specifica l&#39;opzione &lt;&lt;fixed&gt;&gt;SQL_BUFFER_RESULT&lt;&lt;/fixed&gt;&gt;:

&lt;&lt;code&gt;&gt;
CREATE INDEX Name ON City (Name);
EXPLAIN SELECT SQL_BUFFER_RESULT Name,Count(*) AS Cities FROM City
GROUP BY Name HAVING Cities &gt; 2;
&lt;&lt;/code&gt;&gt;

Risultato:

&lt;&lt;style class=&#34;darkheader-nospace-borders&#34;&gt;&gt;
|= id |= select_type |= table |= type |= possible_keys |= key |= key_len |= ref |= rows |= Extra
| 1 | SIMPLE | City | index | NULL | Name | 35 | NULL | 4079 | Using index; Using temporary
&lt;&lt;/style&gt;&gt;

Senza l&#39;opzione &lt;&lt;fixed&gt;&gt;SQL_BUFFER_RESULT&lt;&lt;/fixed&gt;&gt; la tabella temporanea non sarebbe stata usata.

== L&#39;optimizer switch

In MariaDB 5.3 è stato aggiunto l&#39;[[mariadb-53-optimizer_switch|optimizer
switch]], che permette di specificare quali algoritmi devono essere presi in considerazione nell&#39;ottimizzare una query.

Si veda la sezione [[optimizer]] per ulteriori informazioni su tali algoritmi.
</textarea>
    


                    <div id="content_disclaimer" class="graybox">
                        Content reproduced on this site is the property of its respective owners,
                        and this content is not reviewed in advance by MariaDB. The views, information and opinions
                        expressed by this content do not necessarily represent those of MariaDB or any other party.
                    </div>
                </div>
            </section>

            
        </div>
    </div>
</div>

<!-- Footer -->
<footer id="footer">
    <div class="footer">
        <div class="container">
            <div class="row">
                <div class="col-xs-12">
                    <ul class="list-inline text-center footer-nav">
                        <li>
                            <h5>
                                <a href="https://mariadb.com/products" title="Products">Products</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/services" title="Services">Services</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/pricing" title="Pricing">Pricing</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/resources" title="Resources">Resources</a>
                            </h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/about-us" title="About MariaDB">About Us</a></h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/download" title="Download">Download MariaDB</a></h5>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="row row-10">
                
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div id="block-footerformcontact" class="block block-block-content block-block-contentd754ee1b-3cc9-40e7-9ef4-f504f1197fb1">
                        
                            <h5 style="font-weight: 400;">Subscribe to our newsletter!</h5>
                            <script src="//app-sj15.marketo.com/js/forms2/js/forms2.min.js"></script><form id="mktoForm_1498"></form>
                            <script>
                                <!--//--><![CDATA[// ><!--
                                MktoForms2.loadForm("//app-sj15.marketo.com", "573-PXI-984", 1498);
                                //--><!]]]]><![CDATA[>
                                //--><!]]>
                            </script>
                        
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div class="footer-copyright">
                        <div class="text-center">
                            <ul class="list-inline no-margin">
                                <li>
                                    <a href="/legal" title="Legal">Legal</a>
                                </li>
                                <li>
                                    <a href="/privacy-policy" title="Privacy Policy">Privacy Policy</a>
                                </li>
                                <li>
                                    <a href="/cookie-policy/" title="Cookies">Cookie Policy</a>
                                </li>
                            </ul>
                            <p>Copyright &copy; 2024 MariaDB. All rights reserved.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
</footer>
</div>

<div id="ajax_loading">
    <img src="/kb/static/images/ajax-loader.a51c5608d01a.gif" />
</div>

    <!-- Google Tag Manager -->
    <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-MK2847"
                      height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
            '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MK2847');</script>
    <!-- End Google Tag Manager -->

</body>

<script type="text/javascript" src="/kb/static/js/main.fed4ec768178.js" charset="utf-8"></script>

</html>