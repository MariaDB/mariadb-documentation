<!DOCTYPE html>
<html>
<head data-cookie-domain=""
      data-cookie-path="/">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="apple-touch-icon" sizes="180x180" href="/kb/static/images/favicons/apple-touch-icon.159e713979be.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/kb/static/images/favicons/favicon-32x32.bc0ac1d5d11e.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/kb/static/images/favicons/favicon-16x16.5801f8f0f34e.png">
    <link rel="shortcut icon" href="/kb/static/images/favicons/favicon.d122d305dee4.ico" type="image/x-icon" />

    <title>Tipi di tabelle CONNECT - File dei dati - MariaDB Knowledge Base</title>

    <link href="/kb/static/css/main.f7633538c846.css" rel="stylesheet" type="text/css" />

    

    

    <!-- FB Open Graph tags -->
    <meta property="og:title" content="Tipi di tabelle CONNECT - File dei dati" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://mariadb.com/kb/it/connect-table-types-data-files/" />
    <meta property="og:image" content="http://mariadb.comaskmonty-logo.png" />
    <meta property="og:site_name" content="MariaDB KnowledgeBase" />
    <meta property="fb:admins" content="514852603" />
    <meta property="og:description" content="
La maggior parte delle tabelle elaborate da CONNECT sono semplici file DOS o UNIX, logicamente considerate tabelle grazie alla loro descrizione fornita durante la creazione d..." />

    <meta name="description" content="
La maggior parte delle tabelle elaborate da CONNECT sono semplici file DOS o UNIX, logicamente considerate tabelle grazie alla loro descrizione fornita durante la creazione d..." />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="//fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet"/>
    
</head>
<body class="mpkb nodes products nodes_view jqui" id="nodes_view">





<div id="menu-mobile" class="visible-sm visible-xs">

    <div>
        <div id="mobile-close-menu" class="text-right">
            <a href="javascript:void(0)" title="Close Menu" id="back-main" class="toggle-menu">X<span></span></a>
        </div>
    </div>
    <div class="mainmenu-mobile">
        <ul class="ls-none ul-menu">
            <li data-sub="submenu5"><a class="open-form-search" href="/kb/search/" title="Search">Search </a></li>
            <li data-sub="submenu0"><a href="/products" title="Products">Products</a><span class="arrow-main"></span></li>
            <li data-sub="submenu1"><a href="/services" title="Services">Services</a><span class="arrow-main"></span></li>
            <li data-sub="submenu2"><a href="/resources" title="Resources">Resources</a><span class="arrow-main"></span></li>
            <li data-sub="submenu3"><a href="/about-us" title="About">About</a><span class="arrow-main"></span></li>
            <li data-sub="submenu4"><a href="/contact" title="Contact">Contact</a></li>
        </ul>
    </div>

    <div class="nav-top-mobile">
        <div class="select-box form">

            <ul class="inline-block-md mb-none top-nav">
                <li>

                </li>
                
                    <li>
                        <a href="/kb/user/login?next=/kb/it/connect-table-types-data-files/"> Login</a>
                    </li>
                
            </ul>



        </div>
        <p class="text-center copyright">Copyright &copy; 2024 MariaDB. All rights reserved.</p>
    </div>
</div>
<div class="violator-wrap d-none" id="top_violator">
    <div class="container">
        <div class="row">
            <div class="col-xs-12 col-sm-12">
                <div class="violator-outer">
                    <div class="violator-inner">
                        <div class="row">
                            <div class="col-xs-12 col-sm-9 col-lg-7 col-lg-offset-2" id="top_violator_content">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="content-link" target="_blank" rel="nofollow noreferrer">
                                    <span>The Ultimate Guide to High Availability with MariaDB</span>
                                </a>
                            </div>
                            <div class="col-xs-12 col-sm-3" id="top_violator_cta">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="btn btn-mariadb" target="_blank" rel="nofollow noreferrer">Download Now</a>
                            </div>
                        </div>
                    </div>
                    <button type="button" class="btn btn-link close-btn">
                        <svg xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 24 24" width="15px" height="15px"><path d="M 4.9902344 3.9902344 A 1.0001 1.0001 0 0 0 4.2929688 5.7070312 L 10.585938 12 L 4.2929688 18.292969 A 1.0001 1.0001 0 1 0 5.7070312 19.707031 L 12 13.414062 L 18.292969 19.707031 A 1.0001 1.0001 0 1 0 19.707031 18.292969 L 13.414062 12 L 19.707031 5.7070312 A 1.0001 1.0001 0 0 0 18.980469 3.9902344 A 1.0001 1.0001 0 0 0 18.292969 4.2929688 L 12 10.585938 L 5.7070312 4.2929688 A 1.0001 1.0001 0 0 0 4.9902344 3.9902344 z"/></svg>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="wrapper">
<div id="top-nav">
    <div class="container">
        <ul class="hidden-sm hidden-xs" >
            <li><a href="https://mariadb.com/kb/">Knowledge Base</a></li>
            <li><a href="https://mariadb.com/contact/">Contact</a></li>
            
                
                    <li>
                        <a href="/kb/user/login?next=/kb/it/connect-table-types-data-files/" rel="nofollow">Accesso</a>
                    </li>
                
            
            
            <li id="search-form">
                <form action="/kb/it/+search/" method="get" id="search-block-form" accept-charset="UTF-8">
                    <input id="search" title="Enter the terms you wish to search for."
                           placeholder="Search . . ." type="text"
                           name="q" value="" size="15" maxlength="128" class="form-text"
                           data-autocomplete-url="/kb/it/+search/autocomplete/">
                    <input type="hidden" name="quick" value="1" />
                    <input type="hidden" name="source" value="kb" />
                </form>
            </li>
            <li><a id="search-toggler" href="/kb/search/">Search</a></li>
            
        </ul>
    </div>
</div>
<div id="navbar-bottom" class="navbar">
    <div class="container">
        
        
        
        
        <div class="row">
            <div class="col-md-3 col-sm-9 col-xs-9">
                <a class="brand" href="/" title="MariaDB">
                    <img src="/kb/static/images/logo-2018-black.95f5978ae14d.png">
                </a>
            </div>
            <div class="col-md-9 hidden-sm hidden-xs">
                <div class="main-menu">
                    <ul id="main-menu" class="nav navbar-nav inline-block-sm">
    <li class="has-sub full-menu">
        <a href="/products" title="Products">Products</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/services" title="Services">Services</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/pricing" title="Pricing">Pricing</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/resources" title="Resources">Resources</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/about-us" title="About Us">About Us</a>
    </li>
    <li class="">
        <a class="button electric-eel small top-bar-right-download" href="/downloads/">Download</a>
    </li>
</ul>
                </div>
            </div>
            <div class="col-md-3 visible-sm visible-xs col-sm-3 col-xs-3 ps-rv">
                <div class="navbar-header text-right pull-right">
                    <button type="button" class="menu-control toggle-menu" id="open-menu">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="main">
    <div class="container">
        

        <div id="subheader1" class="clearfix">
            <div class="pull-left">
                
                <div id="breadcrumbs" class="breadcrumb">
                    <a href="/kb/it/">Knowledge Base</a>
                    


    
    » <a class="crumb" href="/kb/it/mariadb-italiano/">MariaDB - Italiano</a>
    

    
    » <a class="crumb" href="/kb/it/storage-engine/">Storage Engine</a>
    

    
    » <a class="crumb" href="/kb/it/connect/">Connect</a>
    

    
    » <a class="crumb" href="/kb/it/connect-table-types/">CONNECT Table Types</a>
    


    » <a class="node_link crumb" href="/kb/it/connect-table-types-data-files/">Tipi di tabelle CONNECT - File dei dati</a>


                </div>
                
            </div>
        </div>
    </div>
    <div class="container" id="container-main">
        <div class="row">
            
            
                
                <aside id="sidebar-first" class="sidebar col-md-2 hidden-xs hidden-sm hidden-print">
                    
                        
                        <ul id="category_menu" class="nav nav-pills nav-stacked">
                            <li><a href="/kb/it/">Pagina iniziale</a></li>
                            
                                
                                    <li><a href="/kb/it/+questions/">Domande Aperte</a></li>
                                
                                <li><a href="/kb/it/documentation/">MariaDB Server</a></li>
                                <li><a href="/kb/it/maxscale/">MariaDB MaxScale</a></li>
                                <li><a href="/kb/it/mariadb-columnstore/">MariaDB ColumnStore</a></li>
                                <li><a href="/kb/it/connectors/">Connectors</a></li>
                            

                        </ul>
                    

                    
<div>



<div class="well well-small box actions"><div>

        <a class="btn btn-block btn-blue btn-sm" href="/kb/it/connect-table-types-data-files/+history" rel="nofollow">Cronologia</a>
        
        
        
        <a class="btn btn-block btn-blue btn-sm" href="/kb/it/connect-table-types-data-files/+source/">Source</a>
        
        <a class="btn btn-block btn-blue btn-sm flag" href="/kb/it/connect-table-types-data-files/+flag"
                data-flag-url="/kb/it/connect-table-types-data-files/+flag" rel="nofollow">
                Flag as Spam / Inappropriate</a>
        
        <a class="btn btn-block btn-blue btn-sm" href="/kb/it/connect-table-types-data-files/+translate/">
                Traduci</a>
        

</div>
</div>





<div class="well well-small box node_info"><div>

    <dl>
        <dt>Creato</dt>
        <dd>

<span class="datetime" title="2013-06-30 13:06">11 anni, 1 mese ago</span></dd>

        <dt>Modificato</dt>
        <dd>

<span class="datetime" title="2013-06-30 18:26">11 anni, 1 mese ago</span></dd>

        <dt>Tipo</dt>
        <dd>article</dd>

        <dt>Stato</dt>
        <dd>active</dd>

        <dt>Licenza</dt>
        <dd>
            
                <a href="/kb/it/connect-table-types-data-files/+license/">CC BY-SA / Gnu FDL</a>
            
        </dd>

        
    </dl>

    
    <ul class="rss_feeds">
        <li><a href="/kb/it/connect-table-types-data-files/+history/feed/">
            Cronologia</a>
        </li>
        <li><a href="/kb/it/connect-table-types-data-files/+comments/feed/">
            Commenti</a>
        </li>
    </ul>
    

</div>
</div>





    
    
    

<div class="well well-small box attachments"><div><div class="edit_link pull-right"><a href="/kb/it/connect-table-types-data-files/+edit/attachments/">Edit</a></div><h5>Attachments</h5></div><div>

        
            <div class="no_data">No attachments exist</div>
        
    
</div>
</div>

    



    
    
        

<div class="well well-small box"><div><h5>Versioni Localizzate</h5></div><div>

        <ul>
            
            <li><a href="/kb/en/connect-table-types-data-files/">CONNECT Table Types - Data Files</a> [en]</li>
            
        </ul>
        
</div>
</div>

    






</div>


                    

































                </aside>
            
            
            
                
            
            
                
            
            <section id="content" class="limited_width col-md-8 clearfix">
                
                    <h1>Tipi di tabelle CONNECT - File dei dati</h1>
                

                



                <div>
                    
    

    
    
    

    <div class="node creole">
        
        
        


    
    <div class="answer formatted">
        <div class="table_of_contents well well-small">
<h3>Contents</h3>
 <ol class="toc">

    <li class=""><a href="#tabelle-interne" title="Tabelle interne">Tabelle interne</a></li>

    <li class=""><a href="#tabelle-con-file-multipli" title="Tabelle con file multipli">Tabelle con file multipli</a></li>

    <li class=""><a href="#il-mapping-dei-file" title="Il mapping dei file">Il mapping dei file</a></li>

    <li class=""><a href="#tabelle-basate-su-file-grandi" title="Tabelle basate su file grandi">Tabelle basate su file grandi</a></li>

    <li class=""><a href="#compressed-table-tables" title="Compressed Table Tables">Compressed Table Tables</a></li>

    <li class=""><a href="#dos-and-fix-table-types" title="DOS and FIX Table Types">DOS and FIX Table Types</a>    <ol class="toc">

        <li class=""><a href="#specifying-the-field-format" title="Specifying the Field Format">Specifying the Field Format</a>    </ol>
</li>

    <li class=""><a href="#dbf-type" title="DBF Type">DBF Type</a>    <ol class="toc">

        <li class=""><a href="#reading-soft-deleted-lines-of-a-dbf-table" title="Reading Soft Deleted Lines of a DBF table">Reading Soft Deleted Lines of a DBF table</a>    </ol>
</li>

    <li class=""><a href="#bin-table-type" title="BIN Table Type">BIN Table Type</a>    <ol class="toc">

        <li class=""><a href="#type-conversion-in-bin-tables" title="Type Conversion in BIN Tables">Type Conversion in BIN Tables</a></li>

        <li class=""><a href="#numeric-fields-alignment" title="Numeric fields alignment">Numeric fields alignment</a>    </ol>
</li>

    <li class=""><a href="#vec-table-type-vector" title="VEC Table Type (Vector)">VEC Table Type (Vector)</a>    <ol class="toc">

        <li class=""><a href="#integral-vector-format" title="Integral Vector Format">Integral Vector Format</a></li>

        <li class=""><a href="#semi-vector-format-not-supported-in-this-version" title="Semi-Vector Format (not supported in this version)">Semi-Vector Format (not supported in this version)</a></li>

        <li class=""><a href="#differences-between-vector-formats" title="Differences between vector formats">Differences between vector formats</a></li>

        <li class=""><a href="#header-option" title="Header Option">Header Option</a>    </ol>
</li>

    <li class=""><a href="#csv-and-fmt-table-types" title="CSV and FMT Table Types">CSV and FMT Table Types</a>    <ol class="toc">

        <li class=""><a href="#fmt-type" title="FMT type">FMT type</a></li>

        <li class=""><a href="#column-format-specification-of-fmt-tables" title="Column Format Specification of FMT tables">Column Format Specification of FMT tables</a></li>

        <li class=""><a href="#optional-fields" title="Optional Fields">Optional Fields</a></li>

        <li class=""><a href="#bad-record-error-processing" title="Bad record error processing">Bad record error processing</a></li>

        <li class=""><a href="#fields-containing-a-formatted-date" title="Fields containing a formatted Date">Fields containing a formatted Date</a>    </ol>
</li>

    <li class=""><a href="#xml-table-type" title="XML Table Type">XML Table Type</a>    <ol class="toc">

        <li class=""><a href="#creating-xml-tables" title="Creating XML tables">Creating XML tables</a></li>

        <li class=""><a href="#using-xpaths-with-xml-tables" title="Using Xpath’s with XML tables">Using Xpath’s with XML tables</a></li>

        <li class=""><a href="#direct-access-on-xml-tables" title="Direct access on XML tables">Direct access on XML tables</a></li>

        <li class=""><a href="#write-operations-on-xml-tables" title="Write operations on XML tables">Write operations on XML tables</a></li>

        <li class=""><a href="#multiple-nodes-in-the-xml-document" title="Multiple Nodes in the XML Document">Multiple Nodes in the XML Document</a></li>

        <li class=""><a href="#intermediate-multiple-node" title="Intermediate Multiple Node">Intermediate Multiple Node</a></li>

        <li class=""><a href="#making-a-list-of-multiple-values" title="Making a List of Multiple Values">Making a List of Multiple Values</a></li>

        <li class=""><a href="#what-if-a-table-contains-several-multiple-nodes" title="What if a table contains several multiple nodes">What if a table contains several multiple nodes</a></li>

        <li class=""><a href="#support-of-html-tables" title="Support of HTML Tables">Support of HTML Tables</a></li>

        <li class=""><a href="#new-file-setting" title="New file setting">New file setting</a>    </ol>
</li>

    <li class=""><a href="#ini-table-type" title="INI Table Type">INI Table Type</a>    <ol class="toc">

        <li class=""><a href="#column-layout" title="Column layout">Column layout</a></li>

        <li class=""><a href="#row-layout" title="Row layout">Row layout</a>    </ol>
 </ol>
</li>
</div><p>
La maggior parte delle tabelle elaborate da CONNECT sono semplici file DOS o UNIX, logicamente considerate tabelle grazie alla loro descrizione fornita durante la creazione della tabella. Questa descrizione viene dall'istruzione <code><a href="https://kb.askmonty.org/it/create-table/">CREATE TABLE</a></code>. A seconda dell'applicazione, queste tabelle possono essere già esistenti come file, e quindi utilizzate così come sono da CONNECT, oppure possono essere create fisicamente da CONNECT in seguito all'istruzione <code>CREATE TABLE ... SELECT ...</code> e/o INSERT.</p>
<p>Il file <em>percorso/nome</em> è specificato con l'opzione <code>FILE_NAME</code>. Se il percorso è relativo, sarà considerato relativo alla directory del database, cioè quella che contiene il file .FRM.</p>
<h2 class="anchored_heading" id="tabelle-interne">Tabelle interne</h2>
<p>Un tipo particolare di tabelle CONNECT basate sui file sono le tabelle "interne". Queste sono create quando il nome del file viene specificato nell'istruzione <code><a href="https://kb.askmonty.org/it/create-table/">CREATE TABLE</a></code>. Il nome di default è <em>nome_tabella.tip</em> dove <em>nome_tabella</em> è il nome della tabella e <em>tip</em> è il tipo di tabella in caratteri minuscoli. Un file vuoto viene creato nella directory del database corrente al momento della creazione e viene popolato con i successivi inserimenti.</p>
<p>Queste tabelle si comportano come quelle create dagli altri Storage Engine e, diversamente da quanto avviene con le altre tabelle CONNECT, i file vengono cancellati quando la tabella viene eliminata. Naturalmente per poter essere usate non devono essere di sola lettura. Anche se la loro usabilità è limitata, possono essere utilizzate per scopo di testing o se l'utente non ha il privilegio <code>FILE</code>.</p>
<h2 class="anchored_heading" id="tabelle-con-file-multipli">Tabelle con file multipli</h2>
<p>Una tabella con file <strong>multipli</strong> è una tabelle che fisicamente è contenuta da diversi file dello stesso tipo, non uno solo. Questi file vengono elaborati in sequenza durante l'esecuzione delle query e il risultato è lo stesso che si otterrebbe se ci fosse un unico file. Ciò è utile per elaborare i file che vengono da diverse fonti (come i file di log dei crash) o creati in diversi periodi di tempo (come i report mensili della banca) e che devono essere considerati come un'unica tabella. Si noti che le operazioni su tali file sono limitate alle SELECT e alle UPDATE sequenziali; e che le tabelle multiple VEC non sono supportate da CONNECT. La lista dei file dipende dall'impostazione dell'opzione <strong>multiple</strong> nell'istruzione CREATE TABLE.</p>
<p>Le tabelle multiple si creano con MULTIPLE=<em>n</em>, che può assumere tre valori:</p>
<table><tr><td>0</td><td>Una tabella non multipla (il default). Si può utilizzare in una ALTER TABLE.</td></tr>
<tr><td>1</td><td>La tabella è composta da file che si trovano nella stessa directory. L'opzione FILE_NAME è una schema come <code>'cash*.log'</code> che deve corrispondere a tutte le tabelle desiderate.</td></tr>
<tr><td>2</td><td>FILE_NAME è il nome di un file che contiene tutti i percorsi e i nomi dei file che compongono la tabella. Questo file può essere creato utilizzando una tabella DIR.</td></tr>
</table>
<p>La colonna speciale <code>FILEID</code>, spiegata
<a href="/kb/en/using-connect-virtual-and-special-columns/">qui</a>, permette di filtrare l'elenco dei file o eseguire qualche raggruppamento sui file che compongono una tabella multipla.</p>
<h2 class="anchored_heading" id="il-mapping-dei-file">Il mapping dei file</h2>
<p>Per le tabelle basate sui file di dimensioni ragionevoli, il tempo di elaborazione può essere ridotto sensibilmente sotto WindowsTM o alcuni sistemi UNIX e Linux utilizzando la tecnica del “file mapping”, che consiste nell'elaborare un file come se si trovasse interamente in memoria. Il mapping viene specificato al momento della creazione della tabella tramite l'opzione <code>MAPPED=YES</code>. Questa non si applica alle tabelle che non sono gestite dalle funzioni di I/O del sistema (<code>XML</code> e <code>INI</code>).</p>
<h2 class="anchored_heading" id="tabelle-basate-su-file-grandi">Tabelle basate su file grandi</h2>
<p>Siccome tutti i file sono festiti dalle funzioni standard di input/output del sistema operativo, their le loro dimensioni sono limitate a 2GB, cioè le dimensioni massime consentite da tali funzioni. Per alcuni tipi di tabelle, CONNECT può gestire file che sono più grandi di 2GB o che potrebbero superare questo limite. Questi tipi sono FIX, BIN e  VEC. Per dire a CONNECT di utilizzare le funzioni di input/output in grado di gestire file grandi, si specifica l'opzione <code>huge=1</code> o <code>huge=YES</code>. Si noti però che CONNECT non può effettuare l'accesso casuale su tabelle che superano i 2G.</p>
<h2 class="anchored_heading" id="compressed-table-tables">Compressed Table Tables</h2>
<p>CONNECT can make and processed some tables whose data file is compressed. The
only supported compression format is the gzlib format. Zip and zlib formats are
not supported. The table types that can be compressed are DOS, FIX, BIN, CSV
and FMT. This can save some disk space at the cost of a somewhat longer
processing time.</p>
<p>Some restrictions apply to compressed tables:</p>
<ul start="1"><li>Compressed tables are not indexable.
</li></ul>
<ul start="1"><li>Update and partial delete are not supported.
</li></ul>
<p>Use the Boolean COMPRESS option to specify a compressed table.</p>
<h2 class="anchored_heading" id="dos-and-fix-table-types">DOS and FIX Table Types</h2>
<p>Table of type DOS are based on text files in which each record represents a
table row. Within a record, column fields are positioned at a fixed offset from
the beginning of the record. Except sometimes for the last field, column fields
are also of fixed length. If the last field has varying length, the type of the
table is DOS. For instance, having the file <em>dept.dat</em> formatted like:</p>
<pre class="fixed">0318 KINGSTON       70012 SALES       Bank/Insurance
0021 ARMONK         87777 CHQ         Corporate headquarter
0319 HARRISON       40567 SALES       Federal Administration
2452 POUGHKEEPSIE   31416 DEVELOPMENT Research &amp; development
</pre><p>You can define a table based on it with:</p>
<pre class="fixed"><span class="k">create</span> <span class="k">table</span> <span class="nf">department</span> <span class="p">(</span>
  <span class="n">number</span> <span class="kt">char</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span> <span class="k">not</span> <span class="no">null</span><span class="p">,</span>
  <span class="n">location</span> <span class="kt">char</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span> <span class="k">not</span> <span class="no">null</span> <span class="n">flag</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
  <span class="n">director</span> <span class="kt">char</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="k">not</span> <span class="no">null</span> <span class="n">flag</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span>
  <span class="n">function</span> <span class="kt">char</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span> <span class="k">not</span> <span class="no">null</span> <span class="n">flag</span><span class="o">=</span><span class="mi">26</span><span class="p">,</span>
  <span class="n">name</span> <span class="kt">char</span><span class="p">(</span><span class="mi">22</span><span class="p">)</span> <span class="k">not</span> <span class="no">null</span> <span class="n">flag</span><span class="o">=</span><span class="mi">38</span><span class="p">)</span>
<span class="kp">engine</span><span class="o">=</span><span class="n">CONNECT</span> <span class="n">table_type</span><span class="o">=</span><span class="n">DOS</span> <span class="n">file_name</span><span class="o">=</span><span class="s1">&#39;dept.dat&#39;</span><span class="p">;</span>
</pre><p>Here the flag column option represents the offset of this column inside the
records. If the offset of a column is not specified, it defaults to the end of
the previous column and defaults to 0 for the first one.  The <em>lrecl</em>
parameter that represents the maximum size of a record is calculated by default
as the end of the rightmost column and can be unspecified except when some
trailing information exists after the rightmost column.</p>
<div class="cstm-style bluebox"><p><strong>Note:</strong> A special case is files having an encoding such as UTF-8 (for
instance specifying <code>charset=UTF8</code>) in which some characters may be
represented with several bytes. Unlike the type size that MariaDB interprets as
a number of characters, the lrecl value is the record size in bytes and the
flag value represents the offset of the field in the record in bytes. If the
flag and/or the lrecl value are not specified, they will be calculated by the
number of character in the fields multiplied by a value that is the maximum
size in bytes of a character for the corresponding charset. For UTF-8 this
value is 3 that is far too much as they are very few characters requiring 3
bytes to be represented. When creating a new file, you are on the safe side by
only doubling the maximum number of characters of a field to calculate the
offset of the next field. Of course, for already existing files, the offset
must be specified according to what it is in it.</p>
</div><p>Although the field representation is always text in the table file, you can
freely choose the corresponding column type, characters, date, integer or
floating point according to its contents.</p>
<p>Sometimes, as in the <em>number</em> column of the above <em>department</em> table, you
have the choice of the type, numeric or characters. This will modify how the
column is internally handled <span>&mdash;</span> in characters 0021 is
different from 21 but not in numeric <span>&mdash;</span> as well as how
it is displayed.</p>
<p>If the last field has fixed length, the table should be referred as having the
type FIX. For instance, to create a table on the file <em>boys.txt</em>:</p>
<pre class="fixed">John      Boston      25/01/1986  02/06/2010
Henry     Boston      07/06/1987  01/04/2008
George    San Jose    10/08/1981  02/06/2010
Sam       Chicago     22/11/1979  10/10/2007
James     Dallas      13/05/1992  14/12/2009
Bill      Boston      11/09/1986  10/02/2008
</pre><p>You can for instance use the command:</p>
<pre class="fixed"><span class="k">create</span> <span class="k">table</span> <span class="nf">boys</span> <span class="p">(</span>
  <span class="n">name</span> <span class="kt">char</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span> <span class="k">not</span> <span class="no">null</span><span class="p">,</span>
  <span class="n">city</span> <span class="kt">char</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span> <span class="k">not</span> <span class="no">null</span><span class="p">,</span>
  <span class="n">birth</span> <span class="kt">date</span> <span class="k">not</span> <span class="no">null</span> <span class="n">date_format</span><span class="o">=</span><span class="s1">&#39;DD/MM/YYYY&#39;</span><span class="p">,</span>
  <span class="n">hired</span> <span class="kt">date</span> <span class="k">not</span> <span class="no">null</span> <span class="n">date_format</span><span class="o">=</span><span class="s1">&#39;DD/MM/YYYY&#39;</span> <span class="n">flag</span><span class="o">=</span><span class="mi">36</span><span class="p">)</span>
<span class="kp">engine</span><span class="o">=</span><span class="n">CONNECT</span> <span class="n">table_type</span><span class="o">=</span><span class="n">FIX</span> <span class="n">file_name</span><span class="o">=</span><span class="s1">&#39;boys.txt&#39;</span> <span class="n">lrecl</span><span class="o">=</span><span class="mi">48</span><span class="p">;</span>
</pre><p>Here some <em>flag</em> options were not specified because the fields have no
intermediate space between them except for the last column. The offsets are
calculated by default adding the field length to the <em>offset</em> of the
preceding field. However, for formatted date columns, the offset in the file
depends on the format and cannot be calculated by default. For fixed files,
the <em>lrecl</em> option is the physical length of the record including the line
ending character(s). It is calculated by adding to the end of the last field 2
bytes under Windows (CRLF) or 1 byte under UNIX. If the file is imported from
another operating system, the <code>ENDING</code> option will have to be specified with
the proper value.</p>
<p>For this table, the last offset and the record length must be specified anyway
because the date columns have field length coming from their format that is not
known by CONNECT. Do not forget to add the line ending length to the total
length of the fields.</p>
<p>This table is displayed as:</p>
<div class="cstm-style darkheader-nospace-borders"><table><tr><th>name</th><th>city</th><th>birth</th><th>hired</th></tr>
<tr><td>John</td><td>Boston</td><td>1986-01-25</td><td>2010-06-02</td></tr>
<tr><td>Henry</td><td>Boston</td><td>1987-06-07</td><td>2008-04-01</td></tr>
<tr><td>George</td><td>San Jose</td><td>1981-08-10</td><td>2010-06-02</td></tr>
<tr><td>Sam</td><td>Chicago</td><td>1979-11-22</td><td>2007-10-10</td></tr>
<tr><td>James</td><td>Dallas</td><td>1992-05-13</td><td>2009-12-14</td></tr>
<tr><td>Bill</td><td>Boston</td><td>1986-09-11</td><td>2008-02-10</td></tr>
</table>
</div><p>Whenever possible, the fixed format should be preferred to the varying one
because it is much faster to deal with fixed tables than with variable tables.
Sure enough, instead of being read or written record by record, FIX tables are
processed by blocks of <code>BLOCK_SIZE</code> records, resulting in far less
input/output operations to execute. The block size defaults to 100 if not
specified in the Create Table statement.</p>
<p><strong>Note 1:</strong> It is not mandatory to declare in the table all the fields existing
in the source file. However, if some fields are ignored, the <em>flag</em> option of
the following field and/or the <em>lrecl</em> option will have to be specified.</p>
<p><strong>Note 2:</strong> Some files have an EOF marker (CTRL+Z 1A) that can prevent the
table to be recognized as fixed because the file length is not a multiple of
the fixed record size. To indicate this, use in the option list the create
option EOF. For instance, if after creating the FIX table <em>xtab</em> on the
file <em>foo.dat</em> that you know have fixed record size, you get, when you try to
use it, a message such as:</p>
<pre class="fixed">File foo.dat is not fixed length, len=302587 lrecl=141
</pre><p>After checking that the LRECL default or specified specification is correct, you can indicate to ignore that extra EOF character by:</p>
<pre class="fixed"><span class="k">alter</span> <span class="k">table</span> <span class="n">xtab</span> <span class="n">option_list</span><span class="o">=</span><span class="s1">&#39;eof=1&#39;</span><span class="p">;</span>
</pre><p>Of course, you can specify this option directly in the Create statement. All
this applies to some other table types, in particular to BIN tables.</p>
<p><strong>Note 3:</strong> The width of the fields is the length specified in the column
declaration. For instance for a column declared as:</p>
<pre class="fixed"><span class="n">number</span> <span class="kt">int</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="k">not</span> <span class="no">null</span><span class="p">,</span>
</pre><p>The field width in the file is 3 characters. This is the value used to
calculate the offset of the next field if it is not specified. If this length
is not specified, it defaults to the MySQL default type length.</p>
<h3 class="anchored_heading" id="specifying-the-field-format">Specifying the Field Format</h3>
<p>Some files have specific format for their numeric fields. For instance, the
decimal point is absent and/or the field should be filled with leading zeros.
To deal with such files, as well in reading as in writing, the format can be
specified in the <code>CREATE TABLE</code> column definition. The syntax of the field
format specification is:</p>
<pre class="fixed"><span class="n">Field_format</span><span class="o">=</span><span class="s1">&#39;[Z][N][d]&#39;</span>
</pre><p>The optional parts of the format are:</p>
<table><tr><td><strong>Z</strong></td><td>The field has leading zeros</td></tr>
<tr><td><strong>N</strong></td><td>No decimal point exist in the file</td></tr>
<tr><td><strong><em>d</em></strong></td><td>The number of decimals, defaults to the column precision</td></tr>
</table>
<p>Let us see how it works in the following example. We define a table based on
the file xfmt.txt having eight fields of 12 characters:</p>
<pre class="fixed"><span class="k">create</span> <span class="k">table</span> <span class="nf">xfmt</span> <span class="p">(</span>
  <span class="n">col1</span> <span class="kt">double</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span> <span class="k">not</span> <span class="no">null</span><span class="p">,</span>
  <span class="n">col2</span> <span class="kt">double</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span> <span class="k">not</span> <span class="no">null</span> <span class="n">field_format</span><span class="o">=</span><span class="s1">&#39;4&#39;</span><span class="p">,</span>
  <span class="n">col3</span> <span class="kt">double</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span> <span class="k">not</span> <span class="no">null</span> <span class="n">field_format</span><span class="o">=</span><span class="s1">&#39;N3&#39;</span><span class="p">,</span>
  <span class="n">col4</span> <span class="kt">double</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span> <span class="k">not</span> <span class="no">null</span> <span class="n">field_format</span><span class="o">=</span><span class="s1">&#39;Z&#39;</span><span class="p">,</span>
  <span class="n">col5</span> <span class="kt">double</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span> <span class="k">not</span> <span class="no">null</span> <span class="n">field_format</span><span class="o">=</span><span class="s1">&#39;Z3&#39;</span><span class="p">,</span>
  <span class="n">col6</span> <span class="kt">double</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span><span class="mi">5</span><span class="p">)</span> <span class="k">not</span> <span class="no">null</span> <span class="n">field_format</span><span class="o">=</span><span class="s1">&#39;ZN5&#39;</span><span class="p">,</span>
  <span class="n">col7</span> <span class="kt">int</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span> <span class="k">not</span> <span class="no">null</span> <span class="n">field_format</span><span class="o">=</span><span class="s1">&#39;N3&#39;</span><span class="p">,</span>
  <span class="n">col8</span> <span class="kt">smallint</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span> <span class="k">not</span> <span class="no">null</span> <span class="n">field_format</span><span class="o">=</span><span class="s1">&#39;N3&#39;</span><span class="p">)</span>
<span class="kp">engine</span><span class="o">=</span><span class="n">CONNECT</span> <span class="n">table_type</span><span class="o">=</span><span class="n">FIX</span> <span class="n">file_name</span><span class="o">=</span><span class="s1">&#39;xfmt.txt&#39;</span><span class="p">;</span>

<span class="k">insert</span> <span class="k">into</span> <span class="n">xfmt</span> <span class="k">values</span><span class="p">(</span><span class="mi">4567</span><span class="p">.</span><span class="mi">056</span><span class="p">,</span><span class="mi">4567</span><span class="p">.</span><span class="mi">056</span><span class="p">,</span><span class="mi">4567</span><span class="p">.</span><span class="mi">056</span><span class="p">,</span><span class="mi">4567</span><span class="p">.</span><span class="mi">056</span><span class="p">,</span><span class="o">-</span><span class="mi">23456</span><span class="p">.</span><span class="mi">8</span><span class="p">,</span>
    <span class="mi">3</span><span class="p">.</span><span class="mi">14159</span><span class="p">,</span><span class="mi">4567</span><span class="p">,</span><span class="mi">4567</span><span class="p">);</span>
<span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">xfmt</span><span class="p">;</span>
</pre><p>The first row is displayed as:</p>
<div class="cstm-style darkheader-nospace-borders"><table><tr><th>COL1</th><th>COL2</th><th>COL3</th><th>COL4</th><th>COL5</th><th>COL6</th><th>COL7</th><th>COL8</th></tr>
<tr><td>4567.056</td><td>4567.056</td><td>4567.06</td><td>4567.056</td><td>-23456.800</td><td>3.14159</td><td>4567</td><td>4567</td></tr>
</table>
</div><p>The number of decimals displayed for all float columns is the column precision, the second argument of the column type option. Of course, integer columns have no decimals, although their formats specify some.</p>
<p>More interesting is the file layout. To see it let us define another table
based on the same file but whose columns are all characters:</p>
<pre class="fixed"><span class="k">create</span> <span class="k">table</span> <span class="nf">cfmt</span> <span class="p">(</span>
  <span class="n">col1</span> <span class="kt">char</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span> <span class="k">not</span> <span class="no">null</span><span class="p">,</span>
  <span class="n">col2</span> <span class="kt">char</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span> <span class="k">not</span> <span class="no">null</span><span class="p">,</span>
  <span class="n">col3</span> <span class="kt">char</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span> <span class="k">not</span> <span class="no">null</span><span class="p">,</span>
  <span class="n">col4</span> <span class="kt">char</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span> <span class="k">not</span> <span class="no">null</span><span class="p">,</span>
  <span class="n">col5</span> <span class="kt">char</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span> <span class="k">not</span> <span class="no">null</span><span class="p">,</span>
  <span class="n">col6</span> <span class="kt">char</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span> <span class="k">not</span> <span class="no">null</span><span class="p">,</span>
  <span class="n">col7</span> <span class="kt">char</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span> <span class="k">not</span> <span class="no">null</span><span class="p">,</span>
  <span class="n">col8</span> <span class="kt">char</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span> <span class="k">not</span> <span class="no">null</span><span class="p">)</span>
<span class="kp">engine</span><span class="o">=</span><span class="n">CONNECT</span> <span class="n">table_type</span><span class="o">=</span><span class="n">FIX</span> <span class="n">file_name</span><span class="o">=</span><span class="s1">&#39;xfmt.txt&#39;</span><span class="p">;</span>
<span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">cfmt</span><span class="p">;</span>
</pre><p>The (transposed) display of the select command shows the file text layout for
each field. Below a third column was added in this document to comment this
result.</p>
<div class="cstm-style darkheader-nospace-borders"><table><tr><th>Column</th><th>Row 1</th><th>Comment (all numeric fields are written right justified)</th></tr>
<tr><td><strong>COL1</strong></td><td><code>4567.056</code></td><td>No format, the value was entered as is.</td></tr>
<tr><td><strong>COL2</strong></td><td><code>4567.0560</code></td><td>The format ‘4’ forces to write 4 decimals.</td></tr>
<tr><td><strong>COL3</strong></td><td><code>4567060</code></td><td>N3 → No decimal point. The last 3 digits are decimals. However, the second decimal was rounded because of the column precision.</td></tr>
<tr><td><strong>COL4</strong></td><td><code>00004567.056</code></td><td>Z → Leading zeros, 3 decimals (the column precision)</td></tr>
<tr><td><strong>COL5</strong></td><td><code>-0023456.800</code></td><td>Z3 → (Minus sign) leading zeros, 3 decimals.</td></tr>
<tr><td><strong>COL6</strong></td><td><code>000000314159</code></td><td>ZN5 → Leading zeros, no decimal point, 5 decimals.</td></tr>
<tr><td><strong>COL7</strong></td><td><code>4567000</code></td><td>N3 → No decimal point. The last 3 digits are decimals.</td></tr>
<tr><td><strong>COL8</strong></td><td><code>4567000</code></td><td>Same. Any decimals would be ignored.</td></tr>
</table>
</div><p><strong>Note:</strong> For columns internally using double precision floating-point numbers,
MariaDB limits the decimal precision of any calculation to the column
precision. The declared column precision should be at least the number of
decimals of the format to avoid a loss of decimals as it happened for col3 of
the above example.</p>
<h2 class="anchored_heading" id="dbf-type">DBF Type</h2>
<p>A table of type <code>DBF</code> is physically a dBASE III or IV formatted file (used by
many products like dBASE, Xbase, FoxPro etc.). This format is similar to the
FIX type format with in addition a prefix giving the characteristics of the
file, describing in particular all the fields (columns) of the table.</p>
<p>Because <code>DBF</code> files have a header that contains Meta data about the file, in
particular the column description, it is possible to create a table based on an
existing <code>DBF</code> file without giving the column description, for instance:</p>
<pre class="fixed"><span class="k">create</span> <span class="k">table</span> <span class="n">cust</span> <span class="kp">engine</span><span class="o">=</span><span class="n">CONNECT</span> <span class="n">table_type</span><span class="o">=</span><span class="n">DBF</span> <span class="n">file_name</span><span class="o">=</span><span class="s1">&#39;cust.dbf&#39;</span><span class="p">;</span>
</pre><p>To see what CONNECT has done, you can use the <code>DESCRIBE</code>
or <code>SHOW CREATE TABLE</code> commands, and eventually modify some options with
the <code>ALTER TABLE</code> command.</p>
<p>The case of deleted lines is handled in a specific way for DBF tables. Deleted
lines are not removed from the file but are "soft deleted" meaning they are
marked as deleted. In particular, the number of lines contained in the file
header does not take care of soft deleted lines. This is why if you execute
these two commands applied to a DBF table named <em>tabdbf</em>:</p>
<pre class="fixed"><span class="k">select</span> <span class="nf">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">from</span> <span class="n">tabdbf</span><span class="p">;</span>
<span class="k">select</span> <span class="nf">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">from</span> <span class="n">tabdbf</span> <span class="k">where</span> <span class="mi">1</span><span class="p">;</span>
</pre><p>They can give a different result, the (fast) first one giving the number of physical lines in the file and the second one giving the number of line that are not (soft) deleted.</p>
<p>The commands UPDATE, INSERT, and DELETE can be used with DBF tables. The DELETE command marks the deleted lines as suppressed but keeps them in the file. The INSERT command, if it is used to populate a newly created table, constructs the file header before inserting new lines.</p>
<p><strong>Note:</strong> For DBF tables, column name length is limited to 11 characters and field length to 256 bytes.</p>
<h3 class="anchored_heading" id="reading-soft-deleted-lines-of-a-dbf-table">Reading Soft Deleted Lines of a DBF table</h3>
<p>It is possible to read these lines by changing the read mode of the table. This is specified by an option <code>READMODE</code> that can take the values:</p>
<table><tr><td><strong>0</strong></td><td>Standard mode. This is the default option.</td></tr>
<tr><td><strong>1</strong></td><td>Read all lines including soft deleted ones.</td></tr>
<tr><td><strong>2</strong></td><td>Read only the soft deleted lines.</td></tr>
</table>
<p>For example, to read all lines of the tabdbf table, you can do:</p>
<pre class="fixed"><span class="k">alter</span> <span class="k">table</span> <span class="n">tabdbf</span> <span class="n">option_list</span><span class="o">=</span><span class="s1">&#39;Readmode=1&#39;</span><span class="p">;</span>
</pre><p>To come back to normal mode, specify READMODE=0.</p>
<h2 class="anchored_heading" id="bin-table-type">BIN Table Type</h2>
<p>A table of type BIN is physically a binary file in which each row is a logical record of fixed length<sup class="reference" id="_ref-0">[<a href="#_note-0">1</a>]</sup>. Within a record, column field are of fixed offset and length like for FIX tables. What is specific to BIN tables is that numerical values are internally encoded using native platform representation, so no conversion is needed to handle numerical values in expressions.</p>
<p>It is not required that the lines of a BIN file be separated by characters such as CR and/or LF but this is possible. In such event, the <em>lrecl</em> option must be specified accordingly.</p>
<p><strong>Note:</strong> Unlike for the DOS and FIX types, the width of the fields is the length of their internal representation in the file. For instance for a column declared as:</p>
<pre class="fixed"><span class="n">number</span> <span class="kt">int</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="k">not</span> <span class="no">null</span><span class="p">,</span>
</pre><p>The field width in the file is 4 characters, the size of a binary integer. This is the value used to calculate the offset of the next field if it is not specified. Therefore, if the next field is placed 5 characters after this one, this declaration is not enough, the flag option will have to be used on the next field.</p>
<h3 class="anchored_heading" id="type-conversion-in-bin-tables">Type Conversion in BIN Tables</h3>
<p>Here are the correspondences between the column type and field format provided by default:</p>
<div class="cstm-style darkheader-nospace-borders"><table><tr><th>Column type</th><th>File default format</th></tr>
<tr><td>Char(<em>n</em>)</td><td>Text of <em>n</em> characters.</td></tr>
<tr><td>Date</td><td>Integer (4 bytes)</td></tr>
<tr><td>Int(<em>n</em>)</td><td>Integer (4 bytes)</td></tr>
<tr><td>Smallint(<em>n</em>)</td><td>Short integer (2 bytes)</td></tr>
<tr><td>Bigint(<em>n</em>)</td><td>Large integer (8 bytes)</td></tr>
<tr><td>Double(<em>n,d</em>)</td><td>Double floating point (8 bytes)</td></tr>
</table>
</div><p>However, the column type must not necessarily match the field format within the table file. In particular, this occurs for field formats that correspond to numeric types that are not handled by CONNECT. Indeed, BIN table files may internally contain tiny integers, short integers, or float numbers. Also, as in DOS or FIX tables, you may want to handles as numeric some character fields or vice versa.</p>
<p>This is why it is possible to specify the field format when it does not correspond to the column type default using the field_format column option in the CREATE TABLE statement. Here are the available field formats for BIN tables:</p>
<div class="cstm-style darkheader-nospace-borders"><table><tr><th>Field_format</th><th>Internal representation</th></tr>
<tr><td>C</td><td>Characters string (<em>n</em> bytes)</td></tr>
<tr><td>L or I</td><td>(Long) integer (4 bytes)</td></tr>
<tr><td>D</td><td>Double float (8 bytes)</td></tr>
<tr><td>S</td><td>Short integer (2 bytes)</td></tr>
<tr><td>B</td><td>Large (big) integer (8 bytes)</td></tr>
<tr><td>T</td><td>Tiny integer (1 byte)</td></tr>
<tr><td>F or R</td><td>Real or float (Floating point number on 4 bytes)</td></tr>
<tr><td>X</td><td>Use the default format field for the column type</td></tr>
</table>
</div><p>All field formats are a one-character specification<sup class="reference" id="_ref-1">[<a href="#_note-1">2</a>]</sup>. 'X' is equivalent to not specifying the field format. For the 'C' character specification, <em>n</em> is the column width as specified with the column type. The number of bytes of the numeric fields corresponds to what it is on most platforms. However, it could vary for some ones.</p>
<p>Here is an example of a BIN table, the file record layout is supposed to be:</p>
<pre class="fixed">NNNNCCCCCCCCCCIIIISSFFFFSS
</pre><p>Where N represents numeric characters, C any characters, I integer bytes,
S short integer bytes, and F float number bytes. The <code>IIII</code> field contains a
date in numeric format.</p>
<p>The table could be created by:</p>
<pre class="fixed"><span class="k">create</span> <span class="k">table</span> <span class="nf">testbal</span> <span class="p">(</span>
  <span class="n">fig</span> <span class="kt">int</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span> <span class="k">not</span> <span class="no">null</span> <span class="n">field_format</span><span class="o">=</span><span class="s1">&#39;C&#39;</span><span class="p">,</span>
  <span class="n">name</span> <span class="kt">char</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="k">not</span> <span class="no">null</span><span class="p">,</span>
  <span class="n">birth</span> <span class="kt">date</span> <span class="k">not</span> <span class="no">null</span><span class="p">,</span>
  <span class="n">id</span> <span class="kt">char</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="k">not</span> <span class="no">null</span> <span class="n">field_format</span><span class="o">=</span><span class="s1">&#39;S&#39;</span><span class="p">,</span>
  <span class="n">salary</span> <span class="kt">double</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span> <span class="k">not</span> <span class="no">null</span> <span class="k">default</span> <span class="mi">0</span><span class="p">.</span><span class="mi">00</span> <span class="n">field_format</span><span class="o">=</span><span class="s1">&#39;F&#39;</span><span class="p">,</span>
  <span class="n">dept</span> <span class="kt">int</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span> <span class="k">not</span> <span class="no">null</span> <span class="n">field_format</span><span class="o">=</span><span class="s1">&#39;S&#39;</span><span class="p">)</span>
<span class="kp">engine</span><span class="o">=</span><span class="n">CONNECT</span> <span class="n">table_type</span><span class="o">=</span><span class="n">BIN</span> <span class="n">block_size</span><span class="o">=</span><span class="mi">5</span> <span class="n">file_name</span><span class="o">=</span><span class="s1">&#39;Testbal.dat&#39;</span><span class="p">;</span>
</pre><p>The field offsets and the file record length being calculated according the
column internal format, eventually modified by the field format, it is not
necessary to specify them for a packed binary file without line ending. If line
ending are desired, specify the lrecl option adding the ending width. The table
can be filled by:</p>
<pre class="fixed"><span class="k">insert</span> <span class="k">into</span> <span class="n">testbal</span> <span class="k">values</span>
  <span class="p">(</span><span class="mi">5500</span><span class="p">,</span><span class="s1">&#39;ARCHIBALD&#39;</span><span class="p">,</span><span class="s1">&#39;1980-01-25&#39;</span><span class="p">,</span><span class="s1">&#39;3789&#39;</span><span class="p">,</span><span class="mi">4380</span><span class="p">.</span><span class="mi">50</span><span class="p">,</span><span class="mi">318</span><span class="p">),</span>
  <span class="p">(</span><span class="mi">123</span><span class="p">,</span><span class="s1">&#39;OLIVER&#39;</span><span class="p">,</span><span class="s1">&#39;1953-08-10&#39;</span><span class="p">,</span><span class="s1">&#39;23456&#39;</span><span class="p">,</span><span class="mi">3400</span><span class="p">.</span><span class="mi">68</span><span class="p">,</span><span class="mi">2158</span><span class="p">),</span>
  <span class="p">(</span><span class="mi">3123</span><span class="p">,</span><span class="s1">&#39;FOO&#39;</span><span class="p">,</span><span class="s1">&#39;2002-07-23&#39;</span><span class="p">,</span><span class="s1">&#39;888&#39;</span><span class="p">,</span><span class="k">default</span><span class="p">,</span><span class="mi">318</span><span class="p">);</span>
</pre><p>Note that the types of the inserted values must match the column type, not the field format type.</p>
<p>The query:</p>
<pre class="fixed"><span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">testbal</span><span class="p">;</span>
</pre><p>Returns:</p>
<div class="cstm-style darkheader-nospace-borders"><table><tr><th>fig</th><th>name</th><th>birth</th><th>id</th><th>salary</th><th>dept</th></tr>
<tr><td>5500</td><td>ARCHIBALD</td><td>1980-01-25</td><td>3789</td><td>4380.50</td><td>318</td></tr>
<tr><td>123</td><td>OLIVER</td><td>1953-08-10</td><td>23456</td><td>3400.68</td><td>2158</td></tr>
<tr><td>3123</td><td>FOO</td><td>2002-07-23</td><td>888</td><td>0.00</td><td>318</td></tr>
</table>
</div><h3 class="anchored_heading" id="numeric-fields-alignment">Numeric fields alignment</h3>
<p>In binary files, numeric fields and record length are by default aligned on 8-bytes boundaries to optimize performances with some processors. This can be modified in the OPTION_LIST with an "align" option (or "packed" meaning align=1).</p>
<h2 class="anchored_heading" id="vec-table-type-vector">VEC Table Type (Vector)</h2>
<p>Tables of type <code>VEC</code> are binary files that in some cases can provide good
performance on read-intensive query workloads. CONNECT organizes their data on
disk as columns of values from the same attribute, as opposed to storing it as
rows of tabular records. This organization means that when a query needs to
access only a few columns of a particular table, only those columns need to be
read from disk. Conversely, in a row-oriented table, all values in a table are
typically read from disk, and wasting I/O bandwidth.</p>
<p>CONNECT provides two integral VEC formats, in which each column data is
adjacent. The block semi-vector format, in which records are grouped by blocks
while column data is only adjacent into each block, is not supported by this
version.</p>
<h3 class="anchored_heading" id="integral-vector-format">Integral Vector Format</h3>
<p>In this true vertical format, the VEC files are made of all the data of the
first column, followed by all the data of the second column etc. All this can
be in one physical file or each column data can be in a separate file. In the
first case, the option MAX_ROWS=<em>m</em>, where <em>m</em> is the estimate of the
maximum size (number of rows) of the table, must be specified to be able to
insert some new records. This leaves an empty space after each column area in
which new data can be inserted. In the second case, the "Split" option must be
specified at table creation and each columns will be stored in a file named
sequentially from the table file name followed by the rank of the column.
Inserting new lines can freely augment such a table.</p>
<h3 class="anchored_heading" id="semi-vector-format-not-supported-in-this-version">Semi-Vector Format (not supported in this version)</h3>
<p>In this format the VCT files are organized in blocks each containing the data of n rows, n being the Elements value. Within each block, data is organized column wise, a vector of n values for the first column followed by a vector of n values for the second column etc. When inserting new line, new blocks can be created.</p>
<h3 class="anchored_heading" id="differences-between-vector-formats">Differences between vector formats</h3>
<p>These formats correspond to different needs. The integral vector format provides the best performance gain. It will be chosen when the speed of decisional queries must be optimized.</p>
<p>In the case of a unique file, inserting new data will be limited but there will be only one open and close to do. However, the size of the table cannot be calculated from the file size because of the eventual unused space in the file. It must be kept in a header containing the maximum number of rows and the current number of valid rows in the table. To achieve this, specify the option Header=n when creating the table. If n=1 the header will be placed at the beginning of the file, if n=2 it will be a separate file with the type ‘.blk’, and if n=3 the header will be place at the end of the file. This last value is provided because batch inserting is sometimes slower when the header is at the beginning of the file. If not specified, the header option will default to 2 for this table type.</p>
<p>On the other hand, the "Split" format with separate files have none of these issues, and is a much safer solution when the table must frequently inserted or shared among several users.</p>
<p>The semi-vector format (VCT) can be used when the table must be in only one file but made progressively by successive inserts without size limitation, with somewhat reduced performance. This format is mainly kept to be compatible with tables files made with older versions of PlugDB.</p>
<p>In the integral vertical formats, the option BLOCK_SIZE=<em>n</em> is used for block reading and writing; however, to have a file made of blocks of equal size, the internal value of the MAX_ROWS=<em>m</em> option is eventually increased to become a multiple of <em>n</em>.</p>
<p>Like for BIN tables, numeric values are stored using platform internal layout, the correspondence between column types and internal format being the same than the default ones given above for BIN. However, field formats are not available for VEC tables.</p>
<h3 class="anchored_heading" id="header-option">Header Option</h3>
<p>This applies to not split VEC tables. Because the file size depends on the MAX_ROWS value, CONNECT cannot know how many valid records exist in the file. Depending on the value of the HEADER option, this information is stored in a header that can be placed at the beginning of the file, at the end of the file or in a separate file called fn.blk. The valid values for the HEADER option are:</p>
<table><tr><td>0</td><td>Defaults to 2 for standard tables and to 3 for inward tables.</td></tr>
<tr><td>1</td><td>The header is at the beginning of the file.</td></tr>
<tr><td>2</td><td>The header is in a separate file.</td></tr>
<tr><td>3</td><td>The header is at the end of the file.</td></tr>
</table>
<p>The value 2 can be used when dealing with files created by another application with no header. The value 3 makes sometimes inserting in the file faster than when the header is at the beginning of the file.</p>
<h2 class="anchored_heading" id="csv-and-fmt-table-types">CSV and FMT Table Types</h2>
<p>Many source data files are formatted with variable length fields and records.
The simplest format, known as <code>CSV</code> (Comma Separated Variables), has column
fields separated by a separator character. By default, the separator is a comma
but can be specified by the SEP_CHAR option as any character, for instance a
semi-colon.</p>
<p>If the CSV file first record is the list of column names, specifying the
<code>HEADER=1</code> option will skip the first record on reading. On writing, if the
file is empty, the column names record is automatically written.</p>
<p>For instance, given the following <em>people.csv</em> file:</p>
<pre class="fixed">Name;birth;children
&#34;Archibald&#34;;17/05/01;3
&#34;Nabucho&#34;;12/08/03;2
</pre><p>You can create the corresponding table by:</p>
<pre class="fixed"><span class="k">create</span> <span class="k">table</span> <span class="nf">people</span> <span class="p">(</span>
  <span class="n">name</span> <span class="kt">char</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span> <span class="k">not</span> <span class="no">null</span><span class="p">,</span>
  <span class="n">birth</span> <span class="kt">date</span> <span class="k">not</span> <span class="no">null</span> <span class="n">date_format</span><span class="o">=</span><span class="s1">&#39;DD/MM/YY&#39;</span><span class="p">,</span>
  <span class="n">children</span> <span class="kt">smallint</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="k">not</span> <span class="no">null</span><span class="p">)</span>
<span class="kp">engine</span><span class="o">=</span><span class="n">CONNECT</span> <span class="n">table_type</span><span class="o">=</span><span class="n">CSV</span> <span class="n">file_name</span><span class="o">=</span><span class="s1">&#39;people.csv&#39;</span>
<span class="n">header</span><span class="o">=</span><span class="mi">1</span> <span class="n">sep_char</span><span class="o">=</span><span class="s1">&#39;;&#39;</span> <span class="n">quoted</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span>
</pre><p>For CSV tables, the <em>flag</em> column option is the rank of the column into the file starting from 1 for the leftmost column. This is to enable having column displayed in a different order than in the file and/or to define the table specifying only some columns of the CSV file. For instance:</p>
<pre class="fixed"><span class="k">create</span> <span class="k">table</span> <span class="nf">people</span> <span class="p">(</span>
  <span class="n">name</span> <span class="kt">char</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span> <span class="k">not</span> <span class="no">null</span><span class="p">,</span>
  <span class="n">children</span> <span class="kt">smallint</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="k">not</span> <span class="no">null</span> <span class="n">flag</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
  <span class="n">birth</span> <span class="kt">date</span> <span class="k">not</span> <span class="no">null</span> <span class="n">flag</span><span class="o">=</span><span class="mi">2</span> <span class="n">date_format</span><span class="o">=</span><span class="s1">&#39;DD/MM/YY&#39;</span><span class="p">)</span>
<span class="kp">engine</span><span class="o">=</span><span class="n">CONNECT</span> <span class="n">table_type</span><span class="o">=</span><span class="n">CSV</span> <span class="n">file_name</span><span class="o">=</span><span class="s1">&#39;people.csv&#39;</span>
<span class="n">header</span><span class="o">=</span><span class="mi">1</span> <span class="n">sep_char</span><span class="o">=</span><span class="s1">&#39;;&#39;</span> <span class="n">quoted</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span>
</pre><p>In this case the command:</p>
<pre class="fixed"><span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">people</span><span class="p">;</span>
</pre><p>will display the table as:</p>
<div class="cstm-style darkheader-nospace-borders"><table><tr><th>name</th><th>children</th><th>birth</th></tr>
<tr><td>Archibald</td><td>3</td><td>2001-05-17</td></tr>
<tr><td>Nabucho</td><td>2</td><td>2003-08-12</td></tr>
</table>
</div><p>Many applications produce CSV files having some fields quoted, in particular
because the field text contains the separator character. For such files,
specify the 'QUOTED=<em>n</em>' option to indicate the level of quoting and/or
the '<code>QCHAR=c</code>' to specify what is this eventual quoting character, which is
" by default. Quoting with single quotes must be specified as <code>QCHAR=''''</code>.
On writing, fields will be quoted depending on the value of the quoting level,
which is –1 by default meaning no quoting:</p>
<table><tr><td>0</td><td>The fields between quotes are read and the quotes discarded. On writing, fields will be quoted only if they contain the separator character or begin with the quoting character. If they contain the quoting character, it will be doubled.</td></tr>
<tr><td>1</td><td>Only text fields will be written between quotes, except null fields. This includes also the column names of an eventual header.</td></tr>
<tr><td>2</td><td>All fields will be written between quotes, except null fields.</td></tr>
<tr><td>3</td><td>All fields will be written between quotes, including null fields.</td></tr>
</table>
<p>Files written this way are successfully read by most applications including spreadsheets.</p>
<p><strong>Note 1:</strong> If only the QCHAR option is specified, the QUOTED option will
default to 1.</p>
<p><strong>Note 2:</strong> For CSV tables whose separator is the tab character, specify
<code>sep_char='\t'</code>.</p>
<p><strong>Note 3:</strong> When creating a table on an existing CSV file, you can leave
CONNECT analyze the file and make the column description. However, this is a
not an elaborate analysis of the file and, for instance, <code>DATE</code> fields will
not be recognized as such but will be regarded as string fields.</p>
<h3 class="anchored_heading" id="fmt-type">FMT type</h3>
<p>FMT tables handle files of various formats that are an extension of the concept
of CSV files. CONNECT supports these files providing all lines have the same
format and that all fields present in all records are recognizable (optional
fields must have recognizable delimiters). These files are made by specific
application and CONNECT handle them in read only mode.</p>
<p>FMT tables must be created as CSV tables, specifying their type as FMT. In
addition, each column description must be added its format specification.</p>
<h3 class="anchored_heading" id="column-format-specification-of-fmt-tables">Column Format Specification of FMT tables</h3>
<p>The input format for each column is specified as a FIELD_FORMAT option. A
simple example is:</p>
<pre class="fixed"><span class="n">IP</span> <span class="kt">Char</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span> <span class="k">not</span> <span class="no">null</span> <span class="n">field_format</span><span class="o">=</span><span class="s1">&#39; %n%s%n&#39;</span><span class="p">,</span>
</pre><p>In the above example, the format for this (1st) field is <code>' %n%s%n'</code>. Note
that the blank character at the beginning of this format is significant. No
trailing blank should be specified in the column formats.</p>
<p>The syntax and meaning of the column input format is the one of the C <strong>scanf</strong>
function.</p>
<p>However, CONNECT uses the input format in a specific way. Instead of using it
to directly store the input value in the column buffer; it uses it to delimit
the sub string of the input record that contains the corresponding column
value. Retrieving this value is done later by the column functions as for
standard CSV files.</p>
<p>This is why all column formats are made of five components:</p>
<ol start="1"><li>An eventual description of what is met and ignored before the column value.
</li><li>A marker of the beginning of the column value written as %n.
</li><li>The format specification of the column value itself.
</li><li>A marker of the end of the column value written as %n (or %m for optional fields).
</li><li>An eventual description of what is met after the column value (not valid is %m was used).
</li></ol>
<p>For example, taking the file <em>funny.txt</em>:</p>
<pre class="fixed">12345,'BERTRAND',#200;5009.13
 56, 'POIROT-DELMOTTE' ,#4256 ;18009
345 ,'TRUCMUCHE' , #67; 19000.25
</pre><p>You can make a table <em>fmtsample</em> with 4 columns ID, NAME, DEPNO and SALARY, using the Create
Table statement and column formats:</p>
<pre class="fixed"><span class="k">create</span> <span class="k">table</span> <span class="nf">FMTSAMPLE</span> <span class="p">(</span>
  <span class="n">ID</span> <span class="kt">Integer</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="k">not</span> <span class="no">null</span> <span class="n">field_format</span><span class="o">=</span><span class="s1">&#39; %n%d%n&#39;</span><span class="p">,</span>
  <span class="n">NAME</span> <span class="kt">Char</span><span class="p">(</span><span class="mi">16</span><span class="p">)</span> <span class="k">not</span> <span class="no">null</span> <span class="n">field_format</span><span class="o">=</span><span class="s1">&#39; , &#39;&#39;%n%[^&#39;&#39;]%n&#39;&#39;&#39;</span><span class="p">,</span>
  <span class="n">DEPNO</span> <span class="kt">Integer</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span> <span class="k">not</span> <span class="no">null</span> <span class="n">field_format</span><span class="o">=</span><span class="s1">&#39; , #%n%d%n&#39;</span><span class="p">,</span>
  <span class="n">SALARY</span> <span class="kt">Double</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span> <span class="k">not</span> <span class="no">null</span> <span class="n">field_format</span><span class="o">=</span><span class="s1">&#39; ; %n%f%n&#39;</span><span class="p">)</span>
<span class="kp">Engine</span><span class="o">=</span><span class="n">CONNECT</span> <span class="n">table_type</span><span class="o">=</span><span class="n">FMT</span> <span class="n">file_name</span><span class="o">=</span><span class="s1">&#39;funny.txt&#39;</span><span class="p">;</span>
</pre><p><strong>Field 1</strong> is an integer (%d) with eventual leading blanks.</p>
<p><strong>Field 2</strong> is separated from field 1 by optional blanks, a comma, and other optional blanks and is between single quotes. The leading quote is included in component 1 of the column format, followed by the %n marker. The column value is specified as <code>%[^']</code> meaning to keep any characters read until a quote is met. The ending marker (%n) is followed by the 5th component of the column format, the single quote that follows the column value.</p>
<p><strong>Field 3,</strong> also separated by a comma, is a number preceded by a pound sign.</p>
<p><strong>Field 4,</strong> separated by a semicolon eventually surrounded by blanks, is a number with an optional decimal point (%f).</p>
<p>This table will be displayed as:</p>
<div class="cstm-style darkheader-nospace-borders"><table><tr><th>ID</th><th>NAME</th><th>DEPNO</th><th>SALARY</th></tr>
<tr><td>12345</td><td>BERTRAND</td><td>200</td><td>5009.13</td></tr>
<tr><td>56</td><td>POIROT-DELMOTTE</td><td>4256</td><td>18009.00</td></tr>
<tr><td>345</td><td>TRUCMUCHE</td><td>67</td><td>19000.25</td></tr>
</table>
</div><h3 class="anchored_heading" id="optional-fields">Optional Fields</h3>
<p>To be recognized, a field normally must be at least one character long. For instance, a numeric field must have at least one digit, or a character field cannot be void. However many existing files do not follow this format.</p>
<p>Let us suppose for instance that the preceding example file could be:</p>
<pre class="fixed">12345,'BERTRAND',#200;5009.13
 56, 'POIROT-DELMOTTE' ,# ;18009
345 ,'' , #67; 19000.25
</pre><p>This will display an error message such as “Bad format line x field y of FMTSAMPLE”. To avoid this and accept these records, the corresponding fields must be specified as "optional". In the above example, fields 2 and 3 can have null values (in lines 3 and 2 respectively). To specify them as optional, their format must be terminated by <code>%m</code> (instead of the second <code>%n</code>). A statement such as this can do the table creation:</p>
<pre class="fixed"><span class="k">create</span> <span class="k">table</span> <span class="nf">FMTAMPLE</span> <span class="p">(</span>
  <span class="n">ID</span> <span class="kt">Integer</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="k">not</span> <span class="no">null</span> <span class="n">field_format</span><span class="o">=</span><span class="s1">&#39; %n%d%n&#39;</span><span class="p">,</span>
  <span class="n">NAME</span> <span class="kt">Char</span><span class="p">(</span><span class="mi">16</span><span class="p">)</span> <span class="k">not</span> <span class="no">null</span> <span class="n">field_format</span><span class="o">=</span><span class="s1">&#39; , &#39;&#39;%n%[^&#39;&#39;]%m&#39;</span><span class="p">,</span>
  <span class="n">DEPNO</span> <span class="kt">Integer</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span> <span class="n">field_format</span><span class="o">=</span><span class="s1">&#39;&#39;&#39; , #%n%d%m&#39;</span><span class="p">,</span>
  <span class="n">SALARY</span> <span class="kt">Double</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span> <span class="n">field_format</span><span class="o">=</span><span class="s1">&#39; ; %n%f%n&#39;</span><span class="p">)</span>
<span class="kp">Engine</span><span class="o">=</span><span class="n">CONNECT</span> <span class="n">table_type</span><span class="o">=</span><span class="n">FMT</span> <span class="n">file_name</span><span class="o">=</span><span class="s1">&#39;funny.txt&#39;</span><span class="p">;</span>
</pre><p>Note that, because the statement must be terminated by %m with no additional characters, skipping the ending quote of field 2 was moved from the end of the second column format to the beginning of the third column format.</p>
<p>The table result is:</p>
<div class="cstm-style darkheader-nospace-borders"><table><tr><th>ID</th><th>NAME</th><th>DEPNO</th><th>SALARY</th></tr>
<tr><td>12345</td><td>BERTRAND</td><td>200</td><td>5,009.13</td></tr>
<tr><td>56</td><td>POIROT-DELMOTTE</td><td>NULL</td><td>18,009.00</td></tr>
<tr><td>345</td><td>NULL</td><td>67</td><td>19,000.25</td></tr>
</table>
</div><p>Missing fields are replaced by null values if the column is nullable, blanks for character strings and 0 for numeric fields if it is not.</p>
<p><strong>Note 1:</strong> Because the formats are specified between quotes, quotes belonging to the formats must be doubled to avoid a CREATE TABLE statement syntax error.</p>
<p><strong>Note 2:</strong> Characters separating columns can be included as well in component 5 of the preceding column format or in component 1 of the succeeding column format but for blanks, which should be always included in component 1 of the succeeding column format because line trailing blanks can be sometimes lost. This is also mandatory for optional fields.</p>
<p><strong>Note 3:</strong> Because the format is mainly used to find the sub-string corresponding to a column value, the field specification does not necessarily match the column type. For instance supposing a table contains two integer columns, NBONE and NBTWO, the two lines describing these columns could be:</p>
<pre class="fixed"><span class="n">NBONE</span> <span class="kt">integer</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="k">not</span> <span class="no">null</span> <span class="n">field_format</span><span class="o">=</span><span class="s1">&#39; %n%d%n&#39;</span><span class="p">,</span>
<span class="n">NBTWO</span> <span class="kt">integer</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="n">field_format</span><span class="o">=</span><span class="s1">&#39; %n%s%n&#39;</span><span class="p">,</span>
</pre><p>The first one specifies a required integer field (%d), the second line describes a field that can be an integer, but can be replaced by a "-" (or any other) character. Specifying the format specification for this column as a character field (%s) enables to recognize it with no error in all cases. Later on, this field will be converted to integer by the column read function, and a null 0 value will be generated for field specified in their format as non-numeric.</p>
<h3 class="anchored_heading" id="bad-record-error-processing">Bad record error processing</h3>
<p>When no match if found for a column field the process aborts with a message such as:</p>
<pre class="fixed">Bad format line 3 field 4 of funny.txt
</pre><p>This can mean as well that one line of the input line is ill formed or that the column format for this field has been wrongly specified. When you know that your file contains records that are ill formatted and should be eliminated from normal processing, set the “maxerr” option of the CREATE TABLE statement, for instance:</p>
<pre class="fixed"><span class="n">Option_list</span><span class="o">=</span><span class="s1">&#39;maxerr=100&#39;</span>
</pre><p>This will indicate that no error message be raised for the 100 first wrong lines. You can set Maxerr to a number greater than the number of wrong lines in your files to ignore them and get no errors.</p>
<p>Additionally, the “accept” option permit to keep those ill formatted lines with the bad field, and all succeeding fields of the record, nullified. If “accept” is specified without “maxerr”, all ill formatted lines will be accepted.</p>
<p><strong>Note:</strong> This error processing also applies to CSV tables.</p>
<h3 class="anchored_heading" id="fields-containing-a-formatted-date">Fields containing a formatted Date</h3>
<p>A special case is one of columns containing a formatted date. In this case, two formats must be
specified:</p>
<ol start="1"><li>The field recognition format used to delimit the date in the input record.
</li><li>The date format used to interpret the date.
</li><li>The field length option if the date representation is different than the standard type size.
</li></ol>
<p>For example, let us suppose we have a web log source file containing records such a:</p>
<pre class="fixed">165.91.215.31 - - [17/Jul/2001:00:01:13 -0400] - &#34;GET /usnews/home.htm HTTP/1.1&#34; 302
</pre><p>The create table statement shall be like this:</p>
<pre class="fixed"><span class="k">create</span> <span class="k">table</span> <span class="nf">WEBSAMP</span> <span class="p">(</span>
  <span class="n">IP</span> <span class="kt">char</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span> <span class="k">not</span> <span class="no">null</span> <span class="n">field_format</span><span class="o">=</span><span class="s1">&#39;%n%s%n&#39;</span><span class="p">,</span>
  <span class="kt">DATE</span> <span class="kt">datetime</span> <span class="k">not</span> <span class="no">null</span> <span class="n">field_format</span><span class="o">=</span><span class="s1">&#39; - - [%n%s%n -0400]&#39;</span>
  <span class="n">date_format</span><span class="o">=</span><span class="s1">&#39;DD/MMM/YYYY:hh:mm:ss&#39;</span> <span class="n">field_length</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span>
  <span class="n">FILE</span> <span class="kt">char</span><span class="p">(</span><span class="mi">128</span><span class="p">)</span> <span class="k">not</span> <span class="no">null</span> <span class="n">field_format</span><span class="o">=</span><span class="s1">&#39; - &quot;GET %n%s%n&#39;</span><span class="p">,</span>
  <span class="n">HTTP</span> <span class="kt">double</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span> <span class="k">not</span> <span class="no">null</span> <span class="n">field_format</span><span class="o">=</span><span class="s1">&#39; HTTP/%n%f%n&quot;&#39;</span><span class="p">,</span>
  <span class="n">NBONE</span> <span class="kt">int</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="k">not</span> <span class="no">null</span> <span class="n">field_format</span><span class="o">=</span><span class="s1">&#39; %n%d%n&#39;</span><span class="p">)</span>
<span class="kp">Engine</span><span class="o">=</span><span class="n">CONNECT</span> <span class="n">table_type</span><span class="o">=</span><span class="n">FMT</span> <span class="n">lrecl</span><span class="o">=</span><span class="mi">400</span>
<span class="n">file_name</span><span class="o">=</span><span class="s1">&#39;e:\\data\\token\\Websamp.dat&#39;</span><span class="p">;</span>
</pre><p><strong>Note 1:</strong> Here, <code>field_length=20</code> was necessary because the default size
for datetime columns is only 19. The <code>lrecl=400</code> was also specified because
the actual file contains more information in each records making the record
size calculated by default too small.</p>
<p><strong>Note 2:</strong> The file name could have been specified as
<code>'e:/data/token/Websamp.dat'</code>.</p>
<p><strong>Note 3:</strong> FMT tables are currently read only.</p>
<h2 class="anchored_heading" id="xml-table-type">XML Table Type</h2>
<p>CONNECT supports tables represented by XML files. For these tables, the
standard input/output functions of the operating system are not used but the
parsing and processing of the file is delegated to a specialized library.
Currently two such systems are supported: libxml2, a part of the GNOME
framework, but that does not require GNOME and, on Windows, MS-DOM (DOMDOC)
that is the Microsoft standard support of XML documents.</p>
<p>DOMDOC is the default for the Windows version of CONNECT and libxml2 is always
used on other systems. On Windows the choice can be specified using the XMLSUP
create table list option, for instance specifying
<code>option_list='xmlsup=libxml2'</code>.</p>
<h3 class="anchored_heading" id="creating-xml-tables">Creating XML tables</h3>
<p>First of all, it must be understood that XML is a very general language used to
encode data having any structure. In particular, the tag hierarchy in an XML
file describes a tree structure of the data. For instance, consider the file:</p>
<pre class="fixed"><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;ISO-8859-1&quot;?&gt;</span>
<span class="nt">&lt;BIBLIO</span> <span class="na">SUBJECT=</span><span class="s">&quot;XML&quot;</span><span class="nt">&gt;</span>
   <span class="nt">&lt;BOOK</span> <span class="na">ISBN=</span><span class="s">&quot;9782212090819&quot;</span> <span class="na">LANG=</span><span class="s">&quot;fr&quot;</span> <span class="na">SUBJECT=</span><span class="s">&quot;applications&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;AUTHOR&gt;</span>
         <span class="nt">&lt;FIRSTNAME&gt;</span>Jean-Christophe<span class="nt">&lt;/FIRSTNAME&gt;</span>
         <span class="nt">&lt;LASTNAME&gt;</span>Bernadac<span class="nt">&lt;/LASTNAME&gt;</span>
      <span class="nt">&lt;/AUTHOR&gt;</span>
      <span class="nt">&lt;AUTHOR&gt;</span>
         <span class="nt">&lt;FIRSTNAME&gt;</span>François<span class="nt">&lt;/FIRSTNAME&gt;</span>
         <span class="nt">&lt;LASTNAME&gt;</span>Knab<span class="nt">&lt;/LASTNAME&gt;</span>
      <span class="nt">&lt;/AUTHOR&gt;</span>
      <span class="nt">&lt;TITLE&gt;</span>Construire une application XML<span class="nt">&lt;/TITLE&gt;</span>
      <span class="nt">&lt;PUBLISHER&gt;</span>
         <span class="nt">&lt;NAME&gt;</span>Eyrolles<span class="nt">&lt;/NAME&gt;</span>
         <span class="nt">&lt;PLACE&gt;</span>Paris<span class="nt">&lt;/PLACE&gt;</span>
      <span class="nt">&lt;/PUBLISHER&gt;</span>
      <span class="nt">&lt;DATEPUB&gt;</span>1999<span class="nt">&lt;/DATEPUB&gt;</span>
   <span class="nt">&lt;/BOOK&gt;</span>
   <span class="nt">&lt;BOOK</span> <span class="na">ISBN=</span><span class="s">&quot;9782840825685&quot;</span> <span class="na">LANG=</span><span class="s">&quot;fr&quot;</span> <span class="na">SUBJECT=</span><span class="s">&quot;applications&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;AUTHOR&gt;</span>
         <span class="nt">&lt;FIRSTNAME&gt;</span>William J.<span class="nt">&lt;/FIRSTNAME&gt;</span>
         <span class="nt">&lt;LASTNAME&gt;</span>Pardi<span class="nt">&lt;/LASTNAME&gt;</span>
      <span class="nt">&lt;/AUTHOR&gt;</span>
      <span class="nt">&lt;TRANSLATOR</span> <span class="na">PREFIX=</span><span class="s">&quot;adapté de l&#39;anglais par&quot;</span><span class="nt">&gt;</span>
         <span class="nt">&lt;FIRSTNAME&gt;</span>James<span class="nt">&lt;/FIRSTNAME&gt;</span>
         <span class="nt">&lt;LASTNAME&gt;</span>Guerin<span class="nt">&lt;/LASTNAME&gt;</span>
      <span class="nt">&lt;/TRANSLATOR&gt;</span>
      <span class="nt">&lt;TITLE&gt;</span>XML en Action<span class="nt">&lt;/TITLE&gt;</span>
      <span class="nt">&lt;PUBLISHER&gt;</span>
         <span class="nt">&lt;NAME&gt;</span>Microsoft Press<span class="nt">&lt;/NAME&gt;</span>
         <span class="nt">&lt;PLACE&gt;</span>Paris<span class="nt">&lt;/PLACE&gt;</span>
      <span class="nt">&lt;/PUBLISHER&gt;</span>
      <span class="nt">&lt;DATEPUB&gt;</span>1999<span class="nt">&lt;/DATEPUB&gt;</span>
   <span class="nt">&lt;/BOOK&gt;</span>
<span class="nt">&lt;/BIBLIO&gt;</span>
</pre><p>It represents data having the structure:</p>
<pre class="fixed">                               &lt;BIBLIO&gt;
                        __________|_________
                       |                    |
            &lt;BOOK:ISBN,LANG,SUBJECT&gt;        |
         ______________|_______________     |
        |        |         |           |    |
     &lt;AUTHOR&gt; &lt;TITLE&gt; &lt;PUBLISHER&gt; &lt;DATEPUB&gt; |
    ____|____            ___|____           |
   |    |    |          |        |          |
&lt;FIRST&gt; | &lt;LAST&gt;     &lt;NAME&gt;   &lt;PLACE&gt;       |
        |                                   |
     &lt;AUTHOR&gt;                   &lt;BOOK:ISBN,LANG,SUBJECT&gt;
    ____|____         ______________________|__________________
   |         |       |            |         |        |         |
&lt;FIRST&gt;   &lt;LAST&gt;  &lt;AUTHOR&gt; &lt;TRANSLATOR&gt; &lt;TITLE&gt; &lt;PUBLISHER&gt; &lt;DATEPUB&gt;
                _____|_        ___|___            ___|____
               |       |      |       |          |        |
            &lt;FIRST&gt; &lt;LAST&gt; &lt;FIRST&gt; &lt;LAST&gt;     &lt;NAME&gt;   &lt;PLACE&gt;
</pre><p>This structure seems at first view far from being tabular. However, modern
database management systems, including MySQL, implement something close to the
relational model and work on tables that are structurally not hierarchical but
tabular with rows and columns.</p>
<p>Nevertheless, CONNECT can do it. Of course, it cannot guess what you want to extract from the XML
structure, but gives you the possibility to specify it when you create the table<sup class="reference" id="_ref-2">[<a href="#_note-2">3</a>]</sup>.</p>
<p>Let us take a first example. Suppose you want to make a table from the above
document, displaying the node contains.</p>
<p>For this, you can define a table <em>xsamptag</em> as:</p>
<pre class="fixed"><span class="k">create</span> <span class="k">table</span> <span class="nf">xsamptag</span> <span class="p">(</span>
  <span class="n">AUTHOR</span> <span class="kt">char</span><span class="p">(</span><span class="mi">50</span><span class="p">),</span>
  <span class="n">TITLE</span> <span class="kt">char</span><span class="p">(</span><span class="mi">32</span><span class="p">),</span>
  <span class="n">TRANSLATOR</span> <span class="kt">char</span><span class="p">(</span><span class="mi">40</span><span class="p">),</span>
  <span class="n">PUBLISHER</span> <span class="kt">char</span><span class="p">(</span><span class="mi">40</span><span class="p">),</span>
  <span class="n">DATEPUB</span> <span class="kt">int</span><span class="p">(</span><span class="mi">4</span><span class="p">))</span>
<span class="kp">engine</span><span class="o">=</span><span class="n">CONNECT</span> <span class="n">table_type</span><span class="o">=</span><span class="n">XML</span> <span class="n">file_name</span><span class="o">=</span><span class="s1">&#39;Xsample.xml&#39;</span><span class="p">;</span>
</pre><p>It will be displayed as:</p>
<div class="cstm-style darkheader-nospace-borders"><table><tr><th>AUTHOR</th><th>TITLE</th><th>TRANSLATOR</th><th>PUBLISHER</th><th>DATEPUB</th></tr>
<tr><td>Jean-Christophe Bernadac</td><td>Construire une application XML</td><td></td><td>Eyrolles Paris</td><td>1999</td></tr>
<tr><td>William J. Pardi</td><td>XML en Action</td><td>James Guerin</td><td>Microsoft Press Paris</td><td>1999</td></tr>
</table>
</div><p>Let us try to understand what happened. By default the columns names correspond to tag names.
Because this file is rather simple, CONNECT was able to default the top tag of the table as the root
node &lt;BIBLIO&gt; of the file, and the row tags as the &lt;BOOK&gt; children of the table tag. In a more complex
file, this should have been specified, as we will see later. Note that we had not to worry about the sub-
tags such as &lt;FIRSTNAME&gt; or &lt;LASTNAME&gt; because CONNECT automatically retrieves the entire text
contained in a tag and its sub-tags<sup class="reference" id="_ref-3">[<a href="#_note-3">4</a>]</sup>.</p>
<div class="cstm-style bluebox"><p>Only the first author of the first book appears. This is because only the first occurrence of a column tag has been retrieved so the result has a proper tabular structure. We will see later what we can do about that.</p>
</div><p>How can we retrieve the values specified by attributes? By using a Coltype
table option to specify the default column type. The values ‘@’ means that
column names match attribute names. Therefore, we can retrieve them by creating
a table such as:</p>
<pre class="fixed"><span class="k">create</span> <span class="k">table</span> <span class="nf">xsampattr</span> <span class="p">(</span>
  <span class="n">ISBN</span> <span class="kt">char</span><span class="p">(</span><span class="mi">15</span><span class="p">),</span>
  <span class="n">LANG</span> <span class="kt">char</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span>
  <span class="n">SUBJECT</span> <span class="kt">char</span><span class="p">(</span><span class="mi">32</span><span class="p">))</span>
<span class="kp">engine</span><span class="o">=</span><span class="n">CONNECT</span> <span class="n">table_type</span><span class="o">=</span><span class="n">XML</span> <span class="n">file_name</span><span class="o">=</span><span class="s1">&#39;Xsample.xml&#39;</span>
<span class="n">option_list</span><span class="o">=</span><span class="s1">&#39;Coltype=@&#39;</span><span class="p">;</span>
</pre><p>This table gives the following display:</p>
<div class="cstm-style darkheader-nospace-borders"><table><tr><th>ISBN</th><th>LANG</th><th>SUBJECT</th></tr>
<tr><td>9782212090819</td><td>fr</td><td>applications</td></tr>
<tr><td>9782840825685</td><td>fr</td><td>applications</td></tr>
</table>
</div><p>Now to define a table that will give us all the previous information, we must specify the column type for each column. Because in the next statement the column type defaults to Node, the field_format column parameter was used to indicate which columns are attributes:</p>
<pre class="fixed"><span class="k">create</span> <span class="k">table</span> <span class="nf">xsamp</span> <span class="p">(</span>
  <span class="n">ISBN</span> <span class="kt">char</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span> <span class="n">field_format</span><span class="o">=</span><span class="s1">&#39;@&#39;</span><span class="p">,</span>
  <span class="n">LANG</span> <span class="kt">char</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="n">field_format</span><span class="o">=</span><span class="s1">&#39;@&#39;</span><span class="p">,</span>
  <span class="n">SUBJECT</span> <span class="kt">char</span><span class="p">(</span><span class="mi">32</span><span class="p">)</span> <span class="n">field_format</span><span class="o">=</span><span class="s1">&#39;@&#39;</span><span class="p">,</span>
  <span class="n">AUTHOR</span> <span class="kt">char</span><span class="p">(</span><span class="mi">50</span><span class="p">),</span>
  <span class="n">TITLE</span> <span class="kt">char</span><span class="p">(</span><span class="mi">32</span><span class="p">),</span>
  <span class="n">TRANSLATOR</span> <span class="kt">char</span><span class="p">(</span><span class="mi">40</span><span class="p">),</span>
  <span class="n">PUBLISHER</span> <span class="kt">char</span><span class="p">(</span><span class="mi">40</span><span class="p">),</span>
  <span class="n">DATEPUB</span> <span class="kt">int</span><span class="p">(</span><span class="mi">4</span><span class="p">))</span>
<span class="kp">engine</span><span class="o">=</span><span class="n">CONNECT</span> <span class="n">table_type</span><span class="o">=</span><span class="n">XML</span> <span class="n">file_name</span><span class="o">=</span><span class="s1">&#39;Xsample.xml&#39;</span>
<span class="n">tabname</span><span class="o">=</span><span class="s1">&#39;BIBLIO&#39;</span> <span class="n">option_list</span><span class="o">=</span><span class="s1">&#39;rownode=BOOK&#39;</span><span class="p">;</span>
</pre><p>Once done, we can enter the query:</p>
<pre class="fixed"><span class="k">select</span> <span class="n">subject</span><span class="p">,</span> <span class="n">lang</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">author</span> <span class="k">from</span> <span class="n">xsamp</span><span class="p">;</span>
</pre><p>This will return the result:</p>
<div class="cstm-style darkheader-nospace-borders"><table><tr><th>SUBJECT</th><th>LANG</th><th>TITLE</th><th>AUTHOR</th></tr>
<tr><td>applications</td><td>fr</td><td>Construire une application XML</td><td>Jean-Christophe Bernadac</td></tr>
<tr><td>applications</td><td>fr</td><td>XML en Action</td><td>William J. Pardi</td></tr>
</table>
</div><p>Note that we have been lucky. Because unlike SQL, XML is case sensitive and the column names have matched the node names only because column names were given in upper case. Note also that the order of the columns in the table could have been different from the order in which the nodes appear in the XML file.</p>
<h3 class="anchored_heading" id="using-xpaths-with-xml-tables">Using Xpath’s with XML tables</h3>
<p>The field_format options we used above can be specified to locate more precisely where and what is the information to retrieve using an Xpath-like syntax. For instance:</p>
<pre class="fixed"><span class="k">create</span> <span class="k">table</span> <span class="nf">xsampall</span> <span class="p">(</span>
  <span class="n">isbn</span> <span class="kt">char</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span> <span class="n">field_format</span><span class="o">=</span><span class="s1">&#39;@ISBN&#39;</span><span class="p">,</span>
  <span class="n">language</span> <span class="kt">char</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="n">field_format</span><span class="o">=</span><span class="s1">&#39;@LANG&#39;</span><span class="p">,</span>
  <span class="n">subject</span> <span class="kt">char</span><span class="p">(</span><span class="mi">32</span><span class="p">)</span> <span class="n">field_format</span><span class="o">=</span><span class="s1">&#39;@SUBJECT&#39;</span><span class="p">,</span>
  <span class="n">authorfn</span> <span class="kt">char</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="n">field_format</span><span class="o">=</span><span class="s1">&#39;AUTHOR/FIRSTNAME&#39;</span><span class="p">,</span>
  <span class="n">authorln</span> <span class="kt">char</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="n">field_format</span><span class="o">=</span><span class="s1">&#39;AUTHOR/LASTNAME&#39;</span><span class="p">,</span>
  <span class="n">title</span> <span class="kt">char</span><span class="p">(</span><span class="mi">32</span><span class="p">)</span> <span class="n">field_format</span><span class="o">=</span><span class="s1">&#39;TITLE&#39;</span><span class="p">,</span>
  <span class="n">translated</span> <span class="kt">char</span><span class="p">(</span><span class="mi">32</span><span class="p">)</span> <span class="n">field_format</span><span class="o">=</span><span class="s1">&#39;TRANSLATOR/@PREFIX&#39;</span><span class="p">,</span>
  <span class="n">tranfn</span> <span class="kt">char</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="n">field_format</span><span class="o">=</span><span class="s1">&#39;TRANSLATOR/FIRSTNAME&#39;</span><span class="p">,</span>
  <span class="n">tranln</span> <span class="kt">char</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="n">field_format</span><span class="o">=</span><span class="s1">&#39;TRANSLATOR/LASTNAME&#39;</span><span class="p">,</span>
  <span class="n">publisher</span> <span class="kt">char</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="n">field_format</span><span class="o">=</span><span class="s1">&#39;PUBLISHER/NAME&#39;</span><span class="p">,</span>
  <span class="n">location</span> <span class="kt">char</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="n">field_format</span><span class="o">=</span><span class="s1">&#39;PUBLISHER/PLACE&#39;</span><span class="p">,</span>
  <span class="kt">year</span> <span class="kt">int</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span> <span class="n">field_format</span><span class="o">=</span><span class="s1">&#39;DATEPUB&#39;</span><span class="p">)</span>
<span class="kp">engine</span><span class="o">=</span><span class="n">CONNECT</span> <span class="n">table_type</span><span class="o">=</span><span class="n">XML</span> <span class="n">file_name</span><span class="o">=</span><span class="s1">&#39;Xsample.xml&#39;</span>
<span class="n">tabname</span><span class="o">=</span><span class="s1">&#39;BIBLIO&#39;</span> <span class="n">option_list</span><span class="o">=</span><span class="s1">&#39;rownode=BOOK,skipnull=1&#39;</span><span class="p">;</span>
</pre><p>This very flexible column parameter serves several purposes:</p>
<ul start="1"><li>To specify the tag name, or the attribute name if different from the column name.
</li><li>To specify the type (tag or attribute) by a prefix of '@' for attributes.
</li><li>To specify the path for sub-tags using the '/' character.
</li></ul>
<p>This path is always relative to the current context (the column top node) and
cannot be specified as an absolute path from the document root, therefore a
leading '/' cannot be used. The path cannot be variable in node names or depth,
therefore using '<code>//</code>' is not allowed.</p>
<p>The query:</p>
<pre class="fixed"><span class="k">select</span> <span class="n">isbn</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">translated</span><span class="p">,</span> <span class="n">tranfn</span><span class="p">,</span> <span class="n">tranln</span><span class="p">,</span> <span class="n">location</span> <span class="k">from</span>
    <span class="n">xsampall</span> <span class="k">where</span> <span class="n">translated</span> <span class="o">&lt;&gt;</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
</pre><p>Replies:</p>
<div class="cstm-style darkheader-nospace-borders"><table><tr><th>ISBN</th><th>TITLE</th><th>TRANSLATED</th><th>TRANFN</th><th>TRANLN</th><th>LOCATION</th></tr>
<tr><td>9782840825685</td><td>XML en Action</td><td>adapté de l'anglais par</td><td>James</td><td>Guerin</td><td>Paris</td></tr>
</table>
</div><h3 class="anchored_heading" id="direct-access-on-xml-tables">Direct access on XML tables</h3>
<p>Direct access is available on XML tables. This means that XML tables can be sorted and used in joins, even in the one-side of the join.</p>
<p>However, building a permanent index is not implemented yet. It is not sure that this can be useful. Indeed, the Windows DOM implementation when used to access these tables firstly parses the whole file and constructs a node tree in memory. This may be often the longest part of the process, so the use of index or block optimization would not be of great value. Note also that this restrict the XML files to be of a reasonable size. Anyway, when speed is important, this table type is not the best to use. Therefore, in these cases, it is probably better to convert the file to another type by inserting the XML table in another table of a more appropriate type concerning performance.</p>
<h3 class="anchored_heading" id="write-operations-on-xml-tables">Write operations on XML tables</h3>
<p>You can freely use the Update, Delete and Insert commands with XML table. However, you must
understand that the format of the updated or inserted data follows the specifications of the table you created, not the ones of the original source file. For instance, let us suppose we insert a new book using the <em>xsamp</em> table (not the xsampall table) with the command:</p>
<pre class="fixed"><span class="k">insert</span> <span class="k">into</span> <span class="nf">xsamp</span>
  <span class="p">(</span><span class="n">isbn</span><span class="p">,</span> <span class="n">lang</span><span class="p">,</span> <span class="n">subject</span><span class="p">,</span> <span class="n">author</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">publisher</span><span class="p">,</span><span class="n">datepub</span><span class="p">)</span>
  <span class="k">values</span> <span class="p">(</span><span class="s1">&#39;9782212090529&#39;</span><span class="p">,</span><span class="s1">&#39;fr&#39;</span><span class="p">,</span><span class="s1">&#39;général&#39;</span><span class="p">,</span><span class="s1">&#39;Alain Michard&#39;</span><span class="p">,</span>
         <span class="s1">&#39;XML, Langage et Applications&#39;</span><span class="p">,</span><span class="s1">&#39;Eyrolles Paris&#39;</span><span class="p">,</span><span class="mi">1998</span><span class="p">);</span>
</pre><p>Then if we ask:</p>
<pre class="fixed"><span class="k">select</span> <span class="n">subject</span><span class="p">,</span> <span class="n">author</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">translator</span><span class="p">,</span> <span class="n">publisher</span> <span class="k">from</span> <span class="n">xsamp</span><span class="p">;</span>
</pre><p>Everything seems correct when we get the result:</p>
<div class="cstm-style darkheader-nospace-borders"><table><tr><th>SUBJECT</th><th>AUTHOR</th><th>TITLE</th><th>TRANSLATOR</th><th>PUBLISHER</th></tr>
<tr><td>applications</td><td>Jean-Christophe Bernadac</td><td>Construire une application XML</td><td></td><td>Eyrolles Paris</td></tr>
<tr><td>applications</td><td>William J. Pardi</td><td>XML en Action</td><td>James Guerin</td><td>Microsoft Press Paris</td></tr>
<tr><td>général</td><td>Alain Michard</td><td>XML, Langage et Applications</td><td></td><td>Eyrolles Paris</td></tr>
</table>
</div><p>However if we enter the apparently equivalent query on the xsampall table, based on the same file:</p>
<pre class="fixed"><span class="k">select</span> <span class="n">subject</span><span class="p">,</span>
<span class="nf">concat</span><span class="p">(</span><span class="n">authorfn</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="n">authorln</span><span class="p">)</span> <span class="n">author</span> <span class="p">,</span> <span class="n">title</span><span class="p">,</span>
<span class="nf">concat</span><span class="p">(</span><span class="n">tranfn</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="n">tranln</span><span class="p">)</span> <span class="n">translator</span><span class="p">,</span>
<span class="nf">concat</span><span class="p">(</span><span class="n">publisher</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="n">location</span><span class="p">)</span> <span class="n">publisher</span> <span class="k">from</span> <span class="n">xsampall</span><span class="p">;</span>
</pre><p>This will return an apparently wrong answer:</p>
<div class="cstm-style darkheader-nospace-borders"><table><tr><th>SUBJECT</th><th>AUTHOR</th><th>TITLE</th><th>TRANSLATOR</th><th>PUBLISHER</th></tr>
<tr><td>applications</td><td>Jean-Christophe Bernadac</td><td>Construire une application XML</td><td></td><td>Eyrolles Paris</td></tr>
<tr><td>applications</td><td>William J. Pardi</td><td>XML en Action</td><td>James Guerin</td><td>Microsoft Press Paris</td></tr>
<tr><td>général</td><td></td><td>XML, Langage et Applications</td><td></td><td></td></tr>
</table>
</div><p>What happened here? Simply, because we used the <em>xsamp</em> table to do the Insert, what has been inserted within the XML file had the structure described for <em>xsamp</em>:</p>
<pre class="fixed">   <span class="nt">&lt;BOOK</span> <span class="na">ISBN=</span><span class="s">&quot;9782212090529&quot;</span> <span class="na">LANG=</span><span class="s">&quot;fr&quot;</span> <span class="na">SUBJECT=</span><span class="s">&quot;général&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;AUTHOR&gt;</span>Alain Michard<span class="nt">&lt;/AUTHOR&gt;</span>
      <span class="nt">&lt;TITLE&gt;</span>XML, Langage et Applications<span class="nt">&lt;/TITLE&gt;</span>
      <span class="nt">&lt;TRANSLATOR&gt;&lt;/TRANSLATOR&gt;</span>
      <span class="nt">&lt;PUBLISHER&gt;</span>Eyrolles Paris<span class="nt">&lt;/PUBLISHER&gt;</span>
      <span class="nt">&lt;DATEPUB&gt;</span>1998<span class="nt">&lt;/DATEPUB&gt;</span>
   <span class="nt">&lt;/BOOK&gt;</span>
</pre><p>CONNECT cannot "invent" sub-tags that are not part of the <em>xsamp</em> table. Because these sub-tags do not exist, the <em>xsampall</em> table cannot retrieve the information that should be attached to them. If we want to be able to query the XML file by all the defined tables, the correct way to insert a new book to the file is to use the <em>xsampall</em> table, the only one that addresses all the components of the original document:</p>
<pre class="fixed"><span class="k">delete</span> <span class="k">from</span> <span class="n">xsamp</span> <span class="k">where</span> <span class="n">isbn</span> <span class="o">=</span> <span class="s1">&#39;9782212090529&#39;</span><span class="p">;</span>

<span class="k">insert</span> <span class="k">into</span> <span class="nf">xsampall</span> <span class="p">(</span><span class="n">isbn</span><span class="p">,</span> <span class="n">language</span><span class="p">,</span> <span class="n">subject</span><span class="p">,</span> <span class="n">authorfn</span><span class="p">,</span> <span class="n">authorln</span><span class="p">,</span>
      <span class="n">title</span><span class="p">,</span> <span class="n">publisher</span><span class="p">,</span> <span class="n">location</span><span class="p">,</span> <span class="kt">year</span><span class="p">)</span>
   <span class="k">values</span><span class="p">(</span><span class="s1">&#39;9782212090529&#39;</span><span class="p">,</span><span class="s1">&#39;fr&#39;</span><span class="p">,</span><span class="s1">&#39;général&#39;</span><span class="p">,</span><span class="s1">&#39;Alain&#39;</span><span class="p">,</span><span class="s1">&#39;Michard&#39;</span><span class="p">,</span>
      <span class="s1">&#39;XML, Langage et Applications&#39;</span><span class="p">,</span><span class="s1">&#39;Eyrolles&#39;</span><span class="p">,</span><span class="s1">&#39;Paris&#39;</span><span class="p">,</span><span class="mi">1998</span><span class="p">);</span>
</pre><p>Now the added book, in the XML file, will have the required structure:</p>
<pre class="fixed">   <span class="nt">&lt;BOOK</span> <span class="na">ISBN=</span><span class="s">&quot;9782212090529&quot;</span> <span class="na">LANG=</span><span class="s">&quot;fr&quot;</span> <span class="na">SUBJECT=</span><span class="s">&quot;général&quot;</span>
      <span class="err">&lt;AUTHOR</span><span class="nt">&gt;</span>
         <span class="nt">&lt;FIRSTNAME&gt;</span>Alain<span class="nt">&lt;/FIRSTNAME&gt;</span>
         <span class="nt">&lt;LASTNAME&gt;</span>Michard<span class="nt">&lt;/LASTNAME&gt;</span>
      <span class="nt">&lt;/AUTHOR&gt;</span>
      <span class="nt">&lt;TITLE&gt;</span>XML, Langage et Applications<span class="nt">&lt;/TITLE&gt;</span>
      <span class="nt">&lt;PUBLISHER&gt;</span>
         <span class="nt">&lt;NAME&gt;</span>Eyrolles<span class="nt">&lt;/NAME&gt;</span>
         <span class="nt">&lt;PLACE&gt;</span>Paris<span class="nt">&lt;/PLACE&gt;</span>
      <span class="nt">&lt;/PUBLISHER&gt;</span>
      <span class="nt">&lt;DATEPUB&gt;</span>1998<span class="nt">&lt;/DATEPUB&gt;</span>
   <span class="nt">&lt;/BOOK&gt;</span>
</pre><p><strong>Note:</strong> We used a column list in the Insert statements, along with specifying
‘skipnull=1’ when creating the table, to avoid generating a &lt;TRANSLATOR&gt; node
with sub-nodes, all containing null values (this works on Windows only).</p>
<h3 class="anchored_heading" id="multiple-nodes-in-the-xml-document">Multiple Nodes in the XML Document</h3>
<p>Let us come back to the above example XML file. We have seen that the author
node can be "multiple" meaning that there can be more than one author of a
book. What can we do to get the complete information fitting the relational
model? CONNECT provides you with two possibilities, but restricted to only one
such multiple node per table.</p>
<p>The first and most challenging one is to return as many rows than there are
authors, the other columns being repeated as if we had make a join between the
author column and the rest of the table. To achieve this, simply specify the
“multiple” node name and the “expand” option when creating the table. For
instance, we can create the xsamp2 table like this:</p>
<pre class="fixed"><span class="k">create</span> <span class="k">table</span> <span class="nf">xsamp2</span> <span class="p">(</span>
  <span class="n">ISBN</span> <span class="kt">char</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span> <span class="n">field_format</span><span class="o">=</span><span class="s1">&#39;@&#39;</span><span class="p">,</span>
  <span class="n">LANG</span> <span class="kt">char</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="n">field_format</span><span class="o">=</span><span class="s1">&#39;@&#39;</span><span class="p">,</span>
  <span class="n">SUBJECT</span> <span class="kt">char</span><span class="p">(</span><span class="mi">32</span><span class="p">)</span> <span class="n">field_format</span><span class="o">=</span><span class="s1">&#39;@&#39;</span><span class="p">,</span>
  <span class="n">AUTHOR</span> <span class="kt">char</span><span class="p">(</span><span class="mi">40</span><span class="p">),</span>
  <span class="n">TITLE</span> <span class="kt">char</span><span class="p">(</span><span class="mi">32</span><span class="p">),</span>
  <span class="n">TRANSLATOR</span> <span class="kt">char</span><span class="p">(</span><span class="mi">32</span><span class="p">),</span>
  <span class="n">PUBLISHER</span> <span class="kt">char</span><span class="p">(</span><span class="mi">32</span><span class="p">),</span>
  <span class="n">DATEPUB</span> <span class="kt">int</span><span class="p">(</span><span class="mi">4</span><span class="p">))</span>
<span class="kp">engine</span><span class="o">=</span><span class="n">CONNECT</span> <span class="n">table_type</span><span class="o">=</span><span class="n">XML</span> <span class="n">file_name</span><span class="o">=</span><span class="s1">&#39;Xsample.xml&#39;</span>
<span class="n">tabname</span><span class="o">=</span><span class="s1">&#39;BIBLIO&#39;</span>
<span class="n">option_list</span><span class="o">=</span><span class="s1">&#39;rownode=BOOK,Expand=1,Mulnode=AUTHOR,Limit=2&#39;</span><span class="p">;</span>
</pre><p>In this statement, the Limit option is a ceiling estimate of the average number of author per book that enables CONNECT to calculate the maximum size of the table. If not specified you are likely to have your result truncated by the internally recalculated table size value. Then you can enter a query such as:</p>
<pre class="fixed"><span class="k">select</span> <span class="n">isbn</span><span class="p">,</span> <span class="n">subject</span><span class="p">,</span> <span class="n">author</span><span class="p">,</span> <span class="n">title</span> <span class="k">from</span> <span class="n">xsamp2</span><span class="p">;</span>
</pre><p>This will retrieve and display the following result:</p>
<div class="cstm-style darkheader-nospace-borders"><table><tr><th>ISBN</th><th>SUBJECT</th><th>AUTHOR</th><th>TITLE</th></tr>
<tr><td>9782212090819</td><td>applications</td><td>Jean-Christophe Bernadac</td><td>Construire une application XML</td></tr>
<tr><td>9782212090819</td><td>applications</td><td>François Knab</td><td>Construire une application XML</td></tr>
<tr><td>9782840825685</td><td>applications</td><td>William J. Pardi</td><td>XML en Action</td></tr>
<tr><td>9782212090529</td><td>général</td><td>Alain Michard</td><td>XML, Langage et Applications</td></tr>
</table>
</div><p>In this case, this is as if the table had four rows. However if we enter the query:</p>
<pre class="fixed"><span class="k">select</span> <span class="n">isbn</span><span class="p">,</span> <span class="n">subject</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">publisher</span> <span class="k">from</span> <span class="n">xsamp2</span><span class="p">;</span>
</pre><p>This time the result will be:</p>
<div class="cstm-style darkheader-nospace-borders"><table><tr><th>ISBN</th><th>SUBJECT</th><th>TITLE</th><th>PUBLISHER</th></tr>
<tr><td>9782212090819</td><td>applications</td><td>Construire une application XML</td><td>Eyrolles Paris</td></tr>
<tr><td>9782840825685</td><td>applications</td><td>XML en Action</td><td>Microsoft Press Paris</td></tr>
<tr><td>9782212090529</td><td>général</td><td>XML, Langage et Applications</td><td>Eyrolles Paris</td></tr>
</table>
</div><p>Because the author column does not appear in the query, the corresponding row was not expanded.
This is somewhat strange because this would have been different if we had been working on a table of a different type. However, it is closer to the relational model for which there should not be two identical rows (tuples) in a table. Nevertheless, you should be aware of this somewhat erratic behavior. For instance:</p>
<pre class="fixed"><span class="k">select</span> <span class="nf">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">from</span> <span class="n">xsamp2</span><span class="p">;</span>                <span class="cm">/* Replies 4 */</span>
<span class="k">select</span> <span class="nf">count</span><span class="p">(</span><span class="n">author</span><span class="p">)</span> <span class="k">from</span> <span class="n">xsamp2</span><span class="p">;</span>           <span class="cm">/* Replies 4 */</span>
<span class="k">select</span> <span class="nf">count</span><span class="p">(</span><span class="n">isbn</span><span class="p">)</span> <span class="k">from</span> <span class="n">xsamp2</span><span class="p">;</span>             <span class="cm">/* Replies 3 */</span>
<span class="k">select</span> <span class="n">isbn</span><span class="p">,</span> <span class="n">subject</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">publisher</span> <span class="k">from</span> <span class="n">xsamp2</span> <span class="k">where</span> <span class="n">author</span> <span class="o">&lt;&gt;</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
</pre><p>This last query replies:</p>
<div class="cstm-style darkheader-nospace-borders"><table><tr><th>ISBN</th><th>SUBJECT</th><th>TITLE</th><th>PUBLISHER</th></tr>
<tr><td>9782212090819</td><td>applications</td><td>Construire une application XML</td><td>Eyrolles Paris</td></tr>
<tr><td>9782212090819</td><td>applications</td><td>Construire une application XML</td><td>Eyrolles Paris</td></tr>
<tr><td>9782840825685</td><td>applications</td><td>XML en Action</td><td>Microsoft Press Paris</td></tr>
<tr><td>9782212090529</td><td>général</td><td>XML, Langage et Applications</td><td>Eyrolles Paris</td></tr>
</table>
</div><p>Even the author column does not appear in the result, the corresponding row was expanded because the multiple column was used in the where clause.</p>
<h3 class="anchored_heading" id="intermediate-multiple-node">Intermediate Multiple Node</h3>
<p>The "multiple" node can be an intermediate node. If we want to do the same expanding with the <em>xsampall</em> table, there will be nothing more to do. The <em>xsampall2</em> table can be created with:</p>
<pre class="fixed"><span class="k">create</span> <span class="k">table</span> <span class="nf">xsampall2</span> <span class="p">(</span>
  <span class="n">isbn</span> <span class="kt">char</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span> <span class="n">field_format</span><span class="o">=</span><span class="s1">&#39;@ISBN&#39;</span><span class="p">,</span>
  <span class="n">language</span> <span class="kt">char</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="n">field_format</span><span class="o">=</span><span class="s1">&#39;@LANG&#39;</span><span class="p">,</span>
  <span class="n">subject</span> <span class="kt">char</span><span class="p">(</span><span class="mi">32</span><span class="p">)</span> <span class="n">field_format</span><span class="o">=</span><span class="s1">&#39;@SUBJECT&#39;</span><span class="p">,</span>
  <span class="n">authorfn</span> <span class="kt">char</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="n">field_format</span><span class="o">=</span><span class="s1">&#39;AUTHOR/FIRSTNAME&#39;</span><span class="p">,</span>
  <span class="n">authorln</span> <span class="kt">char</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="n">field_format</span><span class="o">=</span><span class="s1">&#39;AUTHOR/LASTNAME&#39;</span><span class="p">,</span>
  <span class="n">title</span> <span class="kt">char</span><span class="p">(</span><span class="mi">32</span><span class="p">)</span> <span class="n">field_format</span><span class="o">=</span><span class="s1">&#39;TITLE&#39;</span><span class="p">,</span>
  <span class="n">translated</span> <span class="kt">char</span><span class="p">(</span><span class="mi">32</span><span class="p">)</span> <span class="n">field_format</span><span class="o">=</span><span class="s1">&#39;TRANSLATOR/@PREFIX&#39;</span><span class="p">,</span>
  <span class="n">tranfn</span> <span class="kt">char</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="n">field_format</span><span class="o">=</span><span class="s1">&#39;TRANSLATOR/FIRSTNAME&#39;</span><span class="p">,</span>
  <span class="n">tranln</span> <span class="kt">char</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="n">field_format</span><span class="o">=</span><span class="s1">&#39;TRANSLATOR/LASTNAME&#39;</span><span class="p">,</span>
  <span class="n">publisher</span> <span class="kt">char</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="n">field_format</span><span class="o">=</span><span class="s1">&#39;PUBLISHER/NAME&#39;</span><span class="p">,</span>
  <span class="n">location</span> <span class="kt">char</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="n">field_format</span><span class="o">=</span><span class="s1">&#39;PUBLISHER/PLACE&#39;</span><span class="p">,</span>
  <span class="kt">year</span> <span class="kt">int</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span> <span class="n">field_format</span><span class="o">=</span><span class="s1">&#39;DATEPUB&#39;</span><span class="p">)</span>
<span class="kp">engine</span><span class="o">=</span><span class="n">CONNECT</span> <span class="n">table_type</span><span class="o">=</span><span class="n">XML</span> <span class="n">file_name</span><span class="o">=</span><span class="s1">&#39;Xsample.xml&#39;</span>
<span class="n">tabname</span><span class="o">=</span><span class="s1">&#39;BIBLIO&#39;</span>
<span class="n">option_list</span><span class="o">=</span><span class="s1">&#39;rownode=BOOK,Expand=1,Mulnode=AUTHOR,Limit=2&#39;</span><span class="p">;</span>
</pre><p>The only difference is that the "multiple" node is an intermediate node in the path. The resulting table can be seen with a query such as:</p>
<pre class="fixed"><span class="k">select</span> <span class="n">subject</span><span class="p">,</span> <span class="n">language</span> <span class="n">lang</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">authorfn</span> <span class="n">first</span><span class="p">,</span> <span class="n">authorln</span>
    <span class="n">last</span><span class="p">,</span> <span class="kt">year</span> <span class="k">from</span> <span class="n">xsampall2</span><span class="p">;</span>
</pre><p>This displays:</p>
<div class="cstm-style darkheader-nospace-borders"><table><tr><th>SUBJECT</th><th>LANG</th><th>TITLE</th><th>FIRST</th><th>LAST</th><th>YEAR</th></tr>
<tr><td>applications</td><td>fr</td><td>Construire une application XML</td><td>Jean-Christophe</td><td>Bernadac</td><td>1999</td></tr>
<tr><td>applications</td><td>fr</td><td>Construire une application XML</td><td>François</td><td>Knab</td><td>1999</td></tr>
<tr><td>applications</td><td>fr</td><td>XML en Action</td><td>William J.</td><td>Pardi</td><td>1999</td></tr>
<tr><td>général</td><td>fr</td><td>XML, Langage et Applications</td><td>Alain</td><td>Michard</td><td>1998</td></tr>
</table>
</div><p>These composite tables, half array half tree, reserve us some surprises when updating, deleting from or inserting into them. Insert just cannot generate this structure; if two rows are inserted with just a different author, two book nodes will be generated in the XML file. Delete always deletes one book node and all its children nodes even if specified against only one author. Update is more complicated:</p>
<pre class="fixed"><span class="k">update</span> <span class="n">xsampall2</span> <span class="kt">set</span> <span class="n">authorfn</span> <span class="o">=</span> <span class="s1">&#39;Simon&#39;</span> <span class="k">where</span> <span class="n">authorln</span> <span class="o">=</span> <span class="s1">&#39;Knab&#39;</span><span class="p">;</span>
<span class="k">update</span> <span class="n">xsampall2</span> <span class="kt">set</span> <span class="kt">year</span> <span class="o">=</span> <span class="mi">2002</span> <span class="k">where</span> <span class="n">authorln</span> <span class="o">=</span> <span class="s1">&#39;Bernadac&#39;</span><span class="p">;</span>
<span class="k">update</span> <span class="n">xsampall2</span> <span class="kt">set</span> <span class="n">authorln</span> <span class="o">=</span> <span class="s1">&#39;Mercier&#39;</span> <span class="k">where</span> <span class="kt">year</span> <span class="o">=</span> <span class="mi">2002</span><span class="p">;</span>
</pre><p>After these three updates, the first one responding "Affected rows: 0" and the two others responding "Affected rows: 1", the last query answers:</p>
<div class="cstm-style darkheader-nospace-borders"><table><tr><th>SUBJECT</th><th>LANG</th><th>TITLE</th><th>FIRST</th><th>LAST</th><th>YEAR</th></tr>
<tr><td>applications</td><td>fr</td><td>Construire une application XML</td><td>Jean-Christophe</td><td>Mercier</td><td>2002</td></tr>
<tr><td>applications</td><td>fr</td><td>Construire une application XML</td><td>François</td><td>Knab</td><td>2002</td></tr>
<tr><td>applications</td><td>fr</td><td>XML en Action</td><td>William J.</td><td>Pardi</td><td>1999</td></tr>
<tr><td>général</td><td>fr</td><td>XML, Langage et Applications</td><td>Alain</td><td>Michard</td><td>1998</td></tr>
</table>
</div><p>What must be understood here is that the Update modifies node values in the XML file, not cell values in the relational table. The first update did not worked as expected, unable to retrieve the first name node of the second author and changing it to a new value. The second update changed the year value of the book and this shows for the two expanded rows because there is only one DATEPUB node for that book. Because the third update applies to a row having a certain date value, this row was retrieved but not expanded because no author data appeared in the Where clause; consequently only the first author name was updated.</p>
<h3 class="anchored_heading" id="making-a-list-of-multiple-values">Making a List of Multiple Values</h3>
<p>Another way to see multiple values is to ask CONNECT to make a comma separated list of the multiple node values. This time, it can only be done if the "multiple" node is not intermediate. For example, we can modify the <em>xsamp2</em> table definition by:</p>
<pre class="fixed"><span class="k">alter</span> <span class="k">table</span> <span class="n">xsamp2</span> <span class="n">option_list</span><span class="o">=</span><span class="s1">&#39;rownode=BOOK,Mulnode=AUTHOR,Limit=3&#39;</span><span class="p">;</span>
</pre><p>This time 'Expand' is not specified, and Limit gives the maximum number of items in the list. Now if we enter the query:</p>
<pre class="fixed"><span class="k">select</span> <span class="n">isbn</span><span class="p">,</span> <span class="n">subject</span><span class="p">,</span> <span class="n">author</span> <span class="s2">&quot;AUTHOR(S)&quot;</span><span class="p">,</span> <span class="n">title</span> <span class="k">from</span> <span class="n">xsamp2</span><span class="p">;</span>
</pre><p>We will get the resulting display:</p>
<div class="cstm-style darkheader-nospace-borders"><table><tr><th>ISBN</th><th>SUBJECT</th><th>AUTHOR(S)</th><th>TITLE</th></tr>
<tr><td>9782212090819</td><td>applications</td><td>Jean-Christophe Bernadac, François Knab</td><td>Construire une application XML</td></tr>
<tr><td>9782840825685</td><td>applications</td><td>William J. Pardi</td><td>XML en Action</td></tr>
<tr><td>9782212090529</td><td>général</td><td>Alain Michard</td><td>XML, Langage et Applications</td></tr>
</table>
</div><p>Note that updating the "multiple" column is not possible because CONNECT does not know which of
the nodes to update.</p>
<p>This could not have been done with the <em>xsampall2</em> table because the author node is intermediate in the path, and making two lists, one of first names and another one of last names would not make sense anyway.</p>
<h3 class="anchored_heading" id="what-if-a-table-contains-several-multiple-nodes">What if a table contains several multiple nodes</h3>
<p>This can be handled by creating several tables on the same file, each containing only one multiple node and constructing the desired result using joins.</p>
<h3 class="anchored_heading" id="support-of-html-tables">Support of HTML Tables</h3>
<p>Most tables included in HTML documents cannot be processed by CONNECT because the HTML
language is often not compatible with the syntax of XML. In particular, XML requires all open tags to be matched by a closing tag while it is sometimes optional in HTML. This is often the case concerning column tags.</p>
<p>However, you can meet tables that respect the XML syntax but have some of the features of HTML tables. For instance:</p>
<pre class="fixed"><span class="cp">&lt;?xml version=&quot;1.0&quot;?&gt;</span>
<span class="nt">&lt;Beers&gt;</span>
  <span class="nt">&lt;table&gt;</span>
    <span class="nt">&lt;th&gt;&lt;td&gt;</span>Name<span class="nt">&lt;/td&gt;&lt;td&gt;</span>Origin<span class="nt">&lt;/td&gt;&lt;td&gt;</span>Description<span class="nt">&lt;/td&gt;&lt;/th&gt;</span>
    <span class="nt">&lt;tr&gt;</span>
      <span class="nt">&lt;td&gt;&lt;brandName&gt;</span>Huntsman<span class="nt">&lt;/brandName&gt;&lt;/td&gt;</span>
      <span class="nt">&lt;td&gt;&lt;origin&gt;</span>Bath, UK<span class="nt">&lt;/origin&gt;&lt;/td&gt;</span>
      <span class="nt">&lt;td&gt;&lt;details&gt;</span>Wonderful hop, light alcohol<span class="nt">&lt;/details&gt;&lt;/td&gt;</span>
    <span class="nt">&lt;/tr&gt;</span>
    <span class="nt">&lt;tr&gt;</span>
      <span class="nt">&lt;td&gt;&lt;brandName&gt;</span>Tuborg<span class="nt">&lt;/brandName&gt;&lt;/td&gt;</span>
      <span class="nt">&lt;td&gt;&lt;origin&gt;</span>Danmark<span class="nt">&lt;/origin&gt;&lt;/td&gt;</span>
      <span class="nt">&lt;td&gt;&lt;details&gt;</span>In small bottles<span class="nt">&lt;/details&gt;&lt;/td&gt;</span>
    <span class="nt">&lt;/tr&gt;</span>
  <span class="nt">&lt;/table&gt;</span>
<span class="nt">&lt;/Beers&gt;</span>
</pre><p>Here the different column tags are included in <code>&lt;td&gt;&lt;/td&gt;</code> tags as for HTML tables. You cannot just
add this tag in the Xpath of the columns, because the search is done on the first occurrence of each tag, and this would cause this search to fail for all columns except the first one. This case is handled by specifying the <em>Colnode</em> table option that gives the name of these column tags, for example:</p>
<pre class="fixed"><span class="k">create</span> <span class="k">table</span> <span class="nf">beers</span> <span class="p">(</span>
  <span class="ss">`Name`</span> <span class="kt">char</span><span class="p">(</span><span class="mi">16</span><span class="p">)</span> <span class="n">field_format</span><span class="o">=</span><span class="s1">&#39;brandName&#39;</span><span class="p">,</span>
  <span class="ss">`Origin`</span> <span class="kt">char</span><span class="p">(</span><span class="mi">16</span><span class="p">)</span> <span class="n">field_format</span><span class="o">=</span><span class="s1">&#39;origin&#39;</span><span class="p">,</span>
  <span class="ss">`Description`</span> <span class="kt">char</span><span class="p">(</span><span class="mi">32</span><span class="p">)</span> <span class="n">field_format</span><span class="o">=</span><span class="s1">&#39;details&#39;</span><span class="p">)</span>
<span class="kp">engine</span><span class="o">=</span><span class="n">CONNECT</span> <span class="n">table_type</span><span class="o">=</span><span class="n">XML</span> <span class="n">file_name</span><span class="o">=</span><span class="s1">&#39;beers.xml&#39;</span>
<span class="n">tabname</span><span class="o">=</span><span class="s1">&#39;table&#39;</span> <span class="n">option_list</span><span class="o">=</span><span class="s1">&#39;rownode=tr,colnode=td&#39;</span><span class="p">;</span>
</pre><p>The table will be displayed as:</p>
<div class="cstm-style darkheader-nospace-borders"><table><tr><th>Name</th><th>Origin</th><th>Description</th></tr>
<tr><td>Huntsman</td><td>Bath, UK</td><td>Wonderful hop, light alcohol</td></tr>
<tr><td>Tuborg</td><td>Danmark</td><td>In small bottles</td></tr>
</table>
</div><p>However, you can deal with tables even closer of the HTML model. For example the <em>coffee.htm</em> file:</p>
<pre class="fixed"><span class="p">&lt;</span><span class="nt">TABLE</span> <span class="na">summary</span><span class="o">=</span><span class="s">&quot;This table charts the number of cups of coffe</span>
<span class="s">                consumed by each senator, the type of coffee (decaf</span>
<span class="s">                or regular), and whether taken with sugar.&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">CAPTION</span><span class="p">&gt;</span>Cups of coffee consumed by each senator<span class="p">&lt;/</span><span class="nt">CAPTION</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">TR</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">TH</span><span class="p">&gt;</span>Name<span class="p">&lt;/</span><span class="nt">TH</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">TH</span><span class="p">&gt;</span>Cups<span class="p">&lt;/</span><span class="nt">TH</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">TH</span><span class="p">&gt;</span>Type of Coffee<span class="p">&lt;/</span><span class="nt">TH</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">TH</span><span class="p">&gt;</span>Sugar?<span class="p">&lt;/</span><span class="nt">TH</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">TR</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">TR</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">TD</span><span class="p">&gt;</span>T. Sexton<span class="p">&lt;/</span><span class="nt">TD</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">TD</span><span class="p">&gt;</span>10<span class="p">&lt;/</span><span class="nt">TD</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">TD</span><span class="p">&gt;</span>Espresso<span class="p">&lt;/</span><span class="nt">TD</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">TD</span><span class="p">&gt;</span>No<span class="p">&lt;/</span><span class="nt">TD</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">TR</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">TR</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">TD</span><span class="p">&gt;</span>J. Dinnen<span class="p">&lt;/</span><span class="nt">TD</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">TD</span><span class="p">&gt;</span>5<span class="p">&lt;/</span><span class="nt">TD</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">TD</span><span class="p">&gt;</span>Decaf<span class="p">&lt;/</span><span class="nt">TD</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">TD</span><span class="p">&gt;</span>Yes<span class="p">&lt;/</span><span class="nt">TD</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">TR</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">TABLE</span><span class="p">&gt;</span>
</pre><p>Here column values are directly represented by the TD tag text. You cannot declare them as tags nor as attributes. In addition, they are not located using their name but by their position within the row. Here is how to declare such a table to CONNECT:</p>
<pre class="fixed"><span class="k">create</span> <span class="k">table</span> <span class="nf">coffee</span> <span class="p">(</span>
  <span class="ss">`Name`</span> <span class="kt">char</span><span class="p">(</span><span class="mi">16</span><span class="p">),</span>
  <span class="ss">`Cups`</span> <span class="kt">int</span><span class="p">(</span><span class="mi">8</span><span class="p">),</span>
  <span class="ss">`Type`</span> <span class="kt">char</span><span class="p">(</span><span class="mi">16</span><span class="p">),</span>
  <span class="ss">`Sugar`</span> <span class="kt">char</span><span class="p">(</span><span class="mi">4</span><span class="p">))</span>
<span class="kp">engine</span><span class="o">=</span><span class="n">connect</span> <span class="n">table_type</span><span class="o">=</span><span class="n">XML</span> <span class="n">file_name</span><span class="o">=</span><span class="s1">&#39;coffee.htm&#39;</span>
<span class="n">tabname</span><span class="o">=</span><span class="s1">&#39;TABLE&#39;</span> <span class="n">header</span><span class="o">=</span><span class="mi">1</span> <span class="n">option_list</span><span class="o">=</span><span class="s1">&#39;Coltype=HTML&#39;</span><span class="p">;</span>
</pre><p>You specify the fact that column are located by position by setting the <em>Coltype</em> option to 'HTML'. Each column position (0 based) will be the value of the <em>flag</em> column parameter that is set by default in sequence. Now we are able to display the table:</p>
<div class="cstm-style darkheader-nospace-borders"><table><tr><th>Name</th><th>Cups</th><th>Type</th><th>Sugar</th></tr>
<tr><td>T. Sexton</td><td>10</td><td>Espresso</td><td>No</td></tr>
<tr><td>J. Dinnen</td><td>5</td><td>Decaf</td><td>Yes</td></tr>
</table>
</div><p><strong>Note 1:</strong> We specified '<code>header=n</code>' in the create statement to indicate that the first n rows of the table are not data rows and should be skipped.</p>
<p><strong>Note 2:</strong> In this last example, we did not specify the node names using the Rownode and Colnode
options because when <em>Coltype</em> is set to 'HTML' they default to '<code>Rownode=TR</code>' and '<code>Colnode=TD</code>'.</p>
<p><strong>Note 3:</strong> The <em>Coltype</em> option is a word only the first character of which is significant. Recognized values are:</p>
<table><tr><td>T(ag) or N(ode)</td><td>Column names match a tag name (the default).</td></tr>
<tr><td>A(ttribute) or @</td><td>Column names match an attribute name.</td></tr>
<tr><td>H(tml) or C(ol) or P(os)</td><td>Column are retrieved by their position.</td></tr>
</table>
<h3 class="anchored_heading" id="new-file-setting">New file setting</h3>
<p>Some create options are used only when creating a table on a new file, i. e. when inserting into a file that does not exist yet. When specified, the 'Header' option will create a header row with the name of the table columns. This is chiefly useful for HTML tables to be displayed on a web browser.</p>
<p>Some new list-options are used in this context:</p>
<table><tr><td><strong>Encoding</strong></td><td>The encoding of the new document, defaulting to UTF-8.</td></tr>
<tr><td><strong>Attribute</strong></td><td>A list of 'attname=attvalue' separated by ';' to add to the table node.</td></tr>
<tr><td><strong>HeadAttr</strong></td><td>An attribute list to be added to the header row node.</td></tr>
</table>
<p>Let us see for instance, the following create statement:</p>
<pre class="fixed"><span class="k">create</span> <span class="k">table</span> <span class="nf">handlers</span> <span class="p">(</span>
  <span class="n">handler</span> <span class="kt">char</span><span class="p">(</span><span class="mi">64</span><span class="p">),</span>
  <span class="n">version</span> <span class="kt">char</span><span class="p">(</span><span class="mi">20</span><span class="p">),</span>
  <span class="n">author</span> <span class="kt">char</span><span class="p">(</span><span class="mi">64</span><span class="p">),</span>
  <span class="n">description</span> <span class="kt">char</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span>
  <span class="n">maturity</span> <span class="kt">char</span><span class="p">(</span><span class="mi">12</span><span class="p">))</span>
<span class="kp">engine</span><span class="o">=</span><span class="n">CONNECT</span> <span class="n">table_type</span><span class="o">=</span><span class="n">XML</span> <span class="n">file_name</span><span class="o">=</span><span class="s1">&#39;handlers.htm&#39;</span>
<span class="n">tabname</span><span class="o">=</span><span class="s1">&#39;TABLE&#39;</span> <span class="n">header</span><span class="o">=</span><span class="n">yes</span>
<span class="n">option_list</span><span class="o">=</span><span class="s1">&#39;coltype=HTML,encoding=ISO-8859-1,</span>
<span class="s1">attribute=border=1;cellpadding=5,headattr=bgcolor=yellow&#39;</span><span class="p">;</span>
</pre><p>Supposing the table file does not exist yet, the first insert into that table, for instance by the following statement:</p>
<pre class="fixed"><span class="k">insert</span> <span class="k">into</span> <span class="n">handlers</span> <span class="k">select</span> <span class="n">plugin_name</span><span class="p">,</span> <span class="n">plugin_version</span><span class="p">,</span>
  <span class="n">plugin_author</span><span class="p">,</span> <span class="n">plugin_description</span><span class="p">,</span> <span class="n">plugin_maturity</span> <span class="k">from</span>
  <span class="n">information_schema</span><span class="p">.</span><span class="n">plugins</span> <span class="k">where</span> <span class="n">plugin_type</span> <span class="o">=</span> <span class="s1">&#39;DAEMON&#39;</span><span class="p">;</span>
</pre><p>Will generate the following file:</p>
<pre class="fixed"><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;ISO-8859-1&quot;?&gt;</span>
<span class="c">&lt;!-- Created by CONNECT Version 3.05.0005 August 17, 2012 --&gt;</span>
<span class="nt">&lt;TABLE</span> <span class="na">border=</span><span class="s">&quot;1&quot;</span> <span class="na">cellpadding=</span><span class="s">&quot;5&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;TR</span> <span class="na">bgcolor=</span><span class="s">&quot;yellow&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;TH&gt;</span>handler<span class="nt">&lt;/TH&gt;</span>
    <span class="nt">&lt;TH&gt;</span>version<span class="nt">&lt;/TH&gt;</span>
    <span class="nt">&lt;TH&gt;</span>author<span class="nt">&lt;/TH&gt;</span>
    <span class="nt">&lt;TH&gt;</span>description<span class="nt">&lt;/TH&gt;</span>
    <span class="nt">&lt;TH&gt;</span>maturity<span class="nt">&lt;/TH&gt;</span>
  <span class="nt">&lt;/TR&gt;</span>
  <span class="nt">&lt;TR&gt;</span>
    <span class="nt">&lt;TD&gt;</span>Maria<span class="nt">&lt;/TD&gt;</span>
    <span class="nt">&lt;TD&gt;</span>1.5<span class="nt">&lt;/TD&gt;</span>
    <span class="nt">&lt;TD&gt;</span>Monty Program Ab<span class="nt">&lt;/TD&gt;</span>
    <span class="nt">&lt;TD&gt;</span>Compatibility aliases for the Aria engine<span class="nt">&lt;/TD&gt;</span>
    <span class="nt">&lt;TD&gt;</span>Gamma<span class="nt">&lt;/TD&gt;</span>
  <span class="nt">&lt;/TR&gt;</span>
<span class="nt">&lt;/TABLE&gt;</span>
</pre><p>This file can be used to display the table on a web browser (encoding should be ISO-8859-x)</p>
<div class="cstm-style darkheader-nospace-borders"><table><tr><th>handler</th><th>version</th><th>author</th><th>description</th><th>maturity</th></tr>
<tr><td>Maria</td><td>1.5</td><td>Monty Program Ab</td><td>Compatibility aliases for the Aria engine</td><td>Gamma</td></tr>
</table>
</div><p><strong>Note:</strong> The XML document encoding, is generally specified in the XML header node, and can be different from the DATA_CHARSET, which is always UTF-8 for XML tables. Therefore the table DATA_CHARSET character set should be unspecified, or specified as UTF8. The Encoding specification is useful only for new XML files and ignored for existing files having their encoding already specified in the header node.</p>
<h2 class="anchored_heading" id="ini-table-type">INI Table Type</h2>
<p>The INI type is the one of "configure" or "initializing" files often met on
Windows machines. For instance, let us suppose you have a contact
file <em>contact.ini</em> such as:</p>
<pre class="fixed">[BER]
name=Bertrand
forename=Olivier
address=21 rue Ferdinand Buisson
city=Issy-les-Mlx
zipcode=92130
tel=09.54.36.29.60
cell=06.70.06.04.16

[WEL]
name=Schmitt
forename=Bernard
hired=19/02/1985
address=64 tiergarten strasse
city=Berlin
zipcode=95013
tel=03.43.377.360

[UK1]
name=Smith
forename=Henry
hired=08/11/2003
address=143 Blum Rd.
city=London
zipcode=NW1 2BP
</pre><p>CONNECT let you view it as a table in two different ways.</p>
<h3 class="anchored_heading" id="column-layout">Column layout</h3>
<p>The first way is to regard it as a table having one line per section, the columns being the keys you want to display. In this case, the create statement could be:</p>
<pre class="fixed"><span class="k">create</span> <span class="k">table</span> <span class="nf">contact</span> <span class="p">(</span>
  <span class="n">contact</span> <span class="kt">char</span><span class="p">(</span><span class="mi">16</span><span class="p">)</span> <span class="n">flag</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
  <span class="n">name</span> <span class="kt">char</span><span class="p">(</span><span class="mi">20</span><span class="p">),</span>
  <span class="n">forename</span> <span class="kt">char</span><span class="p">(</span><span class="mi">32</span><span class="p">),</span>
  <span class="n">hired</span> <span class="kt">date</span> <span class="n">date_format</span><span class="o">=</span><span class="s1">&#39;DD/MM/YYYY&#39;</span><span class="p">,</span>
  <span class="n">address</span> <span class="kt">char</span><span class="p">(</span><span class="mi">64</span><span class="p">),</span>
  <span class="n">city</span> <span class="kt">char</span><span class="p">(</span><span class="mi">20</span><span class="p">),</span>
  <span class="n">zipcode</span> <span class="kt">char</span><span class="p">(</span><span class="mi">8</span><span class="p">),</span>
  <span class="n">tel</span> <span class="kt">char</span><span class="p">(</span><span class="mi">16</span><span class="p">))</span>
<span class="kp">engine</span><span class="o">=</span><span class="n">CONNECT</span> <span class="n">table_type</span><span class="o">=</span><span class="n">INI</span> <span class="n">file_name</span><span class="o">=</span><span class="s1">&#39;contact.ini&#39;</span><span class="p">;</span>
</pre><p>The column that will contain the section name can have any name but must specify <code>flag=1</code>. All other column must have the names of the keys we want to display (case insensitive). The type can be character or numeric depending on the key value type, and the length is the maximum expected length for the key value. Once done, the statement:</p>
<pre class="fixed"><span class="k">select</span> <span class="n">contact</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">hired</span><span class="p">,</span> <span class="n">city</span><span class="p">,</span> <span class="n">tel</span> <span class="k">from</span> <span class="n">contact</span><span class="p">;</span>
</pre><p>will display the file in tabular format.</p>
<div class="cstm-style darkheader-nospace-borders"><table><tr><th>contact</th><th>name</th><th>hired</th><th>city</th><th>tel</th></tr>
<tr><td>BER</td><td>Bertrand</td><td>1970-01-01</td><td>Issy-les-Mlx</td><td>09.54.36.29.60</td></tr>
<tr><td>WEL</td><td>Schmitt</td><td>1985-02-19</td><td>Berlin</td><td>03.43.377.360</td></tr>
<tr><td>UK1</td><td>Smith</td><td>2003-11-08</td><td>London</td><td>NULL</td></tr>
</table>
</div><p>Only the keys defined in the create statements are visible; keys that do not
exist in a section are displayed as null or pseudo null (blank for character,
1/1/70 for dates, and 0 for numeric):</p>
<p>All relational operations can be applied to this table. The table (and the
file) can be updated, inserted and conditionally deleted. The only constraint
is that when inserting values, the section name must be the first in the list
of values.</p>
<p><strong>Note:</strong> When inserting, if a section already exists, no new section will be
created but the new values will be added or replace those of the existing
section. Thus the following two commands are equivalent:</p>
<pre class="fixed"><span class="k">update</span> <span class="n">contact</span> <span class="kt">set</span> <span class="n">forename</span> <span class="o">=</span> <span class="s1">&#39;Harry&#39;</span> <span class="k">where</span> <span class="n">contact</span> <span class="o">=</span> <span class="s1">&#39;UK1&#39;</span><span class="p">;</span>
<span class="k">insert</span> <span class="k">into</span> <span class="nf">contact</span> <span class="p">(</span><span class="n">contact</span><span class="p">,</span><span class="n">forename</span><span class="p">)</span> <span class="k">values</span><span class="p">(</span><span class="s1">&#39;UK1&#39;</span><span class="p">,</span><span class="s1">&#39;Harry&#39;</span><span class="p">);</span>
</pre><h3 class="anchored_heading" id="row-layout">Row layout</h3>
<p>To be a good candidate for tabular representation, an INI file should have often the same keys in all sections. In practice, many files commonly found on computers, such as the win.ini file of the Windows directory or the my.ini file cannot be viewed that way because each section have different keys. In this case, a second way is to regard the file as a table having one row per section key and whose columns can be the section name, the key name and the key value.</p>
<p>For instance, let us define the table:</p>
<pre class="fixed"><span class="k">create</span> <span class="k">table</span> <span class="nf">xcont</span> <span class="p">(</span>
  <span class="n">section</span> <span class="kt">char</span><span class="p">(</span><span class="mi">16</span><span class="p">)</span> <span class="n">flag</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
  <span class="n">keyname</span> <span class="kt">char</span><span class="p">(</span><span class="mi">16</span><span class="p">)</span> <span class="n">flag</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
  <span class="n">value</span> <span class="kt">char</span><span class="p">(</span><span class="mi">32</span><span class="p">))</span>
<span class="kp">engine</span><span class="o">=</span><span class="n">CONNECT</span> <span class="n">table_type</span><span class="o">=</span><span class="n">INI</span> <span class="n">file_name</span><span class="o">=</span><span class="s1">&#39;contact.ini&#39;</span>
<span class="n">option_list</span><span class="o">=</span><span class="s1">&#39;Layout=Row&#39;</span><span class="p">;</span>
</pre><p>In this statement, the "Layout" option sets the display format, Column by default or anything else not beginning by 'C' for row layout display. The names of the three columns can be freely chosen. The Flag option gives the meaning of the column. Specify <code>flag=1</code> for the section name and <code>flag=2</code> for the key name. Otherwise, the column will contain the key value.</p>
<p>Once done, the command:</p>
<pre class="fixed"><span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">xcont</span><span class="p">;</span>
</pre><p>Will display the following result:</p>
<div class="cstm-style darkheader-nospace-borders"><table><tr><th>section</th><th>keyname</th><th>value</th></tr>
<tr><td>BER</td><td>name</td><td>Bertrand</td></tr>
<tr><td>BER</td><td>forename</td><td>Olivier</td></tr>
<tr><td>BER</td><td>address</td><td>21 rue Ferdinand Buisson</td></tr>
<tr><td>BER</td><td>city</td><td>Issy-les-Mlx</td></tr>
<tr><td>BER</td><td>zipcode</td><td>92130</td></tr>
<tr><td>BER</td><td>tel</td><td>09.54.36.29.60</td></tr>
<tr><td>BER</td><td>cell</td><td>06.70.06.04.16</td></tr>
<tr><td>WEL</td><td>name</td><td>Schmitt</td></tr>
<tr><td>WEL</td><td>forename</td><td>Bernard</td></tr>
<tr><td>WEL</td><td>hired</td><td>19/02/1985</td></tr>
<tr><td>WEL</td><td>address</td><td>64 tiergarten strasse</td></tr>
<tr><td>WEL</td><td>city</td><td>Berlin</td></tr>
<tr><td>WEL</td><td>zipcode</td><td>95013</td></tr>
<tr><td>WEL</td><td>tel</td><td>03.43.377.360</td></tr>
<tr><td>UK1</td><td>name</td><td>Smith</td></tr>
<tr><td>UK1</td><td>forename</td><td>Henry</td></tr>
<tr><td>UK1</td><td>hired</td><td>08/11/2003</td></tr>
<tr><td>UK1</td><td>address</td><td>143 Blum Rd.</td></tr>
<tr><td>UK1</td><td>city</td><td>London</td></tr>
<tr><td>UK1</td><td>zipcode</td><td>NW1 2BP</td></tr>
</table>
</div><p><strong>Note:</strong> When processing an INI table, all section names are retrieved in a buffer of 2048 bytes. For a big file having many sections, this size can be increased using for example:</p>
<pre class="fixed"><span class="n">option_list</span><span class="o">=</span><span class="s1">&#39;seclen=4000&#39;</span><span class="p">;</span>
</pre><ol><li id="_note-0">
    <a href="#_ref-0">&uarr;</a> Sometimes it can be a physical record if LF or CRLF have been written in the file.</li>

<li id="_note-1">
    <a href="#_ref-1">&uarr;</a> It can be specified with more than one character, but the first one only is significant.</li>

<li id="_note-2">
    <a href="#_ref-2">&uarr;</a> CONNECT does not claim to be able to deal with any XML document. Besides, those that can usefully be processed for data analysis are likely to have a structure that can easily be transformed into a table.</li>

<li id="_note-3">
    <a href="#_ref-3">&uarr;</a> With libxml2, sub tags text can be separated by 0 or several blanks depending on the structure and indentation of the data file.</li>
</ol>

    </div>


        
            <div id="subscribe" class="well well-small hide hidden-print"
                 data-subscribe-url="/kb/it/connect-table-types-data-files/+subscriptions/add"
                 data-unsubscribe-url="/kb/it/connect-table-types-data-files/+subscriptions/remove">
            </div>
        

        
        
    
        <div class="simple_section_nav">
            <ul class="nav nav-pills">
                
                    <li><a href="/kb/it/connect-table-types-overview/">
                        ← Panoramica dei tipi di tabelle di CONNECT
                    </a>
                    </li>
                
                
                    <li><a href="/kb/it/connect-table-types/">
                        ↑ CONNECT Table Types ↑
                    </a>
                    </li>
                
                
            </ul>
        </div>
    

        

        
        <h2>Commenti</h2>
        
    
    <div id="comments" data-node-id="3602" data-comments-url="/kb/it/connect-table-types-data-files/+comments"
         data-reply-url="/kb/it/connect-table-types-data-files/comments/post/">
        Sto caricando i commenti......
    </div>

        

    </div>


                    <div id="content_disclaimer" class="graybox">
                        Content reproduced on this site is the property of its respective owners,
                        and this content is not reviewed in advance by MariaDB. The views, information and opinions
                        expressed by this content do not necessarily represent those of MariaDB or any other party.
                    </div>
                </div>
            </section>

            
                <div id="right_bar" class="col-md-2">
                    
    
        
        <ul class="section_navigation well well-small hidden-xs hidden-sm">
            
                <li class="parent"><a href="/kb/it/connect-table-types/">
                    ↑ CONNECT Table Types ↑
                </a>
                </li>
            
            
                
                    <li>
                        <a href="/kb/it/connect-table-types-overview/">
                            
                            Panoramica dei tipi di tabelle di CONNECT
                        </a>
                    </li>
                
            
                
                    <li class="active">
                        <span>Tipi di tabelle CONNECT - File dei dati</span>
                        
                    </li>
                
            
        </ul>
    
    

                </div>
            
        </div>
    </div>
</div>

<!-- Footer -->
<footer id="footer">
    <div class="footer">
        <div class="container">
            <div class="row">
                <div class="col-xs-12">
                    <ul class="list-inline text-center footer-nav">
                        <li>
                            <h5>
                                <a href="https://mariadb.com/products" title="Products">Products</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/services" title="Services">Services</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/pricing" title="Pricing">Pricing</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/resources" title="Resources">Resources</a>
                            </h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/about-us" title="About MariaDB">About Us</a></h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/download" title="Download">Download MariaDB</a></h5>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="row row-10">
                
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div id="block-footerformcontact" class="block block-block-content block-block-contentd754ee1b-3cc9-40e7-9ef4-f504f1197fb1">
                        
                            <h5 style="font-weight: 400;">Subscribe to our newsletter!</h5>
                            <script src="//app-sj15.marketo.com/js/forms2/js/forms2.min.js"></script><form id="mktoForm_1498"></form>
                            <script>
                                <!--//--><![CDATA[// ><!--
                                MktoForms2.loadForm("//app-sj15.marketo.com", "573-PXI-984", 1498);
                                //--><!]]]]><![CDATA[>
                                //--><!]]>
                            </script>
                        
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div class="footer-copyright">
                        <div class="text-center">
                            <ul class="list-inline no-margin">
                                <li>
                                    <a href="/legal" title="Legal">Legal</a>
                                </li>
                                <li>
                                    <a href="/privacy-policy" title="Privacy Policy">Privacy Policy</a>
                                </li>
                                <li>
                                    <a href="/cookie-policy/" title="Cookies">Cookie Policy</a>
                                </li>
                            </ul>
                            <p>Copyright &copy; 2024 MariaDB. All rights reserved.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
</footer>
</div>

<div id="ajax_loading">
    <img src="/kb/static/images/ajax-loader.a51c5608d01a.gif" />
</div>

    <!-- Google Tag Manager -->
    <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-MK2847"
                      height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
            '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MK2847');</script>
    <!-- End Google Tag Manager -->

</body>

<script type="text/javascript" src="/kb/static/js/main.1587e3a666fc.js" charset="utf-8"></script>

</html>