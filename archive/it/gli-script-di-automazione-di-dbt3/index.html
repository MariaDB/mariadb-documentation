<!DOCTYPE html>
<html>
<head data-cookie-domain=""
      data-cookie-path="/">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="apple-touch-icon" sizes="180x180" href="/kb/static/images/favicons/apple-touch-icon.159e713979be.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/kb/static/images/favicons/favicon-32x32.bc0ac1d5d11e.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/kb/static/images/favicons/favicon-16x16.5801f8f0f34e.png">
    <link rel="shortcut icon" href="/kb/static/images/favicons/favicon.d122d305dee4.ico" type="image/x-icon" />

    <title>Gli script di automazione di DBT3 - MariaDB Knowledge Base</title>

    <link href="/kb/static/css/main.9a0d7dcebefd.css" rel="stylesheet" type="text/css" />

    

    <!-- FB Open Graph tags -->
    <meta property="og:title" content="Gli script di automazione di DBT3" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://mariadb.com/kb/it/gli-script-di-automazione-di-dbt3/" />
    <meta property="og:image" content="http://mariadb.comaskmonty-logo.png" />
    <meta property="og:site_name" content="MariaDB KnowledgeBase" />
    <meta property="fb:admins" content="514852603" />
    <meta property="og:description" content="
DBT-3 (OSDL Database Test 3) è uno strumento di workload per il kernel Linux sviluppato da OSDL (Open Source Development Labs, inc), e basato su TPC-H del Transaction Perform..." />

    <meta name="description" content="
DBT-3 (OSDL Database Test 3) è uno strumento di workload per il kernel Linux sviluppato da OSDL (Open Source Development Labs, inc), e basato su TPC-H del Transaction Perform..." />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="//fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet"/>
    
</head>
<body class="mpkb nodes products nodes_view jqui" id="nodes_view">





<div id="menu-mobile" class="visible-sm visible-xs">

    <div>
        <div id="mobile-close-menu" class="text-right">
            <a href="javascript:void(0)" title="Close Menu" id="back-main" class="toggle-menu">X<span></span></a>
        </div>
    </div>
    <div class="mainmenu-mobile">
        <ul class="ls-none ul-menu">
            <li data-sub="submenu5"><a class="open-form-search" href="/kb/search/" title="Search">Search </a></li>
            <li data-sub="submenu0"><a href="/products" title="Products">Products</a><span class="arrow-main"></span></li>
            <li data-sub="submenu1"><a href="/services" title="Services">Services</a><span class="arrow-main"></span></li>
            <li data-sub="submenu2"><a href="/resources" title="Resources">Resources</a><span class="arrow-main"></span></li>
            <li data-sub="submenu3"><a href="/about-us" title="About">About</a><span class="arrow-main"></span></li>
            <li data-sub="submenu4"><a href="/contact" title="Contact">Contact</a></li>
        </ul>
    </div>

    <div class="nav-top-mobile">
        <div class="select-box form">

            <ul class="inline-block-md mb-none top-nav">
                <li>

                </li>
                
                    <li>
                        <a href="/kb/user/login?next=/kb/it/gli-script-di-automazione-di-dbt3/"> Login</a>
                    </li>
                
            </ul>



        </div>
        <p class="text-center copyright">Copyright &copy; 2023 MariaDB. All rights reserved.</p>
    </div>
</div>
<div id="wrapper">
<div id="top-nav">
    <div class="container">
        <ul class="hidden-sm hidden-xs" >
            <li><a href="https://mariadb.com/kb/">Knowledge Base</a></li>
            <li><a href="https://mariadb.com/contact/">Contact</a></li>
            
                
                    <li>
                        <a href="/kb/user/login?next=/kb/it/gli-script-di-automazione-di-dbt3/" rel="nofollow">Accesso</a>
                    </li>
                
            
            
            <li id="search-form">
                <form action="/kb/it/+search/" method="get" id="search-block-form" accept-charset="UTF-8">
                    <input id="search" title="Enter the terms you wish to search for."
                           placeholder="Search . . ." type="text"
                           name="q" value="" size="15" maxlength="128" class="form-text"
                           data-autocomplete-url="/kb/it/+search/autocomplete/">
                    <input type="hidden" name="quick" value="1" />
                    <input type="hidden" name="source" value="kb" />
                </form>
            </li>
            <li><a id="search-toggler" href="/kb/search/">Search</a></li>
            
        </ul>
    </div>
</div>
<div id="navbar-bottom" class="navbar">
    <div class="container">
        
        
        
        
        <div class="row">
            <div class="col-md-3 col-sm-9 col-xs-9">
                <a class="brand" href="/" title="MariaDB">
                    <img src="/kb/static/images/logo-2018-black.95f5978ae14d.png">
                </a>
            </div>
            <div class="col-md-9 hidden-sm hidden-xs">
                <div class="main-menu">
                    <ul id="main-menu" class="nav navbar-nav inline-block-sm">
    <li class="has-sub full-menu">
        <a href="/products" title="Products">Products</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/services" title="Services">Services</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/pricing" title="Pricing">Pricing</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/resources" title="Resources">Resources</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/about-us" title="About Us">About Us</a>
    </li>
    <li class="">
        <a class="button electric-eel small top-bar-right-download" href="/downloads/">Download</a>
    </li>
</ul>
                </div>
            </div>
            <div class="col-md-3 visible-sm visible-xs col-sm-3 col-xs-3 ps-rv">
                <div class="navbar-header text-right pull-right">
                    <button type="button" class="menu-control toggle-menu" id="open-menu">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="main">
    <div class="container">
        

        <div id="subheader1" class="clearfix">
            <div class="pull-left">
                
                <div id="breadcrumbs" class="breadcrumb">
                    <a href="/kb/it/">Knowledge Base</a>
                    


    
    » <a class="crumb" href="/kb/it/mariadb-italiano/">MariaDB - Italiano</a>
    

    
    » <a class="crumb" href="/kb/it/sviluppo/">Sviluppo</a>
    

    
    » <a class="crumb" href="/kb/it/qualita/">Qualità</a>
    

    
    » <a class="crumb" href="/kb/it/benchmark-e-test-di-lunga-durata/">Benchmark e test di lunga durata</a>
    

    
    » <a class="crumb" href="/kb/it/benchmark/">Benchmark</a>
    


    » <a class="node_link crumb" href="/kb/it/gli-script-di-automazione-di-dbt3/">Gli script di automazione di DBT3</a>


                </div>
                
            </div>
        </div>
    </div>
    <div class="container" id="container-main">
        <div class="row">
            
            
                
                <aside id="sidebar-first" class="sidebar col-md-2 hidden-xs hidden-sm hidden-print">
                    
                        
                        <ul id="category_menu" class="nav nav-pills nav-stacked">
                            <li><a href="/kb/it/">Pagina iniziale</a></li>
                            
                                
                                    <li><a href="/kb/it/+questions/">Domande Aperte</a></li>
                                
                                <li><a href="/kb/it/documentation/">MariaDB Server</a></li>
                                <li><a href="/kb/it/maxscale/">MariaDB MaxScale</a></li>
                                <li><a href="/kb/it/mariadb-columnstore/">MariaDB ColumnStore</a></li>
                                <li><a href="/kb/it/connectors/">Connectors</a></li>
                            

                        </ul>
                    

                    
<div>



<div class="well well-small box actions"><div>

        <a class="btn btn-block btn-blue btn-sm" href="/kb/it/gli-script-di-automazione-di-dbt3/+history" rel="nofollow">Cronologia</a>
        
        
        
        <a class="btn btn-block btn-blue btn-sm" href="/kb/it/gli-script-di-automazione-di-dbt3/+source/">Source</a>
        
        <a class="btn btn-block btn-blue btn-sm flag" href="/kb/it/gli-script-di-automazione-di-dbt3/+flag"
                data-flag-url="/kb/it/gli-script-di-automazione-di-dbt3/+flag" rel="nofollow">
                Flag as Spam / Inappropriate</a>
        
        <a class="btn btn-block btn-blue btn-sm" href="/kb/it/gli-script-di-automazione-di-dbt3/+translate/">
                Traduci</a>
        

</div>
</div>





<div class="well well-small box node_info"><div>

    <dl>
        <dt>Creato</dt>
        <dd>

<span class="datetime" title="2012-08-11 23:42">10 anni, 10 mesi ago</span></dd>

        <dt>Modificato</dt>
        <dd>

<span class="datetime" title="2012-08-28 15:46">10 anni, 10 mesi ago</span></dd>

        <dt>Tipo</dt>
        <dd>article</dd>

        <dt>Stato</dt>
        <dd>active</dd>

        <dt>Licenza</dt>
        <dd>
            
                <a href="/kb/it/gli-script-di-automazione-di-dbt3/+license/">CC BY-SA / Gnu FDL</a>
            
        </dd>

        
    </dl>

    
    <ul class="rss_feeds">
        <li><a href="/kb/it/gli-script-di-automazione-di-dbt3/+history/feed/">
            Cronologia</a>
        </li>
        <li><a href="/kb/it/gli-script-di-automazione-di-dbt3/+comments/feed/">
            Commenti</a>
        </li>
    </ul>
    

</div>
</div>





    
    
    

<div class="well well-small box attachments"><div><div class="edit_link pull-right"><a href="/kb/it/gli-script-di-automazione-di-dbt3/+edit/attachments/">Edit</a></div><h5>Attachments</h5></div><div>

        
            <div class="no_data">No attachments exist</div>
        
    
</div>
</div>

    



    
    
        

<div class="well well-small box"><div><h5>Versioni Localizzate</h5></div><div>

        <ul>
            
            <li><a href="/kb/en/dbt3-automation-scripts/">DBT3 Automation Scripts</a> [en]</li>
            
        </ul>
        
</div>
</div>

    






</div>


                    

































                </aside>
            
            
            
                
            
            
                
            
            <section id="content" class="limited_width col-md-8 clearfix">
                
                    <h1>Gli script di automazione di DBT3</h1>
                

                



                <div>
                    
    

    
    
    

    <div class="node creole">
        
        
        


    
    <div class="answer formatted">
        <div class="table_of_contents well well-small">
<h3>Contents</h3>
 <ol class="toc">

    <li class=""><a href="#preparazione-dellambiente-dei-benchmark" title="Preparazione dell&#39;ambiente dei benchmark">Preparazione dell&#39;ambiente dei benchmark</a>    <ol class="toc">

        <li class=""><a href="#permessi-per-sudo" title="Permessi per sudo">Permessi per sudo</a></li>

        <li class=""><a href="#il-software-necessario" title="Il software necessario">Il software necessario</a></li>

        <li class=""><a href="#dbms-testati" title="DBMS testati">DBMS testati</a>    </ol>
</li>

    <li class=""><a href="#istruzioni-di-installazione" title="Istruzioni di installazione">Istruzioni di installazione</a>    <ol class="toc">

        <li class=""><a href="#scaricare-httpslaunchpadnetmariadb-toolsmariadb-tools" title="Scaricare mariadb-tools">Scaricare mariadb-tools</a></li>

        <li class=""><a href="#preparare-il-workload-e-le-query" title="Preparare il workload e le query">Preparare il workload e le query</a></li>

        <li class=""><a href="#scaricare-httpdevmysqlcomdownloadsmysqldownloadsmysql-55x" title="Scaricare MySQL 5.5.x">Scaricare MySQL 5.5.x</a></li>

        <li class=""><a href="#scaricare-httpdevmysqlcomdownloadsmysqldownloadsmysql-56x" title="Scaricare MySQL 5.6.x">Scaricare MySQL 5.6.x</a></li>

        <li class=""><a href="#scaricare-e-compilare-mariadb-53x-mariadb-55x" title="Scaricare e compilare MariaDB 5.3.x / MariaDB 5.5.x">Scaricare e compilare MariaDB 5.3.x / MariaDB 5.5.x</a></li>

        <li class=""><a href="#preparare-i-database-per-i-benchmark" title="Preparare i database per i benchmark">Preparare i database per i benchmark</a></li>

        <li class=""><a href="#scaricare-compilare-e-preparare-httpwwwpostgresqlorgftpsourcev91rc1postgresql" title="Scaricare, compilare e preparare PostgreSQL===">Scaricare, compilare e preparare PostgreSQL===</a></li>

        <li class=""><a href="#preparare-il-database-dei-risultati" title="Preparare il database dei risultati">Preparare il database dei risultati</a>    </ol>
</li>

    <li class=""><a href="#script-di-automazione" title="Script di automazione">Script di automazione</a>    <ol class="toc">

        <li class=""><a href="#configurare-ed-eseguire-un-benchmark" title="Configurare ed eseguire un benchmark">Configurare ed eseguire un benchmark</a>        <ol class="toc">

            <li class=""><a href="#parole-chiave-della-configurazione" title="Parole chiave della configurazione">Parole chiave della configurazione</a></li>

            <li class=""><a href="#configurazione-di-alto-livello" title="Configurazione di alto livello">Configurazione di alto livello</a></li>

            <li class=""><a href="#configurazione-del-server-del-dbms" title="Configurazione del server del DBMS">Configurazione del server del DBMS</a></li>

            <li class=""><a href="#configurazione-dei-test" title="Configurazione dei test">Configurazione dei test</a></li>

            <li class=""><a href="#configurazione-delle-query" title="Configurazione delle query">Configurazione delle query</a></li>

            <li class=""><a href="#configurazione-del-database-dei-risultati" title="Configurazione del database dei risultati">Configurazione del database dei risultati</a></li>

            <li class=""><a href="#parametri-di-avvio-dello-script" title="Parametri di avvio dello script">Parametri di avvio dello script</a>        </ol>
</li>

        <li class=""><a href="#meccanismi-di-estrazione-dei-risultati" title="Meccanismi di estrazione dei risultati">Meccanismi di estrazione dei risultati</a></li>

        <li class=""><a href="#grafico-dei-risultati" title="Grafico dei risultati">Grafico dei risultati</a></li>

        <li class=""><a href="#output-dello-script" title="Output dello script">Output dello script</a>        <ol class="toc">

            <li class=""><a href="#output-del-benchmark" title="Output del benchmark">Output del benchmark</a></li>

            <li class=""><a href="#output-dei-test" title="Output dei test">Output dei test</a></li>

            <li class=""><a href="#output-delle-query" title="Output delle query">Output delle query</a>        </ol>
</li>

        <li class=""><a href="#hook" title="Hook">Hook</a></li>

        <li class=""><a href="#attività" title="Attività">Attività</a></li>

        <li class=""><a href="#esempi-di-chiamate-allo-script" title="Esempi di chiamate allo script">Esempi di chiamate allo script</a>    </ol>
</li>

    <li class=""><a href="#risultati" title="Risultati">Risultati</a>    <ol class="toc">

        <li class=""><a href="#test-di-myisam" title="Test di MyISAM">Test di MyISAM</a></li>

        <li class=""><a href="#test-di-innodb" title="Test di InnoDB">Test di InnoDB</a></li>

        <li class=""><a href="#test-di-postgresql" title="Test di PostgreSQL">Test di PostgreSQL</a>    </ol>
 </ol>
</li>
</div><p>
DBT-3 (OSDL Database Test 3) è uno strumento di workload per il kernel Linux sviluppato da OSDL (Open Source Development Labs, inc), e basato su TPC-H del Transaction Performance Processing Council (TPC).</p>
<p>DBT-3, come TPC-H, simula un effettivo sistema di supporto al decision making e modella complesse applicazioni di business analysis che svolgono un lavoro di analisi dei dati per poter prendere le decisioni migliori. Eseguendo il workload simulato da DBT-3, è possibile verificare e misurare le prestazioni del kernel Linux in un effettivo sistema di supporto al decision making.</p>
<p>DBT-3 utilizza lo "scale factor (SF)" come indicatore dello stress sul sistema. Modificando l'SF, è possibile cambiare le dimensioni del database perché raggiunga SF volte le sue vecchie dimensioni.</p>
<p>I test eseguiti da DBT-3 comprendono i tre elencati sotto. Misura i loro tempi di esecuzione, così come le informazioni sullo stato del sistema e le statistiche sul database.</p>
<ol start="1"><li><strong>Load test</strong>
<ul start="1" style="list-style: none"><li>Inserisce nel database i dati che verranno poi usati dai test Power e Throughput. Esegue una bulk insert dei grandi dati CSV corrispondenti allo Scale Factor.
</li></ul>
</li></ol>
<ol start="2"><li><strong>Power test</strong>
<ul start="1" style="list-style: none"><li>Esegue 22 query complesse.
</li></ul>
</li></ol>
<ol start="3"><li><strong>Throughput test</strong>
<ul start="1" style="list-style: none"><li>Esegue le stesse 22 query del test Power, ma simultaneamente in più di un processo.
</li></ul>
</li></ol>
<p>Ai fini di questo task, viene eseguito solo il test Power su un database precedentemente preparato con diversi SF. Il tempo di esecuzione di ogni query viene misurato e registrato in un database. Successivamente i risultati di un unico test con tutte le 22 query verranno disegnati in un istogramma per comparare le differenti configurazioni.</p>
<h2 class="anchored_heading" id="preparazione-dellambiente-dei-benchmark">Preparazione dell'ambiente dei benchmark</h2>
<h3 class="anchored_heading" id="permessi-per-sudo">Permessi per sudo</h3>
<p>L'utente che eseguirà i benchmark deve avere i permessi per sudo sulla macchina.</p>
<p>Per pulire le cache di sistema tra un'esecuzione di una query e l'altra, lo script di automazione lancia il seguente comando:</p>
<pre class="fixed">sudo /sbin/sysctl vm.drop_caches<span class="o">=</span>3
</pre><p>Il comando deve essere eseguito con i permessi da superutente. Anche se l'utente passa una password a sudo, questa password scade dopo un timeout. Perché il comando funzioni senza password, occorre aggiungere al file visudo la riga seguente (per modificarlo si può usare il comando <code>"sudo visudo"</code>):</p>
<pre class="fixed"><span class="s1">&#39;username&#39;</span> <span class="nv">ALL</span><span class="o">=</span>NOPASSWD:/sbin/sysctl
</pre><p>...dove <code>'username'</code> è l'utente che esegue il benchmark.</p>
<h3 class="anchored_heading" id="il-software-necessario">Il software necessario</h3>
<p>I benchmark automatizzati di DBT3 necessitano dei seguenti software:</p>
<ul start="1"><li><strong><a href="http://www.perl.org/">Perl</a></strong>
<ul start="1" style="list-style: none"><li><strong>Home del progetto:</strong> <a href="http://www.perl.org/">http://www.perl.org/</a>
</li></ul>
</li></ul>
<ul start="1"><li><strong><a href="https://launchpad.net/mariadb-tools">mariadb-tools</a></strong>
<ul start="1" style="list-style: none"><li><strong>Home del progetto:</strong> <a href="https://launchpad.net/mariadb-tools">https://launchpad.net/mariadb-tools</a>
</li><li>La cartella del progetto si chiama "<code>dbt3_benchmark</code>" ed è sotto <code>mariadb-tools</code>.
</li></ul>
</li></ul>
<ul start="1"><li><strong><a href="http://sourceforge.net/projects/osdldbt/files/dbt3/">dbt3-1.9</a></strong>
<ul start="1" style="list-style: none"><li><strong>Download:</strong> <a href="http://sourceforge.net/projects/osdldbt/files/dbt3/">http://sourceforge.net/projects/osdldbt/files/dbt3/</a>
</li></ul>
</li></ul>
<ul start="1"><li><strong><a href="http://www.gnuplot.info/">Gnuplot 4.4</a></strong> <span>&mdash;</span> programma per l'output grafico. 
<ul start="1" style="list-style: none"><li><strong>Home del progetto:</strong> <a href="http://www.gnuplot.info/">http://www.gnuplot.info/</a>
</li></ul>
</li></ul>
<ul start="1"><li><strong><a href="http://search.cpan.org/~simon/Config-Auto-0.03/Auto.pm">Config::Auto</a></strong> <span>&mdash;</span>
  un modulo Perlche legge i file di configurazione. Il comando per installarlo è: <pre class="fixed">sudo cpan Config::Auto
</pre>
</li></ul>
<ul start="1"><li><strong><a href="http://search.cpan.org/~capttofu/DBD-mysql-4.020/lib/DBD/mysql.pm">DBD::mysql</a></strong> <span>&mdash;</span>
  un modulo Perl per connettersi a MariaDB/MySQL e PostgreSQL. Il comando per installarlo è: <pre class="fixed">sudo cpan DBD::mysql
</pre>
</li></ul>
<p><strong>NOTA:</strong> E' possibile che appaia un errore che dice che CPAN non è riuscito a trovare <code>mysql_config</code>. In questo caso occorre installare la libreria client di sviluppo mysql. In OpenSuse il comando è: </p><pre class="fixed">sudo zypper install libmysqlclient-devel
</pre>
<p>In alternativa questo modulo può essere installato manualmente seguento queste istruzioni:</p>
<ol start="1"><li>Si scarichi DBD-mysql-4.020.tar.gz da <a href="http://search.cpan.org/~capttofu/DBD-mysql-4.020/lib/DBD/mysql.pm">http://search.cpan.org/~capttofu/DBD-mysql-4.020/lib/DBD/mysql.pm</a> e lo si decomprima
</li></ol>
<ol start="2"><li>Si esegua lo script Perl PerlMake.pl sotto la directory decompressa: <pre class="fixed">perl Makefile.PL --mysql_config<span class="o">=</span>/path/to/some/mysql_binary_distribution/bin/mysql_config
</pre>
</li></ol>
<ol start="3"><li>Si esegua <code>make</code> per compilare <code>DBD::mysql</code>:<pre class="fixed">make
</pre>
</li></ol>
<ol start="4"><li>Si aggiungano i percorsi necessari per poter eseguire <code>DBD::mysql</code>: <pre class="fixed"><span class="nb">export</span> <span class="nv">PERL5LIB</span><span class="o">=</span><span class="s2">&quot;/path/to/unzipped_DBD_mysql/DBD-mysql-4.020/lib&quot;</span>
<span class="nb">export</span> <span class="nv">LD_LIBRARY_PATH</span><span class="o">=</span><span class="s2">&quot;/path/to/unzipped_DBD_mysql/DBD-mysql-4.020/blib/arch/auto/DBD/mysql/:/path/to/some/mysql_binary_distribution/lib/&quot;</span>
</pre>
</li></ol>
<h3 class="anchored_heading" id="dbms-testati">DBMS testati</h3>
<ul start="1"><li><strong><a href="http://dev.mysql.com/downloads/mysql/#downloads">MySQL 5.5.x</a></strong>
<ul start="1" style="list-style: none"><li><strong>Download:</strong> <a href="http://dev.mysql.com/downloads/mysql/#downloads">http://dev.mysql.com/downloads/mysql/#downloads</a> →
  Generally Available (GA) Releases → Linux - Generic 2.6 (x86, 64-bit),
  Compressed TAR Archive - scaricare mysql-5.5.x-linux2.6-x86_64.tar.gz -
  file tag gzippato per Linux x86
</li></ul>
</li></ul>
<ul start="1"><li><strong><a href="http://dev.mysql.com/downloads/mysql/#downloads">MySQL 5.6.x</a></strong>
<ul start="1" style="list-style: none"><li><strong>Download:</strong> <a href="http://dev.mysql.com/downloads/mysql/#downloads">http://dev.mysql.com/downloads/mysql/#downloads</a> →
  Development Releases → Linux - Generic 2.6 (x86, 64-bit), Compressed TAR
  Archive - scaricare mysql-5.6.x-m5-linux2.6-x86_64.tar.gz - file tag gzippato per Linux x86
</li></ul>
</li></ul>
<ul start="1"><li><strong><a href="https://launchpad.net/maria/5.3">MariaDB 5.3.x</a></strong>
<ul start="1" style="list-style: none"><li><strong>Download:</strong> <a href="https://launchpad.net/maria/5.3">https://launchpad.net/maria/5.3</a> , scaricato con Bazaar: <pre class="fixed">bzr branch lp:maria/5.3
</pre>
</li></ul>
</li></ul>
<ul start="1"><li><strong><a href="https://launchpad.net/maria/5.3">MariaDB 5.5.x</a></strong>
<ul start="1" style="list-style: none"><li><strong>Download:</strong> <a href="https://launchpad.net/maria/5.5">https://launchpad.net/maria/5.5</a> , scaricato con Bazaar: <pre class="fixed">bzr branch lp:maria/5.5
</pre>
</li></ul>
</li></ul>
<ul start="1"><li><strong><a href="http://www.postgresql.org/ftp/source/v9.1rc1/">PostgreSQL</a></strong>
<ul start="1" style="list-style: none"><li><strong>Download:</strong> <a href="http://www.postgresql.org/ftp/source/v9.1rc1/">http://www.postgresql.org/ftp/source/v9.1rc1/</a>
</li></ul>
</li></ul>
<p><strong>NOTA:</strong> DBT3 richiede molto spazio su disco (per esempio i database MySQL 5.5.x + MyISAM con scale factor 30 necessita di circa 50 GB). Inoltre alcune query richiedono l'uso delle tabelle temporanee sotto la directory specificata nel parametro <code class="fixed" style="white-space:pre-wrap">--tmpdir</code> di <code>mysqld</code>. Nei file della configurazione già pronta la directory temporanea punta alla directory di sistema di <code>mysql</code> della distribuzione binaria, ma è meglio accertarsi che la suddetta directory abbia abbastanza spazio libero.</p>
<h2 class="anchored_heading" id="istruzioni-di-installazione">Istruzioni di installazione</h2>
<p><strong>NOTA:</strong> La directory in cui tutti i file verranno scaricati e installati verrà chiamata <code>$PROJECT_HOME</code>. Ed esempio potrebbe essere <code class="fixed" style="white-space:pre-wrap">~/benchmark/dbt3</code>.</p>
<h3 class="anchored_heading" id="scaricare-httpslaunchpadnetmariadb-toolsmariadb-tools">Scaricare <strong><a href="https://launchpad.net/mariadb-tools">mariadb-tools</a></strong></h3>
<ol start="1"><li>Ci si porti nella cartella del progetto <pre class="fixed"><span class="nb">cd</span> <span class="nv">$PROJECT_HOME</span>
</pre>
</li><li>Si scarichi la branch più recente da LaunchPad con Bazaar:<pre class="fixed">bzr branch lp:mariadb-tools
</pre>
</li></ol>
<p>Il progetto di dbt3 dovrebbe trovarsi nella seguente directory:</p>
<pre class="fixed"><span class="nv">$PROJECT_HOME</span>/mariadb-tools/dbt3_benchmark/
</pre><p>Il progetto <code>dbt3_benchmark</code> contiene i seguenti file e directory:</p>
<ul start="1"><li><strong>config</strong> <span>&mdash;</span> una cartella contenente i file di configurazione di MariaDB, MySQL e PostgreSQL. E' suddivisa in sottodirectory chiamate '<code>sXX</code>', dove <code>XX</code> è lo scale factor.
</li><li><strong>dbt3_mysql</strong> <span>&mdash;</span> una cartella contenente i file necessari per preparare i database di DBT3 e le query di test da eseguire con MySQL e MariaDB
</li><li><strong>tests</strong> <span>&mdash;</span> una cartella contenente le varie configurazioni dei test. Dentro ci sono le seguenti subdirectory:
<ul start="1"><li><strong>db_conf</strong> <span>&mdash;</span> qui si trovano i file di configurazione dei database.
</li><li><strong>queries_conf</strong> <span>&mdash;</span> qui ci sono i file di configurazione delle varie query.
</li><li><strong>results_db_conf</strong> <span>&mdash;</span> qui si trova la configurazione del database dei risultati
</li><li><strong>test_conf</strong> <span>&mdash;</span> qui ci sono le configurazioni dei test
</li><li><strong>launcher.pl</strong> <span>&mdash;</span> uno script in Perl che automatizza il test. I dettagli su come invocarlo e sulle sue funzionalità si trovano più avanti in questa pagina.
</li></ul>
</li></ul>
<h3 class="anchored_heading" id="preparare-il-workload-e-le-query">Preparare il workload e le query</h3>
<p>Ai fini del benchmark da <a href="http://sourceforge.net/projects/osdldbt/files/dbt3/">DBT3-1.9</a>, si necessita soltanto di <strong>DBGEN</strong> e <strong>QGEN</strong>. DBGEN è lo strumento che genera il workload per i test e QGEN è lo strumento che genera le query da usare nel test.</p>
<ol start="1"><li>Recarsi su <a href="http://sourceforge.net/projects/osdldbt/files/dbt3/">http://sourceforge.net/projects/osdldbt/files/dbt3/</a>
</li></ol>
<ol start="2"><li>Scaricare l'archivio di DBT3 1.9 nella cartella del progetto $PROJECT_HOME
</li></ol>
<ol start="3"><li>Decomprimere l'archivio nella cartella del progetto <pre class="fixed"><span class="nb">cd</span> <span class="nv">$PROJECT_HOME</span>
tar -zxf dbt3-1.9.tar.gz
</pre>
</li></ol>
<ol start="4"><li>Copiare il file tpcd.h nella cartella dbt3. Questo passaggio comprende le etichette che sono necessarie a MySQL/MariaDB nel costruire le query. <pre class="fixed">cp <span class="nv">$PROJECT_HOME</span>/mariadb-tools/dbt3_benchmark/dbt3_mysql/tpcd.h <span class="nv">$PROJECT_HOME</span>/dbt3-1.9/src/dbgen/
</pre>
</li></ol>
<ol start="5"><li>Copiare il file Makefile sotto <code>$PROJECT_HOME/mariadb-tools/dbt3_benchmark/dbt3_mysql/</code> nella cartella dbt3
</li></ol>
<ul start="1" style="list-style: none"><li><strong>NOTA:</strong> Questo passaggio deve essere eseguito solo se si desidera sovrascrivere il comportamento predefinito di QGEN. Dopo aver copiato questo Makefile e compilato il progetto, QGEN verrà impostato per generare le query per MariaDB/MySQL. Se si salta questo passaggio, per default QGEN genererà le query per PostgreSQL.<pre class="fixed">cp <span class="nv">$PROJECT_HOME</span>/mariadb-tools/dbt3_benchmark/dbt3_mysql/Makefile <span class="nv">$PROJECT_HOME</span>/dbt3-1.9/src/dbgen/
</pre>
</li></ul>
<ol start="6"><li>Recarsi in $PROJECT_HOME/dbt3-1.9/src/dbgen e si compili il progetto <pre class="fixed"><span class="nb">cd</span> <span class="nv">$PROJECT_HOME</span>/dbt3-1.9/src/dbgen
make
</pre>
</li></ol>
<ol start="7"><li>Impostare la variabile DSS_QUERY con la cartella contenente le query modello per MariaDB/MySQL o per PostgreSQL
<ol start="1"><li>Se si desidera creare le query più adatte al dialetto di MariaDB/MySQL, si esegua il seguente comando: <pre class="fixed"><span class="nb">export</span> <span class="nv">DSS_QUERY</span><span class="o">=</span><span class="nv">$PROJECT_HOME</span>/mariadb-tools/dbt3_benchmark/dbt3_mysql/mysql_queries/
</pre>
</li><li>Se si desidera usare i modelli predefiniti di PostgreSQL, si esegua il seguente comando: <pre class="fixed"><span class="nb">export</span> <span class="nv">DSS_QUERY</span><span class="o">=</span><span class="nv">$PROJECT_HOME</span>/dbt3-1.9/queries/pgsql/
</pre>
</li></ol>
</li></ol>
<ol start="8"><li>Creare una directory che conterrà le query così generate, in<pre class="fixed">mkdir <span class="nv">$PROJECT_HOME</span>/gen_query
</pre>
</li></ol>
<ol start="9"><li>Generare le query
</li></ol>
<div style="margin-left:2em"><p> <strong>NOTA:</strong> Gli esempi usano uno scale factor di 30. Se si desidera un SF diverso, si imposti il parametro <code>-s</code></p>
</div>
<ul start="1" style="list-style: none"><li><pre class="fixed"><span class="nb">cd</span> <span class="nv">$PROJECT_HOME</span>/dbt3-1.9/src/dbgen
./qgen -s <span class="m">30</span> <span class="m">1</span> &gt; <span class="nv">$PROJECT_HOME</span>/gen_query/s30-m/1.sql
./qgen -s <span class="m">30</span> <span class="m">2</span> &gt; <span class="nv">$PROJECT_HOME</span>/gen_query/s30-m/2.sql
./qgen -s <span class="m">30</span> <span class="m">3</span> &gt; <span class="nv">$PROJECT_HOME</span>/gen_query/s30-m/3.sql
./qgen -s <span class="m">30</span> <span class="m">4</span> &gt; <span class="nv">$PROJECT_HOME</span>/gen_query/s30-m/4.sql
./qgen -s <span class="m">30</span> <span class="m">5</span> &gt; <span class="nv">$PROJECT_HOME</span>/gen_query/s30-m/5.sql
./qgen -s <span class="m">30</span> <span class="m">6</span> &gt; <span class="nv">$PROJECT_HOME</span>/gen_query/s30-m/6.sql
./qgen -s <span class="m">30</span> <span class="m">7</span> &gt; <span class="nv">$PROJECT_HOME</span>/gen_query/s30-m/7.sql
./qgen -s <span class="m">30</span> <span class="m">8</span> &gt; <span class="nv">$PROJECT_HOME</span>/gen_query/s30-m/8.sql
./qgen -s <span class="m">30</span> <span class="m">9</span> &gt; <span class="nv">$PROJECT_HOME</span>/gen_query/s30-m/9.sql
./qgen -s <span class="m">30</span> <span class="m">10</span> &gt; <span class="nv">$PROJECT_HOME</span>/gen_query/s30-m/10.sql
./qgen -s <span class="m">30</span> <span class="m">11</span> &gt; <span class="nv">$PROJECT_HOME</span>/gen_query/s30-m/11.sql
./qgen -s <span class="m">30</span> <span class="m">12</span> &gt; <span class="nv">$PROJECT_HOME</span>/gen_query/s30-m/12.sql
./qgen -s <span class="m">30</span> <span class="m">13</span> &gt; <span class="nv">$PROJECT_HOME</span>/gen_query/s30-m/13.sql
./qgen -s <span class="m">30</span> <span class="m">14</span> &gt; <span class="nv">$PROJECT_HOME</span>/gen_query/s30-m/14.sql
./qgen -s <span class="m">30</span> <span class="m">15</span> &gt; <span class="nv">$PROJECT_HOME</span>/gen_query/s30-m/15.sql
./qgen -s <span class="m">30</span> <span class="m">16</span> &gt; <span class="nv">$PROJECT_HOME</span>/gen_query/s30-m/16.sql
./qgen -s <span class="m">30</span> <span class="m">17</span> &gt; <span class="nv">$PROJECT_HOME</span>/gen_query/s30-m/17.sql
./qgen -s <span class="m">30</span> <span class="m">18</span> &gt; <span class="nv">$PROJECT_HOME</span>/gen_query/s30-m/18.sql
./qgen -s <span class="m">30</span> <span class="m">19</span> &gt; <span class="nv">$PROJECT_HOME</span>/gen_query/s30-m/19.sql
./qgen -s <span class="m">30</span> <span class="m">20</span> &gt; <span class="nv">$PROJECT_HOME</span>/gen_query/s30-m/20.sql
./qgen -s <span class="m">30</span> <span class="m">21</span> &gt; <span class="nv">$PROJECT_HOME</span>/gen_query/s30-m/21.sql
./qgen -s <span class="m">30</span> <span class="m">22</span> &gt; <span class="nv">$PROJECT_HOME</span>/gen_query/s30-m/22.sql
</pre>
</li></ul>
<ol start="10"><li>Generare le query explain:
<pre class="fixed">./qgen -s <span class="m">30</span> -x <span class="m">1</span> &gt; <span class="nv">$PROJECT_HOME</span>/gen_query/s30-m/1_explain.sql
./qgen -s <span class="m">30</span> -x <span class="m">2</span> &gt; <span class="nv">$PROJECT_HOME</span>/gen_query/s30-m/2_explain.sql
./qgen -s <span class="m">30</span> -x <span class="m">3</span> &gt; <span class="nv">$PROJECT_HOME</span>/gen_query/s30-m/3_explain.sql
./qgen -s <span class="m">30</span> -x <span class="m">4</span> &gt; <span class="nv">$PROJECT_HOME</span>/gen_query/s30-m/4_explain.sql
./qgen -s <span class="m">30</span> -x <span class="m">5</span> &gt; <span class="nv">$PROJECT_HOME</span>/gen_query/s30-m/5_explain.sql
./qgen -s <span class="m">30</span> -x <span class="m">6</span> &gt; <span class="nv">$PROJECT_HOME</span>/gen_query/s30-m/6_explain.sql
./qgen -s <span class="m">30</span> -x <span class="m">7</span> &gt; <span class="nv">$PROJECT_HOME</span>/gen_query/s30-m/7_explain.sql
./qgen -s <span class="m">30</span> -x <span class="m">8</span> &gt; <span class="nv">$PROJECT_HOME</span>/gen_query/s30-m/8_explain.sql
./qgen -s <span class="m">30</span> -x <span class="m">9</span> &gt; <span class="nv">$PROJECT_HOME</span>/gen_query/s30-m/9_explain.sql
./qgen -s <span class="m">30</span> -x <span class="m">10</span> &gt; <span class="nv">$PROJECT_HOME</span>/gen_query/s30-m/10_explain.sql
./qgen -s <span class="m">30</span> -x <span class="m">11</span> &gt; <span class="nv">$PROJECT_HOME</span>/gen_query/s30-m/11_explain.sql
./qgen -s <span class="m">30</span> -x <span class="m">12</span> &gt; <span class="nv">$PROJECT_HOME</span>/gen_query/s30-m/12_explain.sql
./qgen -s <span class="m">30</span> -x <span class="m">13</span> &gt; <span class="nv">$PROJECT_HOME</span>/gen_query/s30-m/13_explain.sql
./qgen -s <span class="m">30</span> -x <span class="m">14</span> &gt; <span class="nv">$PROJECT_HOME</span>/gen_query/s30-m/14_explain.sql
./qgen -s <span class="m">30</span> -x <span class="m">15</span> &gt; <span class="nv">$PROJECT_HOME</span>/gen_query/s30-m/15_explain.sql
./qgen -s <span class="m">30</span> -x <span class="m">16</span> &gt; <span class="nv">$PROJECT_HOME</span>/gen_query/s30-m/16_explain.sql
./qgen -s <span class="m">30</span> -x <span class="m">17</span> &gt; <span class="nv">$PROJECT_HOME</span>/gen_query/s30-m/17_explain.sql
./qgen -s <span class="m">30</span> -x <span class="m">18</span> &gt; <span class="nv">$PROJECT_HOME</span>/gen_query/s30-m/18_explain.sql
./qgen -s <span class="m">30</span> -x <span class="m">19</span> &gt; <span class="nv">$PROJECT_HOME</span>/gen_query/s30-m/19_explain.sql
./qgen -s <span class="m">30</span> -x <span class="m">20</span> &gt; <span class="nv">$PROJECT_HOME</span>/gen_query/s30-m/20_explain.sql
./qgen -s <span class="m">30</span> -x <span class="m">21</span> &gt; <span class="nv">$PROJECT_HOME</span>/gen_query/s30-m/21_explain.sql
./qgen -s <span class="m">30</span> -x <span class="m">22</span> &gt; <span class="nv">$PROJECT_HOME</span>/gen_query/s30-m/22_explain.sql
</pre>
</li></ol>
<p>Ora, le query generate per i test su MariaDB/MySQL sono pronte e si trovano nella directory <code>$PROJECT_HOME/gen_query/s30-m/</code> (-m sta per MariaDB/MySQL).</p>
<p>Un'organizzazione ulteriore delle directory è lasciata all'utente.</p>
<ol start="11"><li>Creare una directory per il workload da generare <pre class="fixed">mkdir <span class="nv">$PROJECT_HOME</span>/gen_data/s30
</pre>
</li></ol>
<ol start="12"><li>Impostare la variabile DSS_PATH con la cartella che conterrà i dati delle tabelle. Il workload dei test si troverà lì. <pre class="fixed"><span class="nb">export</span> <span class="nv">DSS_PATH</span><span class="o">=</span><span class="nv">$PROJECT_HOME</span>/gen_data/s30/
</pre>
</li></ol>
<ol start="13"><li>Generare i dati delle tabelle
</li></ol>
<ul start="1" style="list-style: none"><li><strong>NOTA:</strong> L'esempio usa uno scale factor = <code>30</code>. Per modificarlo, ci si serva del parametro <code>-s</code>.<pre class="fixed">./dbgen -vfF -s 30
</pre>
</li></ul>
<ul start="1" style="list-style: none"><li>Ora i dati generati si trovano nella cartella impostata in <code class="fixed" style="white-space:pre-wrap">$DSS_PATH = $PROJECT_HOME/gen_data/</code>
</li></ul>
<p>Ai fini di questo benchmark, questi passaggi sono stati eseguiti con uno scale factor di 30 e si trovano su facebook-maria1 ai seguenti percorsi:</p>
<ul start="1"><li><code>/benchmark/dbt3/gen_data/s30</code> <span>&mdash;</span> i dati con uno scale factor di 30
</li><li><code>/benchmark/dbt3/gen_query/s30-m</code> <span>&mdash;</span> query generate per MariaDB/MySQL con scale factor 30
</li><li><code>/benchmark/dbt3/gen_query/s30-p</code> <span>&mdash;</span> query generate per PostgreSQL con scale factor 30
</li></ul>
<p>Si veda <a href="http://kb.askmonty.org/it/esempio-di-tempi-di-preparazione-di-dbt3/">Esempio di tempi di preparazione di DBT3</a> per sapere quanto tempo è necessario per preparare i database per i test.</p>
<h3 class="anchored_heading" id="scaricare-httpdevmysqlcomdownloadsmysqldownloadsmysql-55x">Scaricare <strong><a href="http://dev.mysql.com/downloads/mysql/#downloads">MySQL 5.5.x</a></strong></h3>
<ol start="1"><li>Si scarichi il file tar.gz nella cartella del progetto <code>$PROJECT_HOME/bin/</code>
</li></ol>
<ol start="2"><li>Si scompatti l'archivio con il comando seguente: <pre class="fixed">gunzip &lt; mysql-5.5.x-linux2.6-x86_64.tar.gz <span class="p">|</span>tar xf -
</pre>
</li></ol>
<p>Ora il server si dovrebbe avviare con questo comando: </p><pre class="fixed"><span class="nv">$PROJECT_HOME</span>/bin/mysql-5.5.x-linux2.6-x86_64/bin/mysqld_safe --datadir<span class="o">=</span>some/data/dir <span class="p">&amp;</span>
</pre>
<h3 class="anchored_heading" id="scaricare-httpdevmysqlcomdownloadsmysqldownloadsmysql-56x">Scaricare <strong><a href="http://dev.mysql.com/downloads/mysql/#downloads">MySQL 5.6.x</a></strong></h3>
<ol start="1"><li>Si scarichi il file tar.gz nella cartella del progetto <code>$PROJECT_HOME/bin/</code>
</li></ol>
<ol start="2"><li>Si scompatti l'archivio con il comando seguente: <pre class="fixed">gunzip &lt; mysql-5.6.x-m5-linux2.6-x86_64.tar.gz <span class="p">|</span>tar xf -
</pre>
</li></ol>
<p>Ora il server si dovrebbe avviare con questo comando:</p>
<pre class="fixed">$PROJECT_HOME/bin/mysql-5.6.x-m5-linux2.6-x86_64/bin/mysqld_safe --datadir=some/data/dir &amp;
</pre><h3 class="anchored_heading" id="scaricare-e-compilare-mariadb-53x-mariadb-55x">Scaricare e compilare <a href="/kb/en/what-is-mariadb-53/">MariaDB 5.3</a>.x / <a href="/kb/en/what-is-mariadb-55/">MariaDB 5.5</a>.x</h3>
<p><strong>NOTA:</strong> Questi passaggi si applicano anche a <a href="/kb/en/what-is-mariadb-55/">MariaDB 5.5</a>.x, cambiando soltanto il numero della versione</p>
<ol start="1"><li>Si scarichi con Bazaar il progetto <a href="/kb/en/what-is-mariadb-53/">mariadb 5.3</a> <pre class="fixed">bzr branch lp:maria/5.3
mv 5.3/ mariadb-5.3
</pre>
</li></ol>
<ol start="2"><li>Si compili MariaDB<pre class="fixed"><span class="nb">cd</span> mariadb-5.3/
./BUILD/compile-amd64-max
</pre>
</li></ol>
<ol start="3"><li>Si crei un file tar.gz<pre class="fixed">./scripts/make_binary_distribution
</pre>
</li></ol>
<ol start="4"><li>Si sposti il file tar.gz così generato e lo si scompatti in $PROJECT_HOME/bin, dove verrà usato dallo script di automazione<pre class="fixed">mv mariadb-5.3.x-beta-linux-x86_64.tar.gz <span class="nv">$PROJECT_HOME</span>/bin/
<span class="nb">cd</span> <span class="nv">$PROJECT_HOME</span>/bin/
tar -xf mariadb-5.3.x-beta-linux-x86_64.tar.gz
</pre>
</li></ol>
<p>Ora il server si dovrebbe avviare con il seguente comando:</p><pre class="fixed"><span class="nv">$PROJECT_HOME</span>/bin/mariadb-5.3.x-beta-linux-x86_64/bin/mysqld_safe --datadir<span class="o">=</span>some/data/dir <span class="p">&amp;</span>
</pre>
<h3 class="anchored_heading" id="preparare-i-database-per-i-benchmark">Preparare i database per i benchmark</h3>
<p><strong>NOTA:</strong> Queste istruzioni sono identiche per MariaDB, MySQL 5.5.x e MySQL 5.6.x, modificando solo le directory dei database, qui chiamate $DB_HOME (per esempio, per MySQL 5.5.x, $DB_HOME è <code>$PROJECT_HOME/bin/mysql-5.5.x-linux2.6-x86_64</code>). Inoltre si possono preparare i database di test dello Storage Engine InnoDB. Le istruzioni per preparare PostgreSQL si trovano nella sezione per scaricare, compilare e preparare PostgreSQL, più avanti in questa pagina.</p>
<ol start="1"><li>Si apra il file <code>$PROJECT_HOME/mariadb-tools/dbt3_benchmark/dbt3_mysql/make-dbt3-db_innodb.sql</code> e si modifichino i valori nelle chiamate ai comandi SQL che assomigliano al seguente: <pre class="fixed"><span class="k">LOAD</span> <span class="k">DATA</span> <span class="n">INFILE</span> <span class="s1">&#39;/some/path/to/gen_data/nation.tbl&#39;</span> <span class="k">into</span> <span class="k">table</span> <span class="n">nation</span> <span class="n">fields</span> <span class="n">terminated</span> <span class="k">by</span> <span class="s1">&#39;|&#39;</span><span class="p">;</span>
</pre>
</li></ol>
<ul start="1" style="list-style: none"><li>Sembrano tutti uguali, ma operano su tabelle diverse.
</li></ul>
<ul start="1" style="list-style: none"><li>Si sostituisca "/some/path/to/gen_data/" con la directory corretta, in cui si trovano i dati generati. Il nuovo comando dovrebbe assomigliare al seguente: <pre class="fixed"><span class="k">LOAD</span> <span class="k">DATA</span> <span class="n">INFILE</span> <span class="s1">&#39;~/benchmark/dbt3/gen_data/s30/nation.tbl&#39;</span> <span class="k">into</span> <span class="k">table</span> <span class="n">nation</span> <span class="n">fields</span> <span class="n">terminated</span> <span class="k">by</span> <span class="s1">&#39;|&#39;</span><span class="p">;</span>
</pre>
</li></ul>
<ol start="2"><li>Si crei un database MySQL vuoto in una cartella che verrà usata per il benchmark<pre class="fixed"><span class="nb">cd</span> <span class="nv">$DB_HOME</span>
./scripts/mysql_install_db --defaults-file<span class="o">=</span><span class="nv">$PROJECT_HOME</span>/mariadb-tools/dbt3_benchmark/config/s30/load_mysql_myisam_my.cnf --basedir<span class="o">=</span><span class="nv">$DB_HOME</span> --datadir<span class="o">=</span><span class="nv">$PROJECT_HOME</span>/db_data/myisam-s30/
</pre>
</li></ol>
<ul start="1" style="list-style: none"><li><strong>NOTA:</strong> Per InnoDB si modifichino i defaults-file in <code>load_mysql_innodb_my.cnf</code>.
</li></ul>
<ol start="3"><li>Si avvii il processo mysqld <code class="fixed" style="white-space:pre-wrap">./bin/mysqld_safe --defaults-file=$PROJECT_HOME/mariadb-tools/dbt3_benchmark/config/s30/load_mysql_myisam_my.cnf --tmpdir=$PROJECT_HOME/temp/ --socket=$PROJECT_HOME/temp/mysql.sock --datadir=$PROJECT_HOME/db_data/myisam-s30/ &amp;</code>
</li></ol>
<ul start="1" style="list-style: none"><li><strong>NOTA:</strong> Per InnoDB si modifichino i defaults-file in <code>load_mysql_innodb_my.cnf</code>.
   Inoltre ci si accerti di avere abbastanza spazio nella directory impostata nel parametro <code class="fixed" style="white-space:pre-wrap">--tmpdir</code>, perché il caricamento del database richiede molto spazio temporaneo.
</li></ul>
<ol start="4"><li>Si carichino i dati nel database eseguendo il file <code>make-dbt3-db_pre_create_PK.sql</code> (per InnoDB) o <code>make-dbt3-db_post_create_PK.sql</code> (per MyISAM)<code class="fixed" style="white-space:pre-wrap">./bin/mysql -u root -S $PROJECT_HOME/temp/mysql.sock &lt; $PROJECT_HOME/mariadb-tools/dbt3_benchmark/dbt3_mysql/make-dbt3-db_post_create_PK.sql</code>
</li></ol>
<ul start="1" style="list-style: none"><li><strong>NOTA:</strong> Per velocizzare la creazione, si raccomanda di usare <code>make-dbt3-db_pre_create_PK.sql</code> per caricare i database InnoDB e <code>make-dbt3-db_post_create_PK.sql</code> per i database MyISAM.
</li></ul>
<ol start="5"><li>Arrestare il server dei database:<pre class="fixed">./bin/mysqladmin --user<span class="o">=</span>root --socket<span class="o">=</span><span class="nv">$PROJECT_HOME</span>/temp/mysql.sock shutdown 0
</pre>
</li></ol>
<p>Ora si ha un database caricato con SF 30. La datadir è <code>$PROJECT_HOME/db_data/myisam-s30/</code></p>
<p>Gli stessi passaggi possono essere ripetuti con SF differenti e per differenti Storage Engine.</p>
<h3 class="anchored_heading" id="scaricare-compilare-e-preparare-httpwwwpostgresqlorgftpsourcev91rc1postgresql">Scaricare, compilare e preparare <strong><a href="http://www.postgresql.org/ftp/source/v9.1rc1/">PostgreSQL</a></strong></h3>
<ol start="1"><li>Ci si rechi su <a href="http://www.postgresql.org/ftp/source/v9.1rc1/">http://www.postgresql.org/ftp/source/v9.1rc1/</a>
</li></ol>
<ol start="2"><li>Si scarichi il file tramite il link postgresql-9.1rc1.tar.gz
</li></ol>
<ol start="3"><li>Si scompatti l'archivio nella cartella del progetto <pre class="fixed">gunzip &lt; postgresql-9.1rc1.tar.gz <span class="p">|</span>tar xf -
</pre>
</li></ol>
<ol start="4"><li>Per installare PostgreSQL si eseguano i seguenti comandi nella shell:<pre class="fixed">mkdir <span class="nv">$PROJECT_HOME</span>/PostgreSQL_bin
<span class="nb">cd</span> <span class="nv">$PROJECT_HOME</span>/postgresql-9.1rc1 
./configure --prefix<span class="o">=</span><span class="nv">$PROJECT_HOME</span>/bin/PostgreSQL_bin 
make
make install
</pre>
</li></ol>
<ul start="1" style="list-style: none"><li><strong>NOTA:</strong> Lo script di configurazione potrebbe non essere in grado di trovare le seguenti librerie: readline e zlib. In questo caso si esegua la configurazione senza di esse, aggiungendo i seguenti parametri alla riga di comando:
   <code class="fixed" style="white-space:pre-wrap">--without-readline --without-zlib</code>
</li></ul>
<ol start="5"><li>Si prepari il database dei test:<pre class="fixed">mkdir <span class="nv">$PROJECT_HOME</span>/db_data/postgre_s30
<span class="nb">cd</span> <span class="nv">$PROJECT_HOME</span>/bin/PostgreSQL_bin
./bin/initdb -D <span class="nv">$PROJECT_HOME</span>/db_data/postgre_s30
</pre>
</li></ol>
<ol start="6"><li>Si avvii il server:<pre class="fixed">./bin/postgres -D <span class="nv">$PROJECT_HOME</span>/db_data/postgre_s30 -p <span class="m">54322</span> <span class="p">&amp;</span>
</pre>
</li></ol>
<ol start="7"><li>Si carichi il dataload nel DB<pre class="fixed">./bin/createdb -O <span class="o">{</span>UTENTE<span class="o">}</span> dbt3 -p 54322
./bin/psql -p <span class="m">54322</span> -d dbt3 -f <span class="nv">$PROJECT_HOME</span>/mariadb-tools/dbt3_benchmark/dbt3_mysql/make-dbt3-db_pg.sql
</pre>
</li></ol>
<ul start="1" style="list-style: none"><li><strong>NOTA:</strong> Qui, al posto di <code class="fixed" style="white-space:pre-wrap">{UTENTE}</code>, occorre inserire il proprietario del database.
</li></ul>
<ol start="8"><li>Si arresti il server:
</li></ol>
<pre class="fixed">./bin/pg_ctl -D <span class="nv">$PROJECT_HOME</span>/db_data/postgre_s30/ -p <span class="m">54322</span> stop
</pre><p>Le istruzioni per preparare il carico di lavoro per il benchmark su facebook-maria1 sono quasi pronte per MariaDB, MySQL e PostgreSQL. Ecco le directory per i vari DBMS, Storage Engine e scale factor che sono pronte in facebook-maria1:</p>
<ul start="1"><li><code class="fixed" style="white-space:pre-wrap">~/benchmark/dbt3/db_data/myisam_s30</code>
  <span>&mdash;</span> dir dei dati per MariaDB/MySQL + MyISAM con scale
  factor 30
</li></ul>
<ul start="1"><li><code class="fixed" style="white-space:pre-wrap">~/benchmark/dbt3/db_data/innodb_mariadb_s30</code>
  <span>&mdash;</span> dir dei dati per MariaDB + InnoDB con scale factor 30
  (TODO)
</li></ul>
<ul start="1"><li><code class="fixed" style="white-space:pre-wrap">~/benchmark/dbt3/db_data/innodb_mysql_s30</code>
  <span>&mdash;</span> dir dei dati per
  MySQL + InnoDB con scale factor 30 (TODO)
</li></ul>
<ul start="1"><li><code class="fixed" style="white-space:pre-wrap">~/benchmark/dbt3/db_data/postgre_s30</code>
  <span>&mdash;</span> dir dei dati per
  PostgreSQL con scale factor 30 (TODO)
</li></ul>
<h3 class="anchored_heading" id="preparare-il-database-dei-risultati">Preparare il database dei risultati</h3>
<p>I risultati del benchmark verranno scritti in un database separato, che verrà eseguito da <a href="/kb/en/what-is-mariadb-53/">MariaDB 5.3</a>.x.</p>
<p><strong>NOTA:</strong> Il database dei risultati sarà soggetto a modifiche nelle versioni future del progetto DBT3. </p>
<p>Il database viene creato dal file
<code>$PROJECT_HOME/mariadb-tools/dbt3_benchmark/dbt3_mysql/make-results-db.sql</code>.
In esso è possibile trovare tutti i dettagli riguardo alle tabelle e alle colonne del database.</p>
<p>Per preparare il database, si seguano queste istruzioni:</p>
<ol start="1"><li>Ci si porti nella directory di installazione di <a href="/kb/en/what-is-mariadb-53/">MariaDB 5.3</a>.x<pre class="fixed"><span class="nb">cd</span> <span class="nv">$PROJECT_HOME</span>/bin/mariadb-5.3.x-beta-linux-x86_64
</pre>
</li></ol>
<ol start="2"><li>Si installino le tabelle del database di sistema nella directory dei risultati (per esempio <code>$PROJECT_HOME/db_data/dbt3_results_db</code>)<pre class="fixed">./scripts/mysql_install_db --datadir<span class="o">=</span><span class="nv">$PROJECT_HOME</span>/db_data/dbt3_results_db
</pre>
</li></ol>
<ol start="3"><li>Si avvii il mysqld del db dei risultati<pre class="fixed">./bin/mysqld_safe --defaults-file<span class="o">=</span><span class="nv">$PROJECT_HOME</span>/mariadb-tools/dbt3_benchmark/config/mariadb_my.cnf --port<span class="o">=</span><span class="m">12340</span> --socket<span class="o">=</span><span class="nv">$PROJECT_HOME</span>/temp/mysql_results.sock  --datadir<span class="o">=</span><span class="nv">$PROJECT_HOME</span>/db_data/dbt3_results_db/ <span class="p">&amp;</span>
</pre>
</li></ol>
<ol start="4"><li>Si installi il database<pre class="fixed">./bin/mysql -u root -P <span class="m">12340</span> -S <span class="nv">$PROJECT_HOME</span>/temp/mysql_results.sock &lt; <span class="nv">$PROJECT_HOME</span>/mariadb-tools/dbt3_benchmark/dbt3_mysql/make-results-db.sql
</pre>
</li></ol>
<ol start="5"><li>Si arresti il server del db dei risultati:<pre class="fixed">./bin/mysqladmin --user<span class="o">=</span>root --port<span class="o">=</span><span class="m">12340</span> --socket<span class="o">=</span><span class="nv">$PROJECT_HOME</span>/temp/mysql_results.sock shutdown 0
</pre>
</li></ol>
<h2 class="anchored_heading" id="script-di-automazione">Script di automazione</h2>
<h3 class="anchored_heading" id="configurare-ed-eseguire-un-benchmark">Configurare ed eseguire un benchmark</h3>
<p>Per poter eseguire un benchmark, occorre avere:</p>
<ul start="1"><li>5 file di configurazione:
<ol start="1"><li>Configurazione del <strong>DBMS</strong> (si veda <a href="#dbms-server-configuration">#dbms-server-configuration</a>)
</li><li>Configurazione dei <strong>Test</strong> (si veda <a href="#test-configuration">#test-configuration</a>)
</li><li>Configurazione delle <strong>Query</strong> (si veda <a href="#queries-configuration">#queries-configuration</a>)
</li><li>Configurazione del <strong>Database dei Risultati</strong> (si veda <a href="#results-database-configuration">#results-database-configuration</a>)
</li><li>File delle configurazione di <strong>Alto Livello</strong> che combina quanto elencato sopra (si veda <a href="#top-level-configuration">#top-level-configuration</a>)
</li></ol>
</li><li>uno <strong>script di automazione <code>launcher.pl</code></strong>che dovrebbe trovarsi in <code>mariadb-tools/dbt3_benchmark/</code>
</li><li><strong>parametri di avvio</strong> che dovrebbero essere passati allo script di automazione (si veda <a href="#script-startup-parameters">#script-startup-parameters</a>).
</li></ul>
<p>Per ognuna di esse, si troveranno ulteriori dettagli nelle sezioni seguenti.</p>
<p>Ogni benchmark si configura tramite un insieme di file. Quelli di esempio (predefiniti) si trovano sotto la directory 'mariadb-tools/dbt3_benchmark/tests'. Ogni file di configurazione utilizza la sintassi 'ini' e viene letto dallo script di automazione in Perl con il modulo CPAN <a href="http://search.cpan.org/~simon/Config-Auto-0.03/Auto.pm">Config::Auto</a></p>
<h4 class="anchored_heading" id="parole-chiave-della-configurazione">Parole chiave della configurazione</h4>
<p>Ogni file di configurazione potrebbe contenere delle parole chiave che verranno poi sostituite dallo script con dei valori particolari. Esse possono essere usate per comodità, allo scopo di rendere i file più riutilizzabili all'interno dell'ambiente del benchmark. Queste parole chiave sono:</p>
<ul start="1"><li><code>$PROJECT_HOME</code> <span>&mdash;</span> è la directory in cui si trova il progetto '<code>mariadb-tools</code>', oppure un percorso base per l'intero progetto (esempio: "<code class="fixed" style="white-space:pre-wrap">DBMS_HOME = $PROJECT_HOME/bin/mariadb-5.3.x-beta-linux-x86_64</code>").
  Viene sostituita con il valore del parametro di avvio <strong>'project-home</strong>', passato a <strong>launcher.pl</strong>,
</li></ul>
<ul start="1"><li><code>$DATADIR_HOME</code> <span>&mdash;</span> è la directory in cui si trovano le directory dei dati del benchmark (esempio: "<code class="fixed" style="white-space:pre-wrap">$DATADIR_HOME/myisam-s30</code>"). Viene sostituita con il valore del parametro di avvio <strong>'datadir-home'</strong>, passato a <strong>launcher.pl</strong>.
</li></ul>
<ul start="1"><li><code>$QUERIES_HOME</code> <span>&mdash;</span> è la directory in cui si trovano le query (esempio:  "<code>$QUERIES_HOME/s30-m</code>"
  <span>&mdash;</span> sono le query per MariaDB/MySQL con scale factor 30). Viene sostituita con il valore del parametro di avvio <strong>'queries-home'</strong>, passato a <strong>launcher.pl</strong>.
</li></ul>
<ul start="1"><li><code>$SCALE_FACTOR</code> <span>&mdash;</span> è lo scale factor prescelto. Solitamente è parte della directory dei dati (esempio: "<code>$DATADIR_HOME/myisam-s$SCALE_FACTOR</code>"), di quella delle query (esempio: "<code>$QUERIES_HOME/s$SCALE_FACTOR-m</code>") e delle cartella di configurazione del database (esempio: <code>$PROJECT_HOME/mariadb-tools/dbt3_benchmark/config/s$SCALE_FACTOR</code>).
  Viene sostituita con il valore del parametro di avvio <strong>'scale-factor'</strong>, passato a <strong>launcher.pl</strong>.
</li></ul>
<p>Si noti che se anche uno solo dei file usa una di queste parole chiave, il parametro corrispondente di <strong>launcher.pl</strong> diviene obbligatorio.</p>
<h4 class="anchored_heading" id="configurazione-di-alto-livello">Configurazione di alto livello</h4>
<p>Un file di configurazione di alto livello definisce i percorsi dei di configurazione <strong>Test, DBMS, Queries</strong> e <strong>Results database</strong>.</p>
<p>Questi sono i file predefiniti nella directory
<code>mariadb-tools/dbt3_benchmark/tests/</code> e contengono le seguenti impostazioni:</p>
<div class="cstm-style darkheader-nospace-borders"><table><tr><th>Parameter</th><th>Description</th></tr>
<tr><td><code>RESULTS_DB_CONFIG</code></td><td>Il file di configurazione per il DB dei risultati</td></tr>
<tr><td><code>TEST_CONFIG</code></td><td>Il file di configurazione per i test</td></tr>
<tr><td><code>QUERIES_CONFIG</code></td><td>Il file di configurazione per le query</td></tr>
<tr><td><code>DB_CONFIG</code></td><td>Il file di configurazione per per il server del DBMS</td></tr>
</table>
</div><p>Questo file ha il seguente formato:</p>
<pre class="fixed">[common]
RESULTS_DB_CONFIG  = $PROJECT_HOME/mariadb-tools/dbt3_benchmark/tests/results_db_conf/results_db.conf
TEST_CONFIG        = $PROJECT_HOME/mariadb-tools/dbt3_benchmark/tests/test_conf/test_myisam.conf

[mariadb_5_3]
QUERIES_CONFIG 	= $PROJECT_HOME/mariadb-tools/dbt3_benchmark/tests/queries_conf/queries.conf
DB_CONFIG 	= $PROJECT_HOME/mariadb-tools/dbt3_benchmark/tests/db_conf/db_mariadb_5_3_myisam.conf

[mysql_5_5]
QUERIES_CONFIG 	= $PROJECT_HOME/mariadb-tools/dbt3_benchmark/tests/queries_conf/queries_mysql.conf
DB_CONFIG 	= $PROJECT_HOME/mariadb-tools/dbt3_benchmark/tests/db_conf/db_mysql_5_5_myisam.conf
...
</pre><p><strong>NOTA:</strong> Le impostazioni <code>RESULTS_DB_CONFIG</code> e <code>TEST_CONFIG</code> devono trovarsi nella sezione <code>[common]</code>. Esse servono all'intero test (debbene alcune impostazioni di <code>TEST_CONFIG</code> possano essere sovrascritte nel file <code>QUERIES_CONFIG</code>). Tutte le impostazioni che combinano <code>QUERIES_CONFIG</code> e
<code>DB_CONFIG</code> dovrebbero essere in una sezione separata (esempio: <code>[mariadb_5_3]</code>).</p>
<p>Una configurazione viene passata allo script di configurazione con il parametro <code class="fixed" style="white-space:pre-wrap">--test=/path/to/some_test_configuration.conf</code> (si veda <a href="#parametri-di-avvio-dello-script">#parametri-di-avvio-dello-script</a>)</p>
<h4 class="anchored_heading" id="configurazione-del-server-del-dbms">Configurazione del server del DBMS</h4>
<p>Questi file di configurazioni contengono impostazioni che descrivono il DBMS da testare. Di solito si trovano nella cartella <code>mariadb-tools/dbt3_benchmark/tests/db_conf</code>.</p>
<p>Ecco l'elenco dei parametri che possono essere impostati in questi file di configurazione:</p>
<div class="cstm-style darkheader-nospace-borders"><table><tr><th>Parametro</th><th>Spiegazione</th></tr>
<tr><td><code>DBMS_HOME</code></td><td>Percorso della cartella di installazione di MariaDB / MySQL / PostgreSQL is located.<br><br><strong>NOTA:</strong> Lo script di automazione usa "<code>./bin/mysqld_safe</code>" per avviare il processo <code>mysqld</code>. Perciò le versioni di MariaDB e MySQL dovrebbero essere "distribuzioni binarie".</td></tr>
<tr><td><code>DBMS_USER</code></td><td>L'utente del database da usare.</td></tr>
<tr><td><code>CONFIG_FILE</code></td><td>Il file di configurazione letto da mysqld o postgres all'avvio</td></tr>
<tr><td><code>SOCKET</code></td><td>Il socket da usare per avviare il server</td></tr>
<tr><td><code>PORT</code></td><td>La porta su cui il server sarà in ascolto</td></tr>
<tr><td><code>HOST</code></td><td>L'host in cui si trova il server</td></tr>
<tr><td><code>DATADIR</code></td><td>Percorso della directory dei dati di mysqld o postgres</td></tr>
<tr><td><code>TMPDIR</code></td><td>Dove si trovano le tabelle temporanee usate per l'ordinamento e il raggruppamento</td></tr>
<tr><td><code>DBNAME</code></td><td>Il nome del database (schema) in cui si trovano le tabelle del benchmark</td></tr>
<tr><td><code>KEYWORD</code></td><td>Questo testo viene scritto nel database dei risultati come parola chiave. Verrà anche usato come nome di una sottocartella contenente risultati e statistiche</td></tr>
<tr><td><code>DBMS</code></td><td>Database Management System da usare. Valori ammessi: "MySQL", "MariaDB" e "PostgreSQL"</td></tr>
<tr><td><code>STORAGE_ENGINE</code></td><td>Lo Storage Engine da usare (MyISAM, InnoDB, etc.)</td></tr>
<tr><td><code>STARTUP_PARAMS</code></td><td>Tutti i parametri da usare per avviare il processo mysqld o postgres process. Stesso formato usato nella riga di comando</td></tr>
<tr><td><code>GRAPH_HEADING</code></td><td>L'heading della grafica di questo test specifico</td></tr>
<tr><td><code>MYSQL_SYSTEM_DIR</code></td><td>Si veda <em>"Nota su <code>MYSQL_SYSTEM_DIR</code>"</em>, sotto.</td></tr>
<tr><td><code>READ_ONLY</code></td><td>Se impostato a 1, il processo mysqld viene avviato con il parametro di avvio '<code class="fixed" style="white-space:pre-wrap">--read-only</code>'</td></tr>
<tr><td><code>PRE_RUN_SQL</code></td><td>Comandi SQL da eseguire prima di ogni query</td></tr>
<tr><td><code>POST_RUN_SQL</code></td><td>Comandi SQL da eseguire dopo ogni query</td></tr>
<tr><td><code>PRE_TEST_SQL</code></td><td>Comandi SQL da eseguire prima dell'intero test</td></tr>
<tr><td><code>POST_TEST_SQL</code></td><td>Comandi SQL da eseguire dopo l'intero test</td></tr>
</table>
</div><div class="cstm-style graybox"><p><strong>Nota su <code>MYSQL_SYSTEM_DIR</code>:</strong><br><br></p>
<p>Questa opzione è stata aggiunta per comodità quando si desidera risparmiare tempo e spazio su disco per generare i database per diversi DBMS (e versioni diverse degli stessi) utilizzando un'unica directory dei dati. Quando si eseguono più versioni di MariaDB/MySQL su una singola directory dei dati, bisognerebbe usare <a href="http://dev.mysql.com/doc/refman/5.5/en/mysql-upgrade.html">mysql-upgrade</a> per aggiustare le tabelle di sistema. Quindi in una directory dei dati, è possibile preparare le seguenti directory per diverse directory di sistema di MariaDB/MySQL:
<br><br></p>
<ul start="1"><li><code>mysql_mysql_5_5</code> <span>&mdash;</span> una copia della directory di sistema '<code>mysql</code>' aggiornata con MySQL 5.5.x
</li><li><code>mysql_mariadb_5_3</code> <span>&mdash;</span> una copia della directory di sistema '<code>mysql</code>' aggiornata con <a href="/kb/en/what-is-mariadb-53/">MariaDB 5.3</a>.x
</li><li><code>mysql_mariadb_5_5</code> <span>&mdash;</span> una copia della directory di sistema '<code>mysql</code>' aggiornata con <a href="/kb/en/what-is-mariadb-55/">MariaDB 5.5</a>.x<br><br>
</li></ul>
<p>Se <code>MYSQL_SYSTEM_DIR</code> è impostato a una di queste directory, lo script di automazione scollegherò l'attuale directory di sistema 'mysql' e creerà un nuovo link simbolico con lo stesso nome della directory impostata.<br><br></p>
<p>Ecco un esempio:
<br></p>
<pre class="fixed">unlink /path/to/datadir/mysql
ln -s /path/to/value/in/MYSQL_SYSTEM_DIR/mysql_mariadb_5_3 /path/to/datadir/mysql
</pre><p><br>
<strong>NOTA:</strong> Questo approccio è adattabile ai test per MyISAM.</p>
</div><p>Il file di configurazione assomiglia a quanto segue:</p>
<pre class="fixed">[db_settings]
DBMS_HOME	= $PROJECT_HOME/bin/mariadb-5.3.2-beta-linux-x86_64
DBMS_USER	= root
...
</pre><p>Si noti che la sezione <code>[db_settings]</code> è necessaria perché il file venga interpretato correttamente dallo script di automazione.</p>
<h4 class="anchored_heading" id="configurazione-dei-test">Configurazione dei test</h4>
<p>Questi file di configurazione contengono le impostazioni concernenti i test. Essi si trovano nella directory <strong>mariadb-tools/dbt3_benchmark/tests/test_conf</strong>. </p>
<p>Ecco un elenco dei parametri che possono essere impostati in questo file:</p>
<div class="cstm-style darkheader-nospace-borders"><table><tr><th>Parametro</th><th>Spiegazione</th></tr>
<tr><td><code>QUERIES_AT_ONCE</code></td><td>Se è impostato a <code>1</code>, tutte le query verranno eseguite sequenzialmente senza riavviare il server o svuotare le cache tra le query.</td></tr>
<tr><td><code>CLEAR_CACHES</code></td><td>Se è <code>1</code>, le cache su disco verranno svuotate prima di testare ogni query.</td></tr>
<tr><td><code>WARMUP</code></td><td>Esegue un riscaldamento prima di lanciare le query.</td></tr>
<tr><td><code>EXPLAIN</code></td><td>Esegue un comando Explain prima di ogni query. I risultati vengono scritti in un file nella directory dei risultati.</td></tr>
<tr><td><code>RUN</code></td><td>Esegue il test effettivo.</td></tr>
<tr><td><code>ANALYZE_EXPLAIN</code></td><td>Un meccanismo di estrazione dei risultati dove solo il miglior piano di esecuzione (risultati di <code>EXPLAIN</code> select) viene misurato. E' progettato per essere usato con lo Storage Engine InnoDB, laddove il piano scelto varia riavviando il server (si veda <a href="#meccanismo-di-estrazione-dei-risultati">#meccanismo-di-estrazione-dei-risultati</a>).</td></tr>
<tr><td><code>MIN_MAX_OUT_OF_N</code></td><td>Un meccanismo di estrazione dei risultati in cui i test del valore minimo e del valore massimo di <code>N</code> (valore del parametro <code>NUM_TESTS</code>) vengono presi come risultato. Questo parametro si può usare quando si testa lo Storage Engine InnoDB (si veda <a href="#meccanismo-di-estrazione-dei-risultati">#meccanismo-di-estrazione-dei-risultati</a>).</td></tr>
<tr><td><code>SIMPLE_AVERAGE</code></td><td>Un messanismo di estrazione dei risultati in cui il risultato finale è la media del tempo impiegato dai test. Il numero di test per query è determinato dal parametro NUM_TESTS. Si noti che, se anche un test raggiunge il timeout, il risultato complessivo sarà 'time-out'. Questo parametro si può usare per testare lo Storage Engine MyISAM, perché in questo caso il piano di esecuzione è costante (si veda <a href="#meccanismo-di-estrazione-dei-risultati">#meccanismo-di-estrazione-dei-risultati</a>).</td></tr>
<tr><td><code>NUM_TESTS</code></td><td>Quanti test devono essere eseguiti per ogni query. Se ANALYZE_EXPLAIN è impostato, questo valore può essere impostato a 0, che significa che i test devono continuare finché un numero sufficiente di risultati sarà stato estratto (si veda l'impostazione <code>CLUSTER_SIZE</code>). Questo parametro è molto importante se si specifica <code>MIN_MAX_OUT_OF_N</code> o <code>SIMPLE_AVERAGE</code>.</td></tr>
<tr><td><code>MAX_SKIPPED_TESTS</code></td><td>Se ANALYZE_EXPLAIN è impostato e viene scelto il piano di esecuzione più lento, la query non viene eseguita e il server viene riavviato per cambiare piano. Se il server viene riavviato più di <code>MAX_SKIPPED_TESTS</code> volte, è evidente che non ci sono altri piani di esecuzione e lo script passa al benchmark della prossima query.</td></tr>
<tr><td><code>WARMUPS_COUNT</code></td><td>Quante esecuzioni di riscaldamento devono essere eseguite prima del benchmark effettivo.</td></tr>
<tr><td><code>CLUSTER_SIZE</code></td><td>Quanto deve essere grande un cluster con i risultati di una query per estrarre il risultato finale. Si usa insieme al meccanismo di estrazione dei risultati <code>ANALYZE_EXPLAIN</code>.</td></tr>
<tr><td><code>MAX_QUERY_TIME</code></td><td>Quante volte al massimo una query può essere testata. Attualmente può essere usato solo con <code>ANALYZE_EXPLAIN</code>.</td></tr>
<tr><td><code>TIMEOUT</code></td><td>Il tempo massimo che una query può impiegare. Attualmente è utilizzato solo con MySQL e MariaDB.</td></tr>
<tr><td><code>OS_STATS_INTERVAL</code></td><td>Intervallo di tempo che intercorre tra le letture delle statistiche del sistema riguardo alla CPU, la memoria, etc.</td></tr>
<tr><td><code>PRE_RUN_OS</code></td><td>Comandi di sistema da eseguire prima di ogni query</td></tr>
<tr><td><code>POST_RUN_OS</code></td><td>Comandi di sistema da eseguire dopo ogni query</td></tr>
<tr><td><code>PRE_TEST_OS</code></td><td>Comandi di sistema da eseguire prima dell'intero test</td></tr>
<tr><td><code>POST_TEST_OS</code></td><td>Comandi di sistema da eseguire dopo il completamento dell'intero test</td></tr>
</table>
</div><p>Il file di configurazione assomiglia a quanto segue:</p>
<pre class="fixed">QUERIES_AT_ONCE = 0
CLEAR_CACHES	= 1
WARMUP		= 0
...
</pre><h4 class="anchored_heading" id="configurazione-delle-query">Configurazione delle query</h4>
<p>Questi file di configurazione contengono l'elenco di tutte le query da testare su ogni database. Alcune impostazioni della <code>Configurazione del server del DBMS</code> e della <code>Configurazione dei test</code> possono essere sovrascritte nei file della <code>Configurazione delle query</code>.  Queste impostazioni si trovano nella directory <code>mariadb-tools/dbt3_benchmark/tests/queries_conf</code>.</p>
<p>Ecco un elenco dei parametri che possono essere impostati in questo file:</p>
<div class="cstm-style darkheader-nospace-borders"><table><tr><th>Parametro</th><th>Spiegazione</th></tr>
<tr><td><code>QUERIES_HOME</code></td><td>Dove si trovano le query, sul disco. Questo valore viene concatenato all'opzione <code>QUERY</code> per comporre il percorso delle query. <strong>NOTA:</strong> Questa impostazione deve trovarsi nella sezione <code>[queries_settings]</code>.</td></tr>
<tr><td><code>CONFIG_FILE</code></td><td>Sovrascrive il parametro di avvio <code>CONFIG_FILE</code> del file di configurazione del <strong>server del DMBS</strong> e determina il file di configurazione del database da utilizzare. Può essere utilizzata se un file di configurazione privo di ottimizzazioni deve essere impostato come file di configurazione per queste particolari query.<br><br><strong>NOTA:</strong> Questa impostazione deve trovarsi nella sezione <code>[queries_settings]</code>.</td></tr>
<tr><td><code>QUERY</code></td><td>Nome della query che si trova nella cartella <code>QUERIES_HOME</code>. Esempio: "1.sql"</td></tr>
<tr><td><code>EXPLAIN_QUERY</code></td><td>Nome dell'explain delle query nella  cartella <code>QUERIES_HOME</code>. Esempio: "1_explain.sql"</td></tr>
<tr><td><code>TMPDIR</code></td><td>Dovrascrive l'impostazione TMPDIR della configurazione del <code>server del DMBS</code>.</td></tr>
<tr><td><code>STARTUP_PARAMS</code></td><td>Sovrascrive l'impostazione <code>STARTUP_PARAMS</code> della configurazione del <code>server del DMBS</code>. Utilizzando questa impostazione si possono modificare alcuni particolari parametri (come le ottimizzazioni e i buffer) del server del DB.</td></tr>
<tr><td><code>PRE_RUN_SQL</code></td><td>Sovrascrive l'impostazione <code>PRE_RUN_SQL</code> della configurazione del <strong>server del DMBS</strong>.</td></tr>
<tr><td><code>POST_RUN_SQL</code></td><td>Sovrascrive l'impostazione <code>POST_RUN_SQL</code> della configurazione del <strong>server del DMBS</strong>.</td></tr>
<tr><td><code>RUN</code></td><td>TSovrascrive l'impostazione <code>RUN</code> della configurazione dei <strong>test</strong>.</td></tr>
<tr><td><code>EXPLAIN</code></td><td>Sovrascrive l'impostazione <code>EXPLAIN</code> della configurazione dei <strong>test</strong>.</td></tr>
<tr><td><code>TIMEOUT</code></td><td>Sovrascrive l'impostazione <code>TIMEOUT</code> della configurazione dei <strong>test</strong>.</td></tr>
<tr><td><code>NUM_TESTS</code></td><td>Sovrascrive l'impostazione <code>NUM_TESTS</code> della configurazione dei <strong>test</strong>.</td></tr>
<tr><td><code>MAX_SKIPPED_TESTS</code></td><td>Sovrascrive l'impostazione <code>MAX_SKIPPED_TESTS</code> della configurazione dei <strong>test</strong>.</td></tr>
<tr><td><code>WARMUP</code></td><td>Sovrascrive l'impostazione <code>WARMUP</code> della configurazione dei <strong>test</strong>.</td></tr>
<tr><td><code>WARMUPS_COUNT</code></td><td>Sovrascrive l'impostazione <code>WARMUPS_COUNT</code> della configurazione dei <strong>test</strong>.</td></tr>
<tr><td><code>MAX_QUERY_TIME</code></td><td>Sovrascrive l'impostazione <code>MAX_QUERY_TIME</code> della configurazione dei <strong>test</strong>.</td></tr>
<tr><td><code>CLUSTER_SIZE</code></td><td>Sovrascrive l'impostazione <code>CLUSTER_SIZE</code> della configurazione dei <strong>test</strong>.</td></tr>
<tr><td><code>PRE_RUN_OS</code></td><td>Sovrascrive l'impostazione <code>PRE_RUN_OS</code> della configurazione dei <strong>test</strong>.</td></tr>
<tr><td><code>POST_RUN_OS</code></td><td>Sovrascrive l'impostazione <code>POST_RUN_OS</code> della configurazione dei <strong>test</strong>.</td></tr>
<tr><td><code>OS_STATS_INTERVAL</code></td><td>Sovrascrive l'impostazione <code>OS_STATS_INTERVAL</code> della configurazione dei <strong>test</strong>.</td></tr>
</table>
</div><p>Il file di configurazione delle query assomiglia a quanto segue:</p>
<pre class="fixed">[queries_settings]
QUERIES_HOME = /percorso/delle/queries

[query1]
QUERY=1.sql
EXPLAIN_QUERY=1_explain.sql
STARTUP_PARAMS=

[query2]
QUERY=2.sql
EXPLAIN_QUERY=2_explain.sql
STARTUP_PARAMS=--optimizer_switch='mrr=on' --mrr_buffer_size=8M --some_startup_parmas
...
</pre><p>...dove "<code>QUERIES_HOME = /percorso/delle/queries</code>" si può sostituire con "<code>QUERIES_HOME = $QUERIES_HOME/s$SCALE_FACTOR-m</code>", nel qual caso <code>$QUERIES_HOME</code> e $SCALE_FACTOR verranno sostituiti dai parametri di avvio passati a <code>launcher.pl</code> (si veda <a href="#parametri-di-avvio-dello-script">#parametri-di-avvio-dello-script</a>)</p>
<p><strong>NOTA:</strong> La sezione <code>[queries_settings]</code> è necessaria perché il file venga interpretato correttamente.Inoltre, le impostazioni di ogni query devono trovarsi in una sezione che ha un nome univoco (esempio: <code>[query1]</code> o <code>[1.sql]</code>)</p>
<h4 class="anchored_heading" id="configurazione-del-database-dei-risultati">Configurazione del database dei risultati</h4>
<p>Questi file di configurazione contengono impostazioni concernenti il database nel quale vengono scritti i risultati. Essi si trovano nella cartella <code>mariadb-tools/dbt3_benchmark/tests/results_db_conf</code>.</p>
<p>Ecco l'elenco dei parametri che possono essere impostati in questo file:</p>
<div class="cstm-style darkheader-nospace-borders"><table><tr><th>Parametro</th><th>Spiegazione</th></tr>
<tr><td><code>DBMS_HOME</code></td><td>Percorso della directory del database. Esempio: "<code>$PROJECT_HOME/mariadb-5.3.x-beta-linux-x86_64</code>". Si dovrebbe usare una distribuzione binaria di MariaDB o MySQL.</td></tr>
<tr><td><code>DBMS_USER</code></td><td>L'utente usato dal DBMS</td></tr>
<tr><td><code>DATADIR</code></td><td>Percorso della directory dei dati del database dei risultati</td></tr>
<tr><td><code>CONFIG_FILE</code></td><td>Quale file di configurazione è usato dal database.</td></tr>
<tr><td><code>SOCKET</code></td><td>Il socket che sarà usato dal database dei risultati. Deve essere differente da quello usato dai database di test.</td></tr>
<tr><td><code>PORT</code></td><td>La porta usata dal database dei risultati. Deve essere differente da quello usato dai database di test.</td></tr>
<tr><td><code>STARTUP_PARAMS</code></td><td>I parametri di avvio da usare all'avvio del server.</td></tr>
<tr><td><code>DBNAME</code></td><td>Il nome del database da usare.</td></tr>
<tr><td><code>HOST</code></td><td>L'host in cui si trova il database dei risultati.</td></tr>
</table>
</div><p>La configurazione del dei risultati assomiglia alla seguente:</p>
<pre class="fixed">DBMS_HOME	= $PROJECT_HOME/mariadb-5.3.x-beta-linux-x86_64
DBMS_USER	= root
...
</pre><h4 class="anchored_heading" id="parametri-di-avvio-dello-script">Parametri di avvio dello script</h4>
<p><code>launcher.pl</code> potrebbe accettare i parametri passati in questo modo: "<code class="fixed" style="white-space:pre-wrap">--some-param</code>". Si noti che queste opzioni sono case-sensitive, cioè le lettere minuscole sono considerate diverse dalle maiuscole. I parametri si scrivono in maiuscolo quando devono sovrascrivere le impostazioni che si trovano in un altro file.</p>
<p>Ecco l'elenco dei parametri di avvio:</p>
<div class="cstm-style darkheader-nospace-borders"><table><tr><th>Parametro</th><th>Spiegazione</th></tr>
<tr><td><code>test</code></td><td>Il file di configurazione di alto livello da utilizzare. Questo parametro è <strong>obbligatorio</strong>.</td></tr>
<tr><td><code>results-output-dir</code></td><td>Percorso dei risultati del benchmark. Un timestamp viene automaticamente aggiunto al nome della directory per poter tenere traccia della data e dell'ora del benchmark. Questo parametro è <strong>obbligatorio</strong>.</td></tr>
<tr><td><code>dry-run</code></td><td>Se è impostato, non verrà eseguito alcun benchmark. Verranno solo scritti i messaggi sulle operazioni che avrebbero dovuto essere svolte.</td></tr>
<tr><td><code>project-home</code></td><td>E' obbligatorio se uno dei file di configurazione contiene la variabile '<code>$PROJECT_HOME</code>'. Se tutti i file utilizzano percorsi assoluti, verrà ignorata.</td></tr>
<tr><td><code>datadir-home</code></td><td>Nei file di configurazione, la stringa '<code>$DATADIR_HOME</code>' viene sostituita con questo valore. Se la stringa non c'è, il parametro viene ignorato.</td></tr>
<tr><td><code>queries-home</code></td><td>Nei file di configurazione, la stringa '<code>$QUERIES_HOME</code>' viene sostituita con questo valore. Se la stringa non c'è, il parametro viene ignorato.</td></tr>
<tr><td><code>scale-factor</code></td><td>Nei file di configurazione, la stringa '<code>$SCALE_FACTOR</code>' viene sostituita con questo valore. Se la stringa non c'è, il parametro viene ignorato.</td></tr>
<tr><td><code>CLEAR_CACHES</code></td><td>Se impostato, sovrascrive l'impostazione scritta nel file di configurazione dei <strong>test</strong>.</td></tr>
<tr><td><code>QUERIES_AT_ONCE</code></td><td>Se impostato, sovrascrive l'impostazione scritta nel file di configurazione dei <strong>test</strong>.</td></tr>
<tr><td><code>RUN</code></td><td>Se impostato, sovrascrive l'impostazione scritta nel file di configurazione dei <strong>test</strong>.</td></tr>
<tr><td><code>EXPLAIN</code></td><td>Se impostato, sovrascrive l'impostazione scritta nel file di configurazione dei <strong>test</strong>.</td></tr>
<tr><td><code>TIMEOUT</code></td><td>Se impostato, sovrascrive l'impostazione scritta nel file di configurazione dei <strong>test</strong>.</td></tr>
<tr><td><code>NUM_TESTS</code></td><td>Se impostato, sovrascrive l'impostazione scritta nel file di configurazione dei <strong>test</strong>.</td></tr>
<tr><td><code>MAX_SKIPPED_TESTS</code></td><td>Se impostato, sovrascrive l'impostazione scritta nel file di configurazione dei <strong>test</strong>.</td></tr>
<tr><td><code>WARMUP</code></td><td>Se impostato, sovrascrive l'impostazione scritta nel file di configurazione dei <strong>test</strong>.</td></tr>
<tr><td><code>WARMUPS_COUNT</code></td><td>Se impostato, sovrascrive l'impostazione scritta nel file di configurazione dei <strong>test</strong>.</td></tr>
<tr><td><code>MAX_QUERY_TIME</code></td><td>Se impostato, sovrascrive l'impostazione scritta nel file di configurazione dei <strong>test</strong>.</td></tr>
<tr><td><code>CLUSTER_SIZE</code></td><td>Se impostato, sovrascrive l'impostazione scritta nel file di configurazione dei <strong>test</strong>.</td></tr>
<tr><td><code>PRE_RUN_OS</code></td><td>Se impostato, sovrascrive l'impostazione scritta nel file di configurazione dei <strong>test</strong>.</td></tr>
<tr><td><code>POST_RUN_OS</code></td><td>Se impostato, sovrascrive l'impostazione scritta nel file di configurazione dei <strong>test</strong>.</td></tr>
<tr><td><code>OS_STATS_INTERVAL</code></td><td>Se impostato, sovrascrive l'impostazione scritta nel file di configurazione dei <strong>test</strong>.</td></tr>
</table>
</div><h3 class="anchored_heading" id="meccanismi-di-estrazione-dei-risultati">Meccanismi di estrazione dei risultati</h3>
<p>Esistono tre differenti meccanismi di estrazione dei risultati. Possono essere impostati dai parametri nel file di configurazione dei test:</p>
<ul start="1"><li><code>ANALYZE_EXPLAIN</code>
</li><li><code>MIN_MAX_OUT_OF_N</code>
</li><li><code>SIMPLE_AVERAGE</code>
</li></ul>
<p>Solo uno di questi deve essere impostato a TRUE (1). </p>
<p><strong><code>ANALYZE_EXPLAIN</code></strong> è utile per il benchmark dello Storage Engine InnoDB, dove il piano di esecuzione di una stessa query potrebbe cambiare al riavvio del server. E' progettato per eseguire la query solo con il piano più performante. Ciò significa che il server viene riavviato se il piano di esecuzione attuale è più lento di un altro. Come risultato finale, viene tenuto quello con il piano di esecuzione che si dimostra essere più veloce ed è stato utilizzato almeno in un numero di test uguale a <code>CLUSTER_SIZE</code>  per quella query. Impostando il parametro di configurazione <code>NUM_TESTS</code> si può determinare il numero massimo di esecuzioni dei test, che una volta raggiunto determina il miglior tempo medio del cluster (anche se è minore di <code>CLUSTER_SIZE</code>). Inoltre quando viene raggiunto il timeout di una query (<code>MAX_QUERY_TIME</code>), il meccanismo restituisce il miglior risultato raggiunto dal cluster.</p>
<p><strong><code>MIN_MAX_OUT_OF_N</code></strong> serve anch'esso per il benchmark dello Storage Engine InnoDB. I tempi dell'esecuzione più rapida e di quella più lenta sono conservati come risultati. Si presume che quando il piano di esecuzione cambia, variano anche i tempi di esecuzione, e interessano soltanto il più lungo e il più breve.</p>
<p><strong><code>SIMPLE_AVERAGE</code></strong> si usa per il benchmark di quegli Storage Engine che non modificano il piano di esecuzione dopo il riavvio, come MyISAM. Il risultato finale è il tempo di esecuzione media di tutte le esecuzioni delle varie query.</p>
<h3 class="anchored_heading" id="grafico-dei-risultati">Grafico dei risultati</h3>
<p>Dopo l'esecuzione di ogni query, i risultati vengono registrati in un file chiamato <strong>results.dat</strong> che si trova in <code class="fixed" style="white-space:pre-wrap">{RESULTS_OUTPUT_DIR}</code>. Questo file è progettato per essere letto facilmente dal programma di disegno Gnuplot 4.4. E' diviso in blocchi, separati da molte righe vuote. Tutti i blocchi cominciano con una riga di commento che contiene dettagli sul blocco dei risultati.</p>
<p>Le query che hanno raggiunto il timeout hanno un valore di <code>100000</code> in modo che superino il margine del grafico e vengano tagliate fuori. Le altre query sono rappresentate con la loro durata reale (in secondi), che comincia da <code>0</code>. Il grafico termina l'asse y sul valore più lungo di <code>durata del test + 20%</code>. Per esempio se il test più lungo è durato <code>100</code> secondi, il grafico verrà tagliato a <code>120</code> secondi. Le query che hanno raggiunto il timeout verranno quindi tagliate a questo limite per rendere l'idea del timeout.</p>
<p>Durante l'esecuzione del test, uno script di gnuplot viene creato con i parametri necessari perché il grafico venga generato automaticamene. Dopo l'esecuzione di ogni singola query il grafico viene rigenerato, in modo che l'utente possa vedere i risultati correnti prima che l'intero benchmark sia finito. Questo file si chiama <code>gnuplot_script.txt</code> e si trova in <code>{RESULTS_OUTPUT_DIR}</code>. L'utente può modificarlo aggiustando i parametri e l'intestazione dopo che il test è completato, per poter dare al risultato finale il "look and feel" desiderato.</p>
<h3 class="anchored_heading" id="output-dello-script">Output dello script</h3>
<h4 class="anchored_heading" id="output-del-benchmark">Output del benchmark</h4>
<p>Nella directory indicata dal parametro {RESULTS_OUTPUT_DIR} (esempio:
<code>/benchmark/dbt3/results/myisam_test_2011-12-08_191427/</code>) sono contenuti i seguenti file e directory:</p>
<ul start="1"><li>Una directory per ogni test, chiamata come il parametro {KEYWORD} della configurazione dei test (esempio: <code>mariadb-5-3-2</code>)
</li><li><strong>cpu_info.txt</strong> <span>&mdash;</span> l'output del comando "<code>/bin/cat /proc/cpuinfo</code>"
</li><li><strong>uname.txt</strong> <span>&mdash;</span> l'output del comando "<code>uname -a</code>"
</li><li><strong>results.dat</strong> <span>&mdash;</span> i risultati dell'esecuzione di ogni query in un solo file. Questo verrà usato come file di dati dallo script di gnuplot. Contiene anche il rapporto tra il primo test e quello corrente.
</li><li><strong>gnuplot_script.txt</strong> <span>&mdash;</span> lo script di Gnuplot che visualizza i grafici.
</li><li><strong>graphics.jpeg</strong> <span>&mdash;</span> il grafico dell'output
</li><li>Un file di configurazione del <strong>benchmark</strong>
  (esempio: <code>myisam_test_mariadb_5_3_mysql_5_5_mysql_5_6.conf</code>) copiato da <code>mariadb-tools/dbt3_benchmark/tests/</code>
</li><li>Un file di configurazione del <strong>del database dei risultati</strong> (esempio: <code>results_db.conf</code>) copiato da <code>mariadb-tools/dbt3_benchmark/tests/results_db_conf/</code>
</li><li>Un file di configurazione dei <strong>test</strong> (esempio: <code>test_myisam.conf</code>) copiato da <code>mariadb-tools/dbt3_benchmark/tests/test_conf/</code>
</li></ul>
<h4 class="anchored_heading" id="output-dei-test">Output dei test</h4>
<p>La sottodirectory del test specifico, il cui nome corrisponde al valore del parametro {KEYWORD} (esempio:
<code>/benchmark/dbt3/results/myisam_test_2011-12-08_191427/mariadb-5-3-2/</code>),
contiene i seguenti file:</p>
<ul start="1"><li><strong>pre_test_os_resutls.txt</strong> - l'output dei comandi di sistema (se ci sono) eseguiti prima della prima query del test
</li><li><strong>pre_test_sql_resutls.txt</strong> - l'output dei comandi SQL (se ci sono) eseguiti prima della prima query del test
</li><li><strong>post_test_os_resutls.txt</strong> - l'output dei comandi di sistema (se ci sono) eseguiti dopo l'ultima query del test
</li><li><strong>post_test_sql_resutls.txt</strong> - l'output dei comandi SQL (se ci sono) eseguiti dopo l'ultima query del test
</li><li><strong>all_explains.txt</strong> - un file contenente tutti gli EXPlAIN delle query, i loro parametri di avvio per il benchmark e il risultato dell'EXPLAIN
</li><li>Il <strong>file config</strong> (my.cnf) passato a mysqld o postgres
  (esempio: <code>mariadb_myisam_my.cnf</code>) copiato da <code>mariadb-tools/dbt3_benchmark/config/s$SCALE_FACTOR/</code>
</li><li>Il file di configurazione delle <strong>query</strong> (esempio: ''queries-mariadb.conf'') copiato da <code>mariadb-tools/dbt3_benchmark/tests/queries_conf/</code>
</li><li>Il file di configurazione del <strong>database</strong> (esempio: ''db_mariadb_5_3_myisam.conf'')
  copiato da <code>mariadb-tools/dbt3_benchmark/tests/db_conf/</code>
</li></ul>
<h4 class="anchored_heading" id="output-delle-query">Output delle query</h4>
<p>Per ogni esecuzione di query, vengono generati diversi file dallo script di automazione. Essi vengono salvati in una sottodirectory il cui nome corrisponde al parametro <code>{KEYWORD}</code>:</p>
<ul start="1"><li>Risultato explain - un file chiamato
  '<strong>{nome_query}_{numero_esecuzioni}_results.txt</strong>' (esempio:
  '<strong>1_explain.sql_1_results.txt</strong>' <span>&mdash;</span> primo test per 1_explain.sql)
</li><li>Comandi di sistema pre-esecuzione - comandi eseguiti prima della query.
  L'output è un file chiamato
  '<strong>pre_run_os_q_{nome_query}_no_{numero_esecuzione}_results.txt</strong>' (esempio:
  '<strong>pre_run_os_q_1.sql_no_2_results.txt</strong>' <span>&mdash;</span> secondo test per la query 1.sql)
</li><li>Comandi SQL pre-esecuzione - comandi SQL eseguiti prima della query.
  L'output è un file chiamato
  '<strong>pre_run_sql_q_{nome_query}_no_{numero_esecuzione}_results.txt</strong>'.
</li><li>Comandi di sistema post-esecuzione - comandi eseguiti dopo la query.
  L'output è un file chiamato
  '<strong>post_run_os_q_{nome_query}_no_{numero_esecuzione}_results.txt</strong>'.
</li><li>Comandi SQL post-esecuzione - comandi SQL eseguiti dopo la query.
  L'output è un file chiamato
  '<strong>post_run_sql_q_{nome_query}_no_{numero_esecuzione}_results.txt</strong>'.
</li><li>Statistiche di utilizzo della CPU:
  '<strong>{nome_query}_no_{numero_esecuzione}_sar_u.txt</strong>'
</li><li>Statistiche di I/O e velocità di trasferimento:
  '<strong>{nome_query}_no_{numero_esecuzione}_sar_b.txt</strong>'
</li><li>Statistiche di utilizzo della memoria:
  '<strong>{nome_query}_no_{numero_esecuzione}_sar_r.txt</strong>'
</li></ul>
<h3 class="anchored_heading" id="hook">Hook</h3>
<p>Lo script di automazione fornisce degli hook che permettono all'utente di aggiungere comandi SQL e di sistema (OS) prima e dopo ogni test. Ecco un elenco di tutti i possibili hook:</p>
<ul start="1"><li>Hook SQL Pre-test: si imposta con il parametro <code>PRE_TEST_SQL</code>. Contiene comandi SQL da eseguire una sola volta prima della prima esecuzione.
  (Esempio: "<code class="fixed" style="white-space:pre-wrap"><span class="k">use</span> <span class="n">dbt3</span><span class="p">;</span> <span class="k">select</span> <span class="nf">version</span><span class="p">();</span> <span class="k">show</span> <span class="n">variables</span><span class="p">;</span> <span class="k">show</span> <span class="n">engines</span><span class="p">;</span> <span class="k">show</span> <span class="k">table</span> <span class="n">status</span><span class="p">;</span>
</code>")
</li><li>Hook SQL Post-test: si imposta con il parametro <code>POST_TEST_SQL</code>. Contiene comandi SQL da eseguire una sola volta dopo l'ultima esecuzione.
</li><li>Hook OS Pre-test: si imposta con il parametro <code>PRE_TEST_OS</code>. Contiene comandi OS da eseguire una sola volta prima della prima esecuzione.
</li><li>Hook OS Post-test: si imposta con il parametro <code>POST_TEST_OS</code>. Contiene comandi OS da eseguire una sola volta dopo l'ultima esecuzione.
</li><li>Hook SQL Pre-run: si imposta con il parametro <code>PRE_RUN_SQL</code>. Contiene comandi SQL da eseguire prima di ogni singola query.
  (Esempio: "<code class="fixed" style="white-space:pre-wrap"><span class="k">flush</span> <span class="n">status</span><span class="p">;</span> <span class="kt">set</span> <span class="n">global</span> <span class="n">userstat</span><span class="o">=</span><span class="k">on</span><span class="p">;</span>
</code>")
</li><li>Hook SQL Post-run: si imposta con il parametro <code>POST_RUN_SQL</code>. Contiene comandi SQL da eseguire dopo ogni singola query.
  (Esempio: "<code class="fixed" style="white-space:pre-wrap"><span class="k">show</span> <span class="n">status</span><span class="p">;</span> <span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">information_schema</span><span class="p">.</span><span class="n">TABLE_STATISTICS</span><span class="p">;</span>
</code>")
</li><li>Hook OS Pre-run: si imposta con il parametro <code>PRE_RUN_OS</code>. Contiene comandi OS da eseguire prima di ogni singola query. 
</li><li>Hook SQL Post-run: si imposta con il parametro <code>POST_RUN_OS</code>. Contiene comandi OS da eseguire prima di ogni singola query.
</li></ul>
<p>I risultati di questi comandi vengono registrati nella cartella <code>{RESULTS_OUTPUT_DIR}/{KEYWORD}</code> (si veda <a href="#loutput-dello-script">#loutput-dello-script</a>)</p>
<h3 class="anchored_heading" id="attività">Attività</h3>
<p>Ecco le principali attività che vengono eseguite dallo script:</p>
<ol start="1"><li>Parsing dei file di configurazione e controllo dei parametri in input - se uno di quelli obbligatori manca, lo script termina con un errore.
</li><li>Raccolta di informazioni sull'hardware - rilevamento delle informazioni sull'hardware della macchina su cui gira il benchmark. Attualmente raccoglie <code>cpuinfo</code> e <code>uname</code>. I risultati di questi comandi vengono scritti nella directory dei risultati impostata nell'apposito parametro.
</li><li>Ricerca delle configurazioni dei test positivi<br><br>Per ogni test passato, lo script esegue le seguenti operazioni:
<ol start="1"><li>Avvia il server del database dei risultati. I risultati dei test sono scritti in quel database database.
</li><li>Pulisce le cache sul server<br><br>Questa operazione viene effettuata tramite il seguente comando:<pre class="fixed">sudo /sbin/sysctl vm.drop_caches<span class="o">=</span>3
</pre>
<ul start="1" style="list-style: none"><li><strong>NOTA:</strong> Per pulire le cache l'utente deve disporre dei diritti sudo e occorre aggiungere la seguente riga al file <code>sudoers</code>
    (per modificarlo: "<code>sudo vusudo</code>"):<pre class="fixed"><span class="o">{</span>your_username<span class="o">}</span> <span class="nv">ALL</span><span class="o">=</span>NOPASSWD:/sbin/sysctl
</pre>
</li></ul>
</li><li>Avvio del server del database
</li><li>Esecuzione dei comandi SQL pre-test. I risultati vengono registrati nella cartella
</li><li>results_output_dir/{KEYWORD}<code> e il loro nome è </code>pre_test_sql_results.txt<code>. </code>{KEYWORD}<code> è una parola chiave univoca nell'attuale configurazione del database.</code>
</li><li>Esecuzione dei comandi OS pre-test. I risultati vengono registrati nella cartella <code>results_output_dir/{KEYWORD}</code> e si chiamano <code>pre_test_os_results.txt</code>.
<ul start="1" style="list-style: none"><li><strong>NOTA:</strong> Se, nella configurazione del test, l'opzione QUERIES_AT_ONCE è impostata a 0, il server viene riavviato tra una query e l'altra. Pertanto i punti 3.2, 3.3, 3.4 e 3.5 vengono eseguiti solo una volta subito prima del punto 3.6.2.
</li></ul>
</li><li>Lettura delle configurazioni delle query, e per ognuna vengono eseguite le seguenti operazioni:
<ol start="1"><li>Controllo dei parametri della configurazione del test. Se c'è qualcosa che non va, il programma termina con un errore.
</li><li>Se è la prima esecuzione della prima query, lettura della versione del server
</li><li>Esecuzione dei comandi OS nella shell. I risultati di queste query vengono registrati in un file chiamato <code>pre_run_os_q_{QUERY}_no_{RUN_NO}_results.txt</code>
    nella cartella <code>results_output_dir/{KEYWORD}</code>, dove <code>{QUERY}</code> è il nome della query
    (esempio: <code>1.sql</code>), <code>{RUN_NO}</code> è il numero progressivo dell'esecuzione e <code>{KEYWORD}</code> è una parola chiave univoca nella configurazione del test.
</li><li>Esecuzione delle query SQL pre-run. I risultati di queste query vengono registrati in un file chiamato <code>pre_run_sql_q_{QUERY}_no_{RUN_NO}_results.txt</code>
    nella cartella <code>results_output_dir/{KEYWORD}</code>, dove <code>{QUERY}</code> è il nome della query 
    (esempio: <code>1.sql</code>), <code>{RUN_NO}</code> è il numero progressivo dell'esecuzione e <code>{KEYWORD}</code> è una parola chiave univoca nella configurazione del test. 
</li><li>Esecuzioni di riscaldamento, se richieste dal file di configurazione del test
</li><li>Esecuzione del test effettivo e misurazione della tempistica.
<ul start="1" style="list-style: none"><li>Durante questo passaggio, viene creato un nuovo processo figlio per poter rilevare le statistiche del sistema operativo. Attualmente vengono raccolte queste informazioni:
<ul start="1"><li>Statistiche di utilizzo della CPU. Il comando è:<pre class="fixed">sar -u <span class="m">0</span> 2&gt;null
</pre>
</li><li>Statistiche sulla velocità di trasferimento dell'I/O. Il comando è:<pre class="fixed">sar -b <span class="m">0</span> 2&gt;null
</pre>
</li><li>Statistiche sull'utilizzo della memoria. Il comando è:<pre class="fixed">sar -r <span class="m">0</span> 2&gt;null
</pre>
</li></ul>
</li><li>Queste statistiche vengono rilevate ogni N secondi, dove <code>N</code> viene specificato dal parametro della configurazione del test <code>OS_STATS_INTERVAL</code>.
</li><li>L'esecuzione del test su MariaDB e MySQL ha un meccanismo per forzare l'uscita quando viene raggiunto un certo timeout. Esso è controllato dal parametro del test <code>TIMEOUT</code>. Attualmente per PostgreSQL questa funzionalità è assente e dovrebbe essere implementata nelle versioni future.
</li></ul>
</li><li>Esecuzione dell'istruzione "explain" sulla query corrente.
<ul start="1" style="list-style: none"><li><strong>NOTA:</strong> L'esecuzione delle query <code>EXPLAIN</code> con MySQL prima della versione 5.6.3 potrebbe impiegare molto tempo, perché MySQL deve eseguire l'intera query se vi sono delle SELECT annidate. Per MariaDB e PostgreSQL il problema non esiste. Le query explain che impiegano molto tempo sono le #7, 8,
     9, 13 e 15. Per questo motivo in MySQL prima della versione 5.6.3 non dovrebbe essere eseguita alcuna <code>EXPLAIN</code> su queste query.
</li></ul>
</li><li>Esecuzione dei comandi SQL post-run
</li><li>Esecuzione dei comandi OS post-run nella shell
</li><li>Log dei risultati nel database dei risultati
</li><li>Generazione di un grafico dei risultati correnti, tramite Gnuplot
</li></ol>
</li><li>Arresto del server del database.
</li><li>Esecuzione dei comandi SQL post-test. I risultati vengono registrati nella cartella <code>results_output_dir/{KEYWORD}</code> e si chiamano <code>post_test_sql_results.txt</code>.
</li><li>Esecuzione dei comandi OS post-test. I risultati vengono registrati nella cartella <code>results_output_dir/{KEYWORD}</code> e si chiamano <code>post_test_os_results.txt</code>.
</li><li>Arresto del server del database dei risultati
</li></ol>
</li></ol>
<h3 class="anchored_heading" id="esempi-di-chiamate-allo-script">Esempi di chiamate allo script</h3>
<ul start="1"><li>Esempio di chiamata al test per MyISAM con scale factor 30 e timeout di 10 minuti:<pre class="fixed"><span class="n">perl</span> <span class="n">launcher</span><span class="o">.</span><span class="n">pl</span> <span class="o">\</span>
<span class="o">--</span><span class="n">project</span><span class="o">-</span><span class="n">home</span><span class="o">=</span><span class="sr">/path/</span><span class="n">to</span><span class="sr">/project/</span><span class="n">home</span><span class="sr">/ \</span>
<span class="sr">--results-output-dir=/</span><span class="n">path</span><span class="sr">/to/</span><span class="n">project</span><span class="sr">/home/</span><span class="n">results</span><span class="sr">/myisam_test \</span>
<span class="sr">--datadir=/</span><span class="n">path</span><span class="sr">/to/</span><span class="n">project</span><span class="sr">/home/</span><span class="n">db_data</span><span class="sr">/ \</span>
<span class="sr">--test=/</span><span class="n">path</span><span class="sr">/to/</span><span class="n">project</span><span class="sr">/home/m</span><span class="n">ariadb</span><span class="o">-</span><span class="n">tools</span><span class="sr">/dbt3_benchmark/</span><span class="n">tests</span><span class="sr">/myisam_test_mariadb_5_3_mysql_5_5_mysql_5_6.conf \</span>
<span class="sr">--queries-home=/</span><span class="n">path</span><span class="sr">/to/</span><span class="n">project</span><span class="sr">/home/g</span><span class="n">en_query</span><span class="o">/</span> <span class="o">\</span>
<span class="o">--</span><span class="n">scale</span><span class="o">-</span><span class="n">factor</span><span class="o">=</span><span class="mi">30</span> <span class="o">\</span>
<span class="o">--</span><span class="n">TIMEOUT</span><span class="o">=</span><span class="mi">600</span>
</pre>
</li></ul>
<p>...dove <code>/path/to/project/home</code> è il percorso del progetto <code>mariadb-tools</code>. Rimpiazza tutte le occorrenze della stringa "$PROJECT_HOME" nel file di configurazione (esempio: "<code>TMPDIR = $PROJECT_HOME/temp/</code>" con
"<code>TMPDIR = /path/to/project/home/temp/</code>").</p>
<p><code class="fixed" style="white-space:pre-wrap">--TIMEOUT</code> sovrascrive il timeout impostato nel file di configurazione, cambiandolo a a 10 minuti.</p>
<ul start="1"><li>Esempio di test per InnoDB con scale factor 30 con timeout di 2 ore per query
  e 3 esecuzioni per ogni query:<pre class="fixed"><span class="n">perl</span> <span class="n">launcher</span><span class="o">.</span><span class="n">pl</span> <span class="o">\</span>
<span class="o">--</span><span class="n">project</span><span class="o">-</span><span class="n">home</span><span class="o">=</span><span class="sr">/path/</span><span class="n">to</span><span class="sr">/project/</span><span class="n">home</span><span class="sr">/ \</span>
<span class="sr">--results-output-dir=/</span><span class="n">path</span><span class="sr">/to/</span><span class="n">project</span><span class="sr">/home/</span><span class="n">results</span><span class="sr">/innodb_test \</span>
<span class="sr">--datadir=/</span><span class="n">path</span><span class="sr">/to/</span><span class="n">project</span><span class="sr">/home/</span><span class="n">db_data</span><span class="sr">/ \</span>
<span class="sr">--test=/</span><span class="n">path</span><span class="sr">/to/</span><span class="n">project</span><span class="sr">/home/m</span><span class="n">ariadb</span><span class="o">-</span><span class="n">tools</span><span class="sr">/dbt3_benchmark/</span><span class="n">tests</span><span class="sr">/innodb_test_mariadb_5_3_mysql_5_5_mysql_5_6.conf \</span>
<span class="sr">--queries-home=/</span><span class="n">path</span><span class="sr">/to/</span><span class="n">project</span><span class="sr">/home/g</span><span class="n">en_query</span><span class="o">/</span> <span class="o">\</span>
<span class="o">--</span><span class="n">scale</span><span class="o">-</span><span class="n">factor</span><span class="o">=</span><span class="mi">30</span> <span class="o">\</span>
<span class="o">--</span><span class="n">TIMEOUT</span><span class="o">=</span><span class="mi">7200</span> <span class="o">\</span>
<span class="o">--</span><span class="n">NUM_TESTS</span><span class="o">=</span><span class="mi">3</span>
</pre>
</li></ul>
<ul start="1"><li>Se esiste una versione più recente di <a href="/kb/en/what-is-mariadb-55/">MariaDB 5.5</a>:
<ul start="1"><li>copiare o modificare il file di configurazione del <strong>server del DBMS</strong>  <code>mariadb-tools/dbt3_benchmark/tests/db_conf/db_mariadb_5_5_myisam.conf</code>
   e modificare il parametro <code>DBMS_HOME</code> nella distribuzione binaria. E' ache possibile modificare <code>KEYWORD</code> e <code>GRAPH_HEADING</code>
</li></ul>
</li></ul>
<ul start="1"><li>Se si desidera aggiungere ulteriori test nel benchmark di MyISAM per <a href="/kb/en/what-is-mariadb-53/">MariaDB 5.3</a>,
  ma con un altro file di configurazione predefinito (my.cnf):
<ul start="1"><li>copiare o modificare il file di configurazione del <strong>server del DBMS</strong>  <code>mariadb-tools/dbt3_benchmark/tests/db_conf/db_mariadb_5_3_myisam.conf</code>
   e modificare il parametro CONFIG_FILE in my.cnf
</li><li>copiare o modificare il file di configurazione del <strong>test</strong>  <code>mariadb-tools/dbt3_benchmark/tests/myisam_test_mariadb_5_3_mysql_5_5_mysql_5_6.conf</code>
   e aggiungere le nuove impostazioni:<pre class="fixed"><span class="p">[</span><span class="n">mariadb_5_3_new_configuration</span><span class="p">]</span>
<span class="n">QUERIES_CONFIG</span> <span class="o">=</span> <span class="err">$</span><span class="n">PROJECT_HOME</span><span class="o">/</span><span class="n">mariadb</span><span class="o">-</span><span class="n">tools</span><span class="o">/</span><span class="n">dbt3_benchmark</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">queries_conf</span><span class="o">/</span><span class="n">queries</span><span class="o">-</span><span class="n">mariadb</span><span class="p">.</span><span class="n">conf</span>
<span class="n">DB_CONFIG</span> 	<span class="o">=</span> <span class="err">$</span><span class="n">PROJECT_HOME</span><span class="o">/</span><span class="n">mariadb</span><span class="o">-</span><span class="n">tools</span><span class="o">/</span><span class="n">dbt3_benchmark</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">db_conf</span><span class="o">/</span><span class="n">db_mariadb_5_3_myisam_new_configuration</span><span class="p">.</span><span class="n">conf</span>
</pre>
</li></ul>
</li></ul>
<ul start="1"><li>Se ad esempio si desidera aggiungere ulteriori parametri di avvio per la query 6 per MariaDB:
<ul start="1"><li>copiare o modificare il file <code>mariadb-tools/dbt3_benchmark/tests/queries_conf/queries-mariadb.conf</code>
   aggiungendo il parametro:
   "<code class="fixed" style="white-space:pre-wrap">STARTUP_PARAMS=--optimizer_switch='mrr=on' --mrr_buffer_size=96M</code>"
   nella sezione della query 6.
</li><li>copiare o modificare il file di configurazione del <strong>test</strong>  <code>mariadb-tools/dbt3_benchmark/tests/myisam_test_mariadb_5_3_mysql_5_5_mysql_5_6.conf</code>
   per includere il nuovo file di configurazione delle <strong>query</strong>
</li></ul>
</li></ul>
<h2 class="anchored_heading" id="risultati">Risultati</h2>
<h3 class="anchored_heading" id="test-di-myisam">Test di MyISAM</h3>
<p>Benchmark DBT3 con la seguente configurazione:</p>
<ul start="1"><li><a href="/kb/en/mariadb-532-release-notes/">MariaDB 5.3.2</a> Beta + MyISAM
</li><li><a href="/kb/en/mariadb-5518-release-notes/">MariaDB 5.5.18</a> + MyISAM
</li><li>MySQL 5.5.19 + MyISAM
</li><li>MySQL 5.6.4 + MyISAM
</li></ul>
<p>Pagina dei risultati: <a href="/kb/en/dbt3-benchmark-results-myisam/">DBT3 benchmark results MyISAM</a></p>
<h3 class="anchored_heading" id="test-di-innodb">Test di InnoDB</h3>
<p>Benchmark DBT3 con la seguente configurazione:</p>
<ul start="1"><li><a href="/kb/en/mariadb-532-release-notes/">MariaDB 5.3.2</a> Beta + XtraDB
</li><li><a href="/kb/en/mariadb-5518-release-notes/">MariaDB 5.5.18</a> + XtraDB
</li><li>MySQL 5.5.19 + InnoDB
</li><li>MySQL 5.6.4 + InnoDB
</li></ul>
<p>Pagina dei risultati: <a href="/kb/en/dbt3-benchmark-results-innodb/">DBT3 benchmark results InnoDB</a></p>
<h3 class="anchored_heading" id="test-di-postgresql">Test di PostgreSQL</h3>
<p>Benchmark DBT3 con la seguente configurazione:</p>
<ul start="1"><li><a href="/kb/en/mariadb-532-release-notes/">MariaDB 5.3.2</a> Beta + XtraDB
</li><li>MySQL 5.6.4 + InnoDB
</li><li>PostgreSQL
</li></ul>
<p>Pagina dei risultati: (TODO)</p>

    </div>


        
            <div id="subscribe" class="well well-small hide hidden-print"
                 data-subscribe-url="/kb/it/gli-script-di-automazione-di-dbt3/+subscriptions/add"
                 data-unsubscribe-url="/kb/it/gli-script-di-automazione-di-dbt3/+subscriptions/remove">
            </div>
        

        
        
    
        <div class="simple_section_nav">
            <ul class="nav nav-pills">
                
                    <li><a href="/kb/it/dbt3-example-preparation-time/">
                        ← Esempio di tempi di preparazione di DBT3
                    </a>
                    </li>
                
                
                    <li><a href="/kb/it/benchmark/">
                        ↑ Benchmark ↑
                    </a>
                    </li>
                
                
                    <li class="pull-right"><a href="/kb/it/random-query-generator-tests/">
                        I test del Random Query Generator →
                    </a>
                    </li>
                
            </ul>
        </div>
    

        

        
        <h2>Commenti</h2>
        
    
    <div id="comments" data-node-id="2889" data-comments-url="/kb/it/gli-script-di-automazione-di-dbt3/+comments"
         data-reply-url="/kb/it/gli-script-di-automazione-di-dbt3/comments/post/">
        Sto caricando i commenti......
    </div>

        

    </div>


                    <div id="content_disclaimer" class="graybox">
                        Content reproduced on this site is the property of its respective owners,
                        and this content is not reviewed in advance by MariaDB. The views, information and opinions
                        expressed by this content do not necessarily represent those of MariaDB or any other party.
                    </div>
                </div>
            </section>

            
                <div id="right_bar" class="col-md-2">
                    
    
        
        <ul class="section_navigation well well-small hidden-xs hidden-sm">
            
                <li class="parent"><a href="/kb/it/benchmark/">
                    ↑ Benchmark ↑
                </a>
                </li>
            
            
                
                    <li>
                        <a href="/kb/it/benchmarking-aria/">
                            
                            Benchmarking Aria
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/it/comparazione-delle-prestazioni-del-rqg/">
                            
                            Comparazione delle prestazioni del RQG
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/it/configurazione-dei-benchmark-di-sysbench/">
                            
                            Configurazione dei benchmark di sysbench
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/it/dbt3-example-preparation-time/">
                            
                            Esempio di tempi di preparazione di DBT3
                        </a>
                    </li>
                
            
                
                    <li class="active">
                        <span>Gli script di automazione di DBT3</span>
                        
                    </li>
                
            
                
                    <li>
                        <a href="/kb/it/random-query-generator-tests/">
                            
                            I test del Random Query Generator
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/it/dbt-3-dataset/">
                            <span class="pull-right not_primary"></span>
                            Il dataset DBT-3
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/it/mariadb-53mysql-55-windows-performance-patches/">
                            
                            Le patch per le prestazioni su Windows di MariaDB 5.3/MySQL 5.5
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/it/segmented-key-cache-performance/">
                            
                            Le prestazioni della cache delle chiavi segmentata
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/it/mariadb-tools/">
                            
                            mariadb-tools
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/it/performance-of-memory-tables/">
                            
                            Prestazioni delle tabelle MEMORY
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/it/run-sql-benchpl/">
                            
                            run-sql-bench.pl
                        </a>
                    </li>
                
            
        </ul>
    
    

                </div>
            
        </div>
    </div>
</div>

<!-- Footer -->
<footer id="footer">
    <div class="footer">
        <div class="container">
            <div class="row row-10">
                <div class="col-md-2 col-xs-4 item">
                    <h5>
                        <a href="/products" title="Products">Products</a>
                    </h5>
                    <ul>
                        <li id="menu-item-7816" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-7816"><a href="https://mariadb.com/products/mariadb-platform/">MariaDB Platform</a></li>
                        <li id="menu-item-7815" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-7815"><a href="https://mariadb.com/products/skysql/">MariaDB SkySQL</a></li>
                        <li id="menu-item-4172" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4172"><a href="https://mariadb.com/pricing/">Pricing</a></li>
                        <li id="menu-item-4163" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4163"><a href="https://mariadb.com/downloads/">Download MariaDB</a></li>
                    </ul>
                </div>
                <div class="col-md-2 col-xs-4 item">
                    <h5>
                        <a href="/services" title="Services">Services</a>
                    </h5>
                    <ul>
                        <li id="menu-item-4169" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4169"><a href="https://mariadb.com/services/remote-dba/">Remote DBA</a></li>
                        <li id="menu-item-41691" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4169"><a href="https://mariadb.com/services/skydba/">SkyDBA</a></li>
                        <li id="menu-item-4167" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4167"><a href="https://mariadb.com/services/enterprise-architect/">Enterprise Architect</a></li>
                        <li id="menu-item-4170" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4170"><a href="https://mariadb.com/services/technical-support-services/">Technical Support</a></li>
                        <li id="menu-item-4168" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4168"><a href="https://mariadb.com/services/migration-practice/">Migration Practice</a></li>
                        <li id="menu-item-4166" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4166"><a href="https://mariadb.com/services/consulting/">Consulting</a></li>
                        <li id="menu-item-4171" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4171"><a href="https://mariadb.com/services/training/">Training</a></li>
                    </ul>
                </div>
                <div class="col-md-2 col-xs-4 item">
                    <h5>
                        <a href="/resources" title="Resources">Resources</a>
                    </h5>
                    <ul>
                        <li id="menu-item-41751" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4175"><a href="https://mariadb.com/docs/">Documentation</a></li>
                        <li id="menu-item-41752" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4175"><a href="https://mariadb.com/developers/">Developers</a></li>
                        <li id="menu-item-4175" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4175"><a href="https://mariadb.com/resources/blog/">Blog</a></li>
                        <li id="menu-item-5462" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-5462"><a href="https://support.mariadb.com">Support</a></li>
                        <li id="menu-item-6004" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-6004"><a href="https://mariadb.com/openworks/">OpenWorks</a></li>
                        <li id="menu-item-60041" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-6004"><a href="https://mariadb.com/resources/customer-stories/">Customer Stories</a></li>
                        <li id="menu-item-7817" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-7817"><a href="https://mariadb.com/resources/events/">Events</a></li>
                        <li id="menu-item-4177" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4177"><a href="https://mariadb.com/roadshow/">MariaDB Roadshow</a></li>
                    </ul>
                </div>
                <div class="visible-xs visible-sm clear"></div>
                <div class="col-md-2 col-xs-5 item">
                    <h5>
                        <a href="/about-us" title="About MariaDB">About</a>
                    </h5>
                    <ul>
                        <li id="menu-item-4173" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4173"><a href="https://mariadb.com/contact/">Contact</a></li>
                        <li id="menu-item-4161" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4161"><a href="https://mariadb.com/about-us/leadership/">Leadership</a></li>
                        <li id="menu-item-4162" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4162"><a href="https://mariadb.com/about-us/partners/">Partners</a></li>
                        <li id="menu-item-4174" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4174"><a href="https://mariadb.com/newsroom/">Newsroom</a></li>
                        <li id="menu-item-4160" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4160"><a href="https://mariadb.com/about-us/investors/">Investors</a></li>
                        <li id="menu-item-4159" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4159"><a href="https://mariadb.com/about-us/careers/">Careers</a></li>
                        <li id="menu-item-41591" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4159"><a href="https://mariadb.com/trust/">Trust Center</a></li>
                        <li id="menu-item-41592" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4159"><a href="https://mariadb.com/vulnerability-reporting/">Vulnerability Reporting</a></li>
                    </ul>
                </div>
                <div class="col-md-4 col-xs-7 item">
                    <div id="block-footercontact" class="block block-block-content block-block-content22b3af28-0754-44ec-a5c6-4466568f37e3">
                        <h5><a href="/contact" title="Contact">Contact</a></h5>
                    </div>
                    <div class="social">
                        <ul class="list-inline">
                            <li>
                                <a target="_blank" href="https://www.facebook.com/MariaDB.dbms/" title="Facebook">
                                    <i class="fa fa-facebook" aria-hidden="true"></i>
                                </a>
                            </li>
                            <li>
                                <a target="_blank" href="https://twitter.com/mariadb" title="Twitter">
                                    <i class="fa fa-twitter" aria-hidden="true"></i>
                                </a>
                            </li>
                            <li>
                                <a target="_blank" href="https://www.linkedin.com/company/mariadb-corporation?trk=company_logo " title="LinkedIn">
                                    <i class="fa fa-linkedin" aria-hidden="true"></i>
                                </a>
                            </li>
                        </ul>
                    </div>
                    <div id="block-footerformcontact" class="block block-block-content block-block-contentd754ee1b-3cc9-40e7-9ef4-f504f1197fb1">
                        
                            <p>Subscribe to our newsletter!</p>
                            <script src="//app-sj15.marketo.com/js/forms2/js/forms2.min.js"></script><form id="mktoForm_1498"></form>
                            <script>
                                <!--//--><![CDATA[// ><!--
                                MktoForms2.loadForm("//app-sj15.marketo.com", "573-PXI-984", 1498);
                                //--><!]]]]><![CDATA[>
                                //--><!]]>
                            </script>
                        
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="footer-copyright">
        <div class="container text-center">
            <ul class="list-inline no-margin">
                <li>
                    <a href="/legal" title="Legal">Legal</a>
                </li>
                <li>
                    <a href="/privacy-policy" title="Privacy Policy">Privacy Policy</a>
                </li>
                <li>
                    <a href="/cookie-policy/" title="Cookies">Cookie Policy</a>
                </li>
            </ul>
            <p>Copyright &copy; 2023 MariaDB. All rights reserved.</p>
        </div>
    </div>
</footer>
</div>

<div id="ajax_loading">
    <img src="/kb/static/images/ajax-loader.a51c5608d01a.gif" />
</div>

    <!-- Google Tag Manager -->
    <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-MK2847"
                      height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
            '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MK2847');</script>
    <!-- End Google Tag Manager -->

</body>

<script type="text/javascript" src="/kb/static/js/main.fed4ec768178.js" charset="utf-8"></script>

</html>