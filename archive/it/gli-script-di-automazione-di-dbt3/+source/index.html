<!DOCTYPE html>
<html>
<head data-cookie-domain=""
      data-cookie-path="/">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="apple-touch-icon" sizes="180x180" href="/kb/static/images/favicons/apple-touch-icon.159e713979be.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/kb/static/images/favicons/favicon-32x32.bc0ac1d5d11e.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/kb/static/images/favicons/favicon-16x16.5801f8f0f34e.png">
    <link rel="shortcut icon" href="/kb/static/images/favicons/favicon.d122d305dee4.ico" type="image/x-icon" />

    <title>Gli script di automazione di DBT3 - Source - MariaDB Knowledge Base</title>

    <link href="/kb/static/css/main.f7633538c846.css" rel="stylesheet" type="text/css" />

    
        <meta name="robots" content="noindex, nofollow">
    

    

    <!-- FB Open Graph tags -->
    <meta property="og:title" content="Gli script di automazione di DBT3 - Source" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://mariadb.com/kb/it/gli-script-di-automazione-di-dbt3/+source/" />
    <meta property="og:image" content="http://mariadb.comaskmonty-logo.png" />
    <meta property="og:site_name" content="MariaDB KnowledgeBase" />
    <meta property="fb:admins" content="514852603" />
    <meta property="og:description" content="" />

    <meta name="description" content="" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="//fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet"/>
    
</head>
<body class="mpkb nodes autoresize nodes_source jqui" id="nodes_source">





<div id="menu-mobile" class="visible-sm visible-xs">

    <div>
        <div id="mobile-close-menu" class="text-right">
            <a href="javascript:void(0)" title="Close Menu" id="back-main" class="toggle-menu">X<span></span></a>
        </div>
    </div>
    <div class="mainmenu-mobile">
        <ul class="ls-none ul-menu">
            <li data-sub="submenu5"><a class="open-form-search" href="/kb/search/" title="Search">Search </a></li>
            <li data-sub="submenu0"><a href="/products" title="Products">Products</a><span class="arrow-main"></span></li>
            <li data-sub="submenu1"><a href="/services" title="Services">Services</a><span class="arrow-main"></span></li>
            <li data-sub="submenu2"><a href="/resources" title="Resources">Resources</a><span class="arrow-main"></span></li>
            <li data-sub="submenu3"><a href="/about-us" title="About">About</a><span class="arrow-main"></span></li>
            <li data-sub="submenu4"><a href="/contact" title="Contact">Contact</a></li>
        </ul>
    </div>

    <div class="nav-top-mobile">
        <div class="select-box form">

            <ul class="inline-block-md mb-none top-nav">
                <li>

                </li>
                
                    <li>
                        <a href="/kb/user/login?next=/kb/it/gli-script-di-automazione-di-dbt3/+source/"> Login</a>
                    </li>
                
            </ul>



        </div>
        <p class="text-center copyright">Copyright &copy; 2025 MariaDB. All rights reserved.</p>
    </div>
</div>
<div class="violator-wrap d-none" id="top_violator">
    <div class="container">
        <div class="row">
            <div class="col-xs-12 col-sm-12">
                <div class="violator-outer">
                    <div class="violator-inner">
                        <div class="row">
                            <div class="col-xs-12 col-sm-9 col-lg-7 col-lg-offset-2" id="top_violator_content">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="content-link" target="_blank" rel="nofollow noreferrer">
                                    <span>The Ultimate Guide to High Availability with MariaDB</span>
                                </a>
                            </div>
                            <div class="col-xs-12 col-sm-3" id="top_violator_cta">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="btn btn-mariadb" target="_blank" rel="nofollow noreferrer">Download Now</a>
                            </div>
                        </div>
                    </div>
                    <button type="button" class="btn btn-link close-btn">
                        <svg xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 24 24" width="15px" height="15px"><path d="M 4.9902344 3.9902344 A 1.0001 1.0001 0 0 0 4.2929688 5.7070312 L 10.585938 12 L 4.2929688 18.292969 A 1.0001 1.0001 0 1 0 5.7070312 19.707031 L 12 13.414062 L 18.292969 19.707031 A 1.0001 1.0001 0 1 0 19.707031 18.292969 L 13.414062 12 L 19.707031 5.7070312 A 1.0001 1.0001 0 0 0 18.980469 3.9902344 A 1.0001 1.0001 0 0 0 18.292969 4.2929688 L 12 10.585938 L 5.7070312 4.2929688 A 1.0001 1.0001 0 0 0 4.9902344 3.9902344 z"/></svg>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="wrapper">
<div id="top-nav">
    <div class="container">
        <ul class="hidden-sm hidden-xs" >
            <li><a href="https://mariadb.com/kb/">Knowledge Base</a></li>
            <li><a href="https://mariadb.com/contact/">Contact</a></li>
            
                
                    <li>
                        <a href="/kb/user/login?next=/kb/it/gli-script-di-automazione-di-dbt3/+source/" rel="nofollow">Accesso</a>
                    </li>
                
            
            
            <li id="search-form">
                <form action="/kb/it/+search/" method="get" id="search-block-form" accept-charset="UTF-8">
                    <input id="search" title="Enter the terms you wish to search for."
                           placeholder="Search . . ." type="text"
                           name="q" value="" size="15" maxlength="128" class="form-text"
                           data-autocomplete-url="/kb/it/+search/autocomplete/">
                    <input type="hidden" name="quick" value="1" />
                    <input type="hidden" name="source" value="kb" />
                </form>
            </li>
            <li><a id="search-toggler" href="/kb/search/">Search</a></li>
            
        </ul>
    </div>
</div>
<div id="navbar-bottom" class="navbar">
    <div class="container">
        
        
        
        
        <div class="row">
            <div class="col-md-3 col-sm-9 col-xs-9">
                <a class="brand" href="/" title="MariaDB">
                    <img src="/kb/static/images/logo-2018-black.95f5978ae14d.png">
                </a>
            </div>
            <div class="col-md-9 hidden-sm hidden-xs">
                <div class="main-menu">
                    <ul id="main-menu" class="nav navbar-nav inline-block-sm">
    <li class="has-sub full-menu">
        <a href="/products" title="Products">Products</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/solutions" title="Solutions">Solutions</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/resources" title="Resources">Resources</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/about-us" title="Company">Company</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/pricing" title="Pricing">Pricing</a>
    </li>
    
    <li class="">
        <a class="button electric-eel small top-bar-right-download" href="/downloads/">Download</a>
    </li>
</ul>
                </div>
            </div>
            <div class="col-md-3 visible-sm visible-xs col-sm-3 col-xs-3 ps-rv">
                <div class="navbar-header text-right pull-right">
                    <button type="button" class="menu-control toggle-menu" id="open-menu">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="main">
    <div class="container">
        

        <div id="subheader1" class="clearfix">
            <div class="pull-left">
                
                <div id="breadcrumbs" class="breadcrumb">
                    <a href="/kb/it/">Knowledge Base</a>
                    


    
    » <a class="crumb" href="/kb/it/mariadb-italiano/">MariaDB - Italiano</a>
    

    
    » <a class="crumb" href="/kb/it/sviluppo/">Sviluppo</a>
    

    
    » <a class="crumb" href="/kb/it/qualita/">Qualità</a>
    

    
    » <a class="crumb" href="/kb/it/benchmark-e-test-di-lunga-durata/">Benchmark e test di lunga durata</a>
    

    
    » <a class="crumb" href="/kb/it/benchmark/">Benchmark</a>
    


    » <a class="node_link crumb" href="/kb/it/gli-script-di-automazione-di-dbt3/">Gli script di automazione di DBT3</a>


                </div>
                
            </div>
        </div>
    </div>
    <div class="container" id="container-main">
        <div class="row">
            
            
                
                <aside id="sidebar-first" class="sidebar col-md-2 hidden-xs hidden-sm hidden-print">
                    
                        
                        <ul id="category_menu" class="nav nav-pills nav-stacked">
                            <li><a href="/kb/it/">Pagina iniziale</a></li>
                            
                                
                                    <li><a href="/kb/it/+questions/">Domande Aperte</a></li>
                                
                                <li><a href="/kb/it/documentation/">MariaDB Server</a></li>
                                <li><a href="/kb/it/maxscale/">MariaDB MaxScale</a></li>
                                <li><a href="/kb/it/mariadb-columnstore/">MariaDB ColumnStore</a></li>
                                <li><a href="/kb/it/connectors/">Connectors</a></li>
                            

                        </ul>
                    

                    
                        <div>
    

<div class="well well-small box actions"><div>

        <a class="btn btn-block btn-small" href="/kb/it/gli-script-di-automazione-di-dbt3/">Return to article</a>
    
</div>
</div>

</div>
                    

                    

































                </aside>
            
            
            
                
            
            
            <section id="content" class="limited_width col-md-10 clearfix">
                
                    <h1>Gli script di automazione di DBT3 - Source</h1>
                

                



                <div>
                    

    

    
    <div class="revision_info">
        <dl class="table">
            <dt>Revisione</dt>
            <dd><a href="/kb/it/gli-script-di-automazione-di-dbt3/+r/11335/">11335</a></dd>
            <dt>Utente</dt>
            <dd>
<span class="user" id="user-982">
<a href="/kb/user/id/982" title="Federico Razzoli">Federico Razzoli</a>
</span></dd>
            <dt>Data</dt>
            <dd>

<span class="datetime" title="2012-08-28 15:46">2012-08-28 15:46</span></dd>
        </dl>
    </div>
    


    

    
        
        <textarea id="answer_source" class="creole_source autogrow">&lt;&lt;toc&gt;&gt;
DBT-3 (OSDL Database Test 3) è uno strumento di workload per il kernel Linux sviluppato da OSDL (Open Source Development Labs, inc), e basato su TPC-H del Transaction Performance Processing Council (TPC).

DBT-3, come TPC-H, simula un effettivo sistema di supporto al decision making e modella complesse applicazioni di business analysis che svolgono un lavoro di analisi dei dati per poter prendere le decisioni migliori. Eseguendo il workload simulato da DBT-3, è possibile verificare e misurare le prestazioni del kernel Linux in un effettivo sistema di supporto al decision making.

DBT-3 utilizza lo &#34;scale factor (SF)&#34; come indicatore dello stress sul sistema. Modificando l&#39;SF, è possibile cambiare le dimensioni del database perché raggiunga SF volte le sue vecchie dimensioni.

I test eseguiti da DBT-3 comprendono i tre elencati sotto. Misura i loro tempi di esecuzione, così come le informazioni sullo stato del sistema e le statistiche sul database.

#.1 **Load test**
**none Inserisce nel database i dati che verranno poi usati dai test Power e Throughput. Esegue una bulk insert dei grandi dati CSV corrispondenti allo Scale Factor.

#.2 **Power test**
**none Esegue 22 query complesse.

#.3 **Throughput test**
**none Esegue le stesse 22 query del test Power, ma simultaneamente in più di un processo.

Ai fini di questo task, viene eseguito solo il test Power su un database precedentemente preparato con diversi SF. Il tempo di esecuzione di ogni query viene misurato e registrato in un database. Successivamente i risultati di un unico test con tutte le 22 query verranno disegnati in un istogramma per comparare le differenti configurazioni.

== Preparazione dell&#39;ambiente dei benchmark
=== Permessi per sudo

L&#39;utente che eseguirà i benchmark deve avere i permessi per sudo sulla macchina.

Per pulire le cache di sistema tra un&#39;esecuzione di una query e l&#39;altra, lo script di automazione lancia il seguente comando:

&lt;&lt;code lang=bash inline=false&gt;&gt;
sudo /sbin/sysctl vm.drop_caches=3
&lt;&lt;/code&gt;&gt;

Il comando deve essere eseguito con i permessi da superutente. Anche se l&#39;utente passa una password a sudo, questa password scade dopo un timeout. Perché il comando funzioni senza password, occorre aggiungere al file visudo la riga seguente (per modificarlo si può usare il comando ##&#34;sudo visudo&#34;##):

&lt;&lt;code lang=bash inline=false&gt;&gt;
&#39;username&#39; ALL=NOPASSWD:/sbin/sysctl
&lt;&lt;/code&gt;&gt;

...dove ##&#39;username&#39;## è l&#39;utente che esegue il benchmark.

=== Il software necessario

I benchmark automatizzati di DBT3 necessitano dei seguenti software:

* **[[http://www.perl.org/|Perl]]**
**none **Home del progetto:** http://www.perl.org/

* **[[https://launchpad.net/mariadb-tools|mariadb-tools]]**
**none **Home del progetto:** https://launchpad.net/mariadb-tools
** La cartella del progetto si chiama &#34;##dbt3_benchmark##&#34; ed è sotto ##mariadb-tools##.

* **[[http://sourceforge.net/projects/osdldbt/files/dbt3/|dbt3-1.9]]**
**none **Download:** http://sourceforge.net/projects/osdldbt/files/dbt3/

* **[[http://www.gnuplot.info/|Gnuplot 4.4]]** &lt;&lt;entity&gt;&gt;mdash&lt;&lt;/entity&gt;&gt; programma per l&#39;output grafico. 
**none **Home del progetto:** http://www.gnuplot.info/

* **[[http://search.cpan.org/~simon/Config-Auto-0.03/Auto.pm|Config::Auto]]** &lt;&lt;entity&gt;&gt;mdash&lt;&lt;/entity&gt;&gt;
  un modulo Perlche legge i file di configurazione. Il comando per installarlo è: &lt;&lt;code lang=bash inline=false&gt;&gt;sudo cpan Config::Auto&lt;&lt;/code&gt;&gt;

* **[[http://search.cpan.org/~capttofu/DBD-mysql-4.020/lib/DBD/mysql.pm|DBD::mysql]]** &lt;&lt;entity&gt;&gt;mdash&lt;&lt;/entity&gt;&gt;
  un modulo Perl per connettersi a MariaDB/MySQL e PostgreSQL. Il comando per installarlo è: &lt;&lt;code lang=bash inline=false&gt;&gt;sudo cpan DBD::mysql&lt;&lt;/code&gt;&gt;

**NOTA:** E&#39; possibile che appaia un errore che dice che CPAN non è riuscito a trovare ##mysql_config##. In questo caso occorre installare la libreria client di sviluppo mysql. In OpenSuse il comando è: &lt;&lt;code lang=bash inline=false&gt;&gt;sudo zypper install libmysqlclient-devel&lt;&lt;/code&gt;&gt;

In alternativa questo modulo può essere installato manualmente seguento queste istruzioni:

#.1 Si scarichi DBD-mysql-4.020.tar.gz da http://search.cpan.org/~capttofu/DBD-mysql-4.020/lib/DBD/mysql.pm e lo si decomprima

#.2 Si esegua lo script Perl PerlMake.pl sotto la directory decompressa: &lt;&lt;code lang=bash inline=false&gt;&gt;perl Makefile.PL --mysql_config=/path/to/some/mysql_binary_distribution/bin/mysql_config&lt;&lt;/code&gt;&gt;

#.3 Si esegua ##make## per compilare ##DBD::mysql##:&lt;&lt;code lang=bash inline=false&gt;&gt;make&lt;&lt;/code&gt;&gt;

#.4 Si aggiungano i percorsi necessari per poter eseguire ##DBD::mysql##: &lt;&lt;code lang=bash inline=false&gt;&gt;export PERL5LIB=&#34;/path/to/unzipped_DBD_mysql/DBD-mysql-4.020/lib&#34;
export LD_LIBRARY_PATH=&#34;/path/to/unzipped_DBD_mysql/DBD-mysql-4.020/blib/arch/auto/DBD/mysql/:/path/to/some/mysql_binary_distribution/lib/&#34;
&lt;&lt;/code&gt;&gt;

=== DBMS testati

* **[[http://dev.mysql.com/downloads/mysql/#downloads|MySQL 5.5.x]]**
**none **Download:** http://dev.mysql.com/downloads/mysql/#downloads →
  Generally Available (GA) Releases → Linux - Generic 2.6 (x86, 64-bit),
  Compressed TAR Archive - scaricare mysql-5.5.x-linux2.6-x86_64.tar.gz -
  file tag gzippato per Linux x86

* **[[http://dev.mysql.com/downloads/mysql/#downloads|MySQL 5.6.x]]**
**none **Download:** http://dev.mysql.com/downloads/mysql/#downloads →
  Development Releases → Linux - Generic 2.6 (x86, 64-bit), Compressed TAR
  Archive - scaricare mysql-5.6.x-m5-linux2.6-x86_64.tar.gz - file tag gzippato per Linux x86

* **[[https://launchpad.net/maria/5.3|MariaDB 5.3.x]]**
**none **Download:** https://launchpad.net/maria/5.3 , scaricato con Bazaar: &lt;&lt;code lang=bash inline=false&gt;&gt;bzr branch lp:maria/5.3&lt;&lt;/code&gt;&gt;

* **[[https://launchpad.net/maria/5.3|MariaDB 5.5.x]]**
**none **Download:** https://launchpad.net/maria/5.5 , scaricato con Bazaar: &lt;&lt;code lang=bash inline=false&gt;&gt;bzr branch lp:maria/5.5&lt;&lt;/code&gt;&gt;

* **[[http://www.postgresql.org/ftp/source/v9.1rc1/|PostgreSQL]]**
**none **Download:** http://www.postgresql.org/ftp/source/v9.1rc1/

**NOTA:** DBT3 richiede molto spazio su disco (per esempio i database MySQL 5.5.x + MyISAM con scale factor 30 necessita di circa 50 GB). Inoltre alcune query richiedono l&#39;uso delle tabelle temporanee sotto la directory specificata nel parametro &lt;&lt;code&gt;&gt;--tmpdir&lt;&lt;/code&gt;&gt; di ##mysqld##. Nei file della configurazione già pronta la directory temporanea punta alla directory di sistema di ##mysql## della distribuzione binaria, ma è meglio accertarsi che la suddetta directory abbia abbastanza spazio libero.

== Istruzioni di installazione

**NOTA:** La directory in cui tutti i file verranno scaricati e installati verrà chiamata ##$PROJECT_HOME##. Ed esempio potrebbe essere &lt;&lt;code&gt;&gt;~/benchmark/dbt3&lt;&lt;/code&gt;&gt;.

=== Scaricare **[[https://launchpad.net/mariadb-tools|mariadb-tools]]**

# Ci si porti nella cartella del progetto &lt;&lt;code lang=bash inline=false&gt;&gt;cd $PROJECT_HOME&lt;&lt;/code&gt;&gt;
# Si scarichi la branch più recente da LaunchPad con Bazaar:&lt;&lt;code lang=bash inline=false&gt;&gt;bzr branch lp:mariadb-tools&lt;&lt;/code&gt;&gt;

Il progetto di dbt3 dovrebbe trovarsi nella seguente directory:

&lt;&lt;code lang=bash inline=false&gt;&gt;
$PROJECT_HOME/mariadb-tools/dbt3_benchmark/
&lt;&lt;/code&gt;&gt;

Il progetto ##dbt3_benchmark## contiene i seguenti file e directory:

* **config** &lt;&lt;entity&gt;&gt;mdash&lt;&lt;/entity&gt;&gt; una cartella contenente i file di configurazione di MariaDB, MySQL e PostgreSQL. E&#39; suddivisa in sottodirectory chiamate &#39;##sXX##&#39;, dove ##XX## è lo scale factor.
* **dbt3_mysql** &lt;&lt;entity&gt;&gt;mdash&lt;&lt;/entity&gt;&gt; una cartella contenente i file necessari per preparare i database di DBT3 e le query di test da eseguire con MySQL e MariaDB
* **tests** &lt;&lt;entity&gt;&gt;mdash&lt;&lt;/entity&gt;&gt; una cartella contenente le varie configurazioni dei test. Dentro ci sono le seguenti subdirectory:
** **db_conf** &lt;&lt;entity&gt;&gt;mdash&lt;&lt;/entity&gt;&gt; qui si trovano i file di configurazione dei database.
** **queries_conf** &lt;&lt;entity&gt;&gt;mdash&lt;&lt;/entity&gt;&gt; qui ci sono i file di configurazione delle varie query.
** **results_db_conf** &lt;&lt;entity&gt;&gt;mdash&lt;&lt;/entity&gt;&gt; qui si trova la configurazione del database dei risultati
** **test_conf** &lt;&lt;entity&gt;&gt;mdash&lt;&lt;/entity&gt;&gt; qui ci sono le configurazioni dei test
** **launcher.pl** &lt;&lt;entity&gt;&gt;mdash&lt;&lt;/entity&gt;&gt; uno script in Perl che automatizza il test. I dettagli su come invocarlo e sulle sue funzionalità si trovano più avanti in questa pagina.

=== Preparare il workload e le query

Ai fini del benchmark da [[http://sourceforge.net/projects/osdldbt/files/dbt3/|DBT3-1.9]], si necessita soltanto di **DBGEN** e **QGEN**. DBGEN è lo strumento che genera il workload per i test e QGEN è lo strumento che genera le query da usare nel test.

#.1 Recarsi su http://sourceforge.net/projects/osdldbt/files/dbt3/

#.2 Scaricare l&#39;archivio di DBT3 1.9 nella cartella del progetto $PROJECT_HOME

#.3 Decomprimere l&#39;archivio nella cartella del progetto &lt;&lt;code lang=bash inline=false&gt;&gt;cd $PROJECT_HOME
tar -zxf dbt3-1.9.tar.gz
&lt;&lt;/code&gt;&gt;

#.4 Copiare il file tpcd.h nella cartella dbt3. Questo passaggio comprende le etichette che sono necessarie a MySQL/MariaDB nel costruire le query. &lt;&lt;code lang=bash inline=false&gt;&gt;cp $PROJECT_HOME/mariadb-tools/dbt3_benchmark/dbt3_mysql/tpcd.h $PROJECT_HOME/dbt3-1.9/src/dbgen/&lt;&lt;/code&gt;&gt;

#.5 Copiare il file Makefile sotto ##$PROJECT_HOME/mariadb-tools/dbt3_benchmark/dbt3_mysql/## nella cartella dbt3

*none **NOTA:** Questo passaggio deve essere eseguito solo se si desidera sovrascrivere il comportamento predefinito di QGEN. Dopo aver copiato questo Makefile e compilato il progetto, QGEN verrà impostato per generare le query per MariaDB/MySQL. Se si salta questo passaggio, per default QGEN genererà le query per PostgreSQL.&lt;&lt;code lang=bash inline=false&gt;&gt;cp $PROJECT_HOME/mariadb-tools/dbt3_benchmark/dbt3_mysql/Makefile $PROJECT_HOME/dbt3-1.9/src/dbgen/&lt;&lt;/code&gt;&gt;

#.6 Recarsi in $PROJECT_HOME/dbt3-1.9/src/dbgen e si compili il progetto &lt;&lt;code lang=bash inline=false&gt;&gt;cd $PROJECT_HOME/dbt3-1.9/src/dbgen
make
&lt;&lt;/code&gt;&gt;

#.7 Impostare la variabile DSS_QUERY con la cartella contenente le query modello per MariaDB/MySQL o per PostgreSQL
## Se si desidera creare le query più adatte al dialetto di MariaDB/MySQL, si esegua il seguente comando: &lt;&lt;code lang=bash inline=false&gt;&gt;export DSS_QUERY=$PROJECT_HOME/mariadb-tools/dbt3_benchmark/dbt3_mysql/mysql_queries/&lt;&lt;/code&gt;&gt;
## Se si desidera usare i modelli predefiniti di PostgreSQL, si esegua il seguente comando: &lt;&lt;code lang=bash inline=false&gt;&gt;export DSS_QUERY=$PROJECT_HOME/dbt3-1.9/queries/pgsql/&lt;&lt;/code&gt;&gt;

#.8 Creare una directory che conterrà le query così generate, in&lt;&lt;code lang=bash inline=false&gt;&gt;mkdir $PROJECT_HOME/gen_query&lt;&lt;/code&gt;&gt;

#.9 Generare le query

&gt; **NOTA:** Gli esempi usano uno scale factor di 30. Se si desidera un SF diverso, si imposti il parametro ##-s##

*none &lt;&lt;code lang=bash inline=false&gt;&gt;cd $PROJECT_HOME/dbt3-1.9/src/dbgen
./qgen -s 30 1 &gt; $PROJECT_HOME/gen_query/s30-m/1.sql
./qgen -s 30 2 &gt; $PROJECT_HOME/gen_query/s30-m/2.sql
./qgen -s 30 3 &gt; $PROJECT_HOME/gen_query/s30-m/3.sql
./qgen -s 30 4 &gt; $PROJECT_HOME/gen_query/s30-m/4.sql
./qgen -s 30 5 &gt; $PROJECT_HOME/gen_query/s30-m/5.sql
./qgen -s 30 6 &gt; $PROJECT_HOME/gen_query/s30-m/6.sql
./qgen -s 30 7 &gt; $PROJECT_HOME/gen_query/s30-m/7.sql
./qgen -s 30 8 &gt; $PROJECT_HOME/gen_query/s30-m/8.sql
./qgen -s 30 9 &gt; $PROJECT_HOME/gen_query/s30-m/9.sql
./qgen -s 30 10 &gt; $PROJECT_HOME/gen_query/s30-m/10.sql
./qgen -s 30 11 &gt; $PROJECT_HOME/gen_query/s30-m/11.sql
./qgen -s 30 12 &gt; $PROJECT_HOME/gen_query/s30-m/12.sql
./qgen -s 30 13 &gt; $PROJECT_HOME/gen_query/s30-m/13.sql
./qgen -s 30 14 &gt; $PROJECT_HOME/gen_query/s30-m/14.sql
./qgen -s 30 15 &gt; $PROJECT_HOME/gen_query/s30-m/15.sql
./qgen -s 30 16 &gt; $PROJECT_HOME/gen_query/s30-m/16.sql
./qgen -s 30 17 &gt; $PROJECT_HOME/gen_query/s30-m/17.sql
./qgen -s 30 18 &gt; $PROJECT_HOME/gen_query/s30-m/18.sql
./qgen -s 30 19 &gt; $PROJECT_HOME/gen_query/s30-m/19.sql
./qgen -s 30 20 &gt; $PROJECT_HOME/gen_query/s30-m/20.sql
./qgen -s 30 21 &gt; $PROJECT_HOME/gen_query/s30-m/21.sql
./qgen -s 30 22 &gt; $PROJECT_HOME/gen_query/s30-m/22.sql
&lt;&lt;/code&gt;&gt;

#.10 Generare le query explain:
&lt;&lt;code lang=bash inline=false&gt;&gt;./qgen -s 30 -x 1 &gt; $PROJECT_HOME/gen_query/s30-m/1_explain.sql
./qgen -s 30 -x 2 &gt; $PROJECT_HOME/gen_query/s30-m/2_explain.sql
./qgen -s 30 -x 3 &gt; $PROJECT_HOME/gen_query/s30-m/3_explain.sql
./qgen -s 30 -x 4 &gt; $PROJECT_HOME/gen_query/s30-m/4_explain.sql
./qgen -s 30 -x 5 &gt; $PROJECT_HOME/gen_query/s30-m/5_explain.sql
./qgen -s 30 -x 6 &gt; $PROJECT_HOME/gen_query/s30-m/6_explain.sql
./qgen -s 30 -x 7 &gt; $PROJECT_HOME/gen_query/s30-m/7_explain.sql
./qgen -s 30 -x 8 &gt; $PROJECT_HOME/gen_query/s30-m/8_explain.sql
./qgen -s 30 -x 9 &gt; $PROJECT_HOME/gen_query/s30-m/9_explain.sql
./qgen -s 30 -x 10 &gt; $PROJECT_HOME/gen_query/s30-m/10_explain.sql
./qgen -s 30 -x 11 &gt; $PROJECT_HOME/gen_query/s30-m/11_explain.sql
./qgen -s 30 -x 12 &gt; $PROJECT_HOME/gen_query/s30-m/12_explain.sql
./qgen -s 30 -x 13 &gt; $PROJECT_HOME/gen_query/s30-m/13_explain.sql
./qgen -s 30 -x 14 &gt; $PROJECT_HOME/gen_query/s30-m/14_explain.sql
./qgen -s 30 -x 15 &gt; $PROJECT_HOME/gen_query/s30-m/15_explain.sql
./qgen -s 30 -x 16 &gt; $PROJECT_HOME/gen_query/s30-m/16_explain.sql
./qgen -s 30 -x 17 &gt; $PROJECT_HOME/gen_query/s30-m/17_explain.sql
./qgen -s 30 -x 18 &gt; $PROJECT_HOME/gen_query/s30-m/18_explain.sql
./qgen -s 30 -x 19 &gt; $PROJECT_HOME/gen_query/s30-m/19_explain.sql
./qgen -s 30 -x 20 &gt; $PROJECT_HOME/gen_query/s30-m/20_explain.sql
./qgen -s 30 -x 21 &gt; $PROJECT_HOME/gen_query/s30-m/21_explain.sql
./qgen -s 30 -x 22 &gt; $PROJECT_HOME/gen_query/s30-m/22_explain.sql
&lt;&lt;/code&gt;&gt;

Ora, le query generate per i test su MariaDB/MySQL sono pronte e si trovano nella directory ##$PROJECT_HOME/gen_query/s30-m/## (-m sta per MariaDB/MySQL).

Un&#39;organizzazione ulteriore delle directory è lasciata all&#39;utente.

#.11 Creare una directory per il workload da generare &lt;&lt;code lang=bash inline=false&gt;&gt;mkdir $PROJECT_HOME/gen_data/s30&lt;&lt;/code&gt;&gt;

#.12 Impostare la variabile DSS_PATH con la cartella che conterrà i dati delle tabelle. Il workload dei test si troverà lì. &lt;&lt;code lang=bash inline=false&gt;&gt;export DSS_PATH=$PROJECT_HOME/gen_data/s30/&lt;&lt;/code&gt;&gt;

#.13 Generare i dati delle tabelle

*none **NOTA:** L&#39;esempio usa uno scale factor = ##30##. Per modificarlo, ci si serva del parametro ##-s##.&lt;&lt;code lang=bash inline=false&gt;&gt;./dbgen -vfF -s 30&lt;&lt;/code&gt;&gt;

*none Ora i dati generati si trovano nella cartella impostata in &lt;&lt;code&gt;&gt;$DSS_PATH = $PROJECT_HOME/gen_data/&lt;&lt;/code&gt;&gt;

Ai fini di questo benchmark, questi passaggi sono stati eseguiti con uno scale factor di 30 e si trovano su facebook-maria1 ai seguenti percorsi:

* ##~/benchmark/dbt3/gen_data/s30## &lt;&lt;entity&gt;&gt;mdash&lt;&lt;/entity&gt;&gt; i dati con uno scale factor di 30
* ##~/benchmark/dbt3/gen_query/s30-m## &lt;&lt;entity&gt;&gt;mdash&lt;&lt;/entity&gt;&gt; query generate per MariaDB/MySQL con scale factor 30
* ##~/benchmark/dbt3/gen_query/s30-p## &lt;&lt;entity&gt;&gt;mdash&lt;&lt;/entity&gt;&gt; query generate per PostgreSQL con scale factor 30

Si veda [[http://kb.askmonty.org/it/esempio-di-tempi-di-preparazione-di-dbt3/|Esempio di tempi di preparazione di DBT3]] per sapere quanto tempo è necessario per preparare i database per i test.

=== Scaricare **[[http://dev.mysql.com/downloads/mysql/#downloads|MySQL 5.5.x]]**

#.1 Si scarichi il file tar.gz nella cartella del progetto ##$PROJECT_HOME/bin/##

#.2 Si scompatti l&#39;archivio con il comando seguente: &lt;&lt;code lang=bash inline=false&gt;&gt;gunzip &lt; mysql-5.5.x-linux2.6-x86_64.tar.gz |tar xf -&lt;&lt;/code&gt;&gt;

Ora il server si dovrebbe avviare con questo comando: &lt;&lt;code lang=bash inline=false&gt;&gt;$PROJECT_HOME/bin/mysql-5.5.x-linux2.6-x86_64/bin/mysqld_safe --datadir=some/data/dir &amp;&lt;&lt;/code&gt;&gt;

=== Scaricare **[[http://dev.mysql.com/downloads/mysql/#downloads|MySQL 5.6.x]]**

#.1 Si scarichi il file tar.gz nella cartella del progetto ##$PROJECT_HOME/bin/##

#.2 Si scompatti l&#39;archivio con il comando seguente: &lt;&lt;code lang=bash inline=false&gt;&gt;gunzip &lt; mysql-5.6.x-m5-linux2.6-x86_64.tar.gz |tar xf -&lt;&lt;/code&gt;&gt;

Ora il server si dovrebbe avviare con questo comando:

&lt;&lt;code&gt;&gt;
$PROJECT_HOME/bin/mysql-5.6.x-m5-linux2.6-x86_64/bin/mysqld_safe --datadir=some/data/dir &amp;
&lt;&lt;/code&gt;&gt;

=== Scaricare e compilare MariaDB 5.3.x / MariaDB 5.5.x

**NOTA:** Questi passaggi si applicano anche a MariaDB 5.5.x, cambiando soltanto il numero della versione

#.1 Si scarichi con Bazaar il progetto mariadb 5.3 &lt;&lt;code lang=bash inline=false&gt;&gt;bzr branch lp:maria/5.3
mv 5.3/ mariadb-5.3&lt;&lt;/code&gt;&gt;

#.2 Si compili MariaDB&lt;&lt;code lang=bash inline=false&gt;&gt;cd mariadb-5.3/
./BUILD/compile-amd64-max&lt;&lt;/code&gt;&gt;

#.3 Si crei un file tar.gz&lt;&lt;code lang=bash inline=false&gt;&gt;./scripts/make_binary_distribution&lt;&lt;/code&gt;&gt;

#.4 Si sposti il file tar.gz così generato e lo si scompatti in $PROJECT_HOME/bin, dove verrà usato dallo script di automazione&lt;&lt;code lang=bash inline=false&gt;&gt;mv mariadb-5.3.x-beta-linux-x86_64.tar.gz $PROJECT_HOME/bin/
cd $PROJECT_HOME/bin/
tar -xf mariadb-5.3.x-beta-linux-x86_64.tar.gz&lt;&lt;/code&gt;&gt;

Ora il server si dovrebbe avviare con il seguente comando:&lt;&lt;code lang=bash inline=false&gt;&gt;$PROJECT_HOME/bin/mariadb-5.3.x-beta-linux-x86_64/bin/mysqld_safe --datadir=some/data/dir &amp;&lt;&lt;/code&gt;&gt;

=== Preparare i database per i benchmark

**NOTA:** Queste istruzioni sono identiche per MariaDB, MySQL 5.5.x e MySQL 5.6.x, modificando solo le directory dei database, qui chiamate $DB_HOME (per esempio, per MySQL 5.5.x, $DB_HOME è ##$PROJECT_HOME/bin/mysql-5.5.x-linux2.6-x86_64##). Inoltre si possono preparare i database di test dello Storage Engine InnoDB. Le istruzioni per preparare PostgreSQL si trovano nella sezione per scaricare, compilare e preparare PostgreSQL, più avanti in questa pagina.

#.1 Si apra il file ##$PROJECT_HOME/mariadb-tools/dbt3_benchmark/dbt3_mysql/make-dbt3-db_innodb.sql## e si modifichino i valori nelle chiamate ai comandi SQL che assomigliano al seguente: &lt;&lt;code lang=sql inline=false&gt;&gt;LOAD DATA INFILE &#39;/some/path/to/gen_data/nation.tbl&#39; into table nation fields terminated by &#39;|&#39;;&lt;&lt;/code&gt;&gt;

*none Sembrano tutti uguali, ma operano su tabelle diverse.

*none Si sostituisca &#34;/some/path/to/gen_data/&#34; con la directory corretta, in cui si trovano i dati generati. Il nuovo comando dovrebbe assomigliare al seguente: &lt;&lt;code lang=sql inline=false&gt;&gt;LOAD DATA INFILE &#39;~/benchmark/dbt3/gen_data/s30/nation.tbl&#39; into table nation fields terminated by &#39;|&#39;;&lt;&lt;/code&gt;&gt;

#.2 Si crei un database MySQL vuoto in una cartella che verrà usata per il benchmark&lt;&lt;code lang=bash inline=false&gt;&gt;cd $DB_HOME
./scripts/mysql_install_db --defaults-file=$PROJECT_HOME/mariadb-tools/dbt3_benchmark/config/s30/load_mysql_myisam_my.cnf --basedir=$DB_HOME --datadir=$PROJECT_HOME/db_data/myisam-s30/&lt;&lt;/code&gt;&gt;

*none **NOTA:** Per InnoDB si modifichino i defaults-file in ##load_mysql_innodb_my.cnf##.

#.3 Si avvii il processo mysqld &lt;&lt;code&gt;&gt;./bin/mysqld_safe --defaults-file=$PROJECT_HOME/mariadb-tools/dbt3_benchmark/config/s30/load_mysql_myisam_my.cnf --tmpdir=$PROJECT_HOME/temp/ --socket=$PROJECT_HOME/temp/mysql.sock --datadir=$PROJECT_HOME/db_data/myisam-s30/ &amp;&lt;&lt;/code&gt;&gt;

*none **NOTA:** Per InnoDB si modifichino i defaults-file in ##load_mysql_innodb_my.cnf##.
   Inoltre ci si accerti di avere abbastanza spazio nella directory impostata nel parametro &lt;&lt;code&gt;&gt;--tmpdir&lt;&lt;/code&gt;&gt;, perché il caricamento del database richiede molto spazio temporaneo.

#.4 Si carichino i dati nel database eseguendo il file ##make-dbt3-db_pre_create_PK.sql## (per InnoDB) o ##make-dbt3-db_post_create_PK.sql## (per MyISAM)&lt;&lt;code&gt;&gt;./bin/mysql -u root -S $PROJECT_HOME/temp/mysql.sock &lt; $PROJECT_HOME/mariadb-tools/dbt3_benchmark/dbt3_mysql/make-dbt3-db_post_create_PK.sql&lt;&lt;/code&gt;&gt;

*none **NOTA:** Per velocizzare la creazione, si raccomanda di usare ##make-dbt3-db_pre_create_PK.sql## per caricare i database InnoDB e ##make-dbt3-db_post_create_PK.sql## per i database MyISAM.

#.5 Arrestare il server dei database:&lt;&lt;code lang=bash inline=false&gt;&gt;./bin/mysqladmin --user=root --socket=$PROJECT_HOME/temp/mysql.sock shutdown 0&lt;&lt;/code&gt;&gt;

Ora si ha un database caricato con SF 30. La datadir è ##$PROJECT_HOME/db_data/myisam-s30/##

Gli stessi passaggi possono essere ripetuti con SF differenti e per differenti Storage Engine.

=== Scaricare, compilare e preparare **[[http://www.postgresql.org/ftp/source/v9.1rc1/|PostgreSQL]]**===

#.1 Ci si rechi su http://www.postgresql.org/ftp/source/v9.1rc1/

#.2 Si scarichi il file tramite il link postgresql-9.1rc1.tar.gz

#.3 Si scompatti l&#39;archivio nella cartella del progetto &lt;&lt;code lang=bash inline=false&gt;&gt;gunzip &lt; postgresql-9.1rc1.tar.gz |tar xf -&lt;&lt;/code&gt;&gt;

#.4 Per installare PostgreSQL si eseguano i seguenti comandi nella shell:&lt;&lt;code lang=bash inline=false&gt;&gt;mkdir $PROJECT_HOME/PostgreSQL_bin
cd $PROJECT_HOME/postgresql-9.1rc1 
./configure --prefix=$PROJECT_HOME/bin/PostgreSQL_bin 
make
make install&lt;&lt;/code&gt;&gt;

*none **NOTA:** Lo script di configurazione potrebbe non essere in grado di trovare le seguenti librerie: readline e zlib. In questo caso si esegua la configurazione senza di esse, aggiungendo i seguenti parametri alla riga di comando:
   &lt;&lt;code&gt;&gt;--without-readline --without-zlib&lt;&lt;/code&gt;&gt;

#.5 Si prepari il database dei test:&lt;&lt;code lang=bash inline=false&gt;&gt;mkdir $PROJECT_HOME/db_data/postgre_s30
cd $PROJECT_HOME/bin/PostgreSQL_bin
./bin/initdb -D $PROJECT_HOME/db_data/postgre_s30&lt;&lt;/code&gt;&gt;

#.6 Si avvii il server:&lt;&lt;code lang=bash inline=false&gt;&gt;./bin/postgres -D $PROJECT_HOME/db_data/postgre_s30 -p 54322 &amp;&lt;&lt;/code&gt;&gt;

#.7 Si carichi il dataload nel DB&lt;&lt;code lang=bash inline=false&gt;&gt;./bin/createdb -O {UTENTE} dbt3 -p 54322
./bin/psql -p 54322 -d dbt3 -f $PROJECT_HOME/mariadb-tools/dbt3_benchmark/dbt3_mysql/make-dbt3-db_pg.sql&lt;&lt;/code&gt;&gt;

*none **NOTA:** Qui, al posto di &lt;&lt;code&gt;&gt;{UTENTE}&lt;&lt;/code&gt;&gt;, occorre inserire il proprietario del database.

#.8 Si arresti il server:
&lt;&lt;code lang=bash inline=false&gt;&gt;
./bin/pg_ctl -D $PROJECT_HOME/db_data/postgre_s30/ -p 54322 stop
&lt;&lt;/code&gt;&gt;

Le istruzioni per preparare il carico di lavoro per il benchmark su facebook-maria1 sono quasi pronte per MariaDB, MySQL e PostgreSQL. Ecco le directory per i vari DBMS, Storage Engine e scale factor che sono pronte in facebook-maria1:

* &lt;&lt;code&gt;&gt;~/benchmark/dbt3/db_data/myisam_s30&lt;&lt;/code&gt;&gt;
  &lt;&lt;entity&gt;&gt;mdash&lt;&lt;/entity&gt;&gt; dir dei dati per MariaDB/MySQL + MyISAM con scale
  factor 30

* &lt;&lt;code&gt;&gt;~/benchmark/dbt3/db_data/innodb_mariadb_s30&lt;&lt;/code&gt;&gt;
  &lt;&lt;entity&gt;&gt;mdash&lt;&lt;/entity&gt;&gt; dir dei dati per MariaDB + InnoDB con scale factor 30
  (TODO)

* &lt;&lt;code&gt;&gt;~/benchmark/dbt3/db_data/innodb_mysql_s30&lt;&lt;/code&gt;&gt;
  &lt;&lt;entity&gt;&gt;mdash&lt;&lt;/entity&gt;&gt; dir dei dati per
  MySQL + InnoDB con scale factor 30 (TODO)

* &lt;&lt;code&gt;&gt;~/benchmark/dbt3/db_data/postgre_s30&lt;&lt;/code&gt;&gt;
  &lt;&lt;entity&gt;&gt;mdash&lt;&lt;/entity&gt;&gt; dir dei dati per
  PostgreSQL con scale factor 30 (TODO)

=== Preparare il database dei risultati

I risultati del benchmark verranno scritti in un database separato, che verrà eseguito da MariaDB 5.3.x.

**NOTA:** Il database dei risultati sarà soggetto a modifiche nelle versioni future del progetto DBT3. 

Il database viene creato dal file
##$PROJECT_HOME/mariadb-tools/dbt3_benchmark/dbt3_mysql/make-results-db.sql##.
In esso è possibile trovare tutti i dettagli riguardo alle tabelle e alle colonne del database.

Per preparare il database, si seguano queste istruzioni:

#.1 Ci si porti nella directory di installazione di MariaDB 5.3.x&lt;&lt;code lang=bash inline=false&gt;&gt;cd $PROJECT_HOME/bin/mariadb-5.3.x-beta-linux-x86_64&lt;&lt;/code&gt;&gt;

#.2 Si installino le tabelle del database di sistema nella directory dei risultati (per esempio ##$PROJECT_HOME/db_data/dbt3_results_db##)&lt;&lt;code lang=bash inline=false&gt;&gt;./scripts/mysql_install_db --datadir=$PROJECT_HOME/db_data/dbt3_results_db&lt;&lt;/code&gt;&gt;

#.3 Si avvii il mysqld del db dei risultati&lt;&lt;code lang=bash inline=false&gt;&gt;./bin/mysqld_safe --defaults-file=$PROJECT_HOME/mariadb-tools/dbt3_benchmark/config/mariadb_my.cnf --port=12340 --socket=$PROJECT_HOME/temp/mysql_results.sock  --datadir=$PROJECT_HOME/db_data/dbt3_results_db/ &amp;&lt;&lt;/code&gt;&gt;

#.4 Si installi il database&lt;&lt;code lang=bash inline=false&gt;&gt;./bin/mysql -u root -P 12340 -S $PROJECT_HOME/temp/mysql_results.sock &lt; $PROJECT_HOME/mariadb-tools/dbt3_benchmark/dbt3_mysql/make-results-db.sql&lt;&lt;/code&gt;&gt;

#.5 Si arresti il server del db dei risultati:&lt;&lt;code lang=bash inline=false&gt;&gt;./bin/mysqladmin --user=root --port=12340 --socket=$PROJECT_HOME/temp/mysql_results.sock shutdown 0&lt;&lt;/code&gt;&gt;

== Script di automazione

=== Configurare ed eseguire un benchmark

Per poter eseguire un benchmark, occorre avere:

* 5 file di configurazione:
## Configurazione del **DBMS** (si veda [[#dbms-server-configuration]])
## Configurazione dei **Test** (si veda [[#test-configuration]])
## Configurazione delle **Query** (si veda [[#queries-configuration]])
## Configurazione del **Database dei Risultati** (si veda [[#results-database-configuration]])
## File delle configurazione di **Alto Livello** che combina quanto elencato sopra (si veda [[#top-level-configuration]])
* uno **script di automazione ##launcher.pl##**che dovrebbe trovarsi in ##mariadb-tools/dbt3_benchmark/##
* **parametri di avvio** che dovrebbero essere passati allo script di automazione (si veda [[#script-startup-parameters]]).

Per ognuna di esse, si troveranno ulteriori dettagli nelle sezioni seguenti.

Ogni benchmark si configura tramite un insieme di file. Quelli di esempio (predefiniti) si trovano sotto la directory &#39;mariadb-tools/dbt3_benchmark/tests&#39;. Ogni file di configurazione utilizza la sintassi &#39;ini&#39; e viene letto dallo script di automazione in Perl con il modulo CPAN [[http://search.cpan.org/~simon/Config-Auto-0.03/Auto.pm|Config::Auto]]

==== Parole chiave della configurazione

Ogni file di configurazione potrebbe contenere delle parole chiave che verranno poi sostituite dallo script con dei valori particolari. Esse possono essere usate per comodità, allo scopo di rendere i file più riutilizzabili all&#39;interno dell&#39;ambiente del benchmark. Queste parole chiave sono:

* ##$PROJECT_HOME## &lt;&lt;entity&gt;&gt;mdash&lt;&lt;/entity&gt;&gt; è la directory in cui si trova il progetto &#39;##mariadb-tools##&#39;, oppure un percorso base per l&#39;intero progetto (esempio: &#34;&lt;&lt;code&gt;&gt;DBMS_HOME = $PROJECT_HOME/bin/mariadb-5.3.x-beta-linux-x86_64&lt;&lt;/code&gt;&gt;&#34;).
  Viene sostituita con il valore del parametro di avvio **&#39;project-home**&#39;, passato a **launcher.pl**,

* ##$DATADIR_HOME## &lt;&lt;entity&gt;&gt;mdash&lt;&lt;/entity&gt;&gt; è la directory in cui si trovano le directory dei dati del benchmark (esempio: &#34;&lt;&lt;code&gt;&gt;$DATADIR_HOME/myisam-s30&lt;&lt;/code&gt;&gt;&#34;). Viene sostituita con il valore del parametro di avvio **&#39;datadir-home&#39;**, passato a **launcher.pl**.

* ##$QUERIES_HOME## &lt;&lt;entity&gt;&gt;mdash&lt;&lt;/entity&gt;&gt; è la directory in cui si trovano le query (esempio:  &#34;##$QUERIES_HOME/s30-m##&#34;
  &lt;&lt;entity&gt;&gt;mdash&lt;&lt;/entity&gt;&gt; sono le query per MariaDB/MySQL con scale factor 30). Viene sostituita con il valore del parametro di avvio **&#39;queries-home&#39;**, passato a **launcher.pl**.

* ##$SCALE_FACTOR## &lt;&lt;entity&gt;&gt;mdash&lt;&lt;/entity&gt;&gt; è lo scale factor prescelto. Solitamente è parte della directory dei dati (esempio: &#34;##$DATADIR_HOME/myisam-s$SCALE_FACTOR##&#34;), di quella delle query (esempio: &#34;##$QUERIES_HOME/s$SCALE_FACTOR-m##&#34;) e delle cartella di configurazione del database (esempio: ##$PROJECT_HOME/mariadb-tools/dbt3_benchmark/config/s$SCALE_FACTOR##).
  Viene sostituita con il valore del parametro di avvio **&#39;scale-factor&#39;**, passato a **launcher.pl**.

Si noti che se anche uno solo dei file usa una di queste parole chiave, il parametro corrispondente di **launcher.pl** diviene obbligatorio.

==== Configurazione di alto livello

Un file di configurazione di alto livello definisce i percorsi dei di configurazione **Test, DBMS, Queries** e **Results database**.

Questi sono i file predefiniti nella directory
##mariadb-tools/dbt3_benchmark/tests/## e contengono le seguenti impostazioni:

&lt;&lt;style class=&#34;darkheader-nospace-borders&#34;&gt;&gt;
|= Parameter            |= Description
| ##RESULTS_DB_CONFIG## | Il file di configurazione per il DB dei risultati
| ##TEST_CONFIG##       | Il file di configurazione per i test
| ##QUERIES_CONFIG##    | Il file di configurazione per le query
| ##DB_CONFIG##         | Il file di configurazione per per il server del DBMS
&lt;&lt;/style&gt;&gt;

Questo file ha il seguente formato:

&lt;&lt;code&gt;&gt;
[common]
RESULTS_DB_CONFIG  = $PROJECT_HOME/mariadb-tools/dbt3_benchmark/tests/results_db_conf/results_db.conf
TEST_CONFIG        = $PROJECT_HOME/mariadb-tools/dbt3_benchmark/tests/test_conf/test_myisam.conf

[mariadb_5_3]
QUERIES_CONFIG 	= $PROJECT_HOME/mariadb-tools/dbt3_benchmark/tests/queries_conf/queries.conf
DB_CONFIG 	= $PROJECT_HOME/mariadb-tools/dbt3_benchmark/tests/db_conf/db_mariadb_5_3_myisam.conf

[mysql_5_5]
QUERIES_CONFIG 	= $PROJECT_HOME/mariadb-tools/dbt3_benchmark/tests/queries_conf/queries_mysql.conf
DB_CONFIG 	= $PROJECT_HOME/mariadb-tools/dbt3_benchmark/tests/db_conf/db_mysql_5_5_myisam.conf
...
&lt;&lt;/code&gt;&gt;

**NOTA:** Le impostazioni ##RESULTS_DB_CONFIG## e ##TEST_CONFIG## devono trovarsi nella sezione ##[common]##. Esse servono all&#39;intero test (debbene alcune impostazioni di ##TEST_CONFIG## possano essere sovrascritte nel file ##QUERIES_CONFIG##). Tutte le impostazioni che combinano ##QUERIES_CONFIG## e
##DB_CONFIG## dovrebbero essere in una sezione separata (esempio: ##[mariadb_5_3]##).

Una configurazione viene passata allo script di configurazione con il parametro &lt;&lt;code&gt;&gt;--test=/path/to/some_test_configuration.conf&lt;&lt;/code&gt;&gt; (si veda [[#parametri-di-avvio-dello-script]])

==== Configurazione del server del DBMS

Questi file di configurazioni contengono impostazioni che descrivono il DBMS da testare. Di solito si trovano nella cartella ##mariadb-tools/dbt3_benchmark/tests/db_conf##.

Ecco l&#39;elenco dei parametri che possono essere impostati in questi file di configurazione:

&lt;&lt;style class=&#34;darkheader-nospace-borders&#34;&gt;&gt;
|= Parametro            |= Spiegazione
|  ##DBMS_HOME##        | Percorso della cartella di installazione di MariaDB / MySQL / PostgreSQL is located.\\\\**NOTA:** Lo script di automazione usa &#34;##./bin/mysqld_safe##&#34; per avviare il processo ##mysqld##. Perciò le versioni di MariaDB e MySQL dovrebbero essere &#34;distribuzioni binarie&#34;.
|  ##DBMS_USER##        | L&#39;utente del database da usare.
|  ##CONFIG_FILE##      | Il file di configurazione letto da mysqld o postgres all&#39;avvio
|  ##SOCKET##           | Il socket da usare per avviare il server
|  ##PORT##             | La porta su cui il server sarà in ascolto
|  ##HOST##             | L&#39;host in cui si trova il server
|  ##DATADIR##          | Percorso della directory dei dati di mysqld o postgres
|  ##TMPDIR##           | Dove si trovano le tabelle temporanee usate per l&#39;ordinamento e il raggruppamento
|  ##DBNAME##           | Il nome del database (schema) in cui si trovano le tabelle del benchmark
|  ##KEYWORD##          | Questo testo viene scritto nel database dei risultati come parola chiave. Verrà anche usato come nome di una sottocartella contenente risultati e statistiche
|  ##DBMS##             | Database Management System da usare. Valori ammessi: &#34;MySQL&#34;, &#34;MariaDB&#34; e &#34;PostgreSQL&#34;
|  ##STORAGE_ENGINE##   | Lo Storage Engine da usare (MyISAM, InnoDB, etc.)
|  ##STARTUP_PARAMS##   | Tutti i parametri da usare per avviare il processo mysqld o postgres process. Stesso formato usato nella riga di comando
|  ##GRAPH_HEADING##    | L&#39;heading della grafica di questo test specifico
|  ##MYSQL_SYSTEM_DIR## | Si veda //&#34;Nota su ##MYSQL_SYSTEM_DIR##&#34;//, sotto.
|  ##READ_ONLY##        | Se impostato a 1, il processo mysqld viene avviato con il parametro di avvio &#39;&lt;&lt;code&gt;&gt;--read-only&lt;&lt;/code&gt;&gt;&#39;
|  ##PRE_RUN_SQL##      | Comandi SQL da eseguire prima di ogni query
|  ##POST_RUN_SQL##     | Comandi SQL da eseguire dopo ogni query
|  ##PRE_TEST_SQL##     | Comandi SQL da eseguire prima dell&#39;intero test
|  ##POST_TEST_SQL##    | Comandi SQL da eseguire dopo l&#39;intero test
&lt;&lt;/style&gt;&gt;

&lt;&lt;style class=graybox&gt;&gt;
**Nota su ##MYSQL_SYSTEM_DIR##:**\\\\

Questa opzione è stata aggiunta per comodità quando si desidera risparmiare tempo e spazio su disco per generare i database per diversi DBMS (e versioni diverse degli stessi) utilizzando un&#39;unica directory dei dati. Quando si eseguono più versioni di MariaDB/MySQL su una singola directory dei dati, bisognerebbe usare [[http://dev.mysql.com/doc/refman/5.5/en/mysql-upgrade.html|mysql-upgrade]] per aggiustare le tabelle di sistema. Quindi in una directory dei dati, è possibile preparare le seguenti directory per diverse directory di sistema di MariaDB/MySQL:
\\\\
* ##mysql_mysql_5_5## &lt;&lt;entity&gt;&gt;mdash&lt;&lt;/entity&gt;&gt; una copia della directory di sistema &#39;##mysql##&#39; aggiornata con MySQL 5.5.x
* ##mysql_mariadb_5_3## &lt;&lt;entity&gt;&gt;mdash&lt;&lt;/entity&gt;&gt; una copia della directory di sistema &#39;##mysql##&#39; aggiornata con MariaDB 5.3.x
* ##mysql_mariadb_5_5## &lt;&lt;entity&gt;&gt;mdash&lt;&lt;/entity&gt;&gt; una copia della directory di sistema &#39;##mysql##&#39; aggiornata con MariaDB 5.5.x\\\\

Se ##MYSQL_SYSTEM_DIR## è impostato a una di queste directory, lo script di automazione scollegherò l&#39;attuale directory di sistema &#39;mysql&#39; e creerà un nuovo link simbolico con lo stesso nome della directory impostata.\\\\

Ecco un esempio:
\\
&lt;&lt;code lang=bash inline=false&gt;&gt;
unlink /path/to/datadir/mysql
ln -s /path/to/value/in/MYSQL_SYSTEM_DIR/mysql_mariadb_5_3 /path/to/datadir/mysql
&lt;&lt;/code&gt;&gt;
\\
**NOTA:** Questo approccio è adattabile ai test per MyISAM.
&lt;&lt;/style&gt;&gt;

Il file di configurazione assomiglia a quanto segue:

&lt;&lt;code&gt;&gt;
[db_settings]
DBMS_HOME	= $PROJECT_HOME/bin/mariadb-5.3.2-beta-linux-x86_64
DBMS_USER	= root
...
&lt;&lt;/code&gt;&gt;

Si noti che la sezione ##[db_settings]## è necessaria perché il file venga interpretato correttamente dallo script di automazione.

==== Configurazione dei test

Questi file di configurazione contengono le impostazioni concernenti i test. Essi si trovano nella directory **mariadb-tools/dbt3_benchmark/tests/test_conf**. 

Ecco un elenco dei parametri che possono essere impostati in questo file:

&lt;&lt;style class=&#34;darkheader-nospace-borders&#34;&gt;&gt;
|= Parametro |= Spiegazione
|  ##QUERIES_AT_ONCE## | Se è impostato a ##1##, tutte le query verranno eseguite sequenzialmente senza riavviare il server o svuotare le cache tra le query.
|  ##CLEAR_CACHES## | Se è ##1##, le cache su disco verranno svuotate prima di testare ogni query.
|  ##WARMUP## | Esegue un riscaldamento prima di lanciare le query.
|  ##EXPLAIN## | Esegue un comando Explain prima di ogni query. I risultati vengono scritti in un file nella directory dei risultati.
|  ##RUN## | Esegue il test effettivo.
|  ##ANALYZE_EXPLAIN## | Un meccanismo di estrazione dei risultati dove solo il miglior piano di esecuzione (risultati di ##EXPLAIN## select) viene misurato. E&#39; progettato per essere usato con lo Storage Engine InnoDB, laddove il piano scelto varia riavviando il server (si veda [[#meccanismo-di-estrazione-dei-risultati]]).
|  ##MIN_MAX_OUT_OF_N## | Un meccanismo di estrazione dei risultati in cui i test del valore minimo e del valore massimo di ##N## (valore del parametro ##NUM_TESTS##) vengono presi come risultato. Questo parametro si può usare quando si testa lo Storage Engine InnoDB (si veda [[#meccanismo-di-estrazione-dei-risultati]]).
|  ##SIMPLE_AVERAGE## | Un messanismo di estrazione dei risultati in cui il risultato finale è la media del tempo impiegato dai test. Il numero di test per query è determinato dal parametro NUM_TESTS. Si noti che, se anche un test raggiunge il timeout, il risultato complessivo sarà &#39;time-out&#39;. Questo parametro si può usare per testare lo Storage Engine MyISAM, perché in questo caso il piano di esecuzione è costante (si veda [[#meccanismo-di-estrazione-dei-risultati]]).
|  ##NUM_TESTS## | Quanti test devono essere eseguiti per ogni query. Se ANALYZE_EXPLAIN è impostato, questo valore può essere impostato a 0, che significa che i test devono continuare finché un numero sufficiente di risultati sarà stato estratto (si veda l&#39;impostazione ##CLUSTER_SIZE##). Questo parametro è molto importante se si specifica ##MIN_MAX_OUT_OF_N## o ##SIMPLE_AVERAGE##.
|  ##MAX_SKIPPED_TESTS## | Se ANALYZE_EXPLAIN è impostato e viene scelto il piano di esecuzione più lento, la query non viene eseguita e il server viene riavviato per cambiare piano. Se il server viene riavviato più di ##MAX_SKIPPED_TESTS## volte, è evidente che non ci sono altri piani di esecuzione e lo script passa al benchmark della prossima query.
|  ##WARMUPS_COUNT## | Quante esecuzioni di riscaldamento devono essere eseguite prima del benchmark effettivo.
|  ##CLUSTER_SIZE## | Quanto deve essere grande un cluster con i risultati di una query per estrarre il risultato finale. Si usa insieme al meccanismo di estrazione dei risultati ##ANALYZE_EXPLAIN##.
|  ##MAX_QUERY_TIME## | Quante volte al massimo una query può essere testata. Attualmente può essere usato solo con ##ANALYZE_EXPLAIN##.
|  ##TIMEOUT## | Il tempo massimo che una query può impiegare. Attualmente è utilizzato solo con MySQL e MariaDB.
|  ##OS_STATS_INTERVAL## | Intervallo di tempo che intercorre tra le letture delle statistiche del sistema riguardo alla CPU, la memoria, etc.
|  ##PRE_RUN_OS## | Comandi di sistema da eseguire prima di ogni query
|  ##POST_RUN_OS## | Comandi di sistema da eseguire dopo ogni query
|  ##PRE_TEST_OS## | Comandi di sistema da eseguire prima dell&#39;intero test
|  ##POST_TEST_OS## | Comandi di sistema da eseguire dopo il completamento dell&#39;intero test
&lt;&lt;/style&gt;&gt;

Il file di configurazione assomiglia a quanto segue:

&lt;&lt;code&gt;&gt;
QUERIES_AT_ONCE = 0
CLEAR_CACHES	= 1
WARMUP		= 0
...
&lt;&lt;/code&gt;&gt;

==== Configurazione delle query

Questi file di configurazione contengono l&#39;elenco di tutte le query da testare su ogni database. Alcune impostazioni della ##Configurazione del server del DBMS## e della ##Configurazione dei test## possono essere sovrascritte nei file della ##Configurazione delle query##.  Queste impostazioni si trovano nella directory ##mariadb-tools/dbt3_benchmark/tests/queries_conf##.

Ecco un elenco dei parametri che possono essere impostati in questo file:

&lt;&lt;style class=&#34;darkheader-nospace-borders&#34;&gt;&gt;
|= Parametro |= Spiegazione
|  ##QUERIES_HOME## | Dove si trovano le query, sul disco. Questo valore viene concatenato all&#39;opzione ##QUERY## per comporre il percorso delle query. **NOTA:** Questa impostazione deve trovarsi nella sezione ##[queries_settings]##.
|  ##CONFIG_FILE## | Sovrascrive il parametro di avvio ##CONFIG_FILE## del file di configurazione del **server del DMBS** e determina il file di configurazione del database da utilizzare. Può essere utilizzata se un file di configurazione privo di ottimizzazioni deve essere impostato come file di configurazione per queste particolari query.\\\\**NOTA:** Questa impostazione deve trovarsi nella sezione ##[queries_settings]##.
|  ##QUERY## | Nome della query che si trova nella cartella ##QUERIES_HOME##. Esempio: &#34;1.sql&#34;
|  ##EXPLAIN_QUERY## | Nome dell&#39;explain delle query nella  cartella ##QUERIES_HOME##. Esempio: &#34;1_explain.sql&#34;
|  ##TMPDIR## | Dovrascrive l&#39;impostazione TMPDIR della configurazione del ##server del DMBS##.
|  ##STARTUP_PARAMS## |Sovrascrive l&#39;impostazione ##STARTUP_PARAMS## della configurazione del ##server del DMBS##. Utilizzando questa impostazione si possono modificare alcuni particolari parametri (come le ottimizzazioni e i buffer) del server del DB.
|  ##PRE_RUN_SQL## | Sovrascrive l&#39;impostazione ##PRE_RUN_SQL## della configurazione del **server del DMBS**.
|  ##POST_RUN_SQL## | Sovrascrive l&#39;impostazione ##POST_RUN_SQL## della configurazione del **server del DMBS**.
|  ##RUN## | TSovrascrive l&#39;impostazione ##RUN## della configurazione dei **test**.
|  ##EXPLAIN## | Sovrascrive l&#39;impostazione ##EXPLAIN## della configurazione dei **test**.
|  ##TIMEOUT## | Sovrascrive l&#39;impostazione ##TIMEOUT## della configurazione dei **test**.
|  ##NUM_TESTS## | Sovrascrive l&#39;impostazione ##NUM_TESTS## della configurazione dei **test**.
|  ##MAX_SKIPPED_TESTS## | Sovrascrive l&#39;impostazione ##MAX_SKIPPED_TESTS## della configurazione dei **test**.
|  ##WARMUP## | Sovrascrive l&#39;impostazione ##WARMUP## della configurazione dei **test**.
|  ##WARMUPS_COUNT## | Sovrascrive l&#39;impostazione ##WARMUPS_COUNT## della configurazione dei **test**.
|  ##MAX_QUERY_TIME## |Sovrascrive l&#39;impostazione ##MAX_QUERY_TIME## della configurazione dei **test**.
|  ##CLUSTER_SIZE## | Sovrascrive l&#39;impostazione ##CLUSTER_SIZE## della configurazione dei **test**.
|  ##PRE_RUN_OS## | Sovrascrive l&#39;impostazione ##PRE_RUN_OS## della configurazione dei **test**.
|  ##POST_RUN_OS## | Sovrascrive l&#39;impostazione ##POST_RUN_OS## della configurazione dei **test**.
|  ##OS_STATS_INTERVAL## | Sovrascrive l&#39;impostazione ##OS_STATS_INTERVAL## della configurazione dei **test**.
&lt;&lt;/style&gt;&gt;

Il file di configurazione delle query assomiglia a quanto segue:

&lt;&lt;code&gt;&gt;
[queries_settings]
QUERIES_HOME = /percorso/delle/queries

[query1]
QUERY=1.sql
EXPLAIN_QUERY=1_explain.sql
STARTUP_PARAMS=

[query2]
QUERY=2.sql
EXPLAIN_QUERY=2_explain.sql
STARTUP_PARAMS=--optimizer_switch=&#39;mrr=on&#39; --mrr_buffer_size=8M --some_startup_parmas
...
&lt;&lt;/code&gt;&gt;

...dove &#34;##QUERIES_HOME = /percorso/delle/queries##&#34; si può sostituire con &#34;##QUERIES_HOME = $QUERIES_HOME/s$SCALE_FACTOR-m##&#34;, nel qual caso ##$QUERIES_HOME## e $SCALE_FACTOR verranno sostituiti dai parametri di avvio passati a ##launcher.pl## (si veda [[#parametri-di-avvio-dello-script]])

**NOTA:** La sezione ##[queries_settings]## è necessaria perché il file venga interpretato correttamente.Inoltre, le impostazioni di ogni query devono trovarsi in una sezione che ha un nome univoco (esempio: ##[query1]## o ##[1.sql]##)

==== Configurazione del database dei risultati

Questi file di configurazione contengono impostazioni concernenti il database nel quale vengono scritti i risultati. Essi si trovano nella cartella ##mariadb-tools/dbt3_benchmark/tests/results_db_conf##.

Ecco l&#39;elenco dei parametri che possono essere impostati in questo file:

&lt;&lt;style class=&#34;darkheader-nospace-borders&#34;&gt;&gt;
|= Parametro |= Spiegazione
|  ##DBMS_HOME## | Percorso della directory del database. Esempio: &#34;##$PROJECT_HOME/mariadb-5.3.x-beta-linux-x86_64##&#34;. Si dovrebbe usare una distribuzione binaria di MariaDB o MySQL.
|  ##DBMS_USER## | L&#39;utente usato dal DBMS
|  ##DATADIR## | Percorso della directory dei dati del database dei risultati
|  ##CONFIG_FILE## | Quale file di configurazione è usato dal database.
|  ##SOCKET## | Il socket che sarà usato dal database dei risultati. Deve essere differente da quello usato dai database di test.
|  ##PORT## | La porta usata dal database dei risultati. Deve essere differente da quello usato dai database di test.
|  ##STARTUP_PARAMS## | I parametri di avvio da usare all&#39;avvio del server.
|  ##DBNAME## | Il nome del database da usare.
|  ##HOST## | L&#39;host in cui si trova il database dei risultati.
&lt;&lt;/style&gt;&gt;

La configurazione del dei risultati assomiglia alla seguente:
&lt;&lt;code&gt;&gt;
DBMS_HOME	= $PROJECT_HOME/mariadb-5.3.x-beta-linux-x86_64
DBMS_USER	= root
...
&lt;&lt;/code&gt;&gt;

==== Parametri di avvio dello script

##launcher.pl## potrebbe accettare i parametri passati in questo modo: &#34;&lt;&lt;code&gt;&gt;--some-param&lt;&lt;/code&gt;&gt;&#34;. Si noti che queste opzioni sono case-sensitive, cioè le lettere minuscole sono considerate diverse dalle maiuscole. I parametri si scrivono in maiuscolo quando devono sovrascrivere le impostazioni che si trovano in un altro file.

Ecco l&#39;elenco dei parametri di avvio:

&lt;&lt;style class=&#34;darkheader-nospace-borders&#34;&gt;&gt;
|= Parametro |= Spiegazione
|  ##test## | Il file di configurazione di alto livello da utilizzare. Questo parametro è **obbligatorio**.
|  ##results-output-dir## | Percorso dei risultati del benchmark. Un timestamp viene automaticamente aggiunto al nome della directory per poter tenere traccia della data e dell&#39;ora del benchmark. Questo parametro è **obbligatorio**.
|  ##dry-run## | Se è impostato, non verrà eseguito alcun benchmark. Verranno solo scritti i messaggi sulle operazioni che avrebbero dovuto essere svolte.
|  ##project-home## | E&#39; obbligatorio se uno dei file di configurazione contiene la variabile &#39;##$PROJECT_HOME##&#39;. Se tutti i file utilizzano percorsi assoluti, verrà ignorata.
|  ##datadir-home## | Nei file di configurazione, la stringa &#39;##$DATADIR_HOME##&#39; viene sostituita con questo valore. Se la stringa non c&#39;è, il parametro viene ignorato.
|  ##queries-home## | Nei file di configurazione, la stringa &#39;##$QUERIES_HOME##&#39; viene sostituita con questo valore. Se la stringa non c&#39;è, il parametro viene ignorato.
|  ##scale-factor## | Nei file di configurazione, la stringa &#39;##$SCALE_FACTOR##&#39; viene sostituita con questo valore. Se la stringa non c&#39;è, il parametro viene ignorato.
|  ##CLEAR_CACHES## | Se impostato, sovrascrive l&#39;impostazione scritta nel file di configurazione dei **test**.
|  ##QUERIES_AT_ONCE## | Se impostato, sovrascrive l&#39;impostazione scritta nel file di configurazione dei **test**.
|  ##RUN## | Se impostato, sovrascrive l&#39;impostazione scritta nel file di configurazione dei **test**.
|  ##EXPLAIN## | Se impostato, sovrascrive l&#39;impostazione scritta nel file di configurazione dei **test**.
|  ##TIMEOUT## | Se impostato, sovrascrive l&#39;impostazione scritta nel file di configurazione dei **test**.
|  ##NUM_TESTS## | Se impostato, sovrascrive l&#39;impostazione scritta nel file di configurazione dei **test**.
|  ##MAX_SKIPPED_TESTS## | Se impostato, sovrascrive l&#39;impostazione scritta nel file di configurazione dei **test**.
|  ##WARMUP## | Se impostato, sovrascrive l&#39;impostazione scritta nel file di configurazione dei **test**.
|  ##WARMUPS_COUNT## | Se impostato, sovrascrive l&#39;impostazione scritta nel file di configurazione dei **test**.
|  ##MAX_QUERY_TIME## | Se impostato, sovrascrive l&#39;impostazione scritta nel file di configurazione dei **test**.
|  ##CLUSTER_SIZE## | Se impostato, sovrascrive l&#39;impostazione scritta nel file di configurazione dei **test**.
|  ##PRE_RUN_OS## | Se impostato, sovrascrive l&#39;impostazione scritta nel file di configurazione dei **test**.
|  ##POST_RUN_OS## | Se impostato, sovrascrive l&#39;impostazione scritta nel file di configurazione dei **test**.
|  ##OS_STATS_INTERVAL## | Se impostato, sovrascrive l&#39;impostazione scritta nel file di configurazione dei **test**.
&lt;&lt;/style&gt;&gt;

=== Meccanismi di estrazione dei risultati

Esistono tre differenti meccanismi di estrazione dei risultati. Possono essere impostati dai parametri nel file di configurazione dei test:

* ##ANALYZE_EXPLAIN##
* ##MIN_MAX_OUT_OF_N##
* ##SIMPLE_AVERAGE##

Solo uno di questi deve essere impostato a TRUE (1). 

**##ANALYZE_EXPLAIN##** è utile per il benchmark dello Storage Engine InnoDB, dove il piano di esecuzione di una stessa query potrebbe cambiare al riavvio del server. E&#39; progettato per eseguire la query solo con il piano più performante. Ciò significa che il server viene riavviato se il piano di esecuzione attuale è più lento di un altro. Come risultato finale, viene tenuto quello con il piano di esecuzione che si dimostra essere più veloce ed è stato utilizzato almeno in un numero di test uguale a ##CLUSTER_SIZE##  per quella query. Impostando il parametro di configurazione ##NUM_TESTS## si può determinare il numero massimo di esecuzioni dei test, che una volta raggiunto determina il miglior tempo medio del cluster (anche se è minore di ##CLUSTER_SIZE##). Inoltre quando viene raggiunto il timeout di una query (##MAX_QUERY_TIME##), il meccanismo restituisce il miglior risultato raggiunto dal cluster.

**##MIN_MAX_OUT_OF_N##** serve anch&#39;esso per il benchmark dello Storage Engine InnoDB. I tempi dell&#39;esecuzione più rapida e di quella più lenta sono conservati come risultati. Si presume che quando il piano di esecuzione cambia, variano anche i tempi di esecuzione, e interessano soltanto il più lungo e il più breve.

**##SIMPLE_AVERAGE##** si usa per il benchmark di quegli Storage Engine che non modificano il piano di esecuzione dopo il riavvio, come MyISAM. Il risultato finale è il tempo di esecuzione media di tutte le esecuzioni delle varie query.

=== Grafico dei risultati

Dopo l&#39;esecuzione di ogni query, i risultati vengono registrati in un file chiamato **results.dat** che si trova in &lt;&lt;code&gt;&gt;{RESULTS_OUTPUT_DIR}&lt;&lt;/code&gt;&gt;. Questo file è progettato per essere letto facilmente dal programma di disegno Gnuplot 4.4. E&#39; diviso in blocchi, separati da molte righe vuote. Tutti i blocchi cominciano con una riga di commento che contiene dettagli sul blocco dei risultati.

Le query che hanno raggiunto il timeout hanno un valore di ##100000## in modo che superino il margine del grafico e vengano tagliate fuori. Le altre query sono rappresentate con la loro durata reale (in secondi), che comincia da ##0##. Il grafico termina l&#39;asse y sul valore più lungo di ##durata del test + 20%##. Per esempio se il test più lungo è durato ##100## secondi, il grafico verrà tagliato a ##120## secondi. Le query che hanno raggiunto il timeout verranno quindi tagliate a questo limite per rendere l&#39;idea del timeout.

Durante l&#39;esecuzione del test, uno script di gnuplot viene creato con i parametri necessari perché il grafico venga generato automaticamene. Dopo l&#39;esecuzione di ogni singola query il grafico viene rigenerato, in modo che l&#39;utente possa vedere i risultati correnti prima che l&#39;intero benchmark sia finito. Questo file si chiama ##gnuplot_script.txt## e si trova in ##{RESULTS_OUTPUT_DIR}##. L&#39;utente può modificarlo aggiustando i parametri e l&#39;intestazione dopo che il test è completato, per poter dare al risultato finale il &#34;look and feel&#34; desiderato.

=== Output dello script
==== Output del benchmark

Nella directory indicata dal parametro {RESULTS_OUTPUT_DIR} (esempio:
##~/benchmark/dbt3/results/myisam_test_2011-12-08_191427/##) sono contenuti i seguenti file e directory:

* Una directory per ogni test, chiamata come il parametro {KEYWORD} della configurazione dei test (esempio: ##mariadb-5-3-2##)
* **cpu_info.txt** &lt;&lt;entity&gt;&gt;mdash&lt;&lt;/entity&gt;&gt; l&#39;output del comando &#34;##/bin/cat /proc/cpuinfo##&#34;
* **uname.txt** &lt;&lt;entity&gt;&gt;mdash&lt;&lt;/entity&gt;&gt; l&#39;output del comando &#34;##uname -a##&#34;
* **results.dat** &lt;&lt;entity&gt;&gt;mdash&lt;&lt;/entity&gt;&gt; i risultati dell&#39;esecuzione di ogni query in un solo file. Questo verrà usato come file di dati dallo script di gnuplot. Contiene anche il rapporto tra il primo test e quello corrente.
* **gnuplot_script.txt** &lt;&lt;entity&gt;&gt;mdash&lt;&lt;/entity&gt;&gt; lo script di Gnuplot che visualizza i grafici.
* **graphics.jpeg** &lt;&lt;entity&gt;&gt;mdash&lt;&lt;/entity&gt;&gt; il grafico dell&#39;output
* Un file di configurazione del **benchmark**
  (esempio: ##myisam_test_mariadb_5_3_mysql_5_5_mysql_5_6.conf##) copiato da ##mariadb-tools/dbt3_benchmark/tests/##
* Un file di configurazione del **del database dei risultati** (esempio: ##results_db.conf##) copiato da ##mariadb-tools/dbt3_benchmark/tests/results_db_conf/##
* Un file di configurazione dei **test** (esempio: ##test_myisam.conf##) copiato da ##mariadb-tools/dbt3_benchmark/tests/test_conf/##

==== Output dei test

La sottodirectory del test specifico, il cui nome corrisponde al valore del parametro {KEYWORD} (esempio:
##~/benchmark/dbt3/results/myisam_test_2011-12-08_191427/mariadb-5-3-2/##),
contiene i seguenti file:

* **pre_test_os_resutls.txt** - l&#39;output dei comandi di sistema (se ci sono) eseguiti prima della prima query del test
* **pre_test_sql_resutls.txt** - l&#39;output dei comandi SQL (se ci sono) eseguiti prima della prima query del test
* **post_test_os_resutls.txt** - l&#39;output dei comandi di sistema (se ci sono) eseguiti dopo l&#39;ultima query del test
* **post_test_sql_resutls.txt** - l&#39;output dei comandi SQL (se ci sono) eseguiti dopo l&#39;ultima query del test
* **all_explains.txt** - un file contenente tutti gli EXPlAIN delle query, i loro parametri di avvio per il benchmark e il risultato dell&#39;EXPLAIN
* Il **file config** (my.cnf) passato a mysqld o postgres
  (esempio: ##mariadb_myisam_my.cnf##) copiato da ##mariadb-tools/dbt3_benchmark/config/s$SCALE_FACTOR/##
* Il file di configurazione delle **query** (esempio: &#39;&#39;queries-mariadb.conf&#39;&#39;) copiato da ##mariadb-tools/dbt3_benchmark/tests/queries_conf/##
* Il file di configurazione del **database** (esempio: &#39;&#39;db_mariadb_5_3_myisam.conf&#39;&#39;)
  copiato da ##mariadb-tools/dbt3_benchmark/tests/db_conf/##

==== Output delle query

Per ogni esecuzione di query, vengono generati diversi file dallo script di automazione. Essi vengono salvati in una sottodirectory il cui nome corrisponde al parametro ##{KEYWORD}##:

* Risultato explain - un file chiamato
  &#39;**{nome_query}_{numero_esecuzioni}_results.txt**&#39; (esempio:
  &#39;**1_explain.sql_1_results.txt**&#39; &lt;&lt;entity&gt;&gt;mdash&lt;&lt;/entity&gt;&gt; primo test per 1_explain.sql)
* Comandi di sistema pre-esecuzione - comandi eseguiti prima della query.
  L&#39;output è un file chiamato
  &#39;**pre_run_os_q_{nome_query}_no_{numero_esecuzione}_results.txt**&#39; (esempio:
  &#39;**pre_run_os_q_1.sql_no_2_results.txt**&#39; &lt;&lt;entity&gt;&gt;mdash&lt;&lt;/entity&gt;&gt; secondo test per la query 1.sql)
* Comandi SQL pre-esecuzione - comandi SQL eseguiti prima della query.
  L&#39;output è un file chiamato
  &#39;**pre_run_sql_q_{nome_query}_no_{numero_esecuzione}_results.txt**&#39;.
* Comandi di sistema post-esecuzione - comandi eseguiti dopo la query.
  L&#39;output è un file chiamato
  &#39;**post_run_os_q_{nome_query}_no_{numero_esecuzione}_results.txt**&#39;.
* Comandi SQL post-esecuzione - comandi SQL eseguiti dopo la query.
  L&#39;output è un file chiamato
  &#39;**post_run_sql_q_{nome_query}_no_{numero_esecuzione}_results.txt**&#39;.
* Statistiche di utilizzo della CPU:
  &#39;**{nome_query}_no_{numero_esecuzione}_sar_u.txt**&#39;
* Statistiche di I/O e velocità di trasferimento:
  &#39;**{nome_query}_no_{numero_esecuzione}_sar_b.txt**&#39;
* Statistiche di utilizzo della memoria:
  &#39;**{nome_query}_no_{numero_esecuzione}_sar_r.txt**&#39;


=== Hook

Lo script di automazione fornisce degli hook che permettono all&#39;utente di aggiungere comandi SQL e di sistema (OS) prima e dopo ogni test. Ecco un elenco di tutti i possibili hook:

* Hook SQL Pre-test: si imposta con il parametro ##PRE_TEST_SQL##. Contiene comandi SQL da eseguire una sola volta prima della prima esecuzione.
  (Esempio: &#34;&lt;&lt;code lang=mysql inline=true&gt;&gt;use dbt3; select version(); show variables; show engines; show table status;&lt;&lt;/code&gt;&gt;&#34;)
* Hook SQL Post-test: si imposta con il parametro ##POST_TEST_SQL##. Contiene comandi SQL da eseguire una sola volta dopo l&#39;ultima esecuzione.
* Hook OS Pre-test: si imposta con il parametro ##PRE_TEST_OS##. Contiene comandi OS da eseguire una sola volta prima della prima esecuzione.
* Hook OS Post-test: si imposta con il parametro ##POST_TEST_OS##. Contiene comandi OS da eseguire una sola volta dopo l&#39;ultima esecuzione.
* Hook SQL Pre-run: si imposta con il parametro ##PRE_RUN_SQL##. Contiene comandi SQL da eseguire prima di ogni singola query.
  (Esempio: &#34;&lt;&lt;code lang=mysql inline=true&gt;&gt;flush status; set global userstat=on;&lt;&lt;/code&gt;&gt;&#34;)
* Hook SQL Post-run: si imposta con il parametro ##POST_RUN_SQL##. Contiene comandi SQL da eseguire dopo ogni singola query.
  (Esempio: &#34;&lt;&lt;code lang=mysql inline=true&gt;&gt;show status; select * from information_schema.TABLE_STATISTICS;&lt;&lt;/code&gt;&gt;&#34;)
* Hook OS Pre-run: si imposta con il parametro ##PRE_RUN_OS##. Contiene comandi OS da eseguire prima di ogni singola query. 
* Hook SQL Post-run: si imposta con il parametro ##POST_RUN_OS##. Contiene comandi OS da eseguire prima di ogni singola query.

I risultati di questi comandi vengono registrati nella cartella ##{RESULTS_OUTPUT_DIR}/{KEYWORD}## (si veda [[#loutput-dello-script]])

=== Attività

Ecco le principali attività che vengono eseguite dallo script:

# Parsing dei file di configurazione e controllo dei parametri in input - se uno di quelli obbligatori manca, lo script termina con un errore.
# Raccolta di informazioni sull&#39;hardware - rilevamento delle informazioni sull&#39;hardware della macchina su cui gira il benchmark. Attualmente raccoglie ##cpuinfo## e ##uname##. I risultati di questi comandi vengono scritti nella directory dei risultati impostata nell&#39;apposito parametro.
# Ricerca delle configurazioni dei test positivi\\\\Per ogni test passato, lo script esegue le seguenti operazioni:
## Avvia il server del database dei risultati. I risultati dei test sono scritti in quel database database.
## Pulisce le cache sul server\\\\Questa operazione viene effettuata tramite il seguente comando:&lt;&lt;code lang=bash inline=false&gt;&gt;sudo /sbin/sysctl vm.drop_caches=3&lt;&lt;/code&gt;&gt;
***none **NOTA:** Per pulire le cache l&#39;utente deve disporre dei diritti sudo e occorre aggiungere la seguente riga al file ##sudoers##
    (per modificarlo: &#34;##sudo vusudo##&#34;):&lt;&lt;code lang=bash inline=false&gt;&gt;{your_username} ALL=NOPASSWD:/sbin/sysctl&lt;&lt;/code&gt;&gt;
## Avvio del server del database
## Esecuzione dei comandi SQL pre-test. I risultati vengono registrati nella cartella
   ##results_output_dir/{KEYWORD}## e il loro nome è ##pre_test_sql_results.txt##. ##{KEYWORD}## è una parola chiave univoca nell&#39;attuale configurazione del database.
## Esecuzione dei comandi OS pre-test. I risultati vengono registrati nella cartella ##results_output_dir/{KEYWORD}## e si chiamano ##pre_test_os_results.txt##.
***none **NOTA:** Se, nella configurazione del test, l&#39;opzione QUERIES_AT_ONCE è impostata a 0, il server viene riavviato tra una query e l&#39;altra. Pertanto i punti 3.2, 3.3, 3.4 e 3.5 vengono eseguiti solo una volta subito prima del punto 3.6.2.
## Lettura delle configurazioni delle query, e per ognuna vengono eseguite le seguenti operazioni:
### Controllo dei parametri della configurazione del test. Se c&#39;è qualcosa che non va, il programma termina con un errore.
### Se è la prima esecuzione della prima query, lettura della versione del server
### Esecuzione dei comandi OS nella shell. I risultati di queste query vengono registrati in un file chiamato ##pre_run_os_q_{QUERY}_no_{RUN_NO}_results.txt##
    nella cartella ##results_output_dir/{KEYWORD}##, dove ##{QUERY}## è il nome della query
    (esempio: ##1.sql##), ##{RUN_NO}## è il numero progressivo dell&#39;esecuzione e ##{KEYWORD}## è una parola chiave univoca nella configurazione del test.
### Esecuzione delle query SQL pre-run. I risultati di queste query vengono registrati in un file chiamato ##pre_run_sql_q_{QUERY}_no_{RUN_NO}_results.txt##
    nella cartella ##results_output_dir/{KEYWORD}##, dove ##{QUERY}## è il nome della query 
    (esempio: ##1.sql##), ##{RUN_NO}## è il numero progressivo dell&#39;esecuzione e ##{KEYWORD}## è una parola chiave univoca nella configurazione del test. 
### Esecuzioni di riscaldamento, se richieste dal file di configurazione del test
### Esecuzione del test effettivo e misurazione della tempistica.
****none Durante questo passaggio, viene creato un nuovo processo figlio per poter rilevare le statistiche del sistema operativo. Attualmente vengono raccolte queste informazioni:
***** Statistiche di utilizzo della CPU. Il comando è:&lt;&lt;code lang=sh inline=false&gt;&gt;sar -u 0 2&gt;null&lt;&lt;/code&gt;&gt;
***** Statistiche sulla velocità di trasferimento dell&#39;I/O. Il comando è:&lt;&lt;code lang=sh inline=false&gt;&gt;sar -b 0 2&gt;null&lt;&lt;/code&gt;&gt;
***** Statistiche sull&#39;utilizzo della memoria. Il comando è:&lt;&lt;code lang=sh inline=false&gt;&gt;sar -r 0 2&gt;null&lt;&lt;/code&gt;&gt;
**** Queste statistiche vengono rilevate ogni N secondi, dove ##N## viene specificato dal parametro della configurazione del test ##OS_STATS_INTERVAL##.
**** L&#39;esecuzione del test su MariaDB e MySQL ha un meccanismo per forzare l&#39;uscita quando viene raggiunto un certo timeout. Esso è controllato dal parametro del test ##TIMEOUT##. Attualmente per PostgreSQL questa funzionalità è assente e dovrebbe essere implementata nelle versioni future.
### Esecuzione dell&#39;istruzione &#34;explain&#34; sulla query corrente.
****none **NOTA:** L&#39;esecuzione delle query ##EXPLAIN## con MySQL prima della versione 5.6.3 potrebbe impiegare molto tempo, perché MySQL deve eseguire l&#39;intera query se vi sono delle SELECT annidate. Per MariaDB e PostgreSQL il problema non esiste. Le query explain che impiegano molto tempo sono le #7, 8,
     9, 13 e 15. Per questo motivo in MySQL prima della versione 5.6.3 non dovrebbe essere eseguita alcuna ##EXPLAIN## su queste query.
### Esecuzione dei comandi SQL post-run
### Esecuzione dei comandi OS post-run nella shell
### Log dei risultati nel database dei risultati
### Generazione di un grafico dei risultati correnti, tramite Gnuplot
## Arresto del server del database.
## Esecuzione dei comandi SQL post-test. I risultati vengono registrati nella cartella ##results_output_dir/{KEYWORD}## e si chiamano ##post_test_sql_results.txt##.
## Esecuzione dei comandi OS post-test. I risultati vengono registrati nella cartella ##results_output_dir/{KEYWORD}## e si chiamano ##post_test_os_results.txt##.
## Arresto del server del database dei risultati

=== Esempi di chiamate allo script

* Esempio di chiamata al test per MyISAM con scale factor 30 e timeout di 10 minuti:&lt;&lt;code lang=perl inline=false&gt;&gt;perl launcher.pl \
--project-home=/path/to/project/home/ \
--results-output-dir=/path/to/project/home/results/myisam_test \
--datadir=/path/to/project/home/db_data/ \
--test=/path/to/project/home/mariadb-tools/dbt3_benchmark/tests/myisam_test_mariadb_5_3_mysql_5_5_mysql_5_6.conf \
--queries-home=/path/to/project/home/gen_query/ \
--scale-factor=30 \
--TIMEOUT=600
&lt;&lt;/code&gt;&gt;

...dove ##/path/to/project/home## è il percorso del progetto ##mariadb-tools##. Rimpiazza tutte le occorrenze della stringa &#34;$PROJECT_HOME&#34; nel file di configurazione (esempio: &#34;##TMPDIR = $PROJECT_HOME/temp/##&#34; con
&#34;##TMPDIR = /path/to/project/home/temp/##&#34;).

&lt;&lt;code&gt;&gt;--TIMEOUT&lt;&lt;/code&gt;&gt; sovrascrive il timeout impostato nel file di configurazione, cambiandolo a a 10 minuti.

* Esempio di test per InnoDB con scale factor 30 con timeout di 2 ore per query
  e 3 esecuzioni per ogni query:&lt;&lt;code lang=perl inline=false&gt;&gt;perl launcher.pl \
--project-home=/path/to/project/home/ \
--results-output-dir=/path/to/project/home/results/innodb_test \
--datadir=/path/to/project/home/db_data/ \
--test=/path/to/project/home/mariadb-tools/dbt3_benchmark/tests/innodb_test_mariadb_5_3_mysql_5_5_mysql_5_6.conf \
--queries-home=/path/to/project/home/gen_query/ \
--scale-factor=30 \
--TIMEOUT=7200 \
--NUM_TESTS=3
&lt;&lt;/code&gt;&gt;

* Se esiste una versione più recente di MariaDB 5.5:
** copiare o modificare il file di configurazione del **server del DBMS**  ##mariadb-tools/dbt3_benchmark/tests/db_conf/db_mariadb_5_5_myisam.conf##
   e modificare il parametro ##DBMS_HOME## nella distribuzione binaria. E&#39; ache possibile modificare ##KEYWORD## e ##GRAPH_HEADING##

* Se si desidera aggiungere ulteriori test nel benchmark di MyISAM per MariaDB 5.3,
  ma con un altro file di configurazione predefinito (my.cnf):
** copiare o modificare il file di configurazione del **server del DBMS**  ##mariadb-tools/dbt3_benchmark/tests/db_conf/db_mariadb_5_3_myisam.conf##
   e modificare il parametro CONFIG_FILE in my.cnf
** copiare o modificare il file di configurazione del **test**  ##mariadb-tools/dbt3_benchmark/tests/myisam_test_mariadb_5_3_mysql_5_5_mysql_5_6.conf##
   e aggiungere le nuove impostazioni:&lt;&lt;code lang=mysql inline=false&gt;&gt;[mariadb_5_3_new_configuration]
QUERIES_CONFIG = $PROJECT_HOME/mariadb-tools/dbt3_benchmark/tests/queries_conf/queries-mariadb.conf
DB_CONFIG 	= $PROJECT_HOME/mariadb-tools/dbt3_benchmark/tests/db_conf/db_mariadb_5_3_myisam_new_configuration.conf
&lt;&lt;/code&gt;&gt;

* Se ad esempio si desidera aggiungere ulteriori parametri di avvio per la query 6 per MariaDB:
** copiare o modificare il file ##mariadb-tools/dbt3_benchmark/tests/queries_conf/queries-mariadb.conf##
   aggiungendo il parametro:
   &#34;&lt;&lt;code&gt;&gt;STARTUP_PARAMS=--optimizer_switch=&#39;mrr=on&#39; --mrr_buffer_size=96M&lt;&lt;/code&gt;&gt;&#34;
   nella sezione della query 6.
** copiare o modificare il file di configurazione del **test**  ##mariadb-tools/dbt3_benchmark/tests/myisam_test_mariadb_5_3_mysql_5_5_mysql_5_6.conf##
   per includere il nuovo file di configurazione delle **query**

== Risultati
=== Test di MyISAM

Benchmark DBT3 con la seguente configurazione:

* MariaDB 5.3.2 Beta + MyISAM
* MariaDB 5.5.18 + MyISAM
* MySQL 5.5.19 + MyISAM
* MySQL 5.6.4 + MyISAM

Pagina dei risultati: [[dbt3-benchmark-results-myisam|DBT3 benchmark results MyISAM]]

=== Test di InnoDB

Benchmark DBT3 con la seguente configurazione:

* MariaDB 5.3.2 Beta + XtraDB
* MariaDB 5.5.18 + XtraDB
* MySQL 5.5.19 + InnoDB
* MySQL 5.6.4 + InnoDB

Pagina dei risultati: [[dbt3-benchmark-results-innodb|DBT3 benchmark results InnoDB]]

=== Test di PostgreSQL

Benchmark DBT3 con la seguente configurazione:

* MariaDB 5.3.2 Beta + XtraDB
* MySQL 5.6.4 + InnoDB
* PostgreSQL

Pagina dei risultati: (TODO)

</textarea>
    


                    <div id="content_disclaimer" class="graybox">
                        Content reproduced on this site is the property of its respective owners,
                        and this content is not reviewed in advance by MariaDB. The views, information and opinions
                        expressed by this content do not necessarily represent those of MariaDB or any other party.
                    </div>
                </div>
            </section>

            
        </div>
    </div>
</div>

<!-- Footer -->
<footer id="footer">
    <div class="footer">
        <div class="container">
            <div class="row">
                <div class="col-xs-12">
                    <ul class="list-inline text-center footer-nav">
                        <li>
                            <h5>
                                <a href="https://mariadb.com/products" title="Products">Products</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/solutions" title="Solutions">Solutions</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/resources" title="Resources">Resources</a>
                            </h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/about-us" title="About MariaDB">Company</a></h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/pricing" title="Pricing">Pricing</a>
                            </h5>
                        </li>
                        
                        
                        <li>
                            <h5><a href="https://mariadb.com/downloads" title="Download">Download MariaDB</a></h5>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="row row-10">
                
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div id="block-footerformcontact" class="block block-block-content block-block-contentd754ee1b-3cc9-40e7-9ef4-f504f1197fb1">
                        
                            <h5 style="font-weight: 400;">Subscribe to our newsletter!</h5>
                            <script src="//app-sj15.marketo.com/js/forms2/js/forms2.min.js"></script><form id="mktoForm_1498"></form>
                            <script>
                                <!--//--><![CDATA[// ><!--
                                MktoForms2.loadForm("//app-sj15.marketo.com", "573-PXI-984", 1498);
                                //--><!]]]]><![CDATA[>
                                //--><!]]>
                            </script>
                        
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div class="footer-copyright">
                        <div class="text-center">
                            <ul class="list-inline no-margin">
                                <li>
                                    <a href="/legal" title="Legal">Legal</a>
                                </li>
                                <li>
                                    <a href="/privacy-policy" title="Privacy Policy">Privacy Policy</a>
                                </li>
                                <li>
                                    <a href="/cookie-policy/" title="Cookies">Cookie Policy</a>
                                </li>
                            </ul>
                            <p>Copyright &copy; 2025 MariaDB. All rights reserved.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
</footer>
</div>

<div id="ajax_loading">
    <img src="/kb/static/images/ajax-loader.a51c5608d01a.gif" />
</div>

    <!-- Google Tag Manager -->
    <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-MK2847"
                      height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
            '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MK2847');</script>
    <!-- End Google Tag Manager -->

</body>

<script type="text/javascript" src="/kb/static/js/main.1587e3a666fc.js" charset="utf-8"></script>

</html>