<!DOCTYPE html>
<html>
<head data-cookie-domain=""
      data-cookie-path="/">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="apple-touch-icon" sizes="180x180" href="/kb/static/images/favicons/apple-touch-icon.159e713979be.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/kb/static/images/favicons/favicon-32x32.bc0ac1d5d11e.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/kb/static/images/favicons/favicon-16x16.5801f8f0f34e.png">
    <link rel="shortcut icon" href="/kb/static/images/favicons/favicon.d122d305dee4.ico" type="image/x-icon" />

    <title>Aria FAQ - Source - MariaDB Knowledge Base</title>

    <link href="/kb/static/css/main.b9e1e104f007.css" rel="stylesheet" type="text/css" />

    
        <meta name="robots" content="noindex, nofollow">
    

    <!-- FB Open Graph tags -->
    <meta property="og:title" content="Aria FAQ - Source" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://mariadb.com/kb/it/aria-faq/+source/" />
    <meta property="og:image" content="http://mariadb.comaskmonty-logo.png" />
    <meta property="og:site_name" content="MariaDB KnowledgeBase" />
    <meta property="fb:admins" content="514852603" />
    <meta property="og:description" content="" />

    <meta name="description" content="" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="//fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet"/>
    
</head>
<body class="mpkb nodes autoresize nodes_source jqui" id="nodes_source">





<div id="menu-mobile" class="visible-sm visible-xs">

    <div>
        <div id="mobile-close-menu" class="text-right">
            <a href="javascript:void(0)" title="Close Menu" id="back-main" class="toggle-menu">X<span></span></a>
        </div>
    </div>
    <div class="mainmenu-mobile">
        <ul class="ls-none ul-menu">
            <li data-sub="submenu5"><a class="open-form-search" href="/kb/search/" title="Search">Search </a></li>
            <li data-sub="submenu0"><a href="/products" title="Products">Products</a><span class="arrow-main"></span></li>
            <li data-sub="submenu1"><a href="/services" title="Services">Services</a><span class="arrow-main"></span></li>
            <li data-sub="submenu2"><a href="/resources" title="Resources">Resources</a><span class="arrow-main"></span></li>
            <li data-sub="submenu3"><a href="/about-us" title="About">About</a><span class="arrow-main"></span></li>
            <li data-sub="submenu4"><a href="/contact" title="Contact">Contact</a></li>
        </ul>
    </div>

    <div class="nav-top-mobile">
        <div class="select-box form">

            <ul class="inline-block-md mb-none top-nav">
                <li>

                </li>
                
                    <li>
                        <a href="/kb/user/login?next=/kb/it/aria-faq/+source/"> Login</a>
                    </li>
                
            </ul>



        </div>
        <p class="text-center copyright">Copyright &copy; 2024 MariaDB. All rights reserved.</p>
    </div>
</div>
<div id="wrapper">
<div id="top-nav">
    <div class="container">
        <ul class="hidden-sm hidden-xs" >
            <li><a href="https://mariadb.com/kb/">Knowledge Base</a></li>
            <li><a href="https://mariadb.com/contact/">Contact</a></li>
            
                
                    <li>
                        <a href="/kb/user/login?next=/kb/it/aria-faq/+source/" rel="nofollow">Accesso</a>
                    </li>
                
            
            
            <li id="search-form">
                <form action="/kb/it/+search/" method="get" id="search-block-form" accept-charset="UTF-8">
                    <input id="search" title="Enter the terms you wish to search for."
                           placeholder="Search . . ." type="text"
                           name="q" value="" size="15" maxlength="128" class="form-text"
                           data-autocomplete-url="/kb/it/+search/autocomplete/">
                    <input type="hidden" name="quick" value="1" />
                    <input type="hidden" name="source" value="kb" />
                </form>
            </li>
            <li><a id="search-toggler" href="/kb/search/">Search</a></li>
            
        </ul>
    </div>
</div>
<div id="navbar-bottom" class="navbar">
    <div class="container">
        
        
        
        
        <div class="row">
            <div class="col-md-3 col-sm-9 col-xs-9">
                <a class="brand" href="/" title="MariaDB">
                    <img src="/kb/static/images/logo-2018-black.95f5978ae14d.png">
                </a>
            </div>
            <div class="col-md-9 hidden-sm hidden-xs">
                <div class="main-menu">
                    <ul id="main-menu" class="nav navbar-nav inline-block-sm">
    <li class="has-sub full-menu">
        <a href="/products" title="Products">Products</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/services" title="Services">Services</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/pricing" title="Pricing">Pricing</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/resources" title="Resources">Resources</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/about-us" title="About Us">About Us</a>
    </li>
    <li class="">
        <a class="button electric-eel small top-bar-right-download" href="/downloads/">Download</a>
    </li>
</ul>
                </div>
            </div>
            <div class="col-md-3 visible-sm visible-xs col-sm-3 col-xs-3 ps-rv">
                <div class="navbar-header text-right pull-right">
                    <button type="button" class="menu-control toggle-menu" id="open-menu">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="main">
    <div class="container">
        

        <div id="subheader1" class="clearfix">
            <div class="pull-left">
                
                <div id="breadcrumbs" class="breadcrumb">
                    <a href="/kb/it/">Knowledge Base</a>
                    


    
    » <a class="crumb" href="/kb/it/mariadb-italiano/">MariaDB - Italiano</a>
    

    
    » <a class="crumb" href="/kb/it/storage-engine/">Storage Engine</a>
    

    
    » <a class="crumb" href="/kb/it/aria/">Aria</a>
    


    » <a class="node_link crumb" href="/kb/it/aria-faq/">Aria FAQ</a>


                </div>
                
            </div>
        </div>
    </div>
    <div class="container" id="container-main">
        <div class="row">
            
            
                
                <aside id="sidebar-first" class="sidebar col-md-2 hidden-xs hidden-sm hidden-print">
                    
                        
                        <ul id="category_menu" class="nav nav-pills nav-stacked">
                            <li><a href="/kb/it/">Pagina iniziale</a></li>
                            
                                
                                    <li><a href="/kb/it/+questions/">Domande Aperte</a></li>
                                
                                <li><a href="/kb/it/documentation/">MariaDB Server</a></li>
                                <li><a href="/kb/it/maxscale/">MariaDB MaxScale</a></li>
                                <li><a href="/kb/it/mariadb-columnstore/">MariaDB ColumnStore</a></li>
                                <li><a href="/kb/it/connectors/">Connectors</a></li>
                            

                        </ul>
                    

                    
                        <div>
    

<div class="well well-small box actions"><div>

        <a class="btn btn-block btn-small" href="/kb/it/aria-faq/">Return to article</a>
    
</div>
</div>

</div>
                    

                    

































                </aside>
            
            
            
                
            
            
            <section id="content" class="limited_width col-md-10 clearfix">
                
                    <h1>Aria FAQ - Source</h1>
                

                



                <div>
                    

    

    
    <div class="revision_info">
        <dl class="table">
            <dt>Revisione</dt>
            <dd><a href="/kb/it/aria-faq/+r/20776/">20776</a></dd>
            <dt>Utente</dt>
            <dd>
<span class="user" id="user-982">
<a href="/kb/user/id/982" title="Federico Razzoli">Federico Razzoli</a>
</span></dd>
            <dt>Data</dt>
            <dd>

<span class="datetime" title="2013-10-02 09:11">2013-10-02 09:11</span></dd>
        </dl>
    </div>
    


    

    
        
        <textarea id="answer_source" class="creole_source autogrow">Questa FAQ spiega cosa aspettarsi dallo Storage Engine Aria (nel testo chiamato semplicemente &#39;Aria&#39;). [[MariaDB]], il fork di MySQL che include Aria, è illustrato nella sua pagina dedicata.
&lt;&lt;style class=&#34;redbox&#34;&gt;&gt;
Nota: **//Aria//** era precedentemente chiamato //**Maria**// (si veda 
[[http://askmonty.org/wiki/Rename_Maria|Rename Maria]] per ulteriori dettagli sul cambio di nome) e nelle attuali versioni di [[MariaDB]] ci si può riferire ad esso come Maria o come Aria. Questo comportamento cambierà in una futura versione di MariaDB, perciò vi preghiamo di modificare se necessario i vostri script!
&lt;&lt;/style&gt;&gt;
&lt;&lt;toc&gt;&gt;
== Cosa è Aria? ==

Aria è un nuovo Storage Engine per MySQL(R) e MariaDB, sviluppato con l&#39;obiettivo di creare uno Storage Engine di default che sia transazionale **E**
non-transazionale.

E&#39; in sviluppo dal 2007 ed è stato annunciato nel
[[http://monty-says.blogspot.com/2008/01/maria-engine-is-released.html|blog di Monty]].

E&#39; sviluppato dagli ingegneri principali di MySQL, che hanno sviluppato il server
MySQL e gli Storage Engine **MyISAM**, **MERGE** e **MEMORY**.

== Perché si chiama Aria? ==

Lo Storage Engine inizialmente si chiamava **Maria**, come la figlia più giovane di Monty. Monty ha chiamato MySQL come la sua prima figlia **My**. Il suo secondo figlio, **Max**, ha dato il suo nome a MaxDB e alle distribuzioni MySQL-Max. 

Poiché il server di database //MariaDB// e lo Storage Engine //Maria// venivano confusi, è stato deciso di cambiare il nome.  Si è tenuto un contest chiamato //Rename Maria// durante la prima metà del 2010 e vari nomi sono stati proposti da tutto il mondo.  Monty ha scelto //**Aria**// da una breve lista di finalisti. La persona che lo ha suggerito, Chris Tooley, ha ricevuto in premio un 
[[http://www.system76.com/product_info.php?cPath=27&amp;products_id=91|System 76 Meerkat NetTop]] con Linux da Monty Program. Ulteriori informazioni sul contest sono disponibili alla paina
[[http://askmonty.org/wiki/Rename_Maria|Rename Maria]].

== Qual è l&#39;obiettivo di Aria 1.5 (versione attuale)?

Costituire un&#39;alternativa crash-safe a MyISAM. Ossia, quando mysqld si riavvia dopo un crash, Aria riporta tutte le tabelle allo stato in cui si trovavano all&#39;inizio di un&#39;istruzione o all&#39;inizio del precedente LOCK TABLES.

L&#39;obiettivo attuale è mantenerla stabile e correggere tutti i bug che sono stati trovati.

== Qual è l&#39;obiettivo di Aria 2.0 (prossima versione)?

Uno Storage Engine pienamente transazionale che abbia almeno tutte le funzionalità principali di InnoDB.

Al momento Aria 2.0 è in attesa, perché gli sviluppatori stanno dedicando le loro energie ai miglioramenti di MariaDB. Tuttavia sono interessati a lavorare con clienti e partner per aggiungere ulteriori funzionalità ad Aria e terminare Aria 2.0.

L&#39;obiettivo è meglio definito nel [[http://dev.mysql.com/worklog/task/?id=3056|WorkLog di Aria 2.0]]. Cliccando su &#39;Dependent Tasks&#39; si possono vedere i dettagli.

Ecco una breve descrizione:

* ACID compliant
* Commit/Rollback
* Updates e deletes concorrenti
* Lock a livello di riga
* Group commit (è già in MariaDB 5.2)
* Ricerca nelle pagine degli indici più veloci (Page directory)

In Aria 2.5 l&#39;intento è di iniziare a concentrarsi sulle prestazioni.

== Come pensate di raggiungere questi obiettivi?

Migliorando continuamente [[MariaDB]] e rilasciandolo fin quando non si avrà una release sufficientemente stabile. 

I miglioramenti tra le varie versioni dovrebbero essere realizzati in modo tale che gli aggiornamenti siano triviali (insomma, senza bisogno di effettuare il dump e ricaricare i dati, o modificare le applicazioni).

Lavoreremo da vicino con la [[community|comunità]] per migliorare tanto lo Storage Engine Aria
quando il server MySQL che è distribuito come parte di
[[MariaDB]]. Lavoreremo anche con la Sun per introdurre lo Storage Engine Aria in MySQL 6.0.

Gli [[http://code.launchpad.net/maria|alberi di sviluppo di MariaDB]] su Launchpad sono aperti al download e allo sviluppo della [[community|comunità]].

== Quali sono gli obiettivi finali di Aria?

NOTA: Quelli elencati di seguito sono gli //obiettivi tecnici// del team del progetto. Il modo in cui Aria verrà incorporato nel server MySQL(R) e se rimpiazzerà MyISAM è soggetto alle decisioni del MySQL Product Management.

* Creare un nuovo Storage Engine che sia conforme ad ACID e abbia il Multi-Version Concurrency Control (MVCC), e che possa essere lo Storage Engine predefinito sia transazionale sia non transazionale per MariaDB e
  MySQL(R).
* Creare un rimpiazzo per MyISAM. Questo è possibile perché Aria può essere eseguito anche in modalità non transazionale, supporta gli stessi formati di MyISAM e supporta o supporterà la maggior parte delle caratteristiche di MyISAM.
* Che Aria sia un componente standard di MySQL 6.0; è già nell&#39;albero di
  MySQL 6.0 supportato da Sun (ora Oracle).

== Quali sono gli &#39;obiettivi di progetto&#39; di Aria?

* Multi-Version Concurrency Control (MVCC) e ACID
* Tabelle opzionalmente non transazionali che dovrebbero essere &#39;veloci e compatte&#39; come quelle di MyISAM
* Possibilità di usare Aria per le tabelle temporanee interne in MySQL (invece di MyISAM)
* Tutti gli indici dovrebbero avere la stessa velocità (gli indici clusterizzati non fanno parte della road map di Aria. Se si necessita degli indici clusterizzati, è meglio usare XtraDB)
* Far sì che le transazioni di &#39;qualsiasi&#39; lunghezza funzionino (supportando le transazioni di lunga durata, si avrà bisogno di più spazio nei log)
* Permettere lo spostamento dei log; per esempio, si potranno fare dei backup incrementali delle tabelle Aria copiando i log di Aria
* Permettere di copiare le tabelle Aria tra differenti server (rispettando alcuni vincoli ben definiti)
* Miglior gestione dei blob (come minimo, migliore di quella offerta da MyISAM)
* Evitare di copiare la memoria o di usare memoria aggiuntiva per i blob durante le insert e le update.
* Blob allocati in grandi blocchi sequenziali - meno frammentazione nel tempo
* I blob sono registrati in modo tale che Aria possa facilmente essere estesa per avere accesso a qualsiasi parte del blob con una singola lettura, in futuro
* Scrittura veloce su disco (quindi un basso ritardo per le righe dei dati, un basso ritardo per le pagine dei dati e poco spazio sprecato nelle pagine). Nota: vi è ancora del lavoro da fare per completare questo obiettivo. Il progetto del disco va bene, ma c&#39;è bisogno di più caching in memoria
* Un piccolo footprint, per rendere MariaDB + Aria adatto ai desktop e alle applicazioni embedded
* Allocazione della memoria flessibile e algoritmi scalabili per utilizzare grandi quantità di memoria in modo efficiente, quando è disponibile

== Dove posso trovare documentazione e aiuto su Aria?

Il progetto è mantenuto su [[http://launchpad.net/maria|Launchpad]].

Se si desidera restare aggiornati o essere parte dello sviluppo di Aria, è possibile iscriversi ai gruppi 
[[http://launchpad.net/~maria-captains|maria-captains]], 
[[http://launchpad.net/~maria-developers|maria-developers]],
[[http://launchpad.net/~maria-docs|maria-docs]] o
[[http://launchpad.net/~maria-discuss|maria-discuss]] su
[[http://launchpad.net/maria|Launchpad]].

E&#39; possibile riportare o conoscere i bug di Aria su
[[http://bugs.launchpad.net/maria|Launchpad]] o nel
[[http://bugs.mysql.com|sistema di bug di MySQL]].

Di solito è possibile trovare alcuni sviluppatori di MariaDB online sul canare
[[IRC]] #maria su freenode.

== Chi c&#39;è dietro ad Aria?

Attualmente, il nucleo del team di Aria è formato da:

Leader tecnico:
* Michael &#34;Monty&#34; Widenius - Creatore di MySQL e MyISAM

Sviluppatori principali (in ordine alfabetico)
* Guilhem Bichot - Esperto di replica, on line backup di MyISAM, etc.
* Kristian Nielsen - Build tools di MySQL, NDB, MySQL server
* Oleksandr Byelkin - Cache delle query, sub-queries, viste
* Sergei Golubchik - Architetto del server, ricerca fulltext, indici per MyISAM-Merge, architettura a Plugin, etc.

Tutti eccetto Guilhem Bichot lavorano per [[http://skysql.com/|SkySQL]].

== Quali sono la politica dei rilasci e la pianificazione di Aria?

Aria segue gli stessi [[criteri-di-rilascio|criteri di rilascio]] che usa [[MariaDB]].

Alcuni chiarimenti, relativi ad Aria:

* I formati dei file degli indici e dei dati dovrebbero essere compatibili all&#39;indietro e in avanti, per facilitare il downgrade e l&#39;upgrade
* Si cercherà di mantenere compatibile il formato dei file di log, ma non ci sono garanzie che sarà così. In altre parole, in caso di upgrade, a volte sarà necessario rimuovere i vecchi file aria_log.######## e maria_log.######## prima di riavviare mysqld. Fino ad ora questo è avvenuto solo tra MariaDB 5.1 e 5.2

=== Commissioni aggiuntive per Beta 1.5

* Aria ha tutte le caratteristiche previste dalle specifiche presenti nel
  [[http://forge.mysql.com/worklog/task.php?id=4158|worklog di Aria 1.5]].

== Quali sono le differenze tra Aria 1.5 e MyISAM?

Aria 1.0 era fondamentalmente un rimpiazzo crash-safe non transazionale di MyISAM.
Aria 1.5 ha aggiunto una miglior concorrenza (inserimenti da utenti multipli) e alcune ottimizzazioni.

Aria supporta tutte le caratteristiche di MyISAM, eccetto quelle elencate sotto. Questo comprende il check, il repair e la compressione, sia interna sia esterna, delle righe, diversi formati, diversi formati di compressione degli indici, aria_chk,
etc. Dopo un arresto normale, è possibile copiare i file di Aria da un server a un altro.

== Vantaggi di Aria (rispetto a MyISAM)

* I dati e gli indici sono crash safe.
* In caso di crash, le modifiche vengono annullate allo stato dell&#39;avvio di una istruzione o dell&#39;ultimo comando LOCK TABLES
* Aria può ripetere quasi tutte le istruzioni dal log (anche creare, eliminare, rinominare e troncare le tabelle). Perciò, si può eseguire un backup di Aria semplicemente copiando il log. Ecco che cosa non può essere (ancora) ripetuto:
** Le batch di INSERT in una tabella vuota (questo comprende LOAD DATA INFILE, SELECT ...
   INSERT e le INSERT di molti record).
** ALTER TABLE. Si noti che le tabelle .frm NON vengono ricreate!
* LOAD INDEX può saltare i blocchi degli indici indesiderati
* Supporta tutti i formati dei record di MyISAM e il nuovo formato PAGE, dove i dati sono registrati in pagine (le dimensioni predefinite sono di 8K)
* Inserimenti concorrenti nella stessa tabella provenienti da diversi utenti
* Quando si usa il formato PAGE (predefinito) i dati delle righe vengono messi in una cache dalla cache delle pagine
* Aria ha dei test unitari in diverse parti di codice
* Supporta sia tabelle crash-safe (che presto saranno transazionali) sia tabelle non transazionali. (Le tabelle non transazionali non vengono loggate e le righe richiedono meno spazio): CREATE TABLE foo (...) TRANSACTIONAL=0|1
  ENGINE=Aria.
* PAGE è l&#39;unico formato di record crash-safe/transazionale
* Il formato PAGE dovrebbe fornire notevoli miglioramenti prestazionali sui sistemi che non hanno un buon caching dei dati (come ad esempio Windows)

== Differenze tra Aria e MyISAM

* Aria usa GRANDI file di log (1G per default)
* Aria ha un file di controllo (aria_log_control) e alcuni file di log (aria_log.???????). I file di log possono essere svuotati automaticamente quando non sono più necessari, oppure su richiesta (magari dopo un backup)
* Aria usa pagine di 8K per default (quelle di MyISAM sono di 1K). Questo rende Aria un po&#39; più veloce quando si usano indici di dimensioni fisse, ma più lento quando si usano chiari compresse di dimensioni variabili (questo fino a quando non aggiungeremo una directory delle pagine degli indici)

== Svantaggi di Aria (rispetto a MyISAM) che verranno eliminati presto

* Aria non supporta INSERT DELAYED
* Aria non supporta cache degli indici multiple

== Svantaggi di Aria (rispetto a MyISAM) che verranno eliminati in una versione successiva

* La scrittura di righe molto piccole (&lt; 25 byte) non è efficiente con il formato PAGE
* Le tabelle MERGE non supportano Aria (dovrebbe essere facile aggiungere questo supporto in futuro)

== Differenze che probabilmente non verranno eliminate

* Le pagine dei dati di Aria nel formato a blocchi hanno un sovraccarico di 10 byte per pagina e 5 byte per riga. Il supporto alle transazioni e alle insert concorrenti multiutente utilizza un sovraccarico ulteriore di 7 byte per le nuove righe, 14 byte per le righe eliminate e 0 byte per le vecchie righe compresse.
* Nessun lock esterno (MyISAM ha i lock esterni, ma tale caratteristica è usata di rado)
* Le dimensioni delle pagine di Aria sono le stesse per i dati e per gli indici (definite quando Aria viene usato per la prima volta). MyISAM supporta dimensioni differenti per i dati e per gli indici
* Un piccolo sovraccatico (15 byte) per ogni pagine degli indici
* Aria non supporta il RAID interno di MySQL (è stato disabilitato anche in MyISAM: è una funzionalità deprecata)
* Le dimensioni minime per il file dei dati, con il formato PAGE, sono di 16K (con pagine di 8K)

== Quali sono le differenze tra MariaDB 5.1 e il normale MySQL-5.1?

Si veda:

* [[aria-storage-engine|Storage Engine Aria]]
* [[mariadb-contro-mysql|MariaDB contro MySQL]]

== Perché utilizzare la parola chiave TRANSACTIONAL se Aria non è ancora transazionale?

Nell&#39;attuale fase di sviluppo, le tabelle Aria create con TRANSACTIONAL=1 sono
crash safe e atomiche ma non transazionali, perché le modifiche non possono essere annullate con il comando ROLLBACK. Poiché Aria sarà pienamente transazionale, relativamente fra breve tempo, crediamo sia meglio utilizzare fin d&#39;ora la parola chiave TRANSACTIONAL, in modo che le applicazioni non debbano essere modificate in un secondo momento.

Le tabelle create con TRANSACTIONAL=1 guadagneranno ulteriori funzionalità transazionali ad ogni nuova versione di Aria. Ci aspettiamo che queste tabelle saranno pienamente transazionali (nel senso tradizionale del termine) con Aria 2.0.

== Quali sono i problemi conosciuti delle versioni MySQL-5.1-Maria?

* Si veda KNOWN_BUGS.txt per conoscere i bug aperti e i bug di progettazione
* Si veda http://bugs.launchpad.net/maria o http://bugs.mysql.com/ per conoscere i bug riportati di recente. Si prega di riportare qui i problemi che si riscontrano!
* Se vi è un bug nel codice di recupero di Aria o nel codice che genera i log, o se i log sono corrotti, allora mysqld non dovrebbe essere in grado di avviarsi, perché Aria non dovrebbe essere in grado di eseguire i log all&#39;avvio.

Se Aria non si avvia o se non si riesce a recuperare una tabella (cosa che non dovrebbe accadere):
* Si eliminino i file aria_log.???????? dalla directory dei dati
* Si riavvii mysqld e si esegua CHECK TABLE / REPAIR TABLE o mysqlcheck sulle tabelle Aria

oppure

* Si rimuovano i log e si esegua aria_chk sui file *.MAI

== Cosa cambierà nelle prossime versioni di Aria?

LOCK TABLES non inizierà un segmento crash-safe. Si dovrebbe usare BEGIN/COMMIT
invece. Per rendere il tutto compatibile in avanti, si potrebbe fare così:

&lt;&lt;code&gt;&gt;
BEGIN;
LOCK TABLES ....
UNLOCK TABLES;
COMMIT;
&lt;&lt;/code&gt;&gt;

E successivamente limitarsi a rimuovere la parte LOCK/UNLOCK.

== Come posso creare una tabella Aria in stile MyISAM (non transazionale)?

Esempio:

&lt;&lt;sql&gt;&gt;
CREATE TABLE t1 (a int) ROW_FORMAT=FIXED TRANSACTIONAL=0 PAGE_CHECKSUM=0;
CREATE TABLE t2 (a int) ROW_FORMAT=DYNAMIC TRANSACTIONAL=0 PAGE_CHECKSUM=0;
SHOW CREATE TABLE t1;
SHOW CREATE TABLE t2;
&lt;&lt;/sql&gt;&gt;

Si noti che i record non vengono copiati nella cache delle pagine se si usano i formati FIXED e DYNAMIC. Se si desidera avere una cache dei dati (non supportata da MyISAM) si può usare &lt;&lt;code&gt;&gt;ROW_FORMAT=PAGE&lt;&lt;/code&gt;&gt;:

&lt;&lt;code lang=mysql inline=false&gt;&gt;
CREATE TABLE t3 (a int) ROW_FORMAT=PAGE TRANSACTIONAL=0 PAGE_CHECKSUM=0;
SHOW CREATE TABLE t3;
&lt;&lt;/code&gt;&gt;

E&#39; possibile utilizzare PAGE_CHECKSUM=1 anche per le tabelle non transazionali; questo fa sì che venga mantenuto un checksum in tutte le pagine degli indici. Questo checksum sarà presente anche se si usa ROW_FORMAT=PAGE.

Si potrebbero notare delle differenze nella velocità (che possono essere leggermente positive o negative) tra MyISAM e Aria per via delle differenti dimensioni delle pagine. E&#39; possibile modificare le dimensioni in MariaDB con --aria-block-size=#, dove # è uno dei seguenti valori; 1024, 2048, 4096, 8192, 16384 o 32768.\\
Si noti che se si modificano le dimensioni delle pagine occorre eseguire un dump di tutte le tabelle in un file di testo (con [[mysqldump]]) e rimuovere i vecchi file di log di Aria:
&lt;&lt;code&gt;&gt;
rm datadir/aria_log*
&lt;&lt;/code&gt;&gt;

== Quali sono i vantaggi e gli svantaggi del nuovo formato PAGE, rispetto ai vecchi formati di MyISAM (DYNAMIC e FIXED)? ==

I formati DYNAMIC e FIXED di MyISAM sono estremamente semplici e richiedono uno spazio aggiuntivo molto piccolo, perciò è difficile batterli quando si tratta di effettuare semplici scansioni di dati non modificati. Il formato DYNAMIC però si comporta molto peggio con il tempo, se si effettuano sui record molte modifiche che ne incrementano le dimensioni.

I vantaggi del formato PAGE (rispetto a DYNAMIC e FIXED) per le tabelle non transazionali sono i seguenti:

* I dati sono copiati nella cache delle pagine, e questo migliora le performance (perché utilizza meno chiamate di sistema)
* Non si frammenta così facilmente come il formato DYNAMIC durante le istruzioni UPDATE; il numero massimo di frammenti è molto basso
* Il codice può facilmente essere esteso per leggere esclusivamente le colonne interessate (ad esempio, evitando di leggere i blob)
* Modifiche più veloci (rispetto a DYNAMIC).

Gli svantaggi sono:
* E&#39; richiesto un po&#39; di spazio aggiuntivo (la differenza dovrebbe essere sensibile per righe di dimensioni molto ridotte)
* La scansione completa delle tabelle è più lenta
* Quando si usa row_format=PAGE (predefinito), Aria prima scrive le righe, poi le chiavi e a quel punto controlla se ci sono dei duplicati. Questo rallenta il formato PAGE rispetto a DYNAMIC (o a MyISAM) se vi sono molti valori duplicati, per via del ritardo dato dalla scrittura e dalla successiva rimozione dei record. Se questo risulta essere un problema, è meglio usare row_format=DYNAMIC per ottenere un comportamento identico a quello di MyISAM.

== Qual è il modo corretto per copiare una tabella Aria da un posto a un altro?

Una tabella Aria consiste in tre file:

&lt;&lt;code lang=sh inline=false&gt;&gt;
XXX.frm: La definizione della tabella, usato da MySQL.
XXX.MYI: Informazioni interne sulla struttura dei dati, la struttura degli indici e i dati degli indici.
XXX.MAD: I dati.
&lt;&lt;/code&gt;&gt;

E&#39; possibile copiare in modo sicuro i file di Aria in un&#39;altra directory o istanza di MySQL, se una delle seguenti condizioni è vera:

* Se si arresta correttamente mysqld con &#39;mysqladmin shutdown&#39;, in modo che non ci siano dati da recuperare al riavvio di Aria

oppure

* Se si esegue &#39;&lt;&lt;code lang=&#39;sql&#39; inline=&#39;true&#39;&gt;&gt;flush tables&lt;&lt;/code&gt;&gt;&#39; e non si accede alle tabelle con SQL finché le tabelle non siano state copiate.

Inoltre, per le tabelle transazionali, occorre rispettare la regola seguente:

Non è possibile copiare la tabella in un percorso che appartiene allo stesso server MySQL, se la nuova tabella esisteva già e la nuova tabella è ancora attiva nel log del recupero di Aria (cioè se Aria potrebbe aver bisogno di accedere ai vecchi dati durante il recupero). Se non si è sicuri del fatto che il vecchio nome esistesse o meno, si esegua &#39;aria_chk --zerofill&#39; sulla tabella prima di utilizzarla.

Prima di copiare una tabella transazionale e prima di utilizzarla, si raccomanda di eseguire il seguente comando:

&lt;&lt;code lang=&#39;sh&#39; inline=&#39;false&#39;&gt;&gt;aria_chk --zerofill nome_tabella&lt;&lt;/code&gt;&gt;

Questo sovrascrive con 0 tutti i riferimenti ai log (LSN), tutti i riferimenti transazionali (TRN) e tutto lo spazio inutilizzato. Inoltre marca la tabella come &#39;spostabile&#39;.

Un altro vantaggio dello zerofill è che permette ai file di Aria una migliore compressione. Nessun dato reale viene eliminato dallo zerofill.

Aria rileva automaticamente se una tabella è stata copiata da un altro sistema; in tal caso, al primo accesso esegue uno zerofill a meno che la tabella non sia stata segnata come &#39;spostabile&#39;. Un motivo per usare &lt;&lt;code&gt;&gt;aria_chk --zerofill&lt;&lt;code&gt;&gt; è che si evita un ritardo al primo accesso alla tabella.

Si noti che questo rilevamento automatico non funziona se si copiano tabelle da un altro server MariaDB!

== Quando è sicuro rimuovere i vecchi file di log?

Se si desidera rimuovere i vecchi file di log di Aria (&lt;&lt;code&gt;&gt;aria_log.*&lt;&lt;/code&gt;&gt;) con i comandi &#39;rm&#39; o &#39;delete&#39;, prima di farlo occorre arrestare MariaDB in modo pulito (ad esempio con &#39;&lt;&lt;fixed&gt;&gt;mysqladmin shutdown&lt;&lt;/fixed&gt;&gt;&#39;).

Le stesse regole vanno seguite quando si aggiorna MySQL; prima si arresta MySQL in modo pulito e solo dopo si esegue l&#39;upgrade. Questo permette di rimuovere i vecchi file di log se vi sono problemi di incompatibilità tra le varie versioni.

Non bisogna rimuovere il file &lt;&lt;code&gt;&gt;aria_log_control&lt;&lt;/code&gt;&gt;! Non si tratta di un file di log, ma contiene informazioni sulla configurazione di Aria (id della transazione corrente, id unico, numero del prossimo file di log, etc).

Se lo si elimina, Aria genera un nuovo file &lt;&lt;code&gt;&gt;aria_log_control&lt;&lt;/code&gt;&gt; all&#39;avvio e tratta i vecchi file di Aria come se fossero stati copiati da un altro sistema. In pratica, deve eseguire su di essi un &lt;&lt;code&gt;&gt;zerofill&lt;&lt;/code&gt;&gt; prima di potervi accedere.

Se questo avviene, nel file mysqld.err si vedrà qualcosa di questo genere:

&lt;&lt;code&gt;&gt;
Note] Zerofilling moved table: &#39;.\database\xxxx&#39;
&lt;&lt;/code&gt;&gt;

Lo zerofill non rimuove dati importanti.</textarea>
    


                    <div id="content_disclaimer" class="graybox">
                        Content reproduced on this site is the property of its respective owners,
                        and this content is not reviewed in advance by MariaDB. The views, information and opinions
                        expressed by this content do not necessarily represent those of MariaDB or any other party.
                    </div>
                </div>
            </section>

            
        </div>
    </div>
</div>

<!-- Footer -->
<footer id="footer">
    <div class="footer">
        <div class="container">
            <div class="row">
                <div class="col-xs-12">
                    <ul class="list-inline text-center footer-nav">
                        <li>
                            <h5>
                                <a href="https://mariadb.com/products" title="Products">Products</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/services" title="Services">Services</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/pricing" title="Pricing">Pricing</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/resources" title="Resources">Resources</a>
                            </h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/about-us" title="About MariaDB">About Us</a></h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/download" title="Download">Download MariaDB</a></h5>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="row row-10">
                
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div id="block-footerformcontact" class="block block-block-content block-block-contentd754ee1b-3cc9-40e7-9ef4-f504f1197fb1">
                        
                            <h5 style="font-weight: 400;">Subscribe to our newsletter!</h5>
                            <script src="//app-sj15.marketo.com/js/forms2/js/forms2.min.js"></script><form id="mktoForm_1498"></form>
                            <script>
                                <!--//--><![CDATA[// ><!--
                                MktoForms2.loadForm("//app-sj15.marketo.com", "573-PXI-984", 1498);
                                //--><!]]]]><![CDATA[>
                                //--><!]]>
                            </script>
                        
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div class="footer-copyright">
                        <div class="text-center">
                            <ul class="list-inline no-margin">
                                <li>
                                    <a href="/legal" title="Legal">Legal</a>
                                </li>
                                <li>
                                    <a href="/privacy-policy" title="Privacy Policy">Privacy Policy</a>
                                </li>
                                <li>
                                    <a href="/cookie-policy/" title="Cookies">Cookie Policy</a>
                                </li>
                            </ul>
                            <p>Copyright &copy; 2024 MariaDB. All rights reserved.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
</footer>
</div>

<div id="ajax_loading">
    <img src="/kb/static/images/ajax-loader.a51c5608d01a.gif" />
</div>

    <!-- Google Tag Manager -->
    <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-MK2847"
                      height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
            '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MK2847');</script>
    <!-- End Google Tag Manager -->

</body>

<script type="text/javascript" src="/kb/static/js/main.fed4ec768178.js" charset="utf-8"></script>

</html>