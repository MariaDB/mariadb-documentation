<!DOCTYPE html>
<html>
<head data-cookie-domain=""
      data-cookie-path="/">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="apple-touch-icon" sizes="180x180" href="/kb/static/images/favicons/apple-touch-icon.159e713979be.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/kb/static/images/favicons/favicon-32x32.bc0ac1d5d11e.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/kb/static/images/favicons/favicon-16x16.5801f8f0f34e.png">
    <link rel="shortcut icon" href="/kb/static/images/favicons/favicon.d122d305dee4.ico" type="image/x-icon" />

    <title>La replica multi-source - MariaDB Knowledge Base</title>

    <link href="/kb/static/css/main.f7633538c846.css" rel="stylesheet" type="text/css" />

    

    

    <!-- FB Open Graph tags -->
    <meta property="og:title" content="La replica multi-source" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://mariadb.com/kb/it/multi-source-replication/" />
    <meta property="og:image" content="http://mariadb.comaskmonty-logo.png" />
    <meta property="og:site_name" content="MariaDB KnowledgeBase" />
    <meta property="fb:admins" content="514852603" />
    <meta property="og:description" content="Usare la replica con molti master" />

    <meta name="description" content="Usare la replica con molti master" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="//fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet"/>
    
</head>
<body class="mpkb nodes products nodes_view jqui" id="nodes_view">





<div id="menu-mobile" class="visible-sm visible-xs">

    <div>
        <div id="mobile-close-menu" class="text-right">
            <a href="javascript:void(0)" title="Close Menu" id="back-main" class="toggle-menu">X<span></span></a>
        </div>
    </div>
    <div class="mainmenu-mobile">
        <ul class="ls-none ul-menu">
            <li data-sub="submenu5"><a class="open-form-search" href="/kb/search/" title="Search">Search </a></li>
            <li data-sub="submenu0"><a href="/products" title="Products">Products</a><span class="arrow-main"></span></li>
            <li data-sub="submenu1"><a href="/services" title="Services">Services</a><span class="arrow-main"></span></li>
            <li data-sub="submenu2"><a href="/resources" title="Resources">Resources</a><span class="arrow-main"></span></li>
            <li data-sub="submenu3"><a href="/about-us" title="About">About</a><span class="arrow-main"></span></li>
            <li data-sub="submenu4"><a href="/contact" title="Contact">Contact</a></li>
        </ul>
    </div>

    <div class="nav-top-mobile">
        <div class="select-box form">

            <ul class="inline-block-md mb-none top-nav">
                <li>

                </li>
                
                    <li>
                        <a href="/kb/user/login?next=/kb/it/multi-source-replication/"> Login</a>
                    </li>
                
            </ul>



        </div>
        <p class="text-center copyright">Copyright &copy; 2024 MariaDB. All rights reserved.</p>
    </div>
</div>
<div class="violator-wrap d-none" id="top_violator">
    <div class="container">
        <div class="row">
            <div class="col-xs-12 col-sm-12">
                <div class="violator-outer">
                    <div class="violator-inner">
                        <div class="row">
                            <div class="col-xs-12 col-sm-9 col-lg-7 col-lg-offset-2" id="top_violator_content">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="content-link" target="_blank" rel="nofollow noreferrer">
                                    <span>The Ultimate Guide to High Availability with MariaDB</span>
                                </a>
                            </div>
                            <div class="col-xs-12 col-sm-3" id="top_violator_cta">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="btn btn-mariadb" target="_blank" rel="nofollow noreferrer">Download Now</a>
                            </div>
                        </div>
                    </div>
                    <button type="button" class="btn btn-link close-btn">
                        <svg xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 24 24" width="15px" height="15px"><path d="M 4.9902344 3.9902344 A 1.0001 1.0001 0 0 0 4.2929688 5.7070312 L 10.585938 12 L 4.2929688 18.292969 A 1.0001 1.0001 0 1 0 5.7070312 19.707031 L 12 13.414062 L 18.292969 19.707031 A 1.0001 1.0001 0 1 0 19.707031 18.292969 L 13.414062 12 L 19.707031 5.7070312 A 1.0001 1.0001 0 0 0 18.980469 3.9902344 A 1.0001 1.0001 0 0 0 18.292969 4.2929688 L 12 10.585938 L 5.7070312 4.2929688 A 1.0001 1.0001 0 0 0 4.9902344 3.9902344 z"/></svg>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="wrapper">
<div id="top-nav">
    <div class="container">
        <ul class="hidden-sm hidden-xs" >
            <li><a href="https://mariadb.com/kb/">Knowledge Base</a></li>
            <li><a href="https://mariadb.com/contact/">Contact</a></li>
            
                
                    <li>
                        <a href="/kb/user/login?next=/kb/it/multi-source-replication/" rel="nofollow">Accesso</a>
                    </li>
                
            
            
            <li id="search-form">
                <form action="/kb/it/+search/" method="get" id="search-block-form" accept-charset="UTF-8">
                    <input id="search" title="Enter the terms you wish to search for."
                           placeholder="Search . . ." type="text"
                           name="q" value="" size="15" maxlength="128" class="form-text"
                           data-autocomplete-url="/kb/it/+search/autocomplete/">
                    <input type="hidden" name="quick" value="1" />
                    <input type="hidden" name="source" value="kb" />
                </form>
            </li>
            <li><a id="search-toggler" href="/kb/search/">Search</a></li>
            
        </ul>
    </div>
</div>
<div id="navbar-bottom" class="navbar">
    <div class="container">
        
        
        
        
        <div class="row">
            <div class="col-md-3 col-sm-9 col-xs-9">
                <a class="brand" href="/" title="MariaDB">
                    <img src="/kb/static/images/logo-2018-black.95f5978ae14d.png">
                </a>
            </div>
            <div class="col-md-9 hidden-sm hidden-xs">
                <div class="main-menu">
                    <ul id="main-menu" class="nav navbar-nav inline-block-sm">
    <li class="has-sub full-menu">
        <a href="/products" title="Products">Products</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/services" title="Services">Services</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/pricing" title="Pricing">Pricing</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/resources" title="Resources">Resources</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/about-us" title="About Us">About Us</a>
    </li>
    <li class="">
        <a class="button electric-eel small top-bar-right-download" href="/downloads/">Download</a>
    </li>
</ul>
                </div>
            </div>
            <div class="col-md-3 visible-sm visible-xs col-sm-3 col-xs-3 ps-rv">
                <div class="navbar-header text-right pull-right">
                    <button type="button" class="menu-control toggle-menu" id="open-menu">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="main">
    <div class="container">
        

        <div id="subheader1" class="clearfix">
            <div class="pull-left">
                
                <div id="breadcrumbs" class="breadcrumb">
                    <a href="/kb/it/">Knowledge Base</a>
                    


    
    » <a class="crumb" href="/kb/it/mariadb-italiano/">MariaDB - Italiano</a>
    

    
    » <a class="crumb" href="/kb/it/replica/">Replica</a>
    


    » <a class="node_link crumb" href="/kb/it/multi-source-replication/">La replica multi-source</a>


                </div>
                
            </div>
        </div>
    </div>
    <div class="container" id="container-main">
        <div class="row">
            
            
                
                <aside id="sidebar-first" class="sidebar col-md-2 hidden-xs hidden-sm hidden-print">
                    
                        
                        <ul id="category_menu" class="nav nav-pills nav-stacked">
                            <li><a href="/kb/it/">Pagina iniziale</a></li>
                            
                                
                                    <li><a href="/kb/it/+questions/">Domande Aperte</a></li>
                                
                                <li><a href="/kb/it/documentation/">MariaDB Server</a></li>
                                <li><a href="/kb/it/maxscale/">MariaDB MaxScale</a></li>
                                <li><a href="/kb/it/mariadb-columnstore/">MariaDB ColumnStore</a></li>
                                <li><a href="/kb/it/connectors/">Connectors</a></li>
                            

                        </ul>
                    

                    
<div>



<div class="well well-small box actions"><div>

        <a class="btn btn-block btn-blue btn-sm" href="/kb/it/multi-source-replication/+history" rel="nofollow">Cronologia</a>
        
        
        
        <a class="btn btn-block btn-blue btn-sm" href="/kb/it/multi-source-replication/+source/">Source</a>
        
        <a class="btn btn-block btn-blue btn-sm flag" href="/kb/it/multi-source-replication/+flag"
                data-flag-url="/kb/it/multi-source-replication/+flag" rel="nofollow">
                Flag as Spam / Inappropriate</a>
        
        <a class="btn btn-block btn-blue btn-sm" href="/kb/it/multi-source-replication/+translate/">
                Traduci</a>
        

</div>
</div>





<div class="well well-small box node_info"><div>

    <dl>
        <dt>Creato</dt>
        <dd>

<span class="datetime" title="2012-09-28 09:06">12 anni, 2 mesi ago</span></dd>

        <dt>Modificato</dt>
        <dd>

<span class="datetime" title="2016-06-16 15:53">8 anni, 6 mesi ago</span></dd>

        <dt>Tipo</dt>
        <dd>article</dd>

        <dt>Stato</dt>
        <dd>active</dd>

        <dt>Licenza</dt>
        <dd>
            
                <a href="/kb/it/multi-source-replication/+license/">CC BY-SA / Gnu FDL</a>
            
        </dd>

        
    </dl>

    
    <ul class="rss_feeds">
        <li><a href="/kb/it/multi-source-replication/+history/feed/">
            Cronologia</a>
        </li>
        <li><a href="/kb/it/multi-source-replication/+comments/feed/">
            Commenti</a>
        </li>
    </ul>
    

</div>
</div>





    
    
    

<div class="well well-small box attachments"><div><div class="edit_link pull-right"><a href="/kb/it/multi-source-replication/+edit/attachments/">Edit</a></div><h5>Attachments</h5></div><div>

        
            <div class="no_data">No attachments exist</div>
        
    
</div>
</div>

    



    
    
        

<div class="well well-small box"><div><h5>Versioni Localizzate</h5></div><div>

        <ul>
            
            <li><a href="/kb/en/multi-source-replication/">Multi-Source Replication</a> [en]</li>
            
            <li><a href="/kb/zh-cn/multi-source-replication/">多源(主)复制</a> [zh-cn]</li>
            
        </ul>
        
</div>
</div>

    






</div>


                    

































                </aside>
            
            
            
                
            
            
                
            
            <section id="content" class="limited_width col-md-8 clearfix">
                
                    <h1>La replica multi-source</h1>
                

                



                <div>
                    
    

    
    
    

    <div class="node creole">
        
        
        


    
    <div class="answer formatted">
        <div class="table_of_contents well well-small">
<h3>Contents</h3>
 <ol class="toc">

    <li class=""><a href="#nuova-sintassi" title="Nuova sintassi">Nuova sintassi</a></li>

    <li class=""><a href="#variabili-per-la-replica-multi-source" title="Variabili per la replica multi-source">Variabili per la replica multi-source</a></li>

    <li class=""><a href="#nuovi-file" title="Nuovi file">Nuovi file</a></li>

    <li class=""><a href="#altre-cose" title="Altre cose">Altre cose</a></li>

    <li class=""><a href="#casi-duso-comuni" title="Casi d&#39;uso comuni">Casi d&#39;uso comuni</a></li>

    <li class=""><a href="#limitazioni" title="Limitazioni">Limitazioni</a></li>

    <li class=""><a href="#todo" title="TODO">TODO</a></li>

    <li class=""><a href="#incompatibilità-con-mariadbmysql-55" title="Incompatibilità con MariaDB/MySQL 5.5">Incompatibilità con MariaDB/MySQL 5.5</a></li>

    <li class=""><a href="#vedi-anche" title="Vedi anche">Vedi anche</a> </ol>
</li>
</div><p>
Replica multi-source significa che un server esegue la replica da molti master. Questa funzionalità è stata introdotta in <a href="/kb/en/what-is-mariadb-100/">MariaDB 10.0</a>.</p>
<h2 class="anchored_heading" id="nuova-sintassi">Nuova sintassi</h2>
<p>E' possibile specificare con quale connessione master si lavora sia passando il nome della connessione al comando, sia impostando <code class="highlight fixed" style="white-space:pre-wrap">@@default_master_connection</code> con il nome della connessione su cui si desidera lavorare.</p>
<p>Il nome della connessione può contenere qualsiasi carattere e deve avere una lunghezza inferiore a 64. I nomi delle connessioni sono case insensitive, cioé le lettere minuscole sono considerate uguali alle maiuscole. E' preferibile usare nomi brevi, perché verranno usati come suffisso nei relay log e nell'indice di master info.</p>
<p>Ecco la nuova sintassi, introdotta per gestire connessioni multiple:</p>
<ul start="1"><li><code class="highlight fixed" style="white-space:pre-wrap"><a href="https://kb.askmonty.org/it/change-master-to/">CHANGE MASTER ["nome_connessione"] ...</a></code>
</li><li><code class="highlight fixed" style="white-space:pre-wrap">FLUSH RELAY LOGS ["nome_connessione"]</code>
</li><li><code class="highlight fixed" style="white-space:pre-wrap"><a href="https://kb.askmonty.org/it/master_pos_wait/">MASTER_POS_WAIT(....,["nome_connessione"])</a></code>
</li><li><code class="highlight fixed" style="white-space:pre-wrap"><a href="https://kb.askmonty.org/it/reset-slave/">RESET SLAVE ["nome_connessione"</a>]</code>
</li><li><code class="highlight fixed" style="white-space:pre-wrap"><a href="https://kb.askmonty.org/it/show-relaylog-events/">SHOW RELAYLOG ["nome_connessione"] EVENTS</a></code>
</li><li><code class="highlight fixed" style="white-space:pre-wrap"><a href="https://kb.askmonty.org/it/show-slave-status/">SHOW SLAVE ["nome_connessione"] STATUS</a></code>
</li><li><code class="highlight fixed" style="white-space:pre-wrap"><a href="https://kb.askmonty.org/it/show-slave-status/">SHOW ALL SLAVES STATUS</a></code>
</li><li><code class="highlight fixed" style="white-space:pre-wrap"><a href="https://kb.askmonty.org/it/start-slave/">START SLAVE ["nome_connessione"</a>...]]</code>
</li><li><code class="highlight fixed" style="white-space:pre-wrap"><a href="https://kb.askmonty.org/it/start-slave/">START ALL SLAVES ...</a></code>
</li><li><code class="highlight fixed" style="white-space:pre-wrap"><a href="https://kb.askmonty.org/it/stop-slave/">STOP SLAVE ["nome_connessione"] ...</a></code>
</li><li><code class="highlight fixed" style="white-space:pre-wrap"><a href="https://kb.askmonty.org/it/stop-slave/">STOP ALL SLAVES ...</a></code>
</li></ul>
<p>La connessione originale vecchio stile è una stringa vuota <code class="highlight fixed" style="white-space:pre-wrap">''</code>.
Non occorre usare questa connessione, se non si desidera farlo.</p>
<p>Per creare nuove connessioni master si usa <a href="https://kb.askmonty.org/it/change-master-to/">CHANGE MASTER</a>.<br>
E' possibile cancellare permanentemente una connessione con <a href="https://kb.askmonty.org/it/reset-slave/">RESET SLAVE "nome_connessione" ALL</a>.</p>
<h2 class="anchored_heading" id="variabili-per-la-replica-multi-source">Variabili per la replica multi-source</h2>
<p>La variabile <code class="highlight fixed" style="white-space:pre-wrap">@@default_master_connection</code> specifica quale connessione deve essere utilizzata per default per i comandi e le variabili. Quella predefinita è <code class="highlight fixed" style="white-space:pre-wrap">''</code> (il nome di default delle connessioni).</p>
<p>Le seguenti variabili sono locali all'interno della connessione. In altre parole, mostrano il valore della connessione <code class="highlight fixed" style="white-space:pre-wrap">@@default_master_connection</code>). Stiamo lavorando per rendere le variabili più importanti locali alla connessione.</p>
<div class="cstm-style darkheader-nospace-borders"><table><tr><th>Tipo</th><th>Nome</th><th>Spiegazione</th></tr>
<tr><td>Variable</td><td> <code>Max_relay_log_size</code></td><td>Dimensioni massime del relay log. Se è 0, all'avvio viene impostato a <code>max_binlog_size</code></td></tr>
<tr><td>Status</td><td><code>Slave_heartbeat_period</code></td><td>Quanto spesso deve essere richiesto al master un pacchetto heartbeat (in secondi).</td></tr>
<tr><td>Status</td><td><code>Slave_received_heartbeats</code></td><td>Quanti heartbeat sono stati ricevuti dal master.</td></tr>
<tr><td>Status</td><td><code>Slave_running</code></td><td>Mostra se lo slave è in funzione. YES significa che il thread sql e il thread IO sono attivi. No significa che uno dei due non è in esecuzione. "" significa che <code>@@default_master_connection</code> non esiste.</td></tr>
<tr><td>Variable</td><td> <code>Sql_slave_skip_counter</code></td><td>Quanti elementi del log della replica dovrebbero essere ignorati (si usa principalmente in caso di errori nel log).</td></tr>
</table>
</div><p>E' possibile accedere a tutte le variabili elencate sia con <code class="highlight fixed" style="white-space:pre-wrap">SESSION</code>, sia con <code class="highlight fixed" style="white-space:pre-wrap">GLOBAL</code>.</p>
<p>Si noti che, diversamente da quanto accade in MySQL, tutte le variabili mostrano sempre il valore corrente corretto!</p>
<p>Esempio:</p>
<pre class="fixed">set @@default_master_connection='';
show status like 'Slave_running';
set @@default_master_connection='altra_connessione';
show status like 'Slave_running';
</pre><p>Se <code class="highlight fixed" style="white-space:pre-wrap">@@default_master_connection</code> contiene un nome inesistente,
si ottiene un warning.</p>
<p>Tutte le altre variabili relative al master sono globali e hanno effetto o solo su "" o su tutte le connessioni. Per esempio, <code class="highlight fixed" style="white-space:pre-wrap">Slave_retried_transactions</code> ora mostra il numero totale delle transazioni che sono state ritentate su tutti gli slave</p>
<p>Nuove variabili di stato:</p>
<div class="cstm-style darkheader-nospace-borders"><table><tr><th>Nome</th><th>Spiegazione</th></tr>
<tr><td><code>Com_start_all_slaves</code></td><td>Numero di comandi <code>START ALL SLAVES</code> eseguiti.</td></tr>
<tr><td><code>Com_start_slave</code></td><td>Numero di comandi <code>START SLAVE</code> eseguiti. Sostituisce <code>Com_slave_start</code>.</td></tr>
<tr><td><code>Com_stop_slave</code></td><td>Numero di comandi <code>STOP SLAVE</code> eseguiti. Sostituisce <code>Com_slave_stop</code>.</td></tr>
<tr><td><code>Com_stop_all_slaves</code></td><td>Numero di comandi <code>STOP ALL SLAVES</code> eseguiti.</td></tr>
</table>
</div><p><code class="highlight fixed" style="white-space:pre-wrap"><a href="https://kb.askmonty.org/it/show-slave-status/">SHOW ALL SLAVES STATUS</a></code> ha le seguenti nuove colonne:</p>
<div class="cstm-style darkheader-nospace-borders"><table><tr><th>Nome</th><th>Spiegazione</th></tr>
<tr><td><code>Connection_name</code></td><td>Nome della connessione master. E' la prima variabile.</td></tr>
<tr><td><code>Slave_SQL_State</code></td><td>Stato del thread SQL.</td></tr>
<tr><td><code>Retried_transactions</code></td><td>Numero di connessioni ritentate in questa connessione.</td></tr>
<tr><td><code>Max_relay_log_size</code></td><td>Dimensioni massime del relay log size in questa connessione.</td></tr>
<tr><td><code>Executed_log_entries</code></td><td>Quanti elementi del log sono stati eseguiti dallo slave.</td></tr>
<tr><td><code>Slave_received_heartbeats</code></td><td>Quanti heartbeat sono stati ricevuti dal master.</td></tr>
<tr><td><code>Slave_heartbeat_period</code></td><td>Quando spesso deve richiedere un pacchetto heartbeat al master (in secondi).</td></tr>
</table>
</div><h2 class="anchored_heading" id="nuovi-file">Nuovi file</h2>
<p>Il principio di base dei nuovi file usati per la replica multi source è che hanno lo stesso nome dei file del relay log originale, con il suffisso <code class="highlight fixed" style="white-space:pre-wrap">connection_name</code> prima dell'estensione. L'eccezione più importante è il file contenente tutte le connessioni, che si chiama come il normale <code class="highlight fixed" style="white-space:pre-wrap">master-info-file</code> con un prefisso <code class="highlight fixed" style="white-space:pre-wrap">multi-</code>.</p>
<p>Se si usa la replica multi source, vengono creati i seguenti file:</p>
<div class="cstm-style darkheader-nospace-borders"><table><tr><th>Nome</th><th>Spiegazione</th></tr>
<tr><td>multi-<code>master-info-file</code></td><td>Il file <code>master-info-file</code> (normalmente <code>master.info</code>) con un prefisso <code>multi-</code>. Contiene tutte le connessioni ai master in uso.</td></tr>
<tr><td><code>master-info-file</code>-connection_name<code>.estensione</code></td><td>Contiene la posizione corrente del master applicata allo slave. Estensione di solito è <code>.info</code></td></tr>
<tr><td><code>relay-log</code>-nome_connessione<code>.xxxxx</code></td><td>Il nome del relay-log con un suffisso nome_connessione. xxxxx è il numero progressivo del relay log. Questo contiene i dati della replica letti dal master.</td></tr>
<tr><td><code>relay-log-index</code>-nome_connessione<code>.estensione</code> </td><td> Contiene il nome dei file <code>relay-log</code>-nome_connessione<code>.xxxxx</code> attivi. Estensione di solito è <code>.index</code></td></tr>
<tr><td><code>relay-log-info-file</code>-nome_connessione<code>.estensione</code></td><td>Contiene la posizione corrente del master nel relay log. Estensione di solito è <code>.info</code></td></tr>
</table>
</div><p>Quando si crea un file, il nome della connessione viene convertito in lettere minuscole e tutti i caratteri speciali vengono convertiti, nello stesso modo in cui vengono convertiti i nomi delle tabelle di MySQL. Questo serve a rendere il nome del file portabile su diversi sistemi operativi.</p>
<p>Suggerimento:</p>
<p>Invece di specificare i nomi per <code class="highlight fixed" style="white-space:pre-wrap">mysqld</code> con <code class="highlight fixed" style="white-space:pre-wrap">--relay-log</code>, <code class="highlight fixed" style="white-space:pre-wrap">--relay-log-index</code>, <code class="highlight fixed" style="white-space:pre-wrap">--relay-log-index</code>, <code class="highlight fixed" style="white-space:pre-wrap">--general-log</code>, <code class="highlight fixed" style="white-space:pre-wrap">--slow-log</code>,
<code class="highlight fixed" style="white-space:pre-wrap">--log-bin</code>, <code class="highlight fixed" style="white-space:pre-wrap">--log-bin-index</code> si può specificare soltanto <code class="highlight fixed" style="white-space:pre-wrap">--log-base-name</code>, così tutte le altre variabili verranno impostate con questo prefisso.</p>
<h2 class="anchored_heading" id="altre-cose">Altre cose</h2>
<ul start="1"><li>Tutti i messaggi di errori provenienti da uno slave con un certo nome connessione, che sono scritti nel log degli errori, hanno ilprefisso <code class="highlight fixed" style="white-space:pre-wrap">Master 'connection_name':</code>. In questo modo è più facile capire da dove proviene un errore.
</li><li>Gli errori <code class="highlight fixed" style="white-space:pre-wrap">ER_MASTER_INFO</code> e <code class="highlight fixed" style="white-space:pre-wrap">WARN_NO_MASTER_INFO</code> ora includono nome_connessione.
</li><li>Non esiste una risoluzione dei conflitti. Il presupposto è che non ci siano conflitti tra i dati fra differenti master.
</li><li>Tutti i comandi eseguiti sono scritti nel log binario normale (niente di nuovo qui).
</li><li>Se la variabile server <code class="highlight fixed" style="white-space:pre-wrap">log_warnings</code> &gt; vale 1 si ottengono nel log alcune informazioni su quando il file multi-master-info è aggiornato (principalmente per il debug).
</li><li><a href="https://kb.askmonty.org/it/show-slave-status/">SHOW [FULL] SLAVE STATUS</a> restituisce una riga per connessione e alcune colonne aggiuntive rispetto a prima. <strong>Si noti che la prima colonna è <code class="highlight fixed" style="white-space:pre-wrap">connection_name</code>!</strong>
</li><li><code class="highlight fixed" style="white-space:pre-wrap"><a href="https://kb.askmonty.org/it/reset-slave/">RESET SLAVE</a></code> ora elimina tutti i file del relay-log.
</li></ul>
<h2 class="anchored_heading" id="casi-duso-comuni">Casi d'uso comuni</h2>
<ul start="1"><li>Si stanno partizionando i dati su diversi master e si desidera riunirli tutti in una sola macchina per poter eseguire query analitiche.
</li><li>Si hanno diversi database sparsi su diversi server MariaDB/MySQL e si desidera riunirli tutti in un'unica macchina come backup aggiuntivo.
</li></ul>
<h2 class="anchored_heading" id="limitazioni">Limitazioni</h2>
<ul start="1"><li>Per ora è possibile avere solo 64 master (se necessario, incrementare questo numero è triviale).
</li><li>Ogni connessione attiva crea 2 thread (come avviene normalmente nella replica di MariaDB).
</li><li>Occorre assicurarsi che tutti i master abbiano un valore differente per <code class="highlight fixed" style="white-space:pre-wrap">server-id</code>. In caso contrario, si avranno problemi se si tenta di replicare da uno slave multi-source ai master.
</li><li>E' possibile modificare <code class="highlight fixed" style="white-space:pre-wrap">max_relay_log_size</code> per la connessione attiva, ma le nuove connessioni continueranno a usare il valore impostato all'avvio del server, che non può essere modificato a runtime.
</li><li>L'opzione <code class="highlight fixed" style="white-space:pre-wrap">innodb-recovery-update-relay-log</code> (funzionalità di xtradb per registrare e recuperare la posizione degli slave nel relay log) funziona solo sulla connessione predefinita ''. Poiché questa opzione non è realmente sicura e potrebbe facilmente causare una perdita di dati se si utilizzano Storage Engine diversi da InnoDB, si raccomanda di non usarla.
</li><li><code class="highlight fixed" style="white-space:pre-wrap">Slave_net_timeout</code> ha effetto su tutte le connessioni. E' stato eliminato il controllo che verificava se è minore di <code>Slave_heartbeat_period</code>, perché in una configurazione multi-source non ha senso.
</li></ul>
<h2 class="anchored_heading" id="todo">TODO</h2>
<ul start="1"><li>La replica semisincrona ('semisync_slave.so') non funziona con la multi-source. Verrà corretto per la prossima release.
</li><li>Tutti i task aperti e i bug conosciuti della replica multi-source si trovano <a href="https://jira.mariadb.org/issues/?filter=11400">qui</a>.
</li><li>Possibilità di replicare da un master a uno slave con diversi thread.
</li></ul>
<h2 class="anchored_heading" id="incompatibilità-con-mariadbmysql-55">Incompatibilità con MariaDB/MySQL 5.5</h2>
<ul start="1"><li><code class="highlight fixed" style="white-space:pre-wrap">max_relay_log_size</code> ora è (quasi) quasi una variabile normale e non viene modificata quando cambia il valore di <code class="highlight fixed" style="white-space:pre-wrap">max_binlog_size</code>. Perché tutto sia compatibile con i vecchi file di configurazione, viene impostata a <code class="highlight fixed" style="white-space:pre-wrap">max_binlog_size</code> all'avvio, se il suo valore è 0.
</li><li>E' possibile accedere alle variabili della replica che dipendono dalla connessione attiva sia con <code class="highlight fixed" style="white-space:pre-wrap">GLOBAL</code>, sia con <code class="highlight fixed" style="white-space:pre-wrap">SESSION</code>.
</li><li>Le informazioni per il recupero delle posizioni nel relay log, vengono registrate solo se <code class="highlight fixed" style="white-space:pre-wrap">innodb-recovery-update-relay-log</code> è impostata.
</li><li><code class="highlight fixed" style="white-space:pre-wrap">Slave_retried_transaction</code> ora mostra il numero totale delle transazioni che sono state ritentate, fra tutti gli slave.
</li><li>La variabile di stato <code class="highlight fixed" style="white-space:pre-wrap">Com_slave_start</code> è stata sostituita con <code class="highlight fixed" style="white-space:pre-wrap">Com_start_slave</code>.
</li><li>La variabile di stato <code class="highlight fixed" style="white-space:pre-wrap">Com_slave_stop</code> è stata sostituita con <code class="highlight fixed" style="white-space:pre-wrap">Com_stop_slave</code>.
</li><li>Il comando <code class="highlight fixed" style="white-space:pre-wrap">FLUSH RELAY LOGS</code> non è più replicato. Non sarebbe sicuro, perché i nomi delle connessioni potrebbero essere differenti sugli slave.
</li></ul>
<p>&lt;&lt;/product&gt;&gt;</p>
<h2 class="anchored_heading" id="vedi-anche">Vedi anche</h2>
<ul start="1"><li>Il lavoro su MariaDB si basa sulla descrizione del progetto di <a href="https://jira.mariadb.org/browse/MDEV-253">MDEV-253</a>.
</li><li>La base di codice originale viene da <a href="http://mysql.taobao.org/index.php/Patch_source_code#Multi-master_replication">Taobao, developed by Peng Lixun</a>. Un grande ringraziamento a loro per questa importante funzionalità!</li></ul>

    </div>


        
            <div id="subscribe" class="well well-small hide hidden-print"
                 data-subscribe-url="/kb/it/multi-source-replication/+subscriptions/add"
                 data-unsubscribe-url="/kb/it/multi-source-replication/+subscriptions/remove">
            </div>
        

        
        
    
        <div class="simple_section_nav">
            <ul class="nav nav-pills">
                
                    <li><a href="/kb/it/row-based-replication-with-no-primary-key/">
                        ← La replica basata sulle righe senza chiave primaria
                    </a>
                    </li>
                
                
                    <li><a href="/kb/it/replica/">
                        ↑ Replica ↑
                    </a>
                    </li>
                
                
                    <li class="pull-right"><a href="/kb/it/binary-log/">
                        Log Binario →
                    </a>
                    </li>
                
            </ul>
        </div>
    

        

        
        <h2>Commenti</h2>
        
    
    <div id="comments" data-node-id="2964" data-comments-url="/kb/it/multi-source-replication/+comments"
         data-reply-url="/kb/it/multi-source-replication/comments/post/">
        Sto caricando i commenti......
    </div>

        

    </div>


                    <div id="content_disclaimer" class="graybox">
                        Content reproduced on this site is the property of its respective owners,
                        and this content is not reviewed in advance by MariaDB. The views, information and opinions
                        expressed by this content do not necessarily represent those of MariaDB or any other party.
                    </div>
                </div>
            </section>

            
                <div id="right_bar" class="col-md-2">
                    
    
        
        <ul class="section_navigation well well-small hidden-xs hidden-sm">
            
                <li class="parent"><a href="/kb/it/replica/">
                    ↑ Replica ↑
                </a>
                </li>
            
            
                
                    <li>
                        <a href="/kb/it/annotate_rows_log_event/">
                            <span class="pull-right not_primary"></span>
                            Annotate_rows_log_event
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/it/running-triggers-on-the-slave-for-row-based-events/">
                            
                            Eseguire i trigger nello slave per gli eventi Row-based
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/it/group-commit-for-the-binary-log/">
                            
                            Group commit per il log binario
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/it/binlog-event-checksums/">
                            
                            I checksum degli eventi del log binario
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/it/interoperabilita-dei-checksum-del-log-binario/">
                            
                            Interoperabilità dei checksum del log binario
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/it/xtradb-option-innodb-release-locks-early/">
                            
                            L&#39;opzione --innodb-release-locks-early di XtraDB
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/it/row-based-replication-with-no-primary-key/">
                            <span class="pull-right not_primary"></span>
                            La replica basata sulle righe senza chiave primaria
                        </a>
                    </li>
                
            
                
                    <li class="active">
                        <span>La replica multi-source</span>
                        
                    </li>
                
            
                
                    <li>
                        <a href="/kb/it/binary-log/">
                            <span class="pull-right not_primary"></span>
                            Log Binario
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/it/selectively-skipping-replication-of-binlog-events/">
                            
                            Saltare selettivamente la replica degli eventi del binlog
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="/kb/it/dynamic-replication-variables/">
                            
                            Variabili dinamiche per la replica
                        </a>
                    </li>
                
            
        </ul>
    
    

                </div>
            
        </div>
    </div>
</div>

<!-- Footer -->
<footer id="footer">
    <div class="footer">
        <div class="container">
            <div class="row">
                <div class="col-xs-12">
                    <ul class="list-inline text-center footer-nav">
                        <li>
                            <h5>
                                <a href="https://mariadb.com/products" title="Products">Products</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/services" title="Services">Services</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/pricing" title="Pricing">Pricing</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/resources" title="Resources">Resources</a>
                            </h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/about-us" title="About MariaDB">About Us</a></h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/download" title="Download">Download MariaDB</a></h5>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="row row-10">
                
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div id="block-footerformcontact" class="block block-block-content block-block-contentd754ee1b-3cc9-40e7-9ef4-f504f1197fb1">
                        
                            <h5 style="font-weight: 400;">Subscribe to our newsletter!</h5>
                            <script src="//app-sj15.marketo.com/js/forms2/js/forms2.min.js"></script><form id="mktoForm_1498"></form>
                            <script>
                                <!--//--><![CDATA[// ><!--
                                MktoForms2.loadForm("//app-sj15.marketo.com", "573-PXI-984", 1498);
                                //--><!]]]]><![CDATA[>
                                //--><!]]>
                            </script>
                        
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div class="footer-copyright">
                        <div class="text-center">
                            <ul class="list-inline no-margin">
                                <li>
                                    <a href="/legal" title="Legal">Legal</a>
                                </li>
                                <li>
                                    <a href="/privacy-policy" title="Privacy Policy">Privacy Policy</a>
                                </li>
                                <li>
                                    <a href="/cookie-policy/" title="Cookies">Cookie Policy</a>
                                </li>
                            </ul>
                            <p>Copyright &copy; 2024 MariaDB. All rights reserved.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
</footer>
</div>

<div id="ajax_loading">
    <img src="/kb/static/images/ajax-loader.a51c5608d01a.gif" />
</div>

    <!-- Google Tag Manager -->
    <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-MK2847"
                      height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
            '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MK2847');</script>
    <!-- End Google Tag Manager -->

</body>

<script type="text/javascript" src="/kb/static/js/main.1587e3a666fc.js" charset="utf-8"></script>

</html>