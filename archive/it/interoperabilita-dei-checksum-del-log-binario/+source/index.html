<!DOCTYPE html>
<html>
<head data-cookie-domain=""
      data-cookie-path="/">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="apple-touch-icon" sizes="180x180" href="/kb/static/images/favicons/apple-touch-icon.159e713979be.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/kb/static/images/favicons/favicon-32x32.bc0ac1d5d11e.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/kb/static/images/favicons/favicon-16x16.5801f8f0f34e.png">
    <link rel="shortcut icon" href="/kb/static/images/favicons/favicon.d122d305dee4.ico" type="image/x-icon" />

    <title>Interoperabilità dei checksum del log binario - Source - MariaDB Knowledge Base</title>

    <link href="/kb/static/css/main.b9e1e104f007.css" rel="stylesheet" type="text/css" />

    
        <meta name="robots" content="noindex, nofollow">
    

    <!-- FB Open Graph tags -->
    <meta property="og:title" content="Interoperabilità dei checksum del log binario - Source" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://mariadb.com/kb/it/interoperabilita-dei-checksum-del-log-binario/+source/" />
    <meta property="og:image" content="http://mariadb.comaskmonty-logo.png" />
    <meta property="og:site_name" content="MariaDB KnowledgeBase" />
    <meta property="fb:admins" content="514852603" />
    <meta property="og:description" content="" />

    <meta name="description" content="" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="//fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet"/>
    
</head>
<body class="mpkb nodes autoresize nodes_source jqui" id="nodes_source">





<div id="menu-mobile" class="visible-sm visible-xs">

    <div>
        <div id="mobile-close-menu" class="text-right">
            <a href="javascript:void(0)" title="Close Menu" id="back-main" class="toggle-menu">X<span></span></a>
        </div>
    </div>
    <div class="mainmenu-mobile">
        <ul class="ls-none ul-menu">
            <li data-sub="submenu5"><a class="open-form-search" href="/kb/search/" title="Search">Search </a></li>
            <li data-sub="submenu0"><a href="/products" title="Products">Products</a><span class="arrow-main"></span></li>
            <li data-sub="submenu1"><a href="/services" title="Services">Services</a><span class="arrow-main"></span></li>
            <li data-sub="submenu2"><a href="/resources" title="Resources">Resources</a><span class="arrow-main"></span></li>
            <li data-sub="submenu3"><a href="/about-us" title="About">About</a><span class="arrow-main"></span></li>
            <li data-sub="submenu4"><a href="/contact" title="Contact">Contact</a></li>
        </ul>
    </div>

    <div class="nav-top-mobile">
        <div class="select-box form">

            <ul class="inline-block-md mb-none top-nav">
                <li>

                </li>
                
                    <li>
                        <a href="/kb/user/login?next=/kb/it/interoperabilita-dei-checksum-del-log-binario/+source/"> Login</a>
                    </li>
                
            </ul>



        </div>
        <p class="text-center copyright">Copyright &copy; 2024 MariaDB. All rights reserved.</p>
    </div>
</div>
<div id="wrapper">
<div id="top-nav">
    <div class="container">
        <ul class="hidden-sm hidden-xs" >
            <li><a href="https://mariadb.com/kb/">Knowledge Base</a></li>
            <li><a href="https://mariadb.com/contact/">Contact</a></li>
            
                
                    <li>
                        <a href="/kb/user/login?next=/kb/it/interoperabilita-dei-checksum-del-log-binario/+source/" rel="nofollow">Accesso</a>
                    </li>
                
            
            
            <li id="search-form">
                <form action="/kb/it/+search/" method="get" id="search-block-form" accept-charset="UTF-8">
                    <input id="search" title="Enter the terms you wish to search for."
                           placeholder="Search . . ." type="text"
                           name="q" value="" size="15" maxlength="128" class="form-text"
                           data-autocomplete-url="/kb/it/+search/autocomplete/">
                    <input type="hidden" name="quick" value="1" />
                    <input type="hidden" name="source" value="kb" />
                </form>
            </li>
            <li><a id="search-toggler" href="/kb/search/">Search</a></li>
            
        </ul>
    </div>
</div>
<div id="navbar-bottom" class="navbar">
    <div class="container">
        
        
        
        
        <div class="row">
            <div class="col-md-3 col-sm-9 col-xs-9">
                <a class="brand" href="/" title="MariaDB">
                    <img src="/kb/static/images/logo-2018-black.95f5978ae14d.png">
                </a>
            </div>
            <div class="col-md-9 hidden-sm hidden-xs">
                <div class="main-menu">
                    <ul id="main-menu" class="nav navbar-nav inline-block-sm">
    <li class="has-sub full-menu">
        <a href="/products" title="Products">Products</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/services" title="Services">Services</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/pricing" title="Pricing">Pricing</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/resources" title="Resources">Resources</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/about-us" title="About Us">About Us</a>
    </li>
    <li class="">
        <a class="button electric-eel small top-bar-right-download" href="/downloads/">Download</a>
    </li>
</ul>
                </div>
            </div>
            <div class="col-md-3 visible-sm visible-xs col-sm-3 col-xs-3 ps-rv">
                <div class="navbar-header text-right pull-right">
                    <button type="button" class="menu-control toggle-menu" id="open-menu">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="main">
    <div class="container">
        

        <div id="subheader1" class="clearfix">
            <div class="pull-left">
                
                <div id="breadcrumbs" class="breadcrumb">
                    <a href="/kb/it/">Knowledge Base</a>
                    


    
    » <a class="crumb" href="/kb/it/mariadb-italiano/">MariaDB - Italiano</a>
    

    
    » <a class="crumb" href="/kb/it/replica/">Replica</a>
    


    » <a class="node_link crumb" href="/kb/it/interoperabilita-dei-checksum-del-log-binario/">Interoperabilità dei checksum del log binario</a>


                </div>
                
            </div>
        </div>
    </div>
    <div class="container" id="container-main">
        <div class="row">
            
            
                
                <aside id="sidebar-first" class="sidebar col-md-2 hidden-xs hidden-sm hidden-print">
                    
                        
                        <ul id="category_menu" class="nav nav-pills nav-stacked">
                            <li><a href="/kb/it/">Pagina iniziale</a></li>
                            
                                
                                    <li><a href="/kb/it/+questions/">Domande Aperte</a></li>
                                
                                <li><a href="/kb/it/documentation/">MariaDB Server</a></li>
                                <li><a href="/kb/it/maxscale/">MariaDB MaxScale</a></li>
                                <li><a href="/kb/it/mariadb-columnstore/">MariaDB ColumnStore</a></li>
                                <li><a href="/kb/it/connectors/">Connectors</a></li>
                            

                        </ul>
                    

                    
                        <div>
    

<div class="well well-small box actions"><div>

        <a class="btn btn-block btn-small" href="/kb/it/interoperabilita-dei-checksum-del-log-binario/">Return to article</a>
    
</div>
</div>

</div>
                    

                    

































                </aside>
            
            
            
                
            
            
            <section id="content" class="limited_width col-md-10 clearfix">
                
                    <h1>Interoperabilità dei checksum del log binario - Source</h1>
                

                



                <div>
                    

    

    
    <div class="revision_info">
        <dl class="table">
            <dt>Revisione</dt>
            <dd><a href="/kb/it/interoperabilita-dei-checksum-del-log-binario/+r/21097/">21097</a></dd>
            <dt>Utente</dt>
            <dd>
<span class="user" id="user-982">
<a href="/kb/user/id/982" title="Federico Razzoli">Federico Razzoli</a>
</span></dd>
            <dt>Data</dt>
            <dd>

<span class="datetime" title="2013-10-10 09:29">2013-10-10 09:29</span></dd>
        </dl>
    </div>
    


    

    
        
        <textarea id="answer_source" class="creole_source autogrow">L&#39;introduzione dei [[i-checksum-degli-eventi-del-log-binario|checksums degli eventi del log binario]] modifica il formato degli eventi che sono registrati nel file del log binario e inviati agli slave via rete. Questo solleva la questione su cosa accade quando si replica attraverso versioni diverse del server, dove uno dei server è una nuova versione in cui il checksum degli eventi è stato implementato, mentre l&#39;altro è una versione più vecchia che non sa nulla di questi checksum.

Quando i checksum sono disabilitati sul master (o il master ha una vecchia versione, senza i checksum), non ci sono problemi. In questo caso il formato del log binario è compatibile all&#39;indietro e la replica funziona bene.

Quando il master è una versione più recente, con i checksum degli eventi abilitati, ma lo slave è una versione più vecchia, la replica non funzione. Il master disconnette lo slave con un errore e registra un warning nel suo log degli errori. In questo modo si evita di inviare gli eventi a uno slave che non è in grado di gestirli, ma bisogna notare che i checksum non funzionano con i vecchi slave. Con il percorso di upgrade raccomandato, dove gli slave vengono aggiornati prima dei master, non ci sono problemi.

La replica da un nuovo master MySQL con i checksum abilitati a un MariaDB con i checksum abilitati funziona, e lo slave MariaDB verifica i checksum sugli eventi replicati.

Vi è però un problema quando uno slave MySQL recente replica su un master MariaDB ancora più recente con i checksum abilitati. Lo slave controlla la versione del master per sapere se gli eventi comprendono i checksum o meno, e MySQL non sa ancora che MariaDB svolge questa operazione già dalla versione 5.3.0 (al momento della stesura di questo articolo, MySQL 5.6.2). Perciò, se MariaDB ha una versione da 5.3.0 in avanti ma meno di 5.6.1, e viene usato come master con i checksum abilitati, uno slave MySQL non interpreta correttamente gli eventi che riceve. La replica quindi fallisce con un errore che dice che ci sono eventi corrotti, o addirittura nel peggiore dei casi i dati replicati vengono corrotti. Per risolvere questo problema sono necessarie modifiche a MySQL.

Ecco una tabella riassuntiva dello stato della replica tra diverse combinazioni di master e slave, e di checksum abilitati/disabilitati:


* **OLD:** MySQL &lt;5.6.1 o MariaDB &lt; 5.3.0 senza checksum
* **NEW-MARIA:** MariaDB &gt;= 5.3.0 con i checksum
* **NEW-MYSQL:** MySQL &gt;= 5.6.1 con i checksum

&lt;&lt;style class=&#34;darkheader-nospace-borders&#34; style=&#34;font-size:0.8em;&#34;&gt;&gt;
|= Master mysqlbinlog |= Slave / enabled? |= Checksums |= Status
|  OLD                |  OLD              |  -         |  Ok
|  OLD                |  NEW-MARIA        |  -         |  Ok
|  OLD                |  MYSQL            |  -         |  Ok
|  NEW-MARIA          |  OLD              |  No        |  Ok
|  NEW-MARIA          |  OLD              |  Yes       |  Master produce errore
|  NEW-MARIA          |  NEW-MARIA        |  Yes/No    |  Ok
|  NEW-MARIA          |  NEW-MYSQL        |  No        |  Ok
|  NEW-MARIA          |  NEW-MYSQL        |  Yes       |  Fallisce. Richiede modifiche a MySQL, altrimenti non capisce che MariaDB &lt; 5.6.1 esegue i checksum.
|  NEW-MYSQL          |  OLD              |  No        |  Ok
|  NEW-MYSQL          |  OLD              |  Yes       |  Master produce errore
|  NEW-MYSQL          |  NEW-MARIA        |  Yes/No    |  Ok
|  NEW-MYSQL          |  NEW-MYSQL        |  Yes/No    |  Ok
&lt;&lt;/style&gt;&gt;

== I checksums e ##mysqlbinlog##

Quando si usa il programma ##[[http://kb.askmonty.org/it/usare-mysqlbinlog]]## si riscontrano problemi simili.

Una versione di ##mysqlbinlog## che capisce i checksum può leggere i file dei log binari sia dai server recenti sia dai vecchi, con o senza i checksum abilitati.

Le vecchie versioni di ##mysqlbinlog## possono leggere i file del log binario create da una versione recente del server **se** i checksum erano disabilitati al momento della creazione. Le vecchie versioni di ##mysqlbinlog## che leggono un file del binlog recente che contengono i checksum sono confuse, e l&#39;output è scombussolato, con i checksum interpretati come rumore aggiunto alla fine delle query e di altri eventi. In questo caso non si ha alcun errore, solo un output sbagliato.

Una versione di ##mysqlbinlog## da MySQL &gt;= 5.6.1 avrà problemi simili come slave, finché il problema in MySQL non verrà corretto. Quando si legge un file del log binario con i checksum creati da MariaDB &gt;= 5.3.0 ma &lt; 5.6.1, non capisce che vi sono i checksum, e produce un output sbagliato esattamente come le vecchie versioni di ##mysqlbinlog##. La versione di MariaDB di ##mysqlbinlog## legge correttamente sia i file prodotti da MySQL sia da MariaDB.

== Vedi anche

* [[i-checksum-degli-eventi-del-log-binario|I checksum degli eventi del log binario]]
</textarea>
    


                    <div id="content_disclaimer" class="graybox">
                        Content reproduced on this site is the property of its respective owners,
                        and this content is not reviewed in advance by MariaDB. The views, information and opinions
                        expressed by this content do not necessarily represent those of MariaDB or any other party.
                    </div>
                </div>
            </section>

            
        </div>
    </div>
</div>

<!-- Footer -->
<footer id="footer">
    <div class="footer">
        <div class="container">
            <div class="row">
                <div class="col-xs-12">
                    <ul class="list-inline text-center footer-nav">
                        <li>
                            <h5>
                                <a href="https://mariadb.com/products" title="Products">Products</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/services" title="Services">Services</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/pricing" title="Pricing">Pricing</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/resources" title="Resources">Resources</a>
                            </h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/about-us" title="About MariaDB">About Us</a></h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/download" title="Download">Download MariaDB</a></h5>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="row row-10">
                
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div id="block-footerformcontact" class="block block-block-content block-block-contentd754ee1b-3cc9-40e7-9ef4-f504f1197fb1">
                        
                            <h5 style="font-weight: 400;">Subscribe to our newsletter!</h5>
                            <script src="//app-sj15.marketo.com/js/forms2/js/forms2.min.js"></script><form id="mktoForm_1498"></form>
                            <script>
                                <!--//--><![CDATA[// ><!--
                                MktoForms2.loadForm("//app-sj15.marketo.com", "573-PXI-984", 1498);
                                //--><!]]]]><![CDATA[>
                                //--><!]]>
                            </script>
                        
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div class="footer-copyright">
                        <div class="text-center">
                            <ul class="list-inline no-margin">
                                <li>
                                    <a href="/legal" title="Legal">Legal</a>
                                </li>
                                <li>
                                    <a href="/privacy-policy" title="Privacy Policy">Privacy Policy</a>
                                </li>
                                <li>
                                    <a href="/cookie-policy/" title="Cookies">Cookie Policy</a>
                                </li>
                            </ul>
                            <p>Copyright &copy; 2024 MariaDB. All rights reserved.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
</footer>
</div>

<div id="ajax_loading">
    <img src="/kb/static/images/ajax-loader.a51c5608d01a.gif" />
</div>

    <!-- Google Tag Manager -->
    <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-MK2847"
                      height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
            '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MK2847');</script>
    <!-- End Google Tag Manager -->

</body>

<script type="text/javascript" src="/kb/static/js/main.fed4ec768178.js" charset="utf-8"></script>

</html>