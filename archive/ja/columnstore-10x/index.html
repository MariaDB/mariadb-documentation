<!DOCTYPE html>
<html>
<head data-cookie-domain=""
      data-cookie-path="/">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="apple-touch-icon" sizes="180x180" href="/kb/static/images/favicons/apple-touch-icon.159e713979be.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/kb/static/images/favicons/favicon-32x32.bc0ac1d5d11e.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/kb/static/images/favicons/favicon-16x16.5801f8f0f34e.png">
    <link rel="shortcut icon" href="/kb/static/images/favicons/favicon.d122d305dee4.ico" type="image/x-icon" />

    <title>ColumnStoreインストールの準備 - 1.0.X - MariaDB Knowledge Base</title>

    <link href="/kb/static/css/main.f7633538c846.css" rel="stylesheet" type="text/css" />

    

    

    <!-- FB Open Graph tags -->
    <meta property="og:title" content="ColumnStoreインストールの準備 - 1.0.X" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://mariadb.com/kb/ja/columnstore-10x/" />
    <meta property="og:image" content="http://mariadb.comaskmonty-logo.png" />
    <meta property="og:site_name" content="MariaDB KnowledgeBase" />
    <meta property="fb:admins" content="514852603" />
    <meta property="og:description" content="ColumnStoreインストールの準備" />

    <meta name="description" content="ColumnStoreインストールの準備" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="//fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet"/>
    
</head>
<body class="mpkb nodes products nodes_view jqui" id="nodes_view">





<div id="menu-mobile" class="visible-sm visible-xs">

    <div>
        <div id="mobile-close-menu" class="text-right">
            <a href="javascript:void(0)" title="Close Menu" id="back-main" class="toggle-menu">X<span></span></a>
        </div>
    </div>
    <div class="mainmenu-mobile">
        <ul class="ls-none ul-menu">
            <li data-sub="submenu5"><a class="open-form-search" href="/kb/search/" title="Search">Search </a></li>
            <li data-sub="submenu0"><a href="/products" title="Products">Products</a><span class="arrow-main"></span></li>
            <li data-sub="submenu1"><a href="/services" title="Services">Services</a><span class="arrow-main"></span></li>
            <li data-sub="submenu2"><a href="/resources" title="Resources">Resources</a><span class="arrow-main"></span></li>
            <li data-sub="submenu3"><a href="/about-us" title="About">About</a><span class="arrow-main"></span></li>
            <li data-sub="submenu4"><a href="/contact" title="Contact">Contact</a></li>
        </ul>
    </div>

    <div class="nav-top-mobile">
        <div class="select-box form">

            <ul class="inline-block-md mb-none top-nav">
                <li>

                </li>
                
                    <li>
                        <a href="/kb/user/login?next=/kb/ja/columnstore-10x/"> Login</a>
                    </li>
                
            </ul>



        </div>
        <p class="text-center copyright">Copyright &copy; 2025 MariaDB. All rights reserved.</p>
    </div>
</div>
<div class="violator-wrap d-none" id="top_violator">
    <div class="container">
        <div class="row">
            <div class="col-xs-12 col-sm-12">
                <div class="violator-outer">
                    <div class="violator-inner">
                        <div class="row">
                            <div class="col-xs-12 col-sm-9 col-lg-7 col-lg-offset-2" id="top_violator_content">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="content-link" target="_blank" rel="nofollow noreferrer">
                                    <span>The Ultimate Guide to High Availability with MariaDB</span>
                                </a>
                            </div>
                            <div class="col-xs-12 col-sm-3" id="top_violator_cta">
                                <a href="https://go.mariadb.com/high-availability-guide-MariaDB-whitepaper.html" class="btn btn-mariadb" target="_blank" rel="nofollow noreferrer">Download Now</a>
                            </div>
                        </div>
                    </div>
                    <button type="button" class="btn btn-link close-btn">
                        <svg xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 24 24" width="15px" height="15px"><path d="M 4.9902344 3.9902344 A 1.0001 1.0001 0 0 0 4.2929688 5.7070312 L 10.585938 12 L 4.2929688 18.292969 A 1.0001 1.0001 0 1 0 5.7070312 19.707031 L 12 13.414062 L 18.292969 19.707031 A 1.0001 1.0001 0 1 0 19.707031 18.292969 L 13.414062 12 L 19.707031 5.7070312 A 1.0001 1.0001 0 0 0 18.980469 3.9902344 A 1.0001 1.0001 0 0 0 18.292969 4.2929688 L 12 10.585938 L 5.7070312 4.2929688 A 1.0001 1.0001 0 0 0 4.9902344 3.9902344 z"/></svg>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="wrapper">
<div id="top-nav">
    <div class="container">
        <ul class="hidden-sm hidden-xs" >
            <li><a href="https://mariadb.com/kb/">Knowledge Base</a></li>
            <li><a href="https://mariadb.com/contact/">Contact</a></li>
            
                
                    <li>
                        <a href="/kb/user/login?next=/kb/ja/columnstore-10x/" rel="nofollow">Login</a>
                    </li>
                
            
            
            <li id="search-form">
                <form action="/kb/ja/+search/" method="get" id="search-block-form" accept-charset="UTF-8">
                    <input id="search" title="Enter the terms you wish to search for."
                           placeholder="Search . . ." type="text"
                           name="q" value="" size="15" maxlength="128" class="form-text"
                           data-autocomplete-url="/kb/ja/+search/autocomplete/">
                    <input type="hidden" name="quick" value="1" />
                    <input type="hidden" name="source" value="kb" />
                </form>
            </li>
            <li><a id="search-toggler" href="/kb/search/">Search</a></li>
            
        </ul>
    </div>
</div>
<div id="navbar-bottom" class="navbar">
    <div class="container">
        
        
        
        
        <div class="row">
            <div class="col-md-3 col-sm-9 col-xs-9">
                <a class="brand" href="/" title="MariaDB">
                    <img src="/kb/static/images/logo-2018-black.95f5978ae14d.png">
                </a>
            </div>
            <div class="col-md-9 hidden-sm hidden-xs">
                <div class="main-menu">
                    <ul id="main-menu" class="nav navbar-nav inline-block-sm">
    <li class="has-sub full-menu">
        <a href="/products" title="Products">Products</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/services" title="Services">Services</a>
    </li>
    <li class="has-sub full-menu active">
        <a href="/pricing" title="Pricing">Pricing</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/resources" title="Resources">Resources</a>
    </li>
    <li class="has-sub full-menu">
        <a href="/about-us" title="About Us">About Us</a>
    </li>
    <li class="">
        <a class="button electric-eel small top-bar-right-download" href="/downloads/">Download</a>
    </li>
</ul>
                </div>
            </div>
            <div class="col-md-3 visible-sm visible-xs col-sm-3 col-xs-3 ps-rv">
                <div class="navbar-header text-right pull-right">
                    <button type="button" class="menu-control toggle-menu" id="open-menu">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="main">
    <div class="container">
        

        <div id="subheader1" class="clearfix">
            <div class="pull-left">
                
                <div id="breadcrumbs" class="breadcrumb">
                    <a href="/kb/ja/">Knowledge Base</a>
                    


    
    » <a class="crumb" href="/kb/ja/mariadb/">MariaDB – 日本語</a>
    

    
    » <a class="crumb" href="/kb/ja/documentation/">ドキュメント</a>
    

    
    » <a class="crumb" href="/kb/ja/storage-engines/">ストレージエンジン</a>
    

    
    » <a class="crumb" href="/kb/ja/mariadb-columnstore/">MariaDB ColumnStore</a>
    

    
    » <a class="crumb" href="/kb/ja/columnstore-getting-started/">ColumnStoreを使用する</a>
    


    » <a class="node_link crumb" href="/kb/ja/columnstore-10x/">ColumnStoreインストールの準備 - 1.0.X</a>


                </div>
                
            </div>
        </div>
    </div>
    <div class="container" id="container-main">
        <div class="row">
            
            
                
                <aside id="sidebar-first" class="sidebar col-md-2 hidden-xs hidden-sm hidden-print">
                    
                        
                        <ul id="category_menu" class="nav nav-pills nav-stacked">
                            <li><a href="/kb/ja/">ホーム</a></li>
                            
                                
                                    <li><a href="/kb/ja/+questions/">Open Questions</a></li>
                                
                                <li><a href="/kb/ja/documentation/">MariaDB Server</a></li>
                                <li><a href="/kb/ja/maxscale/">MariaDB MaxScale</a></li>
                                <li><a href="/kb/ja/mariadb-columnstore/">MariaDB ColumnStore</a></li>
                                <li><a href="/kb/ja/connectors/">Connectors</a></li>
                            

                        </ul>
                    

                    
<div>



<div class="well well-small box actions"><div>

        <a class="btn btn-block btn-blue btn-sm" href="/kb/ja/columnstore-10x/+history" rel="nofollow">履歴</a>
        
        
        
        <a class="btn btn-block btn-blue btn-sm" href="/kb/ja/columnstore-10x/+source/">Source</a>
        
        <a class="btn btn-block btn-blue btn-sm flag" href="/kb/ja/columnstore-10x/+flag"
                data-flag-url="/kb/ja/columnstore-10x/+flag" rel="nofollow">
                Flag as Spam / Inappropriate</a>
        
        <a class="btn btn-block btn-blue btn-sm" href="/kb/ja/columnstore-10x/+translate/">
                Translate</a>
        

</div>
</div>





<div class="well well-small box node_info"><div>

    <dl>
        <dt>作成された</dt>
        <dd>

<span class="datetime" title="2017-10-12 04:17">7 年, 5 ヶ月 ago</span></dd>

        <dt>Modified</dt>
        <dd>

<span class="datetime" title="2017-11-20 05:44">7 年, 3 ヶ月 ago</span></dd>

        <dt>Type</dt>
        <dd>article</dd>

        <dt>Status</dt>
        <dd>active</dd>

        <dt>License</dt>
        <dd>
            
                <a href="/kb/ja/columnstore-10x/+license/">CC BY-SA / Gnu FDL</a>
            
        </dd>

        
    </dl>

    
    <ul class="rss_feeds">
        <li><a href="/kb/ja/columnstore-10x/+history/feed/">
            履歴</a>
        </li>
        <li><a href="/kb/ja/columnstore-10x/+comments/feed/">
            Comments</a>
        </li>
    </ul>
    

</div>
</div>





    
    
    

<div class="well well-small box attachments"><div><div class="edit_link pull-right"><a href="/kb/ja/columnstore-10x/+edit/attachments/">Edit</a></div><h5>Attachments</h5></div><div>

        
            <div class="no_data">No attachments exist</div>
        
    
</div>
</div>

    



    
    
        

<div class="well well-small box"><div><h5>Localized Versions</h5></div><div>

        <ul>
            
            <li><a href="/kb/en/preparing-for-columnstore-installation-10x/">Preparing for ColumnStore Installation - 1.0.X</a> [en]</li>
            
        </ul>
        
</div>
</div>

    






</div>


                    

































                </aside>
            
            
            
                
            
            
                
            
            <section id="content" class="limited_width col-md-8 clearfix">
                
                    <h1>ColumnStoreインストールの準備 - 1.0.X</h1>
                

                



                <div>
                    
    

    
    
    

    <div class="node creole">
        
        
        


    
    <div class="answer formatted">
        <h3 class="anchored_heading" id="事前条件">事前条件</h3>
<div class="cstm-style redbox"><p>MariaDB ColumnStoreのGAバージョンでは、ColumnStoreのバイナリやRPMをインストールする前に、別のMariaDB ServerやMySQLがインストールされていないよう注意してください。もし既にインストールされている場合、以降の処理の前に、アンインストールしてください。</p>
</div><div class="table_of_contents well well-small">
<h3>Contents</h3>
    <ol class="toc">

        <li class=""><a href="#事前条件" title="事前条件">事前条件</a>        <ol class="toc">

            <li class=""><a href="#構成の準備" title="構成の準備">構成の準備</a>            <ol class="toc">

                <li class=""><a href="#os情報" title="OS情報">OS情報</a></li>

                <li class=""><a href="#システム管理情報" title="システム管理情報">システム管理情報</a></li>

                <li class=""><a href="#ネットワーク構成" title="ネットワーク構成">ネットワーク構成</a>            </ol>
</li>

            <li class=""><a href="#mariadb-columnstoreのポートの使用" title="MariaDB ColumnStoreのポートの使用">MariaDB ColumnStoreのポートの使用</a></li>

            <li class=""><a href="#ストレージとデータベースファイル-dbroots" title="ストレージとデータベースファイル (DBRoots)">ストレージとデータベースファイル (DBRoots)</a>            <ol class="toc">

                <li class=""><a href="#ローカルデータファイル" title="ローカルデータファイル">ローカルデータファイル</a></li>

                <li class=""><a href="#sanにマウントしているデータベースファイル" title="SANにマウントしているデータベースファイル">SANにマウントしているデータベースファイル</a>            </ol>
</li>

            <li class=""><a href="#パフォーマンス最適化の考慮" title="パフォーマンス最適化の考慮">パフォーマンス最適化の考慮</a>            <ol class="toc">

                <li class=""><a href="#gbe-nic-設定" title="GbE NIC 設定">GbE NIC 設定</a>            </ol>
</li>

            <li class=""><a href="#システム設定の考慮" title="システム設定の考慮">システム設定の考慮</a>            <ol class="toc">

                <li class=""><a href="#umask設定" title="umask設定">umask設定</a>            </ol>
</li>

            <li class=""><a href="#ファイアーウォールの設定" title="ファイアーウォールの設定">ファイアーウォールの設定</a>        </ol>
</li>

        <li class=""><a href="#パッケージ依存性" title="パッケージ依存性">パッケージ依存性</a>        <ol class="toc">

            <li class=""><a href="#boostライブラリ" title="Boostライブラリ">Boostライブラリ</a></li>

            <li class=""><a href="#その他のパッケージについて" title="その他のパッケージについて">その他のパッケージについて</a></li>

            <li class=""><a href="#centos-67" title="Centos 6/7">Centos 6/7</a></li>

            <li class=""><a href="#ubuntu-16" title="Ubuntu 16">Ubuntu 16</a></li>

            <li class=""><a href="#debian-8" title="Debian 8">Debian 8</a></li>

            <li class=""><a href="#suse-12" title="SUSE 12">SUSE 12</a>        </ol>
</li>

        <li class=""><a href="#ダウンロードインストールの最初の選択について" title="ダウンロード／インストールの最初の選択について">ダウンロード／インストールの最初の選択について</a></li>

        <li class=""><a href="#ルートユーザーによるインストール" title="ルートユーザーによるインストール">ルートユーザーによるインストール</a>        <ol class="toc">

            <li class=""><a href="#mariadb-columnstore-rpmをダウンロードしてインストール" title="MariaDB ColumnStore RPMをダウンロードしてインストール">MariaDB ColumnStore RPMをダウンロードしてインストール</a></li>

            <li class=""><a href="#mariadb-columnstoreのバイナリパッケージをダウンロードしてインストール" title="MariaDB ColumnStoreのバイナリパッケージをダウンロードしてインストール">MariaDB ColumnStoreのバイナリパッケージをダウンロードしてインストール</a></li>

            <li class=""><a href="#mariadb-columnstore-deb-パッケージをダウンロードしてインストール" title="MariaDB ColumnStore DEB パッケージをダウンロードしてインストール">MariaDB ColumnStore DEB パッケージをダウンロードしてインストール</a>        </ol>
</li>

        <li class=""><a href="#rootでないユーザーによるインストール" title="rootでないユーザーによるインストール">rootでないユーザーによるインストール</a>        <ol class="toc">

            <li class=""><a href="#rootユーザーでrootでないユーザーを作成し同名のグループを作成" title="(rootユーザーで)rootでないユーザーを作成し、同名のグループを作成">(rootユーザーで)rootでないユーザーを作成し、同名のグループを作成</a></li>

            <li class=""><a href="#rootユーザーでsudo設定を更新" title="(rootユーザーで)sudo設定を更新">(rootユーザーで)sudo設定を更新</a></li>

            <li class=""><a href="#rootユーザーでユーザーファイル制限を更新" title="(rootユーザーで)ユーザーファイル制限を更新">(rootユーザーで)ユーザーファイル制限を更新</a></li>

            <li class=""><a href="#rootユーザーでマウントしたsanを使用している場合にfstabを修正" title="(rootユーザーで)マウントしたSANを使用している場合にfstabを修正">(rootユーザーで)マウントしたSANを使用している場合にfstabを修正</a></li>

            <li class=""><a href="#rootユーザーで必要に応じて既存のcolumnstoreをアンインストール" title="(rootユーザーで)必要に応じて既存のColumnStoreをアンインストール">(rootユーザーで)必要に応じて既存のColumnStoreをアンインストール</a></li>

            <li class=""><a href="#rootユーザーでmariadb-columnstoreが書き込みできるよう対象ディレクトリのパーミッションを更新" title="(rootユーザーで)MariaDB ColumnStoreが書き込みできるよう、対象ディレクトリのパーミッションを更新">(rootユーザーで)MariaDB ColumnStoreが書き込みできるよう、対象ディレクトリのパーミッションを更新</a></li>

            <li class=""><a href="#rootでないユーザーでインストールを実行" title="(rootでないユーザーで)インストールを実行">(rootでないユーザーで)インストールを実行</a></li>

            <li class=""><a href="#rootユーザーでdefaultファイルを設定" title="(rootユーザーで)Defaultファイルを設定">(rootユーザーで)Defaultファイルを設定</a></li>

            <li class=""><a href="#rootユーザーでインストール後" title="(rootユーザーで)インストール後">(rootユーザーで)インストール後</a>        </ol>
</li>

        <li class=""><a href="#columnstore-cluster-テストツール" title="ColumnStore Cluster テストツール">ColumnStore Cluster テストツール</a></li>

        <li class=""><a href="#columnstore-設定インストールツール" title="ColumnStore 設定、インストールツール">ColumnStore 設定、インストールツール</a>    </ol>
 </ol>
</li>
</div>
<h4 class="anchored_heading" id="構成の準備">構成の準備</h4>
<p>MariaDB ColumnStoreをインストールする前にいくつかの準備が必要です。以下の事項についてインストール前に決めてください。それぞれの詳細については、MariaDB ColumnStoreのアーキテクチャのドキュメントを参照してください。</p>
<ul start="1"><li>いくつのUser Modules (UMs) が必要ですか？
</li></ul>
<ul start="1"><li>いくつのPerformance Modules (PMs)が必要ですか？
</li></ul>
<ul start="1"><li>どれくらいのdiskスペースが必要ですか？
</li></ul>
<h5 class="anchored_heading" id="os情報">OS情報</h5>
<p>MariaDB ColumnStoreは以下のOSでの動作をサポートしています：</p>
<ul start="1"><li>RHEL/CentOS v6, v7
</li></ul>
<ul start="1"><li>Ubuntu 16.04 LTS
</li></ul>
<ul start="1"><li>Debian v8
</li></ul>
<ul start="1"><li>SUSE 12
</li></ul>
<p>そして最新のLinuxで動作させるようにしてください。</p>
<p>また、マルチノードシステムを構築する場合は、全てのノードで同じOSをインストールしてください。
さらに、ロケールの設定も全ノードで同じにしてください。</p>
<p>ロケールをen_USとUTF-8に設定するには、以下のように実行します。</p>
<pre class="fixed"># localedef -i en_US -f UTF-8 en_US.UTF-8
</pre><h5 class="anchored_heading" id="システム管理情報">システム管理情報</h5>
<p>MariaDB ColumnStoreインストール前にシステム管理者から入手しておく情報は以下の通りです。</p>
<ul start="1"><li>各ノードにあるインターフェースのホスト名(オプション)
</li></ul>
<ul start="1"><li>各ノードにあるインターフェースのIPアドレス
</li></ul>
<ul start="1"><li>rootやroot以外のパスワード (全ノードはrootやroot以外のユーザーに対して、同じsshキー、同じパスワードが設定されている必要があります)。MariaDB ColumnStoreはrootでもroot以外のユーザーでもインストール可能です。
</li></ul>
<p>3台のPM、1台のUMの場合の例を以下に示します。以下の操作は、PM1上で必要な操作になり、同様の操作が全PMで必要となります。</p>
<pre class="fixed">[root@pm- 1 ~] $ ssh-keygen
[root@pm- 1 ~] $ ssh-copy-id -i ~/.ssh/id_rsa.pub pm-1
[root@pm- 1 ~] $ ssh-copy-id -i ~/.ssh/id_rsa.pub pm-2
[root@pm- 1 ~] $ ssh-copy-id -i ~/.ssh/id_rsa.pub pm-3
[root@pm- 1 ~] $ ssh-copy-id -i ~/.ssh/id_rsa.pub um-1
</pre><h5 class="anchored_heading" id="ネットワーク構成">ネットワーク構成</h5>
<p>MariaDB ColumnStoreはネットワーク構成に対して非常にフレキシブルです。
いくつかのオプションを以下に示します。</p>
<ul start="1"><li>UMとPM間のネットワークは、複数のプライベートなVLANにより構成可能です。
 この場合、MariaDB ColumnStoreは自動的に個々のLANをまとめて扱い、UMとPMの間で効果的なバンド幅が得られるように動作します。
</li></ul>
<ul start="1"><li>PMは公開されたLANのアクセスは必要なく、UMとのみ通信可能であれば問題ありません。
</li></ul>
<ul start="1"><li>UMは少なくとも一つのMySQL Serverフロントエンドへ接続できる必要がありますが、PMとの接続とは分離することが可能です。
</li></ul>
<ul start="1"><li>MySQL Serverフロントエンドの全てのセキュリティ機能を使用可能です。規定では、3306番のポートで待ち受けています。
</li></ul>
<ul start="1"><li>MariaDB ColumnStoreはTCP/IPレベルの層へのみアクセスするため、物理レイヤーの選択は自由に行うことができます。
</li></ul>
<h4 class="anchored_heading" id="mariadb-columnstoreのポートの使用">MariaDB ColumnStoreのポートの使用</h4>
<p>MariaDB ColumnStoreデーモンは3306番のポートを使用します。
また、以下のポートも利用します。</p>
<p>8600 - 8622, 8700, 8800</p>
<h4 class="anchored_heading" id="ストレージとデータベースファイル-dbroots">ストレージとデータベースファイル (DBRoots)</h4>
<p>DBRootは、MariaDB ColumnStoreがデータを置くコンテナやディレクトリを指します。例えば、インストールディレクトリには、/usr/local/mariadb/columnstore/data&lt;N&gt;というフォルダがありますが、このNはdbroot番号です。</p>
<p>注意：extX、NFSなどのストレージを使うときは、MariaDBフロントエンドデータやDBRootバックエンドデータファイルのみがマウントされるようセットアップしてください。/usr/local/mariadb や /usr/local/mariadb/columnstore などのシステムが配置されるディレクトリ全体をマウントしないでください。</p>
<p>以下のディレクトリはマウントしても問題ありません。</p>
<ul start="1"><li>/usr/local/mariadb/columnstore/mysql/db <br>
(フロントエンドスキーマやColumnStore以外のデータ(オプショナル))
</li></ul>
<ul start="1"><li>/usr/local/mariadb/columnstore/dataX<br>
(DBroots。Columnstoreのデータ)
</li></ul>
<h5 class="anchored_heading" id="ローカルデータファイル">ローカルデータファイル</h5>
<p>データベースファイルの保存にローカルディスクを使うのであれば、DBRootディレクトリはインストールディレクトリ以下に作成されます。例えば、/usr/local/mariadb/columnstore/data&lt;N&gt; となります。
システム構成時には、1 Performance Moduleごとに1つのDBRootを設定する必要があります。</p>
<p>Dataにはソフトリンクを使用してください。もし、ローカルディスクの空き容量の制限などで難しい場合、外部ストレージを使用することが可能です。
mariadb/columnstore/data や mariadb/columnstore/dataXのようなDataディレクトリレベルでソフトリンクを設定することを推奨します。このセットアップ中には、パッケージのアップグレードを、rpmやバイナリから実行することができます。
もし、/usr/local/mariadbのような最上位の階層に対してソフトリンクを設定しなければならない場合には、バイナリパッケージを使用してインストールしてください。rpmを使用したインストールでは、アップグレード実施時に、ソフトリンクが削除されアップグレードも失敗するという障害が発生します。</p>
<h5 class="anchored_heading" id="sanにマウントしているデータベースファイル">SANにマウントしているデータベースファイル</h5>
<p>データベースファイルの保存にSANを使う場合、次のことを考慮する必要があります。</p>
<ul start="1"><li>各DBRootは別々のパーティションやディレクトリに設定します。
</li></ul>
<ul start="1"><li>1つのPerformance Moduleに複数のDBRootをアサインし、Performance Moduleごとに異なる数のDBRootを設定しているかもしれませんが、全てのPerformance Moduleに同じ数、同じサイズのストレージを割り当てることを推奨します。例として、1つのPerformance Moduleに2つのストライピングされていない別々のデバイスを割り当てていた場合には、2つのDBRootを1つのPerformance Moduleに割り当て、/etc/fstabに2つのマウントを設定します。
</li></ul>
<ul start="1"><li>MariaDB ColumnStoreはほとんどのLinuxファイルシステムで動作し、EXT2上でのテストを重点的に行っています。EXT3やEXT4でも問題はないはずですが、データベースアプリケーションにおいてこれらのファイルシステムのジャーナリングは不可の大きいものとなります。 選択したファイルシステムの書き込み特性を慎重に評価し、特定のビジネスニーズを満たすことを確認する必要があります。 いずれにせよ、MariaDB ColumnStoreは比較的少数の非常に大きなファイル (64MB) を書き込みます。 Linuxシステム管理者に相談して、選択したファイルシステムでデフォルトよりも大きなinode単位の設定を行うかどうかを必要に応じて確認してください。
</li></ul>
<ul start="1"><li>MariaDB ColumnStoreは、SANストレージデバイスを使用しているときにパフォーマンスモジュールがダウンした場合の高可用性フェイルオーバーをサポートします。 サポートするようにシステムをセットアップするには、すべてのSANデバイスをパフォーマンスモジュールにマウントする必要があります。したがって、2つのパフォーマンスモジュールがあり、それぞれに1つのSANデバイスがあるシステムでは、1つのパフォーマンスモジュールがオフラインになると、システムは自動的にこれを検出し、SANデバイスをダウンしたモジュールから1つのアクティブなパフォーマンスモジュールに再マウントします。また、そのモジュールがオフラインのままでも実行可能です。
</li></ul>
<ul start="1"><li>fstabファイルを必ず設定してください (/etc/fstab)。エントリは、すべてのPMで使用されているすべてのDBRootを、各PMに追加する必要があります。'noauto'オプションは、すべてのDBRootがすべてのPMに関連付けられますが、サーバーの起動時には自動的にはマウントされないことを示します。各PMに割り当てられたDBRootは、ColumnStoreの起動時にそのPMに固有にマウントされます。
</li></ul>
<p>次の例は、全てのPMに対して2つのDBRooを割り当てており、任意のストレージタイプを設定することが可能です。</p>
<pre class="fixed">/dev/sda1 /usr/local/mariadb/columnstore/data1 ext2 noatime,nodiratime,noauto 0 0
/dev/sdd1 /usr/local/mariadb/columnstore/data2 ext2 noatime,nodiratime,noauto 0 0
</pre><h4 class="anchored_heading" id="パフォーマンス最適化の考慮">パフォーマンス最適化の考慮</h4>
<p>MariaDB ColumnStoreを使用する際に考慮すべきパフォーマンスの最適化について以下に示します。固有のニーズを満たすための、さらに追加の最適化を行いたい場合には、ネットワーク管理者などに相談してください。</p>
<h5 class="anchored_heading" id="gbe-nic-設定">GbE NIC 設定</h5>
<ul start="1"><li>/etc/rc.d/rc.local ファイルを以下を含むように修正します。
</li></ul>
<pre class="fixed">/sbin/ifconfig eth0 txqueuelen 10000
</pre><ul start="1"><li>/etc/sysctl.conf ファイルを以下を含むように修正します。
</li></ul>
<pre class="fixed"># increase TCP max buffer size

net.core.rmem_max = 16777216

net.core.wmem_max = 16777216

# increase Linux autotuning TCP buffer limits

# min, default, and max number of bytes to use

net.ipv4.tcp_rmem = 4096 87380 16777216

net.ipv4.tcp_wmem = 4096 65536 16777216

# don't cache ssthresh from previous connection

net.ipv4.tcp_no_metrics_save = 1

# recommended to increase this for 1000 BT or higher

net.core.netdev_max_backlog = 2500

# for 10 GigE, use this

net.core.netdev_max_backlog = 30000
</pre><ul start="1"><li>キャッシュメモリの設定
</li></ul>
<p>ディレクトリとinodeをキャッシュするようにLinuxを最適化するには、vm.vfs_cache_pressureを100より小さい値にし、inodeとディレクトリがキャッシュに保持されるようにします。この設定により読み込みパフォーマンスが改善します。推奨値は10で、以下のコマンドをルートユーザーもしくはsudoで実行します。</p>
<p>現在値を確認するには以下のコマンドを実行します。</p>
<pre class="fixed">cat /proc/sys/vm/vfs_cache_pressure
</pre><p>次回の再起動まで現在値を変更するには以下のコマンドを実行します。</p>
<pre class="fixed">sysctl -w vm.vfs_cache_pressure=10
</pre><p>永久に値を変更するには以下の記述を/etc/sysctl.confに追加します。</p>
<pre class="fixed">vm.vfs_cache_pressure = 10
</pre><h4 class="anchored_heading" id="システム設定の考慮">システム設定の考慮</h4>
<h5 class="anchored_heading" id="umask設定">umask設定</h5>
<p>既定の設定である/etc/profileの中の022が推奨値です。077のように7で終わらないような設定が、必要です。例えばルートのインストールではmysqldは'mysql'ユーザーとして動作し、ColumnStoreの設定ファイルであるColumnStore.xmlファイルを参照できる必要があります。最後の数字である7は、これを妨げてしまうため、インストールが失敗します。</p>
<p>現在のumaskの設定は以下のように確認できます。</p>
<pre class="fixed">umask
</pre><p>022の値は現在のセッションまたは、/etc/profileで以下のように設定できます。</p>
<pre class="fixed">umask 022
</pre><h4 class="anchored_heading" id="ファイアーウォールの設定">ファイアーウォールの設定</h4>
<p>MariaDB ColumnStoreは3306, 8600 - 8622, 8700, 8800のポートを使用します。マルチノードのインストールでは、サーバー間でこれらのポートがアクセス可能である必要があります。もしこれらのポートをブロックするようなファイアーウォールソフトウェアが稼働している場合、ファイアーウォールを無効にするか、これらのポートがサーバー間で疎通可能なように設定してください。</p>
<p>マルチノードインストールで、ファイアウォールやSELinuxを無効にするには以下のように実行します。</p>
<p>rootユーザーになって以下を実行します。</p>
<p>You must be a Root user.</p>
<p>CentOS 6 とiptablesを使っているシステムの場合：</p>
<pre class="fixed">#service iptables save  (Will save your existing IPTable Rules)
#service iptables stop  (It will disable firewall Temporarly)
</pre><p>恒久的に無効にするには：</p>
<pre class="fixed">#chkconfig iptables off
</pre><p>CentOS 7とfirewalldでsystemctlがインストールされているシステムの場合：</p>
<pre class="fixed">#systemctl status firewalld  
#systemctl stop firewalld  
#systemctl disable firewalld  
</pre><p>Ubunthとufwを使っているシステムの場合：</p>
<pre class="fixed">#service ufw stop  (It will disable firewall Temporarly)
</pre><p>恒久的に無効にするには：</p>
<pre class="fixed">#chkconfig ufw off
</pre><p>SUSEでは：</p>
<pre class="fixed">#/sbin/rcSuSEfirewall2 status
#/sbin/rcSuSEfirewall2 stop 
</pre><p>SELinuxを無効にするには：</p>
<pre class="fixed">edit file &#34;/etc/selinux/config&#34; and find line;

SELINUX=enforcing

Now replace it with,

SELINUX=disabled
</pre><h3 class="anchored_heading" id="パッケージ依存性">パッケージ依存性</h3>
<h4 class="anchored_heading" id="boostライブラリ">Boostライブラリ</h4>
<p>MariaDB ColumnStoreはboostパッケージ1.53以上のバージョンを必要とします。</p>
<p>Centos 7, Ubunth 16, Debian 8, SUSE 12やその他の新しいOSでは、yumやapt-getを使っていboostパッケージをインストールします。</p>
<pre class="fixed"># yum -y install boost
</pre><p>または</p>
<pre class="fixed"># apt-get -y install libboost-all-dev
</pre><p>CentOS 6では、MariaDB ColumnStore Centos 6 boost library packageをダウンロードしてインストールするか、boost 1.55のソースをインストールして必要なライブラリをビルドする方が簡単です。この場合は、インストールとビルドの両方が必要であることを意味します。</p>
<p>バイナリをダウンロードするには、以下のダウンロードページにて、"centos6_boost_1_55.tar.gz"をダウンロードします。</p>
<p>   <a href="https://mariadb.com/downloads/columnstore">https://mariadb.com/downloads/columnstore</a></p>
<p>   Click All Versions - &gt; 1.0.x -&gt; centos -&gt; x86_64</p>
<p>クラスタ内のそれぞれのサーバーにインストールしてください。</p>
<pre class="fixed">wget https://downloads.mariadb.com/ColumnStore/1.0.x/centos/x86_64/centos6_boost_1_55.tar.gz
tar xfz centos6_boost_1_55.tar.gz -C /usr/lib
ldconfig
</pre><p>ダウンロードしてboostライブラリをビルドするには以下を実行します。</p>
<p>注意：あらかじめ"Development Tools" groupをインストールしておいてください。</p>
<pre class="fixed">yum groupinstall &#34;Development Tools&#34;
yum install cmake
</pre><p>以下に、boostのソースをダウンロードしてビルドする手順を示します。</p>
<pre class="fixed">cd /usr/
wget http://sourceforge.net/projects/boost/files/boost/1.55.0/boost_1_55_0.tar.gz
tar zxvf boost_1_55_0.tar.gz
cd boost_1_55_0
./bootstrap.sh --with-libraries=atomic,date_time,exception,filesystem,iostreams,locale,program_options,regex,signals,system,test,thread,timer,log --prefix=/usr
./b2 install
ldconfig
</pre><p>SUSE 12では、boost-develパッケージをインストールする必要があります。SLE-SDKパッケージの一部として提供されています。</p>
<pre class="fixed">SUSEConnect -p sle-sdk/12.2/x86_64
zypper install boost-devel
</pre><h4 class="anchored_heading" id="その他のパッケージについて">その他のパッケージについて</h4>
<p>MariaDB ColumnStoreがインストールされるノード上で、以下のパッケージがインストールされているようにしてください。</p>
<h4 class="anchored_heading" id="centos-67">Centos 6/7</h4>
<pre class="fixed"># yum -y install expect perl perl-DBI openssl zlib file sudo  libaio rsync snappy net-tools perl-DBD-MySQL
</pre><h4 class="anchored_heading" id="ubuntu-16">Ubuntu 16</h4>
<pre class="fixed"># apt-get -y install tzdata libtcl8.6 expect perl openssl file sudo libdbi-perl libboost-all-dev libreadline-dev rsync libsnappy1v5 net-tools libdbd-mysql-perl
</pre><h4 class="anchored_heading" id="debian-8">Debian 8</h4>
<pre class="fixed"># apt-get -y install expect perl openssl file sudo libdbi-perl libboost-all-dev libreadline-dev rsync libsnappy1 net-tools libdbd-mysql-perl
</pre><h4 class="anchored_heading" id="suse-12">SUSE 12</h4>
<pre class="fixed">zypper install expect perl perl-DBI openssl zlib file sudo libaio rsync boost snappy net-tools perl-DBD-mysql
</pre><h3 class="anchored_heading" id="ダウンロードインストールの最初の選択について">ダウンロード／インストールの最初の選択について</h3>
<p>MariaDB ColumnStoreのインストールはsoft-linkを使用します。もしローカルストレージサイズの制約があるなどでインストールディレクトリをデータディレクトリを分けたい場合、この設定を行うことが可能です。
soft-linkはmariadb/columnstore/dataやmariadb/columnstore/dataXなどのDataディレクトリのレベルで行うことを推奨します。この設定により、rpmやdebian、などのあらゆるパッケージのタイプにおいても、アップグレードも可能です。
もし、/usr/local/mariadbなどのトップレベルでsoft-linkを使用する必要がある場合は、バイナリパッケージを使ってインストールしてください。rpmを使ってインストールを行うと、アップグレードプロセスは失敗します。</p>
<p>重要：別のバージョンのMariaDB Serverがインストールされていないようにしてください。もしインストールされている場合は、ColumnStoreのインストール前にアンインストールしてください。</p>
<h3 class="anchored_heading" id="ルートユーザーによるインストール">ルートユーザーによるインストール</h3>
<h4 class="anchored_heading" id="mariadb-columnstore-rpmをダウンロードしてインストール">MariaDB ColumnStore RPMをダウンロードしてインストール</h4>
<ol start="1"><li>MariaDB ColumnStoreをルートユーザーとしてインストールします。(別のアカウントでログインしている場合、suを実行してrootのログインシェルを開いてください)
</li></ol>
<p>注意：MariaDB ColumnStoreはMariaDBユーザー1アカウント(パスワード無し)でインストールされます。通常のMySQLのインストールと同様、MariaDB ColumnStore-Mysqlアカウントに対して、パスワードを任意で設定することが可能です。<br>
注意：パッケージは/usr/localにインストールされます。ルートユーザーによるインストールでは以下の手順に従います。</p>
<p><strong> mariadb-columnstore-release#.x86_64.tar.gz (RHEL5 64-BIT)を、MariaDB ColumnStoreをインストールしようとしているサーバーの/rootディレクトリにダウンロードします。
</strong> tarファイルを展開すると、/rootディレクトリ内に複数のrpmファイルが生成されます。</p>
<pre class="fixed">tar -zxf mariadb-columnstore-release#.x86_64.tar
</pre><p><strong> rpmをインストールします。MariaDB ColumnStoreは/usr/localディレクトリにインストールされます。</strong></p>
<pre class="fixed">rpm -ivh mariadb-columnstore*release#*.rpm
</pre><h4 class="anchored_heading" id="mariadb-columnstoreのバイナリパッケージをダウンロードしてインストール">MariaDB ColumnStoreのバイナリパッケージをダウンロードしてインストール</h4>
<p>以下ではMariaDB ColumnStoreをルートユーザーで、PM1になるようインストールします。
注意：MariaDB ColumnStoreのアカウントにも、通常のMariaDBと同様にユーザーの設定、パーミッションの設定を行うことが可能です。</p>
<p><strong> ルートユーザーでのMariaDB ColumnStoreのインストールは、/usr/localにて実行する必要があります。
/usr/localに直接インストールするか、任意の箇所へインストールして、/usr/localにsoft-linkを設定するかのいずれかで設定することが可能です。ここでは、/mnt/mariadbにバイナリパッケージをインストールしたという前提でsoft-linkを設定しています。</strong></p>
<pre class="fixed"># ln -s /mnt/mariadb /usr/local
</pre><ul start="1"><li>パッケージを/root/にダウンロードし、MariaDB ColumnStoreをインストールしたいサーバーの/usr/localディレクトリにコピーします。 
</li></ul>
<pre class="fixed">cp /root/mariadb-columnstore-release#.x86_64.bin.tar.gz /usr/local/ mariadb-columnstore-release#.x86_64.bin.tar.gz
</pre><ul start="1"><li>tarファイルを展開すると、/usr/local/ディレクトリが作成されます。 
</li></ul>
<pre class="fixed">tar -zxvf mariadb-columnstore-release#.x86_64.bin.tar.gz
</pre><p>ポストインストールスクリプトを実行します。 <br></p>
<pre class="fixed"><strong>/usr/local/mariadb/columnstore/bin/post-install</strong>
</pre><h4 class="anchored_heading" id="mariadb-columnstore-deb-パッケージをダウンロードしてインストール">MariaDB ColumnStore DEB パッケージをダウンロードしてインストール</h4>
<p>DEBパッケージによるインストールは現在のバージョンではサポートしていません。ただし、利用可能なUbuntu 16.04のバイナリパッケージが存在します。先に記載した、バイナリパッケージのインストール方法に従ってください。</p>
<p>MariaDB ColumnStoreをDebianかUbuntu OSにルートユーザーでインストールするには：
MariaDBインスト―ル時と同様に、MariaDB ColumnStoreのユーザーをセットアップしてパーミッションを設定してください。
1. mariadb-columnstore-release#.amd64.deb.tar.gz (DEB 64- BIT) パッケージをMariaDB ColumnStoreをインストールしたいサーバーの/rootディレクトリにダウンロードします。 </p>
<p>2. tarファイルを展開すると、DEBファイルが生成されます。 </p>
<pre class="fixed">tar -zxf  mariadb-columnstore-release#.amd64.deb.tar.gz
</pre><p>3. MariaDB ColumnStoreのDEBファイルをインストールします。MariaDB ColumnStoreが、/usr/local/.ディレクトリにインストールされます。</p>
<pre class="fixed">dpkg -i mariadb-columnstore*release#*.deb
</pre><h3 class="anchored_heading" id="rootでないユーザーによるインストール">rootでないユーザーによるインストール</h3>
<p>MariaDB ColumnStoreはルートでないユーザーでもバイナリtarファイルによりインストール可能です。この手順も、インストール先をユーザー指定のディレクトリに変更するだけです。この手順は、全てのインストール対象サーバーで実行する必要があります。
この手順の説明では以下を仮定しています。</p>
<ul start="1"><li>rootでないユーザー "guest" を例として使用します。
</li><li>インストール先ディレクトリは "/home/guest/mariadb/columnstore" です。
</li></ul>
<p>ここでは以下の作業を行います。</p>
<ul start="1"><li>(rootユーザーで)rootでないユーザーを作成し、同名のグループを作成します。
</li><li>(rootユーザーで)sudo設定を更新します。
</li><li>(rootユーザーで)ユーザーファイル制限を更新します。
</li><li>(rootユーザーで)マウントしたSANを使用している場合、fstabを修正します。
</li><li>(rootユーザーで)必要に応じて既存のColumnStoreをアンインストールします。
</li><li>(rootユーザーで)MariaDB ColumnStoreが書き込みできるよう、対象ディレクトリのパーミッションを更新します。
</li><li>ファイルを用意します。
</li><li>(rootでないユーザーで)インストールを実行します。
</li><li>システム起動時にMariaDB ColumnStoreが自動起動するよう設定します。
</li></ul>
<h4 class="anchored_heading" id="rootユーザーでrootでないユーザーを作成し同名のグループを作成">(rootユーザーで)rootでないユーザーを作成し、同名のグループを作成</h4>
<p>バイナリファイルによるインストールを開始する前に、MariaDB ColumnStoreをインストールする対象の全サーバーにユーザーアカウントを用意してください。
アカウント名は全ノードで同じである必要があります。パスワードも全てのノードで同じにしてください。もしあるノードでパスワードを変更した場合、他のノードも同様に変更してください。
また、全てのノードで同じ基本パッケージ、や追加モジュール(とその依存モジュール)を使用してください。</p>
<ul start="1"><li>新規ユーザーを作成
</li></ul>
<p>グループIDはサンプルなので、1000である必要はありませんが、クラスタ内の全てのサーバーで同じにしてください。</p>
<pre class="fixed">adduser guest -u 1000
</pre><ul start="1"><li>グループを作成
</li></ul>
<pre class="fixed">addgroup guest
moduser -g guest guest
</pre><p>ユーザーIDは全ノードで同じにしてください。</p>
<ul start="1"><li>新規作成ユーザーにパスワードを設定
</li></ul>
<pre class="fixed">passwd guest
</pre><ul start="1"><li>guestユーザーでログイン
</li></ul>
<pre class="fixed">su - guest
</pre><ul start="1"><li>インストールユーザー(rootでないユーザー)が読み書きの権限があるディレクトリをインストールディレクトリとして選択します。インストールディレクトリは、全ノードで同じにしてください。
以下の例では、'/home/guest/mariadb/columnstore'ディレクトリを仮定しています。 <br>
それぞれのホストで、スタートアップシェル(.bashrc、.profieなど)に以下を記載してください。 
</li></ul>
<pre class="fixed">export COLUMNSTORE_INSTALL_DIR=$HOME/mariadb/columnstore
export PATH=$COLUMNSTORE_INSTALL_DIR/bin:$COLUMNSTORE_INSTALL_DIR/mysql/bin:/usr/sbin:$PATH
export LD_LIBRARY_PATH=$COLUMNSTORE_INSTALL_DIR/lib:$COLUMNSTORE_INSTALL_DIR/mysql/lib/mysql
</pre><p>これらのコマンドは非インタラクティブなシェルでのみ有効にしてください。記述を変更したら、'ssh user@host env'を実行して、これらが表示されるかを確認してください。
これらの設定を有効するには、一度ログオフし、ログインしなおしてください。</p>
<h4 class="anchored_heading" id="rootユーザーでsudo設定を更新">(rootユーザーで)sudo設定を更新</h4>
<p>それぞれのノードでsudo設定を修正し、インストールユーザー(rootでないユーザー)を追加する必要があります。
Unixコマンドである、visudoを使うことをお勧めします。以下の例では、'guest'ユーザーを追加しています。</p>
<p>visudo</p>
<ul start="1"><li>以下の行を追加します。 <br>
</li></ul>
<pre class="fixed">guest  ALL=(ALL)       NOPASSWD: ALL
</pre><ul start="1"><li>以下の行をコメントアウトし、'tty'なしでのログインを許可します。
</li></ul>
<pre class="fixed">#Defaults requiretty
</pre><h4 class="anchored_heading" id="rootユーザーでユーザーファイル制限を更新">(rootユーザーで)ユーザーファイル制限を更新</h4>
<p>ColumnStoreは指定ユーザーにファイルオープン数の制限を増加させておく必要があります。そのためには、/etc/security/limits.confファイル編集し、以下の記述を追加してください。</p>
<pre class="fixed">guest hard nofile 65536
guest soft nofile 65536
</pre><p>すでに 'guest'としてログインしている場合には、一度ログアウトして再ログインし、この設定を有効にしてください。</p>
<h4 class="anchored_heading" id="rootユーザーでマウントしたsanを使用している場合にfstabを修正">(rootユーザーで)マウントしたSANを使用している場合にfstabを修正</h4>
<p>データベースファイルの保存にSANを使っている場合、'users'オプションをfstabに追加する必要があります(rootユーザーによって)。
詳細は、先述の "SANにマウントしているデータベースファイル" を参照してください。</p>
<p><br>例： <br>
/dev/sda1 /home/guest/mariadb/columnstore/data1 ext2 noatime,nodiratime,noauto,users 0 0 <br>
/dev/sdd1 /home/mariadb/columnstore/data2 ext2 noatime,nodiratime,noauto,users 0 0 <br> </p>
<p>使用されるディスクに対して、インストールユーザー(rootでないユーザー)のパーミッションが設定されている必要があります。
以下は、dbrootの/dev/sda1について、インストールユーザー(rootでないユーザー, 'guest')へパーミッションの変更を行う、rootによるコマンド実行例です。 <br></p>
<pre class="fixed">mke2fs dbroot (i.e., /dev/sda1) 
mount /dev/sda1 /tmpdir 
chown -R infinidb.infinidb /tmpdir 
umount /tmpdir 
</pre><h4 class="anchored_heading" id="rootユーザーで必要に応じて既存のcolumnstoreをアンインストール">(rootユーザーで)必要に応じて既存のColumnStoreをアンインストール</h4>
<p>対象のノードにMariaDB ColumnStoreが今までにインストールされたことがある場合は、残骸が残っていないか確認してください。もしrootユーザーによってインストールされたファイルなどが残っていた場合、インストールは失敗します。</p>
<ul start="1"><li>MariaDB Columnstoreのインストールディレクトリが存在しないことを確認します。 <br>
/usr/local/mariadb/columnstore ディレクトリも、このディレクトリがインストール先ではないのであれば存在しないようにしてください。
存在する場合には、完全に空でインストールユーザー(rootでないユーザー)に所有権を付与してください。
</li></ul>
<ul start="1"><li>/etc/fstabの設定が新規インストールに対して正しい事を確認してください。<br>
</li></ul>
<ul start="1"><li>/etc/default/columnstoreディレクトリが存在ンしないことを確認してください。<br>
</li></ul>
<ul start="1"><li>/var/lock/subsys/mysql-Columnstoreファイルが存在しないことを確認してください。<br>
</li></ul>
<ul start="1"><li>/tmp/StopColumnstoreファイルが存在しないことを確認してください。<br>
</li></ul>
<p>また、/tmpディレクトリにrootユーザーが所有者であるファイルが存在しないようにしてください。</p>
<h4 class="anchored_heading" id="rootユーザーでmariadb-columnstoreが書き込みできるよう対象ディレクトリのパーミッションを更新">(rootユーザーで)MariaDB ColumnStoreが書き込みできるよう、対象ディレクトリのパーミッションを更新</h4>
<p>以下のディレクトリはMariaDB ColumnStoreにより書き込みが行われるため、パーミッションを書き込み可能なように設定してください。(rootユーザーで実行)</p>
<pre class="fixed">chmod 777 /tmp
chmod 777 /dev/shm
</pre><h4 class="anchored_heading" id="rootでないユーザーでインストールを実行">(rootでないユーザーで)インストールを実行</h4>
<p>本手順書に記載されいている通常のMariaDB ColumnStoreと同じ手順でインストールします。</p>
<ul start="1"><li>インストールユーザー(rootでないユーザー、本手順書の例ではguest)でログインします。
注意：次の手順に進む前に、現在のディレクトリが当該ユーザーのホームディレクトリであることを確認してください。
</li></ul>
<ul start="1"><li>MariaDB ColumnStoreのバイナリtarファイルをPM1として使用するサーバーのホームディレクトリに置いてください。tarファイルを/home/guestディレクトリに展開してください。
</li></ul>
<pre class="fixed">tar -xf mariadb-columnstore-release#.x86_64.bin.tar.gz
</pre><ul start="1"><li>インストール後のスクリプトを実行してください。
</li></ul>
<pre class="fixed">./mariadb/columnstore/bin/post-install --installdir=$HOME/mariadb/columnstore
</pre><ul start="1"><li>以下のインストール後の3つのコマンドラインを実行してください。詳細は "MariaDB ColumnStoreの構成" を参照してください。
</li></ul>
<pre class="fixed">export COLUMNSTORE_INSTALL_DIR=/home/guest/mariadb/columnstore
export LD_LIBRARY_PATH=/home/guest/mariadb/columnstore/lib:/home/guest/mariadb/columnstore/mysql/lib/mysql
/home/guest/mariadb/columnstore/bin/postConfigure -i /home/guest/mariadb/columnstore
</pre><p>a. パッケージタイプの問いには、'binary'を選択してください。</p>
<pre class="fixed">Enter the Package Type being installed to other servers [rpm,deb,binary] (rpm) &gt; binary
</pre><p>b. パスワードが聞かれたとき、インストールユーザー(rootでないユーザー、本手順書の例ではguest)のパスワードを入力するか、パスワードなしsshで全ノードをセットアップしている場合は、何も入力せずにenterを押してください。
sshキーの詳細は、"システム管理情報"を確認してください。</p>
<h4 class="anchored_heading" id="rootユーザーでdefaultファイルを設定">(rootユーザーで)Defaultファイルを設定</h4>
<p>それぞれのMariaDB ColumnStoreサーバーで、Defaultファイルを設定してください。</p>
<pre class="fixed">cp /home/guest/mariadb/columnstore/bin/columnstore.def /etc/default/columnstore (※リネーム)
</pre><p>Defaultファイルで、インストールディレクトリの設定( COLUMNSTORE_INSTALL_DIR )があるので、正しく( ここでは/home/guest/mariadb/columnstore )修正してください。</p>
<h4 class="anchored_heading" id="rootユーザーでインストール後">(rootユーザーで)インストール後</h4>
<p>MariaDB Columnstoreの自動起動とロギングの設定を行います。(オプション)</p>
<ul start="1"><li>MariaDB ColumnStoreがブート時に自動起動するようにするには、次のステップを各サーバーで実行してください。
</li></ul>
<ul start="1"><li>次の記述をe /etc/rc.local または /etc/rc.d/rc.local (centos7の場合) ファイルに追加します。
</li></ul>
<pre class="fixed">su - guest -l -c &#34;/home/guest/mariadb/columnstore/bin/columnstore start&#34;
</pre><p>または</p>
<pre class="fixed">sudo runuser -l mariadb-user -c &#34;/home/mariadb-user/mariadb/columnstore/bin/columnstore start&#34;
</pre><p>注意：上記エントリーをrc.localファイルに追加するとブート時に起動されるようになります。
rc.localファイルの場所はOSにより異なります。</p>
<ul start="1"><li>MariaDB Columnstoreは/var/log/mariadb/columnstoreディレクトリにある既存のロギングアプリケーションを使用します。
ログファイルを日次でリネームし、1週間分保持するには以下の設定を行います。(デフォルト)
</li></ul>
<pre class="fixed">cp /home/guest/mariadb/columnstore/bin/columnstoreLogRotate  /etc/logrotate.d/columnstore (※リネーム)
</pre><h3 class="anchored_heading" id="columnstore-cluster-テストツール">ColumnStore Cluster テストツール</h3>
<p>このツールはシングルサーバーやマルチノードのインストールの前に実行可能です。このツールにより、ColumnStoreで使用するサーバーの確認を行うことができます。</p>
<p><a href="https://mariadb.com/kb/en/mariadb/mariadb-columnstore-cluster-test-tool">https://mariadb.com/kb/en/mariadb/mariadb-columnstore-cluster-test-tool</a></p>
<p>次のステップでは、インストールスクリプトである、postConfigureを実行します。シングルサーバーまたはマルチサーバーのインストールガイドを確認してください。</p>
<h3 class="anchored_heading" id="columnstore-設定インストールツール">ColumnStore 設定、インストールツール</h3>
<p>MariaDB ColumnStoreシステム設定・インストールツールである 'postConfigure' により、MariaDB ColumnStoreシステム全体のインストールおよび設定を実行することができます。また、サーバー、ストレージ、システムなどの情報を表示することも可能です。本ツールはMariaDB ColumnStoreの設定ファイルである、Columnstore.xmlファイルを更新します。また、ユーザーモジュールとなるサーバーの設定も行うことができ、ColumnStoreシステム自体の起動も可能です。</p>
<p>注意：本ツールは、パフォーマンスモジュール(PM)#1 上で実行してください。</p>
<p>以下に、シングル構成、マルチサーバー構成でのインストールガイドを示します。</p>
<pre class="fixed"># /usr/local/mariadb/columnstore/bin/postConfigure -h

This is the MariaDB ColumnStore System Configuration and Installation tool.
It will Configure the MariaDB ColumnStore System based on Operator inputs and
will perform a Package Installation of all of the Modules within the
System that is being configured.

IMPORTANT: This tool should only be run on a Performance Module Server,
           preferably Module #1

Instructions:

	Press 'enter' to accept a value in (), if available or
	Enter one of the options within [], if available, or
	Enter a new value


Usage: postConfigure [-h][-c][-u][-p][-s][-port][-i][-n]
   -h  Help
   -c  Config File to use to extract configuration data, default is Columnstore.xml.rpmsave
   -u  Upgrade, Install using the Config File from -c, default to Columnstore.xml.rpmsave
	    If ssh-keys aren't setup, you should provide passwords as command line arguments
   -p  Unix Password, used with no-prompting option
   -s  Single Threaded Remote Install
   -port MariaDB ColumnStore Port Address
   -i Non-root Install directory, Only use for non-root installs
</pre>
    </div>


        
            <div id="subscribe" class="well well-small hide hidden-print"
                 data-subscribe-url="/kb/ja/columnstore-10x/+subscriptions/add"
                 data-unsubscribe-url="/kb/ja/columnstore-10x/+subscriptions/remove">
            </div>
        

        
        
    
        <div class="simple_section_nav">
            <ul class="nav nav-pills">
                
                
                    <li><a href="/kb/ja/columnstore/">
                        ↑ ColumnStoreを使用する ↑
                    </a>
                    </li>
                
                
            </ul>
        </div>
    

        

        
        <h2>Comments</h2>
        
    
    <div id="comments" data-node-id="7076" data-comments-url="/kb/ja/columnstore-10x/+comments"
         data-reply-url="/kb/ja/columnstore-10x/comments/post/">
        Comments loading...
    </div>

        

    </div>


                    <div id="content_disclaimer" class="graybox">
                        Content reproduced on this site is the property of its respective owners,
                        and this content is not reviewed in advance by MariaDB. The views, information and opinions
                        expressed by this content do not necessarily represent those of MariaDB or any other party.
                    </div>
                </div>
            </section>

            
                <div id="right_bar" class="col-md-2">
                    
    
        
        <ul class="section_navigation well well-small hidden-xs hidden-sm">
            
                <li class="parent"><a href="/kb/ja/columnstore/">
                    ↑ ColumnStoreを使用する ↑
                </a>
                </li>
            
            
                
                    <li class="active">
                        <span>ColumnStoreインストールの準備 - 1.0.X</span>
                        
                    </li>
                
            
        </ul>
    
    

                </div>
            
        </div>
    </div>
</div>

<!-- Footer -->
<footer id="footer">
    <div class="footer">
        <div class="container">
            <div class="row">
                <div class="col-xs-12">
                    <ul class="list-inline text-center footer-nav">
                        <li>
                            <h5>
                                <a href="https://mariadb.com/products" title="Products">Products</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/services" title="Services">Services</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/pricing" title="Pricing">Pricing</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a href="https://mariadb.com/resources" title="Resources">Resources</a>
                            </h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/about-us" title="About MariaDB">About Us</a></h5>
                        </li>
                        <li>
                            <h5><a href="https://mariadb.com/download" title="Download">Download MariaDB</a></h5>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="row row-10">
                
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div id="block-footerformcontact" class="block block-block-content block-block-contentd754ee1b-3cc9-40e7-9ef4-f504f1197fb1">
                        
                            <h5 style="font-weight: 400;">Subscribe to our newsletter!</h5>
                            <script src="//app-sj15.marketo.com/js/forms2/js/forms2.min.js"></script><form id="mktoForm_1498"></form>
                            <script>
                                <!--//--><![CDATA[// ><!--
                                MktoForms2.loadForm("//app-sj15.marketo.com", "573-PXI-984", 1498);
                                //--><!]]]]><![CDATA[>
                                //--><!]]>
                            </script>
                        
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-4 col-xs-12 item col-md-offset-4">
                    <div class="footer-copyright">
                        <div class="text-center">
                            <ul class="list-inline no-margin">
                                <li>
                                    <a href="/legal" title="Legal">Legal</a>
                                </li>
                                <li>
                                    <a href="/privacy-policy" title="Privacy Policy">Privacy Policy</a>
                                </li>
                                <li>
                                    <a href="/cookie-policy/" title="Cookies">Cookie Policy</a>
                                </li>
                            </ul>
                            <p>Copyright &copy; 2025 MariaDB. All rights reserved.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
</footer>
</div>

<div id="ajax_loading">
    <img src="/kb/static/images/ajax-loader.a51c5608d01a.gif" />
</div>

    <!-- Google Tag Manager -->
    <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-MK2847"
                      height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
            '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MK2847');</script>
    <!-- End Google Tag Manager -->

</body>

<script type="text/javascript" src="/kb/static/js/main.1587e3a666fc.js" charset="utf-8"></script>

</html>